function oE(e,t){for(var a=0;a<t.length;a++){const u=t[a];if(typeof u!="string"&&!Array.isArray(u)){for(const h in u)if(h!=="default"&&!(h in e)){const x=Object.getOwnPropertyDescriptor(u,h);x&&Object.defineProperty(e,h,x.get?x:{enumerable:!0,get:()=>u[h]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))u(h);new MutationObserver(h=>{for(const x of h)if(x.type==="childList")for(const v of x.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&u(v)}).observe(document,{childList:!0,subtree:!0});function a(h){const x={};return h.integrity&&(x.integrity=h.integrity),h.referrerPolicy&&(x.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?x.credentials="include":h.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function u(h){if(h.ep)return;h.ep=!0;const x=a(h);fetch(h.href,x)}})();var lh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function aE(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var a=function u(){return this instanceof u?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};a.prototype=t.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(e).forEach(function(u){var h=Object.getOwnPropertyDescriptor(e,u);Object.defineProperty(a,u,h.get?h:{enumerable:!0,get:function(){return e[u]}})}),a}var uw={exports:{}},Df={},cw={exports:{}},Nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qh=Symbol.for("react.element"),sE=Symbol.for("react.portal"),lE=Symbol.for("react.fragment"),uE=Symbol.for("react.strict_mode"),cE=Symbol.for("react.profiler"),hE=Symbol.for("react.provider"),dE=Symbol.for("react.context"),pE=Symbol.for("react.forward_ref"),fE=Symbol.for("react.suspense"),mE=Symbol.for("react.memo"),gE=Symbol.for("react.lazy"),a1=Symbol.iterator;function yE(e){return e===null||typeof e!="object"?null:(e=a1&&e[a1]||e["@@iterator"],typeof e=="function"?e:null)}var hw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dw=Object.assign,pw={};function Nu(e,t,a){this.props=e,this.context=t,this.refs=pw,this.updater=a||hw}Nu.prototype.isReactComponent={};Nu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Nu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fw(){}fw.prototype=Nu.prototype;function _0(e,t,a){this.props=e,this.context=t,this.refs=pw,this.updater=a||hw}var v0=_0.prototype=new fw;v0.constructor=_0;dw(v0,Nu.prototype);v0.isPureReactComponent=!0;var s1=Array.isArray,mw=Object.prototype.hasOwnProperty,x0={current:null},gw={key:!0,ref:!0,__self:!0,__source:!0};function yw(e,t,a){var u,h={},x=null,v=null;if(t!=null)for(u in t.ref!==void 0&&(v=t.ref),t.key!==void 0&&(x=""+t.key),t)mw.call(t,u)&&!gw.hasOwnProperty(u)&&(h[u]=t[u]);var c=arguments.length-2;if(c===1)h.children=a;else if(1<c){for(var I=Array(c),F=0;F<c;F++)I[F]=arguments[F+2];h.children=I}if(e&&e.defaultProps)for(u in c=e.defaultProps,c)h[u]===void 0&&(h[u]=c[u]);return{$$typeof:qh,type:e,key:x,ref:v,props:h,_owner:x0.current}}function _E(e,t){return{$$typeof:qh,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function w0(e){return typeof e=="object"&&e!==null&&e.$$typeof===qh}function vE(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(a){return t[a]})}var l1=/\/+/g;function _g(e,t){return typeof e=="object"&&e!==null&&e.key!=null?vE(""+e.key):t.toString(36)}function Ip(e,t,a,u,h){var x=typeof e;(x==="undefined"||x==="boolean")&&(e=null);var v=!1;if(e===null)v=!0;else switch(x){case"string":case"number":v=!0;break;case"object":switch(e.$$typeof){case qh:case sE:v=!0}}if(v)return v=e,h=h(v),e=u===""?"."+_g(v,0):u,s1(h)?(a="",e!=null&&(a=e.replace(l1,"$&/")+"/"),Ip(h,t,a,"",function(F){return F})):h!=null&&(w0(h)&&(h=_E(h,a+(!h.key||v&&v.key===h.key?"":(""+h.key).replace(l1,"$&/")+"/")+e)),t.push(h)),1;if(v=0,u=u===""?".":u+":",s1(e))for(var c=0;c<e.length;c++){x=e[c];var I=u+_g(x,c);v+=Ip(x,t,a,I,h)}else if(I=yE(e),typeof I=="function")for(e=I.call(e),c=0;!(x=e.next()).done;)x=x.value,I=u+_g(x,c++),v+=Ip(x,t,a,I,h);else if(x==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return v}function lp(e,t,a){if(e==null)return e;var u=[],h=0;return Ip(e,u,"","",function(x){return t.call(a,x,h++)}),u}function xE(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(a){(e._status===0||e._status===-1)&&(e._status=1,e._result=a)},function(a){(e._status===0||e._status===-1)&&(e._status=2,e._result=a)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ai={current:null},Ap={transition:null},wE={ReactCurrentDispatcher:ai,ReactCurrentBatchConfig:Ap,ReactCurrentOwner:x0};function _w(){throw Error("act(...) is not supported in production builds of React.")}Nt.Children={map:lp,forEach:function(e,t,a){lp(e,function(){t.apply(this,arguments)},a)},count:function(e){var t=0;return lp(e,function(){t++}),t},toArray:function(e){return lp(e,function(t){return t})||[]},only:function(e){if(!w0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Nt.Component=Nu;Nt.Fragment=lE;Nt.Profiler=cE;Nt.PureComponent=_0;Nt.StrictMode=uE;Nt.Suspense=fE;Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wE;Nt.act=_w;Nt.cloneElement=function(e,t,a){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var u=dw({},e.props),h=e.key,x=e.ref,v=e._owner;if(t!=null){if(t.ref!==void 0&&(x=t.ref,v=x0.current),t.key!==void 0&&(h=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(I in t)mw.call(t,I)&&!gw.hasOwnProperty(I)&&(u[I]=t[I]===void 0&&c!==void 0?c[I]:t[I])}var I=arguments.length-2;if(I===1)u.children=a;else if(1<I){c=Array(I);for(var F=0;F<I;F++)c[F]=arguments[F+2];u.children=c}return{$$typeof:qh,type:e.type,key:h,ref:x,props:u,_owner:v}};Nt.createContext=function(e){return e={$$typeof:dE,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:hE,_context:e},e.Consumer=e};Nt.createElement=yw;Nt.createFactory=function(e){var t=yw.bind(null,e);return t.type=e,t};Nt.createRef=function(){return{current:null}};Nt.forwardRef=function(e){return{$$typeof:pE,render:e}};Nt.isValidElement=w0;Nt.lazy=function(e){return{$$typeof:gE,_payload:{_status:-1,_result:e},_init:xE}};Nt.memo=function(e,t){return{$$typeof:mE,type:e,compare:t===void 0?null:t}};Nt.startTransition=function(e){var t=Ap.transition;Ap.transition={};try{e()}finally{Ap.transition=t}};Nt.unstable_act=_w;Nt.useCallback=function(e,t){return ai.current.useCallback(e,t)};Nt.useContext=function(e){return ai.current.useContext(e)};Nt.useDebugValue=function(){};Nt.useDeferredValue=function(e){return ai.current.useDeferredValue(e)};Nt.useEffect=function(e,t){return ai.current.useEffect(e,t)};Nt.useId=function(){return ai.current.useId()};Nt.useImperativeHandle=function(e,t,a){return ai.current.useImperativeHandle(e,t,a)};Nt.useInsertionEffect=function(e,t){return ai.current.useInsertionEffect(e,t)};Nt.useLayoutEffect=function(e,t){return ai.current.useLayoutEffect(e,t)};Nt.useMemo=function(e,t){return ai.current.useMemo(e,t)};Nt.useReducer=function(e,t,a){return ai.current.useReducer(e,t,a)};Nt.useRef=function(e){return ai.current.useRef(e)};Nt.useState=function(e){return ai.current.useState(e)};Nt.useSyncExternalStore=function(e,t,a){return ai.current.useSyncExternalStore(e,t,a)};Nt.useTransition=function(){return ai.current.useTransition()};Nt.version="18.3.1";cw.exports=Nt;var ke=cw.exports;const _n=Bu(ke),bE=oE({__proto__:null,default:_n},[ke]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SE=ke,TE=Symbol.for("react.element"),kE=Symbol.for("react.fragment"),EE=Object.prototype.hasOwnProperty,CE=SE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,PE={key:!0,ref:!0,__self:!0,__source:!0};function vw(e,t,a){var u,h={},x=null,v=null;a!==void 0&&(x=""+a),t.key!==void 0&&(x=""+t.key),t.ref!==void 0&&(v=t.ref);for(u in t)EE.call(t,u)&&!PE.hasOwnProperty(u)&&(h[u]=t[u]);if(e&&e.defaultProps)for(u in t=e.defaultProps,t)h[u]===void 0&&(h[u]=t[u]);return{$$typeof:TE,type:e,key:x,ref:v,props:h,_owner:CE.current}}Df.Fragment=kE;Df.jsx=vw;Df.jsxs=vw;uw.exports=Df;var Fe=uw.exports,iy={},xw={exports:{}},Vi={},ww={exports:{}},bw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Ye,mt){var yt=Ye.length;Ye.push(mt);e:for(;0<yt;){var Ct=yt-1>>>1,Rt=Ye[Ct];if(0<h(Rt,mt))Ye[Ct]=mt,Ye[yt]=Rt,yt=Ct;else break e}}function a(Ye){return Ye.length===0?null:Ye[0]}function u(Ye){if(Ye.length===0)return null;var mt=Ye[0],yt=Ye.pop();if(yt!==mt){Ye[0]=yt;e:for(var Ct=0,Rt=Ye.length,er=Rt>>>1;Ct<er;){var Ur=2*(Ct+1)-1,Ir=Ye[Ur],Dr=Ur+1,Gr=Ye[Dr];if(0>h(Ir,yt))Dr<Rt&&0>h(Gr,Ir)?(Ye[Ct]=Gr,Ye[Dr]=yt,Ct=Dr):(Ye[Ct]=Ir,Ye[Ur]=yt,Ct=Ur);else if(Dr<Rt&&0>h(Gr,yt))Ye[Ct]=Gr,Ye[Dr]=yt,Ct=Dr;else break e}}return mt}function h(Ye,mt){var yt=Ye.sortIndex-mt.sortIndex;return yt!==0?yt:Ye.id-mt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;e.unstable_now=function(){return x.now()}}else{var v=Date,c=v.now();e.unstable_now=function(){return v.now()-c}}var I=[],F=[],W=1,D=null,B=3,le=!1,ge=!1,de=!1,we=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(Ye){for(var mt=a(F);mt!==null;){if(mt.callback===null)u(F);else if(mt.startTime<=Ye)u(F),mt.sortIndex=mt.expirationTime,t(I,mt);else break;mt=a(F)}}function _e(Ye){if(de=!1,te(Ye),!ge)if(a(I)!==null)ge=!0,Gt(Ce);else{var mt=a(F);mt!==null&&ar(_e,mt.startTime-Ye)}}function Ce(Ye,mt){ge=!1,de&&(de=!1,ee(Ge),Ge=-1),le=!0;var yt=B;try{for(te(mt),D=a(I);D!==null&&(!(D.expirationTime>mt)||Ye&&!$e());){var Ct=D.callback;if(typeof Ct=="function"){D.callback=null,B=D.priorityLevel;var Rt=Ct(D.expirationTime<=mt);mt=e.unstable_now(),typeof Rt=="function"?D.callback=Rt:D===a(I)&&u(I),te(mt)}else u(I);D=a(I)}if(D!==null)var er=!0;else{var Ur=a(F);Ur!==null&&ar(_e,Ur.startTime-mt),er=!1}return er}finally{D=null,B=yt,le=!1}}var Ae=!1,Le=null,Ge=-1,Re=5,Me=-1;function $e(){return!(e.unstable_now()-Me<Re)}function ft(){if(Le!==null){var Ye=e.unstable_now();Me=Ye;var mt=!0;try{mt=Le(!0,Ye)}finally{mt?it():(Ae=!1,Le=null)}}else Ae=!1}var it;if(typeof q=="function")it=function(){q(ft)};else if(typeof MessageChannel<"u"){var st=new MessageChannel,or=st.port2;st.port1.onmessage=ft,it=function(){or.postMessage(null)}}else it=function(){we(ft,0)};function Gt(Ye){Le=Ye,Ae||(Ae=!0,it())}function ar(Ye,mt){Ge=we(function(){Ye(e.unstable_now())},mt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ye){Ye.callback=null},e.unstable_continueExecution=function(){ge||le||(ge=!0,Gt(Ce))},e.unstable_forceFrameRate=function(Ye){0>Ye||125<Ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Re=0<Ye?Math.floor(1e3/Ye):5},e.unstable_getCurrentPriorityLevel=function(){return B},e.unstable_getFirstCallbackNode=function(){return a(I)},e.unstable_next=function(Ye){switch(B){case 1:case 2:case 3:var mt=3;break;default:mt=B}var yt=B;B=mt;try{return Ye()}finally{B=yt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ye,mt){switch(Ye){case 1:case 2:case 3:case 4:case 5:break;default:Ye=3}var yt=B;B=Ye;try{return mt()}finally{B=yt}},e.unstable_scheduleCallback=function(Ye,mt,yt){var Ct=e.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?Ct+yt:Ct):yt=Ct,Ye){case 1:var Rt=-1;break;case 2:Rt=250;break;case 5:Rt=1073741823;break;case 4:Rt=1e4;break;default:Rt=5e3}return Rt=yt+Rt,Ye={id:W++,callback:mt,priorityLevel:Ye,startTime:yt,expirationTime:Rt,sortIndex:-1},yt>Ct?(Ye.sortIndex=yt,t(F,Ye),a(I)===null&&Ye===a(F)&&(de?(ee(Ge),Ge=-1):de=!0,ar(_e,yt-Ct))):(Ye.sortIndex=Rt,t(I,Ye),ge||le||(ge=!0,Gt(Ce))),Ye},e.unstable_shouldYield=$e,e.unstable_wrapCallback=function(Ye){var mt=B;return function(){var yt=B;B=mt;try{return Ye.apply(this,arguments)}finally{B=yt}}}})(bw);ww.exports=bw;var IE=ww.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AE=ke,Ui=IE;function Ue(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sw=new Set,Eh={};function nl(e,t){ku(e,t),ku(e+"Capture",t)}function ku(e,t){for(Eh[e]=t,e=0;e<t.length;e++)Sw.add(t[e])}var da=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oy=Object.prototype.hasOwnProperty,ME=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u1={},c1={};function zE(e){return oy.call(c1,e)?!0:oy.call(u1,e)?!1:ME.test(e)?c1[e]=!0:(u1[e]=!0,!1)}function LE(e,t,a,u){if(a!==null&&a.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return u?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function RE(e,t,a,u){if(t===null||typeof t>"u"||LE(e,t,a,u))return!0;if(u)return!1;if(a!==null)switch(a.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function si(e,t,a,u,h,x,v){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=a,this.propertyName=e,this.type=t,this.sanitizeURL=x,this.removeEmptyString=v}var Mn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Mn[e]=new si(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Mn[t]=new si(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Mn[e]=new si(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Mn[e]=new si(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Mn[e]=new si(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Mn[e]=new si(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Mn[e]=new si(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Mn[e]=new si(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Mn[e]=new si(e,5,!1,e.toLowerCase(),null,!1,!1)});var b0=/[\-:]([a-z])/g;function S0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(b0,S0);Mn[t]=new si(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(b0,S0);Mn[t]=new si(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(b0,S0);Mn[t]=new si(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Mn[e]=new si(e,1,!1,e.toLowerCase(),null,!1,!1)});Mn.xlinkHref=new si("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Mn[e]=new si(e,1,!1,e.toLowerCase(),null,!0,!0)});function T0(e,t,a,u){var h=Mn.hasOwnProperty(t)?Mn[t]:null;(h!==null?h.type!==0:u||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(RE(t,a,h,u)&&(a=null),u||h===null?zE(t)&&(a===null?e.removeAttribute(t):e.setAttribute(t,""+a)):h.mustUseProperty?e[h.propertyName]=a===null?h.type===3?!1:"":a:(t=h.attributeName,u=h.attributeNamespace,a===null?e.removeAttribute(t):(h=h.type,a=h===3||h===4&&a===!0?"":""+a,u?e.setAttributeNS(u,t,a):e.setAttribute(t,a))))}var ga=AE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,up=Symbol.for("react.element"),ru=Symbol.for("react.portal"),nu=Symbol.for("react.fragment"),k0=Symbol.for("react.strict_mode"),ay=Symbol.for("react.profiler"),Tw=Symbol.for("react.provider"),kw=Symbol.for("react.context"),E0=Symbol.for("react.forward_ref"),sy=Symbol.for("react.suspense"),ly=Symbol.for("react.suspense_list"),C0=Symbol.for("react.memo"),Wa=Symbol.for("react.lazy"),Ew=Symbol.for("react.offscreen"),h1=Symbol.iterator;function Qc(e){return e===null||typeof e!="object"?null:(e=h1&&e[h1]||e["@@iterator"],typeof e=="function"?e:null)}var Rr=Object.assign,vg;function uh(e){if(vg===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);vg=t&&t[1]||""}return`
`+vg+e}var xg=!1;function wg(e,t){if(!e||xg)return"";xg=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(F){var u=F}Reflect.construct(e,[],t)}else{try{t.call()}catch(F){u=F}e.call(t.prototype)}else{try{throw Error()}catch(F){u=F}e()}}catch(F){if(F&&u&&typeof F.stack=="string"){for(var h=F.stack.split(`
`),x=u.stack.split(`
`),v=h.length-1,c=x.length-1;1<=v&&0<=c&&h[v]!==x[c];)c--;for(;1<=v&&0<=c;v--,c--)if(h[v]!==x[c]){if(v!==1||c!==1)do if(v--,c--,0>c||h[v]!==x[c]){var I=`
`+h[v].replace(" at new "," at ");return e.displayName&&I.includes("<anonymous>")&&(I=I.replace("<anonymous>",e.displayName)),I}while(1<=v&&0<=c);break}}}finally{xg=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?uh(e):""}function DE(e){switch(e.tag){case 5:return uh(e.type);case 16:return uh("Lazy");case 13:return uh("Suspense");case 19:return uh("SuspenseList");case 0:case 2:case 15:return e=wg(e.type,!1),e;case 11:return e=wg(e.type.render,!1),e;case 1:return e=wg(e.type,!0),e;default:return""}}function uy(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case nu:return"Fragment";case ru:return"Portal";case ay:return"Profiler";case k0:return"StrictMode";case sy:return"Suspense";case ly:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case kw:return(e.displayName||"Context")+".Consumer";case Tw:return(e._context.displayName||"Context")+".Provider";case E0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case C0:return t=e.displayName||null,t!==null?t:uy(e.type)||"Memo";case Wa:t=e._payload,e=e._init;try{return uy(e(t))}catch{}}return null}function OE(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uy(t);case 8:return t===k0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function us(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Cw(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function FE(e){var t=Cw(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),u=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,x=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return h.call(this)},set:function(v){u=""+v,x.call(this,v)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(v){u=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function cp(e){e._valueTracker||(e._valueTracker=FE(e))}function Pw(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),u="";return e&&(u=Cw(e)?e.checked?"true":"false":e.value),e=u,e!==a?(t.setValue(e),!0):!1}function Wp(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function cy(e,t){var a=t.checked;return Rr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function d1(e,t){var a=t.defaultValue==null?"":t.defaultValue,u=t.checked!=null?t.checked:t.defaultChecked;a=us(t.value!=null?t.value:a),e._wrapperState={initialChecked:u,initialValue:a,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Iw(e,t){t=t.checked,t!=null&&T0(e,"checked",t,!1)}function hy(e,t){Iw(e,t);var a=us(t.value),u=t.type;if(a!=null)u==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(u==="submit"||u==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?dy(e,t.type,a):t.hasOwnProperty("defaultValue")&&dy(e,t.type,us(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function p1(e,t,a){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var u=t.type;if(!(u!=="submit"&&u!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,a||t===e.value||(e.value=t),e.defaultValue=t}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function dy(e,t,a){(t!=="number"||Wp(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var ch=Array.isArray;function fu(e,t,a,u){if(e=e.options,t){t={};for(var h=0;h<a.length;h++)t["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=t.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&u&&(e[a].defaultSelected=!0)}else{for(a=""+us(a),t=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,u&&(e[h].defaultSelected=!0);return}t!==null||e[h].disabled||(t=e[h])}t!==null&&(t.selected=!0)}}function py(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ue(91));return Rr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function f1(e,t){var a=t.value;if(a==null){if(a=t.children,t=t.defaultValue,a!=null){if(t!=null)throw Error(Ue(92));if(ch(a)){if(1<a.length)throw Error(Ue(93));a=a[0]}t=a}t==null&&(t=""),a=t}e._wrapperState={initialValue:us(a)}}function Aw(e,t){var a=us(t.value),u=us(t.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),t.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),u!=null&&(e.defaultValue=""+u)}function m1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Mw(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fy(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Mw(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var hp,zw=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,a,u,h){MSApp.execUnsafeLocalFunction(function(){return e(t,a,u,h)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(hp=hp||document.createElement("div"),hp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=hp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ch(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var gh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BE=["Webkit","ms","Moz","O"];Object.keys(gh).forEach(function(e){BE.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gh[t]=gh[e]})});function Lw(e,t,a){return t==null||typeof t=="boolean"||t===""?"":a||typeof t!="number"||t===0||gh.hasOwnProperty(e)&&gh[e]?(""+t).trim():t+"px"}function Rw(e,t){e=e.style;for(var a in t)if(t.hasOwnProperty(a)){var u=a.indexOf("--")===0,h=Lw(a,t[a],u);a==="float"&&(a="cssFloat"),u?e.setProperty(a,h):e[a]=h}}var NE=Rr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function my(e,t){if(t){if(NE[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ue(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ue(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ue(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ue(62))}}function gy(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yy=null;function P0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _y=null,mu=null,gu=null;function g1(e){if(e=Kh(e)){if(typeof _y!="function")throw Error(Ue(280));var t=e.stateNode;t&&(t=jf(t),_y(e.stateNode,e.type,t))}}function Dw(e){mu?gu?gu.push(e):gu=[e]:mu=e}function Ow(){if(mu){var e=mu,t=gu;if(gu=mu=null,g1(e),t)for(e=0;e<t.length;e++)g1(t[e])}}function Fw(e,t){return e(t)}function Bw(){}var bg=!1;function Nw(e,t,a){if(bg)return e(t,a);bg=!0;try{return Fw(e,t,a)}finally{bg=!1,(mu!==null||gu!==null)&&(Bw(),Ow())}}function Ph(e,t){var a=e.stateNode;if(a===null)return null;var u=jf(a);if(u===null)return null;a=u[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(e=e.type,u=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!u;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(Ue(231,t,typeof a));return a}var vy=!1;if(da)try{var eh={};Object.defineProperty(eh,"passive",{get:function(){vy=!0}}),window.addEventListener("test",eh,eh),window.removeEventListener("test",eh,eh)}catch{vy=!1}function jE(e,t,a,u,h,x,v,c,I){var F=Array.prototype.slice.call(arguments,3);try{t.apply(a,F)}catch(W){this.onError(W)}}var yh=!1,qp=null,Zp=!1,xy=null,UE={onError:function(e){yh=!0,qp=e}};function VE(e,t,a,u,h,x,v,c,I){yh=!1,qp=null,jE.apply(UE,arguments)}function $E(e,t,a,u,h,x,v,c,I){if(VE.apply(this,arguments),yh){if(yh){var F=qp;yh=!1,qp=null}else throw Error(Ue(198));Zp||(Zp=!0,xy=F)}}function il(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function jw(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function y1(e){if(il(e)!==e)throw Error(Ue(188))}function HE(e){var t=e.alternate;if(!t){if(t=il(e),t===null)throw Error(Ue(188));return t!==e?null:e}for(var a=e,u=t;;){var h=a.return;if(h===null)break;var x=h.alternate;if(x===null){if(u=h.return,u!==null){a=u;continue}break}if(h.child===x.child){for(x=h.child;x;){if(x===a)return y1(h),e;if(x===u)return y1(h),t;x=x.sibling}throw Error(Ue(188))}if(a.return!==u.return)a=h,u=x;else{for(var v=!1,c=h.child;c;){if(c===a){v=!0,a=h,u=x;break}if(c===u){v=!0,u=h,a=x;break}c=c.sibling}if(!v){for(c=x.child;c;){if(c===a){v=!0,a=x,u=h;break}if(c===u){v=!0,u=x,a=h;break}c=c.sibling}if(!v)throw Error(Ue(189))}}if(a.alternate!==u)throw Error(Ue(190))}if(a.tag!==3)throw Error(Ue(188));return a.stateNode.current===a?e:t}function Uw(e){return e=HE(e),e!==null?Vw(e):null}function Vw(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Vw(e);if(t!==null)return t;e=e.sibling}return null}var $w=Ui.unstable_scheduleCallback,_1=Ui.unstable_cancelCallback,WE=Ui.unstable_shouldYield,qE=Ui.unstable_requestPaint,Zr=Ui.unstable_now,ZE=Ui.unstable_getCurrentPriorityLevel,I0=Ui.unstable_ImmediatePriority,Hw=Ui.unstable_UserBlockingPriority,Gp=Ui.unstable_NormalPriority,GE=Ui.unstable_LowPriority,Ww=Ui.unstable_IdlePriority,Of=null,Vo=null;function KE(e){if(Vo&&typeof Vo.onCommitFiberRoot=="function")try{Vo.onCommitFiberRoot(Of,e,void 0,(e.current.flags&128)===128)}catch{}}var wo=Math.clz32?Math.clz32:JE,XE=Math.log,YE=Math.LN2;function JE(e){return e>>>=0,e===0?32:31-(XE(e)/YE|0)|0}var dp=64,pp=4194304;function hh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Kp(e,t){var a=e.pendingLanes;if(a===0)return 0;var u=0,h=e.suspendedLanes,x=e.pingedLanes,v=a&268435455;if(v!==0){var c=v&~h;c!==0?u=hh(c):(x&=v,x!==0&&(u=hh(x)))}else v=a&~h,v!==0?u=hh(v):x!==0&&(u=hh(x));if(u===0)return 0;if(t!==0&&t!==u&&!(t&h)&&(h=u&-u,x=t&-t,h>=x||h===16&&(x&4194240)!==0))return t;if(u&4&&(u|=a&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=u;0<t;)a=31-wo(t),h=1<<a,u|=e[a],t&=~h;return u}function QE(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eC(e,t){for(var a=e.suspendedLanes,u=e.pingedLanes,h=e.expirationTimes,x=e.pendingLanes;0<x;){var v=31-wo(x),c=1<<v,I=h[v];I===-1?(!(c&a)||c&u)&&(h[v]=QE(c,t)):I<=t&&(e.expiredLanes|=c),x&=~c}}function wy(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function qw(){var e=dp;return dp<<=1,!(dp&4194240)&&(dp=64),e}function Sg(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Zh(e,t,a){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-wo(t),e[t]=a}function tC(e,t){var a=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var u=e.eventTimes;for(e=e.expirationTimes;0<a;){var h=31-wo(a),x=1<<h;t[h]=0,u[h]=-1,e[h]=-1,a&=~x}}function A0(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var u=31-wo(a),h=1<<u;h&t|e[u]&t&&(e[u]|=t),a&=~h}}var ir=0;function Zw(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Gw,M0,Kw,Xw,Yw,by=!1,fp=[],es=null,ts=null,rs=null,Ih=new Map,Ah=new Map,Ga=[],rC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function v1(e,t){switch(e){case"focusin":case"focusout":es=null;break;case"dragenter":case"dragleave":ts=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":Ih.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ah.delete(t.pointerId)}}function th(e,t,a,u,h,x){return e===null||e.nativeEvent!==x?(e={blockedOn:t,domEventName:a,eventSystemFlags:u,nativeEvent:x,targetContainers:[h]},t!==null&&(t=Kh(t),t!==null&&M0(t)),e):(e.eventSystemFlags|=u,t=e.targetContainers,h!==null&&t.indexOf(h)===-1&&t.push(h),e)}function nC(e,t,a,u,h){switch(t){case"focusin":return es=th(es,e,t,a,u,h),!0;case"dragenter":return ts=th(ts,e,t,a,u,h),!0;case"mouseover":return rs=th(rs,e,t,a,u,h),!0;case"pointerover":var x=h.pointerId;return Ih.set(x,th(Ih.get(x)||null,e,t,a,u,h)),!0;case"gotpointercapture":return x=h.pointerId,Ah.set(x,th(Ah.get(x)||null,e,t,a,u,h)),!0}return!1}function Jw(e){var t=Ws(e.target);if(t!==null){var a=il(t);if(a!==null){if(t=a.tag,t===13){if(t=jw(a),t!==null){e.blockedOn=t,Yw(e.priority,function(){Kw(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Mp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Sy(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var u=new a.constructor(a.type,a);yy=u,a.target.dispatchEvent(u),yy=null}else return t=Kh(a),t!==null&&M0(t),e.blockedOn=a,!1;t.shift()}return!0}function x1(e,t,a){Mp(e)&&a.delete(t)}function iC(){by=!1,es!==null&&Mp(es)&&(es=null),ts!==null&&Mp(ts)&&(ts=null),rs!==null&&Mp(rs)&&(rs=null),Ih.forEach(x1),Ah.forEach(x1)}function rh(e,t){e.blockedOn===t&&(e.blockedOn=null,by||(by=!0,Ui.unstable_scheduleCallback(Ui.unstable_NormalPriority,iC)))}function Mh(e){function t(h){return rh(h,e)}if(0<fp.length){rh(fp[0],e);for(var a=1;a<fp.length;a++){var u=fp[a];u.blockedOn===e&&(u.blockedOn=null)}}for(es!==null&&rh(es,e),ts!==null&&rh(ts,e),rs!==null&&rh(rs,e),Ih.forEach(t),Ah.forEach(t),a=0;a<Ga.length;a++)u=Ga[a],u.blockedOn===e&&(u.blockedOn=null);for(;0<Ga.length&&(a=Ga[0],a.blockedOn===null);)Jw(a),a.blockedOn===null&&Ga.shift()}var yu=ga.ReactCurrentBatchConfig,Xp=!0;function oC(e,t,a,u){var h=ir,x=yu.transition;yu.transition=null;try{ir=1,z0(e,t,a,u)}finally{ir=h,yu.transition=x}}function aC(e,t,a,u){var h=ir,x=yu.transition;yu.transition=null;try{ir=4,z0(e,t,a,u)}finally{ir=h,yu.transition=x}}function z0(e,t,a,u){if(Xp){var h=Sy(e,t,a,u);if(h===null)Lg(e,t,u,Yp,a),v1(e,u);else if(nC(h,e,t,a,u))u.stopPropagation();else if(v1(e,u),t&4&&-1<rC.indexOf(e)){for(;h!==null;){var x=Kh(h);if(x!==null&&Gw(x),x=Sy(e,t,a,u),x===null&&Lg(e,t,u,Yp,a),x===h)break;h=x}h!==null&&u.stopPropagation()}else Lg(e,t,u,null,a)}}var Yp=null;function Sy(e,t,a,u){if(Yp=null,e=P0(u),e=Ws(e),e!==null)if(t=il(e),t===null)e=null;else if(a=t.tag,a===13){if(e=jw(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yp=e,null}function Qw(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZE()){case I0:return 1;case Hw:return 4;case Gp:case GE:return 16;case Ww:return 536870912;default:return 16}default:return 16}}var Xa=null,L0=null,zp=null;function eb(){if(zp)return zp;var e,t=L0,a=t.length,u,h="value"in Xa?Xa.value:Xa.textContent,x=h.length;for(e=0;e<a&&t[e]===h[e];e++);var v=a-e;for(u=1;u<=v&&t[a-u]===h[x-u];u++);return zp=h.slice(e,1<u?1-u:void 0)}function Lp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function mp(){return!0}function w1(){return!1}function $i(e){function t(a,u,h,x,v){this._reactName=a,this._targetInst=h,this.type=u,this.nativeEvent=x,this.target=v,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(a=e[c],this[c]=a?a(x):x[c]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?mp:w1,this.isPropagationStopped=w1,this}return Rr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=mp)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=mp)},persist:function(){},isPersistent:mp}),t}var ju={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},R0=$i(ju),Gh=Rr({},ju,{view:0,detail:0}),sC=$i(Gh),Tg,kg,nh,Ff=Rr({},Gh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:D0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nh&&(nh&&e.type==="mousemove"?(Tg=e.screenX-nh.screenX,kg=e.screenY-nh.screenY):kg=Tg=0,nh=e),Tg)},movementY:function(e){return"movementY"in e?e.movementY:kg}}),b1=$i(Ff),lC=Rr({},Ff,{dataTransfer:0}),uC=$i(lC),cC=Rr({},Gh,{relatedTarget:0}),Eg=$i(cC),hC=Rr({},ju,{animationName:0,elapsedTime:0,pseudoElement:0}),dC=$i(hC),pC=Rr({},ju,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fC=$i(pC),mC=Rr({},ju,{data:0}),S1=$i(mC),gC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_C={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vC(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=_C[e])?!!t[e]:!1}function D0(){return vC}var xC=Rr({},Gh,{key:function(e){if(e.key){var t=gC[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Lp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?yC[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:D0,charCode:function(e){return e.type==="keypress"?Lp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Lp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wC=$i(xC),bC=Rr({},Ff,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T1=$i(bC),SC=Rr({},Gh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:D0}),TC=$i(SC),kC=Rr({},ju,{propertyName:0,elapsedTime:0,pseudoElement:0}),EC=$i(kC),CC=Rr({},Ff,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),PC=$i(CC),IC=[9,13,27,32],O0=da&&"CompositionEvent"in window,_h=null;da&&"documentMode"in document&&(_h=document.documentMode);var AC=da&&"TextEvent"in window&&!_h,tb=da&&(!O0||_h&&8<_h&&11>=_h),k1=" ",E1=!1;function rb(e,t){switch(e){case"keyup":return IC.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nb(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var iu=!1;function MC(e,t){switch(e){case"compositionend":return nb(t);case"keypress":return t.which!==32?null:(E1=!0,k1);case"textInput":return e=t.data,e===k1&&E1?null:e;default:return null}}function zC(e,t){if(iu)return e==="compositionend"||!O0&&rb(e,t)?(e=eb(),zp=L0=Xa=null,iu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tb&&t.locale!=="ko"?null:t.data;default:return null}}var LC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function C1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!LC[e.type]:t==="textarea"}function ib(e,t,a,u){Dw(u),t=Jp(t,"onChange"),0<t.length&&(a=new R0("onChange","change",null,a,u),e.push({event:a,listeners:t}))}var vh=null,zh=null;function RC(e){mb(e,0)}function Bf(e){var t=su(e);if(Pw(t))return e}function DC(e,t){if(e==="change")return t}var ob=!1;if(da){var Cg;if(da){var Pg="oninput"in document;if(!Pg){var P1=document.createElement("div");P1.setAttribute("oninput","return;"),Pg=typeof P1.oninput=="function"}Cg=Pg}else Cg=!1;ob=Cg&&(!document.documentMode||9<document.documentMode)}function I1(){vh&&(vh.detachEvent("onpropertychange",ab),zh=vh=null)}function ab(e){if(e.propertyName==="value"&&Bf(zh)){var t=[];ib(t,zh,e,P0(e)),Nw(RC,t)}}function OC(e,t,a){e==="focusin"?(I1(),vh=t,zh=a,vh.attachEvent("onpropertychange",ab)):e==="focusout"&&I1()}function FC(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bf(zh)}function BC(e,t){if(e==="click")return Bf(t)}function NC(e,t){if(e==="input"||e==="change")return Bf(t)}function jC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var So=typeof Object.is=="function"?Object.is:jC;function Lh(e,t){if(So(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),u=Object.keys(t);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var h=a[u];if(!oy.call(t,h)||!So(e[h],t[h]))return!1}return!0}function A1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function M1(e,t){var a=A1(e);e=0;for(var u;a;){if(a.nodeType===3){if(u=e+a.textContent.length,e<=t&&u>=t)return{node:a,offset:t-e};e=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=A1(a)}}function sb(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?sb(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function lb(){for(var e=window,t=Wp();t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Wp(e.document)}return t}function F0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function UC(e){var t=lb(),a=e.focusedElem,u=e.selectionRange;if(t!==a&&a&&a.ownerDocument&&sb(a.ownerDocument.documentElement,a)){if(u!==null&&F0(a)){if(t=u.start,e=u.end,e===void 0&&(e=t),"selectionStart"in a)a.selectionStart=t,a.selectionEnd=Math.min(e,a.value.length);else if(e=(t=a.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var h=a.textContent.length,x=Math.min(u.start,h);u=u.end===void 0?x:Math.min(u.end,h),!e.extend&&x>u&&(h=u,u=x,x=h),h=M1(a,x);var v=M1(a,u);h&&v&&(e.rangeCount!==1||e.anchorNode!==h.node||e.anchorOffset!==h.offset||e.focusNode!==v.node||e.focusOffset!==v.offset)&&(t=t.createRange(),t.setStart(h.node,h.offset),e.removeAllRanges(),x>u?(e.addRange(t),e.extend(v.node,v.offset)):(t.setEnd(v.node,v.offset),e.addRange(t)))}}for(t=[],e=a;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<t.length;a++)e=t[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var VC=da&&"documentMode"in document&&11>=document.documentMode,ou=null,Ty=null,xh=null,ky=!1;function z1(e,t,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ky||ou==null||ou!==Wp(u)||(u=ou,"selectionStart"in u&&F0(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),xh&&Lh(xh,u)||(xh=u,u=Jp(Ty,"onSelect"),0<u.length&&(t=new R0("onSelect","select",null,t,a),e.push({event:t,listeners:u}),t.target=ou)))}function gp(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var au={animationend:gp("Animation","AnimationEnd"),animationiteration:gp("Animation","AnimationIteration"),animationstart:gp("Animation","AnimationStart"),transitionend:gp("Transition","TransitionEnd")},Ig={},ub={};da&&(ub=document.createElement("div").style,"AnimationEvent"in window||(delete au.animationend.animation,delete au.animationiteration.animation,delete au.animationstart.animation),"TransitionEvent"in window||delete au.transitionend.transition);function Nf(e){if(Ig[e])return Ig[e];if(!au[e])return e;var t=au[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in ub)return Ig[e]=t[a];return e}var cb=Nf("animationend"),hb=Nf("animationiteration"),db=Nf("animationstart"),pb=Nf("transitionend"),fb=new Map,L1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hs(e,t){fb.set(e,t),nl(t,[e])}for(var Ag=0;Ag<L1.length;Ag++){var Mg=L1[Ag],$C=Mg.toLowerCase(),HC=Mg[0].toUpperCase()+Mg.slice(1);hs($C,"on"+HC)}hs(cb,"onAnimationEnd");hs(hb,"onAnimationIteration");hs(db,"onAnimationStart");hs("dblclick","onDoubleClick");hs("focusin","onFocus");hs("focusout","onBlur");hs(pb,"onTransitionEnd");ku("onMouseEnter",["mouseout","mouseover"]);ku("onMouseLeave",["mouseout","mouseover"]);ku("onPointerEnter",["pointerout","pointerover"]);ku("onPointerLeave",["pointerout","pointerover"]);nl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nl("onBeforeInput",["compositionend","keypress","textInput","paste"]);nl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WC=new Set("cancel close invalid load scroll toggle".split(" ").concat(dh));function R1(e,t,a){var u=e.type||"unknown-event";e.currentTarget=a,$E(u,t,void 0,e),e.currentTarget=null}function mb(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var u=e[a],h=u.event;u=u.listeners;e:{var x=void 0;if(t)for(var v=u.length-1;0<=v;v--){var c=u[v],I=c.instance,F=c.currentTarget;if(c=c.listener,I!==x&&h.isPropagationStopped())break e;R1(h,c,F),x=I}else for(v=0;v<u.length;v++){if(c=u[v],I=c.instance,F=c.currentTarget,c=c.listener,I!==x&&h.isPropagationStopped())break e;R1(h,c,F),x=I}}}if(Zp)throw e=xy,Zp=!1,xy=null,e}function wr(e,t){var a=t[Ay];a===void 0&&(a=t[Ay]=new Set);var u=e+"__bubble";a.has(u)||(gb(t,e,2,!1),a.add(u))}function zg(e,t,a){var u=0;t&&(u|=4),gb(a,e,u,t)}var yp="_reactListening"+Math.random().toString(36).slice(2);function Rh(e){if(!e[yp]){e[yp]=!0,Sw.forEach(function(a){a!=="selectionchange"&&(WC.has(a)||zg(a,!1,e),zg(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[yp]||(t[yp]=!0,zg("selectionchange",!1,t))}}function gb(e,t,a,u){switch(Qw(t)){case 1:var h=oC;break;case 4:h=aC;break;default:h=z0}a=h.bind(null,t,a,e),h=void 0,!vy||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(h=!0),u?h!==void 0?e.addEventListener(t,a,{capture:!0,passive:h}):e.addEventListener(t,a,!0):h!==void 0?e.addEventListener(t,a,{passive:h}):e.addEventListener(t,a,!1)}function Lg(e,t,a,u,h){var x=u;if(!(t&1)&&!(t&2)&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var c=u.stateNode.containerInfo;if(c===h||c.nodeType===8&&c.parentNode===h)break;if(v===4)for(v=u.return;v!==null;){var I=v.tag;if((I===3||I===4)&&(I=v.stateNode.containerInfo,I===h||I.nodeType===8&&I.parentNode===h))return;v=v.return}for(;c!==null;){if(v=Ws(c),v===null)return;if(I=v.tag,I===5||I===6){u=x=v;continue e}c=c.parentNode}}u=u.return}Nw(function(){var F=x,W=P0(a),D=[];e:{var B=fb.get(e);if(B!==void 0){var le=R0,ge=e;switch(e){case"keypress":if(Lp(a)===0)break e;case"keydown":case"keyup":le=wC;break;case"focusin":ge="focus",le=Eg;break;case"focusout":ge="blur",le=Eg;break;case"beforeblur":case"afterblur":le=Eg;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=b1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=uC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=TC;break;case cb:case hb:case db:le=dC;break;case pb:le=EC;break;case"scroll":le=sC;break;case"wheel":le=PC;break;case"copy":case"cut":case"paste":le=fC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=T1}var de=(t&4)!==0,we=!de&&e==="scroll",ee=de?B!==null?B+"Capture":null:B;de=[];for(var q=F,te;q!==null;){te=q;var _e=te.stateNode;if(te.tag===5&&_e!==null&&(te=_e,ee!==null&&(_e=Ph(q,ee),_e!=null&&de.push(Dh(q,_e,te)))),we)break;q=q.return}0<de.length&&(B=new le(B,ge,null,a,W),D.push({event:B,listeners:de}))}}if(!(t&7)){e:{if(B=e==="mouseover"||e==="pointerover",le=e==="mouseout"||e==="pointerout",B&&a!==yy&&(ge=a.relatedTarget||a.fromElement)&&(Ws(ge)||ge[pa]))break e;if((le||B)&&(B=W.window===W?W:(B=W.ownerDocument)?B.defaultView||B.parentWindow:window,le?(ge=a.relatedTarget||a.toElement,le=F,ge=ge?Ws(ge):null,ge!==null&&(we=il(ge),ge!==we||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(le=null,ge=F),le!==ge)){if(de=b1,_e="onMouseLeave",ee="onMouseEnter",q="mouse",(e==="pointerout"||e==="pointerover")&&(de=T1,_e="onPointerLeave",ee="onPointerEnter",q="pointer"),we=le==null?B:su(le),te=ge==null?B:su(ge),B=new de(_e,q+"leave",le,a,W),B.target=we,B.relatedTarget=te,_e=null,Ws(W)===F&&(de=new de(ee,q+"enter",ge,a,W),de.target=te,de.relatedTarget=we,_e=de),we=_e,le&&ge)t:{for(de=le,ee=ge,q=0,te=de;te;te=eu(te))q++;for(te=0,_e=ee;_e;_e=eu(_e))te++;for(;0<q-te;)de=eu(de),q--;for(;0<te-q;)ee=eu(ee),te--;for(;q--;){if(de===ee||ee!==null&&de===ee.alternate)break t;de=eu(de),ee=eu(ee)}de=null}else de=null;le!==null&&D1(D,B,le,de,!1),ge!==null&&we!==null&&D1(D,we,ge,de,!0)}}e:{if(B=F?su(F):window,le=B.nodeName&&B.nodeName.toLowerCase(),le==="select"||le==="input"&&B.type==="file")var Ce=DC;else if(C1(B))if(ob)Ce=NC;else{Ce=FC;var Ae=OC}else(le=B.nodeName)&&le.toLowerCase()==="input"&&(B.type==="checkbox"||B.type==="radio")&&(Ce=BC);if(Ce&&(Ce=Ce(e,F))){ib(D,Ce,a,W);break e}Ae&&Ae(e,B,F),e==="focusout"&&(Ae=B._wrapperState)&&Ae.controlled&&B.type==="number"&&dy(B,"number",B.value)}switch(Ae=F?su(F):window,e){case"focusin":(C1(Ae)||Ae.contentEditable==="true")&&(ou=Ae,Ty=F,xh=null);break;case"focusout":xh=Ty=ou=null;break;case"mousedown":ky=!0;break;case"contextmenu":case"mouseup":case"dragend":ky=!1,z1(D,a,W);break;case"selectionchange":if(VC)break;case"keydown":case"keyup":z1(D,a,W)}var Le;if(O0)e:{switch(e){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else iu?rb(e,a)&&(Ge="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ge="onCompositionStart");Ge&&(tb&&a.locale!=="ko"&&(iu||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&iu&&(Le=eb()):(Xa=W,L0="value"in Xa?Xa.value:Xa.textContent,iu=!0)),Ae=Jp(F,Ge),0<Ae.length&&(Ge=new S1(Ge,e,null,a,W),D.push({event:Ge,listeners:Ae}),Le?Ge.data=Le:(Le=nb(a),Le!==null&&(Ge.data=Le)))),(Le=AC?MC(e,a):zC(e,a))&&(F=Jp(F,"onBeforeInput"),0<F.length&&(W=new S1("onBeforeInput","beforeinput",null,a,W),D.push({event:W,listeners:F}),W.data=Le))}mb(D,t)})}function Dh(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Jp(e,t){for(var a=t+"Capture",u=[];e!==null;){var h=e,x=h.stateNode;h.tag===5&&x!==null&&(h=x,x=Ph(e,a),x!=null&&u.unshift(Dh(e,x,h)),x=Ph(e,t),x!=null&&u.push(Dh(e,x,h))),e=e.return}return u}function eu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function D1(e,t,a,u,h){for(var x=t._reactName,v=[];a!==null&&a!==u;){var c=a,I=c.alternate,F=c.stateNode;if(I!==null&&I===u)break;c.tag===5&&F!==null&&(c=F,h?(I=Ph(a,x),I!=null&&v.unshift(Dh(a,I,c))):h||(I=Ph(a,x),I!=null&&v.push(Dh(a,I,c)))),a=a.return}v.length!==0&&e.push({event:t,listeners:v})}var qC=/\r\n?/g,ZC=/\u0000|\uFFFD/g;function O1(e){return(typeof e=="string"?e:""+e).replace(qC,`
`).replace(ZC,"")}function _p(e,t,a){if(t=O1(t),O1(e)!==t&&a)throw Error(Ue(425))}function Qp(){}var Ey=null,Cy=null;function Py(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Iy=typeof setTimeout=="function"?setTimeout:void 0,GC=typeof clearTimeout=="function"?clearTimeout:void 0,F1=typeof Promise=="function"?Promise:void 0,KC=typeof queueMicrotask=="function"?queueMicrotask:typeof F1<"u"?function(e){return F1.resolve(null).then(e).catch(XC)}:Iy;function XC(e){setTimeout(function(){throw e})}function Rg(e,t){var a=t,u=0;do{var h=a.nextSibling;if(e.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(u===0){e.removeChild(h),Mh(t);return}u--}else a!=="$"&&a!=="$?"&&a!=="$!"||u++;a=h}while(a);Mh(t)}function ns(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function B1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}var Uu=Math.random().toString(36).slice(2),jo="__reactFiber$"+Uu,Oh="__reactProps$"+Uu,pa="__reactContainer$"+Uu,Ay="__reactEvents$"+Uu,YC="__reactListeners$"+Uu,JC="__reactHandles$"+Uu;function Ws(e){var t=e[jo];if(t)return t;for(var a=e.parentNode;a;){if(t=a[pa]||a[jo]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=B1(e);e!==null;){if(a=e[jo])return a;e=B1(e)}return t}e=a,a=e.parentNode}return null}function Kh(e){return e=e[jo]||e[pa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function su(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ue(33))}function jf(e){return e[Oh]||null}var My=[],lu=-1;function ds(e){return{current:e}}function br(e){0>lu||(e.current=My[lu],My[lu]=null,lu--)}function _r(e,t){lu++,My[lu]=e.current,e.current=t}var cs={},qn=ds(cs),xi=ds(!1),Ys=cs;function Eu(e,t){var a=e.type.contextTypes;if(!a)return cs;var u=e.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===t)return u.__reactInternalMemoizedMaskedChildContext;var h={},x;for(x in a)h[x]=t[x];return u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=h),h}function wi(e){return e=e.childContextTypes,e!=null}function ef(){br(xi),br(qn)}function N1(e,t,a){if(qn.current!==cs)throw Error(Ue(168));_r(qn,t),_r(xi,a)}function yb(e,t,a){var u=e.stateNode;if(t=t.childContextTypes,typeof u.getChildContext!="function")return a;u=u.getChildContext();for(var h in u)if(!(h in t))throw Error(Ue(108,OE(e)||"Unknown",h));return Rr({},a,u)}function tf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cs,Ys=qn.current,_r(qn,e),_r(xi,xi.current),!0}function j1(e,t,a){var u=e.stateNode;if(!u)throw Error(Ue(169));a?(e=yb(e,t,Ys),u.__reactInternalMemoizedMergedChildContext=e,br(xi),br(qn),_r(qn,e)):br(xi),_r(xi,a)}var la=null,Uf=!1,Dg=!1;function _b(e){la===null?la=[e]:la.push(e)}function QC(e){Uf=!0,_b(e)}function ps(){if(!Dg&&la!==null){Dg=!0;var e=0,t=ir;try{var a=la;for(ir=1;e<a.length;e++){var u=a[e];do u=u(!0);while(u!==null)}la=null,Uf=!1}catch(h){throw la!==null&&(la=la.slice(e+1)),$w(I0,ps),h}finally{ir=t,Dg=!1}}return null}var uu=[],cu=0,rf=null,nf=0,Ji=[],Qi=0,Js=null,ua=1,ca="";function Vs(e,t){uu[cu++]=nf,uu[cu++]=rf,rf=e,nf=t}function vb(e,t,a){Ji[Qi++]=ua,Ji[Qi++]=ca,Ji[Qi++]=Js,Js=e;var u=ua;e=ca;var h=32-wo(u)-1;u&=~(1<<h),a+=1;var x=32-wo(t)+h;if(30<x){var v=h-h%5;x=(u&(1<<v)-1).toString(32),u>>=v,h-=v,ua=1<<32-wo(t)+h|a<<h|u,ca=x+e}else ua=1<<x|a<<h|u,ca=e}function B0(e){e.return!==null&&(Vs(e,1),vb(e,1,0))}function N0(e){for(;e===rf;)rf=uu[--cu],uu[cu]=null,nf=uu[--cu],uu[cu]=null;for(;e===Js;)Js=Ji[--Qi],Ji[Qi]=null,ca=Ji[--Qi],Ji[Qi]=null,ua=Ji[--Qi],Ji[Qi]=null}var ji=null,Ni=null,Pr=!1,xo=null;function xb(e,t){var a=eo(5,null,null,0);a.elementType="DELETED",a.stateNode=t,a.return=e,t=e.deletions,t===null?(e.deletions=[a],e.flags|=16):t.push(a)}function U1(e,t){switch(e.tag){case 5:var a=e.type;return t=t.nodeType!==1||a.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ji=e,Ni=ns(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ji=e,Ni=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(a=Js!==null?{id:ua,overflow:ca}:null,e.memoizedState={dehydrated:t,treeContext:a,retryLane:1073741824},a=eo(18,null,null,0),a.stateNode=t,a.return=e,e.child=a,ji=e,Ni=null,!0):!1;default:return!1}}function zy(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ly(e){if(Pr){var t=Ni;if(t){var a=t;if(!U1(e,t)){if(zy(e))throw Error(Ue(418));t=ns(a.nextSibling);var u=ji;t&&U1(e,t)?xb(u,a):(e.flags=e.flags&-4097|2,Pr=!1,ji=e)}}else{if(zy(e))throw Error(Ue(418));e.flags=e.flags&-4097|2,Pr=!1,ji=e}}}function V1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ji=e}function vp(e){if(e!==ji)return!1;if(!Pr)return V1(e),Pr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Py(e.type,e.memoizedProps)),t&&(t=Ni)){if(zy(e))throw wb(),Error(Ue(418));for(;t;)xb(e,t),t=ns(t.nextSibling)}if(V1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ue(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(t===0){Ni=ns(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++}e=e.nextSibling}Ni=null}}else Ni=ji?ns(e.stateNode.nextSibling):null;return!0}function wb(){for(var e=Ni;e;)e=ns(e.nextSibling)}function Cu(){Ni=ji=null,Pr=!1}function j0(e){xo===null?xo=[e]:xo.push(e)}var e5=ga.ReactCurrentBatchConfig;function ih(e,t,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(Ue(309));var u=a.stateNode}if(!u)throw Error(Ue(147,e));var h=u,x=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===x?t.ref:(t=function(v){var c=h.refs;v===null?delete c[x]:c[x]=v},t._stringRef=x,t)}if(typeof e!="string")throw Error(Ue(284));if(!a._owner)throw Error(Ue(290,e))}return e}function xp(e,t){throw e=Object.prototype.toString.call(t),Error(Ue(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $1(e){var t=e._init;return t(e._payload)}function bb(e){function t(ee,q){if(e){var te=ee.deletions;te===null?(ee.deletions=[q],ee.flags|=16):te.push(q)}}function a(ee,q){if(!e)return null;for(;q!==null;)t(ee,q),q=q.sibling;return null}function u(ee,q){for(ee=new Map;q!==null;)q.key!==null?ee.set(q.key,q):ee.set(q.index,q),q=q.sibling;return ee}function h(ee,q){return ee=ss(ee,q),ee.index=0,ee.sibling=null,ee}function x(ee,q,te){return ee.index=te,e?(te=ee.alternate,te!==null?(te=te.index,te<q?(ee.flags|=2,q):te):(ee.flags|=2,q)):(ee.flags|=1048576,q)}function v(ee){return e&&ee.alternate===null&&(ee.flags|=2),ee}function c(ee,q,te,_e){return q===null||q.tag!==6?(q=Vg(te,ee.mode,_e),q.return=ee,q):(q=h(q,te),q.return=ee,q)}function I(ee,q,te,_e){var Ce=te.type;return Ce===nu?W(ee,q,te.props.children,_e,te.key):q!==null&&(q.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===Wa&&$1(Ce)===q.type)?(_e=h(q,te.props),_e.ref=ih(ee,q,te),_e.return=ee,_e):(_e=jp(te.type,te.key,te.props,null,ee.mode,_e),_e.ref=ih(ee,q,te),_e.return=ee,_e)}function F(ee,q,te,_e){return q===null||q.tag!==4||q.stateNode.containerInfo!==te.containerInfo||q.stateNode.implementation!==te.implementation?(q=$g(te,ee.mode,_e),q.return=ee,q):(q=h(q,te.children||[]),q.return=ee,q)}function W(ee,q,te,_e,Ce){return q===null||q.tag!==7?(q=Ks(te,ee.mode,_e,Ce),q.return=ee,q):(q=h(q,te),q.return=ee,q)}function D(ee,q,te){if(typeof q=="string"&&q!==""||typeof q=="number")return q=Vg(""+q,ee.mode,te),q.return=ee,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case up:return te=jp(q.type,q.key,q.props,null,ee.mode,te),te.ref=ih(ee,null,q),te.return=ee,te;case ru:return q=$g(q,ee.mode,te),q.return=ee,q;case Wa:var _e=q._init;return D(ee,_e(q._payload),te)}if(ch(q)||Qc(q))return q=Ks(q,ee.mode,te,null),q.return=ee,q;xp(ee,q)}return null}function B(ee,q,te,_e){var Ce=q!==null?q.key:null;if(typeof te=="string"&&te!==""||typeof te=="number")return Ce!==null?null:c(ee,q,""+te,_e);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case up:return te.key===Ce?I(ee,q,te,_e):null;case ru:return te.key===Ce?F(ee,q,te,_e):null;case Wa:return Ce=te._init,B(ee,q,Ce(te._payload),_e)}if(ch(te)||Qc(te))return Ce!==null?null:W(ee,q,te,_e,null);xp(ee,te)}return null}function le(ee,q,te,_e,Ce){if(typeof _e=="string"&&_e!==""||typeof _e=="number")return ee=ee.get(te)||null,c(q,ee,""+_e,Ce);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case up:return ee=ee.get(_e.key===null?te:_e.key)||null,I(q,ee,_e,Ce);case ru:return ee=ee.get(_e.key===null?te:_e.key)||null,F(q,ee,_e,Ce);case Wa:var Ae=_e._init;return le(ee,q,te,Ae(_e._payload),Ce)}if(ch(_e)||Qc(_e))return ee=ee.get(te)||null,W(q,ee,_e,Ce,null);xp(q,_e)}return null}function ge(ee,q,te,_e){for(var Ce=null,Ae=null,Le=q,Ge=q=0,Re=null;Le!==null&&Ge<te.length;Ge++){Le.index>Ge?(Re=Le,Le=null):Re=Le.sibling;var Me=B(ee,Le,te[Ge],_e);if(Me===null){Le===null&&(Le=Re);break}e&&Le&&Me.alternate===null&&t(ee,Le),q=x(Me,q,Ge),Ae===null?Ce=Me:Ae.sibling=Me,Ae=Me,Le=Re}if(Ge===te.length)return a(ee,Le),Pr&&Vs(ee,Ge),Ce;if(Le===null){for(;Ge<te.length;Ge++)Le=D(ee,te[Ge],_e),Le!==null&&(q=x(Le,q,Ge),Ae===null?Ce=Le:Ae.sibling=Le,Ae=Le);return Pr&&Vs(ee,Ge),Ce}for(Le=u(ee,Le);Ge<te.length;Ge++)Re=le(Le,ee,Ge,te[Ge],_e),Re!==null&&(e&&Re.alternate!==null&&Le.delete(Re.key===null?Ge:Re.key),q=x(Re,q,Ge),Ae===null?Ce=Re:Ae.sibling=Re,Ae=Re);return e&&Le.forEach(function($e){return t(ee,$e)}),Pr&&Vs(ee,Ge),Ce}function de(ee,q,te,_e){var Ce=Qc(te);if(typeof Ce!="function")throw Error(Ue(150));if(te=Ce.call(te),te==null)throw Error(Ue(151));for(var Ae=Ce=null,Le=q,Ge=q=0,Re=null,Me=te.next();Le!==null&&!Me.done;Ge++,Me=te.next()){Le.index>Ge?(Re=Le,Le=null):Re=Le.sibling;var $e=B(ee,Le,Me.value,_e);if($e===null){Le===null&&(Le=Re);break}e&&Le&&$e.alternate===null&&t(ee,Le),q=x($e,q,Ge),Ae===null?Ce=$e:Ae.sibling=$e,Ae=$e,Le=Re}if(Me.done)return a(ee,Le),Pr&&Vs(ee,Ge),Ce;if(Le===null){for(;!Me.done;Ge++,Me=te.next())Me=D(ee,Me.value,_e),Me!==null&&(q=x(Me,q,Ge),Ae===null?Ce=Me:Ae.sibling=Me,Ae=Me);return Pr&&Vs(ee,Ge),Ce}for(Le=u(ee,Le);!Me.done;Ge++,Me=te.next())Me=le(Le,ee,Ge,Me.value,_e),Me!==null&&(e&&Me.alternate!==null&&Le.delete(Me.key===null?Ge:Me.key),q=x(Me,q,Ge),Ae===null?Ce=Me:Ae.sibling=Me,Ae=Me);return e&&Le.forEach(function(ft){return t(ee,ft)}),Pr&&Vs(ee,Ge),Ce}function we(ee,q,te,_e){if(typeof te=="object"&&te!==null&&te.type===nu&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case up:e:{for(var Ce=te.key,Ae=q;Ae!==null;){if(Ae.key===Ce){if(Ce=te.type,Ce===nu){if(Ae.tag===7){a(ee,Ae.sibling),q=h(Ae,te.props.children),q.return=ee,ee=q;break e}}else if(Ae.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===Wa&&$1(Ce)===Ae.type){a(ee,Ae.sibling),q=h(Ae,te.props),q.ref=ih(ee,Ae,te),q.return=ee,ee=q;break e}a(ee,Ae);break}else t(ee,Ae);Ae=Ae.sibling}te.type===nu?(q=Ks(te.props.children,ee.mode,_e,te.key),q.return=ee,ee=q):(_e=jp(te.type,te.key,te.props,null,ee.mode,_e),_e.ref=ih(ee,q,te),_e.return=ee,ee=_e)}return v(ee);case ru:e:{for(Ae=te.key;q!==null;){if(q.key===Ae)if(q.tag===4&&q.stateNode.containerInfo===te.containerInfo&&q.stateNode.implementation===te.implementation){a(ee,q.sibling),q=h(q,te.children||[]),q.return=ee,ee=q;break e}else{a(ee,q);break}else t(ee,q);q=q.sibling}q=$g(te,ee.mode,_e),q.return=ee,ee=q}return v(ee);case Wa:return Ae=te._init,we(ee,q,Ae(te._payload),_e)}if(ch(te))return ge(ee,q,te,_e);if(Qc(te))return de(ee,q,te,_e);xp(ee,te)}return typeof te=="string"&&te!==""||typeof te=="number"?(te=""+te,q!==null&&q.tag===6?(a(ee,q.sibling),q=h(q,te),q.return=ee,ee=q):(a(ee,q),q=Vg(te,ee.mode,_e),q.return=ee,ee=q),v(ee)):a(ee,q)}return we}var Pu=bb(!0),Sb=bb(!1),of=ds(null),af=null,hu=null,U0=null;function V0(){U0=hu=af=null}function $0(e){var t=of.current;br(of),e._currentValue=t}function Ry(e,t,a){for(;e!==null;){var u=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,u!==null&&(u.childLanes|=t)):u!==null&&(u.childLanes&t)!==t&&(u.childLanes|=t),e===a)break;e=e.return}}function _u(e,t){af=e,U0=hu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(vi=!0),e.firstContext=null)}function ro(e){var t=e._currentValue;if(U0!==e)if(e={context:e,memoizedValue:t,next:null},hu===null){if(af===null)throw Error(Ue(308));hu=e,af.dependencies={lanes:0,firstContext:e}}else hu=hu.next=e;return t}var qs=null;function H0(e){qs===null?qs=[e]:qs.push(e)}function Tb(e,t,a,u){var h=t.interleaved;return h===null?(a.next=a,H0(t)):(a.next=h.next,h.next=a),t.interleaved=a,fa(e,u)}function fa(e,t){e.lanes|=t;var a=e.alternate;for(a!==null&&(a.lanes|=t),a=e,e=e.return;e!==null;)e.childLanes|=t,a=e.alternate,a!==null&&(a.childLanes|=t),a=e,e=e.return;return a.tag===3?a.stateNode:null}var qa=!1;function W0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kb(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ha(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function is(e,t,a){var u=e.updateQueue;if(u===null)return null;if(u=u.shared,Zt&2){var h=u.pending;return h===null?t.next=t:(t.next=h.next,h.next=t),u.pending=t,fa(e,a)}return h=u.interleaved,h===null?(t.next=t,H0(u)):(t.next=h.next,h.next=t),u.interleaved=t,fa(e,a)}function Rp(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194240)!==0)){var u=t.lanes;u&=e.pendingLanes,a|=u,t.lanes=a,A0(e,a)}}function H1(e,t){var a=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var h=null,x=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};x===null?h=x=v:x=x.next=v,a=a.next}while(a!==null);x===null?h=x=t:x=x.next=t}else h=x=t;a={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:x,shared:u.shared,effects:u.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}function sf(e,t,a,u){var h=e.updateQueue;qa=!1;var x=h.firstBaseUpdate,v=h.lastBaseUpdate,c=h.shared.pending;if(c!==null){h.shared.pending=null;var I=c,F=I.next;I.next=null,v===null?x=F:v.next=F,v=I;var W=e.alternate;W!==null&&(W=W.updateQueue,c=W.lastBaseUpdate,c!==v&&(c===null?W.firstBaseUpdate=F:c.next=F,W.lastBaseUpdate=I))}if(x!==null){var D=h.baseState;v=0,W=F=I=null,c=x;do{var B=c.lane,le=c.eventTime;if((u&B)===B){W!==null&&(W=W.next={eventTime:le,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var ge=e,de=c;switch(B=t,le=a,de.tag){case 1:if(ge=de.payload,typeof ge=="function"){D=ge.call(le,D,B);break e}D=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=de.payload,B=typeof ge=="function"?ge.call(le,D,B):ge,B==null)break e;D=Rr({},D,B);break e;case 2:qa=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,B=h.effects,B===null?h.effects=[c]:B.push(c))}else le={eventTime:le,lane:B,tag:c.tag,payload:c.payload,callback:c.callback,next:null},W===null?(F=W=le,I=D):W=W.next=le,v|=B;if(c=c.next,c===null){if(c=h.shared.pending,c===null)break;B=c,c=B.next,B.next=null,h.lastBaseUpdate=B,h.shared.pending=null}}while(!0);if(W===null&&(I=D),h.baseState=I,h.firstBaseUpdate=F,h.lastBaseUpdate=W,t=h.shared.interleaved,t!==null){h=t;do v|=h.lane,h=h.next;while(h!==t)}else x===null&&(h.shared.lanes=0);el|=v,e.lanes=v,e.memoizedState=D}}function W1(e,t,a){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var u=e[t],h=u.callback;if(h!==null){if(u.callback=null,u=a,typeof h!="function")throw Error(Ue(191,h));h.call(u)}}}var Xh={},$o=ds(Xh),Fh=ds(Xh),Bh=ds(Xh);function Zs(e){if(e===Xh)throw Error(Ue(174));return e}function q0(e,t){switch(_r(Bh,t),_r(Fh,e),_r($o,Xh),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fy(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=fy(t,e)}br($o),_r($o,t)}function Iu(){br($o),br(Fh),br(Bh)}function Eb(e){Zs(Bh.current);var t=Zs($o.current),a=fy(t,e.type);t!==a&&(_r(Fh,e),_r($o,a))}function Z0(e){Fh.current===e&&(br($o),br(Fh))}var zr=ds(0);function lf(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Og=[];function G0(){for(var e=0;e<Og.length;e++)Og[e]._workInProgressVersionPrimary=null;Og.length=0}var Dp=ga.ReactCurrentDispatcher,Fg=ga.ReactCurrentBatchConfig,Qs=0,Lr=null,on=null,vn=null,uf=!1,wh=!1,Nh=0,t5=0;function $n(){throw Error(Ue(321))}function K0(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!So(e[a],t[a]))return!1;return!0}function X0(e,t,a,u,h,x){if(Qs=x,Lr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Dp.current=e===null||e.memoizedState===null?o5:a5,e=a(u,h),wh){x=0;do{if(wh=!1,Nh=0,25<=x)throw Error(Ue(301));x+=1,vn=on=null,t.updateQueue=null,Dp.current=s5,e=a(u,h)}while(wh)}if(Dp.current=cf,t=on!==null&&on.next!==null,Qs=0,vn=on=Lr=null,uf=!1,t)throw Error(Ue(300));return e}function Y0(){var e=Nh!==0;return Nh=0,e}function No(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?Lr.memoizedState=vn=e:vn=vn.next=e,vn}function no(){if(on===null){var e=Lr.alternate;e=e!==null?e.memoizedState:null}else e=on.next;var t=vn===null?Lr.memoizedState:vn.next;if(t!==null)vn=t,on=e;else{if(e===null)throw Error(Ue(310));on=e,e={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},vn===null?Lr.memoizedState=vn=e:vn=vn.next=e}return vn}function jh(e,t){return typeof t=="function"?t(e):t}function Bg(e){var t=no(),a=t.queue;if(a===null)throw Error(Ue(311));a.lastRenderedReducer=e;var u=on,h=u.baseQueue,x=a.pending;if(x!==null){if(h!==null){var v=h.next;h.next=x.next,x.next=v}u.baseQueue=h=x,a.pending=null}if(h!==null){x=h.next,u=u.baseState;var c=v=null,I=null,F=x;do{var W=F.lane;if((Qs&W)===W)I!==null&&(I=I.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),u=F.hasEagerState?F.eagerState:e(u,F.action);else{var D={lane:W,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};I===null?(c=I=D,v=u):I=I.next=D,Lr.lanes|=W,el|=W}F=F.next}while(F!==null&&F!==x);I===null?v=u:I.next=c,So(u,t.memoizedState)||(vi=!0),t.memoizedState=u,t.baseState=v,t.baseQueue=I,a.lastRenderedState=u}if(e=a.interleaved,e!==null){h=e;do x=h.lane,Lr.lanes|=x,el|=x,h=h.next;while(h!==e)}else h===null&&(a.lanes=0);return[t.memoizedState,a.dispatch]}function Ng(e){var t=no(),a=t.queue;if(a===null)throw Error(Ue(311));a.lastRenderedReducer=e;var u=a.dispatch,h=a.pending,x=t.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do x=e(x,v.action),v=v.next;while(v!==h);So(x,t.memoizedState)||(vi=!0),t.memoizedState=x,t.baseQueue===null&&(t.baseState=x),a.lastRenderedState=x}return[x,u]}function Cb(){}function Pb(e,t){var a=Lr,u=no(),h=t(),x=!So(u.memoizedState,h);if(x&&(u.memoizedState=h,vi=!0),u=u.queue,J0(Mb.bind(null,a,u,e),[e]),u.getSnapshot!==t||x||vn!==null&&vn.memoizedState.tag&1){if(a.flags|=2048,Uh(9,Ab.bind(null,a,u,h,t),void 0,null),xn===null)throw Error(Ue(349));Qs&30||Ib(a,t,h)}return h}function Ib(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Lr.updateQueue,t===null?(t={lastEffect:null,stores:null},Lr.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Ab(e,t,a,u){t.value=a,t.getSnapshot=u,zb(t)&&Lb(e)}function Mb(e,t,a){return a(function(){zb(t)&&Lb(e)})}function zb(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!So(e,a)}catch{return!0}}function Lb(e){var t=fa(e,1);t!==null&&bo(t,e,1,-1)}function q1(e){var t=No();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jh,lastRenderedState:e},t.queue=e,e=e.dispatch=i5.bind(null,Lr,e),[t.memoizedState,e]}function Uh(e,t,a,u){return e={tag:e,create:t,destroy:a,deps:u,next:null},t=Lr.updateQueue,t===null?(t={lastEffect:null,stores:null},Lr.updateQueue=t,t.lastEffect=e.next=e):(a=t.lastEffect,a===null?t.lastEffect=e.next=e:(u=a.next,a.next=e,e.next=u,t.lastEffect=e)),e}function Rb(){return no().memoizedState}function Op(e,t,a,u){var h=No();Lr.flags|=e,h.memoizedState=Uh(1|t,a,void 0,u===void 0?null:u)}function Vf(e,t,a,u){var h=no();u=u===void 0?null:u;var x=void 0;if(on!==null){var v=on.memoizedState;if(x=v.destroy,u!==null&&K0(u,v.deps)){h.memoizedState=Uh(t,a,x,u);return}}Lr.flags|=e,h.memoizedState=Uh(1|t,a,x,u)}function Z1(e,t){return Op(8390656,8,e,t)}function J0(e,t){return Vf(2048,8,e,t)}function Db(e,t){return Vf(4,2,e,t)}function Ob(e,t){return Vf(4,4,e,t)}function Fb(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Bb(e,t,a){return a=a!=null?a.concat([e]):null,Vf(4,4,Fb.bind(null,t,e),a)}function Q0(){}function Nb(e,t){var a=no();t=t===void 0?null:t;var u=a.memoizedState;return u!==null&&t!==null&&K0(t,u[1])?u[0]:(a.memoizedState=[e,t],e)}function jb(e,t){var a=no();t=t===void 0?null:t;var u=a.memoizedState;return u!==null&&t!==null&&K0(t,u[1])?u[0]:(e=e(),a.memoizedState=[e,t],e)}function Ub(e,t,a){return Qs&21?(So(a,t)||(a=qw(),Lr.lanes|=a,el|=a,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,vi=!0),e.memoizedState=a)}function r5(e,t){var a=ir;ir=a!==0&&4>a?a:4,e(!0);var u=Fg.transition;Fg.transition={};try{e(!1),t()}finally{ir=a,Fg.transition=u}}function Vb(){return no().memoizedState}function n5(e,t,a){var u=as(e);if(a={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null},$b(e))Hb(t,a);else if(a=Tb(e,t,a,u),a!==null){var h=oi();bo(a,e,u,h),Wb(a,t,u)}}function i5(e,t,a){var u=as(e),h={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null};if($b(e))Hb(t,h);else{var x=e.alternate;if(e.lanes===0&&(x===null||x.lanes===0)&&(x=t.lastRenderedReducer,x!==null))try{var v=t.lastRenderedState,c=x(v,a);if(h.hasEagerState=!0,h.eagerState=c,So(c,v)){var I=t.interleaved;I===null?(h.next=h,H0(t)):(h.next=I.next,I.next=h),t.interleaved=h;return}}catch{}finally{}a=Tb(e,t,h,u),a!==null&&(h=oi(),bo(a,e,u,h),Wb(a,t,u))}}function $b(e){var t=e.alternate;return e===Lr||t!==null&&t===Lr}function Hb(e,t){wh=uf=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Wb(e,t,a){if(a&4194240){var u=t.lanes;u&=e.pendingLanes,a|=u,t.lanes=a,A0(e,a)}}var cf={readContext:ro,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useInsertionEffect:$n,useLayoutEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useMutableSource:$n,useSyncExternalStore:$n,useId:$n,unstable_isNewReconciler:!1},o5={readContext:ro,useCallback:function(e,t){return No().memoizedState=[e,t===void 0?null:t],e},useContext:ro,useEffect:Z1,useImperativeHandle:function(e,t,a){return a=a!=null?a.concat([e]):null,Op(4194308,4,Fb.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Op(4194308,4,e,t)},useInsertionEffect:function(e,t){return Op(4,2,e,t)},useMemo:function(e,t){var a=No();return t=t===void 0?null:t,e=e(),a.memoizedState=[e,t],e},useReducer:function(e,t,a){var u=No();return t=a!==void 0?a(t):t,u.memoizedState=u.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},u.queue=e,e=e.dispatch=n5.bind(null,Lr,e),[u.memoizedState,e]},useRef:function(e){var t=No();return e={current:e},t.memoizedState=e},useState:q1,useDebugValue:Q0,useDeferredValue:function(e){return No().memoizedState=e},useTransition:function(){var e=q1(!1),t=e[0];return e=r5.bind(null,e[1]),No().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,a){var u=Lr,h=No();if(Pr){if(a===void 0)throw Error(Ue(407));a=a()}else{if(a=t(),xn===null)throw Error(Ue(349));Qs&30||Ib(u,t,a)}h.memoizedState=a;var x={value:a,getSnapshot:t};return h.queue=x,Z1(Mb.bind(null,u,x,e),[e]),u.flags|=2048,Uh(9,Ab.bind(null,u,x,a,t),void 0,null),a},useId:function(){var e=No(),t=xn.identifierPrefix;if(Pr){var a=ca,u=ua;a=(u&~(1<<32-wo(u)-1)).toString(32)+a,t=":"+t+"R"+a,a=Nh++,0<a&&(t+="H"+a.toString(32)),t+=":"}else a=t5++,t=":"+t+"r"+a.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},a5={readContext:ro,useCallback:Nb,useContext:ro,useEffect:J0,useImperativeHandle:Bb,useInsertionEffect:Db,useLayoutEffect:Ob,useMemo:jb,useReducer:Bg,useRef:Rb,useState:function(){return Bg(jh)},useDebugValue:Q0,useDeferredValue:function(e){var t=no();return Ub(t,on.memoizedState,e)},useTransition:function(){var e=Bg(jh)[0],t=no().memoizedState;return[e,t]},useMutableSource:Cb,useSyncExternalStore:Pb,useId:Vb,unstable_isNewReconciler:!1},s5={readContext:ro,useCallback:Nb,useContext:ro,useEffect:J0,useImperativeHandle:Bb,useInsertionEffect:Db,useLayoutEffect:Ob,useMemo:jb,useReducer:Ng,useRef:Rb,useState:function(){return Ng(jh)},useDebugValue:Q0,useDeferredValue:function(e){var t=no();return on===null?t.memoizedState=e:Ub(t,on.memoizedState,e)},useTransition:function(){var e=Ng(jh)[0],t=no().memoizedState;return[e,t]},useMutableSource:Cb,useSyncExternalStore:Pb,useId:Vb,unstable_isNewReconciler:!1};function _o(e,t){if(e&&e.defaultProps){t=Rr({},t),e=e.defaultProps;for(var a in e)t[a]===void 0&&(t[a]=e[a]);return t}return t}function Dy(e,t,a,u){t=e.memoizedState,a=a(u,t),a=a==null?t:Rr({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var $f={isMounted:function(e){return(e=e._reactInternals)?il(e)===e:!1},enqueueSetState:function(e,t,a){e=e._reactInternals;var u=oi(),h=as(e),x=ha(u,h);x.payload=t,a!=null&&(x.callback=a),t=is(e,x,h),t!==null&&(bo(t,e,h,u),Rp(t,e,h))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var u=oi(),h=as(e),x=ha(u,h);x.tag=1,x.payload=t,a!=null&&(x.callback=a),t=is(e,x,h),t!==null&&(bo(t,e,h,u),Rp(t,e,h))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=oi(),u=as(e),h=ha(a,u);h.tag=2,t!=null&&(h.callback=t),t=is(e,h,u),t!==null&&(bo(t,e,u,a),Rp(t,e,u))}};function G1(e,t,a,u,h,x,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(u,x,v):t.prototype&&t.prototype.isPureReactComponent?!Lh(a,u)||!Lh(h,x):!0}function qb(e,t,a){var u=!1,h=cs,x=t.contextType;return typeof x=="object"&&x!==null?x=ro(x):(h=wi(t)?Ys:qn.current,u=t.contextTypes,x=(u=u!=null)?Eu(e,h):cs),t=new t(a,x),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=$f,e.stateNode=t,t._reactInternals=e,u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=h,e.__reactInternalMemoizedMaskedChildContext=x),t}function K1(e,t,a,u){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,u),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,u),t.state!==e&&$f.enqueueReplaceState(t,t.state,null)}function Oy(e,t,a,u){var h=e.stateNode;h.props=a,h.state=e.memoizedState,h.refs={},W0(e);var x=t.contextType;typeof x=="object"&&x!==null?h.context=ro(x):(x=wi(t)?Ys:qn.current,h.context=Eu(e,x)),h.state=e.memoizedState,x=t.getDerivedStateFromProps,typeof x=="function"&&(Dy(e,t,x,a),h.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(t=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),t!==h.state&&$f.enqueueReplaceState(h,h.state,null),sf(e,a,h,u),h.state=e.memoizedState),typeof h.componentDidMount=="function"&&(e.flags|=4194308)}function Au(e,t){try{var a="",u=t;do a+=DE(u),u=u.return;while(u);var h=a}catch(x){h=`
Error generating stack: `+x.message+`
`+x.stack}return{value:e,source:t,stack:h,digest:null}}function jg(e,t,a){return{value:e,source:null,stack:a??null,digest:t??null}}function Fy(e,t){try{console.error(t.value)}catch(a){setTimeout(function(){throw a})}}var l5=typeof WeakMap=="function"?WeakMap:Map;function Zb(e,t,a){a=ha(-1,a),a.tag=3,a.payload={element:null};var u=t.value;return a.callback=function(){df||(df=!0,Zy=u),Fy(e,t)},a}function Gb(e,t,a){a=ha(-1,a),a.tag=3;var u=e.type.getDerivedStateFromError;if(typeof u=="function"){var h=t.value;a.payload=function(){return u(h)},a.callback=function(){Fy(e,t)}}var x=e.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(a.callback=function(){Fy(e,t),typeof u!="function"&&(os===null?os=new Set([this]):os.add(this));var v=t.stack;this.componentDidCatch(t.value,{componentStack:v!==null?v:""})}),a}function X1(e,t,a){var u=e.pingCache;if(u===null){u=e.pingCache=new l5;var h=new Set;u.set(t,h)}else h=u.get(t),h===void 0&&(h=new Set,u.set(t,h));h.has(a)||(h.add(a),e=b5.bind(null,e,t,a),t.then(e,e))}function Y1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function J1(e,t,a,u,h){return e.mode&1?(e.flags|=65536,e.lanes=h,e):(e===t?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(t=ha(-1,1),t.tag=2,is(a,t,1))),a.lanes|=1),e)}var u5=ga.ReactCurrentOwner,vi=!1;function ii(e,t,a,u){t.child=e===null?Sb(t,null,a,u):Pu(t,e.child,a,u)}function Q1(e,t,a,u,h){a=a.render;var x=t.ref;return _u(t,h),u=X0(e,t,a,u,x,h),a=Y0(),e!==null&&!vi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,ma(e,t,h)):(Pr&&a&&B0(t),t.flags|=1,ii(e,t,u,h),t.child)}function ex(e,t,a,u,h){if(e===null){var x=a.type;return typeof x=="function"&&!s_(x)&&x.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(t.tag=15,t.type=x,Kb(e,t,x,u,h)):(e=jp(a.type,null,u,t,t.mode,h),e.ref=t.ref,e.return=t,t.child=e)}if(x=e.child,!(e.lanes&h)){var v=x.memoizedProps;if(a=a.compare,a=a!==null?a:Lh,a(v,u)&&e.ref===t.ref)return ma(e,t,h)}return t.flags|=1,e=ss(x,u),e.ref=t.ref,e.return=t,t.child=e}function Kb(e,t,a,u,h){if(e!==null){var x=e.memoizedProps;if(Lh(x,u)&&e.ref===t.ref)if(vi=!1,t.pendingProps=u=x,(e.lanes&h)!==0)e.flags&131072&&(vi=!0);else return t.lanes=e.lanes,ma(e,t,h)}return By(e,t,a,u,h)}function Xb(e,t,a){var u=t.pendingProps,h=u.children,x=e!==null?e.memoizedState:null;if(u.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_r(pu,Bi),Bi|=a;else{if(!(a&1073741824))return e=x!==null?x.baseLanes|a:a,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_r(pu,Bi),Bi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=x!==null?x.baseLanes:a,_r(pu,Bi),Bi|=u}else x!==null?(u=x.baseLanes|a,t.memoizedState=null):u=a,_r(pu,Bi),Bi|=u;return ii(e,t,h,a),t.child}function Yb(e,t){var a=t.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(t.flags|=512,t.flags|=2097152)}function By(e,t,a,u,h){var x=wi(a)?Ys:qn.current;return x=Eu(t,x),_u(t,h),a=X0(e,t,a,u,x,h),u=Y0(),e!==null&&!vi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,ma(e,t,h)):(Pr&&u&&B0(t),t.flags|=1,ii(e,t,a,h),t.child)}function tx(e,t,a,u,h){if(wi(a)){var x=!0;tf(t)}else x=!1;if(_u(t,h),t.stateNode===null)Fp(e,t),qb(t,a,u),Oy(t,a,u,h),u=!0;else if(e===null){var v=t.stateNode,c=t.memoizedProps;v.props=c;var I=v.context,F=a.contextType;typeof F=="object"&&F!==null?F=ro(F):(F=wi(a)?Ys:qn.current,F=Eu(t,F));var W=a.getDerivedStateFromProps,D=typeof W=="function"||typeof v.getSnapshotBeforeUpdate=="function";D||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(c!==u||I!==F)&&K1(t,v,u,F),qa=!1;var B=t.memoizedState;v.state=B,sf(t,u,v,h),I=t.memoizedState,c!==u||B!==I||xi.current||qa?(typeof W=="function"&&(Dy(t,a,W,u),I=t.memoizedState),(c=qa||G1(t,a,c,u,B,I,F))?(D||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(t.flags|=4194308)):(typeof v.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=u,t.memoizedState=I),v.props=u,v.state=I,v.context=F,u=c):(typeof v.componentDidMount=="function"&&(t.flags|=4194308),u=!1)}else{v=t.stateNode,kb(e,t),c=t.memoizedProps,F=t.type===t.elementType?c:_o(t.type,c),v.props=F,D=t.pendingProps,B=v.context,I=a.contextType,typeof I=="object"&&I!==null?I=ro(I):(I=wi(a)?Ys:qn.current,I=Eu(t,I));var le=a.getDerivedStateFromProps;(W=typeof le=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(c!==D||B!==I)&&K1(t,v,u,I),qa=!1,B=t.memoizedState,v.state=B,sf(t,u,v,h);var ge=t.memoizedState;c!==D||B!==ge||xi.current||qa?(typeof le=="function"&&(Dy(t,a,le,u),ge=t.memoizedState),(F=qa||G1(t,a,F,u,B,ge,I)||!1)?(W||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,ge,I),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,ge,I)),typeof v.componentDidUpdate=="function"&&(t.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof v.componentDidUpdate!="function"||c===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),t.memoizedProps=u,t.memoizedState=ge),v.props=u,v.state=ge,v.context=I,u=F):(typeof v.componentDidUpdate!="function"||c===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),u=!1)}return Ny(e,t,a,u,x,h)}function Ny(e,t,a,u,h,x){Yb(e,t);var v=(t.flags&128)!==0;if(!u&&!v)return h&&j1(t,a,!1),ma(e,t,x);u=t.stateNode,u5.current=t;var c=v&&typeof a.getDerivedStateFromError!="function"?null:u.render();return t.flags|=1,e!==null&&v?(t.child=Pu(t,e.child,null,x),t.child=Pu(t,null,c,x)):ii(e,t,c,x),t.memoizedState=u.state,h&&j1(t,a,!0),t.child}function Jb(e){var t=e.stateNode;t.pendingContext?N1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&N1(e,t.context,!1),q0(e,t.containerInfo)}function rx(e,t,a,u,h){return Cu(),j0(h),t.flags|=256,ii(e,t,a,u),t.child}var jy={dehydrated:null,treeContext:null,retryLane:0};function Uy(e){return{baseLanes:e,cachePool:null,transitions:null}}function Qb(e,t,a){var u=t.pendingProps,h=zr.current,x=!1,v=(t.flags&128)!==0,c;if((c=v)||(c=e!==null&&e.memoizedState===null?!1:(h&2)!==0),c?(x=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(h|=1),_r(zr,h&1),e===null)return Ly(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(v=u.children,e=u.fallback,x?(u=t.mode,x=t.child,v={mode:"hidden",children:v},!(u&1)&&x!==null?(x.childLanes=0,x.pendingProps=v):x=qf(v,u,0,null),e=Ks(e,u,a,null),x.return=t,e.return=t,x.sibling=e,t.child=x,t.child.memoizedState=Uy(a),t.memoizedState=jy,e):e_(t,v));if(h=e.memoizedState,h!==null&&(c=h.dehydrated,c!==null))return c5(e,t,v,u,c,h,a);if(x){x=u.fallback,v=t.mode,h=e.child,c=h.sibling;var I={mode:"hidden",children:u.children};return!(v&1)&&t.child!==h?(u=t.child,u.childLanes=0,u.pendingProps=I,t.deletions=null):(u=ss(h,I),u.subtreeFlags=h.subtreeFlags&14680064),c!==null?x=ss(c,x):(x=Ks(x,v,a,null),x.flags|=2),x.return=t,u.return=t,u.sibling=x,t.child=u,u=x,x=t.child,v=e.child.memoizedState,v=v===null?Uy(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},x.memoizedState=v,x.childLanes=e.childLanes&~a,t.memoizedState=jy,u}return x=e.child,e=x.sibling,u=ss(x,{mode:"visible",children:u.children}),!(t.mode&1)&&(u.lanes=a),u.return=t,u.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=u,t.memoizedState=null,u}function e_(e,t){return t=qf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function wp(e,t,a,u){return u!==null&&j0(u),Pu(t,e.child,null,a),e=e_(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function c5(e,t,a,u,h,x,v){if(a)return t.flags&256?(t.flags&=-257,u=jg(Error(Ue(422))),wp(e,t,v,u)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(x=u.fallback,h=t.mode,u=qf({mode:"visible",children:u.children},h,0,null),x=Ks(x,h,v,null),x.flags|=2,u.return=t,x.return=t,u.sibling=x,t.child=u,t.mode&1&&Pu(t,e.child,null,v),t.child.memoizedState=Uy(v),t.memoizedState=jy,x);if(!(t.mode&1))return wp(e,t,v,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var c=u.dgst;return u=c,x=Error(Ue(419)),u=jg(x,u,void 0),wp(e,t,v,u)}if(c=(v&e.childLanes)!==0,vi||c){if(u=xn,u!==null){switch(v&-v){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=h&(u.suspendedLanes|v)?0:h,h!==0&&h!==x.retryLane&&(x.retryLane=h,fa(e,h),bo(u,e,h,-1))}return a_(),u=jg(Error(Ue(421))),wp(e,t,v,u)}return h.data==="$?"?(t.flags|=128,t.child=e.child,t=S5.bind(null,e),h._reactRetry=t,null):(e=x.treeContext,Ni=ns(h.nextSibling),ji=t,Pr=!0,xo=null,e!==null&&(Ji[Qi++]=ua,Ji[Qi++]=ca,Ji[Qi++]=Js,ua=e.id,ca=e.overflow,Js=t),t=e_(t,u.children),t.flags|=4096,t)}function nx(e,t,a){e.lanes|=t;var u=e.alternate;u!==null&&(u.lanes|=t),Ry(e.return,t,a)}function Ug(e,t,a,u,h){var x=e.memoizedState;x===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:h}:(x.isBackwards=t,x.rendering=null,x.renderingStartTime=0,x.last=u,x.tail=a,x.tailMode=h)}function e2(e,t,a){var u=t.pendingProps,h=u.revealOrder,x=u.tail;if(ii(e,t,u.children,a),u=zr.current,u&2)u=u&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&nx(e,a,t);else if(e.tag===19)nx(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}u&=1}if(_r(zr,u),!(t.mode&1))t.memoizedState=null;else switch(h){case"forwards":for(a=t.child,h=null;a!==null;)e=a.alternate,e!==null&&lf(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=t.child,t.child=null):(h=a.sibling,a.sibling=null),Ug(t,!1,h,a,x);break;case"backwards":for(a=null,h=t.child,t.child=null;h!==null;){if(e=h.alternate,e!==null&&lf(e)===null){t.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}Ug(t,!0,a,null,x);break;case"together":Ug(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Fp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ma(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),el|=t.lanes,!(a&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ue(153));if(t.child!==null){for(e=t.child,a=ss(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=ss(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function h5(e,t,a){switch(t.tag){case 3:Jb(t),Cu();break;case 5:Eb(t);break;case 1:wi(t.type)&&tf(t);break;case 4:q0(t,t.stateNode.containerInfo);break;case 10:var u=t.type._context,h=t.memoizedProps.value;_r(of,u._currentValue),u._currentValue=h;break;case 13:if(u=t.memoizedState,u!==null)return u.dehydrated!==null?(_r(zr,zr.current&1),t.flags|=128,null):a&t.child.childLanes?Qb(e,t,a):(_r(zr,zr.current&1),e=ma(e,t,a),e!==null?e.sibling:null);_r(zr,zr.current&1);break;case 19:if(u=(a&t.childLanes)!==0,e.flags&128){if(u)return e2(e,t,a);t.flags|=128}if(h=t.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),_r(zr,zr.current),u)break;return null;case 22:case 23:return t.lanes=0,Xb(e,t,a)}return ma(e,t,a)}var t2,Vy,r2,n2;t2=function(e,t){for(var a=t.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};Vy=function(){};r2=function(e,t,a,u){var h=e.memoizedProps;if(h!==u){e=t.stateNode,Zs($o.current);var x=null;switch(a){case"input":h=cy(e,h),u=cy(e,u),x=[];break;case"select":h=Rr({},h,{value:void 0}),u=Rr({},u,{value:void 0}),x=[];break;case"textarea":h=py(e,h),u=py(e,u),x=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(e.onclick=Qp)}my(a,u);var v;a=null;for(F in h)if(!u.hasOwnProperty(F)&&h.hasOwnProperty(F)&&h[F]!=null)if(F==="style"){var c=h[F];for(v in c)c.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(Eh.hasOwnProperty(F)?x||(x=[]):(x=x||[]).push(F,null));for(F in u){var I=u[F];if(c=h!=null?h[F]:void 0,u.hasOwnProperty(F)&&I!==c&&(I!=null||c!=null))if(F==="style")if(c){for(v in c)!c.hasOwnProperty(v)||I&&I.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in I)I.hasOwnProperty(v)&&c[v]!==I[v]&&(a||(a={}),a[v]=I[v])}else a||(x||(x=[]),x.push(F,a)),a=I;else F==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,c=c?c.__html:void 0,I!=null&&c!==I&&(x=x||[]).push(F,I)):F==="children"?typeof I!="string"&&typeof I!="number"||(x=x||[]).push(F,""+I):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(Eh.hasOwnProperty(F)?(I!=null&&F==="onScroll"&&wr("scroll",e),x||c===I||(x=[])):(x=x||[]).push(F,I))}a&&(x=x||[]).push("style",a);var F=x;(t.updateQueue=F)&&(t.flags|=4)}};n2=function(e,t,a,u){a!==u&&(t.flags|=4)};function oh(e,t){if(!Pr)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null}}function Hn(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,u=0;if(t)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=u,e.childLanes=a,t}function d5(e,t,a){var u=t.pendingProps;switch(N0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(t),null;case 1:return wi(t.type)&&ef(),Hn(t),null;case 3:return u=t.stateNode,Iu(),br(xi),br(qn),G0(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(e===null||e.child===null)&&(vp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,xo!==null&&(Xy(xo),xo=null))),Vy(e,t),Hn(t),null;case 5:Z0(t);var h=Zs(Bh.current);if(a=t.type,e!==null&&t.stateNode!=null)r2(e,t,a,u,h),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!u){if(t.stateNode===null)throw Error(Ue(166));return Hn(t),null}if(e=Zs($o.current),vp(t)){u=t.stateNode,a=t.type;var x=t.memoizedProps;switch(u[jo]=t,u[Oh]=x,e=(t.mode&1)!==0,a){case"dialog":wr("cancel",u),wr("close",u);break;case"iframe":case"object":case"embed":wr("load",u);break;case"video":case"audio":for(h=0;h<dh.length;h++)wr(dh[h],u);break;case"source":wr("error",u);break;case"img":case"image":case"link":wr("error",u),wr("load",u);break;case"details":wr("toggle",u);break;case"input":d1(u,x),wr("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!x.multiple},wr("invalid",u);break;case"textarea":f1(u,x),wr("invalid",u)}my(a,x),h=null;for(var v in x)if(x.hasOwnProperty(v)){var c=x[v];v==="children"?typeof c=="string"?u.textContent!==c&&(x.suppressHydrationWarning!==!0&&_p(u.textContent,c,e),h=["children",c]):typeof c=="number"&&u.textContent!==""+c&&(x.suppressHydrationWarning!==!0&&_p(u.textContent,c,e),h=["children",""+c]):Eh.hasOwnProperty(v)&&c!=null&&v==="onScroll"&&wr("scroll",u)}switch(a){case"input":cp(u),p1(u,x,!0);break;case"textarea":cp(u),m1(u);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(u.onclick=Qp)}u=h,t.updateQueue=u,u!==null&&(t.flags|=4)}else{v=h.nodeType===9?h:h.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Mw(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=v.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof u.is=="string"?e=v.createElement(a,{is:u.is}):(e=v.createElement(a),a==="select"&&(v=e,u.multiple?v.multiple=!0:u.size&&(v.size=u.size))):e=v.createElementNS(e,a),e[jo]=t,e[Oh]=u,t2(e,t,!1,!1),t.stateNode=e;e:{switch(v=gy(a,u),a){case"dialog":wr("cancel",e),wr("close",e),h=u;break;case"iframe":case"object":case"embed":wr("load",e),h=u;break;case"video":case"audio":for(h=0;h<dh.length;h++)wr(dh[h],e);h=u;break;case"source":wr("error",e),h=u;break;case"img":case"image":case"link":wr("error",e),wr("load",e),h=u;break;case"details":wr("toggle",e),h=u;break;case"input":d1(e,u),h=cy(e,u),wr("invalid",e);break;case"option":h=u;break;case"select":e._wrapperState={wasMultiple:!!u.multiple},h=Rr({},u,{value:void 0}),wr("invalid",e);break;case"textarea":f1(e,u),h=py(e,u),wr("invalid",e);break;default:h=u}my(a,h),c=h;for(x in c)if(c.hasOwnProperty(x)){var I=c[x];x==="style"?Rw(e,I):x==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,I!=null&&zw(e,I)):x==="children"?typeof I=="string"?(a!=="textarea"||I!=="")&&Ch(e,I):typeof I=="number"&&Ch(e,""+I):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(Eh.hasOwnProperty(x)?I!=null&&x==="onScroll"&&wr("scroll",e):I!=null&&T0(e,x,I,v))}switch(a){case"input":cp(e),p1(e,u,!1);break;case"textarea":cp(e),m1(e);break;case"option":u.value!=null&&e.setAttribute("value",""+us(u.value));break;case"select":e.multiple=!!u.multiple,x=u.value,x!=null?fu(e,!!u.multiple,x,!1):u.defaultValue!=null&&fu(e,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(e.onclick=Qp)}switch(a){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Hn(t),null;case 6:if(e&&t.stateNode!=null)n2(e,t,e.memoizedProps,u);else{if(typeof u!="string"&&t.stateNode===null)throw Error(Ue(166));if(a=Zs(Bh.current),Zs($o.current),vp(t)){if(u=t.stateNode,a=t.memoizedProps,u[jo]=t,(x=u.nodeValue!==a)&&(e=ji,e!==null))switch(e.tag){case 3:_p(u.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&_p(u.nodeValue,a,(e.mode&1)!==0)}x&&(t.flags|=4)}else u=(a.nodeType===9?a:a.ownerDocument).createTextNode(u),u[jo]=t,t.stateNode=u}return Hn(t),null;case 13:if(br(zr),u=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Pr&&Ni!==null&&t.mode&1&&!(t.flags&128))wb(),Cu(),t.flags|=98560,x=!1;else if(x=vp(t),u!==null&&u.dehydrated!==null){if(e===null){if(!x)throw Error(Ue(318));if(x=t.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(Ue(317));x[jo]=t}else Cu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Hn(t),x=!1}else xo!==null&&(Xy(xo),xo=null),x=!0;if(!x)return t.flags&65536?t:null}return t.flags&128?(t.lanes=a,t):(u=u!==null,u!==(e!==null&&e.memoizedState!==null)&&u&&(t.child.flags|=8192,t.mode&1&&(e===null||zr.current&1?an===0&&(an=3):a_())),t.updateQueue!==null&&(t.flags|=4),Hn(t),null);case 4:return Iu(),Vy(e,t),e===null&&Rh(t.stateNode.containerInfo),Hn(t),null;case 10:return $0(t.type._context),Hn(t),null;case 17:return wi(t.type)&&ef(),Hn(t),null;case 19:if(br(zr),x=t.memoizedState,x===null)return Hn(t),null;if(u=(t.flags&128)!==0,v=x.rendering,v===null)if(u)oh(x,!1);else{if(an!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(v=lf(e),v!==null){for(t.flags|=128,oh(x,!1),u=v.updateQueue,u!==null&&(t.updateQueue=u,t.flags|=4),t.subtreeFlags=0,u=a,a=t.child;a!==null;)x=a,e=u,x.flags&=14680066,v=x.alternate,v===null?(x.childLanes=0,x.lanes=e,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=v.childLanes,x.lanes=v.lanes,x.child=v.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=v.memoizedProps,x.memoizedState=v.memoizedState,x.updateQueue=v.updateQueue,x.type=v.type,e=v.dependencies,x.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return _r(zr,zr.current&1|2),t.child}e=e.sibling}x.tail!==null&&Zr()>Mu&&(t.flags|=128,u=!0,oh(x,!1),t.lanes=4194304)}else{if(!u)if(e=lf(v),e!==null){if(t.flags|=128,u=!0,a=e.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),oh(x,!0),x.tail===null&&x.tailMode==="hidden"&&!v.alternate&&!Pr)return Hn(t),null}else 2*Zr()-x.renderingStartTime>Mu&&a!==1073741824&&(t.flags|=128,u=!0,oh(x,!1),t.lanes=4194304);x.isBackwards?(v.sibling=t.child,t.child=v):(a=x.last,a!==null?a.sibling=v:t.child=v,x.last=v)}return x.tail!==null?(t=x.tail,x.rendering=t,x.tail=t.sibling,x.renderingStartTime=Zr(),t.sibling=null,a=zr.current,_r(zr,u?a&1|2:a&1),t):(Hn(t),null);case 22:case 23:return o_(),u=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==u&&(t.flags|=8192),u&&t.mode&1?Bi&1073741824&&(Hn(t),t.subtreeFlags&6&&(t.flags|=8192)):Hn(t),null;case 24:return null;case 25:return null}throw Error(Ue(156,t.tag))}function p5(e,t){switch(N0(t),t.tag){case 1:return wi(t.type)&&ef(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Iu(),br(xi),br(qn),G0(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Z0(t),null;case 13:if(br(zr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ue(340));Cu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return br(zr),null;case 4:return Iu(),null;case 10:return $0(t.type._context),null;case 22:case 23:return o_(),null;case 24:return null;default:return null}}var bp=!1,Wn=!1,f5=typeof WeakSet=="function"?WeakSet:Set,ct=null;function du(e,t){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(u){Nr(e,t,u)}else a.current=null}function $y(e,t,a){try{a()}catch(u){Nr(e,t,u)}}var ix=!1;function m5(e,t){if(Ey=Xp,e=lb(),F0(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var h=u.anchorOffset,x=u.focusNode;u=u.focusOffset;try{a.nodeType,x.nodeType}catch{a=null;break e}var v=0,c=-1,I=-1,F=0,W=0,D=e,B=null;t:for(;;){for(var le;D!==a||h!==0&&D.nodeType!==3||(c=v+h),D!==x||u!==0&&D.nodeType!==3||(I=v+u),D.nodeType===3&&(v+=D.nodeValue.length),(le=D.firstChild)!==null;)B=D,D=le;for(;;){if(D===e)break t;if(B===a&&++F===h&&(c=v),B===x&&++W===u&&(I=v),(le=D.nextSibling)!==null)break;D=B,B=D.parentNode}D=le}a=c===-1||I===-1?null:{start:c,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(Cy={focusedElem:e,selectionRange:a},Xp=!1,ct=t;ct!==null;)if(t=ct,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ct=e;else for(;ct!==null;){t=ct;try{var ge=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var de=ge.memoizedProps,we=ge.memoizedState,ee=t.stateNode,q=ee.getSnapshotBeforeUpdate(t.elementType===t.type?de:_o(t.type,de),we);ee.__reactInternalSnapshotBeforeUpdate=q}break;case 3:var te=t.stateNode.containerInfo;te.nodeType===1?te.textContent="":te.nodeType===9&&te.documentElement&&te.removeChild(te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ue(163))}}catch(_e){Nr(t,t.return,_e)}if(e=t.sibling,e!==null){e.return=t.return,ct=e;break}ct=t.return}return ge=ix,ix=!1,ge}function bh(e,t,a){var u=t.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&e)===e){var x=h.destroy;h.destroy=void 0,x!==void 0&&$y(t,a,x)}h=h.next}while(h!==u)}}function Hf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var a=t=t.next;do{if((a.tag&e)===e){var u=a.create;a.destroy=u()}a=a.next}while(a!==t)}}function Hy(e){var t=e.ref;if(t!==null){var a=e.stateNode;switch(e.tag){case 5:e=a;break;default:e=a}typeof t=="function"?t(e):t.current=e}}function i2(e){var t=e.alternate;t!==null&&(e.alternate=null,i2(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[jo],delete t[Oh],delete t[Ay],delete t[YC],delete t[JC])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function o2(e){return e.tag===5||e.tag===3||e.tag===4}function ox(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||o2(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wy(e,t,a){var u=e.tag;if(u===5||u===6)e=e.stateNode,t?a.nodeType===8?a.parentNode.insertBefore(e,t):a.insertBefore(e,t):(a.nodeType===8?(t=a.parentNode,t.insertBefore(e,a)):(t=a,t.appendChild(e)),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Qp));else if(u!==4&&(e=e.child,e!==null))for(Wy(e,t,a),e=e.sibling;e!==null;)Wy(e,t,a),e=e.sibling}function qy(e,t,a){var u=e.tag;if(u===5||u===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(u!==4&&(e=e.child,e!==null))for(qy(e,t,a),e=e.sibling;e!==null;)qy(e,t,a),e=e.sibling}var Pn=null,vo=!1;function $a(e,t,a){for(a=a.child;a!==null;)a2(e,t,a),a=a.sibling}function a2(e,t,a){if(Vo&&typeof Vo.onCommitFiberUnmount=="function")try{Vo.onCommitFiberUnmount(Of,a)}catch{}switch(a.tag){case 5:Wn||du(a,t);case 6:var u=Pn,h=vo;Pn=null,$a(e,t,a),Pn=u,vo=h,Pn!==null&&(vo?(e=Pn,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):Pn.removeChild(a.stateNode));break;case 18:Pn!==null&&(vo?(e=Pn,a=a.stateNode,e.nodeType===8?Rg(e.parentNode,a):e.nodeType===1&&Rg(e,a),Mh(e)):Rg(Pn,a.stateNode));break;case 4:u=Pn,h=vo,Pn=a.stateNode.containerInfo,vo=!0,$a(e,t,a),Pn=u,vo=h;break;case 0:case 11:case 14:case 15:if(!Wn&&(u=a.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var x=h,v=x.destroy;x=x.tag,v!==void 0&&(x&2||x&4)&&$y(a,t,v),h=h.next}while(h!==u)}$a(e,t,a);break;case 1:if(!Wn&&(du(a,t),u=a.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=a.memoizedProps,u.state=a.memoizedState,u.componentWillUnmount()}catch(c){Nr(a,t,c)}$a(e,t,a);break;case 21:$a(e,t,a);break;case 22:a.mode&1?(Wn=(u=Wn)||a.memoizedState!==null,$a(e,t,a),Wn=u):$a(e,t,a);break;default:$a(e,t,a)}}function ax(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new f5),t.forEach(function(u){var h=T5.bind(null,e,u);a.has(u)||(a.add(u),u.then(h,h))})}}function yo(e,t){var a=t.deletions;if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];try{var x=e,v=t,c=v;e:for(;c!==null;){switch(c.tag){case 5:Pn=c.stateNode,vo=!1;break e;case 3:Pn=c.stateNode.containerInfo,vo=!0;break e;case 4:Pn=c.stateNode.containerInfo,vo=!0;break e}c=c.return}if(Pn===null)throw Error(Ue(160));a2(x,v,h),Pn=null,vo=!1;var I=h.alternate;I!==null&&(I.return=null),h.return=null}catch(F){Nr(h,t,F)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)s2(t,e),t=t.sibling}function s2(e,t){var a=e.alternate,u=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yo(t,e),Bo(e),u&4){try{bh(3,e,e.return),Hf(3,e)}catch(de){Nr(e,e.return,de)}try{bh(5,e,e.return)}catch(de){Nr(e,e.return,de)}}break;case 1:yo(t,e),Bo(e),u&512&&a!==null&&du(a,a.return);break;case 5:if(yo(t,e),Bo(e),u&512&&a!==null&&du(a,a.return),e.flags&32){var h=e.stateNode;try{Ch(h,"")}catch(de){Nr(e,e.return,de)}}if(u&4&&(h=e.stateNode,h!=null)){var x=e.memoizedProps,v=a!==null?a.memoizedProps:x,c=e.type,I=e.updateQueue;if(e.updateQueue=null,I!==null)try{c==="input"&&x.type==="radio"&&x.name!=null&&Iw(h,x),gy(c,v);var F=gy(c,x);for(v=0;v<I.length;v+=2){var W=I[v],D=I[v+1];W==="style"?Rw(h,D):W==="dangerouslySetInnerHTML"?zw(h,D):W==="children"?Ch(h,D):T0(h,W,D,F)}switch(c){case"input":hy(h,x);break;case"textarea":Aw(h,x);break;case"select":var B=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!x.multiple;var le=x.value;le!=null?fu(h,!!x.multiple,le,!1):B!==!!x.multiple&&(x.defaultValue!=null?fu(h,!!x.multiple,x.defaultValue,!0):fu(h,!!x.multiple,x.multiple?[]:"",!1))}h[Oh]=x}catch(de){Nr(e,e.return,de)}}break;case 6:if(yo(t,e),Bo(e),u&4){if(e.stateNode===null)throw Error(Ue(162));h=e.stateNode,x=e.memoizedProps;try{h.nodeValue=x}catch(de){Nr(e,e.return,de)}}break;case 3:if(yo(t,e),Bo(e),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Mh(t.containerInfo)}catch(de){Nr(e,e.return,de)}break;case 4:yo(t,e),Bo(e);break;case 13:yo(t,e),Bo(e),h=e.child,h.flags&8192&&(x=h.memoizedState!==null,h.stateNode.isHidden=x,!x||h.alternate!==null&&h.alternate.memoizedState!==null||(n_=Zr())),u&4&&ax(e);break;case 22:if(W=a!==null&&a.memoizedState!==null,e.mode&1?(Wn=(F=Wn)||W,yo(t,e),Wn=F):yo(t,e),Bo(e),u&8192){if(F=e.memoizedState!==null,(e.stateNode.isHidden=F)&&!W&&e.mode&1)for(ct=e,W=e.child;W!==null;){for(D=ct=W;ct!==null;){switch(B=ct,le=B.child,B.tag){case 0:case 11:case 14:case 15:bh(4,B,B.return);break;case 1:du(B,B.return);var ge=B.stateNode;if(typeof ge.componentWillUnmount=="function"){u=B,a=B.return;try{t=u,ge.props=t.memoizedProps,ge.state=t.memoizedState,ge.componentWillUnmount()}catch(de){Nr(u,a,de)}}break;case 5:du(B,B.return);break;case 22:if(B.memoizedState!==null){lx(D);continue}}le!==null?(le.return=B,ct=le):lx(D)}W=W.sibling}e:for(W=null,D=e;;){if(D.tag===5){if(W===null){W=D;try{h=D.stateNode,F?(x=h.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(c=D.stateNode,I=D.memoizedProps.style,v=I!=null&&I.hasOwnProperty("display")?I.display:null,c.style.display=Lw("display",v))}catch(de){Nr(e,e.return,de)}}}else if(D.tag===6){if(W===null)try{D.stateNode.nodeValue=F?"":D.memoizedProps}catch(de){Nr(e,e.return,de)}}else if((D.tag!==22&&D.tag!==23||D.memoizedState===null||D===e)&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===e)break e;for(;D.sibling===null;){if(D.return===null||D.return===e)break e;W===D&&(W=null),D=D.return}W===D&&(W=null),D.sibling.return=D.return,D=D.sibling}}break;case 19:yo(t,e),Bo(e),u&4&&ax(e);break;case 21:break;default:yo(t,e),Bo(e)}}function Bo(e){var t=e.flags;if(t&2){try{e:{for(var a=e.return;a!==null;){if(o2(a)){var u=a;break e}a=a.return}throw Error(Ue(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(Ch(h,""),u.flags&=-33);var x=ox(e);qy(e,x,h);break;case 3:case 4:var v=u.stateNode.containerInfo,c=ox(e);Wy(e,c,v);break;default:throw Error(Ue(161))}}catch(I){Nr(e,e.return,I)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function g5(e,t,a){ct=e,l2(e)}function l2(e,t,a){for(var u=(e.mode&1)!==0;ct!==null;){var h=ct,x=h.child;if(h.tag===22&&u){var v=h.memoizedState!==null||bp;if(!v){var c=h.alternate,I=c!==null&&c.memoizedState!==null||Wn;c=bp;var F=Wn;if(bp=v,(Wn=I)&&!F)for(ct=h;ct!==null;)v=ct,I=v.child,v.tag===22&&v.memoizedState!==null?ux(h):I!==null?(I.return=v,ct=I):ux(h);for(;x!==null;)ct=x,l2(x),x=x.sibling;ct=h,bp=c,Wn=F}sx(e)}else h.subtreeFlags&8772&&x!==null?(x.return=h,ct=x):sx(e)}}function sx(e){for(;ct!==null;){var t=ct;if(t.flags&8772){var a=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Wn||Hf(5,t);break;case 1:var u=t.stateNode;if(t.flags&4&&!Wn)if(a===null)u.componentDidMount();else{var h=t.elementType===t.type?a.memoizedProps:_o(t.type,a.memoizedProps);u.componentDidUpdate(h,a.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var x=t.updateQueue;x!==null&&W1(t,x,u);break;case 3:var v=t.updateQueue;if(v!==null){if(a=null,t.child!==null)switch(t.child.tag){case 5:a=t.child.stateNode;break;case 1:a=t.child.stateNode}W1(t,v,a)}break;case 5:var c=t.stateNode;if(a===null&&t.flags&4){a=c;var I=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":I.autoFocus&&a.focus();break;case"img":I.src&&(a.src=I.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var F=t.alternate;if(F!==null){var W=F.memoizedState;if(W!==null){var D=W.dehydrated;D!==null&&Mh(D)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ue(163))}Wn||t.flags&512&&Hy(t)}catch(B){Nr(t,t.return,B)}}if(t===e){ct=null;break}if(a=t.sibling,a!==null){a.return=t.return,ct=a;break}ct=t.return}}function lx(e){for(;ct!==null;){var t=ct;if(t===e){ct=null;break}var a=t.sibling;if(a!==null){a.return=t.return,ct=a;break}ct=t.return}}function ux(e){for(;ct!==null;){var t=ct;try{switch(t.tag){case 0:case 11:case 15:var a=t.return;try{Hf(4,t)}catch(I){Nr(t,a,I)}break;case 1:var u=t.stateNode;if(typeof u.componentDidMount=="function"){var h=t.return;try{u.componentDidMount()}catch(I){Nr(t,h,I)}}var x=t.return;try{Hy(t)}catch(I){Nr(t,x,I)}break;case 5:var v=t.return;try{Hy(t)}catch(I){Nr(t,v,I)}}}catch(I){Nr(t,t.return,I)}if(t===e){ct=null;break}var c=t.sibling;if(c!==null){c.return=t.return,ct=c;break}ct=t.return}}var y5=Math.ceil,hf=ga.ReactCurrentDispatcher,t_=ga.ReactCurrentOwner,to=ga.ReactCurrentBatchConfig,Zt=0,xn=null,en=null,An=0,Bi=0,pu=ds(0),an=0,Vh=null,el=0,Wf=0,r_=0,Sh=null,_i=null,n_=0,Mu=1/0,sa=null,df=!1,Zy=null,os=null,Sp=!1,Ya=null,pf=0,Th=0,Gy=null,Bp=-1,Np=0;function oi(){return Zt&6?Zr():Bp!==-1?Bp:Bp=Zr()}function as(e){return e.mode&1?Zt&2&&An!==0?An&-An:e5.transition!==null?(Np===0&&(Np=qw()),Np):(e=ir,e!==0||(e=window.event,e=e===void 0?16:Qw(e.type)),e):1}function bo(e,t,a,u){if(50<Th)throw Th=0,Gy=null,Error(Ue(185));Zh(e,a,u),(!(Zt&2)||e!==xn)&&(e===xn&&(!(Zt&2)&&(Wf|=a),an===4&&Ka(e,An)),bi(e,u),a===1&&Zt===0&&!(t.mode&1)&&(Mu=Zr()+500,Uf&&ps()))}function bi(e,t){var a=e.callbackNode;eC(e,t);var u=Kp(e,e===xn?An:0);if(u===0)a!==null&&_1(a),e.callbackNode=null,e.callbackPriority=0;else if(t=u&-u,e.callbackPriority!==t){if(a!=null&&_1(a),t===1)e.tag===0?QC(cx.bind(null,e)):_b(cx.bind(null,e)),KC(function(){!(Zt&6)&&ps()}),a=null;else{switch(Zw(u)){case 1:a=I0;break;case 4:a=Hw;break;case 16:a=Gp;break;case 536870912:a=Ww;break;default:a=Gp}a=g2(a,u2.bind(null,e))}e.callbackPriority=t,e.callbackNode=a}}function u2(e,t){if(Bp=-1,Np=0,Zt&6)throw Error(Ue(327));var a=e.callbackNode;if(vu()&&e.callbackNode!==a)return null;var u=Kp(e,e===xn?An:0);if(u===0)return null;if(u&30||u&e.expiredLanes||t)t=ff(e,u);else{t=u;var h=Zt;Zt|=2;var x=h2();(xn!==e||An!==t)&&(sa=null,Mu=Zr()+500,Gs(e,t));do try{x5();break}catch(c){c2(e,c)}while(!0);V0(),hf.current=x,Zt=h,en!==null?t=0:(xn=null,An=0,t=an)}if(t!==0){if(t===2&&(h=wy(e),h!==0&&(u=h,t=Ky(e,h))),t===1)throw a=Vh,Gs(e,0),Ka(e,u),bi(e,Zr()),a;if(t===6)Ka(e,u);else{if(h=e.current.alternate,!(u&30)&&!_5(h)&&(t=ff(e,u),t===2&&(x=wy(e),x!==0&&(u=x,t=Ky(e,x))),t===1))throw a=Vh,Gs(e,0),Ka(e,u),bi(e,Zr()),a;switch(e.finishedWork=h,e.finishedLanes=u,t){case 0:case 1:throw Error(Ue(345));case 2:$s(e,_i,sa);break;case 3:if(Ka(e,u),(u&130023424)===u&&(t=n_+500-Zr(),10<t)){if(Kp(e,0)!==0)break;if(h=e.suspendedLanes,(h&u)!==u){oi(),e.pingedLanes|=e.suspendedLanes&h;break}e.timeoutHandle=Iy($s.bind(null,e,_i,sa),t);break}$s(e,_i,sa);break;case 4:if(Ka(e,u),(u&4194240)===u)break;for(t=e.eventTimes,h=-1;0<u;){var v=31-wo(u);x=1<<v,v=t[v],v>h&&(h=v),u&=~x}if(u=h,u=Zr()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*y5(u/1960))-u,10<u){e.timeoutHandle=Iy($s.bind(null,e,_i,sa),u);break}$s(e,_i,sa);break;case 5:$s(e,_i,sa);break;default:throw Error(Ue(329))}}}return bi(e,Zr()),e.callbackNode===a?u2.bind(null,e):null}function Ky(e,t){var a=Sh;return e.current.memoizedState.isDehydrated&&(Gs(e,t).flags|=256),e=ff(e,t),e!==2&&(t=_i,_i=a,t!==null&&Xy(t)),e}function Xy(e){_i===null?_i=e:_i.push.apply(_i,e)}function _5(e){for(var t=e;;){if(t.flags&16384){var a=t.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var u=0;u<a.length;u++){var h=a[u],x=h.getSnapshot;h=h.value;try{if(!So(x(),h))return!1}catch{return!1}}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ka(e,t){for(t&=~r_,t&=~Wf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var a=31-wo(t),u=1<<a;e[a]=-1,t&=~u}}function cx(e){if(Zt&6)throw Error(Ue(327));vu();var t=Kp(e,0);if(!(t&1))return bi(e,Zr()),null;var a=ff(e,t);if(e.tag!==0&&a===2){var u=wy(e);u!==0&&(t=u,a=Ky(e,u))}if(a===1)throw a=Vh,Gs(e,0),Ka(e,t),bi(e,Zr()),a;if(a===6)throw Error(Ue(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$s(e,_i,sa),bi(e,Zr()),null}function i_(e,t){var a=Zt;Zt|=1;try{return e(t)}finally{Zt=a,Zt===0&&(Mu=Zr()+500,Uf&&ps())}}function tl(e){Ya!==null&&Ya.tag===0&&!(Zt&6)&&vu();var t=Zt;Zt|=1;var a=to.transition,u=ir;try{if(to.transition=null,ir=1,e)return e()}finally{ir=u,to.transition=a,Zt=t,!(Zt&6)&&ps()}}function o_(){Bi=pu.current,br(pu)}function Gs(e,t){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,GC(a)),en!==null)for(a=en.return;a!==null;){var u=a;switch(N0(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&ef();break;case 3:Iu(),br(xi),br(qn),G0();break;case 5:Z0(u);break;case 4:Iu();break;case 13:br(zr);break;case 19:br(zr);break;case 10:$0(u.type._context);break;case 22:case 23:o_()}a=a.return}if(xn=e,en=e=ss(e.current,null),An=Bi=t,an=0,Vh=null,r_=Wf=el=0,_i=Sh=null,qs!==null){for(t=0;t<qs.length;t++)if(a=qs[t],u=a.interleaved,u!==null){a.interleaved=null;var h=u.next,x=a.pending;if(x!==null){var v=x.next;x.next=h,u.next=v}a.pending=u}qs=null}return e}function c2(e,t){do{var a=en;try{if(V0(),Dp.current=cf,uf){for(var u=Lr.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}uf=!1}if(Qs=0,vn=on=Lr=null,wh=!1,Nh=0,t_.current=null,a===null||a.return===null){an=1,Vh=t,en=null;break}e:{var x=e,v=a.return,c=a,I=t;if(t=An,c.flags|=32768,I!==null&&typeof I=="object"&&typeof I.then=="function"){var F=I,W=c,D=W.tag;if(!(W.mode&1)&&(D===0||D===11||D===15)){var B=W.alternate;B?(W.updateQueue=B.updateQueue,W.memoizedState=B.memoizedState,W.lanes=B.lanes):(W.updateQueue=null,W.memoizedState=null)}var le=Y1(v);if(le!==null){le.flags&=-257,J1(le,v,c,x,t),le.mode&1&&X1(x,F,t),t=le,I=F;var ge=t.updateQueue;if(ge===null){var de=new Set;de.add(I),t.updateQueue=de}else ge.add(I);break e}else{if(!(t&1)){X1(x,F,t),a_();break e}I=Error(Ue(426))}}else if(Pr&&c.mode&1){var we=Y1(v);if(we!==null){!(we.flags&65536)&&(we.flags|=256),J1(we,v,c,x,t),j0(Au(I,c));break e}}x=I=Au(I,c),an!==4&&(an=2),Sh===null?Sh=[x]:Sh.push(x),x=v;do{switch(x.tag){case 3:x.flags|=65536,t&=-t,x.lanes|=t;var ee=Zb(x,I,t);H1(x,ee);break e;case 1:c=I;var q=x.type,te=x.stateNode;if(!(x.flags&128)&&(typeof q.getDerivedStateFromError=="function"||te!==null&&typeof te.componentDidCatch=="function"&&(os===null||!os.has(te)))){x.flags|=65536,t&=-t,x.lanes|=t;var _e=Gb(x,c,t);H1(x,_e);break e}}x=x.return}while(x!==null)}p2(a)}catch(Ce){t=Ce,en===a&&a!==null&&(en=a=a.return);continue}break}while(!0)}function h2(){var e=hf.current;return hf.current=cf,e===null?cf:e}function a_(){(an===0||an===3||an===2)&&(an=4),xn===null||!(el&268435455)&&!(Wf&268435455)||Ka(xn,An)}function ff(e,t){var a=Zt;Zt|=2;var u=h2();(xn!==e||An!==t)&&(sa=null,Gs(e,t));do try{v5();break}catch(h){c2(e,h)}while(!0);if(V0(),Zt=a,hf.current=u,en!==null)throw Error(Ue(261));return xn=null,An=0,an}function v5(){for(;en!==null;)d2(en)}function x5(){for(;en!==null&&!WE();)d2(en)}function d2(e){var t=m2(e.alternate,e,Bi);e.memoizedProps=e.pendingProps,t===null?p2(e):en=t,t_.current=null}function p2(e){var t=e;do{var a=t.alternate;if(e=t.return,t.flags&32768){if(a=p5(a,t),a!==null){a.flags&=32767,en=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{an=6,en=null;return}}else if(a=d5(a,t,Bi),a!==null){en=a;return}if(t=t.sibling,t!==null){en=t;return}en=t=e}while(t!==null);an===0&&(an=5)}function $s(e,t,a){var u=ir,h=to.transition;try{to.transition=null,ir=1,w5(e,t,a,u)}finally{to.transition=h,ir=u}return null}function w5(e,t,a,u){do vu();while(Ya!==null);if(Zt&6)throw Error(Ue(327));a=e.finishedWork;var h=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(Ue(177));e.callbackNode=null,e.callbackPriority=0;var x=a.lanes|a.childLanes;if(tC(e,x),e===xn&&(en=xn=null,An=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Sp||(Sp=!0,g2(Gp,function(){return vu(),null})),x=(a.flags&15990)!==0,a.subtreeFlags&15990||x){x=to.transition,to.transition=null;var v=ir;ir=1;var c=Zt;Zt|=4,t_.current=null,m5(e,a),s2(a,e),UC(Cy),Xp=!!Ey,Cy=Ey=null,e.current=a,g5(a),qE(),Zt=c,ir=v,to.transition=x}else e.current=a;if(Sp&&(Sp=!1,Ya=e,pf=h),x=e.pendingLanes,x===0&&(os=null),KE(a.stateNode),bi(e,Zr()),t!==null)for(u=e.onRecoverableError,a=0;a<t.length;a++)h=t[a],u(h.value,{componentStack:h.stack,digest:h.digest});if(df)throw df=!1,e=Zy,Zy=null,e;return pf&1&&e.tag!==0&&vu(),x=e.pendingLanes,x&1?e===Gy?Th++:(Th=0,Gy=e):Th=0,ps(),null}function vu(){if(Ya!==null){var e=Zw(pf),t=to.transition,a=ir;try{if(to.transition=null,ir=16>e?16:e,Ya===null)var u=!1;else{if(e=Ya,Ya=null,pf=0,Zt&6)throw Error(Ue(331));var h=Zt;for(Zt|=4,ct=e.current;ct!==null;){var x=ct,v=x.child;if(ct.flags&16){var c=x.deletions;if(c!==null){for(var I=0;I<c.length;I++){var F=c[I];for(ct=F;ct!==null;){var W=ct;switch(W.tag){case 0:case 11:case 15:bh(8,W,x)}var D=W.child;if(D!==null)D.return=W,ct=D;else for(;ct!==null;){W=ct;var B=W.sibling,le=W.return;if(i2(W),W===F){ct=null;break}if(B!==null){B.return=le,ct=B;break}ct=le}}}var ge=x.alternate;if(ge!==null){var de=ge.child;if(de!==null){ge.child=null;do{var we=de.sibling;de.sibling=null,de=we}while(de!==null)}}ct=x}}if(x.subtreeFlags&2064&&v!==null)v.return=x,ct=v;else e:for(;ct!==null;){if(x=ct,x.flags&2048)switch(x.tag){case 0:case 11:case 15:bh(9,x,x.return)}var ee=x.sibling;if(ee!==null){ee.return=x.return,ct=ee;break e}ct=x.return}}var q=e.current;for(ct=q;ct!==null;){v=ct;var te=v.child;if(v.subtreeFlags&2064&&te!==null)te.return=v,ct=te;else e:for(v=q;ct!==null;){if(c=ct,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Hf(9,c)}}catch(Ce){Nr(c,c.return,Ce)}if(c===v){ct=null;break e}var _e=c.sibling;if(_e!==null){_e.return=c.return,ct=_e;break e}ct=c.return}}if(Zt=h,ps(),Vo&&typeof Vo.onPostCommitFiberRoot=="function")try{Vo.onPostCommitFiberRoot(Of,e)}catch{}u=!0}return u}finally{ir=a,to.transition=t}}return!1}function hx(e,t,a){t=Au(a,t),t=Zb(e,t,1),e=is(e,t,1),t=oi(),e!==null&&(Zh(e,1,t),bi(e,t))}function Nr(e,t,a){if(e.tag===3)hx(e,e,a);else for(;t!==null;){if(t.tag===3){hx(t,e,a);break}else if(t.tag===1){var u=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(os===null||!os.has(u))){e=Au(a,e),e=Gb(t,e,1),t=is(t,e,1),e=oi(),t!==null&&(Zh(t,1,e),bi(t,e));break}}t=t.return}}function b5(e,t,a){var u=e.pingCache;u!==null&&u.delete(t),t=oi(),e.pingedLanes|=e.suspendedLanes&a,xn===e&&(An&a)===a&&(an===4||an===3&&(An&130023424)===An&&500>Zr()-n_?Gs(e,0):r_|=a),bi(e,t)}function f2(e,t){t===0&&(e.mode&1?(t=pp,pp<<=1,!(pp&130023424)&&(pp=4194304)):t=1);var a=oi();e=fa(e,t),e!==null&&(Zh(e,t,a),bi(e,a))}function S5(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),f2(e,a)}function T5(e,t){var a=0;switch(e.tag){case 13:var u=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:u=e.stateNode;break;default:throw Error(Ue(314))}u!==null&&u.delete(t),f2(e,a)}var m2;m2=function(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps||xi.current)vi=!0;else{if(!(e.lanes&a)&&!(t.flags&128))return vi=!1,h5(e,t,a);vi=!!(e.flags&131072)}else vi=!1,Pr&&t.flags&1048576&&vb(t,nf,t.index);switch(t.lanes=0,t.tag){case 2:var u=t.type;Fp(e,t),e=t.pendingProps;var h=Eu(t,qn.current);_u(t,a),h=X0(null,t,u,e,h,a);var x=Y0();return t.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,wi(u)?(x=!0,tf(t)):x=!1,t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,W0(t),h.updater=$f,t.stateNode=h,h._reactInternals=t,Oy(t,u,e,a),t=Ny(null,t,u,!0,x,a)):(t.tag=0,Pr&&x&&B0(t),ii(null,t,h,a),t=t.child),t;case 16:u=t.elementType;e:{switch(Fp(e,t),e=t.pendingProps,h=u._init,u=h(u._payload),t.type=u,h=t.tag=E5(u),e=_o(u,e),h){case 0:t=By(null,t,u,e,a);break e;case 1:t=tx(null,t,u,e,a);break e;case 11:t=Q1(null,t,u,e,a);break e;case 14:t=ex(null,t,u,_o(u.type,e),a);break e}throw Error(Ue(306,u,""))}return t;case 0:return u=t.type,h=t.pendingProps,h=t.elementType===u?h:_o(u,h),By(e,t,u,h,a);case 1:return u=t.type,h=t.pendingProps,h=t.elementType===u?h:_o(u,h),tx(e,t,u,h,a);case 3:e:{if(Jb(t),e===null)throw Error(Ue(387));u=t.pendingProps,x=t.memoizedState,h=x.element,kb(e,t),sf(t,u,null,a);var v=t.memoizedState;if(u=v.element,x.isDehydrated)if(x={element:u,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},t.updateQueue.baseState=x,t.memoizedState=x,t.flags&256){h=Au(Error(Ue(423)),t),t=rx(e,t,u,a,h);break e}else if(u!==h){h=Au(Error(Ue(424)),t),t=rx(e,t,u,a,h);break e}else for(Ni=ns(t.stateNode.containerInfo.firstChild),ji=t,Pr=!0,xo=null,a=Sb(t,null,u,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Cu(),u===h){t=ma(e,t,a);break e}ii(e,t,u,a)}t=t.child}return t;case 5:return Eb(t),e===null&&Ly(t),u=t.type,h=t.pendingProps,x=e!==null?e.memoizedProps:null,v=h.children,Py(u,h)?v=null:x!==null&&Py(u,x)&&(t.flags|=32),Yb(e,t),ii(e,t,v,a),t.child;case 6:return e===null&&Ly(t),null;case 13:return Qb(e,t,a);case 4:return q0(t,t.stateNode.containerInfo),u=t.pendingProps,e===null?t.child=Pu(t,null,u,a):ii(e,t,u,a),t.child;case 11:return u=t.type,h=t.pendingProps,h=t.elementType===u?h:_o(u,h),Q1(e,t,u,h,a);case 7:return ii(e,t,t.pendingProps,a),t.child;case 8:return ii(e,t,t.pendingProps.children,a),t.child;case 12:return ii(e,t,t.pendingProps.children,a),t.child;case 10:e:{if(u=t.type._context,h=t.pendingProps,x=t.memoizedProps,v=h.value,_r(of,u._currentValue),u._currentValue=v,x!==null)if(So(x.value,v)){if(x.children===h.children&&!xi.current){t=ma(e,t,a);break e}}else for(x=t.child,x!==null&&(x.return=t);x!==null;){var c=x.dependencies;if(c!==null){v=x.child;for(var I=c.firstContext;I!==null;){if(I.context===u){if(x.tag===1){I=ha(-1,a&-a),I.tag=2;var F=x.updateQueue;if(F!==null){F=F.shared;var W=F.pending;W===null?I.next=I:(I.next=W.next,W.next=I),F.pending=I}}x.lanes|=a,I=x.alternate,I!==null&&(I.lanes|=a),Ry(x.return,a,t),c.lanes|=a;break}I=I.next}}else if(x.tag===10)v=x.type===t.type?null:x.child;else if(x.tag===18){if(v=x.return,v===null)throw Error(Ue(341));v.lanes|=a,c=v.alternate,c!==null&&(c.lanes|=a),Ry(v,a,t),v=x.sibling}else v=x.child;if(v!==null)v.return=x;else for(v=x;v!==null;){if(v===t){v=null;break}if(x=v.sibling,x!==null){x.return=v.return,v=x;break}v=v.return}x=v}ii(e,t,h.children,a),t=t.child}return t;case 9:return h=t.type,u=t.pendingProps.children,_u(t,a),h=ro(h),u=u(h),t.flags|=1,ii(e,t,u,a),t.child;case 14:return u=t.type,h=_o(u,t.pendingProps),h=_o(u.type,h),ex(e,t,u,h,a);case 15:return Kb(e,t,t.type,t.pendingProps,a);case 17:return u=t.type,h=t.pendingProps,h=t.elementType===u?h:_o(u,h),Fp(e,t),t.tag=1,wi(u)?(e=!0,tf(t)):e=!1,_u(t,a),qb(t,u,h),Oy(t,u,h,a),Ny(null,t,u,!0,e,a);case 19:return e2(e,t,a);case 22:return Xb(e,t,a)}throw Error(Ue(156,t.tag))};function g2(e,t){return $w(e,t)}function k5(e,t,a,u){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function eo(e,t,a,u){return new k5(e,t,a,u)}function s_(e){return e=e.prototype,!(!e||!e.isReactComponent)}function E5(e){if(typeof e=="function")return s_(e)?1:0;if(e!=null){if(e=e.$$typeof,e===E0)return 11;if(e===C0)return 14}return 2}function ss(e,t){var a=e.alternate;return a===null?(a=eo(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function jp(e,t,a,u,h,x){var v=2;if(u=e,typeof e=="function")s_(e)&&(v=1);else if(typeof e=="string")v=5;else e:switch(e){case nu:return Ks(a.children,h,x,t);case k0:v=8,h|=8;break;case ay:return e=eo(12,a,t,h|2),e.elementType=ay,e.lanes=x,e;case sy:return e=eo(13,a,t,h),e.elementType=sy,e.lanes=x,e;case ly:return e=eo(19,a,t,h),e.elementType=ly,e.lanes=x,e;case Ew:return qf(a,h,x,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Tw:v=10;break e;case kw:v=9;break e;case E0:v=11;break e;case C0:v=14;break e;case Wa:v=16,u=null;break e}throw Error(Ue(130,e==null?e:typeof e,""))}return t=eo(v,a,t,h),t.elementType=e,t.type=u,t.lanes=x,t}function Ks(e,t,a,u){return e=eo(7,e,u,t),e.lanes=a,e}function qf(e,t,a,u){return e=eo(22,e,u,t),e.elementType=Ew,e.lanes=a,e.stateNode={isHidden:!1},e}function Vg(e,t,a){return e=eo(6,e,null,t),e.lanes=a,e}function $g(e,t,a){return t=eo(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function C5(e,t,a,u,h){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sg(0),this.expirationTimes=Sg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sg(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function l_(e,t,a,u,h,x,v,c,I){return e=new C5(e,t,a,c,I),t===1?(t=1,x===!0&&(t|=8)):t=0,x=eo(3,null,null,t),e.current=x,x.stateNode=e,x.memoizedState={element:u,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},W0(x),e}function P5(e,t,a){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ru,key:u==null?null:""+u,children:e,containerInfo:t,implementation:a}}function y2(e){if(!e)return cs;e=e._reactInternals;e:{if(il(e)!==e||e.tag!==1)throw Error(Ue(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(wi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ue(171))}if(e.tag===1){var a=e.type;if(wi(a))return yb(e,a,t)}return t}function _2(e,t,a,u,h,x,v,c,I){return e=l_(a,u,!0,e,h,x,v,c,I),e.context=y2(null),a=e.current,u=oi(),h=as(a),x=ha(u,h),x.callback=t??null,is(a,x,h),e.current.lanes=h,Zh(e,h,u),bi(e,u),e}function Zf(e,t,a,u){var h=t.current,x=oi(),v=as(h);return a=y2(a),t.context===null?t.context=a:t.pendingContext=a,t=ha(x,v),t.payload={element:e},u=u===void 0?null:u,u!==null&&(t.callback=u),e=is(h,t,v),e!==null&&(bo(e,h,v,x),Rp(e,h,v)),v}function mf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function dx(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function u_(e,t){dx(e,t),(e=e.alternate)&&dx(e,t)}function I5(){return null}var v2=typeof reportError=="function"?reportError:function(e){console.error(e)};function c_(e){this._internalRoot=e}Gf.prototype.render=c_.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ue(409));Zf(e,t,null,null)};Gf.prototype.unmount=c_.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;tl(function(){Zf(null,e,null,null)}),t[pa]=null}};function Gf(e){this._internalRoot=e}Gf.prototype.unstable_scheduleHydration=function(e){if(e){var t=Xw();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Ga.length&&t!==0&&t<Ga[a].priority;a++);Ga.splice(a,0,e),a===0&&Jw(e)}};function h_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Kf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function px(){}function A5(e,t,a,u,h){if(h){if(typeof u=="function"){var x=u;u=function(){var F=mf(v);x.call(F)}}var v=_2(t,u,e,0,null,!1,!1,"",px);return e._reactRootContainer=v,e[pa]=v.current,Rh(e.nodeType===8?e.parentNode:e),tl(),v}for(;h=e.lastChild;)e.removeChild(h);if(typeof u=="function"){var c=u;u=function(){var F=mf(I);c.call(F)}}var I=l_(e,0,!1,null,null,!1,!1,"",px);return e._reactRootContainer=I,e[pa]=I.current,Rh(e.nodeType===8?e.parentNode:e),tl(function(){Zf(t,I,a,u)}),I}function Xf(e,t,a,u,h){var x=a._reactRootContainer;if(x){var v=x;if(typeof h=="function"){var c=h;h=function(){var I=mf(v);c.call(I)}}Zf(t,v,e,h)}else v=A5(a,t,e,h,u);return mf(v)}Gw=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var a=hh(t.pendingLanes);a!==0&&(A0(t,a|1),bi(t,Zr()),!(Zt&6)&&(Mu=Zr()+500,ps()))}break;case 13:tl(function(){var u=fa(e,1);if(u!==null){var h=oi();bo(u,e,1,h)}}),u_(e,1)}};M0=function(e){if(e.tag===13){var t=fa(e,134217728);if(t!==null){var a=oi();bo(t,e,134217728,a)}u_(e,134217728)}};Kw=function(e){if(e.tag===13){var t=as(e),a=fa(e,t);if(a!==null){var u=oi();bo(a,e,t,u)}u_(e,t)}};Xw=function(){return ir};Yw=function(e,t){var a=ir;try{return ir=e,t()}finally{ir=a}};_y=function(e,t,a){switch(t){case"input":if(hy(e,a),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<a.length;t++){var u=a[t];if(u!==e&&u.form===e.form){var h=jf(u);if(!h)throw Error(Ue(90));Pw(u),hy(u,h)}}}break;case"textarea":Aw(e,a);break;case"select":t=a.value,t!=null&&fu(e,!!a.multiple,t,!1)}};Fw=i_;Bw=tl;var M5={usingClientEntryPoint:!1,Events:[Kh,su,jf,Dw,Ow,i_]},ah={findFiberByHostInstance:Ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},z5={bundleType:ah.bundleType,version:ah.version,rendererPackageName:ah.rendererPackageName,rendererConfig:ah.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ga.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Uw(e),e===null?null:e.stateNode},findFiberByHostInstance:ah.findFiberByHostInstance||I5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tp.isDisabled&&Tp.supportsFiber)try{Of=Tp.inject(z5),Vo=Tp}catch{}}Vi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M5;Vi.createPortal=function(e,t){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h_(t))throw Error(Ue(200));return P5(e,t,null,a)};Vi.createRoot=function(e,t){if(!h_(e))throw Error(Ue(299));var a=!1,u="",h=v2;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(u=t.identifierPrefix),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=l_(e,1,!1,null,null,a,!1,u,h),e[pa]=t.current,Rh(e.nodeType===8?e.parentNode:e),new c_(t)};Vi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ue(188)):(e=Object.keys(e).join(","),Error(Ue(268,e)));return e=Uw(t),e=e===null?null:e.stateNode,e};Vi.flushSync=function(e){return tl(e)};Vi.hydrate=function(e,t,a){if(!Kf(t))throw Error(Ue(200));return Xf(null,e,t,!0,a)};Vi.hydrateRoot=function(e,t,a){if(!h_(e))throw Error(Ue(405));var u=a!=null&&a.hydratedSources||null,h=!1,x="",v=v2;if(a!=null&&(a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(x=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),t=_2(t,null,e,1,a??null,h,!1,x,v),e[pa]=t.current,Rh(e),u)for(e=0;e<u.length;e++)a=u[e],h=a._getVersion,h=h(a._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[a,h]:t.mutableSourceEagerHydrationData.push(a,h);return new Gf(t)};Vi.render=function(e,t,a){if(!Kf(t))throw Error(Ue(200));return Xf(null,e,t,!1,a)};Vi.unmountComponentAtNode=function(e){if(!Kf(e))throw Error(Ue(40));return e._reactRootContainer?(tl(function(){Xf(null,null,e,!1,function(){e._reactRootContainer=null,e[pa]=null})}),!0):!1};Vi.unstable_batchedUpdates=i_;Vi.unstable_renderSubtreeIntoContainer=function(e,t,a,u){if(!Kf(a))throw Error(Ue(200));if(e==null||e._reactInternals===void 0)throw Error(Ue(38));return Xf(e,t,a,!1,u)};Vi.version="18.3.1-next-f1338f8080-20240426";function x2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(x2)}catch(e){console.error(e)}}x2(),xw.exports=Vi;var w2=xw.exports;const L5=Bu(w2);var fx=w2;iy.createRoot=fx.createRoot,iy.hydrateRoot=fx.hydrateRoot;/**
 * @remix-run/router v1.17.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $h(){return $h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u])}return e},$h.apply(this,arguments)}var Ja;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ja||(Ja={}));const mx="popstate";function R5(e){e===void 0&&(e={});function t(u,h){let{pathname:x,search:v,hash:c}=u.location;return Yy("",{pathname:x,search:v,hash:c},h.state&&h.state.usr||null,h.state&&h.state.key||"default")}function a(u,h){return typeof h=="string"?h:gf(h)}return O5(t,a,null,e)}function jr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function b2(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function D5(){return Math.random().toString(36).substr(2,8)}function gx(e,t){return{usr:e.state,key:e.key,idx:t}}function Yy(e,t,a,u){return a===void 0&&(a=null),$h({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Vu(t):t,{state:a,key:t&&t.key||u||D5()})}function gf(e){let{pathname:t="/",search:a="",hash:u=""}=e;return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),u&&u!=="#"&&(t+=u.charAt(0)==="#"?u:"#"+u),t}function Vu(e){let t={};if(e){let a=e.indexOf("#");a>=0&&(t.hash=e.substr(a),e=e.substr(0,a));let u=e.indexOf("?");u>=0&&(t.search=e.substr(u),e=e.substr(0,u)),e&&(t.pathname=e)}return t}function O5(e,t,a,u){u===void 0&&(u={});let{window:h=document.defaultView,v5Compat:x=!1}=u,v=h.history,c=Ja.Pop,I=null,F=W();F==null&&(F=0,v.replaceState($h({},v.state,{idx:F}),""));function W(){return(v.state||{idx:null}).idx}function D(){c=Ja.Pop;let we=W(),ee=we==null?null:we-F;F=we,I&&I({action:c,location:de.location,delta:ee})}function B(we,ee){c=Ja.Push;let q=Yy(de.location,we,ee);F=W()+1;let te=gx(q,F),_e=de.createHref(q);try{v.pushState(te,"",_e)}catch(Ce){if(Ce instanceof DOMException&&Ce.name==="DataCloneError")throw Ce;h.location.assign(_e)}x&&I&&I({action:c,location:de.location,delta:1})}function le(we,ee){c=Ja.Replace;let q=Yy(de.location,we,ee);F=W();let te=gx(q,F),_e=de.createHref(q);v.replaceState(te,"",_e),x&&I&&I({action:c,location:de.location,delta:0})}function ge(we){let ee=h.location.origin!=="null"?h.location.origin:h.location.href,q=typeof we=="string"?we:gf(we);return q=q.replace(/ $/,"%20"),jr(ee,"No window.location.(origin|href) available to create URL for href: "+q),new URL(q,ee)}let de={get action(){return c},get location(){return e(h,v)},listen(we){if(I)throw new Error("A history only accepts one active listener");return h.addEventListener(mx,D),I=we,()=>{h.removeEventListener(mx,D),I=null}},createHref(we){return t(h,we)},createURL:ge,encodeLocation(we){let ee=ge(we);return{pathname:ee.pathname,search:ee.search,hash:ee.hash}},push:B,replace:le,go(we){return v.go(we)}};return de}var yx;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(yx||(yx={}));function F5(e,t,a){return a===void 0&&(a="/"),B5(e,t,a,!1)}function B5(e,t,a,u){let h=typeof t=="string"?Vu(t):t,x=zu(h.pathname||"/",a);if(x==null)return null;let v=S2(e);N5(v);let c=null;for(let I=0;c==null&&I<v.length;++I){let F=X5(x);c=G5(v[I],F,u)}return c}function S2(e,t,a,u){t===void 0&&(t=[]),a===void 0&&(a=[]),u===void 0&&(u="");let h=(x,v,c)=>{let I={relativePath:c===void 0?x.path||"":c,caseSensitive:x.caseSensitive===!0,childrenIndex:v,route:x};I.relativePath.startsWith("/")&&(jr(I.relativePath.startsWith(u),'Absolute route path "'+I.relativePath+'" nested under path '+('"'+u+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),I.relativePath=I.relativePath.slice(u.length));let F=ls([u,I.relativePath]),W=a.concat(I);x.children&&x.children.length>0&&(jr(x.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+F+'".')),S2(x.children,t,W,F)),!(x.path==null&&!x.index)&&t.push({path:F,score:q5(F,x.index),routesMeta:W})};return e.forEach((x,v)=>{var c;if(x.path===""||!((c=x.path)!=null&&c.includes("?")))h(x,v);else for(let I of T2(x.path))h(x,v,I)}),t}function T2(e){let t=e.split("/");if(t.length===0)return[];let[a,...u]=t,h=a.endsWith("?"),x=a.replace(/\?$/,"");if(u.length===0)return h?[x,""]:[x];let v=T2(u.join("/")),c=[];return c.push(...v.map(I=>I===""?x:[x,I].join("/"))),h&&c.push(...v),c.map(I=>e.startsWith("/")&&I===""?"/":I)}function N5(e){e.sort((t,a)=>t.score!==a.score?a.score-t.score:Z5(t.routesMeta.map(u=>u.childrenIndex),a.routesMeta.map(u=>u.childrenIndex)))}const j5=/^:[\w-]+$/,U5=3,V5=2,$5=1,H5=10,W5=-2,_x=e=>e==="*";function q5(e,t){let a=e.split("/"),u=a.length;return a.some(_x)&&(u+=W5),t&&(u+=V5),a.filter(h=>!_x(h)).reduce((h,x)=>h+(j5.test(x)?U5:x===""?$5:H5),u)}function Z5(e,t){return e.length===t.length&&e.slice(0,-1).every((u,h)=>u===t[h])?e[e.length-1]-t[t.length-1]:0}function G5(e,t,a){let{routesMeta:u}=e,h={},x="/",v=[];for(let c=0;c<u.length;++c){let I=u[c],F=c===u.length-1,W=x==="/"?t:t.slice(x.length)||"/",D=yf({path:I.relativePath,caseSensitive:I.caseSensitive,end:F},W),B=I.route;if(!D&&F&&a&&!u[u.length-1].route.index&&(D=yf({path:I.relativePath,caseSensitive:I.caseSensitive,end:!1},W)),!D)return null;Object.assign(h,D.params),v.push({params:h,pathname:ls([x,D.pathname]),pathnameBase:eP(ls([x,D.pathnameBase])),route:B}),D.pathnameBase!=="/"&&(x=ls([x,D.pathnameBase]))}return v}function yf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[a,u]=K5(e.path,e.caseSensitive,e.end),h=t.match(a);if(!h)return null;let x=h[0],v=x.replace(/(.)\/+$/,"$1"),c=h.slice(1);return{params:u.reduce((F,W,D)=>{let{paramName:B,isOptional:le}=W;if(B==="*"){let de=c[D]||"";v=x.slice(0,x.length-de.length).replace(/(.)\/+$/,"$1")}const ge=c[D];return le&&!ge?F[B]=void 0:F[B]=(ge||"").replace(/%2F/g,"/"),F},{}),pathname:x,pathnameBase:v,pattern:e}}function K5(e,t,a){t===void 0&&(t=!1),a===void 0&&(a=!0),b2(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let u=[],h="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(v,c,I)=>(u.push({paramName:c,isOptional:I!=null}),I?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(u.push({paramName:"*"}),h+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?h+="\\/*$":e!==""&&e!=="/"&&(h+="(?:(?=\\/|$))"),[new RegExp(h,t?void 0:"i"),u]}function X5(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return b2(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function zu(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,u=e.charAt(a);return u&&u!=="/"?null:e.slice(a)||"/"}function Y5(e,t){t===void 0&&(t="/");let{pathname:a,search:u="",hash:h=""}=typeof e=="string"?Vu(e):e;return{pathname:a?a.startsWith("/")?a:J5(a,t):t,search:tP(u),hash:rP(h)}}function J5(e,t){let a=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(h=>{h===".."?a.length>1&&a.pop():h!=="."&&a.push(h)}),a.length>1?a.join("/"):"/"}function Hg(e,t,a,u){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(u)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Q5(e){return e.filter((t,a)=>a===0||t.route.path&&t.route.path.length>0)}function k2(e,t){let a=Q5(e);return t?a.map((u,h)=>h===a.length-1?u.pathname:u.pathnameBase):a.map(u=>u.pathnameBase)}function E2(e,t,a,u){u===void 0&&(u=!1);let h;typeof e=="string"?h=Vu(e):(h=$h({},e),jr(!h.pathname||!h.pathname.includes("?"),Hg("?","pathname","search",h)),jr(!h.pathname||!h.pathname.includes("#"),Hg("#","pathname","hash",h)),jr(!h.search||!h.search.includes("#"),Hg("#","search","hash",h)));let x=e===""||h.pathname==="",v=x?"/":h.pathname,c;if(v==null)c=a;else{let D=t.length-1;if(!u&&v.startsWith("..")){let B=v.split("/");for(;B[0]==="..";)B.shift(),D-=1;h.pathname=B.join("/")}c=D>=0?t[D]:"/"}let I=Y5(h,c),F=v&&v!=="/"&&v.endsWith("/"),W=(x||v===".")&&a.endsWith("/");return!I.pathname.endsWith("/")&&(F||W)&&(I.pathname+="/"),I}const ls=e=>e.join("/").replace(/\/\/+/g,"/"),eP=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),tP=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,rP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function nP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const C2=["post","put","patch","delete"];new Set(C2);const iP=["get",...C2];new Set(iP);/**
 * React Router v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hh(){return Hh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u])}return e},Hh.apply(this,arguments)}const Yf=ke.createContext(null),P2=ke.createContext(null),fs=ke.createContext(null),Jf=ke.createContext(null),ya=ke.createContext({outlet:null,matches:[],isDataRoute:!1}),I2=ke.createContext(null);function oP(e,t){let{relative:a}=t===void 0?{}:t;Yh()||jr(!1);let{basename:u,navigator:h}=ke.useContext(fs),{hash:x,pathname:v,search:c}=Qf(e,{relative:a}),I=v;return u!=="/"&&(I=v==="/"?u:ls([u,v])),h.createHref({pathname:I,search:c,hash:x})}function Yh(){return ke.useContext(Jf)!=null}function Ho(){return Yh()||jr(!1),ke.useContext(Jf).location}function A2(e){ke.useContext(fs).static||ke.useLayoutEffect(e)}function d_(){let{isDataRoute:e}=ke.useContext(ya);return e?wP():aP()}function aP(){Yh()||jr(!1);let e=ke.useContext(Yf),{basename:t,future:a,navigator:u}=ke.useContext(fs),{matches:h}=ke.useContext(ya),{pathname:x}=Ho(),v=JSON.stringify(k2(h,a.v7_relativeSplatPath)),c=ke.useRef(!1);return A2(()=>{c.current=!0}),ke.useCallback(function(F,W){if(W===void 0&&(W={}),!c.current)return;if(typeof F=="number"){u.go(F);return}let D=E2(F,JSON.parse(v),x,W.relative==="path");e==null&&t!=="/"&&(D.pathname=D.pathname==="/"?t:ls([t,D.pathname])),(W.replace?u.replace:u.push)(D,W.state,W)},[t,u,v,x,e])}const sP=ke.createContext(null);function lP(e){let t=ke.useContext(ya).outlet;return t&&ke.createElement(sP.Provider,{value:e},t)}function uP(){let{matches:e}=ke.useContext(ya),t=e[e.length-1];return t?t.params:{}}function Qf(e,t){let{relative:a}=t===void 0?{}:t,{future:u}=ke.useContext(fs),{matches:h}=ke.useContext(ya),{pathname:x}=Ho(),v=JSON.stringify(k2(h,u.v7_relativeSplatPath));return ke.useMemo(()=>E2(e,JSON.parse(v),x,a==="path"),[e,v,x,a])}function cP(e,t){return hP(e,t)}function hP(e,t,a,u){Yh()||jr(!1);let{navigator:h}=ke.useContext(fs),{matches:x}=ke.useContext(ya),v=x[x.length-1],c=v?v.params:{};v&&v.pathname;let I=v?v.pathnameBase:"/";v&&v.route;let F=Ho(),W;if(t){var D;let we=typeof t=="string"?Vu(t):t;I==="/"||(D=we.pathname)!=null&&D.startsWith(I)||jr(!1),W=we}else W=F;let B=W.pathname||"/",le=B;if(I!=="/"){let we=I.replace(/^\//,"").split("/");le="/"+B.replace(/^\//,"").split("/").slice(we.length).join("/")}let ge=F5(e,{pathname:le}),de=gP(ge&&ge.map(we=>Object.assign({},we,{params:Object.assign({},c,we.params),pathname:ls([I,h.encodeLocation?h.encodeLocation(we.pathname).pathname:we.pathname]),pathnameBase:we.pathnameBase==="/"?I:ls([I,h.encodeLocation?h.encodeLocation(we.pathnameBase).pathname:we.pathnameBase])})),x,a,u);return t&&de?ke.createElement(Jf.Provider,{value:{location:Hh({pathname:"/",search:"",hash:"",state:null,key:"default"},W),navigationType:Ja.Pop}},de):de}function dP(){let e=xP(),t=nP(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,h={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ke.createElement(ke.Fragment,null,ke.createElement("h2",null,"Unexpected Application Error!"),ke.createElement("h3",{style:{fontStyle:"italic"}},t),a?ke.createElement("pre",{style:h},a):null,null)}const pP=ke.createElement(dP,null);class fP extends ke.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){console.error("React Router caught the following error during render",t,a)}render(){return this.state.error!==void 0?ke.createElement(ya.Provider,{value:this.props.routeContext},ke.createElement(I2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mP(e){let{routeContext:t,match:a,children:u}=e,h=ke.useContext(Yf);return h&&h.static&&h.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(h.staticContext._deepestRenderedBoundaryId=a.route.id),ke.createElement(ya.Provider,{value:t},u)}function gP(e,t,a,u){var h;if(t===void 0&&(t=[]),a===void 0&&(a=null),u===void 0&&(u=null),e==null){var x;if((x=a)!=null&&x.errors)e=a.matches;else return null}let v=e,c=(h=a)==null?void 0:h.errors;if(c!=null){let W=v.findIndex(D=>D.route.id&&(c==null?void 0:c[D.route.id])!==void 0);W>=0||jr(!1),v=v.slice(0,Math.min(v.length,W+1))}let I=!1,F=-1;if(a&&u&&u.v7_partialHydration)for(let W=0;W<v.length;W++){let D=v[W];if((D.route.HydrateFallback||D.route.hydrateFallbackElement)&&(F=W),D.route.id){let{loaderData:B,errors:le}=a,ge=D.route.loader&&B[D.route.id]===void 0&&(!le||le[D.route.id]===void 0);if(D.route.lazy||ge){I=!0,F>=0?v=v.slice(0,F+1):v=[v[0]];break}}}return v.reduceRight((W,D,B)=>{let le,ge=!1,de=null,we=null;a&&(le=c&&D.route.id?c[D.route.id]:void 0,de=D.route.errorElement||pP,I&&(F<0&&B===0?(ge=!0,we=null):F===B&&(ge=!0,we=D.route.hydrateFallbackElement||null)));let ee=t.concat(v.slice(0,B+1)),q=()=>{let te;return le?te=de:ge?te=we:D.route.Component?te=ke.createElement(D.route.Component,null):D.route.element?te=D.route.element:te=W,ke.createElement(mP,{match:D,routeContext:{outlet:W,matches:ee,isDataRoute:a!=null},children:te})};return a&&(D.route.ErrorBoundary||D.route.errorElement||B===0)?ke.createElement(fP,{location:a.location,revalidation:a.revalidation,component:de,error:le,children:q(),routeContext:{outlet:null,matches:ee,isDataRoute:!0}}):q()},null)}var M2=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(M2||{}),_f=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(_f||{});function yP(e){let t=ke.useContext(Yf);return t||jr(!1),t}function _P(e){let t=ke.useContext(P2);return t||jr(!1),t}function vP(e){let t=ke.useContext(ya);return t||jr(!1),t}function z2(e){let t=vP(),a=t.matches[t.matches.length-1];return a.route.id||jr(!1),a.route.id}function xP(){var e;let t=ke.useContext(I2),a=_P(_f.UseRouteError),u=z2(_f.UseRouteError);return t!==void 0?t:(e=a.errors)==null?void 0:e[u]}function wP(){let{router:e}=yP(M2.UseNavigateStable),t=z2(_f.UseNavigateStable),a=ke.useRef(!1);return A2(()=>{a.current=!0}),ke.useCallback(function(h,x){x===void 0&&(x={}),a.current&&(typeof h=="number"?e.navigate(h):e.navigate(h,Hh({fromRouteId:t},x)))},[e,t])}function bP(e){return lP(e.context)}function ph(e){jr(!1)}function SP(e){let{basename:t="/",children:a=null,location:u,navigationType:h=Ja.Pop,navigator:x,static:v=!1,future:c}=e;Yh()&&jr(!1);let I=t.replace(/^\/*/,"/"),F=ke.useMemo(()=>({basename:I,navigator:x,static:v,future:Hh({v7_relativeSplatPath:!1},c)}),[I,c,x,v]);typeof u=="string"&&(u=Vu(u));let{pathname:W="/",search:D="",hash:B="",state:le=null,key:ge="default"}=u,de=ke.useMemo(()=>{let we=zu(W,I);return we==null?null:{location:{pathname:we,search:D,hash:B,state:le,key:ge},navigationType:h}},[I,W,D,B,le,ge,h]);return de==null?null:ke.createElement(fs.Provider,{value:F},ke.createElement(Jf.Provider,{children:a,value:de}))}function TP(e){let{children:t,location:a}=e;return cP(Jy(t),a)}new Promise(()=>{});function Jy(e,t){t===void 0&&(t=[]);let a=[];return ke.Children.forEach(e,(u,h)=>{if(!ke.isValidElement(u))return;let x=[...t,h];if(u.type===ke.Fragment){a.push.apply(a,Jy(u.props.children,x));return}u.type!==ph&&jr(!1),!u.props.index||!u.props.children||jr(!1);let v={id:u.props.id||x.join("-"),caseSensitive:u.props.caseSensitive,element:u.props.element,Component:u.props.Component,index:u.props.index,path:u.props.path,loader:u.props.loader,action:u.props.action,errorElement:u.props.errorElement,ErrorBoundary:u.props.ErrorBoundary,hasErrorBoundary:u.props.ErrorBoundary!=null||u.props.errorElement!=null,shouldRevalidate:u.props.shouldRevalidate,handle:u.props.handle,lazy:u.props.lazy};u.props.children&&(v.children=Jy(u.props.children,x)),a.push(v)}),a}/**
 * React Router DOM v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vf(){return vf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u])}return e},vf.apply(this,arguments)}function L2(e,t){if(e==null)return{};var a={},u=Object.keys(e),h,x;for(x=0;x<u.length;x++)h=u[x],!(t.indexOf(h)>=0)&&(a[h]=e[h]);return a}function kP(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function EP(e,t){return e.button===0&&(!t||t==="_self")&&!kP(e)}function Qy(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,a)=>{let u=e[a];return t.concat(Array.isArray(u)?u.map(h=>[a,h]):[[a,u]])},[]))}function CP(e,t){let a=Qy(e);return t&&t.forEach((u,h)=>{a.has(h)||t.getAll(h).forEach(x=>{a.append(h,x)})}),a}const PP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],IP=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],AP="6";try{window.__reactRouterVersion=AP}catch{}const MP=ke.createContext({isTransitioning:!1}),zP="startTransition",vx=bE[zP];function LP(e){let{basename:t,children:a,future:u,window:h}=e,x=ke.useRef();x.current==null&&(x.current=R5({window:h,v5Compat:!0}));let v=x.current,[c,I]=ke.useState({action:v.action,location:v.location}),{v7_startTransition:F}=u||{},W=ke.useCallback(D=>{F&&vx?vx(()=>I(D)):I(D)},[I,F]);return ke.useLayoutEffect(()=>v.listen(W),[v,W]),ke.createElement(SP,{basename:t,children:a,location:c.location,navigationType:c.action,navigator:v,future:u})}const RP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",DP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xf=ke.forwardRef(function(t,a){let{onClick:u,relative:h,reloadDocument:x,replace:v,state:c,target:I,to:F,preventScrollReset:W,unstable_viewTransition:D}=t,B=L2(t,PP),{basename:le}=ke.useContext(fs),ge,de=!1;if(typeof F=="string"&&DP.test(F)&&(ge=F,RP))try{let te=new URL(window.location.href),_e=F.startsWith("//")?new URL(te.protocol+F):new URL(F),Ce=zu(_e.pathname,le);_e.origin===te.origin&&Ce!=null?F=Ce+_e.search+_e.hash:de=!0}catch{}let we=oP(F,{relative:h}),ee=FP(F,{replace:v,state:c,target:I,preventScrollReset:W,relative:h,unstable_viewTransition:D});function q(te){u&&u(te),te.defaultPrevented||ee(te)}return ke.createElement("a",vf({},B,{href:ge||we,onClick:de||x?u:q,ref:a,target:I}))}),xx=ke.forwardRef(function(t,a){let{"aria-current":u="page",caseSensitive:h=!1,className:x="",end:v=!1,style:c,to:I,unstable_viewTransition:F,children:W}=t,D=L2(t,IP),B=Qf(I,{relative:D.relative}),le=Ho(),ge=ke.useContext(P2),{navigator:de,basename:we}=ke.useContext(fs),ee=ge!=null&&BP(B)&&F===!0,q=de.encodeLocation?de.encodeLocation(B).pathname:B.pathname,te=le.pathname,_e=ge&&ge.navigation&&ge.navigation.location?ge.navigation.location.pathname:null;h||(te=te.toLowerCase(),_e=_e?_e.toLowerCase():null,q=q.toLowerCase()),_e&&we&&(_e=zu(_e,we)||_e);const Ce=q!=="/"&&q.endsWith("/")?q.length-1:q.length;let Ae=te===q||!v&&te.startsWith(q)&&te.charAt(Ce)==="/",Le=_e!=null&&(_e===q||!v&&_e.startsWith(q)&&_e.charAt(q.length)==="/"),Ge={isActive:Ae,isPending:Le,isTransitioning:ee},Re=Ae?u:void 0,Me;typeof x=="function"?Me=x(Ge):Me=[x,Ae?"active":null,Le?"pending":null,ee?"transitioning":null].filter(Boolean).join(" ");let $e=typeof c=="function"?c(Ge):c;return ke.createElement(xf,vf({},D,{"aria-current":Re,className:Me,ref:a,style:$e,to:I,unstable_viewTransition:F}),typeof W=="function"?W(Ge):W)});var e0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(e0||(e0={}));var wx;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(wx||(wx={}));function OP(e){let t=ke.useContext(Yf);return t||jr(!1),t}function FP(e,t){let{target:a,replace:u,state:h,preventScrollReset:x,relative:v,unstable_viewTransition:c}=t===void 0?{}:t,I=d_(),F=Ho(),W=Qf(e,{relative:v});return ke.useCallback(D=>{if(EP(D,a)){D.preventDefault();let B=u!==void 0?u:gf(F)===gf(W);I(e,{replace:B,state:h,preventScrollReset:x,relative:v,unstable_viewTransition:c})}},[F,I,W,u,h,a,e,x,v,c])}function R2(e){let t=ke.useRef(Qy(e)),a=ke.useRef(!1),u=Ho(),h=ke.useMemo(()=>CP(u.search,a.current?null:t.current),[u.search]),x=d_(),v=ke.useCallback((c,I)=>{const F=Qy(typeof c=="function"?c(h):c);a.current=!0,x("?"+F,I)},[x,h]);return[h,v]}function BP(e,t){t===void 0&&(t={});let a=ke.useContext(MP);a==null&&jr(!1);let{basename:u}=OP(e0.useViewTransitionState),h=Qf(e,{relative:t.relative});if(!a.isTransitioning)return!1;let x=zu(a.currentLocation.pathname,u)||a.currentLocation.pathname,v=zu(a.nextLocation.pathname,u)||a.nextLocation.pathname;return yf(h.pathname,v)!=null||yf(h.pathname,x)!=null}var D2={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.4.1/LICENSE.txt
 */(function(e,t){(function(a,u){e.exports=u()})(lh,function(){var a={},u={};function h(v,c,I){if(u[v]=I,v==="index"){var F="var sharedModule = {}; ("+u.shared+")(sharedModule); ("+u.worker+")(sharedModule);",W={};return u.shared(W),u.index(a,W),typeof window<"u"&&a.setWorkerUrl(window.URL.createObjectURL(new Blob([F],{type:"text/javascript"}))),a}}h("shared",["exports"],function(v){function c(i,r,o,l){return new(o||(o=Promise))(function(p,m){function _(E){try{S(l.next(E))}catch(C){m(C)}}function w(E){try{S(l.throw(E))}catch(C){m(C)}}function S(E){var C;E.done?p(E.value):(C=E.value,C instanceof o?C:new o(function(A){A(C)})).then(_,w)}S((l=l.apply(i,r||[])).next())})}function I(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}typeof SuppressedError=="function"&&SuppressedError;var F=W;function W(i,r){this.x=i,this.y=r}W.prototype={clone:function(){return new W(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,r){return this.clone()._rotateAround(i,r)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var r=i.x-this.x,o=i.y-this.y;return r*r+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,r){return Math.atan2(this.x*r-this.y*i,this.x*i+this.y*r)},_matMult:function(i){var r=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=r,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var r=Math.cos(i),o=Math.sin(i),l=o*this.x+r*this.y;return this.x=r*this.x-o*this.y,this.y=l,this},_rotateAround:function(i,r){var o=Math.cos(i),l=Math.sin(i),p=r.y+l*(this.x-r.x)+o*(this.y-r.y);return this.x=r.x+o*(this.x-r.x)-l*(this.y-r.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},W.convert=function(i){return i instanceof W?i:Array.isArray(i)?new W(i[0],i[1]):i};var D=I(F),B=le;function le(i,r,o,l){this.cx=3*i,this.bx=3*(o-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(l-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=r,this.p2x=o,this.p2y=l}le.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,r){if(r===void 0&&(r=1e-6),i<0)return 0;if(i>1)return 1;for(var o=i,l=0;l<8;l++){var p=this.sampleCurveX(o)-i;if(Math.abs(p)<r)return o;var m=this.sampleCurveDerivativeX(o);if(Math.abs(m)<1e-6)break;o-=p/m}var _=0,w=1;for(o=i,l=0;l<20&&(p=this.sampleCurveX(o),!(Math.abs(p-i)<r));l++)i>p?_=o:w=o,o=.5*(w-_)+_;return o},solve:function(i,r){return this.sampleCurveY(this.solveCurveX(i,r))}};var ge=I(B);let de,we;function ee(){return de==null&&(de=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),de}function q(){if(we==null&&(we=!1,ee())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let l=0;l<5*5;l++){const p=4*l;r.fillStyle=`rgb(${p},${p+1},${p+2})`,r.fillRect(l%5,Math.floor(l/5),1,1)}const o=r.getImageData(0,0,5,5).data;for(let l=0;l<5*5*4;l++)if(l%4!=3&&o[l]!==l){we=!0;break}}}return we||!1}function te(i,r,o,l){const p=new ge(i,r,o,l);return m=>p.solve(m)}const _e=te(.25,.1,.25,1);function Ce(i,r,o){return Math.min(o,Math.max(r,i))}function Ae(i,r,o){const l=o-r,p=((i-r)%l+l)%l+r;return p===r?o:p}function Le(i,...r){for(const o of r)for(const l in o)i[l]=o[l];return i}let Ge=1;function Re(i,r,o){const l={};for(const p in i)l[p]=r.call(this,i[p],p,i);return l}function Me(i,r,o){const l={};for(const p in i)r.call(this,i[p],p,i)&&(l[p]=i[p]);return l}function $e(i){return Array.isArray(i)?i.map($e):typeof i=="object"&&i?Re(i,$e):i}const ft={};function it(i){ft[i]||(typeof console<"u"&&console.warn(i),ft[i]=!0)}function st(i,r,o){return(o.y-i.y)*(r.x-i.x)>(r.y-i.y)*(o.x-i.x)}function or(i){return typeof WorkerGlobalScope<"u"&&i!==void 0&&i instanceof WorkerGlobalScope}let Gt=null;function ar(i){return typeof ImageBitmap<"u"&&i instanceof ImageBitmap}const Ye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function mt(i,r,o,l,p){return c(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const m=new VideoFrame(i,{timestamp:0});try{const _=m==null?void 0:m.format;if(!_||!_.startsWith("BGR")&&!_.startsWith("RGB"))throw new Error(`Unrecognized format ${_}`);const w=_.startsWith("BGR"),S=new Uint8ClampedArray(l*p*4);if(yield m.copyTo(S,function(E,C,A,L,N){const V=4*Math.max(-C,0),H=(Math.max(0,A)-A)*L*4+V,X=4*L,re=Math.max(0,C),fe=Math.max(0,A);return{rect:{x:re,y:fe,width:Math.min(E.width,C+L)-re,height:Math.min(E.height,A+N)-fe},layout:[{offset:H,stride:X}]}}(i,r,o,l,p)),w)for(let E=0;E<S.length;E+=4){const C=S[E];S[E]=S[E+2],S[E+2]=C}return S}finally{m.close()}})}let yt,Ct;const Rt="AbortError";function er(){return new Error(Rt)}const Ur={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ir(i){return Ur.REGISTERED_PROTOCOLS[i.substring(0,i.indexOf("://"))]}const Dr="global-dispatcher";class Gr extends Error{constructor(r,o,l,p){super(`AJAXError: ${o} (${r}): ${l}`),this.status=r,this.statusText=o,this.url=l,this.body=p}}const li=()=>or(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,To=function(i,r){if(/:\/\//.test(i.url)&&!/^https?:|^file:/.test(i.url)){const l=Ir(i.url);if(l)return l(i,r);if(or(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:i,targetMapId:Dr},r)}if(!(/^file:/.test(o=i.url)||/^file:/.test(li())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(l,p){return c(this,void 0,void 0,function*(){const m=new Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,cache:l.cache,referrer:li(),signal:p.signal});l.type!=="json"||m.headers.has("Accept")||m.headers.set("Accept","application/json");const _=yield fetch(m);if(!_.ok){const E=yield _.blob();throw new Gr(_.status,_.statusText,l.url,E)}let w;w=l.type==="arrayBuffer"||l.type==="image"?_.arrayBuffer():l.type==="json"?_.json():_.text();const S=yield w;if(p.signal.aborted)throw er();return{data:S,cacheControl:_.headers.get("Cache-Control"),expires:_.headers.get("Expires")}})}(i,r);if(or(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:i,mustQueue:!0,targetMapId:Dr},r)}var o;return function(l,p){return new Promise((m,_)=>{var w;const S=new XMLHttpRequest;S.open(l.method||"GET",l.url,!0),l.type!=="arrayBuffer"&&l.type!=="image"||(S.responseType="arraybuffer");for(const E in l.headers)S.setRequestHeader(E,l.headers[E]);l.type==="json"&&(S.responseType="text",!((w=l.headers)===null||w===void 0)&&w.Accept||S.setRequestHeader("Accept","application/json")),S.withCredentials=l.credentials==="include",S.onerror=()=>{_(new Error(S.statusText))},S.onload=()=>{if(!p.signal.aborted)if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let E=S.response;if(l.type==="json")try{E=JSON.parse(S.response)}catch(C){return void _(C)}m({data:E,cacheControl:S.getResponseHeader("Cache-Control"),expires:S.getResponseHeader("Expires")})}else{const E=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});_(new Gr(S.status,S.statusText,l.url,E))}},p.signal.addEventListener("abort",()=>{S.abort(),_(er())}),S.send(l.body)})}(i,r)};function io(i){if(!i||i.indexOf("://")<=0||i.indexOf("data:image/")===0||i.indexOf("blob:")===0)return!0;const r=new URL(i),o=window.location;return r.protocol===o.protocol&&r.host===o.host}function _a(i,r,o){o[i]&&o[i].indexOf(r)!==-1||(o[i]=o[i]||[],o[i].push(r))}function Zn(i,r,o){if(o&&o[i]){const l=o[i].indexOf(r);l!==-1&&o[i].splice(l,1)}}class Hi{constructor(r,o={}){Le(this,o),this.type=r}}class pr extends Hi{constructor(r,o={}){super("error",Le({error:r},o))}}class oo{on(r,o){return this._listeners=this._listeners||{},_a(r,o,this._listeners),this}off(r,o){return Zn(r,o,this._listeners),Zn(r,o,this._oneTimeListeners),this}once(r,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},_a(r,o,this._oneTimeListeners),this):new Promise(l=>this.once(r,l))}fire(r,o){typeof r=="string"&&(r=new Hi(r,o||{}));const l=r.type;if(this.listens(l)){r.target=this;const p=this._listeners&&this._listeners[l]?this._listeners[l].slice():[];for(const w of p)w.call(this,r);const m=this._oneTimeListeners&&this._oneTimeListeners[l]?this._oneTimeListeners[l].slice():[];for(const w of m)Zn(l,w,this._oneTimeListeners),w.call(this,r);const _=this._eventedParent;_&&(Le(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(r))}else r instanceof pr&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,o){return this._eventedParent=r,this._eventedParentData=o,this}}var be={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Ti=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function wn(i,r){const o={};for(const l in i)l!=="ref"&&(o[l]=i[l]);return Ti.forEach(l=>{l in r&&(o[l]=r[l])}),o}function Pt(i,r){if(Array.isArray(i)){if(!Array.isArray(r)||i.length!==r.length)return!1;for(let o=0;o<i.length;o++)if(!Pt(i[o],r[o]))return!1;return!0}if(typeof i=="object"&&i!==null&&r!==null){if(typeof r!="object"||Object.keys(i).length!==Object.keys(r).length)return!1;for(const o in i)if(!Pt(i[o],r[o]))return!1;return!0}return i===r}function Vt(i,r){i.push(r)}function ui(i,r,o){Vt(o,{command:"addSource",args:[i,r[i]]})}function ao(i,r,o){Vt(r,{command:"removeSource",args:[i]}),o[i]=!0}function Vr(i,r,o,l){ao(i,o,l),ui(i,r,o)}function ci(i,r,o){let l;for(l in i[o])if(Object.prototype.hasOwnProperty.call(i[o],l)&&l!=="data"&&!Pt(i[o][l],r[o][l]))return!1;for(l in r[o])if(Object.prototype.hasOwnProperty.call(r[o],l)&&l!=="data"&&!Pt(i[o][l],r[o][l]))return!1;return!0}function zn(i,r,o,l,p,m){i=i||{},r=r||{};for(const _ in i)Object.prototype.hasOwnProperty.call(i,_)&&(Pt(i[_],r[_])||o.push({command:m,args:[l,_,r[_],p]}));for(const _ in r)Object.prototype.hasOwnProperty.call(r,_)&&!Object.prototype.hasOwnProperty.call(i,_)&&(Pt(i[_],r[_])||o.push({command:m,args:[l,_,r[_],p]}))}function bn(i){return i.id}function ko(i,r){return i[r.id]=r,i}class Ne{constructor(r,o,l,p){this.message=(r?`${r}: `:"")+l,p&&(this.identifier=p),o!=null&&o.__line__&&(this.line=o.__line__)}}function sn(i,...r){for(const o of r)for(const l in o)i[l]=o[l];return i}class Kr extends Error{constructor(r,o){super(o),this.message=o,this.key=r}}class Eo{constructor(r,o=[]){this.parent=r,this.bindings={};for(const[l,p]of o)this.bindings[l]=p}concat(r){return new Eo(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const so={kind:"null"},Be={kind:"number"},Et={kind:"string"},St={kind:"boolean"},tn={kind:"color"},Xr={kind:"object"},Tt={kind:"value"},ki={kind:"collator"},Ei={kind:"formatted"},Ot={kind:"padding"},Z={kind:"resolvedImage"},R={kind:"variableAnchorOffsetCollection"};function O(i,r){return{kind:"array",itemType:i,N:r}}function j(i){if(i.kind==="array"){const r=j(i.itemType);return typeof i.N=="number"?`array<${r}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${r}>`}return i.kind}const Y=[so,Be,Et,St,tn,Ei,Xr,O(Tt),Ot,Z,R];function ae(i,r){if(r.kind==="error")return null;if(i.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!ae(i.itemType,r.itemType))&&(typeof i.N!="number"||i.N===r.N))return null}else{if(i.kind===r.kind)return null;if(i.kind==="value"){for(const o of Y)if(!ae(o,r))return null}}return`Expected ${j(i)} but found ${j(r)} instead.`}function ue(i,r){return r.some(o=>o.kind===i.kind)}function pe(i,r){return r.some(o=>o==="null"?i===null:o==="array"?Array.isArray(i):o==="object"?i&&!Array.isArray(i)&&typeof i=="object":o===typeof i)}function ie(i,r){return i.kind==="array"&&r.kind==="array"?i.itemType.kind===r.itemType.kind&&typeof i.N=="number":i.kind===r.kind}const ye=.96422,Ie=.82521,Te=4/29,Se=6/29,dt=3*Se*Se,ht=Se*Se*Se,zt=Math.PI/180,wt=180/Math.PI;function Dt(i){return(i%=360)<0&&(i+=360),i}function Xt([i,r,o,l]){let p,m;const _=Or((.2225045*(i=sr(i))+.7168786*(r=sr(r))+.0606169*(o=sr(o)))/1);i===r&&r===o?p=m=_:(p=Or((.4360747*i+.3850649*r+.1430804*o)/ye),m=Or((.0139322*i+.0971045*r+.7141733*o)/Ie));const w=116*_-16;return[w<0?0:w,500*(p-_),200*(_-m),l]}function sr(i){return i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function Or(i){return i>ht?Math.pow(i,1/3):i/dt+Te}function It([i,r,o,l]){let p=(i+16)/116,m=isNaN(r)?p:p+r/500,_=isNaN(o)?p:p-o/200;return p=1*$r(p),m=ye*$r(m),_=Ie*$r(_),[mr(3.1338561*m-1.6168667*p-.4906146*_),mr(-.9787684*m+1.9161415*p+.033454*_),mr(.0719453*m-.2289914*p+1.4052427*_),l]}function mr(i){return(i=i<=.00304?12.92*i:1.055*Math.pow(i,1/2.4)-.055)<0?0:i>1?1:i}function $r(i){return i>Se?i*i*i:dt*(i-Te)}function Ln(i){return parseInt(i.padEnd(2,i),16)/255}function Gn(i,r){return Hr(r?i/100:i,0,1)}function Hr(i,r,o){return Math.min(Math.max(r,i),o)}function va(i){return!i.some(Number.isNaN)}const sm={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Kt{constructor(r,o,l,p=1,m=!0){this.r=r,this.g=o,this.b=l,this.a=p,m||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[r,o,l,p]))}static parse(r){if(r instanceof Kt)return r;if(typeof r!="string")return;const o=function(l){if((l=l.toLowerCase().trim())==="transparent")return[0,0,0,0];const p=sm[l];if(p){const[_,w,S]=p;return[_/255,w/255,S/255,1]}if(l.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(l)){const _=l.length<6?1:2;let w=1;return[Ln(l.slice(w,w+=_)),Ln(l.slice(w,w+=_)),Ln(l.slice(w,w+=_)),Ln(l.slice(w,w+_)||"ff")]}if(l.startsWith("rgb")){const _=l.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[w,S,E,C,A,L,N,V,H,X,re,fe]=_,oe=[C||" ",N||" ",X].join("");if(oe==="  "||oe==="  /"||oe===",,"||oe===",,,"){const he=[E,L,H].join(""),xe=he==="%%%"?100:he===""?255:0;if(xe){const ze=[Hr(+S/xe,0,1),Hr(+A/xe,0,1),Hr(+V/xe,0,1),re?Gn(+re,fe):1];if(va(ze))return ze}}return}}const m=l.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(m){const[_,w,S,E,C,A,L,N,V]=m,H=[S||" ",C||" ",L].join("");if(H==="  "||H==="  /"||H===",,"||H===",,,"){const X=[+w,Hr(+E,0,100),Hr(+A,0,100),N?Gn(+N,V):1];if(va(X))return function([re,fe,oe,he]){function xe(ze){const We=(ze+re/30)%12,pt=fe*Math.min(oe,1-oe);return oe-pt*Math.max(-1,Math.min(We-3,9-We,1))}return re=Dt(re),fe/=100,oe/=100,[xe(0),xe(8),xe(4),he]}(X)}}}(r);return o?new Kt(...o,!1):void 0}get rgb(){const{r,g:o,b:l,a:p}=this,m=p||1/0;return this.overwriteGetter("rgb",[r/m,o/m,l/m,p])}get hcl(){return this.overwriteGetter("hcl",function(r){const[o,l,p,m]=Xt(r),_=Math.sqrt(l*l+p*p);return[Math.round(1e4*_)?Dt(Math.atan2(p,l)*wt):NaN,_,o,m]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Xt(this.rgb))}overwriteGetter(r,o){return Object.defineProperty(this,r,{value:o}),o}toString(){const[r,o,l,p]=this.rgb;return`rgba(${[r,o,l].map(m=>Math.round(255*m)).join(",")},${p})`}}Kt.black=new Kt(0,0,0,1),Kt.white=new Kt(1,1,1,1),Kt.transparent=new Kt(0,0,0,0),Kt.red=new Kt(1,0,0,1);class Hu{constructor(r,o,l){this.sensitivity=r?o?"variant":"case":o?"accent":"base",this.locale=l,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,o){return this.collator.compare(r,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Wu{constructor(r,o,l,p,m){this.text=r,this.image=o,this.scale=l,this.fontStack=p,this.textColor=m}}class Kn{constructor(r){this.sections=r}static fromString(r){return new Kn([new Wu(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof Kn?r:Kn.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class Rn{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Rn)return r;if(typeof r=="number")return new Rn([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const o of r)if(typeof o!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new Rn(r)}}toString(){return JSON.stringify(this.values)}}const ms=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Dn{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Dn)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let o=0;o<r.length;o+=2){const l=r[o],p=r[o+1];if(typeof l!="string"||!ms.has(l)||!Array.isArray(p)||p.length!==2||typeof p[0]!="number"||typeof p[1]!="number")return}return new Dn(r)}}toString(){return JSON.stringify(this.values)}}class hi{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new hi({name:r,available:!1}):null}}function ed(i,r,o,l){return typeof i=="number"&&i>=0&&i<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof o=="number"&&o>=0&&o<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:`Invalid rgba value [${[i,r,o,l].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof l=="number"?[i,r,o,l]:[i,r,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function lo(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof Kt||i instanceof Hu||i instanceof Kn||i instanceof Rn||i instanceof Dn||i instanceof hi)return!0;if(Array.isArray(i)){for(const r of i)if(!lo(r))return!1;return!0}if(typeof i=="object"){for(const r in i)if(!lo(i[r]))return!1;return!0}return!1}function Fr(i){if(i===null)return so;if(typeof i=="string")return Et;if(typeof i=="boolean")return St;if(typeof i=="number")return Be;if(i instanceof Kt)return tn;if(i instanceof Hu)return ki;if(i instanceof Kn)return Ei;if(i instanceof Rn)return Ot;if(i instanceof Dn)return R;if(i instanceof hi)return Z;if(Array.isArray(i)){const r=i.length;let o;for(const l of i){const p=Fr(l);if(o){if(o===p)continue;o=Tt;break}o=p}return O(o||Tt,r)}return Xr}function gs(i){const r=typeof i;return i===null?"":r==="string"||r==="number"||r==="boolean"?String(i):i instanceof Kt||i instanceof Kn||i instanceof Rn||i instanceof Dn||i instanceof hi?i.toString():JSON.stringify(i)}class Wo{constructor(r,o){this.type=r,this.value=o}static parse(r,o){if(r.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!lo(r[1]))return o.error("invalid value");const l=r[1];let p=Fr(l);const m=o.expectedType;return p.kind!=="array"||p.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(p=m),new Wo(p,l)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Sr{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const qo={string:Et,number:Be,boolean:St,object:Xr};class Ci{constructor(r,o){this.type=r,this.args=o}static parse(r,o){if(r.length<2)return o.error("Expected at least one argument.");let l,p=1;const m=r[0];if(m==="array"){let w,S;if(r.length>2){const E=r[1];if(typeof E!="string"||!(E in qo)||E==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);w=qo[E],p++}else w=Tt;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return o.error('The length argument to "array" must be a positive integer literal',2);S=r[2],p++}l=O(w,S)}else{if(!qo[m])throw new Error(`Types doesn't contain name = ${m}`);l=qo[m]}const _=[];for(;p<r.length;p++){const w=o.parse(r[p],p,Tt);if(!w)return null;_.push(w)}return new Ci(l,_)}evaluate(r){for(let o=0;o<this.args.length;o++){const l=this.args[o].evaluate(r);if(!ae(this.type,Fr(l)))return l;if(o===this.args.length-1)throw new Sr(`Expected value to be of type ${j(this.type)}, but found ${j(Fr(l))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const ol={"to-boolean":St,"to-color":tn,"to-number":Be,"to-string":Et};class Wi{constructor(r,o){this.type=r,this.args=o}static parse(r,o){if(r.length<2)return o.error("Expected at least one argument.");const l=r[0];if(!ol[l])throw new Error(`Can't parse ${l} as it is not part of the known types`);if((l==="to-boolean"||l==="to-string")&&r.length!==2)return o.error("Expected one argument.");const p=ol[l],m=[];for(let _=1;_<r.length;_++){const w=o.parse(r[_],_,Tt);if(!w)return null;m.push(w)}return new Wi(p,m)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let o,l;for(const p of this.args){if(o=p.evaluate(r),l=null,o instanceof Kt)return o;if(typeof o=="string"){const m=r.parseColor(o);if(m)return m}else if(Array.isArray(o)&&(l=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:ed(o[0],o[1],o[2],o[3]),!l))return new Kt(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new Sr(l||`Could not parse color from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"padding":{let o;for(const l of this.args){o=l.evaluate(r);const p=Rn.parse(o);if(p)return p}throw new Sr(`Could not parse padding from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"variableAnchorOffsetCollection":{let o;for(const l of this.args){o=l.evaluate(r);const p=Dn.parse(o);if(p)return p}throw new Sr(`Could not parse variableAnchorOffsetCollection from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"number":{let o=null;for(const l of this.args){if(o=l.evaluate(r),o===null)return 0;const p=Number(o);if(!isNaN(p))return p}throw new Sr(`Could not convert ${JSON.stringify(o)} to number.`)}case"formatted":return Kn.fromString(gs(this.args[0].evaluate(r)));case"resolvedImage":return hi.fromString(gs(this.args[0].evaluate(r)));default:return gs(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const qu=["Unknown","Point","LineString","Polygon"];class xa{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?qu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let o=this._parseColorCache[r];return o||(o=this._parseColorCache[r]=Kt.parse(r)),o}}class Ht{constructor(r,o,l=[],p,m=new Eo,_=[]){this.registry=r,this.path=l,this.key=l.map(w=>`[${w}]`).join(""),this.scope=m,this.errors=_,this.expectedType=p,this._isConstant=o}parse(r,o,l,p,m={}){return o?this.concat(o,l,p)._parse(r,m):this._parse(r,m)}_parse(r,o){function l(p,m,_){return _==="assert"?new Ci(m,[p]):_==="coerce"?new Wi(m,[p]):p}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=r[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const m=this.registry[p];if(m){let _=m.parse(r,this);if(!_)return null;if(this.expectedType){const w=this.expectedType,S=_.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||S.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string")if(w.kind!=="padding"||S.kind!=="value"&&S.kind!=="number"&&S.kind!=="array")if(w.kind!=="variableAnchorOffsetCollection"||S.kind!=="value"&&S.kind!=="array"){if(this.checkSubtype(w,S))return null}else _=l(_,w,o.typeAnnotation||"coerce");else _=l(_,w,o.typeAnnotation||"coerce");else _=l(_,w,o.typeAnnotation||"coerce");else _=l(_,w,o.typeAnnotation||"assert")}if(!(_ instanceof Wo)&&_.type.kind!=="resolvedImage"&&this._isConstant(_)){const w=new xa;try{_=new Wo(_.type,_.evaluate(w))}catch(S){return this.error(S.message),null}}return _}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,o,l){const p=typeof r=="number"?this.path.concat(r):this.path,m=l?this.scope.concat(l):this.scope;return new Ht(this.registry,this._isConstant,p,o||null,m,this.errors)}error(r,...o){const l=`${this.key}${o.map(p=>`[${p}]`).join("")}`;this.errors.push(new Kr(l,r))}checkSubtype(r,o){const l=ae(r,o);return l&&this.error(l),l}}class al{constructor(r,o){this.type=o.type,this.bindings=[].concat(r),this.result=o}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const o of this.bindings)r(o[1]);r(this.result)}static parse(r,o){if(r.length<4)return o.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const l=[];for(let m=1;m<r.length-1;m+=2){const _=r[m];if(typeof _!="string")return o.error(`Expected string, but found ${typeof _} instead.`,m);if(/[^a-zA-Z0-9_]/.test(_))return o.error("Variable names must contain only alphanumeric characters or '_'.",m);const w=o.parse(r[m+1],m+1);if(!w)return null;l.push([_,w])}const p=o.parse(r[r.length-1],r.length-1,o.expectedType,l);return p?new al(l,p):null}outputDefined(){return this.result.outputDefined()}}class wa{constructor(r,o){this.type=o.type,this.name=r,this.boundExpression=o}static parse(r,o){if(r.length!==2||typeof r[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const l=r[1];return o.scope.has(l)?new wa(l,o.scope.get(l)):o.error(`Unknown variable "${l}". Make sure "${l}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class Zu{constructor(r,o,l){this.type=r,this.index=o,this.input=l}static parse(r,o){if(r.length!==3)return o.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const l=o.parse(r[1],1,Be),p=o.parse(r[2],2,O(o.expectedType||Tt));return l&&p?new Zu(p.type.itemType,l,p):null}evaluate(r){const o=this.index.evaluate(r),l=this.input.evaluate(r);if(o<0)throw new Sr(`Array index out of bounds: ${o} < 0.`);if(o>=l.length)throw new Sr(`Array index out of bounds: ${o} > ${l.length-1}.`);if(o!==Math.floor(o))throw new Sr(`Array index must be an integer, but found ${o} instead.`);return l[o]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class sl{constructor(r,o){this.type=St,this.needle=r,this.haystack=o}static parse(r,o){if(r.length!==3)return o.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const l=o.parse(r[1],1,Tt),p=o.parse(r[2],2,Tt);return l&&p?ue(l.type,[St,Et,Be,so,Tt])?new sl(l,p):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${j(l.type)} instead`):null}evaluate(r){const o=this.needle.evaluate(r),l=this.haystack.evaluate(r);if(!l)return!1;if(!pe(o,["boolean","string","number","null"]))throw new Sr(`Expected first argument to be of type boolean, string, number or null, but found ${j(Fr(o))} instead.`);if(!pe(l,["string","array"]))throw new Sr(`Expected second argument to be of type array or string, but found ${j(Fr(l))} instead.`);return l.indexOf(o)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class ys{constructor(r,o,l){this.type=Be,this.needle=r,this.haystack=o,this.fromIndex=l}static parse(r,o){if(r.length<=2||r.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const l=o.parse(r[1],1,Tt),p=o.parse(r[2],2,Tt);if(!l||!p)return null;if(!ue(l.type,[St,Et,Be,so,Tt]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${j(l.type)} instead`);if(r.length===4){const m=o.parse(r[3],3,Be);return m?new ys(l,p,m):null}return new ys(l,p)}evaluate(r){const o=this.needle.evaluate(r),l=this.haystack.evaluate(r);if(!pe(o,["boolean","string","number","null"]))throw new Sr(`Expected first argument to be of type boolean, string, number or null, but found ${j(Fr(o))} instead.`);if(!pe(l,["string","array"]))throw new Sr(`Expected second argument to be of type array or string, but found ${j(Fr(l))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(r);return l.indexOf(o,p)}return l.indexOf(o)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class Gu{constructor(r,o,l,p,m,_){this.inputType=r,this.type=o,this.input=l,this.cases=p,this.outputs=m,this.otherwise=_}static parse(r,o){if(r.length<5)return o.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return o.error("Expected an even number of arguments.");let l,p;o.expectedType&&o.expectedType.kind!=="value"&&(p=o.expectedType);const m={},_=[];for(let E=2;E<r.length-1;E+=2){let C=r[E];const A=r[E+1];Array.isArray(C)||(C=[C]);const L=o.concat(E);if(C.length===0)return L.error("Expected at least one branch label.");for(const V of C){if(typeof V!="number"&&typeof V!="string")return L.error("Branch labels must be numbers or strings.");if(typeof V=="number"&&Math.abs(V)>Number.MAX_SAFE_INTEGER)return L.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof V=="number"&&Math.floor(V)!==V)return L.error("Numeric branch labels must be integer values.");if(l){if(L.checkSubtype(l,Fr(V)))return null}else l=Fr(V);if(m[String(V)]!==void 0)return L.error("Branch labels must be unique.");m[String(V)]=_.length}const N=o.parse(A,E,p);if(!N)return null;p=p||N.type,_.push(N)}const w=o.parse(r[1],1,Tt);if(!w)return null;const S=o.parse(r[r.length-1],r.length-1,p);return S?w.type.kind!=="value"&&o.concat(1).checkSubtype(l,w.type)?null:new Gu(l,p,w,m,_,S):null}evaluate(r){const o=this.input.evaluate(r);return(Fr(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class ll{constructor(r,o,l){this.type=r,this.branches=o,this.otherwise=l}static parse(r,o){if(r.length<4)return o.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return o.error("Expected an odd number of arguments.");let l;o.expectedType&&o.expectedType.kind!=="value"&&(l=o.expectedType);const p=[];for(let _=1;_<r.length-1;_+=2){const w=o.parse(r[_],_,St);if(!w)return null;const S=o.parse(r[_+1],_+1,l);if(!S)return null;p.push([w,S]),l=l||S.type}const m=o.parse(r[r.length-1],r.length-1,l);if(!m)return null;if(!l)throw new Error("Can't infer output type");return new ll(l,p,m)}evaluate(r){for(const[o,l]of this.branches)if(o.evaluate(r))return l.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[o,l]of this.branches)r(o),r(l);r(this.otherwise)}outputDefined(){return this.branches.every(([r,o])=>o.outputDefined())&&this.otherwise.outputDefined()}}class _s{constructor(r,o,l,p){this.type=r,this.input=o,this.beginIndex=l,this.endIndex=p}static parse(r,o){if(r.length<=2||r.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const l=o.parse(r[1],1,Tt),p=o.parse(r[2],2,Be);if(!l||!p)return null;if(!ue(l.type,[O(Tt),Et,Tt]))return o.error(`Expected first argument to be of type array or string, but found ${j(l.type)} instead`);if(r.length===4){const m=o.parse(r[3],3,Be);return m?new _s(l.type,l,p,m):null}return new _s(l.type,l,p)}evaluate(r){const o=this.input.evaluate(r),l=this.beginIndex.evaluate(r);if(!pe(o,["string","array"]))throw new Sr(`Expected first argument to be of type array or string, but found ${j(Fr(o))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(r);return o.slice(l,p)}return o.slice(l)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function ul(i,r){const o=i.length-1;let l,p,m=0,_=o,w=0;for(;m<=_;)if(w=Math.floor((m+_)/2),l=i[w],p=i[w+1],l<=r){if(w===o||r<p)return w;m=w+1}else{if(!(l>r))throw new Sr("Input is not a number.");_=w-1}return 0}class vs{constructor(r,o,l){this.type=r,this.input=o,this.labels=[],this.outputs=[];for(const[p,m]of l)this.labels.push(p),this.outputs.push(m)}static parse(r,o){if(r.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return o.error("Expected an even number of arguments.");const l=o.parse(r[1],1,Be);if(!l)return null;const p=[];let m=null;o.expectedType&&o.expectedType.kind!=="value"&&(m=o.expectedType);for(let _=1;_<r.length;_+=2){const w=_===1?-1/0:r[_],S=r[_+1],E=_,C=_+1;if(typeof w!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',E);if(p.length&&p[p.length-1][0]>=w)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',E);const A=o.parse(S,C,m);if(!A)return null;m=m||A.type,p.push([w,A])}return new vs(m,l,p)}evaluate(r){const o=this.labels,l=this.outputs;if(o.length===1)return l[0].evaluate(r);const p=this.input.evaluate(r);if(p<=o[0])return l[0].evaluate(r);const m=o.length;return p>=o[m-1]?l[m-1].evaluate(r):l[ul(o,p)].evaluate(r)}eachChild(r){r(this.input);for(const o of this.outputs)r(o)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function lm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var um=Ku;function Ku(i,r,o,l){this.cx=3*i,this.bx=3*(o-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(l-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=r,this.p2x=o,this.p2y=l}Ku.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,r){if(r===void 0&&(r=1e-6),i<0)return 0;if(i>1)return 1;for(var o=i,l=0;l<8;l++){var p=this.sampleCurveX(o)-i;if(Math.abs(p)<r)return o;var m=this.sampleCurveDerivativeX(o);if(Math.abs(m)<1e-6)break;o-=p/m}var _=0,w=1;for(o=i,l=0;l<20&&(p=this.sampleCurveX(o),!(Math.abs(p-i)<r));l++)i>p?_=o:w=o,o=.5*(w-_)+_;return o},solve:function(i,r){return this.sampleCurveY(this.solveCurveX(i,r))}};var td=lm(um);function Zo(i,r,o){return i+o*(r-i)}function cl(i,r,o){return i.map((l,p)=>Zo(l,r[p],o))}const Sn={number:Zo,color:function(i,r,o,l="rgb"){switch(l){case"rgb":{const[p,m,_,w]=cl(i.rgb,r.rgb,o);return new Kt(p,m,_,w,!1)}case"hcl":{const[p,m,_,w]=i.hcl,[S,E,C,A]=r.hcl;let L,N;if(isNaN(p)||isNaN(S))isNaN(p)?isNaN(S)?L=NaN:(L=S,_!==1&&_!==0||(N=E)):(L=p,C!==1&&C!==0||(N=m));else{let fe=S-p;S>p&&fe>180?fe-=360:S<p&&p-S>180&&(fe+=360),L=p+o*fe}const[V,H,X,re]=function([fe,oe,he,xe]){return fe=isNaN(fe)?0:fe*zt,It([he,Math.cos(fe)*oe,Math.sin(fe)*oe,xe])}([L,N??Zo(m,E,o),Zo(_,C,o),Zo(w,A,o)]);return new Kt(V,H,X,re,!1)}case"lab":{const[p,m,_,w]=It(cl(i.lab,r.lab,o));return new Kt(p,m,_,w,!1)}}},array:cl,padding:function(i,r,o){return new Rn(cl(i.values,r.values,o))},variableAnchorOffsetCollection:function(i,r,o){const l=i.values,p=r.values;if(l.length!==p.length)throw new Sr(`Cannot interpolate values of different length. from: ${i.toString()}, to: ${r.toString()}`);const m=[];for(let _=0;_<l.length;_+=2){if(l[_]!==p[_])throw new Sr(`Cannot interpolate values containing mismatched anchors. from[${_}]: ${l[_]}, to[${_}]: ${p[_]}`);m.push(l[_]);const[w,S]=l[_+1],[E,C]=p[_+1];m.push([Zo(w,E,o),Zo(S,C,o)])}return new Dn(m)}};class Xn{constructor(r,o,l,p,m){this.type=r,this.operator=o,this.interpolation=l,this.input=p,this.labels=[],this.outputs=[];for(const[_,w]of m)this.labels.push(_),this.outputs.push(w)}static interpolationFactor(r,o,l,p){let m=0;if(r.name==="exponential")m=Xu(o,r.base,l,p);else if(r.name==="linear")m=Xu(o,1,l,p);else if(r.name==="cubic-bezier"){const _=r.controlPoints;m=new td(_[0],_[1],_[2],_[3]).solve(Xu(o,1,l,p))}return m}static parse(r,o){let[l,p,m,..._]=r;if(!Array.isArray(p)||p.length===0)return o.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const E=p[1];if(typeof E!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:E}}else{if(p[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const E=p.slice(1);if(E.length!==4||E.some(C=>typeof C!="number"||C<0||C>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:E}}}if(r.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(m=o.parse(m,2,Be),!m)return null;const w=[];let S=null;l==="interpolate-hcl"||l==="interpolate-lab"?S=tn:o.expectedType&&o.expectedType.kind!=="value"&&(S=o.expectedType);for(let E=0;E<_.length;E+=2){const C=_[E],A=_[E+1],L=E+3,N=E+4;if(typeof C!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',L);if(w.length&&w[w.length-1][0]>=C)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',L);const V=o.parse(A,N,S);if(!V)return null;S=S||V.type,w.push([C,V])}return ie(S,Be)||ie(S,tn)||ie(S,Ot)||ie(S,R)||ie(S,O(Be))?new Xn(S,l,p,m,w):o.error(`Type ${j(S)} is not interpolatable.`)}evaluate(r){const o=this.labels,l=this.outputs;if(o.length===1)return l[0].evaluate(r);const p=this.input.evaluate(r);if(p<=o[0])return l[0].evaluate(r);const m=o.length;if(p>=o[m-1])return l[m-1].evaluate(r);const _=ul(o,p),w=Xn.interpolationFactor(this.interpolation,p,o[_],o[_+1]),S=l[_].evaluate(r),E=l[_+1].evaluate(r);switch(this.operator){case"interpolate":return Sn[this.type.kind](S,E,w);case"interpolate-hcl":return Sn.color(S,E,w,"hcl");case"interpolate-lab":return Sn.color(S,E,w,"lab")}}eachChild(r){r(this.input);for(const o of this.outputs)r(o)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Xu(i,r,o,l){const p=l-o,m=i-o;return p===0?0:r===1?m/p:(Math.pow(r,m)-1)/(Math.pow(r,p)-1)}class hl{constructor(r,o){this.type=r,this.args=o}static parse(r,o){if(r.length<2)return o.error("Expectected at least one argument.");let l=null;const p=o.expectedType;p&&p.kind!=="value"&&(l=p);const m=[];for(const w of r.slice(1)){const S=o.parse(w,1+m.length,l,void 0,{typeAnnotation:"omit"});if(!S)return null;l=l||S.type,m.push(S)}if(!l)throw new Error("No output type");const _=p&&m.some(w=>ae(p,w.type));return new hl(_?Tt:l,m)}evaluate(r){let o,l=null,p=0;for(const m of this.args)if(p++,l=m.evaluate(r),l&&l instanceof hi&&!l.available&&(o||(o=l.name),l=null,p===this.args.length&&(l=o)),l!==null)break;return l}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}function Yu(i,r){return i==="=="||i==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function Ju(i,r,o,l){return l.compare(r,o)===0}function ba(i,r,o){const l=i!=="=="&&i!=="!=";return class O2{constructor(m,_,w){this.type=St,this.lhs=m,this.rhs=_,this.collator=w,this.hasUntypedArgument=m.type.kind==="value"||_.type.kind==="value"}static parse(m,_){if(m.length!==3&&m.length!==4)return _.error("Expected two or three arguments.");const w=m[0];let S=_.parse(m[1],1,Tt);if(!S)return null;if(!Yu(w,S.type))return _.concat(1).error(`"${w}" comparisons are not supported for type '${j(S.type)}'.`);let E=_.parse(m[2],2,Tt);if(!E)return null;if(!Yu(w,E.type))return _.concat(2).error(`"${w}" comparisons are not supported for type '${j(E.type)}'.`);if(S.type.kind!==E.type.kind&&S.type.kind!=="value"&&E.type.kind!=="value")return _.error(`Cannot compare types '${j(S.type)}' and '${j(E.type)}'.`);l&&(S.type.kind==="value"&&E.type.kind!=="value"?S=new Ci(E.type,[S]):S.type.kind!=="value"&&E.type.kind==="value"&&(E=new Ci(S.type,[E])));let C=null;if(m.length===4){if(S.type.kind!=="string"&&E.type.kind!=="string"&&S.type.kind!=="value"&&E.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(C=_.parse(m[3],3,ki),!C)return null}return new O2(S,E,C)}evaluate(m){const _=this.lhs.evaluate(m),w=this.rhs.evaluate(m);if(l&&this.hasUntypedArgument){const S=Fr(_),E=Fr(w);if(S.kind!==E.kind||S.kind!=="string"&&S.kind!=="number")throw new Sr(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${S.kind}, ${E.kind}) instead.`)}if(this.collator&&!l&&this.hasUntypedArgument){const S=Fr(_),E=Fr(w);if(S.kind!=="string"||E.kind!=="string")return r(m,_,w)}return this.collator?o(m,_,w,this.collator.evaluate(m)):r(m,_,w)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}}}const cm=ba("==",function(i,r,o){return r===o},Ju),rd=ba("!=",function(i,r,o){return r!==o},function(i,r,o,l){return!Ju(0,r,o,l)}),nd=ba("<",function(i,r,o){return r<o},function(i,r,o,l){return l.compare(r,o)<0}),hm=ba(">",function(i,r,o){return r>o},function(i,r,o,l){return l.compare(r,o)>0}),dm=ba("<=",function(i,r,o){return r<=o},function(i,r,o,l){return l.compare(r,o)<=0}),pm=ba(">=",function(i,r,o){return r>=o},function(i,r,o,l){return l.compare(r,o)>=0});class dl{constructor(r,o,l){this.type=ki,this.locale=l,this.caseSensitive=r,this.diacriticSensitive=o}static parse(r,o){if(r.length!==2)return o.error("Expected one argument.");const l=r[1];if(typeof l!="object"||Array.isArray(l))return o.error("Collator options argument must be an object.");const p=o.parse(l["case-sensitive"]!==void 0&&l["case-sensitive"],1,St);if(!p)return null;const m=o.parse(l["diacritic-sensitive"]!==void 0&&l["diacritic-sensitive"],1,St);if(!m)return null;let _=null;return l.locale&&(_=o.parse(l.locale,1,Et),!_)?null:new dl(p,m,_)}evaluate(r){return new Hu(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}class Qu{constructor(r,o,l,p,m){this.type=Et,this.number=r,this.locale=o,this.currency=l,this.minFractionDigits=p,this.maxFractionDigits=m}static parse(r,o){if(r.length!==3)return o.error("Expected two arguments.");const l=o.parse(r[1],1,Be);if(!l)return null;const p=r[2];if(typeof p!="object"||Array.isArray(p))return o.error("NumberFormat options argument must be an object.");let m=null;if(p.locale&&(m=o.parse(p.locale,1,Et),!m))return null;let _=null;if(p.currency&&(_=o.parse(p.currency,1,Et),!_))return null;let w=null;if(p["min-fraction-digits"]&&(w=o.parse(p["min-fraction-digits"],1,Be),!w))return null;let S=null;return p["max-fraction-digits"]&&(S=o.parse(p["max-fraction-digits"],1,Be),!S)?null:new Qu(l,m,_,w,S)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class pl{constructor(r){this.type=Ei,this.sections=r}static parse(r,o){if(r.length<2)return o.error("Expected at least one argument.");const l=r[1];if(!Array.isArray(l)&&typeof l=="object")return o.error("First argument must be an image or text section.");const p=[];let m=!1;for(let _=1;_<=r.length-1;++_){const w=r[_];if(m&&typeof w=="object"&&!Array.isArray(w)){m=!1;let S=null;if(w["font-scale"]&&(S=o.parse(w["font-scale"],1,Be),!S))return null;let E=null;if(w["text-font"]&&(E=o.parse(w["text-font"],1,O(Et)),!E))return null;let C=null;if(w["text-color"]&&(C=o.parse(w["text-color"],1,tn),!C))return null;const A=p[p.length-1];A.scale=S,A.font=E,A.textColor=C}else{const S=o.parse(r[_],1,Tt);if(!S)return null;const E=S.type.kind;if(E!=="string"&&E!=="value"&&E!=="null"&&E!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,p.push({content:S,scale:null,font:null,textColor:null})}}return new pl(p)}evaluate(r){return new Kn(this.sections.map(o=>{const l=o.content.evaluate(r);return Fr(l)===Z?new Wu("",l,null,null,null):new Wu(gs(l),null,o.scale?o.scale.evaluate(r):null,o.font?o.font.evaluate(r).join(","):null,o.textColor?o.textColor.evaluate(r):null)}))}eachChild(r){for(const o of this.sections)r(o.content),o.scale&&r(o.scale),o.font&&r(o.font),o.textColor&&r(o.textColor)}outputDefined(){return!1}}class ec{constructor(r){this.type=Z,this.input=r}static parse(r,o){if(r.length!==2)return o.error("Expected two arguments.");const l=o.parse(r[1],1,Et);return l?new ec(l):o.error("No image name provided.")}evaluate(r){const o=this.input.evaluate(r),l=hi.fromString(o);return l&&r.availableImages&&(l.available=r.availableImages.indexOf(o)>-1),l}eachChild(r){r(this.input)}outputDefined(){return!1}}class xs{constructor(r){this.type=Be,this.input=r}static parse(r,o){if(r.length!==2)return o.error(`Expected 1 argument, but found ${r.length-1} instead.`);const l=o.parse(r[1],1);return l?l.type.kind!=="array"&&l.type.kind!=="string"&&l.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${j(l.type)} instead.`):new xs(l):null}evaluate(r){const o=this.input.evaluate(r);if(typeof o=="string"||Array.isArray(o))return o.length;throw new Sr(`Expected value to be of type string or array, but found ${j(Fr(o))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const Yn=8192;function Wt(i,r){const o=(180+i[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,p=Math.pow(2,r.z);return[Math.round(o*p*Yn),Math.round(l*p*Yn)]}function tc(i,r){const o=Math.pow(2,r.z);return[(p=(i[0]/Yn+r.x)/o,360*p-180),(l=(i[1]/Yn+r.y)/o,360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90)];var l,p}function ws(i,r){i[0]=Math.min(i[0],r[0]),i[1]=Math.min(i[1],r[1]),i[2]=Math.max(i[2],r[0]),i[3]=Math.max(i[3],r[1])}function bs(i,r){return!(i[0]<=r[0]||i[2]>=r[2]||i[1]<=r[1]||i[3]>=r[3])}function fm(i,r,o){const l=i[0]-r[0],p=i[1]-r[1],m=i[0]-o[0],_=i[1]-o[1];return l*_-m*p==0&&l*m<=0&&p*_<=0}function fl(i,r,o,l){return(p=[l[0]-o[0],l[1]-o[1]])[0]*(m=[r[0]-i[0],r[1]-i[1]])[1]-p[1]*m[0]!=0&&!(!od(i,r,o,l)||!od(o,l,i,r));var p,m}function mm(i,r,o){for(const l of o)for(let p=0;p<l.length-1;++p)if(fl(i,r,l[p],l[p+1]))return!0;return!1}function Sa(i,r,o=!1){let l=!1;for(const w of r)for(let S=0;S<w.length-1;S++){if(fm(i,w[S],w[S+1]))return o;(m=w[S])[1]>(p=i)[1]!=(_=w[S+1])[1]>p[1]&&p[0]<(_[0]-m[0])*(p[1]-m[1])/(_[1]-m[1])+m[0]&&(l=!l)}var p,m,_;return l}function gm(i,r){for(const o of r)if(Sa(i,o))return!0;return!1}function id(i,r){for(const o of i)if(!Sa(o,r))return!1;for(let o=0;o<i.length-1;++o)if(mm(i[o],i[o+1],r))return!1;return!0}function ym(i,r){for(const o of r)if(id(i,o))return!0;return!1}function od(i,r,o,l){const p=l[0]-o[0],m=l[1]-o[1],_=(i[0]-o[0])*m-p*(i[1]-o[1]),w=(r[0]-o[0])*m-p*(r[1]-o[1]);return _>0&&w<0||_<0&&w>0}function rc(i,r,o){const l=[];for(let p=0;p<i.length;p++){const m=[];for(let _=0;_<i[p].length;_++){const w=Wt(i[p][_],o);ws(r,w),m.push(w)}l.push(m)}return l}function ad(i,r,o){const l=[];for(let p=0;p<i.length;p++){const m=rc(i[p],r,o);l.push(m)}return l}function sd(i,r,o,l){if(i[0]<o[0]||i[0]>o[2]){const p=.5*l;let m=i[0]-o[0]>p?-l:o[0]-i[0]>p?l:0;m===0&&(m=i[0]-o[2]>p?-l:o[2]-i[0]>p?l:0),i[0]+=m}ws(r,i)}function ld(i,r,o,l){const p=Math.pow(2,l.z)*Yn,m=[l.x*Yn,l.y*Yn],_=[];for(const w of i)for(const S of w){const E=[S.x+m[0],S.y+m[1]];sd(E,r,o,p),_.push(E)}return _}function ud(i,r,o,l){const p=Math.pow(2,l.z)*Yn,m=[l.x*Yn,l.y*Yn],_=[];for(const S of i){const E=[];for(const C of S){const A=[C.x+m[0],C.y+m[1]];ws(r,A),E.push(A)}_.push(E)}if(r[2]-r[0]<=p/2){(w=r)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(const S of _)for(const E of S)sd(E,r,o,p)}var w;return _}class Go{constructor(r,o){this.type=St,this.geojson=r,this.geometries=o}static parse(r,o){if(r.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(lo(r[1])){const l=r[1];if(l.type==="FeatureCollection"){const p=[];for(const m of l.features){const{type:_,coordinates:w}=m.geometry;_==="Polygon"&&p.push(w),_==="MultiPolygon"&&p.push(...w)}if(p.length)return new Go(l,{type:"MultiPolygon",coordinates:p})}else if(l.type==="Feature"){const p=l.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Go(l,l.geometry)}else if(l.type==="Polygon"||l.type==="MultiPolygon")return new Go(l,l)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(o,l){const p=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],_=o.canonicalID();if(l.type==="Polygon"){const w=rc(l.coordinates,m,_),S=ld(o.geometry(),p,m,_);if(!bs(p,m))return!1;for(const E of S)if(!Sa(E,w))return!1}if(l.type==="MultiPolygon"){const w=ad(l.coordinates,m,_),S=ld(o.geometry(),p,m,_);if(!bs(p,m))return!1;for(const E of S)if(!gm(E,w))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(o,l){const p=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],_=o.canonicalID();if(l.type==="Polygon"){const w=rc(l.coordinates,m,_),S=ud(o.geometry(),p,m,_);if(!bs(p,m))return!1;for(const E of S)if(!id(E,w))return!1}if(l.type==="MultiPolygon"){const w=ad(l.coordinates,m,_),S=ud(o.geometry(),p,m,_);if(!bs(p,m))return!1;for(const E of S)if(!ym(E,w))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let cd=class{constructor(i=[],r=_m){if(this.data=i,this.length=this.data.length,this.compare=r,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(i){this.data.push(i),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const i=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:r,compare:o}=this,l=r[i];for(;i>0;){const p=i-1>>1,m=r[p];if(o(l,m)>=0)break;r[i]=m,i=p}r[i]=l}_down(i){const{data:r,compare:o}=this,l=this.length>>1,p=r[i];for(;i<l;){let m=1+(i<<1),_=r[m];const w=m+1;if(w<this.length&&o(r[w],_)<0&&(m=w,_=r[w]),o(_,p)>=0)break;r[i]=_,i=m}r[i]=p}};function _m(i,r){return i<r?-1:i>r?1:0}function vm(i,r,o,l,p){hd(i,r,o,l||i.length-1,p||xm)}function hd(i,r,o,l,p){for(;l>o;){if(l-o>600){var m=l-o+1,_=r-o+1,w=Math.log(m),S=.5*Math.exp(2*w/3),E=.5*Math.sqrt(w*S*(m-S)/m)*(_-m/2<0?-1:1);hd(i,r,Math.max(o,Math.floor(r-_*S/m+E)),Math.min(l,Math.floor(r+(m-_)*S/m+E)),p)}var C=i[r],A=o,L=l;for(Ss(i,o,r),p(i[l],C)>0&&Ss(i,o,l);A<L;){for(Ss(i,A,L),A++,L--;p(i[A],C)<0;)A++;for(;p(i[L],C)>0;)L--}p(i[o],C)===0?Ss(i,o,L):Ss(i,++L,l),L<=r&&(o=L+1),r<=L&&(l=L-1)}}function Ss(i,r,o){var l=i[r];i[r]=i[o],i[o]=l}function xm(i,r){return i<r?-1:i>r?1:0}function ml(i,r){if(i.length<=1)return[i];const o=[];let l,p;for(const m of i){const _=bm(m);_!==0&&(m.area=Math.abs(_),p===void 0&&(p=_<0),p===_<0?(l&&o.push(l),l=[m]):l.push(m))}if(l&&o.push(l),r>1)for(let m=0;m<o.length;m++)o[m].length<=r||(vm(o[m],r,1,o[m].length-1,wm),o[m]=o[m].slice(0,r));return o}function wm(i,r){return r.area-i.area}function bm(i){let r=0;for(let o,l,p=0,m=i.length,_=m-1;p<m;_=p++)o=i[p],l=i[_],r+=(l.x-o.x)*(o.y+l.y);return r}const dd=1/298.257223563,pd=dd*(2-dd),fd=Math.PI/180;class nc{constructor(r){const o=6378.137*fd*1e3,l=Math.cos(r*fd),p=1/(1-pd*(1-l*l)),m=Math.sqrt(p);this.kx=o*m*l,this.ky=o*m*p*(1-pd)}distance(r,o){const l=this.wrap(r[0]-o[0])*this.kx,p=(r[1]-o[1])*this.ky;return Math.sqrt(l*l+p*p)}pointOnLine(r,o){let l,p,m,_,w=1/0;for(let S=0;S<r.length-1;S++){let E=r[S][0],C=r[S][1],A=this.wrap(r[S+1][0]-E)*this.kx,L=(r[S+1][1]-C)*this.ky,N=0;A===0&&L===0||(N=(this.wrap(o[0]-E)*this.kx*A+(o[1]-C)*this.ky*L)/(A*A+L*L),N>1?(E=r[S+1][0],C=r[S+1][1]):N>0&&(E+=A/this.kx*N,C+=L/this.ky*N)),A=this.wrap(o[0]-E)*this.kx,L=(o[1]-C)*this.ky;const V=A*A+L*L;V<w&&(w=V,l=E,p=C,m=S,_=N)}return{point:[l,p],index:m,t:Math.max(0,Math.min(1,_))}}wrap(r){for(;r<-180;)r+=360;for(;r>180;)r-=360;return r}}function md(i,r){return r[0]-i[0]}function Ta(i){return i[1]-i[0]+1}function uo(i,r){return i[1]>=i[0]&&i[1]<r}function ic(i,r){if(i[0]>i[1])return[null,null];const o=Ta(i);if(r){if(o===2)return[i,null];const p=Math.floor(o/2);return[[i[0],i[0]+p],[i[0]+p,i[1]]]}if(o===1)return[i,null];const l=Math.floor(o/2)-1;return[[i[0],i[0]+l],[i[0]+l+1,i[1]]]}function oc(i,r){if(!uo(r,i.length))return[1/0,1/0,-1/0,-1/0];const o=[1/0,1/0,-1/0,-1/0];for(let l=r[0];l<=r[1];++l)ws(o,i[l]);return o}function ac(i){const r=[1/0,1/0,-1/0,-1/0];for(const o of i)for(const l of o)ws(r,l);return r}function Tr(i){return i[0]!==-1/0&&i[1]!==-1/0&&i[2]!==1/0&&i[3]!==1/0}function sc(i,r,o){if(!Tr(i)||!Tr(r))return NaN;let l=0,p=0;return i[2]<r[0]&&(l=r[0]-i[2]),i[0]>r[2]&&(l=i[0]-r[2]),i[1]>r[3]&&(p=i[1]-r[3]),i[3]<r[1]&&(p=r[1]-i[3]),o.distance([0,0],[l,p])}function Mt(i,r,o){const l=o.pointOnLine(r,i);return o.distance(i,l.point)}function Ts(i,r,o,l,p){const m=Math.min(Mt(i,[o,l],p),Mt(r,[o,l],p)),_=Math.min(Mt(o,[i,r],p),Mt(l,[i,r],p));return Math.min(m,_)}function gr(i,r,o,l,p){if(!uo(r,i.length)||!uo(l,o.length))return 1/0;let m=1/0;for(let _=r[0];_<r[1];++_){const w=i[_],S=i[_+1];for(let E=l[0];E<l[1];++E){const C=o[E],A=o[E+1];if(fl(w,S,C,A))return 0;m=Math.min(m,Ts(w,S,C,A,p))}}return m}function fr(i,r,o,l,p){if(!uo(r,i.length)||!uo(l,o.length))return NaN;let m=1/0;for(let _=r[0];_<=r[1];++_)for(let w=l[0];w<=l[1];++w)if(m=Math.min(m,p.distance(i[_],o[w])),m===0)return m;return m}function gl(i,r,o){if(Sa(i,r,!0))return 0;let l=1/0;for(const p of r){const m=p[0],_=p[p.length-1];if(m!==_&&(l=Math.min(l,Mt(i,[_,m],o)),l===0))return l;const w=o.pointOnLine(p,i);if(l=Math.min(l,o.distance(i,w.point)),l===0)return l}return l}function gd(i,r,o,l){if(!uo(r,i.length))return NaN;for(let m=r[0];m<=r[1];++m)if(Sa(i[m],o,!0))return 0;let p=1/0;for(let m=r[0];m<r[1];++m){const _=i[m],w=i[m+1];for(const S of o)for(let E=0,C=S.length,A=C-1;E<C;A=E++){const L=S[A],N=S[E];if(fl(_,w,L,N))return 0;p=Math.min(p,Ts(_,w,L,N,l))}}return p}function lc(i,r){for(const o of i)for(const l of o)if(Sa(l,r,!0))return!0;return!1}function Sm(i,r,o,l=1/0){const p=ac(i),m=ac(r);if(l!==1/0&&sc(p,m,o)>=l)return l;if(bs(p,m)){if(lc(i,r))return 0}else if(lc(r,i))return 0;let _=1/0;for(const w of i)for(let S=0,E=w.length,C=E-1;S<E;C=S++){const A=w[C],L=w[S];for(const N of r)for(let V=0,H=N.length,X=H-1;V<H;X=V++){const re=N[X],fe=N[V];if(fl(A,L,re,fe))return 0;_=Math.min(_,Ts(A,L,re,fe,o))}}return _}function yd(i,r,o,l,p,m){if(!m)return;const _=sc(oc(l,m),p,o);_<r&&i.push([_,m,[0,0]])}function yl(i,r,o,l,p,m,_){if(!m||!_)return;const w=sc(oc(l,m),oc(p,_),o);w<r&&i.push([w,m,_])}function _l(i,r,o,l,p=1/0){let m=Math.min(l.distance(i[0],o[0][0]),p);if(m===0)return m;const _=new cd([[0,[0,i.length-1],[0,0]]],md),w=ac(o);for(;_.length>0;){const S=_.pop();if(S[0]>=m)continue;const E=S[1],C=r?50:100;if(Ta(E)<=C){if(!uo(E,i.length))return NaN;if(r){const A=gd(i,E,o,l);if(isNaN(A)||A===0)return A;m=Math.min(m,A)}else for(let A=E[0];A<=E[1];++A){const L=gl(i[A],o,l);if(m=Math.min(m,L),m===0)return 0}}else{const A=ic(E,r);yd(_,m,l,i,w,A[0]),yd(_,m,l,i,w,A[1])}}return m}function ks(i,r,o,l,p,m=1/0){let _=Math.min(m,p.distance(i[0],o[0]));if(_===0)return _;const w=new cd([[0,[0,i.length-1],[0,o.length-1]]],md);for(;w.length>0;){const S=w.pop();if(S[0]>=_)continue;const E=S[1],C=S[2],A=r?50:100,L=l?50:100;if(Ta(E)<=A&&Ta(C)<=L){if(!uo(E,i.length)&&uo(C,o.length))return NaN;let N;if(r&&l)N=gr(i,E,o,C,p),_=Math.min(_,N);else if(r&&!l){const V=i.slice(E[0],E[1]+1);for(let H=C[0];H<=C[1];++H)if(N=Mt(o[H],V,p),_=Math.min(_,N),_===0)return _}else if(!r&&l){const V=o.slice(C[0],C[1]+1);for(let H=E[0];H<=E[1];++H)if(N=Mt(i[H],V,p),_=Math.min(_,N),_===0)return _}else N=fr(i,E,o,C,p),_=Math.min(_,N)}else{const N=ic(E,r),V=ic(C,l);yl(w,_,p,i,o,N[0],V[0]),yl(w,_,p,i,o,N[0],V[1]),yl(w,_,p,i,o,N[1],V[0]),yl(w,_,p,i,o,N[1],V[1])}}return _}function vl(i){return i.type==="MultiPolygon"?i.coordinates.map(r=>({type:"Polygon",coordinates:r})):i.type==="MultiLineString"?i.coordinates.map(r=>({type:"LineString",coordinates:r})):i.type==="MultiPoint"?i.coordinates.map(r=>({type:"Point",coordinates:r})):[i]}class Co{constructor(r,o){this.type=Be,this.geojson=r,this.geometries=o}static parse(r,o){if(r.length!==2)return o.error(`'distance' expression requires exactly one argument, but found ${r.length-1} instead.`);if(lo(r[1])){const l=r[1];if(l.type==="FeatureCollection")return new Co(l,l.features.map(p=>vl(p.geometry)).flat());if(l.type==="Feature")return new Co(l,vl(l.geometry));if("type"in l&&"coordinates"in l)return new Co(l,vl(l))}return o.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(o,l){const p=o.geometry(),m=p.flat().map(S=>tc([S.x,S.y],o.canonical));if(p.length===0)return NaN;const _=new nc(m[0][1]);let w=1/0;for(const S of l){switch(S.type){case"Point":w=Math.min(w,ks(m,!1,[S.coordinates],!1,_,w));break;case"LineString":w=Math.min(w,ks(m,!1,S.coordinates,!0,_,w));break;case"Polygon":w=Math.min(w,_l(m,!1,S.coordinates,_,w))}if(w===0)return w}return w}(r,this.geometries);if(r.geometryType()==="LineString")return function(o,l){const p=o.geometry(),m=p.flat().map(S=>tc([S.x,S.y],o.canonical));if(p.length===0)return NaN;const _=new nc(m[0][1]);let w=1/0;for(const S of l){switch(S.type){case"Point":w=Math.min(w,ks(m,!0,[S.coordinates],!1,_,w));break;case"LineString":w=Math.min(w,ks(m,!0,S.coordinates,!0,_,w));break;case"Polygon":w=Math.min(w,_l(m,!0,S.coordinates,_,w))}if(w===0)return w}return w}(r,this.geometries);if(r.geometryType()==="Polygon")return function(o,l){const p=o.geometry();if(p.length===0||p[0].length===0)return NaN;const m=ml(p,0).map(S=>S.map(E=>E.map(C=>tc([C.x,C.y],o.canonical)))),_=new nc(m[0][0][0][1]);let w=1/0;for(const S of l)for(const E of m){switch(S.type){case"Point":w=Math.min(w,_l([S.coordinates],!1,E,_,w));break;case"LineString":w=Math.min(w,_l(S.coordinates,!0,E,_,w));break;case"Polygon":w=Math.min(w,Sm(E,S.coordinates,_,w))}if(w===0)return w}return w}(r,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Ko={"==":cm,"!=":rd,">":hm,"<":nd,">=":pm,"<=":dm,array:Ci,at:Zu,boolean:Ci,case:ll,coalesce:hl,collator:dl,format:pl,image:ec,in:sl,"index-of":ys,interpolate:Xn,"interpolate-hcl":Xn,"interpolate-lab":Xn,length:xs,let:al,literal:Wo,match:Gu,number:Ci,"number-format":Qu,object:Ci,slice:_s,step:vs,string:Ci,"to-boolean":Wi,"to-color":Wi,"to-number":Wi,"to-string":Wi,var:wa,within:Go,distance:Co};class On{constructor(r,o,l,p){this.name=r,this.type=o,this._evaluate=l,this.args=p}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,o){const l=r[0],p=On.definitions[l];if(!p)return o.error(`Unknown expression "${l}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(p)?p[0]:p.type,_=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,w=_.filter(([E])=>!Array.isArray(E)||E.length===r.length-1);let S=null;for(const[E,C]of w){S=new Ht(o.registry,xl,o.path,null,o.scope);const A=[];let L=!1;for(let N=1;N<r.length;N++){const V=r[N],H=Array.isArray(E)?E[N-1]:E.type,X=S.parse(V,1+A.length,H);if(!X){L=!0;break}A.push(X)}if(!L)if(Array.isArray(E)&&E.length!==A.length)S.error(`Expected ${E.length} arguments, but found ${A.length} instead.`);else{for(let N=0;N<A.length;N++){const V=Array.isArray(E)?E[N]:E.type,H=A[N];S.concat(N+1).checkSubtype(V,H.type)}if(S.errors.length===0)return new On(l,m,C,A)}}if(w.length===1)o.errors.push(...S.errors);else{const E=(w.length?w:_).map(([A])=>{return L=A,Array.isArray(L)?`(${L.map(j).join(", ")})`:`(${j(L.type)}...)`;var L}).join(" | "),C=[];for(let A=1;A<r.length;A++){const L=o.parse(r[A],1+C.length);if(!L)return null;C.push(j(L.type))}o.error(`Expected arguments of type ${E}, but found (${C.join(", ")}) instead.`)}return null}static register(r,o){On.definitions=o;for(const l in o)r[l]=On}}function _d(i,[r,o,l,p]){r=r.evaluate(i),o=o.evaluate(i),l=l.evaluate(i);const m=p?p.evaluate(i):1,_=ed(r,o,l,m);if(_)throw new Sr(_);return new Kt(r/255,o/255,l/255,m,!1)}function vd(i,r){return i in r}function uc(i,r){const o=r[i];return o===void 0?null:o}function Xo(i){return{type:i}}function xl(i){if(i instanceof wa)return xl(i.boundExpression);if(i instanceof On&&i.name==="error"||i instanceof dl||i instanceof Go||i instanceof Co)return!1;const r=i instanceof Wi||i instanceof Ci;let o=!0;return i.eachChild(l=>{o=r?o&&xl(l):o&&l instanceof Wo}),!!o&&wl(i)&&bl(i,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function wl(i){if(i instanceof On&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof Go||i instanceof Co)return!1;let r=!0;return i.eachChild(o=>{r&&!wl(o)&&(r=!1)}),r}function Es(i){if(i instanceof On&&i.name==="feature-state")return!1;let r=!0;return i.eachChild(o=>{r&&!Es(o)&&(r=!1)}),r}function bl(i,r){if(i instanceof On&&r.indexOf(i.name)>=0)return!1;let o=!0;return i.eachChild(l=>{o&&!bl(l,r)&&(o=!1)}),o}function cc(i){return{result:"success",value:i}}function Yo(i){return{result:"error",value:i}}function co(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function xd(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function Sl(i){return!!i.expression&&i.expression.interpolated}function jt(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function ka(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function Tl(i){return i}function Cs(i,r){const o=r.type==="color",l=i.stops&&typeof i.stops[0][0]=="object",p=l||!(l||i.property!==void 0),m=i.type||(Sl(r)?"exponential":"interval");if(o||r.type==="padding"){const C=o?Kt.parse:Rn.parse;(i=sn({},i)).stops&&(i.stops=i.stops.map(A=>[A[0],C(A[1])])),i.default=C(i.default?i.default:r.default)}if(i.colorSpace&&(_=i.colorSpace)!=="rgb"&&_!=="hcl"&&_!=="lab")throw new Error(`Unknown color space: "${i.colorSpace}"`);var _;let w,S,E;if(m==="exponential")w=dc;else if(m==="interval")w=wd;else if(m==="categorical"){w=hc,S=Object.create(null);for(const C of i.stops)S[C[0]]=C[1];E=typeof i.stops[0][0]}else{if(m!=="identity")throw new Error(`Unknown function type "${m}"`);w=kl}if(l){const C={},A=[];for(let V=0;V<i.stops.length;V++){const H=i.stops[V],X=H[0].zoom;C[X]===void 0&&(C[X]={zoom:X,type:i.type,property:i.property,default:i.default,stops:[]},A.push(X)),C[X].stops.push([H[0].value,H[1]])}const L=[];for(const V of A)L.push([C[V].zoom,Cs(C[V],r)]);const N={name:"linear"};return{kind:"composite",interpolationType:N,interpolationFactor:Xn.interpolationFactor.bind(void 0,N),zoomStops:L.map(V=>V[0]),evaluate:({zoom:V},H)=>dc({stops:L,base:i.base},r,V).evaluate(V,H)}}if(p){const C=m==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:C,interpolationFactor:Xn.interpolationFactor.bind(void 0,C),zoomStops:i.stops.map(A=>A[0]),evaluate:({zoom:A})=>w(i,r,A,S,E)}}return{kind:"source",evaluate(C,A){const L=A&&A.properties?A.properties[i.property]:void 0;return L===void 0?Ea(i.default,r.default):w(i,r,L,S,E)}}}function Ea(i,r,o){return i!==void 0?i:r!==void 0?r:o!==void 0?o:void 0}function hc(i,r,o,l,p){return Ea(typeof o===p?l[o]:void 0,i.default,r.default)}function wd(i,r,o){if(jt(o)!=="number")return Ea(i.default,r.default);const l=i.stops.length;if(l===1||o<=i.stops[0][0])return i.stops[0][1];if(o>=i.stops[l-1][0])return i.stops[l-1][1];const p=ul(i.stops.map(m=>m[0]),o);return i.stops[p][1]}function dc(i,r,o){const l=i.base!==void 0?i.base:1;if(jt(o)!=="number")return Ea(i.default,r.default);const p=i.stops.length;if(p===1||o<=i.stops[0][0])return i.stops[0][1];if(o>=i.stops[p-1][0])return i.stops[p-1][1];const m=ul(i.stops.map(C=>C[0]),o),_=function(C,A,L,N){const V=N-L,H=C-L;return V===0?0:A===1?H/V:(Math.pow(A,H)-1)/(Math.pow(A,V)-1)}(o,l,i.stops[m][0],i.stops[m+1][0]),w=i.stops[m][1],S=i.stops[m+1][1],E=Sn[r.type]||Tl;return typeof w.evaluate=="function"?{evaluate(...C){const A=w.evaluate.apply(void 0,C),L=S.evaluate.apply(void 0,C);if(A!==void 0&&L!==void 0)return E(A,L,_,i.colorSpace)}}:E(w,S,_,i.colorSpace)}function kl(i,r,o){switch(r.type){case"color":o=Kt.parse(o);break;case"formatted":o=Kn.fromString(o.toString());break;case"resolvedImage":o=hi.fromString(o.toString());break;case"padding":o=Rn.parse(o);break;default:jt(o)===r.type||r.type==="enum"&&r.values[o]||(o=void 0)}return Ea(o,i.default,r.default)}On.register(Ko,{error:[{kind:"error"},[Et],(i,[r])=>{throw new Sr(r.evaluate(i))}],typeof:[Et,[Tt],(i,[r])=>j(Fr(r.evaluate(i)))],"to-rgba":[O(Be,4),[tn],(i,[r])=>{const[o,l,p,m]=r.evaluate(i).rgb;return[255*o,255*l,255*p,m]}],rgb:[tn,[Be,Be,Be],_d],rgba:[tn,[Be,Be,Be,Be],_d],has:{type:St,overloads:[[[Et],(i,[r])=>vd(r.evaluate(i),i.properties())],[[Et,Xr],(i,[r,o])=>vd(r.evaluate(i),o.evaluate(i))]]},get:{type:Tt,overloads:[[[Et],(i,[r])=>uc(r.evaluate(i),i.properties())],[[Et,Xr],(i,[r,o])=>uc(r.evaluate(i),o.evaluate(i))]]},"feature-state":[Tt,[Et],(i,[r])=>uc(r.evaluate(i),i.featureState||{})],properties:[Xr,[],i=>i.properties()],"geometry-type":[Et,[],i=>i.geometryType()],id:[Tt,[],i=>i.id()],zoom:[Be,[],i=>i.globals.zoom],"heatmap-density":[Be,[],i=>i.globals.heatmapDensity||0],"line-progress":[Be,[],i=>i.globals.lineProgress||0],accumulated:[Tt,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[Be,Xo(Be),(i,r)=>{let o=0;for(const l of r)o+=l.evaluate(i);return o}],"*":[Be,Xo(Be),(i,r)=>{let o=1;for(const l of r)o*=l.evaluate(i);return o}],"-":{type:Be,overloads:[[[Be,Be],(i,[r,o])=>r.evaluate(i)-o.evaluate(i)],[[Be],(i,[r])=>-r.evaluate(i)]]},"/":[Be,[Be,Be],(i,[r,o])=>r.evaluate(i)/o.evaluate(i)],"%":[Be,[Be,Be],(i,[r,o])=>r.evaluate(i)%o.evaluate(i)],ln2:[Be,[],()=>Math.LN2],pi:[Be,[],()=>Math.PI],e:[Be,[],()=>Math.E],"^":[Be,[Be,Be],(i,[r,o])=>Math.pow(r.evaluate(i),o.evaluate(i))],sqrt:[Be,[Be],(i,[r])=>Math.sqrt(r.evaluate(i))],log10:[Be,[Be],(i,[r])=>Math.log(r.evaluate(i))/Math.LN10],ln:[Be,[Be],(i,[r])=>Math.log(r.evaluate(i))],log2:[Be,[Be],(i,[r])=>Math.log(r.evaluate(i))/Math.LN2],sin:[Be,[Be],(i,[r])=>Math.sin(r.evaluate(i))],cos:[Be,[Be],(i,[r])=>Math.cos(r.evaluate(i))],tan:[Be,[Be],(i,[r])=>Math.tan(r.evaluate(i))],asin:[Be,[Be],(i,[r])=>Math.asin(r.evaluate(i))],acos:[Be,[Be],(i,[r])=>Math.acos(r.evaluate(i))],atan:[Be,[Be],(i,[r])=>Math.atan(r.evaluate(i))],min:[Be,Xo(Be),(i,r)=>Math.min(...r.map(o=>o.evaluate(i)))],max:[Be,Xo(Be),(i,r)=>Math.max(...r.map(o=>o.evaluate(i)))],abs:[Be,[Be],(i,[r])=>Math.abs(r.evaluate(i))],round:[Be,[Be],(i,[r])=>{const o=r.evaluate(i);return o<0?-Math.round(-o):Math.round(o)}],floor:[Be,[Be],(i,[r])=>Math.floor(r.evaluate(i))],ceil:[Be,[Be],(i,[r])=>Math.ceil(r.evaluate(i))],"filter-==":[St,[Et,Tt],(i,[r,o])=>i.properties()[r.value]===o.value],"filter-id-==":[St,[Tt],(i,[r])=>i.id()===r.value],"filter-type-==":[St,[Et],(i,[r])=>i.geometryType()===r.value],"filter-<":[St,[Et,Tt],(i,[r,o])=>{const l=i.properties()[r.value],p=o.value;return typeof l==typeof p&&l<p}],"filter-id-<":[St,[Tt],(i,[r])=>{const o=i.id(),l=r.value;return typeof o==typeof l&&o<l}],"filter->":[St,[Et,Tt],(i,[r,o])=>{const l=i.properties()[r.value],p=o.value;return typeof l==typeof p&&l>p}],"filter-id->":[St,[Tt],(i,[r])=>{const o=i.id(),l=r.value;return typeof o==typeof l&&o>l}],"filter-<=":[St,[Et,Tt],(i,[r,o])=>{const l=i.properties()[r.value],p=o.value;return typeof l==typeof p&&l<=p}],"filter-id-<=":[St,[Tt],(i,[r])=>{const o=i.id(),l=r.value;return typeof o==typeof l&&o<=l}],"filter->=":[St,[Et,Tt],(i,[r,o])=>{const l=i.properties()[r.value],p=o.value;return typeof l==typeof p&&l>=p}],"filter-id->=":[St,[Tt],(i,[r])=>{const o=i.id(),l=r.value;return typeof o==typeof l&&o>=l}],"filter-has":[St,[Tt],(i,[r])=>r.value in i.properties()],"filter-has-id":[St,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[St,[O(Et)],(i,[r])=>r.value.indexOf(i.geometryType())>=0],"filter-id-in":[St,[O(Tt)],(i,[r])=>r.value.indexOf(i.id())>=0],"filter-in-small":[St,[Et,O(Tt)],(i,[r,o])=>o.value.indexOf(i.properties()[r.value])>=0],"filter-in-large":[St,[Et,O(Tt)],(i,[r,o])=>function(l,p,m,_){for(;m<=_;){const w=m+_>>1;if(p[w]===l)return!0;p[w]>l?_=w-1:m=w+1}return!1}(i.properties()[r.value],o.value,0,o.value.length-1)],all:{type:St,overloads:[[[St,St],(i,[r,o])=>r.evaluate(i)&&o.evaluate(i)],[Xo(St),(i,r)=>{for(const o of r)if(!o.evaluate(i))return!1;return!0}]]},any:{type:St,overloads:[[[St,St],(i,[r,o])=>r.evaluate(i)||o.evaluate(i)],[Xo(St),(i,r)=>{for(const o of r)if(o.evaluate(i))return!0;return!1}]]},"!":[St,[St],(i,[r])=>!r.evaluate(i)],"is-supported-script":[St,[Et],(i,[r])=>{const o=i.globals&&i.globals.isSupportedScript;return!o||o(r.evaluate(i))}],upcase:[Et,[Et],(i,[r])=>r.evaluate(i).toUpperCase()],downcase:[Et,[Et],(i,[r])=>r.evaluate(i).toLowerCase()],concat:[Et,Xo(Tt),(i,r)=>r.map(o=>gs(o.evaluate(i))).join("")],"resolved-locale":[Et,[ki],(i,[r])=>r.evaluate(i).resolvedLocale()]});class pc{constructor(r,o){var l;this.expression=r,this._warningHistory={},this._evaluator=new xa,this._defaultValue=o?(l=o).type==="color"&&ka(l.default)?new Kt(0,0,0,0):l.type==="color"?Kt.parse(l.default)||null:l.type==="padding"?Rn.parse(l.default)||null:l.type==="variableAnchorOffsetCollection"?Dn.parse(l.default)||null:l.default===void 0?null:l.default:null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(r,o,l,p,m,_){return this._evaluator.globals=r,this._evaluator.feature=o,this._evaluator.featureState=l,this._evaluator.canonical=p,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=_,this.expression.evaluate(this._evaluator)}evaluate(r,o,l,p,m,_){this._evaluator.globals=r,this._evaluator.feature=o||null,this._evaluator.featureState=l||null,this._evaluator.canonical=p,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=_||null;try{const w=this.expression.evaluate(this._evaluator);if(w==null||typeof w=="number"&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new Sr(`Expected value to be one of ${Object.keys(this._enumValues).map(S=>JSON.stringify(S)).join(", ")}, but found ${JSON.stringify(w)} instead.`);return w}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console<"u"&&console.warn(w.message)),this._defaultValue}}}function El(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in Ko}function Cl(i,r){const o=new Ht(Ko,xl,[],r?function(p){const m={color:tn,string:Et,number:Be,enum:Et,boolean:St,formatted:Ei,padding:Ot,resolvedImage:Z,variableAnchorOffsetCollection:R};return p.type==="array"?O(m[p.value]||Tt,p.length):m[p.type]}(r):void 0),l=o.parse(i,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?cc(new pc(l,r)):Yo(o.errors)}class fc{constructor(r,o){this.kind=r,this._styleExpression=o,this.isStateDependent=r!=="constant"&&!Es(o.expression)}evaluateWithoutErrorHandling(r,o,l,p,m,_){return this._styleExpression.evaluateWithoutErrorHandling(r,o,l,p,m,_)}evaluate(r,o,l,p,m,_){return this._styleExpression.evaluate(r,o,l,p,m,_)}}class mc{constructor(r,o,l,p){this.kind=r,this.zoomStops=l,this._styleExpression=o,this.isStateDependent=r!=="camera"&&!Es(o.expression),this.interpolationType=p}evaluateWithoutErrorHandling(r,o,l,p,m,_){return this._styleExpression.evaluateWithoutErrorHandling(r,o,l,p,m,_)}evaluate(r,o,l,p,m,_){return this._styleExpression.evaluate(r,o,l,p,m,_)}interpolationFactor(r,o,l){return this.interpolationType?Xn.interpolationFactor(this.interpolationType,r,o,l):0}}function Ps(i,r){const o=Cl(i,r);if(o.result==="error")return o;const l=o.value.expression,p=wl(l);if(!p&&!co(r))return Yo([new Kr("","data expressions not supported")]);const m=bl(l,["zoom"]);if(!m&&!xd(r))return Yo([new Kr("","zoom expressions not supported")]);const _=ln(l);return _||m?_ instanceof Kr?Yo([_]):_ instanceof Xn&&!Sl(r)?Yo([new Kr("",'"interpolate" expressions cannot be used with this property')]):cc(_?new mc(p?"camera":"composite",o.value,_.labels,_ instanceof Xn?_.interpolation:void 0):new fc(p?"constant":"source",o.value)):Yo([new Kr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Jo{constructor(r,o){this._parameters=r,this._specification=o,sn(this,Cs(this._parameters,this._specification))}static deserialize(r){return new Jo(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function ln(i){let r=null;if(i instanceof al)r=ln(i.result);else if(i instanceof hl){for(const o of i.args)if(r=ln(o),r)break}else(i instanceof vs||i instanceof Xn)&&i.input instanceof On&&i.input.name==="zoom"&&(r=i);return r instanceof Kr||i.eachChild(o=>{const l=ln(o);l instanceof Kr?r=l:!r&&l?r=new Kr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&l&&r!==l&&(r=new Kr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function Qo(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const r of i.slice(1))if(!Qo(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const bd={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function gc(i){if(i==null)return{filter:()=>!0,needGeometry:!1};Qo(i)||(i=Is(i));const r=Cl(i,bd);if(r.result==="error")throw new Error(r.value.map(o=>`${o.key}: ${o.message}`).join(", "));return{filter:(o,l,p)=>r.value.evaluate(o,l,{},p),needGeometry:Ca(i)}}function Tm(i,r){return i<r?-1:i>r?1:0}function Ca(i){if(!Array.isArray(i))return!1;if(i[0]==="within"||i[0]==="distance")return!0;for(let r=1;r<i.length;r++)if(Ca(i[r]))return!0;return!1}function Is(i){if(!i)return!0;const r=i[0];return i.length<=1?r!=="any":r==="=="?As(i[1],i[2],"=="):r==="!="?Il(As(i[1],i[2],"==")):r==="<"||r===">"||r==="<="||r===">="?As(i[1],i[2],r):r==="any"?(o=i.slice(1),["any"].concat(o.map(Is))):r==="all"?["all"].concat(i.slice(1).map(Is)):r==="none"?["all"].concat(i.slice(1).map(Is).map(Il)):r==="in"?Sd(i[1],i.slice(2)):r==="!in"?Il(Sd(i[1],i.slice(2))):r==="has"?Pl(i[1]):r!=="!has"||Il(Pl(i[1]));var o}function As(i,r,o){switch(i){case"$type":return[`filter-type-${o}`,r];case"$id":return[`filter-id-${o}`,r];default:return[`filter-${o}`,i,r]}}function Sd(i,r){if(r.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(o=>typeof o!=typeof r[0])?["filter-in-large",i,["literal",r.sort(Tm)]]:["filter-in-small",i,["literal",r]]}}function Pl(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function Il(i){return["!",i]}function ea(i){const r=typeof i;if(r==="number"||r==="boolean"||r==="string"||i==null)return JSON.stringify(i);if(Array.isArray(i)){let p="[";for(const m of i)p+=`${ea(m)},`;return`${p}]`}const o=Object.keys(i).sort();let l="{";for(let p=0;p<o.length;p++)l+=`${JSON.stringify(o[p])}:${ea(i[o[p]])},`;return`${l}}`}function km(i){let r="";for(const o of Ti)r+=`/${ea(i[o])}`;return r}function Al(i){const r=i.value;return r?[new Ne(i.key,r,"constants have been deprecated as of v8")]:[]}function vr(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function ho(i){if(Array.isArray(i))return i.map(ho);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const r={};for(const o in i)r[o]=ho(i[o]);return r}return vr(i)}function Jn(i){const r=i.key,o=i.value,l=i.valueSpec||{},p=i.objectElementValidators||{},m=i.style,_=i.styleSpec,w=i.validateSpec;let S=[];const E=jt(o);if(E!=="object")return[new Ne(r,o,`object expected, ${E} found`)];for(const C in o){const A=C.split(".")[0],L=l[A]||l["*"];let N;if(p[A])N=p[A];else if(l[A])N=w;else if(p["*"])N=p["*"];else{if(!l["*"]){S.push(new Ne(r,o[C],`unknown property "${C}"`));continue}N=w}S=S.concat(N({key:(r&&`${r}.`)+C,value:o[C],valueSpec:L,style:m,styleSpec:_,object:o,objectKey:C,validateSpec:w},o))}for(const C in l)p[C]||l[C].required&&l[C].default===void 0&&o[C]===void 0&&S.push(new Ne(r,o,`missing required property "${C}"`));return S}function Ml(i){const r=i.value,o=i.valueSpec,l=i.style,p=i.styleSpec,m=i.key,_=i.arrayElementValidator||i.validateSpec;if(jt(r)!=="array")return[new Ne(m,r,`array expected, ${jt(r)} found`)];if(o.length&&r.length!==o.length)return[new Ne(m,r,`array length ${o.length} expected, length ${r.length} found`)];if(o["min-length"]&&r.length<o["min-length"])return[new Ne(m,r,`array length at least ${o["min-length"]} expected, length ${r.length} found`)];let w={type:o.value,values:o.values};p.$version<7&&(w.function=o.function),jt(o.value)==="object"&&(w=o.value);let S=[];for(let E=0;E<r.length;E++)S=S.concat(_({array:r,arrayIndex:E,value:r[E],valueSpec:w,validateSpec:i.validateSpec,style:l,styleSpec:p,key:`${m}[${E}]`}));return S}function yc(i){const r=i.key,o=i.value,l=i.valueSpec;let p=jt(o);return p==="number"&&o!=o&&(p="NaN"),p!=="number"?[new Ne(r,o,`number expected, ${p} found`)]:"minimum"in l&&o<l.minimum?[new Ne(r,o,`${o} is less than the minimum value ${l.minimum}`)]:"maximum"in l&&o>l.maximum?[new Ne(r,o,`${o} is greater than the maximum value ${l.maximum}`)]:[]}function zl(i){const r=i.valueSpec,o=vr(i.value.type);let l,p,m,_={};const w=o!=="categorical"&&i.value.property===void 0,S=!w,E=jt(i.value.stops)==="array"&&jt(i.value.stops[0])==="array"&&jt(i.value.stops[0][0])==="object",C=Jn({key:i.key,value:i.value,valueSpec:i.styleSpec.function,validateSpec:i.validateSpec,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(N){if(o==="identity")return[new Ne(N.key,N.value,'identity function may not have a "stops" property')];let V=[];const H=N.value;return V=V.concat(Ml({key:N.key,value:H,valueSpec:N.valueSpec,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec,arrayElementValidator:A})),jt(H)==="array"&&H.length===0&&V.push(new Ne(N.key,H,"array must have at least one stop")),V},default:function(N){return N.validateSpec({key:N.key,value:N.value,valueSpec:r,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec})}}});return o==="identity"&&w&&C.push(new Ne(i.key,i.value,'missing required property "property"')),o==="identity"||i.value.stops||C.push(new Ne(i.key,i.value,'missing required property "stops"')),o==="exponential"&&i.valueSpec.expression&&!Sl(i.valueSpec)&&C.push(new Ne(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(S&&!co(i.valueSpec)?C.push(new Ne(i.key,i.value,"property functions not supported")):w&&!xd(i.valueSpec)&&C.push(new Ne(i.key,i.value,"zoom functions not supported"))),o!=="categorical"&&!E||i.value.property!==void 0||C.push(new Ne(i.key,i.value,'"property" property is required')),C;function A(N){let V=[];const H=N.value,X=N.key;if(jt(H)!=="array")return[new Ne(X,H,`array expected, ${jt(H)} found`)];if(H.length!==2)return[new Ne(X,H,`array length 2 expected, length ${H.length} found`)];if(E){if(jt(H[0])!=="object")return[new Ne(X,H,`object expected, ${jt(H[0])} found`)];if(H[0].zoom===void 0)return[new Ne(X,H,"object stop key must have zoom")];if(H[0].value===void 0)return[new Ne(X,H,"object stop key must have value")];if(m&&m>vr(H[0].zoom))return[new Ne(X,H[0].zoom,"stop zoom values must appear in ascending order")];vr(H[0].zoom)!==m&&(m=vr(H[0].zoom),p=void 0,_={}),V=V.concat(Jn({key:`${X}[0]`,value:H[0],valueSpec:{zoom:{}},validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec,objectElementValidators:{zoom:yc,value:L}}))}else V=V.concat(L({key:`${X}[0]`,value:H[0],valueSpec:{},validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec},H));return El(ho(H[1]))?V.concat([new Ne(`${X}[1]`,H[1],"expressions are not allowed in function stops.")]):V.concat(N.validateSpec({key:`${X}[1]`,value:H[1],valueSpec:r,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec}))}function L(N,V){const H=jt(N.value),X=vr(N.value),re=N.value!==null?N.value:V;if(l){if(H!==l)return[new Ne(N.key,re,`${H} stop domain type must match previous stop domain type ${l}`)]}else l=H;if(H!=="number"&&H!=="string"&&H!=="boolean")return[new Ne(N.key,re,"stop domain value must be a number, string, or boolean")];if(H!=="number"&&o!=="categorical"){let fe=`number expected, ${H} found`;return co(r)&&o===void 0&&(fe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ne(N.key,re,fe)]}return o!=="categorical"||H!=="number"||isFinite(X)&&Math.floor(X)===X?o!=="categorical"&&H==="number"&&p!==void 0&&X<p?[new Ne(N.key,re,"stop domain values must appear in ascending order")]:(p=X,o==="categorical"&&X in _?[new Ne(N.key,re,"stop domain values must be unique")]:(_[X]=!0,[])):[new Ne(N.key,re,`integer expected, found ${X}`)]}}function po(i){const r=(i.expressionContext==="property"?Ps:Cl)(ho(i.value),i.valueSpec);if(r.result==="error")return r.value.map(l=>new Ne(`${i.key}${l.key}`,i.value,l.message));const o=r.value.expression||r.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!o.outputDefined())return[new Ne(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!Es(o))return[new Ne(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter"&&!Es(o))return[new Ne(i.key,i.value,'"feature-state" data expressions are not supported with filters.')];if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!bl(o,["zoom","feature-state"]))return[new Ne(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!wl(o))return[new Ne(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Pa(i){const r=i.key,o=i.value,l=i.valueSpec,p=[];return Array.isArray(l.values)?l.values.indexOf(vr(o))===-1&&p.push(new Ne(r,o,`expected one of [${l.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(l.values).indexOf(vr(o))===-1&&p.push(new Ne(r,o,`expected one of [${Object.keys(l.values).join(", ")}], ${JSON.stringify(o)} found`)),p}function Ll(i){return Qo(ho(i.value))?po(sn({},i,{expressionContext:"filter",valueSpec:{value:"boolean"}})):_c(i)}function _c(i){const r=i.value,o=i.key;if(jt(r)!=="array")return[new Ne(o,r,`array expected, ${jt(r)} found`)];const l=i.styleSpec;let p,m=[];if(r.length<1)return[new Ne(o,r,"filter array must have at least 1 element")];switch(m=m.concat(Pa({key:`${o}[0]`,value:r[0],valueSpec:l.filter_operator,style:i.style,styleSpec:i.styleSpec})),vr(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&vr(r[1])==="$type"&&m.push(new Ne(o,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&m.push(new Ne(o,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(p=jt(r[1]),p!=="string"&&m.push(new Ne(`${o}[1]`,r[1],`string expected, ${p} found`)));for(let _=2;_<r.length;_++)p=jt(r[_]),vr(r[1])==="$type"?m=m.concat(Pa({key:`${o}[${_}]`,value:r[_],valueSpec:l.geometry_type,style:i.style,styleSpec:i.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&m.push(new Ne(`${o}[${_}]`,r[_],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let _=1;_<r.length;_++)m=m.concat(_c({key:`${o}[${_}]`,value:r[_],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":p=jt(r[1]),r.length!==2?m.push(new Ne(o,r,`filter array for "${r[0]}" operator must have 2 elements`)):p!=="string"&&m.push(new Ne(`${o}[1]`,r[1],`string expected, ${p} found`))}return m}function vc(i,r){const o=i.key,l=i.validateSpec,p=i.style,m=i.styleSpec,_=i.value,w=i.objectKey,S=m[`${r}_${i.layerType}`];if(!S)return[];const E=w.match(/^(.*)-transition$/);if(r==="paint"&&E&&S[E[1]]&&S[E[1]].transition)return l({key:o,value:_,valueSpec:m.transition,style:p,styleSpec:m});const C=i.valueSpec||S[w];if(!C)return[new Ne(o,_,`unknown property "${w}"`)];let A;if(jt(_)==="string"&&co(C)&&!C.tokens&&(A=/^{([^}]+)}$/.exec(_)))return[new Ne(o,_,`"${w}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(A[1])} }\`.`)];const L=[];return i.layerType==="symbol"&&(w==="text-field"&&p&&!p.glyphs&&L.push(new Ne(o,_,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&ka(ho(_))&&vr(_.type)==="identity"&&L.push(new Ne(o,_,'"text-font" does not support identity functions'))),L.concat(l({key:i.key,value:_,valueSpec:C,style:p,styleSpec:m,expressionContext:"property",propertyType:r,propertyKey:w}))}function Rl(i){return vc(i,"paint")}function xc(i){return vc(i,"layout")}function Td(i){let r=[];const o=i.value,l=i.key,p=i.style,m=i.styleSpec;o.type||o.ref||r.push(new Ne(l,o,'either "type" or "ref" is required'));let _=vr(o.type);const w=vr(o.ref);if(o.id){const S=vr(o.id);for(let E=0;E<i.arrayIndex;E++){const C=p.layers[E];vr(C.id)===S&&r.push(new Ne(l,o.id,`duplicate layer id "${o.id}", previously used at line ${C.id.__line__}`))}}if("ref"in o){let S;["type","source","source-layer","filter","layout"].forEach(E=>{E in o&&r.push(new Ne(l,o[E],`"${E}" is prohibited for ref layers`))}),p.layers.forEach(E=>{vr(E.id)===w&&(S=E)}),S?S.ref?r.push(new Ne(l,o.ref,"ref cannot reference another ref layer")):_=vr(S.type):r.push(new Ne(l,o.ref,`ref layer "${w}" not found`))}else if(_!=="background")if(o.source){const S=p.sources&&p.sources[o.source],E=S&&vr(S.type);S?E==="vector"&&_==="raster"?r.push(new Ne(l,o.source,`layer "${o.id}" requires a raster source`)):E!=="raster-dem"&&_==="hillshade"?r.push(new Ne(l,o.source,`layer "${o.id}" requires a raster-dem source`)):E==="raster"&&_!=="raster"?r.push(new Ne(l,o.source,`layer "${o.id}" requires a vector source`)):E!=="vector"||o["source-layer"]?E==="raster-dem"&&_!=="hillshade"?r.push(new Ne(l,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):_!=="line"||!o.paint||!o.paint["line-gradient"]||E==="geojson"&&S.lineMetrics||r.push(new Ne(l,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new Ne(l,o,`layer "${o.id}" must specify a "source-layer"`)):r.push(new Ne(l,o.source,`source "${o.source}" not found`))}else r.push(new Ne(l,o,'missing required property "source"'));return r=r.concat(Jn({key:l,value:o,valueSpec:m.layer,style:i.style,styleSpec:i.styleSpec,validateSpec:i.validateSpec,objectElementValidators:{"*":()=>[],type:()=>i.validateSpec({key:`${l}.type`,value:o.type,valueSpec:m.layer.type,style:i.style,styleSpec:i.styleSpec,validateSpec:i.validateSpec,object:o,objectKey:"type"}),filter:Ll,layout:S=>Jn({layer:o,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":E=>xc(sn({layerType:_},E))}}),paint:S=>Jn({layer:o,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":E=>Rl(sn({layerType:_},E))}})}})),r}function Po(i){const r=i.value,o=i.key,l=jt(r);return l!=="string"?[new Ne(o,r,`string expected, ${l} found`)]:[]}const kd={promoteId:function({key:i,value:r}){if(jt(r)==="string")return Po({key:i,value:r});{const o=[];for(const l in r)o.push(...Po({key:`${i}.${l}`,value:r[l]}));return o}}};function wc(i){const r=i.value,o=i.key,l=i.styleSpec,p=i.style,m=i.validateSpec;if(!r.type)return[new Ne(o,r,'"type" is required')];const _=vr(r.type);let w;switch(_){case"vector":case"raster":return w=Jn({key:o,value:r,valueSpec:l[`source_${_.replace("-","_")}`],style:i.style,styleSpec:l,objectElementValidators:kd,validateSpec:m}),w;case"raster-dem":return w=function(S){var E;const C=(E=S.sourceName)!==null&&E!==void 0?E:"",A=S.value,L=S.styleSpec,N=L.source_raster_dem,V=S.style;let H=[];const X=jt(A);if(A===void 0)return H;if(X!=="object")return H.push(new Ne("source_raster_dem",A,`object expected, ${X} found`)),H;const re=vr(A.encoding)==="custom",fe=["redFactor","greenFactor","blueFactor","baseShift"],oe=S.value.encoding?`"${S.value.encoding}"`:"Default";for(const he in A)!re&&fe.includes(he)?H.push(new Ne(he,A[he],`In "${C}": "${he}" is only valid when "encoding" is set to "custom". ${oe} encoding found`)):N[he]?H=H.concat(S.validateSpec({key:he,value:A[he],valueSpec:N[he],validateSpec:S.validateSpec,style:V,styleSpec:L})):H.push(new Ne(he,A[he],`unknown property "${he}"`));return H}({sourceName:o,value:r,style:i.style,styleSpec:l,validateSpec:m}),w;case"geojson":if(w=Jn({key:o,value:r,valueSpec:l.source_geojson,style:p,styleSpec:l,validateSpec:m,objectElementValidators:kd}),r.cluster)for(const S in r.clusterProperties){const[E,C]=r.clusterProperties[S],A=typeof E=="string"?[E,["accumulated"],["get",S]]:E;w.push(...po({key:`${o}.${S}.map`,value:C,validateSpec:m,expressionContext:"cluster-map"})),w.push(...po({key:`${o}.${S}.reduce`,value:A,validateSpec:m,expressionContext:"cluster-reduce"}))}return w;case"video":return Jn({key:o,value:r,valueSpec:l.source_video,style:p,validateSpec:m,styleSpec:l});case"image":return Jn({key:o,value:r,valueSpec:l.source_image,style:p,validateSpec:m,styleSpec:l});case"canvas":return[new Ne(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Pa({key:`${o}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,validateSpec:m,styleSpec:l})}}function bc(i){const r=i.value,o=i.styleSpec,l=o.light,p=i.style;let m=[];const _=jt(r);if(r===void 0)return m;if(_!=="object")return m=m.concat([new Ne("light",r,`object expected, ${_} found`)]),m;for(const w in r){const S=w.match(/^(.*)-transition$/);m=m.concat(S&&l[S[1]]&&l[S[1]].transition?i.validateSpec({key:w,value:r[w],valueSpec:o.transition,validateSpec:i.validateSpec,style:p,styleSpec:o}):l[w]?i.validateSpec({key:w,value:r[w],valueSpec:l[w],validateSpec:i.validateSpec,style:p,styleSpec:o}):[new Ne(w,r[w],`unknown property "${w}"`)])}return m}function Sc(i){const r=i.value,o=i.styleSpec,l=o.sky,p=i.style,m=jt(r);if(r===void 0)return[];if(m!=="object")return[new Ne("sky",r,`object expected, ${m} found`)];let _=[];for(const w in r)_=_.concat(l[w]?i.validateSpec({key:w,value:r[w],valueSpec:l[w],style:p,styleSpec:o}):[new Ne(w,r[w],`unknown property "${w}"`)]);return _}function Ed(i){const r=i.value,o=i.styleSpec,l=o.terrain,p=i.style;let m=[];const _=jt(r);if(r===void 0)return m;if(_!=="object")return m=m.concat([new Ne("terrain",r,`object expected, ${_} found`)]),m;for(const w in r)m=m.concat(l[w]?i.validateSpec({key:w,value:r[w],valueSpec:l[w],validateSpec:i.validateSpec,style:p,styleSpec:o}):[new Ne(w,r[w],`unknown property "${w}"`)]);return m}function Cd(i){let r=[];const o=i.value,l=i.key;if(Array.isArray(o)){const p=[],m=[];for(const _ in o)o[_].id&&p.includes(o[_].id)&&r.push(new Ne(l,o,`all the sprites' ids must be unique, but ${o[_].id} is duplicated`)),p.push(o[_].id),o[_].url&&m.includes(o[_].url)&&r.push(new Ne(l,o,`all the sprites' URLs must be unique, but ${o[_].url} is duplicated`)),m.push(o[_].url),r=r.concat(Jn({key:`${l}[${_}]`,value:o[_],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:i.validateSpec}));return r}return Po({key:l,value:o})}const Tc={"*":()=>[],array:Ml,boolean:function(i){const r=i.value,o=i.key,l=jt(r);return l!=="boolean"?[new Ne(o,r,`boolean expected, ${l} found`)]:[]},number:yc,color:function(i){const r=i.key,o=i.value,l=jt(o);return l!=="string"?[new Ne(r,o,`color expected, ${l} found`)]:Kt.parse(String(o))?[]:[new Ne(r,o,`color expected, "${o}" found`)]},constants:Al,enum:Pa,filter:Ll,function:zl,layer:Td,object:Jn,source:wc,light:bc,sky:Sc,terrain:Ed,projection:function(i){const r=i.value,o=i.styleSpec,l=o.projection,p=i.style,m=jt(r);if(r===void 0)return[];if(m!=="object")return[new Ne("projection",r,`object expected, ${m} found`)];let _=[];for(const w in r)_=_.concat(l[w]?i.validateSpec({key:w,value:r[w],valueSpec:l[w],style:p,styleSpec:o}):[new Ne(w,r[w],`unknown property "${w}"`)]);return _},string:Po,formatted:function(i){return Po(i).length===0?[]:po(i)},resolvedImage:function(i){return Po(i).length===0?[]:po(i)},padding:function(i){const r=i.key,o=i.value;if(jt(o)==="array"){if(o.length<1||o.length>4)return[new Ne(r,o,`padding requires 1 to 4 values; ${o.length} values found`)];const l={type:"number"};let p=[];for(let m=0;m<o.length;m++)p=p.concat(i.validateSpec({key:`${r}[${m}]`,value:o[m],validateSpec:i.validateSpec,valueSpec:l}));return p}return yc({key:r,value:o,valueSpec:{}})},variableAnchorOffsetCollection:function(i){const r=i.key,o=i.value,l=jt(o),p=i.styleSpec;if(l!=="array"||o.length<1||o.length%2!=0)return[new Ne(r,o,"variableAnchorOffsetCollection requires a non-empty array of even length")];let m=[];for(let _=0;_<o.length;_+=2)m=m.concat(Pa({key:`${r}[${_}]`,value:o[_],valueSpec:p.layout_symbol["text-anchor"]})),m=m.concat(Ml({key:`${r}[${_+1}]`,value:o[_+1],valueSpec:{length:2,value:"number"},validateSpec:i.validateSpec,style:i.style,styleSpec:p}));return m},sprite:Cd};function Ia(i){const r=i.value,o=i.valueSpec,l=i.styleSpec;return i.validateSpec=Ia,o.expression&&ka(vr(r))?zl(i):o.expression&&El(ho(r))?po(i):o.type&&Tc[o.type]?Tc[o.type](i):Jn(sn({},i,{valueSpec:o.type?l[o.type]:o}))}function kc(i){const r=i.value,o=i.key,l=Po(i);return l.length||(r.indexOf("{fontstack}")===-1&&l.push(new Ne(o,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&l.push(new Ne(o,r,'"glyphs" url must include a "{range}" token'))),l}function di(i,r=be){let o=[];return o=o.concat(Ia({key:"",value:i,valueSpec:r.$root,styleSpec:r,style:i,validateSpec:Ia,objectElementValidators:{glyphs:kc,"*":()=>[]}})),i.constants&&(o=o.concat(Al({key:"constants",value:i.constants,style:i,styleSpec:r,validateSpec:Ia}))),Pd(o)}function Qn(i){return function(r){return i({...r,validateSpec:Ia})}}function Pd(i){return[].concat(i).sort((r,o)=>r.line-o.line)}function pi(i){return function(...r){return Pd(i.apply(this,r))}}di.source=pi(Qn(wc)),di.sprite=pi(Qn(Cd)),di.glyphs=pi(Qn(kc)),di.light=pi(Qn(bc)),di.sky=pi(Qn(Sc)),di.terrain=pi(Qn(Ed)),di.layer=pi(Qn(Td)),di.filter=pi(Qn(Ll)),di.paintProperty=pi(Qn(Rl)),di.layoutProperty=pi(Qn(xc));const Ms=di,Em=Ms.light,Id=Ms.paintProperty,Ad=Ms.layoutProperty;function Ec(i,r){let o=!1;if(r&&r.length)for(const l of r)i.fire(new pr(new Error(l.message))),o=!0;return o}class zs{constructor(r,o,l){const p=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const _=new Int32Array(this.arrayBuffer);r=_[0],this.d=(o=_[1])+2*(l=_[2]);for(let S=0;S<this.d*this.d;S++){const E=_[3+S],C=_[3+S+1];p.push(E===C?null:_.subarray(E,C))}const w=_[3+p.length+1];this.keys=_.subarray(_[3+p.length],w),this.bboxes=_.subarray(w),this.insert=this._insertReadonly}else{this.d=o+2*l;for(let _=0;_<this.d*this.d;_++)p.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=r,this.padding=l,this.scale=o/r,this.uid=0;const m=l/o*r;this.min=-m,this.max=r+m}insert(r,o,l,p,m){this._forEachCell(o,l,p,m,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(o),this.bboxes.push(l),this.bboxes.push(p),this.bboxes.push(m)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,o,l,p,m,_){this.cells[m].push(_)}query(r,o,l,p,m){const _=this.min,w=this.max;if(r<=_&&o<=_&&w<=l&&w<=p&&!m)return Array.prototype.slice.call(this.keys);{const S=[];return this._forEachCell(r,o,l,p,this._queryCell,S,{},m),S}}_queryCell(r,o,l,p,m,_,w,S){const E=this.cells[m];if(E!==null){const C=this.keys,A=this.bboxes;for(let L=0;L<E.length;L++){const N=E[L];if(w[N]===void 0){const V=4*N;(S?S(A[V+0],A[V+1],A[V+2],A[V+3]):r<=A[V+2]&&o<=A[V+3]&&l>=A[V+0]&&p>=A[V+1])?(w[N]=!0,_.push(C[N])):w[N]=!1}}}}_forEachCell(r,o,l,p,m,_,w,S){const E=this._convertToCellCoord(r),C=this._convertToCellCoord(o),A=this._convertToCellCoord(l),L=this._convertToCellCoord(p);for(let N=E;N<=A;N++)for(let V=C;V<=L;V++){const H=this.d*V+N;if((!S||S(this._convertFromCellCoord(N),this._convertFromCellCoord(V),this._convertFromCellCoord(N+1),this._convertFromCellCoord(V+1)))&&m.call(this,r,o,l,p,H,_,w,S))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,o=3+this.cells.length+1+1;let l=0;for(let _=0;_<this.cells.length;_++)l+=this.cells[_].length;const p=new Int32Array(o+l+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let m=o;for(let _=0;_<r.length;_++){const w=r[_];p[3+_]=m,p.set(w,m),m+=w.length}return p[3+r.length]=m,p.set(this.keys,m),m+=this.keys.length,p[3+r.length+1]=m,p.set(this.bboxes,m),m+=this.bboxes.length,p.buffer}static serialize(r,o){const l=r.toArrayBuffer();return o&&o.push(l),{buffer:l}}static deserialize(r){return new zs(r.buffer)}}const Io={};function et(i,r,o={}){if(Io[i])throw new Error(`${i} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:i,writeable:!1}),Io[i]={klass:r,omit:o.omit||[],shallow:o.shallow||[]}}et("Object",Object),et("TransferableGridIndex",zs),et("Color",Kt),et("Error",Error),et("AJAXError",Gr),et("ResolvedImage",hi),et("StylePropertyFunction",Jo),et("StyleExpression",pc,{omit:["_evaluator"]}),et("ZoomDependentExpression",mc),et("ZoomConstantExpression",fc),et("CompoundExpression",On,{omit:["_evaluate"]});for(const i in Ko)Ko[i]._classRegistryKey||et(`Expression_${i}`,Ko[i]);function Md(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function Ls(i,r){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob||i instanceof Error)return i;if(Md(i)||ar(i))return r&&r.push(i),i;if(ArrayBuffer.isView(i)){const o=i;return r&&r.push(o.buffer),o}if(i instanceof ImageData)return r&&r.push(i.data.buffer),i;if(Array.isArray(i)){const o=[];for(const l of i)o.push(Ls(l,r));return o}if(typeof i=="object"){const o=i.constructor,l=o._classRegistryKey;if(!l)throw new Error(`can't serialize object of unregistered class ${o.name}`);if(!Io[l])throw new Error(`${l} is not registered.`);const p=o.serialize?o.serialize(i,r):{};if(o.serialize){if(r&&p===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const m in i){if(!i.hasOwnProperty(m)||Io[l].omit.indexOf(m)>=0)continue;const _=i[m];p[m]=Io[l].shallow.indexOf(m)>=0?_:Ls(_,r)}i instanceof Error&&(p.message=i.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(p.$name=l),p}throw new Error("can't serialize object of type "+typeof i)}function qi(i){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob||i instanceof Error||Md(i)||ar(i)||ArrayBuffer.isView(i)||i instanceof ImageData)return i;if(Array.isArray(i))return i.map(qi);if(typeof i=="object"){const r=i.$name||"Object";if(!Io[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:o}=Io[r];if(!o)throw new Error(`can't deserialize unregistered class ${r}`);if(o.deserialize)return o.deserialize(i);const l=Object.create(o.prototype);for(const p of Object.keys(i)){if(p==="$name")continue;const m=i[p];l[p]=Io[r].shallow.indexOf(p)>=0?m:qi(m)}return l}throw new Error("can't deserialize object of type "+typeof i)}class zd{constructor(){this.first=!0}update(r,o){const l=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=l,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=l,!0):(this.lastFloorZoom>l?(this.lastIntegerZoom=l+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<l&&(this.lastIntegerZoom=l,this.lastIntegerZoomTime=o),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=l,!0))}}const Ke={"Latin-1 Supplement":i=>i>=128&&i<=255,Arabic:i=>i>=1536&&i<=1791,"Arabic Supplement":i=>i>=1872&&i<=1919,"Arabic Extended-A":i=>i>=2208&&i<=2303,"Hangul Jamo":i=>i>=4352&&i<=4607,"Unified Canadian Aboriginal Syllabics":i=>i>=5120&&i<=5759,Khmer:i=>i>=6016&&i<=6143,"Unified Canadian Aboriginal Syllabics Extended":i=>i>=6320&&i<=6399,"General Punctuation":i=>i>=8192&&i<=8303,"Letterlike Symbols":i=>i>=8448&&i<=8527,"Number Forms":i=>i>=8528&&i<=8591,"Miscellaneous Technical":i=>i>=8960&&i<=9215,"Control Pictures":i=>i>=9216&&i<=9279,"Optical Character Recognition":i=>i>=9280&&i<=9311,"Enclosed Alphanumerics":i=>i>=9312&&i<=9471,"Geometric Shapes":i=>i>=9632&&i<=9727,"Miscellaneous Symbols":i=>i>=9728&&i<=9983,"Miscellaneous Symbols and Arrows":i=>i>=11008&&i<=11263,"CJK Radicals Supplement":i=>i>=11904&&i<=12031,"Kangxi Radicals":i=>i>=12032&&i<=12255,"Ideographic Description Characters":i=>i>=12272&&i<=12287,"CJK Symbols and Punctuation":i=>i>=12288&&i<=12351,Hiragana:i=>i>=12352&&i<=12447,Katakana:i=>i>=12448&&i<=12543,Bopomofo:i=>i>=12544&&i<=12591,"Hangul Compatibility Jamo":i=>i>=12592&&i<=12687,Kanbun:i=>i>=12688&&i<=12703,"Bopomofo Extended":i=>i>=12704&&i<=12735,"CJK Strokes":i=>i>=12736&&i<=12783,"Katakana Phonetic Extensions":i=>i>=12784&&i<=12799,"Enclosed CJK Letters and Months":i=>i>=12800&&i<=13055,"CJK Compatibility":i=>i>=13056&&i<=13311,"CJK Unified Ideographs Extension A":i=>i>=13312&&i<=19903,"Yijing Hexagram Symbols":i=>i>=19904&&i<=19967,"CJK Unified Ideographs":i=>i>=19968&&i<=40959,"Yi Syllables":i=>i>=40960&&i<=42127,"Yi Radicals":i=>i>=42128&&i<=42191,"Hangul Jamo Extended-A":i=>i>=43360&&i<=43391,"Hangul Syllables":i=>i>=44032&&i<=55215,"Hangul Jamo Extended-B":i=>i>=55216&&i<=55295,"Private Use Area":i=>i>=57344&&i<=63743,"CJK Compatibility Ideographs":i=>i>=63744&&i<=64255,"Arabic Presentation Forms-A":i=>i>=64336&&i<=65023,"Vertical Forms":i=>i>=65040&&i<=65055,"CJK Compatibility Forms":i=>i>=65072&&i<=65103,"Small Form Variants":i=>i>=65104&&i<=65135,"Arabic Presentation Forms-B":i=>i>=65136&&i<=65279,"Halfwidth and Fullwidth Forms":i=>i>=65280&&i<=65519};function Cc(i){for(const r of i)if(Pc(r.charCodeAt(0)))return!0;return!1}function Cm(i){for(const r of i)if(!Ld(r.charCodeAt(0)))return!1;return!0}function Ld(i){return!(Ke.Arabic(i)||Ke["Arabic Supplement"](i)||Ke["Arabic Extended-A"](i)||Ke["Arabic Presentation Forms-A"](i)||Ke["Arabic Presentation Forms-B"](i))}function Pc(i){return!(i!==746&&i!==747&&(i<4352||!(Ke["Bopomofo Extended"](i)||Ke.Bopomofo(i)||Ke["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||Ke["CJK Compatibility Ideographs"](i)||Ke["CJK Compatibility"](i)||Ke["CJK Radicals Supplement"](i)||Ke["CJK Strokes"](i)||!(!Ke["CJK Symbols and Punctuation"](i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||Ke["CJK Unified Ideographs Extension A"](i)||Ke["CJK Unified Ideographs"](i)||Ke["Enclosed CJK Letters and Months"](i)||Ke["Hangul Compatibility Jamo"](i)||Ke["Hangul Jamo Extended-A"](i)||Ke["Hangul Jamo Extended-B"](i)||Ke["Hangul Jamo"](i)||Ke["Hangul Syllables"](i)||Ke.Hiragana(i)||Ke["Ideographic Description Characters"](i)||Ke.Kanbun(i)||Ke["Kangxi Radicals"](i)||Ke["Katakana Phonetic Extensions"](i)||Ke.Katakana(i)&&i!==12540||!(!Ke["Halfwidth and Fullwidth Forms"](i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!Ke["Small Form Variants"](i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||Ke["Unified Canadian Aboriginal Syllabics"](i)||Ke["Unified Canadian Aboriginal Syllabics Extended"](i)||Ke["Vertical Forms"](i)||Ke["Yijing Hexagram Symbols"](i)||Ke["Yi Syllables"](i)||Ke["Yi Radicals"](i))))}function Rd(i){return!(Pc(i)||function(r){return!!(Ke["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Ke["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Ke["Letterlike Symbols"](r)||Ke["Number Forms"](r)||Ke["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Ke["Control Pictures"](r)&&r!==9251||Ke["Optical Character Recognition"](r)||Ke["Enclosed Alphanumerics"](r)||Ke["Geometric Shapes"](r)||Ke["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Ke["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Ke["CJK Symbols and Punctuation"](r)||Ke.Katakana(r)||Ke["Private Use Area"](r)||Ke["CJK Compatibility Forms"](r)||Ke["Small Form Variants"](r)||Ke["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(i))}function Ao(i){return i>=1424&&i<=2303||Ke["Arabic Presentation Forms-A"](i)||Ke["Arabic Presentation Forms-B"](i)}function Dd(i,r){return!(!r&&Ao(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||Ke.Khmer(i))}function Ic(i){for(const r of i)if(Ao(r.charCodeAt(0)))return!0;return!1}const Mo=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(i){this.pluginStatus=i.pluginStatus,this.pluginURL=i.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(i){this.applyArabicShaping=i.applyArabicShaping,this.processBidirectionalText=i.processBidirectionalText,this.processStyledBidirectionalText=i.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class rr{constructor(r,o){this.zoom=r,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new zd,this.transition={})}isSupportedScript(r){return function(o,l){for(const p of o)if(!Dd(p.charCodeAt(0),l))return!1;return!0}(r,Mo.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,o=r-Math.floor(r),l=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*l}:{fromScale:.5,toScale:1,t:1-(1-l)*o}}}class Dl{constructor(r,o){this.property=r,this.value=o,this.expression=function(l,p){if(ka(l))return new Jo(l,p);if(El(l)){const m=Ps(l,p);if(m.result==="error")throw new Error(m.value.map(_=>`${_.key}: ${_.message}`).join(", "));return m.value}{let m=l;return p.type==="color"&&typeof l=="string"?m=Kt.parse(l):p.type!=="padding"||typeof l!="number"&&!Array.isArray(l)?p.type==="variableAnchorOffsetCollection"&&Array.isArray(l)&&(m=Dn.parse(l)):m=Rn.parse(l),{kind:"constant",evaluate:()=>m}}}(o===void 0?r.specification.default:o,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,o,l){return this.property.possiblyEvaluate(this,r,o,l)}}class Aa{constructor(r){this.property=r,this.value=new Dl(r,void 0)}transitioned(r,o){return new Od(this.property,this.value,o,Le({},r.transition,this.transition),r.now)}untransitioned(){return new Od(this.property,this.value,null,{},0)}}class Ma{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return $e(this._values[r].value.value)}setValue(r,o){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Aa(this._values[r].property)),this._values[r].value=new Dl(this._values[r].property,o===null?void 0:$e(o))}getTransition(r){return $e(this._values[r].transition)}setTransition(r,o){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Aa(this._values[r].property)),this._values[r].transition=$e(o)||void 0}serialize(){const r={};for(const o of Object.keys(this._values)){const l=this.getValue(o);l!==void 0&&(r[o]=l);const p=this.getTransition(o);p!==void 0&&(r[`${o}-transition`]=p)}return r}transitioned(r,o){const l=new Ac(this._properties);for(const p of Object.keys(this._values))l._values[p]=this._values[p].transitioned(r,o._values[p]);return l}untransitioned(){const r=new Ac(this._properties);for(const o of Object.keys(this._values))r._values[o]=this._values[o].untransitioned();return r}}class Od{constructor(r,o,l,p,m){this.property=r,this.value=o,this.begin=m+p.delay||0,this.end=this.begin+p.duration||0,r.specification.transition&&(p.delay||p.duration)&&(this.prior=l)}possiblyEvaluate(r,o,l){const p=r.now||0,m=this.value.possiblyEvaluate(r,o,l),_=this.prior;if(_){if(p>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(p<this.begin)return _.possiblyEvaluate(r,o,l);{const w=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(r,o,l),m,function(S){if(S<=0)return 0;if(S>=1)return 1;const E=S*S,C=E*S;return 4*(S<.5?C:3*(S-E)+C-.75)}(w))}}return m}}class Ac{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,o,l){const p=new Ol(this._properties);for(const m of Object.keys(this._values))p._values[m]=this._values[m].possiblyEvaluate(r,o,l);return p}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class Rs{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return $e(this._values[r].value)}setValue(r,o){this._values[r]=new Dl(this._values[r].property,o===null?void 0:$e(o))}serialize(){const r={};for(const o of Object.keys(this._values)){const l=this.getValue(o);l!==void 0&&(r[o]=l)}return r}possiblyEvaluate(r,o,l){const p=new Ol(this._properties);for(const m of Object.keys(this._values))p._values[m]=this._values[m].possiblyEvaluate(r,o,l);return p}}class Zi{constructor(r,o,l){this.property=r,this.value=o,this.parameters=l}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,o,l,p){return this.property.evaluate(this.value,this.parameters,r,o,l,p)}}class Ol{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class lt{constructor(r){this.specification=r}possiblyEvaluate(r,o){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(o)}interpolate(r,o,l){const p=Sn[this.specification.type];return p?p(r,o,l):r}}class gt{constructor(r,o){this.specification=r,this.overrides=o}possiblyEvaluate(r,o,l,p){return new Zi(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(o,null,{},l,p)}:r.expression,o)}interpolate(r,o,l){if(r.value.kind!=="constant"||o.value.kind!=="constant")return r;if(r.value.value===void 0||o.value.value===void 0)return new Zi(this,{kind:"constant",value:void 0},r.parameters);const p=Sn[this.specification.type];if(p){const m=p(r.value.value,o.value.value,l);return new Zi(this,{kind:"constant",value:m},r.parameters)}return r}evaluate(r,o,l,p,m,_){return r.kind==="constant"?r.value:r.evaluate(o,l,p,m,_)}}class g extends gt{possiblyEvaluate(r,o,l,p){if(r.value===void 0)return new Zi(this,{kind:"constant",value:void 0},o);if(r.expression.kind==="constant"){const m=r.expression.evaluate(o,null,{},l,p),_=r.property.specification.type==="resolvedImage"&&typeof m!="string"?m.name:m,w=this._calculate(_,_,_,o);return new Zi(this,{kind:"constant",value:w},o)}if(r.expression.kind==="camera"){const m=this._calculate(r.expression.evaluate({zoom:o.zoom-1}),r.expression.evaluate({zoom:o.zoom}),r.expression.evaluate({zoom:o.zoom+1}),o);return new Zi(this,{kind:"constant",value:m},o)}return new Zi(this,r.expression,o)}evaluate(r,o,l,p,m,_){if(r.kind==="source"){const w=r.evaluate(o,l,p,m,_);return this._calculate(w,w,w,o)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(o.zoom)-1},l,p),r.evaluate({zoom:Math.floor(o.zoom)},l,p),r.evaluate({zoom:Math.floor(o.zoom)+1},l,p),o):r.value}_calculate(r,o,l,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:r,to:o}:{from:l,to:o}}interpolate(r){return r}}class n{constructor(r){this.specification=r}possiblyEvaluate(r,o,l,p){if(r.value!==void 0){if(r.expression.kind==="constant"){const m=r.expression.evaluate(o,null,{},l,p);return this._calculate(m,m,m,o)}return this._calculate(r.expression.evaluate(new rr(Math.floor(o.zoom-1),o)),r.expression.evaluate(new rr(Math.floor(o.zoom),o)),r.expression.evaluate(new rr(Math.floor(o.zoom+1),o)),o)}}_calculate(r,o,l,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:r,to:o}:{from:l,to:o}}interpolate(r){return r}}class s{constructor(r){this.specification=r}possiblyEvaluate(r,o,l,p){return!!r.expression.evaluate(o,null,{},l,p)}interpolate(){return!1}}class d{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in r){const l=r[o];l.specification.overridable&&this.overridableProperties.push(o);const p=this.defaultPropertyValues[o]=new Dl(l,void 0),m=this.defaultTransitionablePropertyValues[o]=new Aa(l);this.defaultTransitioningPropertyValues[o]=m.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=p.possiblyEvaluate({})}}}et("DataDrivenProperty",gt),et("DataConstantProperty",lt),et("CrossFadedDataDrivenProperty",g),et("CrossFadedProperty",n),et("ColorRampProperty",s);const f="-transition";class y extends oo{constructor(r,o){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),o.layout&&(this._unevaluatedLayout=new Rs(o.layout)),o.paint)){this._transitionablePaint=new Ma(o.paint);for(const l in r.paint)this.setPaintProperty(l,r.paint[l],{validate:!1});for(const l in r.layout)this.setLayoutProperty(l,r.layout[l],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ol(o.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,o,l={}){o!=null&&this._validate(Ad,`layers.${this.id}.layout.${r}`,r,o,l)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,o):this.visibility=o)}getPaintProperty(r){return r.endsWith(f)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,o,l={}){if(o!=null&&this._validate(Id,`layers.${this.id}.paint.${r}`,r,o,l))return!1;if(r.endsWith(f))return this._transitionablePaint.setTransition(r.slice(0,-11),o||void 0),!1;{const p=this._transitionablePaint._values[r],m=p.property.specification["property-type"]==="cross-faded-data-driven",_=p.value.isDataDriven(),w=p.value;this._transitionablePaint.setValue(r,o),this._handleSpecialPaintPropertyUpdate(r);const S=this._transitionablePaint._values[r].value;return S.isDataDriven()||_||m||this._handleOverridablePaintPropertyUpdate(r,w,S)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,o,l){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,o){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,o)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),Me(r,(o,l)=>!(o===void 0||l==="layout"&&!Object.keys(o).length||l==="paint"&&!Object.keys(o).length))}_validate(r,o,l,p,m={}){return(!m||m.validate!==!1)&&Ec(this,r.call(Ms,{key:o,layerType:this.type,objectKey:l,value:p,styleSpec:be,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const o=this.paint.get(r);if(o instanceof Zi&&co(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}const b={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class T{constructor(r,o){this._structArray=r,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class k{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,o){return r._trim(),o&&(r.isTransferred=!0,o.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const o=Object.create(this.prototype);return o.arrayBuffer=r.arrayBuffer,o.length=r.length,o.capacity=r.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function P(i,r=1){let o=0,l=0;return{members:i.map(p=>{const m=b[p.type].BYTES_PER_ELEMENT,_=o=z(o,Math.max(r,m)),w=p.components||1;return l=Math.max(l,m),o+=m*w,{name:p.name,type:p.type,components:w,offset:_}}),size:z(o,Math.max(l,r)),alignment:r}}function z(i,r){return Math.ceil(i/r)*r}class M extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o){const l=this.length;return this.resize(l+1),this.emplace(l,r,o)}emplace(r,o,l){const p=2*r;return this.int16[p+0]=o,this.int16[p+1]=l,r}}M.prototype.bytesPerElement=4,et("StructArrayLayout2i4",M);class U extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,l){const p=this.length;return this.resize(p+1),this.emplace(p,r,o,l)}emplace(r,o,l,p){const m=3*r;return this.int16[m+0]=o,this.int16[m+1]=l,this.int16[m+2]=p,r}}U.prototype.bytesPerElement=6,et("StructArrayLayout3i6",U);class $ extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,l,p){const m=this.length;return this.resize(m+1),this.emplace(m,r,o,l,p)}emplace(r,o,l,p,m){const _=4*r;return this.int16[_+0]=o,this.int16[_+1]=l,this.int16[_+2]=p,this.int16[_+3]=m,r}}$.prototype.bytesPerElement=8,et("StructArrayLayout4i8",$);class G extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,l,p,m,_){const w=this.length;return this.resize(w+1),this.emplace(w,r,o,l,p,m,_)}emplace(r,o,l,p,m,_,w){const S=6*r;return this.int16[S+0]=o,this.int16[S+1]=l,this.int16[S+2]=p,this.int16[S+3]=m,this.int16[S+4]=_,this.int16[S+5]=w,r}}G.prototype.bytesPerElement=12,et("StructArrayLayout2i4i12",G);class Q extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,l,p,m,_){const w=this.length;return this.resize(w+1),this.emplace(w,r,o,l,p,m,_)}emplace(r,o,l,p,m,_,w){const S=4*r,E=8*r;return this.int16[S+0]=o,this.int16[S+1]=l,this.uint8[E+4]=p,this.uint8[E+5]=m,this.uint8[E+6]=_,this.uint8[E+7]=w,r}}Q.prototype.bytesPerElement=8,et("StructArrayLayout2i4ub8",Q);class K extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o){const l=this.length;return this.resize(l+1),this.emplace(l,r,o)}emplace(r,o,l){const p=2*r;return this.float32[p+0]=o,this.float32[p+1]=l,r}}K.prototype.bytesPerElement=8,et("StructArrayLayout2f8",K);class ne extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,l,p,m,_,w,S,E,C){const A=this.length;return this.resize(A+1),this.emplace(A,r,o,l,p,m,_,w,S,E,C)}emplace(r,o,l,p,m,_,w,S,E,C,A){const L=10*r;return this.uint16[L+0]=o,this.uint16[L+1]=l,this.uint16[L+2]=p,this.uint16[L+3]=m,this.uint16[L+4]=_,this.uint16[L+5]=w,this.uint16[L+6]=S,this.uint16[L+7]=E,this.uint16[L+8]=C,this.uint16[L+9]=A,r}}ne.prototype.bytesPerElement=20,et("StructArrayLayout10ui20",ne);class se extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,l,p,m,_,w,S,E,C,A,L){const N=this.length;return this.resize(N+1),this.emplace(N,r,o,l,p,m,_,w,S,E,C,A,L)}emplace(r,o,l,p,m,_,w,S,E,C,A,L,N){const V=12*r;return this.int16[V+0]=o,this.int16[V+1]=l,this.int16[V+2]=p,this.int16[V+3]=m,this.uint16[V+4]=_,this.uint16[V+5]=w,this.uint16[V+6]=S,this.uint16[V+7]=E,this.int16[V+8]=C,this.int16[V+9]=A,this.int16[V+10]=L,this.int16[V+11]=N,r}}se.prototype.bytesPerElement=24,et("StructArrayLayout4i4ui4i24",se);class J extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,l){const p=this.length;return this.resize(p+1),this.emplace(p,r,o,l)}emplace(r,o,l,p){const m=3*r;return this.float32[m+0]=o,this.float32[m+1]=l,this.float32[m+2]=p,r}}J.prototype.bytesPerElement=12,et("StructArrayLayout3f12",J);class ce extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const o=this.length;return this.resize(o+1),this.emplace(o,r)}emplace(r,o){return this.uint32[1*r+0]=o,r}}ce.prototype.bytesPerElement=4,et("StructArrayLayout1ul4",ce);class me extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,l,p,m,_,w,S,E){const C=this.length;return this.resize(C+1),this.emplace(C,r,o,l,p,m,_,w,S,E)}emplace(r,o,l,p,m,_,w,S,E,C){const A=10*r,L=5*r;return this.int16[A+0]=o,this.int16[A+1]=l,this.int16[A+2]=p,this.int16[A+3]=m,this.int16[A+4]=_,this.int16[A+5]=w,this.uint32[L+3]=S,this.uint16[A+8]=E,this.uint16[A+9]=C,r}}me.prototype.bytesPerElement=20,et("StructArrayLayout6i1ul2ui20",me);class ve extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,l,p,m,_){const w=this.length;return this.resize(w+1),this.emplace(w,r,o,l,p,m,_)}emplace(r,o,l,p,m,_,w){const S=6*r;return this.int16[S+0]=o,this.int16[S+1]=l,this.int16[S+2]=p,this.int16[S+3]=m,this.int16[S+4]=_,this.int16[S+5]=w,r}}ve.prototype.bytesPerElement=12,et("StructArrayLayout2i2i2i12",ve);class Pe extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,l,p,m){const _=this.length;return this.resize(_+1),this.emplace(_,r,o,l,p,m)}emplace(r,o,l,p,m,_){const w=4*r,S=8*r;return this.float32[w+0]=o,this.float32[w+1]=l,this.float32[w+2]=p,this.int16[S+6]=m,this.int16[S+7]=_,r}}Pe.prototype.bytesPerElement=16,et("StructArrayLayout2f1f2i16",Pe);class De extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,l,p,m,_){const w=this.length;return this.resize(w+1),this.emplace(w,r,o,l,p,m,_)}emplace(r,o,l,p,m,_,w){const S=16*r,E=4*r,C=8*r;return this.uint8[S+0]=o,this.uint8[S+1]=l,this.float32[E+1]=p,this.float32[E+2]=m,this.int16[C+6]=_,this.int16[C+7]=w,r}}De.prototype.bytesPerElement=16,et("StructArrayLayout2ub2f2i16",De);class Xe extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,l){const p=this.length;return this.resize(p+1),this.emplace(p,r,o,l)}emplace(r,o,l,p){const m=3*r;return this.uint16[m+0]=o,this.uint16[m+1]=l,this.uint16[m+2]=p,r}}Xe.prototype.bytesPerElement=6,et("StructArrayLayout3ui6",Xe);class Je extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,l,p,m,_,w,S,E,C,A,L,N,V,H,X,re){const fe=this.length;return this.resize(fe+1),this.emplace(fe,r,o,l,p,m,_,w,S,E,C,A,L,N,V,H,X,re)}emplace(r,o,l,p,m,_,w,S,E,C,A,L,N,V,H,X,re,fe){const oe=24*r,he=12*r,xe=48*r;return this.int16[oe+0]=o,this.int16[oe+1]=l,this.uint16[oe+2]=p,this.uint16[oe+3]=m,this.uint32[he+2]=_,this.uint32[he+3]=w,this.uint32[he+4]=S,this.uint16[oe+10]=E,this.uint16[oe+11]=C,this.uint16[oe+12]=A,this.float32[he+7]=L,this.float32[he+8]=N,this.uint8[xe+36]=V,this.uint8[xe+37]=H,this.uint8[xe+38]=X,this.uint32[he+10]=re,this.int16[oe+22]=fe,r}}Je.prototype.bytesPerElement=48,et("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Je);class Oe extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,l,p,m,_,w,S,E,C,A,L,N,V,H,X,re,fe,oe,he,xe,ze,We,pt,Ze,He,at,rt){const Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,r,o,l,p,m,_,w,S,E,C,A,L,N,V,H,X,re,fe,oe,he,xe,ze,We,pt,Ze,He,at,rt)}emplace(r,o,l,p,m,_,w,S,E,C,A,L,N,V,H,X,re,fe,oe,he,xe,ze,We,pt,Ze,He,at,rt,Qe){const Ee=32*r,ut=16*r;return this.int16[Ee+0]=o,this.int16[Ee+1]=l,this.int16[Ee+2]=p,this.int16[Ee+3]=m,this.int16[Ee+4]=_,this.int16[Ee+5]=w,this.int16[Ee+6]=S,this.int16[Ee+7]=E,this.uint16[Ee+8]=C,this.uint16[Ee+9]=A,this.uint16[Ee+10]=L,this.uint16[Ee+11]=N,this.uint16[Ee+12]=V,this.uint16[Ee+13]=H,this.uint16[Ee+14]=X,this.uint16[Ee+15]=re,this.uint16[Ee+16]=fe,this.uint16[Ee+17]=oe,this.uint16[Ee+18]=he,this.uint16[Ee+19]=xe,this.uint16[Ee+20]=ze,this.uint16[Ee+21]=We,this.uint16[Ee+22]=pt,this.uint32[ut+12]=Ze,this.float32[ut+13]=He,this.float32[ut+14]=at,this.uint16[Ee+30]=rt,this.uint16[Ee+31]=Qe,r}}Oe.prototype.bytesPerElement=64,et("StructArrayLayout8i15ui1ul2f2ui64",Oe);class je extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const o=this.length;return this.resize(o+1),this.emplace(o,r)}emplace(r,o){return this.float32[1*r+0]=o,r}}je.prototype.bytesPerElement=4,et("StructArrayLayout1f4",je);class nt extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,l){const p=this.length;return this.resize(p+1),this.emplace(p,r,o,l)}emplace(r,o,l,p){const m=3*r;return this.uint16[6*r+0]=o,this.float32[m+1]=l,this.float32[m+2]=p,r}}nt.prototype.bytesPerElement=12,et("StructArrayLayout1ui2f12",nt);class bt extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,l){const p=this.length;return this.resize(p+1),this.emplace(p,r,o,l)}emplace(r,o,l,p){const m=4*r;return this.uint32[2*r+0]=o,this.uint16[m+2]=l,this.uint16[m+3]=p,r}}bt.prototype.bytesPerElement=8,et("StructArrayLayout1ul2ui8",bt);class Ve extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o){const l=this.length;return this.resize(l+1),this.emplace(l,r,o)}emplace(r,o,l){const p=2*r;return this.uint16[p+0]=o,this.uint16[p+1]=l,r}}Ve.prototype.bytesPerElement=4,et("StructArrayLayout2ui4",Ve);class qe extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const o=this.length;return this.resize(o+1),this.emplace(o,r)}emplace(r,o){return this.uint16[1*r+0]=o,r}}qe.prototype.bytesPerElement=2,et("StructArrayLayout1ui2",qe);class _t extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,l,p){const m=this.length;return this.resize(m+1),this.emplace(m,r,o,l,p)}emplace(r,o,l,p,m){const _=4*r;return this.float32[_+0]=o,this.float32[_+1]=l,this.float32[_+2]=p,this.float32[_+3]=m,r}}_t.prototype.bytesPerElement=16,et("StructArrayLayout4f16",_t);class lr extends T{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new D(this.anchorPointX,this.anchorPointY)}}lr.prototype.size=20;class At extends me{get(r){return new lr(this,r)}}et("CollisionBoxArray",At);class Lt extends T{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Lt.prototype.size=48;class ur extends Je{get(r){return new Lt(this,r)}}et("PlacedSymbolArray",ur);class un extends T{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}un.prototype.size=64;class Pi extends Oe{get(r){return new un(this,r)}}et("SymbolInstanceArray",Pi);class cr extends je{getoffsetX(r){return this.float32[1*r+0]}}et("GlyphOffsetArray",cr);class Fn extends U{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}et("SymbolLineVertexArray",Fn);class Tn extends T{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Tn.prototype.size=12;class cn extends nt{get(r){return new Tn(this,r)}}et("TextAnchorOffsetArray",cn);class hn extends T{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}hn.prototype.size=8;class Ii extends bt{get(r){return new hn(this,r)}}et("FeatureIndexArray",Ii);class ta extends M{}class Fl extends M{}class za extends M{}class ra extends G{}class Bl extends Q{}class Mc extends K{}class rn extends ne{}class Ai extends se{}class zo extends J{}class La extends ce{}class dn extends ve{}class pn extends De{}class Yr extends Xe{}class yr extends Ve{}const Ra=P([{name:"a_pos",components:2,type:"Int16"}],4),{members:zc}=Ra;class Wr{constructor(r=[]){this.segments=r}prepareSegment(r,o,l,p){let m=this.segments[this.segments.length-1];return r>Wr.MAX_VERTEX_ARRAY_LENGTH&&it(`Max vertices per segment is ${Wr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!m||m.vertexLength+r>Wr.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==p)&&(m={vertexOffset:o.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0},p!==void 0&&(m.sortKey=p),this.segments.push(m)),m}get(){return this.segments}destroy(){for(const r of this.segments)for(const o in r.vaos)r.vaos[o].destroy()}static simpleSegment(r,o,l,p){return new Wr([{vertexOffset:r,primitiveOffset:o,vertexLength:l,primitiveLength:p,vaos:{},sortKey:0}])}}function Fd(i,r){return 256*(i=Ce(Math.floor(i),0,255))+Ce(Math.floor(r),0,255)}Wr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,et("SegmentVector",Wr);const Nl=P([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var jl={exports:{}},Lo={exports:{}};Lo.exports=function(i,r){var o,l,p,m,_,w,S,E;for(l=i.length-(o=3&i.length),p=r,_=3432918353,w=461845907,E=0;E<l;)S=255&i.charCodeAt(E)|(255&i.charCodeAt(++E))<<8|(255&i.charCodeAt(++E))<<16|(255&i.charCodeAt(++E))<<24,++E,p=27492+(65535&(m=5*(65535&(p=(p^=S=(65535&(S=(S=(65535&S)*_+(((S>>>16)*_&65535)<<16)&4294967295)<<15|S>>>17))*w+(((S>>>16)*w&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(m>>>16)&65535)<<16);switch(S=0,o){case 3:S^=(255&i.charCodeAt(E+2))<<16;case 2:S^=(255&i.charCodeAt(E+1))<<8;case 1:p^=S=(65535&(S=(S=(65535&(S^=255&i.charCodeAt(E)))*_+(((S>>>16)*_&65535)<<16)&4294967295)<<15|S>>>17))*w+(((S>>>16)*w&65535)<<16)&4294967295}return p^=i.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var Bd=Lo.exports,Lc={exports:{}};Lc.exports=function(i,r){for(var o,l=i.length,p=r^l,m=0;l>=4;)o=1540483477*(65535&(o=255&i.charCodeAt(m)|(255&i.charCodeAt(++m))<<8|(255&i.charCodeAt(++m))<<16|(255&i.charCodeAt(++m))<<24))+((1540483477*(o>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),l-=4,++m;switch(l){case 3:p^=(255&i.charCodeAt(m+2))<<16;case 2:p^=(255&i.charCodeAt(m+1))<<8;case 1:p=1540483477*(65535&(p^=255&i.charCodeAt(m)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var Rc=Bd,Dc=Lc.exports;jl.exports=Rc,jl.exports.murmur3=Rc,jl.exports.murmur2=Dc;var Ul=I(jl.exports);class Da{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,o,l,p){this.ids.push(b_(r)),this.positions.push(o,l,p)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const o=b_(r);let l=0,p=this.ids.length-1;for(;l<p;){const _=l+p>>1;this.ids[_]>=o?p=_:l=_+1}const m=[];for(;this.ids[l]===o;)m.push({index:this.positions[3*l],start:this.positions[3*l+1],end:this.positions[3*l+2]}),l++;return m}static serialize(r,o){const l=new Float64Array(r.ids),p=new Uint32Array(r.positions);return Pm(l,p,0,l.length-1),o&&o.push(l.buffer,p.buffer),{ids:l,positions:p}}static deserialize(r){const o=new Da;return o.ids=r.ids,o.positions=r.positions,o.indexed=!0,o}}function b_(i){const r=+i;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:Ul(String(i))}function Pm(i,r,o,l){for(;o<l;){const p=i[o+l>>1];let m=o-1,_=l+1;for(;;){do m++;while(i[m]<p);do _--;while(i[_]>p);if(m>=_)break;Nd(i,m,_),Nd(r,3*m,3*_),Nd(r,3*m+1,3*_+1),Nd(r,3*m+2,3*_+2)}_-o<l-_?(Pm(i,r,o,_),o=_+1):(Pm(i,r,_+1,l),l=_)}}function Nd(i,r,o){const l=i[r];i[r]=i[o],i[o]=l}et("FeaturePositionMap",Da);class Ds{constructor(r,o){this.gl=r.gl,this.location=o}}class jd extends Ds{constructor(r,o){super(r,o),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class S_ extends Ds{constructor(r,o){super(r,o),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class T_ extends Ds{constructor(r,o){super(r,o),this.current=Kt.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const dT=new Float32Array(16);function Im(i){return[Fd(255*i.r,255*i.g),Fd(255*i.b,255*i.a)]}class Oc{constructor(r,o,l){this.value=r,this.uniformNames=o.map(p=>`u_${p}`),this.type=l}setUniform(r,o,l){r.set(l.constantOr(this.value))}getBinding(r,o,l){return this.type==="color"?new T_(r,o):new jd(r,o)}}class Vl{constructor(r,o){this.uniformNames=o.map(l=>`u_${l}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=r.tlbr}setUniform(r,o,l,p){const m=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;m&&r.set(m)}getBinding(r,o,l){return l.substr(0,9)==="u_pattern"?new S_(r,o):new jd(r,o)}}class na{constructor(r,o,l,p){this.expression=r,this.type=l,this.maxValue=0,this.paintVertexAttributes=o.map(m=>({name:`a_${m}`,type:"Float32",components:l==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(r,o,l,p,m){const _=this.paintVertexArray.length,w=this.expression.evaluate(new rr(0),o,{},p,[],m);this.paintVertexArray.resize(r),this._setPaintValue(_,r,w)}updatePaintArray(r,o,l,p){const m=this.expression.evaluate({zoom:0},l,p);this._setPaintValue(r,o,m)}_setPaintValue(r,o,l){if(this.type==="color"){const p=Im(l);for(let m=r;m<o;m++)this.paintVertexArray.emplace(m,p[0],p[1])}else{for(let p=r;p<o;p++)this.paintVertexArray.emplace(p,l);this.maxValue=Math.max(this.maxValue,Math.abs(l))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class fo{constructor(r,o,l,p,m,_){this.expression=r,this.uniformNames=o.map(w=>`u_${w}_t`),this.type=l,this.useIntegerZoom=p,this.zoom=m,this.maxValue=0,this.paintVertexAttributes=o.map(w=>({name:`a_${w}`,type:"Float32",components:l==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(r,o,l,p,m){const _=this.expression.evaluate(new rr(this.zoom),o,{},p,[],m),w=this.expression.evaluate(new rr(this.zoom+1),o,{},p,[],m),S=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(S,r,_,w)}updatePaintArray(r,o,l,p){const m=this.expression.evaluate({zoom:this.zoom},l,p),_=this.expression.evaluate({zoom:this.zoom+1},l,p);this._setPaintValue(r,o,m,_)}_setPaintValue(r,o,l,p){if(this.type==="color"){const m=Im(l),_=Im(p);for(let w=r;w<o;w++)this.paintVertexArray.emplace(w,m[0],m[1],_[0],_[1])}else{for(let m=r;m<o;m++)this.paintVertexArray.emplace(m,l,p);this.maxValue=Math.max(this.maxValue,Math.abs(l),Math.abs(p))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,o){const l=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,p=Ce(this.expression.interpolationFactor(l,this.zoom,this.zoom+1),0,1);r.set(p)}getBinding(r,o,l){return new jd(r,o)}}class Oa{constructor(r,o,l,p,m,_){this.expression=r,this.type=o,this.useIntegerZoom=l,this.zoom=p,this.layerId=_,this.zoomInPaintVertexArray=new m,this.zoomOutPaintVertexArray=new m}populatePaintArray(r,o,l){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(p,r,o.patterns&&o.patterns[this.layerId],l)}updatePaintArray(r,o,l,p,m){this._setPaintValues(r,o,l.patterns&&l.patterns[this.layerId],m)}_setPaintValues(r,o,l,p){if(!p||!l)return;const{min:m,mid:_,max:w}=l,S=p[m],E=p[_],C=p[w];if(S&&E&&C)for(let A=r;A<o;A++)this.zoomInPaintVertexArray.emplace(A,E.tl[0],E.tl[1],E.br[0],E.br[1],S.tl[0],S.tl[1],S.br[0],S.br[1],E.pixelRatio,S.pixelRatio),this.zoomOutPaintVertexArray.emplace(A,E.tl[0],E.tl[1],E.br[0],E.br[1],C.tl[0],C.tl[1],C.br[0],C.br[1],E.pixelRatio,C.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,Nl.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,Nl.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class k_{constructor(r,o,l){this.binders={},this._buffers=[];const p=[];for(const m in r.paint._values){if(!l(m))continue;const _=r.paint.get(m);if(!(_ instanceof Zi&&co(_.property.specification)))continue;const w=pT(m,r.type),S=_.value,E=_.property.specification.type,C=_.property.useIntegerZoom,A=_.property.specification["property-type"],L=A==="cross-faded"||A==="cross-faded-data-driven";if(S.kind==="constant")this.binders[m]=L?new Vl(S.value,w):new Oc(S.value,w,E),p.push(`/u_${m}`);else if(S.kind==="source"||L){const N=E_(m,E,"source");this.binders[m]=L?new Oa(S,E,C,o,N,r.id):new na(S,w,E,N),p.push(`/a_${m}`)}else{const N=E_(m,E,"composite");this.binders[m]=new fo(S,w,E,C,o,N),p.push(`/z_${m}`)}}this.cacheKey=p.sort().join("")}getMaxValue(r){const o=this.binders[r];return o instanceof na||o instanceof fo?o.maxValue:0}populatePaintArrays(r,o,l,p,m){for(const _ in this.binders){const w=this.binders[_];(w instanceof na||w instanceof fo||w instanceof Oa)&&w.populatePaintArray(r,o,l,p,m)}}setConstantPatternPositions(r,o){for(const l in this.binders){const p=this.binders[l];p instanceof Vl&&p.setConstantPatternPositions(r,o)}}updatePaintArrays(r,o,l,p,m){let _=!1;for(const w in r){const S=o.getPositions(w);for(const E of S){const C=l.feature(E.index);for(const A in this.binders){const L=this.binders[A];if((L instanceof na||L instanceof fo||L instanceof Oa)&&L.expression.isStateDependent===!0){const N=p.paint.get(A);L.expression=N.value,L.updatePaintArray(E.start,E.end,C,r[w],m),_=!0}}}}return _}defines(){const r=[];for(const o in this.binders){const l=this.binders[o];(l instanceof Oc||l instanceof Vl)&&r.push(...l.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return r}getBinderAttributes(){const r=[];for(const o in this.binders){const l=this.binders[o];if(l instanceof na||l instanceof fo)for(let p=0;p<l.paintVertexAttributes.length;p++)r.push(l.paintVertexAttributes[p].name);else if(l instanceof Oa)for(let p=0;p<Nl.members.length;p++)r.push(Nl.members[p].name)}return r}getBinderUniforms(){const r=[];for(const o in this.binders){const l=this.binders[o];if(l instanceof Oc||l instanceof Vl||l instanceof fo)for(const p of l.uniformNames)r.push(p)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,o){const l=[];for(const p in this.binders){const m=this.binders[p];if(m instanceof Oc||m instanceof Vl||m instanceof fo){for(const _ of m.uniformNames)if(o[_]){const w=m.getBinding(r,o[_],_);l.push({name:_,property:p,binding:w})}}}return l}setUniforms(r,o,l,p){for(const{name:m,property:_,binding:w}of o)this.binders[_].setUniform(w,p,l.get(_),m)}updatePaintBuffers(r){this._buffers=[];for(const o in this.binders){const l=this.binders[o];if(r&&l instanceof Oa){const p=r.fromScale===2?l.zoomInPaintVertexBuffer:l.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(l instanceof na||l instanceof fo)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(r){for(const o in this.binders){const l=this.binders[o];(l instanceof na||l instanceof fo||l instanceof Oa)&&l.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const o=this.binders[r];(o instanceof na||o instanceof fo||o instanceof Oa)&&o.destroy()}}}class Os{constructor(r,o,l=()=>!0){this.programConfigurations={};for(const p of r)this.programConfigurations[p.id]=new k_(p,o,l);this.needsUpload=!1,this._featureMap=new Da,this._bufferOffset=0}populatePaintArrays(r,o,l,p,m,_){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(r,o,p,m,_);o.id!==void 0&&this._featureMap.add(o.id,l,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,o,l,p){for(const m of l)this.needsUpload=this.programConfigurations[m.id].updatePaintArrays(r,this._featureMap,o,m,p)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function pT(i,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[i]||[i.replace(`${r}-`,"").replace(/-/g,"_")]}function E_(i,r,o){const l={color:{source:K,composite:_t},number:{source:je,composite:K}},p=function(m){return{"line-pattern":{source:rn,composite:rn},"fill-pattern":{source:rn,composite:rn},"fill-extrusion-pattern":{source:rn,composite:rn}}[m]}(i);return p&&p[o]||l[r][o]}et("ConstantBinder",Oc),et("CrossFadedConstantBinder",Vl),et("SourceExpressionBinder",na),et("CrossFadedCompositeBinder",Oa),et("CompositeExpressionBinder",fo),et("ProgramConfiguration",k_,{omit:["_buffers"]}),et("ProgramConfigurationSet",Os);const Br=8192,Am=Math.pow(2,14)-1,C_=-Am-1;function Fs(i){const r=Br/i.extent,o=i.loadGeometry();for(let l=0;l<o.length;l++){const p=o[l];for(let m=0;m<p.length;m++){const _=p[m],w=Math.round(_.x*r),S=Math.round(_.y*r);_.x=Ce(w,C_,Am),_.y=Ce(S,C_,Am),(w<_.x||w>_.x+1||S<_.y||S>_.y+1)&&it("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function Bs(i,r){return{type:i.type,id:i.id,properties:i.properties,geometry:r?Fs(i):[]}}function Ud(i,r,o,l,p){i.emplaceBack(2*r+(l+1)/2,2*o+(p+1)/2)}class Mm{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(o=>o.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Fl,this.indexArray=new Yr,this.segments=new Wr,this.programConfigurations=new Os(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(r,o,l){const p=this.layers[0],m=[];let _=null,w=!1;p.type==="circle"&&(_=p.layout.get("circle-sort-key"),w=!_.isConstant());for(const{feature:S,id:E,index:C,sourceLayerIndex:A}of r){const L=this.layers[0]._featureFilter.needGeometry,N=Bs(S,L);if(!this.layers[0]._featureFilter.filter(new rr(this.zoom),N,l))continue;const V=w?_.evaluate(N,{},l):void 0,H={id:E,properties:S.properties,type:S.type,sourceLayerIndex:A,index:C,geometry:L?N.geometry:Fs(S),patterns:{},sortKey:V};m.push(H)}w&&m.sort((S,E)=>S.sortKey-E.sortKey);for(const S of m){const{geometry:E,index:C,sourceLayerIndex:A}=S,L=r[C].feature;this.addFeature(S,E,C,l),o.featureIndex.insert(L,E,C,A,this.index)}}update(r,o,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,zc),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,o,l,p){for(const m of o)for(const _ of m){const w=_.x,S=_.y;if(w<0||w>=Br||S<0||S>=Br)continue;const E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),C=E.vertexLength;Ud(this.layoutVertexArray,w,S,-1,-1),Ud(this.layoutVertexArray,w,S,1,-1),Ud(this.layoutVertexArray,w,S,1,1),Ud(this.layoutVertexArray,w,S,-1,1),this.indexArray.emplaceBack(C,C+1,C+2),this.indexArray.emplaceBack(C,C+3,C+2),E.vertexLength+=4,E.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,l,{},p)}}function P_(i,r){for(let o=0;o<i.length;o++)if($l(r,i[o]))return!0;for(let o=0;o<r.length;o++)if($l(i,r[o]))return!0;return!!zm(i,r)}function fT(i,r,o){return!!$l(i,r)||!!Lm(r,i,o)}function I_(i,r){if(i.length===1)return M_(r,i[0]);for(let o=0;o<r.length;o++){const l=r[o];for(let p=0;p<l.length;p++)if($l(i,l[p]))return!0}for(let o=0;o<i.length;o++)if(M_(r,i[o]))return!0;for(let o=0;o<r.length;o++)if(zm(i,r[o]))return!0;return!1}function mT(i,r,o){if(i.length>1){if(zm(i,r))return!0;for(let l=0;l<r.length;l++)if(Lm(r[l],i,o))return!0}for(let l=0;l<i.length;l++)if(Lm(i[l],r,o))return!0;return!1}function zm(i,r){if(i.length===0||r.length===0)return!1;for(let o=0;o<i.length-1;o++){const l=i[o],p=i[o+1];for(let m=0;m<r.length-1;m++)if(gT(l,p,r[m],r[m+1]))return!0}return!1}function gT(i,r,o,l){return st(i,o,l)!==st(r,o,l)&&st(i,r,o)!==st(i,r,l)}function Lm(i,r,o){const l=o*o;if(r.length===1)return i.distSqr(r[0])<l;for(let p=1;p<r.length;p++)if(A_(i,r[p-1],r[p])<l)return!0;return!1}function A_(i,r,o){const l=r.distSqr(o);if(l===0)return i.distSqr(r);const p=((i.x-r.x)*(o.x-r.x)+(i.y-r.y)*(o.y-r.y))/l;return i.distSqr(p<0?r:p>1?o:o.sub(r)._mult(p)._add(r))}function M_(i,r){let o,l,p,m=!1;for(let _=0;_<i.length;_++){o=i[_];for(let w=0,S=o.length-1;w<o.length;S=w++)l=o[w],p=o[S],l.y>r.y!=p.y>r.y&&r.x<(p.x-l.x)*(r.y-l.y)/(p.y-l.y)+l.x&&(m=!m)}return m}function $l(i,r){let o=!1;for(let l=0,p=i.length-1;l<i.length;p=l++){const m=i[l],_=i[p];m.y>r.y!=_.y>r.y&&r.x<(_.x-m.x)*(r.y-m.y)/(_.y-m.y)+m.x&&(o=!o)}return o}function yT(i,r,o){const l=o[0],p=o[2];if(i.x<l.x&&r.x<l.x||i.x>p.x&&r.x>p.x||i.y<l.y&&r.y<l.y||i.y>p.y&&r.y>p.y)return!1;const m=st(i,r,o[0]);return m!==st(i,r,o[1])||m!==st(i,r,o[2])||m!==st(i,r,o[3])}function Fc(i,r,o){const l=r.paint.get(i).value;return l.kind==="constant"?l.value:o.programConfigurations.get(r.id).getMaxValue(i)}function Vd(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function $d(i,r,o,l,p){if(!r[0]&&!r[1])return i;const m=D.convert(r)._mult(p);o==="viewport"&&m._rotate(-l);const _=[];for(let w=0;w<i.length;w++)_.push(i[w].sub(m));return _}let z_,L_;et("CircleBucket",Mm,{omit:["layers"]});var _T={get paint(){return L_=L_||new d({"circle-radius":new gt(be.paint_circle["circle-radius"]),"circle-color":new gt(be.paint_circle["circle-color"]),"circle-blur":new gt(be.paint_circle["circle-blur"]),"circle-opacity":new gt(be.paint_circle["circle-opacity"]),"circle-translate":new lt(be.paint_circle["circle-translate"]),"circle-translate-anchor":new lt(be.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new lt(be.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new lt(be.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new gt(be.paint_circle["circle-stroke-width"]),"circle-stroke-color":new gt(be.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new gt(be.paint_circle["circle-stroke-opacity"])})},get layout(){return z_=z_||new d({"circle-sort-key":new gt(be.layout_circle["circle-sort-key"])})}},Bn=1e-6,Hl=typeof Float32Array<"u"?Float32Array:Array;function Rm(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function R_(i,r,o){var l=r[0],p=r[1],m=r[2],_=r[3],w=r[4],S=r[5],E=r[6],C=r[7],A=r[8],L=r[9],N=r[10],V=r[11],H=r[12],X=r[13],re=r[14],fe=r[15],oe=o[0],he=o[1],xe=o[2],ze=o[3];return i[0]=oe*l+he*w+xe*A+ze*H,i[1]=oe*p+he*S+xe*L+ze*X,i[2]=oe*m+he*E+xe*N+ze*re,i[3]=oe*_+he*C+xe*V+ze*fe,i[4]=(oe=o[4])*l+(he=o[5])*w+(xe=o[6])*A+(ze=o[7])*H,i[5]=oe*p+he*S+xe*L+ze*X,i[6]=oe*m+he*E+xe*N+ze*re,i[7]=oe*_+he*C+xe*V+ze*fe,i[8]=(oe=o[8])*l+(he=o[9])*w+(xe=o[10])*A+(ze=o[11])*H,i[9]=oe*p+he*S+xe*L+ze*X,i[10]=oe*m+he*E+xe*N+ze*re,i[11]=oe*_+he*C+xe*V+ze*fe,i[12]=(oe=o[12])*l+(he=o[13])*w+(xe=o[14])*A+(ze=o[15])*H,i[13]=oe*p+he*S+xe*L+ze*X,i[14]=oe*m+he*E+xe*N+ze*re,i[15]=oe*_+he*C+xe*V+ze*fe,i}Math.hypot||(Math.hypot=function(){for(var i=0,r=arguments.length;r--;)i+=arguments[r]*arguments[r];return Math.sqrt(i)});var Bc,vT=R_;function Hd(i,r,o){var l=r[0],p=r[1],m=r[2],_=r[3];return i[0]=o[0]*l+o[4]*p+o[8]*m+o[12]*_,i[1]=o[1]*l+o[5]*p+o[9]*m+o[13]*_,i[2]=o[2]*l+o[6]*p+o[10]*m+o[14]*_,i[3]=o[3]*l+o[7]*p+o[11]*m+o[15]*_,i}Bc=new Hl(4),Hl!=Float32Array&&(Bc[0]=0,Bc[1]=0,Bc[2]=0,Bc[3]=0);class xT extends y{constructor(r){super(r,_T)}createBucket(r){return new Mm(r)}queryRadius(r){const o=r;return Fc("circle-radius",this,o)+Fc("circle-stroke-width",this,o)+Vd(this.paint.get("circle-translate"))}queryIntersectsFeature(r,o,l,p,m,_,w,S){const E=$d(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),_.angle,w),C=this.paint.get("circle-radius").evaluate(o,l)+this.paint.get("circle-stroke-width").evaluate(o,l),A=this.paint.get("circle-pitch-alignment")==="map",L=A?E:function(V,H){return V.map(X=>D_(X,H))}(E,S),N=A?C*w:C;for(const V of p)for(const H of V){const X=A?H:D_(H,S);let re=N;const fe=Hd([],[H.x,H.y,0,1],S);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?re*=fe[3]/_.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(re*=_.cameraToCenterDistance/fe[3]),fT(L,X,re))return!0}return!1}}function D_(i,r){const o=Hd([],[i.x,i.y,0,1],r);return new D(o[0]/o[3],o[1]/o[3])}class O_ extends Mm{}let F_;et("HeatmapBucket",O_,{omit:["layers"]});var wT={get paint(){return F_=F_||new d({"heatmap-radius":new gt(be.paint_heatmap["heatmap-radius"]),"heatmap-weight":new gt(be.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new lt(be.paint_heatmap["heatmap-intensity"]),"heatmap-color":new s(be.paint_heatmap["heatmap-color"]),"heatmap-opacity":new lt(be.paint_heatmap["heatmap-opacity"])})}};function Dm(i,{width:r,height:o},l,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==r*o*l)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${r*o*l}`)}else p=new Uint8Array(r*o*l);return i.width=r,i.height=o,i.data=p,i}function B_(i,{width:r,height:o},l){if(r===i.width&&o===i.height)return;const p=Dm({},{width:r,height:o},l);Om(i,p,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,r),height:Math.min(i.height,o)},l),i.width=r,i.height=o,i.data=p.data}function Om(i,r,o,l,p,m){if(p.width===0||p.height===0)return r;if(p.width>i.width||p.height>i.height||o.x>i.width-p.width||o.y>i.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>r.width||p.height>r.height||l.x>r.width-p.width||l.y>r.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const _=i.data,w=r.data;if(_===w)throw new Error("srcData equals dstData, so image is already copied");for(let S=0;S<p.height;S++){const E=((o.y+S)*i.width+o.x)*m,C=((l.y+S)*r.width+l.x)*m;for(let A=0;A<p.width*m;A++)w[C+A]=_[E+A]}return r}class Nc{constructor(r,o){Dm(this,r,1,o)}resize(r){B_(this,r,1)}clone(){return new Nc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,o,l,p,m){Om(r,o,l,p,m,1)}}class Mi{constructor(r,o){Dm(this,r,4,o)}resize(r){B_(this,r,4)}replace(r,o){o?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new Mi({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,o,l,p,m){Om(r,o,l,p,m,4)}}function N_(i){const r={},o=i.resolution||256,l=i.clips?i.clips.length:1,p=i.image||new Mi({width:o,height:l});if(Math.log(o)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${o}`);const m=(_,w,S)=>{r[i.evaluationKey]=S;const E=i.expression.evaluate(r);p.data[_+w+0]=Math.floor(255*E.r/E.a),p.data[_+w+1]=Math.floor(255*E.g/E.a),p.data[_+w+2]=Math.floor(255*E.b/E.a),p.data[_+w+3]=Math.floor(255*E.a)};if(i.clips)for(let _=0,w=0;_<l;++_,w+=4*o)for(let S=0,E=0;S<o;S++,E+=4){const C=S/(o-1),{start:A,end:L}=i.clips[_];m(w,E,A*(1-C)+L*C)}else for(let _=0,w=0;_<o;_++,w+=4)m(0,w,_/(o-1));return p}et("AlphaImage",Nc),et("RGBAImage",Mi);class bT extends y{createBucket(r){return new O_(r)}constructor(r){super(r,wT),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=N_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let j_;var ST={get paint(){return j_=j_||new d({"hillshade-illumination-direction":new lt(be.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new lt(be.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new lt(be.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new lt(be.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new lt(be.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new lt(be.paint_hillshade["hillshade-accent-color"])})}};class TT extends y{constructor(r){super(r,ST)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const kT=P([{name:"a_pos",components:2,type:"Int16"}],4),{members:ET}=kT;var Fm={exports:{}};function Wd(i,r,o){o=o||2;var l,p,m,_,w,S,E,C=r&&r.length,A=C?r[0]*o:i.length,L=U_(i,0,A,o,!0),N=[];if(!L||L.next===L.prev)return N;if(C&&(L=function(H,X,re,fe){var oe,he,xe,ze=[];for(oe=0,he=X.length;oe<he;oe++)(xe=U_(H,X[oe]*fe,oe<he-1?X[oe+1]*fe:H.length,fe,!1))===xe.next&&(xe.steiner=!0),ze.push(RT(xe));for(ze.sort(MT),oe=0;oe<ze.length;oe++)re=zT(ze[oe],re);return re}(i,r,L,o)),i.length>80*o){l=m=i[0],p=_=i[1];for(var V=o;V<A;V+=o)(w=i[V])<l&&(l=w),(S=i[V+1])<p&&(p=S),w>m&&(m=w),S>_&&(_=S);E=(E=Math.max(m-l,_-p))!==0?32767/E:0}return jc(L,N,o,l,p,E,0),N}function U_(i,r,o,l,p){var m,_;if(p===jm(i,r,o,l)>0)for(m=r;m<o;m+=l)_=H_(m,i[m],i[m+1],_);else for(m=o-l;m>=r;m-=l)_=H_(m,i[m],i[m+1],_);return _&&qd(_,_.next)&&(Vc(_),_=_.next),_}function Ns(i,r){if(!i)return i;r||(r=i);var o,l=i;do if(o=!1,l.steiner||!qd(l,l.next)&&Ar(l.prev,l,l.next)!==0)l=l.next;else{if(Vc(l),(l=r=l.prev)===l.next)break;o=!0}while(o||l!==r);return r}function jc(i,r,o,l,p,m,_){if(i){!_&&m&&function(C,A,L,N){var V=C;do V.z===0&&(V.z=Bm(V.x,V.y,A,L,N)),V.prevZ=V.prev,V.nextZ=V.next,V=V.next;while(V!==C);V.prevZ.nextZ=null,V.prevZ=null,function(H){var X,re,fe,oe,he,xe,ze,We,pt=1;do{for(re=H,H=null,he=null,xe=0;re;){for(xe++,fe=re,ze=0,X=0;X<pt&&(ze++,fe=fe.nextZ);X++);for(We=pt;ze>0||We>0&&fe;)ze!==0&&(We===0||!fe||re.z<=fe.z)?(oe=re,re=re.nextZ,ze--):(oe=fe,fe=fe.nextZ,We--),he?he.nextZ=oe:H=oe,oe.prevZ=he,he=oe;re=fe}he.nextZ=null,pt*=2}while(xe>1)}(V)}(i,l,p,m);for(var w,S,E=i;i.prev!==i.next;)if(w=i.prev,S=i.next,m?PT(i,l,p,m):CT(i))r.push(w.i/o|0),r.push(i.i/o|0),r.push(S.i/o|0),Vc(i),i=S.next,E=S.next;else if((i=S)===E){_?_===1?jc(i=IT(Ns(i),r,o),r,o,l,p,m,2):_===2&&AT(i,r,o,l,p,m):jc(Ns(i),r,o,l,p,m,1);break}}}function CT(i){var r=i.prev,o=i,l=i.next;if(Ar(r,o,l)>=0)return!1;for(var p=r.x,m=o.x,_=l.x,w=r.y,S=o.y,E=l.y,C=p<m?p<_?p:_:m<_?m:_,A=w<S?w<E?w:E:S<E?S:E,L=p>m?p>_?p:_:m>_?m:_,N=w>S?w>E?w:E:S>E?S:E,V=l.next;V!==r;){if(V.x>=C&&V.x<=L&&V.y>=A&&V.y<=N&&Wl(p,w,m,S,_,E,V.x,V.y)&&Ar(V.prev,V,V.next)>=0)return!1;V=V.next}return!0}function PT(i,r,o,l){var p=i.prev,m=i,_=i.next;if(Ar(p,m,_)>=0)return!1;for(var w=p.x,S=m.x,E=_.x,C=p.y,A=m.y,L=_.y,N=w<S?w<E?w:E:S<E?S:E,V=C<A?C<L?C:L:A<L?A:L,H=w>S?w>E?w:E:S>E?S:E,X=C>A?C>L?C:L:A>L?A:L,re=Bm(N,V,r,o,l),fe=Bm(H,X,r,o,l),oe=i.prevZ,he=i.nextZ;oe&&oe.z>=re&&he&&he.z<=fe;){if(oe.x>=N&&oe.x<=H&&oe.y>=V&&oe.y<=X&&oe!==p&&oe!==_&&Wl(w,C,S,A,E,L,oe.x,oe.y)&&Ar(oe.prev,oe,oe.next)>=0||(oe=oe.prevZ,he.x>=N&&he.x<=H&&he.y>=V&&he.y<=X&&he!==p&&he!==_&&Wl(w,C,S,A,E,L,he.x,he.y)&&Ar(he.prev,he,he.next)>=0))return!1;he=he.nextZ}for(;oe&&oe.z>=re;){if(oe.x>=N&&oe.x<=H&&oe.y>=V&&oe.y<=X&&oe!==p&&oe!==_&&Wl(w,C,S,A,E,L,oe.x,oe.y)&&Ar(oe.prev,oe,oe.next)>=0)return!1;oe=oe.prevZ}for(;he&&he.z<=fe;){if(he.x>=N&&he.x<=H&&he.y>=V&&he.y<=X&&he!==p&&he!==_&&Wl(w,C,S,A,E,L,he.x,he.y)&&Ar(he.prev,he,he.next)>=0)return!1;he=he.nextZ}return!0}function IT(i,r,o){var l=i;do{var p=l.prev,m=l.next.next;!qd(p,m)&&V_(p,l,l.next,m)&&Uc(p,m)&&Uc(m,p)&&(r.push(p.i/o|0),r.push(l.i/o|0),r.push(m.i/o|0),Vc(l),Vc(l.next),l=i=m),l=l.next}while(l!==i);return Ns(l)}function AT(i,r,o,l,p,m){var _=i;do{for(var w=_.next.next;w!==_.prev;){if(_.i!==w.i&&DT(_,w)){var S=$_(_,w);return _=Ns(_,_.next),S=Ns(S,S.next),jc(_,r,o,l,p,m,0),void jc(S,r,o,l,p,m,0)}w=w.next}_=_.next}while(_!==i)}function MT(i,r){return i.x-r.x}function zT(i,r){var o=function(p,m){var _,w=m,S=p.x,E=p.y,C=-1/0;do{if(E<=w.y&&E>=w.next.y&&w.next.y!==w.y){var A=w.x+(E-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(A<=S&&A>C&&(C=A,_=w.x<w.next.x?w:w.next,A===S))return _}w=w.next}while(w!==m);if(!_)return null;var L,N=_,V=_.x,H=_.y,X=1/0;w=_;do S>=w.x&&w.x>=V&&S!==w.x&&Wl(E<H?S:C,E,V,H,E<H?C:S,E,w.x,w.y)&&(L=Math.abs(E-w.y)/(S-w.x),Uc(w,p)&&(L<X||L===X&&(w.x>_.x||w.x===_.x&&LT(_,w)))&&(_=w,X=L)),w=w.next;while(w!==N);return _}(i,r);if(!o)return r;var l=$_(o,i);return Ns(l,l.next),Ns(o,o.next)}function LT(i,r){return Ar(i.prev,i,r.prev)<0&&Ar(r.next,i,i.next)<0}function Bm(i,r,o,l,p){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-o)*p|0)|i<<8))|i<<4))|i<<2))|i<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-l)*p|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function RT(i){var r=i,o=i;do(r.x<o.x||r.x===o.x&&r.y<o.y)&&(o=r),r=r.next;while(r!==i);return o}function Wl(i,r,o,l,p,m,_,w){return(p-_)*(r-w)>=(i-_)*(m-w)&&(i-_)*(l-w)>=(o-_)*(r-w)&&(o-_)*(m-w)>=(p-_)*(l-w)}function DT(i,r){return i.next.i!==r.i&&i.prev.i!==r.i&&!function(o,l){var p=o;do{if(p.i!==o.i&&p.next.i!==o.i&&p.i!==l.i&&p.next.i!==l.i&&V_(p,p.next,o,l))return!0;p=p.next}while(p!==o);return!1}(i,r)&&(Uc(i,r)&&Uc(r,i)&&function(o,l){var p=o,m=!1,_=(o.x+l.x)/2,w=(o.y+l.y)/2;do p.y>w!=p.next.y>w&&p.next.y!==p.y&&_<(p.next.x-p.x)*(w-p.y)/(p.next.y-p.y)+p.x&&(m=!m),p=p.next;while(p!==o);return m}(i,r)&&(Ar(i.prev,i,r.prev)||Ar(i,r.prev,r))||qd(i,r)&&Ar(i.prev,i,i.next)>0&&Ar(r.prev,r,r.next)>0)}function Ar(i,r,o){return(r.y-i.y)*(o.x-r.x)-(r.x-i.x)*(o.y-r.y)}function qd(i,r){return i.x===r.x&&i.y===r.y}function V_(i,r,o,l){var p=Gd(Ar(i,r,o)),m=Gd(Ar(i,r,l)),_=Gd(Ar(o,l,i)),w=Gd(Ar(o,l,r));return p!==m&&_!==w||!(p!==0||!Zd(i,o,r))||!(m!==0||!Zd(i,l,r))||!(_!==0||!Zd(o,i,l))||!(w!==0||!Zd(o,r,l))}function Zd(i,r,o){return r.x<=Math.max(i.x,o.x)&&r.x>=Math.min(i.x,o.x)&&r.y<=Math.max(i.y,o.y)&&r.y>=Math.min(i.y,o.y)}function Gd(i){return i>0?1:i<0?-1:0}function Uc(i,r){return Ar(i.prev,i,i.next)<0?Ar(i,r,i.next)>=0&&Ar(i,i.prev,r)>=0:Ar(i,r,i.prev)<0||Ar(i,i.next,r)<0}function $_(i,r){var o=new Nm(i.i,i.x,i.y),l=new Nm(r.i,r.x,r.y),p=i.next,m=r.prev;return i.next=r,r.prev=i,o.next=p,p.prev=o,l.next=o,o.prev=l,m.next=l,l.prev=m,l}function H_(i,r,o,l){var p=new Nm(i,r,o);return l?(p.next=l.next,p.prev=l,l.next.prev=p,l.next=p):(p.prev=p,p.next=p),p}function Vc(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Nm(i,r,o){this.i=i,this.x=r,this.y=o,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function jm(i,r,o,l){for(var p=0,m=r,_=o-l;m<o;m+=l)p+=(i[_]-i[m])*(i[m+1]+i[_+1]),_=m;return p}Fm.exports=Wd,Fm.exports.default=Wd,Wd.deviation=function(i,r,o,l){var p=r&&r.length,m=Math.abs(jm(i,0,p?r[0]*o:i.length,o));if(p)for(var _=0,w=r.length;_<w;_++)m-=Math.abs(jm(i,r[_]*o,_<w-1?r[_+1]*o:i.length,o));var S=0;for(_=0;_<l.length;_+=3){var E=l[_]*o,C=l[_+1]*o,A=l[_+2]*o;S+=Math.abs((i[E]-i[A])*(i[C+1]-i[E+1])-(i[E]-i[C])*(i[A+1]-i[E+1]))}return m===0&&S===0?0:Math.abs((S-m)/m)},Wd.flatten=function(i){for(var r=i[0][0].length,o={vertices:[],holes:[],dimensions:r},l=0,p=0;p<i.length;p++){for(var m=0;m<i[p].length;m++)for(var _=0;_<r;_++)o.vertices.push(i[p][m][_]);p>0&&o.holes.push(l+=i[p-1].length)}return o};var W_=I(Fm.exports);function Um(i,r,o){const l=o.patternDependencies;let p=!1;for(const m of r){const _=m.paint.get(`${i}-pattern`);_.isConstant()||(p=!0);const w=_.constantOr(null);w&&(p=!0,l[w.to]=!0,l[w.from]=!0)}return p}function Vm(i,r,o,l,p){const m=p.patternDependencies;for(const _ of r){const w=_.paint.get(`${i}-pattern`).value;if(w.kind!=="constant"){let S=w.evaluate({zoom:l-1},o,{},p.availableImages),E=w.evaluate({zoom:l},o,{},p.availableImages),C=w.evaluate({zoom:l+1},o,{},p.availableImages);S=S&&S.name?S.name:S,E=E&&E.name?E.name:E,C=C&&C.name?C.name:C,m[S]=!0,m[E]=!0,m[C]=!0,o.patterns[_.id]={min:S,mid:E,max:C}}}return o}class $m{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(o=>o.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new za,this.indexArray=new Yr,this.indexArray2=new yr,this.programConfigurations=new Os(r.layers,r.zoom),this.segments=new Wr,this.segments2=new Wr,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(r,o,l){this.hasPattern=Um("fill",this.layers,o);const p=this.layers[0].layout.get("fill-sort-key"),m=!p.isConstant(),_=[];for(const{feature:w,id:S,index:E,sourceLayerIndex:C}of r){const A=this.layers[0]._featureFilter.needGeometry,L=Bs(w,A);if(!this.layers[0]._featureFilter.filter(new rr(this.zoom),L,l))continue;const N=m?p.evaluate(L,{},l,o.availableImages):void 0,V={id:S,properties:w.properties,type:w.type,sourceLayerIndex:C,index:E,geometry:A?L.geometry:Fs(w),patterns:{},sortKey:N};_.push(V)}m&&_.sort((w,S)=>w.sortKey-S.sortKey);for(const w of _){const{geometry:S,index:E,sourceLayerIndex:C}=w;if(this.hasPattern){const A=Vm("fill",this.layers,w,this.zoom,o);this.patternFeatures.push(A)}else this.addFeature(w,S,E,l,{});o.featureIndex.insert(r[E].feature,S,E,C,this.index)}}update(r,o,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,l)}addFeatures(r,o,l){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,o,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,ET),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,o,l,p,m){for(const _ of ml(o,500)){let w=0;for(const N of _)w+=N.length;const S=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray),E=S.vertexLength,C=[],A=[];for(const N of _){if(N.length===0)continue;N!==_[0]&&A.push(C.length/2);const V=this.segments2.prepareSegment(N.length,this.layoutVertexArray,this.indexArray2),H=V.vertexLength;this.layoutVertexArray.emplaceBack(N[0].x,N[0].y),this.indexArray2.emplaceBack(H+N.length-1,H),C.push(N[0].x),C.push(N[0].y);for(let X=1;X<N.length;X++)this.layoutVertexArray.emplaceBack(N[X].x,N[X].y),this.indexArray2.emplaceBack(H+X-1,H+X),C.push(N[X].x),C.push(N[X].y);V.vertexLength+=N.length,V.primitiveLength+=N.length}const L=W_(C,A);for(let N=0;N<L.length;N+=3)this.indexArray.emplaceBack(E+L[N],E+L[N+1],E+L[N+2]);S.vertexLength+=w,S.primitiveLength+=L.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,l,m,p)}}let q_,Z_;et("FillBucket",$m,{omit:["layers","patternFeatures"]});var OT={get paint(){return Z_=Z_||new d({"fill-antialias":new lt(be.paint_fill["fill-antialias"]),"fill-opacity":new gt(be.paint_fill["fill-opacity"]),"fill-color":new gt(be.paint_fill["fill-color"]),"fill-outline-color":new gt(be.paint_fill["fill-outline-color"]),"fill-translate":new lt(be.paint_fill["fill-translate"]),"fill-translate-anchor":new lt(be.paint_fill["fill-translate-anchor"]),"fill-pattern":new g(be.paint_fill["fill-pattern"])})},get layout(){return q_=q_||new d({"fill-sort-key":new gt(be.layout_fill["fill-sort-key"])})}};class FT extends y{constructor(r){super(r,OT)}recalculate(r,o){super.recalculate(r,o);const l=this.paint._values["fill-outline-color"];l.value.kind==="constant"&&l.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new $m(r)}queryRadius(){return Vd(this.paint.get("fill-translate"))}queryIntersectsFeature(r,o,l,p,m,_,w){return I_($d(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),_.angle,w),p)}isTileClipped(){return!0}}const BT=P([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),NT=P([{name:"a_centroid",components:2,type:"Int16"}],4),{members:jT}=BT;var Fa={},UT=F,G_=ql;function ql(i,r,o,l,p){this.properties={},this.extent=o,this.type=0,this._pbf=i,this._geometry=-1,this._keys=l,this._values=p,i.readFields(VT,this,r)}function VT(i,r,o){i==1?r.id=o.readVarint():i==2?function(l,p){for(var m=l.readVarint()+l.pos;l.pos<m;){var _=p._keys[l.readVarint()],w=p._values[l.readVarint()];p.properties[_]=w}}(o,r):i==3?r.type=o.readVarint():i==4&&(r._geometry=o.pos)}function $T(i){for(var r,o,l=0,p=0,m=i.length,_=m-1;p<m;_=p++)l+=((o=i[_]).x-(r=i[p]).x)*(r.y+o.y);return l}ql.types=["Unknown","Point","LineString","Polygon"],ql.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var r,o=i.readVarint()+i.pos,l=1,p=0,m=0,_=0,w=[];i.pos<o;){if(p<=0){var S=i.readVarint();l=7&S,p=S>>3}if(p--,l===1||l===2)m+=i.readSVarint(),_+=i.readSVarint(),l===1&&(r&&w.push(r),r=[]),r.push(new UT(m,_));else{if(l!==7)throw new Error("unknown command "+l);r&&r.push(r[0].clone())}}return r&&w.push(r),w},ql.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var r=i.readVarint()+i.pos,o=1,l=0,p=0,m=0,_=1/0,w=-1/0,S=1/0,E=-1/0;i.pos<r;){if(l<=0){var C=i.readVarint();o=7&C,l=C>>3}if(l--,o===1||o===2)(p+=i.readSVarint())<_&&(_=p),p>w&&(w=p),(m+=i.readSVarint())<S&&(S=m),m>E&&(E=m);else if(o!==7)throw new Error("unknown command "+o)}return[_,S,w,E]},ql.prototype.toGeoJSON=function(i,r,o){var l,p,m=this.extent*Math.pow(2,o),_=this.extent*i,w=this.extent*r,S=this.loadGeometry(),E=ql.types[this.type];function C(N){for(var V=0;V<N.length;V++){var H=N[V];N[V]=[360*(H.x+_)/m-180,360/Math.PI*Math.atan(Math.exp((180-360*(H.y+w)/m)*Math.PI/180))-90]}}switch(this.type){case 1:var A=[];for(l=0;l<S.length;l++)A[l]=S[l][0];C(S=A);break;case 2:for(l=0;l<S.length;l++)C(S[l]);break;case 3:for(S=function(N){var V=N.length;if(V<=1)return[N];for(var H,X,re=[],fe=0;fe<V;fe++){var oe=$T(N[fe]);oe!==0&&(X===void 0&&(X=oe<0),X===oe<0?(H&&re.push(H),H=[N[fe]]):H.push(N[fe]))}return H&&re.push(H),re}(S),l=0;l<S.length;l++)for(p=0;p<S[l].length;p++)C(S[l][p])}S.length===1?S=S[0]:E="Multi"+E;var L={type:"Feature",geometry:{type:E,coordinates:S},properties:this.properties};return"id"in this&&(L.id=this.id),L};var HT=G_,K_=X_;function X_(i,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(WT,this,r),this.length=this._features.length}function WT(i,r,o){i===15?r.version=o.readVarint():i===1?r.name=o.readString():i===5?r.extent=o.readVarint():i===2?r._features.push(o.pos):i===3?r._keys.push(o.readString()):i===4&&r._values.push(function(l){for(var p=null,m=l.readVarint()+l.pos;l.pos<m;){var _=l.readVarint()>>3;p=_===1?l.readString():_===2?l.readFloat():_===3?l.readDouble():_===4?l.readVarint64():_===5?l.readVarint():_===6?l.readSVarint():_===7?l.readBoolean():null}return p}(o))}X_.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var r=this._pbf.readVarint()+this._pbf.pos;return new HT(this._pbf,r,this.extent,this._keys,this._values)};var qT=K_;function ZT(i,r,o){if(i===3){var l=new qT(o,o.readVarint()+o.pos);l.length&&(r[l.name]=l)}}Fa.VectorTile=function(i,r){this.layers=i.readFields(ZT,{},r)},Fa.VectorTileFeature=G_,Fa.VectorTileLayer=K_;const GT=Fa.VectorTileFeature.types,Hm=Math.pow(2,13);function $c(i,r,o,l,p,m,_,w){i.emplaceBack(r,o,2*Math.floor(l*Hm)+_,p*Hm*2,m*Hm*2,Math.round(w))}class Wm{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(o=>o.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new ra,this.centroidVertexArray=new ta,this.indexArray=new Yr,this.programConfigurations=new Os(r.layers,r.zoom),this.segments=new Wr,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(r,o,l){this.features=[],this.hasPattern=Um("fill-extrusion",this.layers,o);for(const{feature:p,id:m,index:_,sourceLayerIndex:w}of r){const S=this.layers[0]._featureFilter.needGeometry,E=Bs(p,S);if(!this.layers[0]._featureFilter.filter(new rr(this.zoom),E,l))continue;const C={id:m,sourceLayerIndex:w,index:_,geometry:S?E.geometry:Fs(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push(Vm("fill-extrusion",this.layers,C,this.zoom,o)):this.addFeature(C,C.geometry,_,l,{}),o.featureIndex.insert(p,C.geometry,_,w,this.index,!0)}}addFeatures(r,o,l){for(const p of this.features){const{geometry:m}=p;this.addFeature(p,m,p.index,o,l)}}update(r,o,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,l)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,jT),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,NT.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,o,l,p,m){for(const _ of ml(o,500)){const w={x:0,y:0,vertexCount:0};let S=0;for(const V of _)S+=V.length;let E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const V of _){if(V.length===0||XT(V))continue;let H=0;for(let X=0;X<V.length;X++){const re=V[X];if(X>=1){const fe=V[X-1];if(!KT(re,fe)){E.vertexLength+4>Wr.MAX_VERTEX_ARRAY_LENGTH&&(E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const oe=re.sub(fe)._perp()._unit(),he=fe.dist(re);H+he>32768&&(H=0),$c(this.layoutVertexArray,re.x,re.y,oe.x,oe.y,0,0,H),$c(this.layoutVertexArray,re.x,re.y,oe.x,oe.y,0,1,H),w.x+=2*re.x,w.y+=2*re.y,w.vertexCount+=2,H+=he,$c(this.layoutVertexArray,fe.x,fe.y,oe.x,oe.y,0,0,H),$c(this.layoutVertexArray,fe.x,fe.y,oe.x,oe.y,0,1,H),w.x+=2*fe.x,w.y+=2*fe.y,w.vertexCount+=2;const xe=E.vertexLength;this.indexArray.emplaceBack(xe,xe+2,xe+1),this.indexArray.emplaceBack(xe+1,xe+2,xe+3),E.vertexLength+=4,E.primitiveLength+=2}}}}if(E.vertexLength+S>Wr.MAX_VERTEX_ARRAY_LENGTH&&(E=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray)),GT[r.type]!=="Polygon")continue;const C=[],A=[],L=E.vertexLength;for(const V of _)if(V.length!==0){V!==_[0]&&A.push(C.length/2);for(let H=0;H<V.length;H++){const X=V[H];$c(this.layoutVertexArray,X.x,X.y,0,0,1,1,0),w.x+=X.x,w.y+=X.y,w.vertexCount+=1,C.push(X.x),C.push(X.y)}}const N=W_(C,A);for(let V=0;V<N.length;V+=3)this.indexArray.emplaceBack(L+N[V],L+N[V+2],L+N[V+1]);E.primitiveLength+=N.length/3,E.vertexLength+=S;for(let V=0;V<w.vertexCount;V++){const H=Math.floor(w.x/w.vertexCount),X=Math.floor(w.y/w.vertexCount);this.centroidVertexArray.emplaceBack(H,X)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,l,m,p)}}function KT(i,r){return i.x===r.x&&(i.x<0||i.x>Br)||i.y===r.y&&(i.y<0||i.y>Br)}function XT(i){return i.every(r=>r.x<0)||i.every(r=>r.x>Br)||i.every(r=>r.y<0)||i.every(r=>r.y>Br)}let Y_;et("FillExtrusionBucket",Wm,{omit:["layers","features"]});var YT={get paint(){return Y_=Y_||new d({"fill-extrusion-opacity":new lt(be["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new gt(be["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new lt(be["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new lt(be["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new g(be["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new gt(be["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new gt(be["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new lt(be["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class JT extends y{constructor(r){super(r,YT)}createBucket(r){return new Wm(r)}queryRadius(){return Vd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,o,l,p,m,_,w,S){const E=$d(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),_.angle,w),C=this.paint.get("fill-extrusion-height").evaluate(o,l),A=this.paint.get("fill-extrusion-base").evaluate(o,l),L=function(V,H,X,re){const fe=[];for(const oe of V){const he=[oe.x,oe.y,0,1];Hd(he,he,H),fe.push(new D(he[0]/he[3],he[1]/he[3]))}return fe}(E,S),N=function(V,H,X,re){const fe=[],oe=[],he=re[8]*H,xe=re[9]*H,ze=re[10]*H,We=re[11]*H,pt=re[8]*X,Ze=re[9]*X,He=re[10]*X,at=re[11]*X;for(const rt of V){const Qe=[],Ee=[];for(const ut of rt){const ot=ut.x,xt=ut.y,tr=re[0]*ot+re[4]*xt+re[12],Jt=re[1]*ot+re[5]*xt+re[13],Jr=re[2]*ot+re[6]*xt+re[14],Gi=re[3]*ot+re[7]*xt+re[15],mn=Jr+ze,kr=Gi+We,Nn=tr+pt,jn=Jt+Ze,Un=Jr+He,Er=Gi+at,Qr=new D((tr+he)/kr,(Jt+xe)/kr);Qr.z=mn/kr,Qe.push(Qr);const kn=new D(Nn/Er,jn/Er);kn.z=Un/Er,Ee.push(kn)}fe.push(Qe),oe.push(Ee)}return[fe,oe]}(p,A,C,S);return function(V,H,X){let re=1/0;I_(X,H)&&(re=J_(X,H[0]));for(let fe=0;fe<H.length;fe++){const oe=H[fe],he=V[fe];for(let xe=0;xe<oe.length-1;xe++){const ze=oe[xe],We=[ze,oe[xe+1],he[xe+1],he[xe],ze];P_(X,We)&&(re=Math.min(re,J_(X,We)))}}return re!==1/0&&re}(N[0],N[1],L)}}function Hc(i,r){return i.x*r.x+i.y*r.y}function J_(i,r){if(i.length===1){let o=0;const l=r[o++];let p;for(;!p||l.equals(p);)if(p=r[o++],!p)return 1/0;for(;o<r.length;o++){const m=r[o],_=i[0],w=p.sub(l),S=m.sub(l),E=_.sub(l),C=Hc(w,w),A=Hc(w,S),L=Hc(S,S),N=Hc(E,w),V=Hc(E,S),H=C*L-A*A,X=(L*N-A*V)/H,re=(C*V-A*N)/H,fe=l.z*(1-X-re)+p.z*X+m.z*re;if(isFinite(fe))return fe}return 1/0}{let o=1/0;for(const l of r)o=Math.min(o,l.z);return o}}const QT=P([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:ek}=QT,tk=P([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:rk}=tk,nk=Fa.VectorTileFeature.types,ik=Math.cos(Math.PI/180*37.5),Q_=Math.pow(2,14)/.5;class qm{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(o=>o.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new Bl,this.layoutVertexArray2=new Mc,this.indexArray=new Yr,this.programConfigurations=new Os(r.layers,r.zoom),this.segments=new Wr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(r,o,l){this.hasPattern=Um("line",this.layers,o);const p=this.layers[0].layout.get("line-sort-key"),m=!p.isConstant(),_=[];for(const{feature:w,id:S,index:E,sourceLayerIndex:C}of r){const A=this.layers[0]._featureFilter.needGeometry,L=Bs(w,A);if(!this.layers[0]._featureFilter.filter(new rr(this.zoom),L,l))continue;const N=m?p.evaluate(L,{},l):void 0,V={id:S,properties:w.properties,type:w.type,sourceLayerIndex:C,index:E,geometry:A?L.geometry:Fs(w),patterns:{},sortKey:N};_.push(V)}m&&_.sort((w,S)=>w.sortKey-S.sortKey);for(const w of _){const{geometry:S,index:E,sourceLayerIndex:C}=w;if(this.hasPattern){const A=Vm("line",this.layers,w,this.zoom,o);this.patternFeatures.push(A)}else this.addFeature(w,S,E,l,{});o.featureIndex.insert(r[E].feature,S,E,C,this.index)}}update(r,o,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,l)}addFeatures(r,o,l){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,o,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,rk)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,ek),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,o,l,p,m){const _=this.layers[0].layout,w=_.get("line-join").evaluate(r,{}),S=_.get("line-cap"),E=_.get("line-miter-limit"),C=_.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const A of o)this.addLine(A,r,w,S,E,C);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,l,m,p)}addLine(r,o,l,p,m,_){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let re=0;re<r.length-1;re++)this.totalDistance+=r[re].dist(r[re+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const w=nk[o.type]==="Polygon";let S=r.length;for(;S>=2&&r[S-1].equals(r[S-2]);)S--;let E=0;for(;E<S-1&&r[E].equals(r[E+1]);)E++;if(S<(w?3:2))return;l==="bevel"&&(m=1.05);const C=this.overscaling<=16?15*Br/(512*this.overscaling):0,A=this.segments.prepareSegment(10*S,this.layoutVertexArray,this.indexArray);let L,N,V,H,X;this.e1=this.e2=-1,w&&(L=r[S-2],X=r[E].sub(L)._unit()._perp());for(let re=E;re<S;re++){if(V=re===S-1?w?r[E+1]:void 0:r[re+1],V&&r[re].equals(V))continue;X&&(H=X),L&&(N=L),L=r[re],X=V?V.sub(L)._unit()._perp():H,H=H||X;let fe=H.add(X);fe.x===0&&fe.y===0||fe._unit();const oe=H.x*X.x+H.y*X.y,he=fe.x*X.x+fe.y*X.y,xe=he!==0?1/he:1/0,ze=2*Math.sqrt(2-2*he),We=he<ik&&N&&V,pt=H.x*X.y-H.y*X.x>0;if(We&&re>E){const at=L.dist(N);if(at>2*C){const rt=L.sub(L.sub(N)._mult(C/at)._round());this.updateDistance(N,rt),this.addCurrentVertex(rt,H,0,0,A),N=rt}}const Ze=N&&V;let He=Ze?l:w?"butt":p;if(Ze&&He==="round"&&(xe<_?He="miter":xe<=2&&(He="fakeround")),He==="miter"&&xe>m&&(He="bevel"),He==="bevel"&&(xe>2&&(He="flipbevel"),xe<m&&(He="miter")),N&&this.updateDistance(N,L),He==="miter")fe._mult(xe),this.addCurrentVertex(L,fe,0,0,A);else if(He==="flipbevel"){if(xe>100)fe=X.mult(-1);else{const at=xe*H.add(X).mag()/H.sub(X).mag();fe._perp()._mult(at*(pt?-1:1))}this.addCurrentVertex(L,fe,0,0,A),this.addCurrentVertex(L,fe.mult(-1),0,0,A)}else if(He==="bevel"||He==="fakeround"){const at=-Math.sqrt(xe*xe-1),rt=pt?at:0,Qe=pt?0:at;if(N&&this.addCurrentVertex(L,H,rt,Qe,A),He==="fakeround"){const Ee=Math.round(180*ze/Math.PI/20);for(let ut=1;ut<Ee;ut++){let ot=ut/Ee;if(ot!==.5){const tr=ot-.5;ot+=ot*tr*(ot-1)*((1.0904+oe*(oe*(3.55645-1.43519*oe)-3.2452))*tr*tr+(.848013+oe*(.215638*oe-1.06021)))}const xt=X.sub(H)._mult(ot)._add(H)._unit()._mult(pt?-1:1);this.addHalfVertex(L,xt.x,xt.y,!1,pt,0,A)}}V&&this.addCurrentVertex(L,X,-rt,-Qe,A)}else if(He==="butt")this.addCurrentVertex(L,fe,0,0,A);else if(He==="square"){const at=N?1:-1;this.addCurrentVertex(L,fe,at,at,A)}else He==="round"&&(N&&(this.addCurrentVertex(L,H,0,0,A),this.addCurrentVertex(L,H,1,1,A,!0)),V&&(this.addCurrentVertex(L,X,-1,-1,A,!0),this.addCurrentVertex(L,X,0,0,A)));if(We&&re<S-1){const at=L.dist(V);if(at>2*C){const rt=L.add(V.sub(L)._mult(C/at)._round());this.updateDistance(L,rt),this.addCurrentVertex(rt,X,0,0,A),L=rt}}}}addCurrentVertex(r,o,l,p,m,_=!1){const w=o.y*p-o.x,S=-o.y-o.x*p;this.addHalfVertex(r,o.x+o.y*l,o.y-o.x*l,_,!1,l,m),this.addHalfVertex(r,w,S,_,!0,-p,m),this.distance>Q_/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,o,l,p,m,_))}addHalfVertex({x:r,y:o},l,p,m,_,w,S){const E=.5*(this.lineClips?this.scaledDistance*(Q_-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(m?1:0),(o<<1)+(_?1:0),Math.round(63*l)+128,Math.round(63*p)+128,1+(w===0?0:w<0?-1:1)|(63&E)<<2,E>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const C=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,C),S.primitiveLength++),_?this.e2=C:this.e1=C}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,o){this.distance+=r.dist(o),this.updateScaledDistance()}}let ev,tv;et("LineBucket",qm,{omit:["layers","patternFeatures"]});var rv={get paint(){return tv=tv||new d({"line-opacity":new gt(be.paint_line["line-opacity"]),"line-color":new gt(be.paint_line["line-color"]),"line-translate":new lt(be.paint_line["line-translate"]),"line-translate-anchor":new lt(be.paint_line["line-translate-anchor"]),"line-width":new gt(be.paint_line["line-width"]),"line-gap-width":new gt(be.paint_line["line-gap-width"]),"line-offset":new gt(be.paint_line["line-offset"]),"line-blur":new gt(be.paint_line["line-blur"]),"line-dasharray":new n(be.paint_line["line-dasharray"]),"line-pattern":new g(be.paint_line["line-pattern"]),"line-gradient":new s(be.paint_line["line-gradient"])})},get layout(){return ev=ev||new d({"line-cap":new lt(be.layout_line["line-cap"]),"line-join":new gt(be.layout_line["line-join"]),"line-miter-limit":new lt(be.layout_line["line-miter-limit"]),"line-round-limit":new lt(be.layout_line["line-round-limit"]),"line-sort-key":new gt(be.layout_line["line-sort-key"])})}};class ok extends gt{possiblyEvaluate(r,o){return o=new rr(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,zoomHistory:o.zoomHistory,transition:o.transition}),super.possiblyEvaluate(r,o)}evaluate(r,o,l,p){return o=Le({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(r,o,l,p)}}let Kd;class ak extends y{constructor(r){super(r,rv),this.gradientVersion=0,Kd||(Kd=new ok(rv.paint.properties["line-width"].specification),Kd.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const o=this.gradientExpression();this.stepInterpolant=!!function(l){return l._styleExpression!==void 0}(o)&&o._styleExpression.expression instanceof vs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,o){super.recalculate(r,o),this.paint._values["line-floorwidth"]=Kd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new qm(r)}queryRadius(r){const o=r,l=nv(Fc("line-width",this,o),Fc("line-gap-width",this,o)),p=Fc("line-offset",this,o);return l/2+Math.abs(p)+Vd(this.paint.get("line-translate"))}queryIntersectsFeature(r,o,l,p,m,_,w){const S=$d(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),_.angle,w),E=w/2*nv(this.paint.get("line-width").evaluate(o,l),this.paint.get("line-gap-width").evaluate(o,l)),C=this.paint.get("line-offset").evaluate(o,l);return C&&(p=function(A,L){const N=[];for(let V=0;V<A.length;V++){const H=A[V],X=[];for(let re=0;re<H.length;re++){const fe=H[re-1],oe=H[re],he=H[re+1],xe=re===0?new D(0,0):oe.sub(fe)._unit()._perp(),ze=re===H.length-1?new D(0,0):he.sub(oe)._unit()._perp(),We=xe._add(ze)._unit(),pt=We.x*ze.x+We.y*ze.y;pt!==0&&We._mult(1/pt),X.push(We._mult(L)._add(oe))}N.push(X)}return N}(p,C*w)),function(A,L,N){for(let V=0;V<L.length;V++){const H=L[V];if(A.length>=3){for(let X=0;X<H.length;X++)if($l(A,H[X]))return!0}if(mT(A,H,N))return!0}return!1}(S,p,E)}isTileClipped(){return!0}}function nv(i,r){return r>0?r+2*i:i}const sk=P([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),lk=P([{name:"a_projected_pos",components:3,type:"Float32"}],4);P([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const uk=P([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);P([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const iv=P([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ck=P([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function hk(i,r,o){return i.sections.forEach(l=>{l.text=function(p,m,_){const w=m.layout.get("text-transform").evaluate(_,{});return w==="uppercase"?p=p.toLocaleUpperCase():w==="lowercase"&&(p=p.toLocaleLowerCase()),Mo.applyArabicShaping&&(p=Mo.applyArabicShaping(p)),p}(l.text,r,o)}),i}P([{name:"triangle",components:3,type:"Uint16"}]),P([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),P([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),P([{type:"Float32",name:"offsetX"}]),P([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),P([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Wc={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var qr=24,ov=Yt,av=function(i,r,o,l,p){var m,_,w=8*p-l-1,S=(1<<w)-1,E=S>>1,C=-7,A=p-1,L=-1,N=i[r+A];for(A+=L,m=N&(1<<-C)-1,N>>=-C,C+=w;C>0;m=256*m+i[r+A],A+=L,C-=8);for(_=m&(1<<-C)-1,m>>=-C,C+=l;C>0;_=256*_+i[r+A],A+=L,C-=8);if(m===0)m=1-E;else{if(m===S)return _?NaN:1/0*(N?-1:1);_+=Math.pow(2,l),m-=E}return(N?-1:1)*_*Math.pow(2,m-l)},sv=function(i,r,o,l,p,m){var _,w,S,E=8*m-p-1,C=(1<<E)-1,A=C>>1,L=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,N=0,V=1,H=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(w=isNaN(r)?1:0,_=C):(_=Math.floor(Math.log(r)/Math.LN2),r*(S=Math.pow(2,-_))<1&&(_--,S*=2),(r+=_+A>=1?L/S:L*Math.pow(2,1-A))*S>=2&&(_++,S/=2),_+A>=C?(w=0,_=C):_+A>=1?(w=(r*S-1)*Math.pow(2,p),_+=A):(w=r*Math.pow(2,A-1)*Math.pow(2,p),_=0));p>=8;i[o+N]=255&w,N+=V,w/=256,p-=8);for(_=_<<p|w,E+=p;E>0;i[o+N]=255&_,N+=V,_/=256,E-=8);i[o+N-V]|=128*H};function Yt(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}Yt.Varint=0,Yt.Fixed64=1,Yt.Bytes=2,Yt.Fixed32=5;var Zm=4294967296,lv=1/Zm,uv=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function ia(i){return i.type===Yt.Bytes?i.readVarint()+i.pos:i.pos+1}function Zl(i,r,o){return o?4294967296*r+(i>>>0):4294967296*(r>>>0)+(i>>>0)}function cv(i,r,o){var l=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));o.realloc(l);for(var p=o.pos-1;p>=i;p--)o.buf[p+l]=o.buf[p]}function dk(i,r){for(var o=0;o<i.length;o++)r.writeVarint(i[o])}function pk(i,r){for(var o=0;o<i.length;o++)r.writeSVarint(i[o])}function fk(i,r){for(var o=0;o<i.length;o++)r.writeFloat(i[o])}function mk(i,r){for(var o=0;o<i.length;o++)r.writeDouble(i[o])}function gk(i,r){for(var o=0;o<i.length;o++)r.writeBoolean(i[o])}function yk(i,r){for(var o=0;o<i.length;o++)r.writeFixed32(i[o])}function _k(i,r){for(var o=0;o<i.length;o++)r.writeSFixed32(i[o])}function vk(i,r){for(var o=0;o<i.length;o++)r.writeFixed64(i[o])}function xk(i,r){for(var o=0;o<i.length;o++)r.writeSFixed64(i[o])}function Xd(i,r){return(i[r]|i[r+1]<<8|i[r+2]<<16)+16777216*i[r+3]}function Gl(i,r,o){i[o]=r,i[o+1]=r>>>8,i[o+2]=r>>>16,i[o+3]=r>>>24}function hv(i,r){return(i[r]|i[r+1]<<8|i[r+2]<<16)+(i[r+3]<<24)}Yt.prototype={destroy:function(){this.buf=null},readFields:function(i,r,o){for(o=o||this.length;this.pos<o;){var l=this.readVarint(),p=l>>3,m=this.pos;this.type=7&l,i(p,r,this),this.pos===m&&this.skip(l)}return r},readMessage:function(i,r){return this.readFields(i,r,this.readVarint()+this.pos)},readFixed32:function(){var i=Xd(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=hv(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=Xd(this.buf,this.pos)+Xd(this.buf,this.pos+4)*Zm;return this.pos+=8,i},readSFixed64:function(){var i=Xd(this.buf,this.pos)+hv(this.buf,this.pos+4)*Zm;return this.pos+=8,i},readFloat:function(){var i=av(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=av(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var r,o,l=this.buf;return r=127&(o=l[this.pos++]),o<128?r:(r|=(127&(o=l[this.pos++]))<<7,o<128?r:(r|=(127&(o=l[this.pos++]))<<14,o<128?r:(r|=(127&(o=l[this.pos++]))<<21,o<128?r:function(p,m,_){var w,S,E=_.buf;if(w=(112&(S=E[_.pos++]))>>4,S<128||(w|=(127&(S=E[_.pos++]))<<3,S<128)||(w|=(127&(S=E[_.pos++]))<<10,S<128)||(w|=(127&(S=E[_.pos++]))<<17,S<128)||(w|=(127&(S=E[_.pos++]))<<24,S<128)||(w|=(1&(S=E[_.pos++]))<<31,S<128))return Zl(p,w,m);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(o=l[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var i=this.readVarint()+this.pos,r=this.pos;return this.pos=i,i-r>=12&&uv?function(o,l,p){return uv.decode(o.subarray(l,p))}(this.buf,r,i):function(o,l,p){for(var m="",_=l;_<p;){var w,S,E,C=o[_],A=null,L=C>239?4:C>223?3:C>191?2:1;if(_+L>p)break;L===1?C<128&&(A=C):L===2?(192&(w=o[_+1]))==128&&(A=(31&C)<<6|63&w)<=127&&(A=null):L===3?(S=o[_+2],(192&(w=o[_+1]))==128&&(192&S)==128&&((A=(15&C)<<12|(63&w)<<6|63&S)<=2047||A>=55296&&A<=57343)&&(A=null)):L===4&&(S=o[_+2],E=o[_+3],(192&(w=o[_+1]))==128&&(192&S)==128&&(192&E)==128&&((A=(15&C)<<18|(63&w)<<12|(63&S)<<6|63&E)<=65535||A>=1114112)&&(A=null)),A===null?(A=65533,L=1):A>65535&&(A-=65536,m+=String.fromCharCode(A>>>10&1023|55296),A=56320|1023&A),m+=String.fromCharCode(A),_+=L}return m}(this.buf,r,i)},readBytes:function(){var i=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,i);return this.pos=i,r},readPackedVarint:function(i,r){if(this.type!==Yt.Bytes)return i.push(this.readVarint(r));var o=ia(this);for(i=i||[];this.pos<o;)i.push(this.readVarint(r));return i},readPackedSVarint:function(i){if(this.type!==Yt.Bytes)return i.push(this.readSVarint());var r=ia(this);for(i=i||[];this.pos<r;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==Yt.Bytes)return i.push(this.readBoolean());var r=ia(this);for(i=i||[];this.pos<r;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==Yt.Bytes)return i.push(this.readFloat());var r=ia(this);for(i=i||[];this.pos<r;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==Yt.Bytes)return i.push(this.readDouble());var r=ia(this);for(i=i||[];this.pos<r;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==Yt.Bytes)return i.push(this.readFixed32());var r=ia(this);for(i=i||[];this.pos<r;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==Yt.Bytes)return i.push(this.readSFixed32());var r=ia(this);for(i=i||[];this.pos<r;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==Yt.Bytes)return i.push(this.readFixed64());var r=ia(this);for(i=i||[];this.pos<r;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==Yt.Bytes)return i.push(this.readSFixed64());var r=ia(this);for(i=i||[];this.pos<r;)i.push(this.readSFixed64());return i},skip:function(i){var r=7&i;if(r===Yt.Varint)for(;this.buf[this.pos++]>127;);else if(r===Yt.Bytes)this.pos=this.readVarint()+this.pos;else if(r===Yt.Fixed32)this.pos+=4;else{if(r!==Yt.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(i,r){this.writeVarint(i<<3|r)},realloc:function(i){for(var r=this.length||16;r<this.pos+i;)r*=2;if(r!==this.length){var o=new Uint8Array(r);o.set(this.buf),this.buf=o,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),Gl(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),Gl(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),Gl(this.buf,-1&i,this.pos),Gl(this.buf,Math.floor(i*lv),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),Gl(this.buf,-1&i,this.pos),Gl(this.buf,Math.floor(i*lv),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?function(r,o){var l,p;if(r>=0?(l=r%4294967296|0,p=r/4294967296|0):(p=~(-r/4294967296),4294967295^(l=~(-r%4294967296))?l=l+1|0:(l=0,p=p+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),function(m,_,w){w.buf[w.pos++]=127&m|128,m>>>=7,w.buf[w.pos++]=127&m|128,m>>>=7,w.buf[w.pos++]=127&m|128,m>>>=7,w.buf[w.pos++]=127&m|128,w.buf[w.pos]=127&(m>>>=7)}(l,0,o),function(m,_){var w=(7&m)<<4;_.buf[_.pos++]|=w|((m>>>=3)?128:0),m&&(_.buf[_.pos++]=127&m|((m>>>=7)?128:0),m&&(_.buf[_.pos++]=127&m|((m>>>=7)?128:0),m&&(_.buf[_.pos++]=127&m|((m>>>=7)?128:0),m&&(_.buf[_.pos++]=127&m|((m>>>=7)?128:0),m&&(_.buf[_.pos++]=127&m)))))}(p,o)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(!!i)},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var r=this.pos;this.pos=function(l,p,m){for(var _,w,S=0;S<p.length;S++){if((_=p.charCodeAt(S))>55295&&_<57344){if(!w){_>56319||S+1===p.length?(l[m++]=239,l[m++]=191,l[m++]=189):w=_;continue}if(_<56320){l[m++]=239,l[m++]=191,l[m++]=189,w=_;continue}_=w-55296<<10|_-56320|65536,w=null}else w&&(l[m++]=239,l[m++]=191,l[m++]=189,w=null);_<128?l[m++]=_:(_<2048?l[m++]=_>>6|192:(_<65536?l[m++]=_>>12|224:(l[m++]=_>>18|240,l[m++]=_>>12&63|128),l[m++]=_>>6&63|128),l[m++]=63&_|128)}return m}(this.buf,i,this.pos);var o=this.pos-r;o>=128&&cv(r,o,this),this.pos=r-1,this.writeVarint(o),this.pos+=o},writeFloat:function(i){this.realloc(4),sv(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),sv(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var r=i.length;this.writeVarint(r),this.realloc(r);for(var o=0;o<r;o++)this.buf[this.pos++]=i[o]},writeRawMessage:function(i,r){this.pos++;var o=this.pos;i(r,this);var l=this.pos-o;l>=128&&cv(o,l,this),this.pos=o-1,this.writeVarint(l),this.pos+=l},writeMessage:function(i,r,o){this.writeTag(i,Yt.Bytes),this.writeRawMessage(r,o)},writePackedVarint:function(i,r){r.length&&this.writeMessage(i,dk,r)},writePackedSVarint:function(i,r){r.length&&this.writeMessage(i,pk,r)},writePackedBoolean:function(i,r){r.length&&this.writeMessage(i,gk,r)},writePackedFloat:function(i,r){r.length&&this.writeMessage(i,fk,r)},writePackedDouble:function(i,r){r.length&&this.writeMessage(i,mk,r)},writePackedFixed32:function(i,r){r.length&&this.writeMessage(i,yk,r)},writePackedSFixed32:function(i,r){r.length&&this.writeMessage(i,_k,r)},writePackedFixed64:function(i,r){r.length&&this.writeMessage(i,vk,r)},writePackedSFixed64:function(i,r){r.length&&this.writeMessage(i,xk,r)},writeBytesField:function(i,r){this.writeTag(i,Yt.Bytes),this.writeBytes(r)},writeFixed32Field:function(i,r){this.writeTag(i,Yt.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(i,r){this.writeTag(i,Yt.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(i,r){this.writeTag(i,Yt.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(i,r){this.writeTag(i,Yt.Fixed64),this.writeSFixed64(r)},writeVarintField:function(i,r){this.writeTag(i,Yt.Varint),this.writeVarint(r)},writeSVarintField:function(i,r){this.writeTag(i,Yt.Varint),this.writeSVarint(r)},writeStringField:function(i,r){this.writeTag(i,Yt.Bytes),this.writeString(r)},writeFloatField:function(i,r){this.writeTag(i,Yt.Fixed32),this.writeFloat(r)},writeDoubleField:function(i,r){this.writeTag(i,Yt.Fixed64),this.writeDouble(r)},writeBooleanField:function(i,r){this.writeVarintField(i,!!r)}};var Gm=I(ov);const Km=3;function wk(i,r,o){i===1&&o.readMessage(bk,r)}function bk(i,r,o){if(i===3){const{id:l,bitmap:p,width:m,height:_,left:w,top:S,advance:E}=o.readMessage(Sk,{});r.push({id:l,bitmap:new Nc({width:m+2*Km,height:_+2*Km},p),metrics:{width:m,height:_,left:w,top:S,advance:E}})}}function Sk(i,r,o){i===1?r.id=o.readVarint():i===2?r.bitmap=o.readBytes():i===3?r.width=o.readVarint():i===4?r.height=o.readVarint():i===5?r.left=o.readSVarint():i===6?r.top=o.readSVarint():i===7&&(r.advance=o.readVarint())}const dv=Km;function pv(i){let r=0,o=0;for(const _ of i)r+=_.w*_.h,o=Math.max(o,_.w);i.sort((_,w)=>w.h-_.h);const l=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),o),h:1/0}];let p=0,m=0;for(const _ of i)for(let w=l.length-1;w>=0;w--){const S=l[w];if(!(_.w>S.w||_.h>S.h)){if(_.x=S.x,_.y=S.y,m=Math.max(m,_.y+_.h),p=Math.max(p,_.x+_.w),_.w===S.w&&_.h===S.h){const E=l.pop();w<l.length&&(l[w]=E)}else _.h===S.h?(S.x+=_.w,S.w-=_.w):_.w===S.w?(S.y+=_.h,S.h-=_.h):(l.push({x:S.x+_.w,y:S.y,w:S.w-_.w,h:_.h}),S.y+=_.h,S.h-=_.h);break}}return{w:p,h:m,fill:r/(p*m)||0}}const ei=1;class Xm{constructor(r,{pixelRatio:o,version:l,stretchX:p,stretchY:m,content:_,textFitWidth:w,textFitHeight:S}){this.paddedRect=r,this.pixelRatio=o,this.stretchX=p,this.stretchY=m,this.content=_,this.version=l,this.textFitWidth=w,this.textFitHeight=S}get tl(){return[this.paddedRect.x+ei,this.paddedRect.y+ei]}get br(){return[this.paddedRect.x+this.paddedRect.w-ei,this.paddedRect.y+this.paddedRect.h-ei]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*ei)/this.pixelRatio,(this.paddedRect.h-2*ei)/this.pixelRatio]}}class fv{constructor(r,o){const l={},p={};this.haveRenderCallbacks=[];const m=[];this.addImages(r,l,m),this.addImages(o,p,m);const{w:_,h:w}=pv(m),S=new Mi({width:_||1,height:w||1});for(const E in r){const C=r[E],A=l[E].paddedRect;Mi.copy(C.data,S,{x:0,y:0},{x:A.x+ei,y:A.y+ei},C.data)}for(const E in o){const C=o[E],A=p[E].paddedRect,L=A.x+ei,N=A.y+ei,V=C.data.width,H=C.data.height;Mi.copy(C.data,S,{x:0,y:0},{x:L,y:N},C.data),Mi.copy(C.data,S,{x:0,y:H-1},{x:L,y:N-1},{width:V,height:1}),Mi.copy(C.data,S,{x:0,y:0},{x:L,y:N+H},{width:V,height:1}),Mi.copy(C.data,S,{x:V-1,y:0},{x:L-1,y:N},{width:1,height:H}),Mi.copy(C.data,S,{x:0,y:0},{x:L+V,y:N},{width:1,height:H})}this.image=S,this.iconPositions=l,this.patternPositions=p}addImages(r,o,l){for(const p in r){const m=r[p],_={x:0,y:0,w:m.data.width+2*ei,h:m.data.height+2*ei};l.push(_),o[p]=new Xm(_,m),m.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(r,o){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const l in r.updatedImages)this.patchUpdatedImage(this.iconPositions[l],r.getImage(l),o),this.patchUpdatedImage(this.patternPositions[l],r.getImage(l),o)}patchUpdatedImage(r,o,l){if(!r||!o||r.version===o.version)return;r.version=o.version;const[p,m]=r.tl;l.update(o.data,void 0,{x:p,y:m})}}var Ba;et("ImagePosition",Xm),et("ImageAtlas",fv),v.ah=void 0,(Ba=v.ah||(v.ah={}))[Ba.none=0]="none",Ba[Ba.horizontal=1]="horizontal",Ba[Ba.vertical=2]="vertical",Ba[Ba.horizontalOnly=3]="horizontalOnly";const qc=-17;class Zc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,o){const l=new Zc;return l.scale=r||1,l.fontStack=o,l}static forImage(r){const o=new Zc;return o.imageName=r,o}}class Kl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,o){const l=new Kl;for(let p=0;p<r.sections.length;p++){const m=r.sections[p];m.image?l.addImageSection(m):l.addTextSection(m,o)}return l}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let o="";for(let l=0;l<r.length;l++){const p=r.charCodeAt(l+1)||null,m=r.charCodeAt(l-1)||null;o+=p&&Rd(p)&&!Wc[r[l+1]]||m&&Rd(m)&&!Wc[r[l-1]]||!Wc[r[l]]?r[l]:Wc[r[l]]}return o}(this.text)}trim(){let r=0;for(let l=0;l<this.text.length&&Jd[this.text.charCodeAt(l)];l++)r++;let o=this.text.length;for(let l=this.text.length-1;l>=0&&l>=r&&Jd[this.text.charCodeAt(l)];l--)o--;this.text=this.text.substring(r,o),this.sectionIndex=this.sectionIndex.slice(r,o)}substring(r,o){const l=new Kl;return l.text=this.text.substring(r,o),l.sectionIndex=this.sectionIndex.slice(r,o),l.sections=this.sections,l}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,o)=>Math.max(r,this.sections[o].scale),0)}addTextSection(r,o){this.text+=r.text,this.sections.push(Zc.forText(r.scale,r.fontStack||o));const l=this.sections.length-1;for(let p=0;p<r.text.length;++p)this.sectionIndex.push(l)}addImageSection(r){const o=r.image?r.image.name:"";if(o.length===0)return void it("Can't add FormattedSection with an empty image.");const l=this.getNextImageSectionCharCode();l?(this.text+=String.fromCharCode(l),this.sections.push(Zc.forImage(o)),this.sectionIndex.push(this.sections.length-1)):it("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Yd(i,r,o,l,p,m,_,w,S,E,C,A,L,N,V){const H=Kl.fromFeature(i,p);let X;A===v.ah.vertical&&H.verticalizePunctuation();const{processBidirectionalText:re,processStyledBidirectionalText:fe}=Mo;if(re&&H.sections.length===1){X=[];const xe=re(H.toString(),Ym(H,E,m,r,l,N));for(const ze of xe){const We=new Kl;We.text=ze,We.sections=H.sections;for(let pt=0;pt<ze.length;pt++)We.sectionIndex.push(0);X.push(We)}}else if(fe){X=[];const xe=fe(H.text,H.sectionIndex,Ym(H,E,m,r,l,N));for(const ze of xe){const We=new Kl;We.text=ze[0],We.sectionIndex=ze[1],We.sections=H.sections,X.push(We)}}else X=function(xe,ze){const We=[],pt=xe.text;let Ze=0;for(const He of ze)We.push(xe.substring(Ze,He)),Ze=He;return Ze<pt.length&&We.push(xe.substring(Ze,pt.length)),We}(H,Ym(H,E,m,r,l,N));const oe=[],he={positionedLines:oe,text:H.toString(),top:C[1],bottom:C[1],left:C[0],right:C[0],writingMode:A,iconsInText:!1,verticalizable:!1};return function(xe,ze,We,pt,Ze,He,at,rt,Qe,Ee,ut,ot){let xt=0,tr=qc,Jt=0,Jr=0;const Gi=rt==="right"?1:rt==="left"?0:.5;let mn=0;for(const Er of Ze){Er.trim();const Qr=Er.getMaxScale(),kn=(Qr-1)*qr,gn={positionedGlyphs:[],lineOffset:0};xe.positionedLines[mn]=gn;const Vn=gn.positionedGlyphs;let yn=0;if(!Er.length()){tr+=He,++mn;continue}for(let ti=0;ti<Er.length();ti++){const Ut=Er.getSection(ti),nr=Er.getSectionIndex(ti),hr=Er.getCharCode(ti);let fi=0,xr=null,Ql=null,Do=null,Oo=qr;const Ki=!(Qe===v.ah.horizontal||!ut&&!Pc(hr)||ut&&(Jd[hr]||(kr=hr,Ke.Arabic(kr)||Ke["Arabic Supplement"](kr)||Ke["Arabic Extended-A"](kr)||Ke["Arabic Presentation Forms-A"](kr)||Ke["Arabic Presentation Forms-B"](kr))));if(Ut.imageName){const Ri=pt[Ut.imageName];if(!Ri)continue;Do=Ut.imageName,xe.iconsInText=xe.iconsInText||!0,Ql=Ri.paddedRect;const nn=Ri.displaySize;Ut.scale=Ut.scale*qr/ot,xr={width:nn[0],height:nn[1],left:ei,top:-dv,advance:Ki?nn[1]:nn[0]},fi=kn+(qr-nn[1]*Ut.scale),Oo=xr.advance;const oa=Ki?nn[0]*Ut.scale-qr*Qr:nn[1]*Ut.scale-qr*Qr;oa>0&&oa>yn&&(yn=oa)}else{const Ri=We[Ut.fontStack],nn=Ri&&Ri[hr];if(nn&&nn.rect)Ql=nn.rect,xr=nn.metrics;else{const oa=ze[Ut.fontStack],Jc=oa&&oa[hr];if(!Jc)continue;xr=Jc.metrics}fi=(Qr-Ut.scale)*qr}Ki?(xe.verticalizable=!0,Vn.push({glyph:hr,imageName:Do,x:xt,y:tr+fi,vertical:Ki,scale:Ut.scale,fontStack:Ut.fontStack,sectionIndex:nr,metrics:xr,rect:Ql}),xt+=Oo*Ut.scale+Ee):(Vn.push({glyph:hr,imageName:Do,x:xt,y:tr+fi,vertical:Ki,scale:Ut.scale,fontStack:Ut.fontStack,sectionIndex:nr,metrics:xr,rect:Ql}),xt+=xr.advance*Ut.scale+Ee)}Vn.length!==0&&(Jt=Math.max(xt-Ee,Jt),Ck(Vn,0,Vn.length-1,Gi,yn)),xt=0;const Li=He*Qr+yn;gn.lineOffset=Math.max(yn,kn),tr+=Li,Jr=Math.max(Li,Jr),++mn}var kr;const Nn=tr-qc,{horizontalAlign:jn,verticalAlign:Un}=Jm(at);(function(Er,Qr,kn,gn,Vn,yn,Li,ti,Ut){const nr=(Qr-kn)*Vn;let hr=0;hr=yn!==Li?-ti*gn-qc:(-gn*Ut+.5)*Li;for(const fi of Er)for(const xr of fi.positionedGlyphs)xr.x+=nr,xr.y+=hr})(xe.positionedLines,Gi,jn,Un,Jt,Jr,He,Nn,Ze.length),xe.top+=-Un*Nn,xe.bottom=xe.top+Nn,xe.left+=-jn*Jt,xe.right=xe.left+Jt}(he,r,o,l,X,_,w,S,A,E,L,V),!function(xe){for(const ze of xe)if(ze.positionedGlyphs.length!==0)return!1;return!0}(oe)&&he}const Jd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Tk={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},kk={40:!0};function mv(i,r,o,l,p,m){if(r.imageName){const _=l[r.imageName];return _?_.displaySize[0]*r.scale*qr/m+p:0}{const _=o[r.fontStack],w=_&&_[i];return w?w.metrics.advance*r.scale+p:0}}function gv(i,r,o,l){const p=Math.pow(i-r,2);return l?i<r?p/2:2*p:p+Math.abs(o)*o}function Ek(i,r,o){let l=0;return i===10&&(l-=1e4),o&&(l+=150),i!==40&&i!==65288||(l+=50),r!==41&&r!==65289||(l+=50),l}function yv(i,r,o,l,p,m){let _=null,w=gv(r,o,p,m);for(const S of l){const E=gv(r-S.x,o,p,m)+S.badness;E<=w&&(_=S,w=E)}return{index:i,x:r,priorBreak:_,badness:w}}function _v(i){return i?_v(i.priorBreak).concat(i.index):[]}function Ym(i,r,o,l,p,m){if(!i)return[];const _=[],w=function(A,L,N,V,H,X){let re=0;for(let fe=0;fe<A.length();fe++){const oe=A.getSection(fe);re+=mv(A.getCharCode(fe),oe,V,H,L,X)}return re/Math.max(1,Math.ceil(re/N))}(i,r,o,l,p,m),S=i.text.indexOf("")>=0;let E=0;for(let A=0;A<i.length();A++){const L=i.getSection(A),N=i.getCharCode(A);if(Jd[N]||(E+=mv(N,L,l,p,r,m)),A<i.length()-1){const V=!((C=N)<11904||!(Ke["Bopomofo Extended"](C)||Ke.Bopomofo(C)||Ke["CJK Compatibility Forms"](C)||Ke["CJK Compatibility Ideographs"](C)||Ke["CJK Compatibility"](C)||Ke["CJK Radicals Supplement"](C)||Ke["CJK Strokes"](C)||Ke["CJK Symbols and Punctuation"](C)||Ke["CJK Unified Ideographs Extension A"](C)||Ke["CJK Unified Ideographs"](C)||Ke["Enclosed CJK Letters and Months"](C)||Ke["Halfwidth and Fullwidth Forms"](C)||Ke.Hiragana(C)||Ke["Ideographic Description Characters"](C)||Ke["Kangxi Radicals"](C)||Ke["Katakana Phonetic Extensions"](C)||Ke.Katakana(C)||Ke["Vertical Forms"](C)||Ke["Yi Radicals"](C)||Ke["Yi Syllables"](C)));(Tk[N]||V||L.imageName||A!==i.length()-2&&kk[i.getCharCode(A+1)])&&_.push(yv(A+1,E,w,_,Ek(N,i.getCharCode(A+1),V&&S),!1))}}var C;return _v(yv(i.length(),E,w,_,0,!0))}function Jm(i){let r=.5,o=.5;switch(i){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:r,verticalAlign:o}}function Ck(i,r,o,l,p){if(!l&&!p)return;const m=i[o],_=(i[o].x+m.metrics.advance*m.scale)*l;for(let w=r;w<=o;w++)i[w].x-=_,i[w].y+=p}function Pk(i,r,o){const{horizontalAlign:l,verticalAlign:p}=Jm(o),m=r[0]-i.displaySize[0]*l,_=r[1]-i.displaySize[1]*p;return{image:i,top:_,bottom:_+i.displaySize[1],left:m,right:m+i.displaySize[0]}}function vv(i){var r,o;let l=i.left,p=i.top,m=i.right-l,_=i.bottom-p;const w=(r=i.image.textFitWidth)!==null&&r!==void 0?r:"stretchOrShrink",S=(o=i.image.textFitHeight)!==null&&o!==void 0?o:"stretchOrShrink",E=(i.image.content[2]-i.image.content[0])/(i.image.content[3]-i.image.content[1]);if(S==="proportional"){if(w==="stretchOnly"&&m/_<E||w==="proportional"){const C=Math.ceil(_*E);l*=C/m,m=C}}else if(w==="proportional"&&S==="stretchOnly"&&E!==0&&m/_>E){const C=Math.ceil(m/E);p*=C/_,_=C}return{x1:l,y1:p,x2:l+m,y2:p+_}}function xv(i,r,o,l,p,m){const _=i.image;let w;if(_.content){const X=_.content,re=_.pixelRatio||1;w=[X[0]/re,X[1]/re,_.displaySize[0]-X[2]/re,_.displaySize[1]-X[3]/re]}const S=r.left*m,E=r.right*m;let C,A,L,N;o==="width"||o==="both"?(N=p[0]+S-l[3],A=p[0]+E+l[1]):(N=p[0]+(S+E-_.displaySize[0])/2,A=N+_.displaySize[0]);const V=r.top*m,H=r.bottom*m;return o==="height"||o==="both"?(C=p[1]+V-l[0],L=p[1]+H+l[2]):(C=p[1]+(V+H-_.displaySize[1])/2,L=C+_.displaySize[1]),{image:_,top:C,right:A,bottom:L,left:N,collisionPadding:w}}const Gc=255,Ro=128,Na=Gc*Ro;function wv(i,r){const{expression:o}=r;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new rr(i+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:l,interpolationType:p}=o;let m=0;for(;m<l.length&&l[m]<=i;)m++;m=Math.max(0,m-1);let _=m;for(;_<l.length&&l[_]<i+1;)_++;_=Math.min(l.length-1,_);const w=l[m],S=l[_];return o.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:S,interpolationType:p}:{kind:"camera",minZoom:w,maxZoom:S,minSize:o.evaluate(new rr(w)),maxSize:o.evaluate(new rr(S)),interpolationType:p}}}function Qm(i,r,o){let l="never";const p=i.get(r);return p?l=p:i.get(o)&&(l="always"),l}const Ik=Fa.VectorTileFeature.types,Ak=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Qd(i,r,o,l,p,m,_,w,S,E,C,A,L){const N=w?Math.min(Na,Math.round(w[0])):0,V=w?Math.min(Na,Math.round(w[1])):0;i.emplaceBack(r,o,Math.round(32*l),Math.round(32*p),m,_,(N<<1)+(S?1:0),V,16*E,16*C,256*A,256*L)}function eg(i,r,o){i.emplaceBack(r.x,r.y,o),i.emplaceBack(r.x,r.y,o),i.emplaceBack(r.x,r.y,o),i.emplaceBack(r.x,r.y,o)}function Mk(i){for(const r of i.sections)if(Ic(r.text))return!0;return!1}class tg{constructor(r){this.layoutVertexArray=new Ai,this.indexArray=new Yr,this.programConfigurations=r,this.segments=new Wr,this.dynamicLayoutVertexArray=new zo,this.opacityVertexArray=new La,this.hasVisibleVertices=!1,this.placedSymbolArray=new ur}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,o,l,p){this.isEmpty()||(l&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,sk.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,lk.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,Ak,!0),this.opacityVertexBuffer.itemSize=1),(l||p)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}et("SymbolBuffers",tg);class rg{constructor(r,o,l){this.layoutVertexArray=new r,this.layoutAttributes=o,this.indexArray=new l,this.segments=new Wr,this.collisionVertexArray=new pn}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,uk.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}et("CollisionBuffers",rg);class Xl{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(_=>_.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Rm([]),this.placementViewportMatrix=Rm([]);const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=wv(this.zoom,o["text-size"]),this.iconSizeData=wv(this.zoom,o["icon-size"]);const l=this.layers[0].layout,p=l.get("symbol-sort-key"),m=l.get("symbol-z-order");this.canOverlap=Qm(l,"text-overlap","text-allow-overlap")!=="never"||Qm(l,"icon-overlap","icon-allow-overlap")!=="never"||l.get("text-ignore-placement")||l.get("icon-ignore-placement"),this.sortFeaturesByKey=m!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,l.get("symbol-placement")==="point"&&(this.writingModes=l.get("text-writing-mode").map(_=>v.ah[_])),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=r.sourceID}createArrays(){this.text=new tg(new Os(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new tg(new Os(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new cr,this.lineVertexArray=new Fn,this.symbolInstances=new Pi,this.textAnchorOffsets=new cn}calculateGlyphDependencies(r,o,l,p,m){for(let _=0;_<r.length;_++)if(o[r.charCodeAt(_)]=!0,(l||p)&&m){const w=Wc[r.charAt(_)];w&&(o[w.charCodeAt(0)]=!0)}}populate(r,o,l){const p=this.layers[0],m=p.layout,_=m.get("text-font"),w=m.get("text-field"),S=m.get("icon-image"),E=(w.value.kind!=="constant"||w.value.value instanceof Kn&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&(_.value.kind!=="constant"||_.value.value.length>0),C=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,A=m.get("symbol-sort-key");if(this.features=[],!E&&!C)return;const L=o.iconDependencies,N=o.glyphDependencies,V=o.availableImages,H=new rr(this.zoom);for(const{feature:X,id:re,index:fe,sourceLayerIndex:oe}of r){const he=p._featureFilter.needGeometry,xe=Bs(X,he);if(!p._featureFilter.filter(H,xe,l))continue;let ze,We;if(he||(xe.geometry=Fs(X)),E){const Ze=p.getValueAndResolveTokens("text-field",xe,l,V),He=Kn.factory(Ze),at=this.hasRTLText=this.hasRTLText||Mk(He);(!at||Mo.getRTLTextPluginStatus()==="unavailable"||at&&Mo.isParsed())&&(ze=hk(He,p,xe))}if(C){const Ze=p.getValueAndResolveTokens("icon-image",xe,l,V);We=Ze instanceof hi?Ze:hi.fromString(Ze)}if(!ze&&!We)continue;const pt=this.sortFeaturesByKey?A.evaluate(xe,{},l):void 0;if(this.features.push({id:re,text:ze,icon:We,index:fe,sourceLayerIndex:oe,geometry:xe.geometry,properties:X.properties,type:Ik[X.type],sortKey:pt}),We&&(L[We.name]=!0),ze){const Ze=_.evaluate(xe,{},l).join(","),He=m.get("text-rotation-alignment")!=="viewport"&&m.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(v.ah.vertical)>=0;for(const at of ze.sections)if(at.image)L[at.image.name]=!0;else{const rt=Cc(ze.toString()),Qe=at.fontStack||Ze,Ee=N[Qe]=N[Qe]||{};this.calculateGlyphDependencies(at.text,Ee,He,this.allowVerticalPlacement,rt)}}}m.get("symbol-placement")==="line"&&(this.features=function(X){const re={},fe={},oe=[];let he=0;function xe(Ze){oe.push(X[Ze]),he++}function ze(Ze,He,at){const rt=fe[Ze];return delete fe[Ze],fe[He]=rt,oe[rt].geometry[0].pop(),oe[rt].geometry[0]=oe[rt].geometry[0].concat(at[0]),rt}function We(Ze,He,at){const rt=re[He];return delete re[He],re[Ze]=rt,oe[rt].geometry[0].shift(),oe[rt].geometry[0]=at[0].concat(oe[rt].geometry[0]),rt}function pt(Ze,He,at){const rt=at?He[0][He[0].length-1]:He[0][0];return`${Ze}:${rt.x}:${rt.y}`}for(let Ze=0;Ze<X.length;Ze++){const He=X[Ze],at=He.geometry,rt=He.text?He.text.toString():null;if(!rt){xe(Ze);continue}const Qe=pt(rt,at),Ee=pt(rt,at,!0);if(Qe in fe&&Ee in re&&fe[Qe]!==re[Ee]){const ut=We(Qe,Ee,at),ot=ze(Qe,Ee,oe[ut].geometry);delete re[Qe],delete fe[Ee],fe[pt(rt,oe[ot].geometry,!0)]=ot,oe[ut].geometry=null}else Qe in fe?ze(Qe,Ee,at):Ee in re?We(Qe,Ee,at):(xe(Ze),re[Qe]=he-1,fe[Ee]=he-1)}return oe.filter(Ze=>Ze.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((X,re)=>X.sortKey-re.sortKey)}update(r,o,l){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,o,this.layers,l),this.icon.programConfigurations.updatePaintArrays(r,o,this.layers,l))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,o){const l=this.lineVertexArray.length;if(r.segment!==void 0){let p=r.dist(o[r.segment+1]),m=r.dist(o[r.segment]);const _={};for(let w=r.segment+1;w<o.length;w++)_[w]={x:o[w].x,y:o[w].y,tileUnitDistanceFromAnchor:p},w<o.length-1&&(p+=o[w+1].dist(o[w]));for(let w=r.segment||0;w>=0;w--)_[w]={x:o[w].x,y:o[w].y,tileUnitDistanceFromAnchor:m},w>0&&(m+=o[w-1].dist(o[w]));for(let w=0;w<o.length;w++){const S=_[w];this.lineVertexArray.emplaceBack(S.x,S.y,S.tileUnitDistanceFromAnchor)}}return{lineStartIndex:l,lineLength:this.lineVertexArray.length-l}}addSymbols(r,o,l,p,m,_,w,S,E,C,A,L){const N=r.indexArray,V=r.layoutVertexArray,H=r.segments.prepareSegment(4*o.length,V,N,this.canOverlap?_.sortKey:void 0),X=this.glyphOffsetArray.length,re=H.vertexLength,fe=this.allowVerticalPlacement&&w===v.ah.vertical?Math.PI/2:0,oe=_.text&&_.text.sections;for(let he=0;he<o.length;he++){const{tl:xe,tr:ze,bl:We,br:pt,tex:Ze,pixelOffsetTL:He,pixelOffsetBR:at,minFontScaleX:rt,minFontScaleY:Qe,glyphOffset:Ee,isSDF:ut,sectionIndex:ot}=o[he],xt=H.vertexLength,tr=Ee[1];Qd(V,S.x,S.y,xe.x,tr+xe.y,Ze.x,Ze.y,l,ut,He.x,He.y,rt,Qe),Qd(V,S.x,S.y,ze.x,tr+ze.y,Ze.x+Ze.w,Ze.y,l,ut,at.x,He.y,rt,Qe),Qd(V,S.x,S.y,We.x,tr+We.y,Ze.x,Ze.y+Ze.h,l,ut,He.x,at.y,rt,Qe),Qd(V,S.x,S.y,pt.x,tr+pt.y,Ze.x+Ze.w,Ze.y+Ze.h,l,ut,at.x,at.y,rt,Qe),eg(r.dynamicLayoutVertexArray,S,fe),N.emplaceBack(xt,xt+1,xt+2),N.emplaceBack(xt+1,xt+2,xt+3),H.vertexLength+=4,H.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ee[0]),he!==o.length-1&&ot===o[he+1].sectionIndex||r.programConfigurations.populatePaintArrays(V.length,_,_.index,{},L,oe&&oe[ot])}r.placedSymbolArray.emplaceBack(S.x,S.y,X,this.glyphOffsetArray.length-X,re,E,C,S.segment,l?l[0]:0,l?l[1]:0,p[0],p[1],w,0,!1,0,A)}_addCollisionDebugVertex(r,o,l,p,m,_){return o.emplaceBack(0,0),r.emplaceBack(l.x,l.y,p,m,Math.round(_.x),Math.round(_.y))}addCollisionDebugVertices(r,o,l,p,m,_,w){const S=m.segments.prepareSegment(4,m.layoutVertexArray,m.indexArray),E=S.vertexLength,C=m.layoutVertexArray,A=m.collisionVertexArray,L=w.anchorX,N=w.anchorY;this._addCollisionDebugVertex(C,A,_,L,N,new D(r,o)),this._addCollisionDebugVertex(C,A,_,L,N,new D(l,o)),this._addCollisionDebugVertex(C,A,_,L,N,new D(l,p)),this._addCollisionDebugVertex(C,A,_,L,N,new D(r,p)),S.vertexLength+=4;const V=m.indexArray;V.emplaceBack(E,E+1),V.emplaceBack(E+1,E+2),V.emplaceBack(E+2,E+3),V.emplaceBack(E+3,E),S.primitiveLength+=4}addDebugCollisionBoxes(r,o,l,p){for(let m=r;m<o;m++){const _=this.collisionBoxArray.get(m);this.addCollisionDebugVertices(_.x1,_.y1,_.x2,_.y2,p?this.textCollisionBox:this.iconCollisionBox,_.anchorPoint,l)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new rg(dn,iv.members,yr),this.iconCollisionBox=new rg(dn,iv.members,yr);for(let r=0;r<this.symbolInstances.length;r++){const o=this.symbolInstances.get(r);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(r,o,l,p,m,_,w,S,E){const C={};for(let A=o;A<l;A++){const L=r.get(A);C.textBox={x1:L.x1,y1:L.y1,x2:L.x2,y2:L.y2,anchorPointX:L.anchorPointX,anchorPointY:L.anchorPointY},C.textFeatureIndex=L.featureIndex;break}for(let A=p;A<m;A++){const L=r.get(A);C.verticalTextBox={x1:L.x1,y1:L.y1,x2:L.x2,y2:L.y2,anchorPointX:L.anchorPointX,anchorPointY:L.anchorPointY},C.verticalTextFeatureIndex=L.featureIndex;break}for(let A=_;A<w;A++){const L=r.get(A);C.iconBox={x1:L.x1,y1:L.y1,x2:L.x2,y2:L.y2,anchorPointX:L.anchorPointX,anchorPointY:L.anchorPointY},C.iconFeatureIndex=L.featureIndex;break}for(let A=S;A<E;A++){const L=r.get(A);C.verticalIconBox={x1:L.x1,y1:L.y1,x2:L.x2,y2:L.y2,anchorPointX:L.anchorPointX,anchorPointY:L.anchorPointY},C.verticalIconFeatureIndex=L.featureIndex;break}return C}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const l=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,l.textBoxStartIndex,l.textBoxEndIndex,l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l.iconBoxStartIndex,l.iconBoxEndIndex,l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,o){const l=r.placedSymbolArray.get(o),p=l.vertexStartIndex+4*l.numGlyphs;for(let m=l.vertexStartIndex;m<p;m+=4)r.indexArray.emplaceBack(m,m+1,m+2),r.indexArray.emplaceBack(m+1,m+2,m+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(r),l=Math.cos(r),p=[],m=[],_=[];for(let w=0;w<this.symbolInstances.length;++w){_.push(w);const S=this.symbolInstances.get(w);p.push(0|Math.round(o*S.anchorX+l*S.anchorY)),m.push(S.featureIndex)}return _.sort((w,S)=>p[w]-p[S]||m[S]-m[w]),_}addToSortKeyRanges(r,o){const l=this.sortKeyRanges[this.sortKeyRanges.length-1];l&&l.sortKey===o?l.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const l=this.symbolInstances.get(o);this.featureSortOrder.push(l.featureIndex),[l.rightJustifiedTextSymbolIndex,l.centerJustifiedTextSymbolIndex,l.leftJustifiedTextSymbolIndex].forEach((p,m,_)=>{p>=0&&_.indexOf(p)===m&&this.addIndicesForPlacedSymbol(this.text,p)}),l.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,l.verticalPlacedTextSymbolIndex),l.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.placedIconSymbolIndex),l.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let bv,Sv;et("SymbolBucket",Xl,{omit:["layers","collisionBoxArray","features","compareText"]}),Xl.MAX_GLYPHS=65535,Xl.addDynamicAttributes=eg;var ng={get paint(){return Sv=Sv||new d({"icon-opacity":new gt(be.paint_symbol["icon-opacity"]),"icon-color":new gt(be.paint_symbol["icon-color"]),"icon-halo-color":new gt(be.paint_symbol["icon-halo-color"]),"icon-halo-width":new gt(be.paint_symbol["icon-halo-width"]),"icon-halo-blur":new gt(be.paint_symbol["icon-halo-blur"]),"icon-translate":new lt(be.paint_symbol["icon-translate"]),"icon-translate-anchor":new lt(be.paint_symbol["icon-translate-anchor"]),"text-opacity":new gt(be.paint_symbol["text-opacity"]),"text-color":new gt(be.paint_symbol["text-color"],{runtimeType:tn,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new gt(be.paint_symbol["text-halo-color"]),"text-halo-width":new gt(be.paint_symbol["text-halo-width"]),"text-halo-blur":new gt(be.paint_symbol["text-halo-blur"]),"text-translate":new lt(be.paint_symbol["text-translate"]),"text-translate-anchor":new lt(be.paint_symbol["text-translate-anchor"])})},get layout(){return bv=bv||new d({"symbol-placement":new lt(be.layout_symbol["symbol-placement"]),"symbol-spacing":new lt(be.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new lt(be.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new gt(be.layout_symbol["symbol-sort-key"]),"symbol-z-order":new lt(be.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new lt(be.layout_symbol["icon-allow-overlap"]),"icon-overlap":new lt(be.layout_symbol["icon-overlap"]),"icon-ignore-placement":new lt(be.layout_symbol["icon-ignore-placement"]),"icon-optional":new lt(be.layout_symbol["icon-optional"]),"icon-rotation-alignment":new lt(be.layout_symbol["icon-rotation-alignment"]),"icon-size":new gt(be.layout_symbol["icon-size"]),"icon-text-fit":new lt(be.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new lt(be.layout_symbol["icon-text-fit-padding"]),"icon-image":new gt(be.layout_symbol["icon-image"]),"icon-rotate":new gt(be.layout_symbol["icon-rotate"]),"icon-padding":new gt(be.layout_symbol["icon-padding"]),"icon-keep-upright":new lt(be.layout_symbol["icon-keep-upright"]),"icon-offset":new gt(be.layout_symbol["icon-offset"]),"icon-anchor":new gt(be.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new lt(be.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new lt(be.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new lt(be.layout_symbol["text-rotation-alignment"]),"text-field":new gt(be.layout_symbol["text-field"]),"text-font":new gt(be.layout_symbol["text-font"]),"text-size":new gt(be.layout_symbol["text-size"]),"text-max-width":new gt(be.layout_symbol["text-max-width"]),"text-line-height":new lt(be.layout_symbol["text-line-height"]),"text-letter-spacing":new gt(be.layout_symbol["text-letter-spacing"]),"text-justify":new gt(be.layout_symbol["text-justify"]),"text-radial-offset":new gt(be.layout_symbol["text-radial-offset"]),"text-variable-anchor":new lt(be.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new gt(be.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new gt(be.layout_symbol["text-anchor"]),"text-max-angle":new lt(be.layout_symbol["text-max-angle"]),"text-writing-mode":new lt(be.layout_symbol["text-writing-mode"]),"text-rotate":new gt(be.layout_symbol["text-rotate"]),"text-padding":new lt(be.layout_symbol["text-padding"]),"text-keep-upright":new lt(be.layout_symbol["text-keep-upright"]),"text-transform":new gt(be.layout_symbol["text-transform"]),"text-offset":new gt(be.layout_symbol["text-offset"]),"text-allow-overlap":new lt(be.layout_symbol["text-allow-overlap"]),"text-overlap":new lt(be.layout_symbol["text-overlap"]),"text-ignore-placement":new lt(be.layout_symbol["text-ignore-placement"]),"text-optional":new lt(be.layout_symbol["text-optional"])})}};class Tv{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:so,this.defaultValue=r}evaluate(r){if(r.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(r.formattedSection))return o.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}et("FormatSectionOverride",Tv,{omit:["defaultValue"]});class ep extends y{constructor(r){super(r,ng)}recalculate(r,o){if(super.recalculate(r,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const l=this.layout.get("text-writing-mode");if(l){const p=[];for(const m of l)p.indexOf(m)<0&&p.push(m);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,o,l,p){const m=this.layout.get(r).evaluate(o,{},l,p),_=this._unevaluatedLayout._values[r];return _.isDataDriven()||El(_.value)||!m?m:function(w,S){return S.replace(/{([^{}]+)}/g,(E,C)=>w&&C in w?String(w[C]):"")}(o.properties,m)}createBucket(r){return new Xl(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of ng.paint.overridableProperties){if(!ep.hasPaintOverride(this.layout,r))continue;const o=this.paint.get(r),l=new Tv(o),p=new pc(l,o.property.specification);let m=null;m=o.value.kind==="constant"||o.value.kind==="source"?new fc("source",p):new mc("composite",p,o.value.zoomStops),this.paint._values[r]=new Zi(o.property,m,o.parameters)}}_handleOverridablePaintPropertyUpdate(r,o,l){return!(!this.layout||o.isDataDriven()||l.isDataDriven())&&ep.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,o){const l=r.get("text-field"),p=ng.paint.properties[o];let m=!1;const _=w=>{for(const S of w)if(p.overrides&&p.overrides.hasOverride(S))return void(m=!0)};if(l.value.kind==="constant"&&l.value.value instanceof Kn)_(l.value.value.sections);else if(l.value.kind==="source"){const w=E=>{m||(E instanceof Wo&&Fr(E.value)===Ei?_(E.value.sections):E instanceof pl?_(E.sections):E.eachChild(w))},S=l.value;S._styleExpression&&w(S._styleExpression.expression)}return m}}let kv;var zk={get paint(){return kv=kv||new d({"background-color":new lt(be.paint_background["background-color"]),"background-pattern":new n(be.paint_background["background-pattern"]),"background-opacity":new lt(be.paint_background["background-opacity"])})}};class Lk extends y{constructor(r){super(r,zk)}}let Ev;var Rk={get paint(){return Ev=Ev||new d({"raster-opacity":new lt(be.paint_raster["raster-opacity"]),"raster-hue-rotate":new lt(be.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new lt(be.paint_raster["raster-brightness-min"]),"raster-brightness-max":new lt(be.paint_raster["raster-brightness-max"]),"raster-saturation":new lt(be.paint_raster["raster-saturation"]),"raster-contrast":new lt(be.paint_raster["raster-contrast"]),"raster-resampling":new lt(be.paint_raster["raster-resampling"]),"raster-fade-duration":new lt(be.paint_raster["raster-fade-duration"])})}};class Dk extends y{constructor(r){super(r,Rk)}}class Ok extends y{constructor(r){super(r,{}),this.onAdd=o=>{this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)},this.onRemove=o=>{this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Fk{constructor(r){this._methodToThrottle=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const ig=63710088e-1;class ja{constructor(r,o){if(isNaN(r)||isNaN(o))throw new Error(`Invalid LngLat object: (${r}, ${o})`);if(this.lng=+r,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ja(Ae(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const o=Math.PI/180,l=this.lat*o,p=r.lat*o,m=Math.sin(l)*Math.sin(p)+Math.cos(l)*Math.cos(p)*Math.cos((r.lng-this.lng)*o);return ig*Math.acos(Math.min(m,1))}static convert(r){if(r instanceof ja)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new ja(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new ja(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Cv=2*Math.PI*ig;function Pv(i){return Cv*Math.cos(i*Math.PI/180)}function Iv(i){return(180+i)/360}function Av(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function Mv(i,r){return i/Pv(r)}function og(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}class tp{constructor(r,o,l=0){this.x=+r,this.y=+o,this.z=+l}static fromLngLat(r,o=0){const l=ja.convert(r);return new tp(Iv(l.lng),Av(l.lat),Mv(o,l.lat))}toLngLat(){return new ja(360*this.x-180,og(this.y))}toAltitude(){return this.z*Pv(og(this.y))}meterInMercatorCoordinateUnits(){return 1/Cv*(r=og(this.y),1/Math.cos(r*Math.PI/180));var r}}function zv(i,r,o){var l=2*Math.PI*6378137/256/Math.pow(2,o);return[i*l-2*Math.PI*6378137/2,r*l-2*Math.PI*6378137/2]}class ag{constructor(r,o,l){if(r<0||r>25||l<0||l>=Math.pow(2,r)||o<0||o>=Math.pow(2,r))throw new Error(`x=${o}, y=${l}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=o,this.y=l,this.key=Kc(0,r,r,o,l)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,o,l){const p=(_=this.y,w=this.z,S=zv(256*(m=this.x),256*(_=Math.pow(2,w)-_-1),w),E=zv(256*(m+1),256*(_+1),w),S[0]+","+S[1]+","+E[0]+","+E[1]);var m,_,w,S,E;const C=function(A,L,N){let V,H="";for(let X=A;X>0;X--)V=1<<X-1,H+=(L&V?1:0)+(N&V?2:0);return H}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(l==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,C).replace(/{bbox-epsg-3857}/g,p)}isChildOf(r){const o=this.z-r.z;return o>0&&r.x===this.x>>o&&r.y===this.y>>o}getTilePoint(r){const o=Math.pow(2,this.z);return new D((r.x*o-this.x)*Br,(r.y*o-this.y)*Br)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Lv{constructor(r,o){this.wrap=r,this.canonical=o,this.key=Kc(r,o.z,o.z,o.x,o.y)}}class zi{constructor(r,o,l,p,m){if(r<l)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${l}`);this.overscaledZ=r,this.wrap=o,this.canonical=new ag(l,+p,+m),this.key=Kc(o,r,l,p,m)}clone(){return new zi(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const o=this.canonical.z-r;return r>this.canonical.z?new zi(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new zi(r,this.wrap,r,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(r,o){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-r;return r>this.canonical.z?Kc(this.wrap*+o,r,this.canonical.z,this.canonical.x,this.canonical.y):Kc(this.wrap*+o,r,r,this.canonical.x>>l,this.canonical.y>>l)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const o=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>o&&r.canonical.y===this.canonical.y>>o}children(r){if(this.overscaledZ>=r)return[new zi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,l=2*this.canonical.x,p=2*this.canonical.y;return[new zi(o,this.wrap,o,l,p),new zi(o,this.wrap,o,l+1,p),new zi(o,this.wrap,o,l,p+1),new zi(o,this.wrap,o,l+1,p+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new zi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new zi(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Lv(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new tp(r.x-this.wrap,r.y))}}function Kc(i,r,o,l,p){(i*=2)<0&&(i=-1*i-1);const m=1<<o;return(m*m*i+m*p+l).toString(36)+o.toString(36)+r.toString(36)}et("CanonicalTileID",ag),et("OverscaledTileID",zi,{omit:["posMatrix"]});class Rv{constructor(r,o,l,p=1,m=1,_=1,w=0){if(this.uid=r,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(l&&!["mapbox","terrarium","custom"].includes(l))return void it(`"${l}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=o.height;const S=this.dim=o.height-2;switch(this.data=new Uint32Array(o.data.buffer),l){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=p,this.greenFactor=m,this.blueFactor=_,this.baseShift=w;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let E=0;E<S;E++)this.data[this._idx(-1,E)]=this.data[this._idx(0,E)],this.data[this._idx(S,E)]=this.data[this._idx(S-1,E)],this.data[this._idx(E,-1)]=this.data[this._idx(E,0)],this.data[this._idx(E,S)]=this.data[this._idx(E,S-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(S,-1)]=this.data[this._idx(S-1,0)],this.data[this._idx(-1,S)]=this.data[this._idx(0,S-1)],this.data[this._idx(S,S)]=this.data[this._idx(S-1,S-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let E=0;E<S;E++)for(let C=0;C<S;C++){const A=this.get(E,C);A>this.max&&(this.max=A),A<this.min&&(this.min=A)}}get(r,o){const l=new Uint8Array(this.data.buffer),p=4*this._idx(r,o);return this.unpack(l[p],l[p+1],l[p+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,o){if(r<-1||r>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(r+1)}unpack(r,o,l){return r*this.redFactor+o*this.greenFactor+l*this.blueFactor-this.baseShift}getPixels(){return new Mi({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,o,l){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let p=o*this.dim,m=o*this.dim+this.dim,_=l*this.dim,w=l*this.dim+this.dim;switch(o){case-1:p=m-1;break;case 1:m=p+1}switch(l){case-1:_=w-1;break;case 1:w=_+1}const S=-o*this.dim,E=-l*this.dim;for(let C=_;C<w;C++)for(let A=p;A<m;A++)this.data[this._idx(A,C)]=r.data[this._idx(A+S,C+E)]}}et("DEMData",Rv);class Dv{constructor(r){this._stringToNumber={},this._numberToString=[];for(let o=0;o<r.length;o++){const l=r[o];this._stringToNumber[l]=o,this._numberToString[o]=l}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class Ov{constructor(r,o,l,p,m){this.type="Feature",this._vectorTileFeature=r,r._z=o,r._x=l,r._y=p,this.properties=r.properties,this.id=m}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&(r[o]=this[o]);return r}}class Fv{constructor(r,o){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new zs(Br,16,0),this.grid3D=new zs(Br,16,0),this.featureIndexArray=new Ii,this.promoteId=o}insert(r,o,l,p,m,_){const w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(l,p,m);const S=_?this.grid3D:this.grid;for(let E=0;E<o.length;E++){const C=o[E],A=[1/0,1/0,-1/0,-1/0];for(let L=0;L<C.length;L++){const N=C[L];A[0]=Math.min(A[0],N.x),A[1]=Math.min(A[1],N.y),A[2]=Math.max(A[2],N.x),A[3]=Math.max(A[3],N.y)}A[0]<Br&&A[1]<Br&&A[2]>=0&&A[3]>=0&&S.insert(w,A[0],A[1],A[2],A[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Fa.VectorTile(new Gm(this.rawTileData)).layers,this.sourceLayerCoder=new Dv(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,o,l,p){this.loadVTLayers();const m=r.params||{},_=Br/r.tileSize/r.scale,w=gc(m.filter),S=r.queryGeometry,E=r.queryPadding*_,C=Nv(S),A=this.grid.query(C.minX-E,C.minY-E,C.maxX+E,C.maxY+E),L=Nv(r.cameraQueryGeometry),N=this.grid3D.query(L.minX-E,L.minY-E,L.maxX+E,L.maxY+E,(X,re,fe,oe)=>function(he,xe,ze,We,pt){for(const He of he)if(xe<=He.x&&ze<=He.y&&We>=He.x&&pt>=He.y)return!0;const Ze=[new D(xe,ze),new D(xe,pt),new D(We,pt),new D(We,ze)];if(he.length>2){for(const He of Ze)if($l(he,He))return!0}for(let He=0;He<he.length-1;He++)if(yT(he[He],he[He+1],Ze))return!0;return!1}(r.cameraQueryGeometry,X-E,re-E,fe+E,oe+E));for(const X of N)A.push(X);A.sort(Bk);const V={};let H;for(let X=0;X<A.length;X++){const re=A[X];if(re===H)continue;H=re;const fe=this.featureIndexArray.get(re);let oe=null;this.loadMatchingFeature(V,fe.bucketIndex,fe.sourceLayerIndex,fe.featureIndex,w,m.layers,m.availableImages,o,l,p,(he,xe,ze)=>(oe||(oe=Fs(he)),xe.queryIntersectsFeature(S,he,ze,oe,this.z,r.transform,_,r.pixelPosMatrix)))}return V}loadMatchingFeature(r,o,l,p,m,_,w,S,E,C,A){const L=this.bucketLayerIDs[o];if(_&&!function(X,re){for(let fe=0;fe<X.length;fe++)if(re.indexOf(X[fe])>=0)return!0;return!1}(_,L))return;const N=this.sourceLayerCoder.decode(l),V=this.vtLayers[N].feature(p);if(m.needGeometry){const X=Bs(V,!0);if(!m.filter(new rr(this.tileID.overscaledZ),X,this.tileID.canonical))return}else if(!m.filter(new rr(this.tileID.overscaledZ),V))return;const H=this.getId(V,N);for(let X=0;X<L.length;X++){const re=L[X];if(_&&_.indexOf(re)<0)continue;const fe=S[re];if(!fe)continue;let oe={};H&&C&&(oe=C.getState(fe.sourceLayer||"_geojsonTileLayer",H));const he=Le({},E[re]);he.paint=Bv(he.paint,fe.paint,V,oe,w),he.layout=Bv(he.layout,fe.layout,V,oe,w);const xe=!A||A(V,fe,oe);if(!xe)continue;const ze=new Ov(V,this.z,this.x,this.y,H);ze.layer=he;let We=r[re];We===void 0&&(We=r[re]=[]),We.push({featureIndex:p,feature:ze,intersectionZ:xe})}}lookupSymbolFeatures(r,o,l,p,m,_,w,S){const E={};this.loadVTLayers();const C=gc(m);for(const A of r)this.loadMatchingFeature(E,l,p,A,C,_,w,S,o);return E}hasLayer(r){for(const o of this.bucketLayerIDs)for(const l of o)if(r===l)return!0;return!1}getId(r,o){let l=r.id;return this.promoteId&&(l=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof l=="boolean"&&(l=Number(l))),l}}function Bv(i,r,o,l,p){return Re(i,(m,_)=>{const w=r instanceof Ol?r.get(_):null;return w&&w.evaluate?w.evaluate(o,l,p):w})}function Nv(i){let r=1/0,o=1/0,l=-1/0,p=-1/0;for(const m of i)r=Math.min(r,m.x),o=Math.min(o,m.y),l=Math.max(l,m.x),p=Math.max(p,m.y);return{minX:r,minY:o,maxX:l,maxY:p}}function Bk(i,r){return r-i}function jv(i,r,o,l,p){const m=[];for(let _=0;_<i.length;_++){const w=i[_];let S;for(let E=0;E<w.length-1;E++){let C=w[E],A=w[E+1];C.x<r&&A.x<r||(C.x<r?C=new D(r,C.y+(r-C.x)/(A.x-C.x)*(A.y-C.y))._round():A.x<r&&(A=new D(r,C.y+(r-C.x)/(A.x-C.x)*(A.y-C.y))._round()),C.y<o&&A.y<o||(C.y<o?C=new D(C.x+(o-C.y)/(A.y-C.y)*(A.x-C.x),o)._round():A.y<o&&(A=new D(C.x+(o-C.y)/(A.y-C.y)*(A.x-C.x),o)._round()),C.x>=l&&A.x>=l||(C.x>=l?C=new D(l,C.y+(l-C.x)/(A.x-C.x)*(A.y-C.y))._round():A.x>=l&&(A=new D(l,C.y+(l-C.x)/(A.x-C.x)*(A.y-C.y))._round()),C.y>=p&&A.y>=p||(C.y>=p?C=new D(C.x+(p-C.y)/(A.y-C.y)*(A.x-C.x),p)._round():A.y>=p&&(A=new D(C.x+(p-C.y)/(A.y-C.y)*(A.x-C.x),p)._round()),S&&C.equals(S[S.length-1])||(S=[C],m.push(S)),S.push(A)))))}}return m}et("FeatureIndex",Fv,{omit:["rawTileData","sourceLayerCoder"]});class Ua extends D{constructor(r,o,l,p){super(r,o),this.angle=l,p!==void 0&&(this.segment=p)}clone(){return new Ua(this.x,this.y,this.angle,this.segment)}}function Uv(i,r,o,l,p){if(r.segment===void 0||o===0)return!0;let m=r,_=r.segment+1,w=0;for(;w>-o/2;){if(_--,_<0)return!1;w-=i[_].dist(m),m=i[_]}w+=i[_].dist(i[_+1]),_++;const S=[];let E=0;for(;w<o/2;){const C=i[_],A=i[_+1];if(!A)return!1;let L=i[_-1].angleTo(C)-C.angleTo(A);for(L=Math.abs((L+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:w,angleDelta:L}),E+=L;w-S[0].distance>l;)E-=S.shift().angleDelta;if(E>p)return!1;_++,w+=C.dist(A)}return!0}function Vv(i){let r=0;for(let o=0;o<i.length-1;o++)r+=i[o].dist(i[o+1]);return r}function $v(i,r,o){return i?.6*r*o:0}function Hv(i,r){return Math.max(i?i.right-i.left:0,r?r.right-r.left:0)}function Nk(i,r,o,l,p,m){const _=$v(o,p,m),w=Hv(o,l)*m;let S=0;const E=Vv(i)/2;for(let C=0;C<i.length-1;C++){const A=i[C],L=i[C+1],N=A.dist(L);if(S+N>E){const V=(E-S)/N,H=Sn.number(A.x,L.x,V),X=Sn.number(A.y,L.y,V),re=new Ua(H,X,L.angleTo(A),C);return re._round(),!_||Uv(i,re,w,_,r)?re:void 0}S+=N}}function jk(i,r,o,l,p,m,_,w,S){const E=$v(l,m,_),C=Hv(l,p),A=C*_,L=i[0].x===0||i[0].x===S||i[0].y===0||i[0].y===S;return r-A<r/4&&(r=A+r/4),Wv(i,L?r/2*w%r:(C/2+2*m)*_*w%r,r,E,o,A,L,!1,S)}function Wv(i,r,o,l,p,m,_,w,S){const E=m/2,C=Vv(i);let A=0,L=r-o,N=[];for(let V=0;V<i.length-1;V++){const H=i[V],X=i[V+1],re=H.dist(X),fe=X.angleTo(H);for(;L+o<A+re;){L+=o;const oe=(L-A)/re,he=Sn.number(H.x,X.x,oe),xe=Sn.number(H.y,X.y,oe);if(he>=0&&he<S&&xe>=0&&xe<S&&L-E>=0&&L+E<=C){const ze=new Ua(he,xe,fe,V);ze._round(),l&&!Uv(i,ze,m,l,p)||N.push(ze)}}A+=re}return w||N.length||_||(N=Wv(i,A/2,o,l,p,m,_,!0,S)),N}et("Anchor",Ua);const Yl=ei;function qv(i,r,o,l){const p=[],m=i.image,_=m.pixelRatio,w=m.paddedRect.w-2*Yl,S=m.paddedRect.h-2*Yl;let E={x1:i.left,y1:i.top,x2:i.right,y2:i.bottom};const C=m.stretchX||[[0,w]],A=m.stretchY||[[0,S]],L=(Ee,ut)=>Ee+ut[1]-ut[0],N=C.reduce(L,0),V=A.reduce(L,0),H=w-N,X=S-V;let re=0,fe=N,oe=0,he=V,xe=0,ze=H,We=0,pt=X;if(m.content&&l){const Ee=m.content,ut=Ee[2]-Ee[0],ot=Ee[3]-Ee[1];(m.textFitWidth||m.textFitHeight)&&(E=vv(i)),re=rp(C,0,Ee[0]),oe=rp(A,0,Ee[1]),fe=rp(C,Ee[0],Ee[2]),he=rp(A,Ee[1],Ee[3]),xe=Ee[0]-re,We=Ee[1]-oe,ze=ut-fe,pt=ot-he}const Ze=E.x1,He=E.y1,at=E.x2-Ze,rt=E.y2-He,Qe=(Ee,ut,ot,xt)=>{const tr=np(Ee.stretch-re,fe,at,Ze),Jt=ip(Ee.fixed-xe,ze,Ee.stretch,N),Jr=np(ut.stretch-oe,he,rt,He),Gi=ip(ut.fixed-We,pt,ut.stretch,V),mn=np(ot.stretch-re,fe,at,Ze),kr=ip(ot.fixed-xe,ze,ot.stretch,N),Nn=np(xt.stretch-oe,he,rt,He),jn=ip(xt.fixed-We,pt,xt.stretch,V),Un=new D(tr,Jr),Er=new D(mn,Jr),Qr=new D(mn,Nn),kn=new D(tr,Nn),gn=new D(Jt/_,Gi/_),Vn=new D(kr/_,jn/_),yn=r*Math.PI/180;if(yn){const Ut=Math.sin(yn),nr=Math.cos(yn),hr=[nr,-Ut,Ut,nr];Un._matMult(hr),Er._matMult(hr),kn._matMult(hr),Qr._matMult(hr)}const Li=Ee.stretch+Ee.fixed,ti=ut.stretch+ut.fixed;return{tl:Un,tr:Er,bl:kn,br:Qr,tex:{x:m.paddedRect.x+Yl+Li,y:m.paddedRect.y+Yl+ti,w:ot.stretch+ot.fixed-Li,h:xt.stretch+xt.fixed-ti},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:gn,pixelOffsetBR:Vn,minFontScaleX:ze/_/at,minFontScaleY:pt/_/rt,isSDF:o}};if(l&&(m.stretchX||m.stretchY)){const Ee=Zv(C,H,N),ut=Zv(A,X,V);for(let ot=0;ot<Ee.length-1;ot++){const xt=Ee[ot],tr=Ee[ot+1];for(let Jt=0;Jt<ut.length-1;Jt++)p.push(Qe(xt,ut[Jt],tr,ut[Jt+1]))}}else p.push(Qe({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:S+1}));return p}function rp(i,r,o){let l=0;for(const p of i)l+=Math.max(r,Math.min(o,p[1]))-Math.max(r,Math.min(o,p[0]));return l}function Zv(i,r,o){const l=[{fixed:-Yl,stretch:0}];for(const[p,m]of i){const _=l[l.length-1];l.push({fixed:p-_.stretch,stretch:_.stretch}),l.push({fixed:p-_.stretch,stretch:_.stretch+(m-p)})}return l.push({fixed:r+Yl,stretch:o}),l}function np(i,r,o,l){return i/r*o+l}function ip(i,r,o,l){return i-r*o/l}class op{constructor(r,o,l,p,m,_,w,S,E,C){var A;if(this.boxStartIndex=r.length,E){let L=_.top,N=_.bottom;const V=_.collisionPadding;V&&(L-=V[1],N+=V[3]);let H=N-L;H>0&&(H=Math.max(10,H),this.circleDiameter=H)}else{const L=!((A=_.image)===null||A===void 0)&&A.content&&(_.image.textFitWidth||_.image.textFitHeight)?vv(_):{x1:_.left,y1:_.top,x2:_.right,y2:_.bottom};L.y1=L.y1*w-S[0],L.y2=L.y2*w+S[2],L.x1=L.x1*w-S[3],L.x2=L.x2*w+S[1];const N=_.collisionPadding;if(N&&(L.x1-=N[0]*w,L.y1-=N[1]*w,L.x2+=N[2]*w,L.y2+=N[3]*w),C){const V=new D(L.x1,L.y1),H=new D(L.x2,L.y1),X=new D(L.x1,L.y2),re=new D(L.x2,L.y2),fe=C*Math.PI/180;V._rotate(fe),H._rotate(fe),X._rotate(fe),re._rotate(fe),L.x1=Math.min(V.x,H.x,X.x,re.x),L.x2=Math.max(V.x,H.x,X.x,re.x),L.y1=Math.min(V.y,H.y,X.y,re.y),L.y2=Math.max(V.y,H.y,X.y,re.y)}r.emplaceBack(o.x,o.y,L.x1,L.y1,L.x2,L.y2,l,p,m)}this.boxEndIndex=r.length}}class Uk{constructor(r=[],o=Vk){if(this.data=r,this.length=this.data.length,this.compare=o,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:o,compare:l}=this,p=o[r];for(;r>0;){const m=r-1>>1,_=o[m];if(l(p,_)>=0)break;o[r]=_,r=m}o[r]=p}_down(r){const{data:o,compare:l}=this,p=this.length>>1,m=o[r];for(;r<p;){let _=1+(r<<1),w=o[_];const S=_+1;if(S<this.length&&l(o[S],w)<0&&(_=S,w=o[S]),l(w,m)>=0)break;o[r]=w,r=_}o[r]=m}}function Vk(i,r){return i<r?-1:i>r?1:0}function $k(i,r=1,o=!1){let l=1/0,p=1/0,m=-1/0,_=-1/0;const w=i[0];for(let N=0;N<w.length;N++){const V=w[N];(!N||V.x<l)&&(l=V.x),(!N||V.y<p)&&(p=V.y),(!N||V.x>m)&&(m=V.x),(!N||V.y>_)&&(_=V.y)}const S=Math.min(m-l,_-p);let E=S/2;const C=new Uk([],Hk);if(S===0)return new D(l,p);for(let N=l;N<m;N+=S)for(let V=p;V<_;V+=S)C.push(new Jl(N+E,V+E,E,i));let A=function(N){let V=0,H=0,X=0;const re=N[0];for(let fe=0,oe=re.length,he=oe-1;fe<oe;he=fe++){const xe=re[fe],ze=re[he],We=xe.x*ze.y-ze.x*xe.y;H+=(xe.x+ze.x)*We,X+=(xe.y+ze.y)*We,V+=3*We}return new Jl(H/V,X/V,0,N)}(i),L=C.length;for(;C.length;){const N=C.pop();(N.d>A.d||!A.d)&&(A=N,o&&console.log("found best %d after %d probes",Math.round(1e4*N.d)/1e4,L)),N.max-A.d<=r||(E=N.h/2,C.push(new Jl(N.p.x-E,N.p.y-E,E,i)),C.push(new Jl(N.p.x+E,N.p.y-E,E,i)),C.push(new Jl(N.p.x-E,N.p.y+E,E,i)),C.push(new Jl(N.p.x+E,N.p.y+E,E,i)),L+=4)}return o&&(console.log(`num probes: ${L}`),console.log(`best distance: ${A.d}`)),A.p}function Hk(i,r){return r.max-i.max}function Jl(i,r,o,l){this.p=new D(i,r),this.h=o,this.d=function(p,m){let _=!1,w=1/0;for(let S=0;S<m.length;S++){const E=m[S];for(let C=0,A=E.length,L=A-1;C<A;L=C++){const N=E[C],V=E[L];N.y>p.y!=V.y>p.y&&p.x<(V.x-N.x)*(p.y-N.y)/(V.y-N.y)+N.x&&(_=!_),w=Math.min(w,A_(p,N,V))}}return(_?1:-1)*Math.sqrt(w)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}var fn;v.aq=void 0,(fn=v.aq||(v.aq={}))[fn.center=1]="center",fn[fn.left=2]="left",fn[fn.right=3]="right",fn[fn.top=4]="top",fn[fn.bottom=5]="bottom",fn[fn["top-left"]=6]="top-left",fn[fn["top-right"]=7]="top-right",fn[fn["bottom-left"]=8]="bottom-left",fn[fn["bottom-right"]=9]="bottom-right";const Va=7,sg=Number.POSITIVE_INFINITY;function Gv(i,r){return r[1]!==sg?function(o,l,p){let m=0,_=0;switch(l=Math.abs(l),p=Math.abs(p),o){case"top-right":case"top-left":case"top":_=p-Va;break;case"bottom-right":case"bottom-left":case"bottom":_=-p+Va}switch(o){case"top-right":case"bottom-right":case"right":m=-l;break;case"top-left":case"bottom-left":case"left":m=l}return[m,_]}(i,r[0],r[1]):function(o,l){let p=0,m=0;l<0&&(l=0);const _=l/Math.SQRT2;switch(o){case"top-right":case"top-left":m=_-Va;break;case"bottom-right":case"bottom-left":m=-_+Va;break;case"bottom":m=-l+Va;break;case"top":m=l-Va}switch(o){case"top-right":case"bottom-right":p=-_;break;case"top-left":case"bottom-left":p=_;break;case"left":p=l;break;case"right":p=-l}return[p,m]}(i,r[0])}function Kv(i,r,o){var l;const p=i.layout,m=(l=p.get("text-variable-anchor-offset"))===null||l===void 0?void 0:l.evaluate(r,{},o);if(m){const w=m.values,S=[];for(let E=0;E<w.length;E+=2){const C=S[E]=w[E],A=w[E+1].map(L=>L*qr);C.startsWith("top")?A[1]-=Va:C.startsWith("bottom")&&(A[1]+=Va),S[E+1]=A}return new Dn(S)}const _=p.get("text-variable-anchor");if(_){let w;w=i._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[p.get("text-radial-offset").evaluate(r,{},o)*qr,sg]:p.get("text-offset").evaluate(r,{},o).map(E=>E*qr);const S=[];for(const E of _)S.push(E,Gv(E,w));return new Dn(S)}return null}function lg(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Wk(i,r,o,l,p,m,_,w,S,E,C){let A=m.textMaxSize.evaluate(r,{});A===void 0&&(A=_);const L=i.layers[0].layout,N=L.get("icon-offset").evaluate(r,{},C),V=Yv(o.horizontal),H=_/24,X=i.tilePixelRatio*H,re=i.tilePixelRatio*A/24,fe=i.tilePixelRatio*w,oe=i.tilePixelRatio*L.get("symbol-spacing"),he=L.get("text-padding")*i.tilePixelRatio,xe=function(Ee,ut,ot,xt=1){const tr=Ee.get("icon-padding").evaluate(ut,{},ot),Jt=tr&&tr.values;return[Jt[0]*xt,Jt[1]*xt,Jt[2]*xt,Jt[3]*xt]}(L,r,C,i.tilePixelRatio),ze=L.get("text-max-angle")/180*Math.PI,We=L.get("text-rotation-alignment")!=="viewport"&&L.get("symbol-placement")!=="point",pt=L.get("icon-rotation-alignment")==="map"&&L.get("symbol-placement")!=="point",Ze=L.get("symbol-placement"),He=oe/2,at=L.get("icon-text-fit");let rt;l&&at!=="none"&&(i.allowVerticalPlacement&&o.vertical&&(rt=xv(l,o.vertical,at,L.get("icon-text-fit-padding"),N,H)),V&&(l=xv(l,V,at,L.get("icon-text-fit-padding"),N,H)));const Qe=(Ee,ut)=>{ut.x<0||ut.x>=Br||ut.y<0||ut.y>=Br||function(ot,xt,tr,Jt,Jr,Gi,mn,kr,Nn,jn,Un,Er,Qr,kn,gn,Vn,yn,Li,ti,Ut,nr,hr,fi,xr,Ql){const Do=ot.addToLineVertexArray(xt,tr);let Oo,Ki,Ri,nn,oa=0,Jc=0,t1=0,r1=0,gg=-1,yg=-1;const aa={};let n1=Ul("");if(ot.allowVerticalPlacement&&Jt.vertical){const En=kr.layout.get("text-rotate").evaluate(nr,{},xr)+90;Ri=new op(Nn,xt,jn,Un,Er,Jt.vertical,Qr,kn,gn,En),mn&&(nn=new op(Nn,xt,jn,Un,Er,mn,yn,Li,gn,En))}if(Jr){const En=kr.layout.get("icon-rotate").evaluate(nr,{}),Di=kr.layout.get("icon-text-fit")!=="none",js=qv(Jr,En,fi,Di),go=mn?qv(mn,En,fi,Di):void 0;Ki=new op(Nn,xt,jn,Un,Er,Jr,yn,Li,!1,En),oa=4*js.length;const Us=ot.iconSizeData;let Fo=null;Us.kind==="source"?(Fo=[Ro*kr.layout.get("icon-size").evaluate(nr,{})],Fo[0]>Na&&it(`${ot.layerIds[0]}: Value for "icon-size" is >= ${Gc}. Reduce your "icon-size".`)):Us.kind==="composite"&&(Fo=[Ro*hr.compositeIconSizes[0].evaluate(nr,{},xr),Ro*hr.compositeIconSizes[1].evaluate(nr,{},xr)],(Fo[0]>Na||Fo[1]>Na)&&it(`${ot.layerIds[0]}: Value for "icon-size" is >= ${Gc}. Reduce your "icon-size".`)),ot.addSymbols(ot.icon,js,Fo,Ut,ti,nr,v.ah.none,xt,Do.lineStartIndex,Do.lineLength,-1,xr),gg=ot.icon.placedSymbolArray.length-1,go&&(Jc=4*go.length,ot.addSymbols(ot.icon,go,Fo,Ut,ti,nr,v.ah.vertical,xt,Do.lineStartIndex,Do.lineLength,-1,xr),yg=ot.icon.placedSymbolArray.length-1)}const i1=Object.keys(Jt.horizontal);for(const En of i1){const Di=Jt.horizontal[En];if(!Oo){n1=Ul(Di.text);const go=kr.layout.get("text-rotate").evaluate(nr,{},xr);Oo=new op(Nn,xt,jn,Un,Er,Di,Qr,kn,gn,go)}const js=Di.positionedLines.length===1;if(t1+=Xv(ot,xt,Di,Gi,kr,gn,nr,Vn,Do,Jt.vertical?v.ah.horizontal:v.ah.horizontalOnly,js?i1:[En],aa,gg,hr,xr),js)break}Jt.vertical&&(r1+=Xv(ot,xt,Jt.vertical,Gi,kr,gn,nr,Vn,Do,v.ah.vertical,["vertical"],aa,yg,hr,xr));const Gk=Oo?Oo.boxStartIndex:ot.collisionBoxArray.length,Kk=Oo?Oo.boxEndIndex:ot.collisionBoxArray.length,Xk=Ri?Ri.boxStartIndex:ot.collisionBoxArray.length,Yk=Ri?Ri.boxEndIndex:ot.collisionBoxArray.length,Jk=Ki?Ki.boxStartIndex:ot.collisionBoxArray.length,Qk=Ki?Ki.boxEndIndex:ot.collisionBoxArray.length,eE=nn?nn.boxStartIndex:ot.collisionBoxArray.length,tE=nn?nn.boxEndIndex:ot.collisionBoxArray.length;let mo=-1;const sp=(En,Di)=>En&&En.circleDiameter?Math.max(En.circleDiameter,Di):Di;mo=sp(Oo,mo),mo=sp(Ri,mo),mo=sp(Ki,mo),mo=sp(nn,mo);const o1=mo>-1?1:0;o1&&(mo*=Ql/qr),ot.glyphOffsetArray.length>=Xl.MAX_GLYPHS&&it("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),nr.sortKey!==void 0&&ot.addToSortKeyRanges(ot.symbolInstances.length,nr.sortKey);const rE=Kv(kr,nr,xr),[nE,iE]=function(En,Di){const js=En.length,go=Di==null?void 0:Di.values;if((go==null?void 0:go.length)>0)for(let Us=0;Us<go.length;Us+=2){const Fo=go[Us+1];En.emplaceBack(v.aq[go[Us]],Fo[0],Fo[1])}return[js,En.length]}(ot.textAnchorOffsets,rE);ot.symbolInstances.emplaceBack(xt.x,xt.y,aa.right>=0?aa.right:-1,aa.center>=0?aa.center:-1,aa.left>=0?aa.left:-1,aa.vertical||-1,gg,yg,n1,Gk,Kk,Xk,Yk,Jk,Qk,eE,tE,jn,t1,r1,oa,Jc,o1,0,Qr,mo,nE,iE)}(i,ut,Ee,o,l,p,rt,i.layers[0],i.collisionBoxArray,r.index,r.sourceLayerIndex,i.index,X,[he,he,he,he],We,S,fe,xe,pt,N,r,m,E,C,_)};if(Ze==="line")for(const Ee of jv(r.geometry,0,0,Br,Br)){const ut=jk(Ee,oe,ze,o.vertical||V,l,24,re,i.overscaling,Br);for(const ot of ut)V&&qk(i,V.text,He,ot)||Qe(Ee,ot)}else if(Ze==="line-center"){for(const Ee of r.geometry)if(Ee.length>1){const ut=Nk(Ee,ze,o.vertical||V,l,24,re);ut&&Qe(Ee,ut)}}else if(r.type==="Polygon")for(const Ee of ml(r.geometry,0)){const ut=$k(Ee,16);Qe(Ee[0],new Ua(ut.x,ut.y,0))}else if(r.type==="LineString")for(const Ee of r.geometry)Qe(Ee,new Ua(Ee[0].x,Ee[0].y,0));else if(r.type==="Point")for(const Ee of r.geometry)for(const ut of Ee)Qe([ut],new Ua(ut.x,ut.y,0))}function Xv(i,r,o,l,p,m,_,w,S,E,C,A,L,N,V){const H=function(fe,oe,he,xe,ze,We,pt,Ze){const He=xe.layout.get("text-rotate").evaluate(We,{})*Math.PI/180,at=[];for(const rt of oe.positionedLines)for(const Qe of rt.positionedGlyphs){if(!Qe.rect)continue;const Ee=Qe.rect||{};let ut=dv+1,ot=!0,xt=1,tr=0;const Jt=(ze||Ze)&&Qe.vertical,Jr=Qe.metrics.advance*Qe.scale/2;if(Ze&&oe.verticalizable&&(tr=rt.lineOffset/2-(Qe.imageName?-(qr-Qe.metrics.width*Qe.scale)/2:(Qe.scale-1)*qr)),Qe.imageName){const Ut=pt[Qe.imageName];ot=Ut.sdf,xt=Ut.pixelRatio,ut=ei/xt}const Gi=ze?[Qe.x+Jr,Qe.y]:[0,0];let mn=ze?[0,0]:[Qe.x+Jr+he[0],Qe.y+he[1]-tr],kr=[0,0];Jt&&(kr=mn,mn=[0,0]);const Nn=Qe.metrics.isDoubleResolution?2:1,jn=(Qe.metrics.left-ut)*Qe.scale-Jr+mn[0],Un=(-Qe.metrics.top-ut)*Qe.scale+mn[1],Er=jn+Ee.w/Nn*Qe.scale/xt,Qr=Un+Ee.h/Nn*Qe.scale/xt,kn=new D(jn,Un),gn=new D(Er,Un),Vn=new D(jn,Qr),yn=new D(Er,Qr);if(Jt){const Ut=new D(-Jr,Jr-qc),nr=-Math.PI/2,hr=qr/2-Jr,fi=new D(5-qc-hr,-(Qe.imageName?hr:0)),xr=new D(...kr);kn._rotateAround(nr,Ut)._add(fi)._add(xr),gn._rotateAround(nr,Ut)._add(fi)._add(xr),Vn._rotateAround(nr,Ut)._add(fi)._add(xr),yn._rotateAround(nr,Ut)._add(fi)._add(xr)}if(He){const Ut=Math.sin(He),nr=Math.cos(He),hr=[nr,-Ut,Ut,nr];kn._matMult(hr),gn._matMult(hr),Vn._matMult(hr),yn._matMult(hr)}const Li=new D(0,0),ti=new D(0,0);at.push({tl:kn,tr:gn,bl:Vn,br:yn,tex:Ee,writingMode:oe.writingMode,glyphOffset:Gi,sectionIndex:Qe.sectionIndex,isSDF:ot,pixelOffsetTL:Li,pixelOffsetBR:ti,minFontScaleX:0,minFontScaleY:0})}return at}(0,o,w,p,m,_,l,i.allowVerticalPlacement),X=i.textSizeData;let re=null;X.kind==="source"?(re=[Ro*p.layout.get("text-size").evaluate(_,{})],re[0]>Na&&it(`${i.layerIds[0]}: Value for "text-size" is >= ${Gc}. Reduce your "text-size".`)):X.kind==="composite"&&(re=[Ro*N.compositeTextSizes[0].evaluate(_,{},V),Ro*N.compositeTextSizes[1].evaluate(_,{},V)],(re[0]>Na||re[1]>Na)&&it(`${i.layerIds[0]}: Value for "text-size" is >= ${Gc}. Reduce your "text-size".`)),i.addSymbols(i.text,H,re,w,m,_,E,r,S.lineStartIndex,S.lineLength,L,V);for(const fe of C)A[fe]=i.text.placedSymbolArray.length-1;return 4*H.length}function Yv(i){for(const r in i)return i[r];return null}function qk(i,r,o,l){const p=i.compareText;if(r in p){const m=p[r];for(let _=m.length-1;_>=0;_--)if(l.dist(m[_])<o)return!0}else p[r]=[];return p[r].push(l),!1}const Jv=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class ug{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[o,l]=new Uint8Array(r,0,2);if(o!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=l>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const m=Jv[15&l];if(!m)throw new Error("Unrecognized array type.");const[_]=new Uint16Array(r,2,1),[w]=new Uint32Array(r,4,1);return new ug(w,_,m,r)}constructor(r,o=64,l=Float64Array,p){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+o,2),65535),this.ArrayType=l,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const m=Jv.indexOf(this.ArrayType),_=2*r*this.ArrayType.BYTES_PER_ELEMENT,w=r*this.IndexArrayType.BYTES_PER_ELEMENT,S=(8-w%8)%8;if(m<0)throw new Error(`Unexpected typed array class: ${l}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+w+S,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+_+w+S),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+w+S,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+m]),new Uint16Array(this.data,2,1)[0]=o,new Uint32Array(this.data,4,1)[0]=r)}add(r,o){const l=this._pos>>1;return this.ids[l]=l,this.coords[this._pos++]=r,this.coords[this._pos++]=o,l}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return cg(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,o,l,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:_,nodeSize:w}=this,S=[0,m.length-1,0],E=[];for(;S.length;){const C=S.pop()||0,A=S.pop()||0,L=S.pop()||0;if(A-L<=w){for(let X=L;X<=A;X++){const re=_[2*X],fe=_[2*X+1];re>=r&&re<=l&&fe>=o&&fe<=p&&E.push(m[X])}continue}const N=L+A>>1,V=_[2*N],H=_[2*N+1];V>=r&&V<=l&&H>=o&&H<=p&&E.push(m[N]),(C===0?r<=V:o<=H)&&(S.push(L),S.push(N-1),S.push(1-C)),(C===0?l>=V:p>=H)&&(S.push(N+1),S.push(A),S.push(1-C))}return E}within(r,o,l){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:m,nodeSize:_}=this,w=[0,p.length-1,0],S=[],E=l*l;for(;w.length;){const C=w.pop()||0,A=w.pop()||0,L=w.pop()||0;if(A-L<=_){for(let X=L;X<=A;X++)e1(m[2*X],m[2*X+1],r,o)<=E&&S.push(p[X]);continue}const N=L+A>>1,V=m[2*N],H=m[2*N+1];e1(V,H,r,o)<=E&&S.push(p[N]),(C===0?r-l<=V:o-l<=H)&&(w.push(L),w.push(N-1),w.push(1-C)),(C===0?r+l>=V:o+l>=H)&&(w.push(N+1),w.push(A),w.push(1-C))}return S}}function cg(i,r,o,l,p,m){if(p-l<=o)return;const _=l+p>>1;Qv(i,r,_,l,p,m),cg(i,r,o,l,_-1,1-m),cg(i,r,o,_+1,p,1-m)}function Qv(i,r,o,l,p,m){for(;p>l;){if(p-l>600){const E=p-l+1,C=o-l+1,A=Math.log(E),L=.5*Math.exp(2*A/3),N=.5*Math.sqrt(A*L*(E-L)/E)*(C-E/2<0?-1:1);Qv(i,r,o,Math.max(l,Math.floor(o-C*L/E+N)),Math.min(p,Math.floor(o+(E-C)*L/E+N)),m)}const _=r[2*o+m];let w=l,S=p;for(Xc(i,r,l,o),r[2*p+m]>_&&Xc(i,r,l,p);w<S;){for(Xc(i,r,w,S),w++,S--;r[2*w+m]<_;)w++;for(;r[2*S+m]>_;)S--}r[2*l+m]===_?Xc(i,r,l,S):(S++,Xc(i,r,S,p)),S<=o&&(l=S+1),o<=S&&(p=S-1)}}function Xc(i,r,o,l){hg(i,o,l),hg(r,2*o,2*l),hg(r,2*o+1,2*l+1)}function hg(i,r,o){const l=i[r];i[r]=i[o],i[o]=l}function e1(i,r,o,l){const p=i-o,m=r-l;return p*p+m*m}var dg;v.be=void 0,(dg=v.be||(v.be={})).create="create",dg.load="load",dg.fullLoad="fullLoad";let ap=null,Yc=[];const pg=1e3/60,fg="loadTime",mg="fullLoadTime",Zk={mark(i){performance.mark(i)},frame(i){const r=i;ap!=null&&Yc.push(r-ap),ap=r},clearMetrics(){ap=null,Yc=[],performance.clearMeasures(fg),performance.clearMeasures(mg);for(const i in v.be)performance.clearMarks(v.be[i])},getPerformanceMetrics(){performance.measure(fg,v.be.create,v.be.load),performance.measure(mg,v.be.create,v.be.fullLoad);const i=performance.getEntriesByName(fg)[0].duration,r=performance.getEntriesByName(mg)[0].duration,o=Yc.length,l=1/(Yc.reduce((m,_)=>m+_,0)/o/1e3),p=Yc.filter(m=>m>pg).reduce((m,_)=>m+(_-pg)/pg,0);return{loadTime:i,fullLoadTime:r,fps:l,percentDroppedFrames:p/(o+p)*100,totalFrames:o}}};v.$=Wr,v.A=Hl,v.B=function(i){if(Gt==null){const r=i.navigator?i.navigator.userAgent:null;Gt=!!i.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Gt},v.C=class{constructor(i,r){this.target=i,this.mapId=r,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Fk(()=>this.process()),this.subscription=function(o,l,p,m){return o.addEventListener(l,p,!1),{unsubscribe:()=>{o.removeEventListener(l,p,!1)}}}(this.target,"message",o=>this.receive(o)),this.globalScope=or(self)?i:window}registerMessageHandler(i,r){this.messageHandlers[i]=r}sendAsync(i,r){return new Promise((o,l)=>{const p=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[p]={resolve:o,reject:l},r&&r.signal.addEventListener("abort",()=>{delete this.resolveRejects[p];const w={id:p,type:"<cancel>",origin:location.origin,targetMapId:i.targetMapId,sourceMapId:this.mapId};this.target.postMessage(w)},{once:!0});const m=[],_=Object.assign(Object.assign({},i),{id:p,sourceMapId:this.mapId,origin:location.origin,data:Ls(i.data,m)});this.target.postMessage(_,{transfer:m})})}receive(i){const r=i.data,o=r.id;if(!(r.origin!=="file://"&&location.origin!=="file://"&&r.origin!==location.origin||r.targetMapId&&this.mapId!==r.targetMapId)){if(r.type==="<cancel>"){delete this.tasks[o];const l=this.abortControllers[o];return delete this.abortControllers[o],void(l&&l.abort())}if(or(self)||r.mustQueue)return this.tasks[o]=r,this.taskQueue.push(o),void this.invoker.trigger();this.processTask(o,r)}}process(){if(this.taskQueue.length===0)return;const i=this.taskQueue.shift(),r=this.tasks[i];delete this.tasks[i],this.taskQueue.length>0&&this.invoker.trigger(),r&&this.processTask(i,r)}processTask(i,r){return c(this,void 0,void 0,function*(){if(r.type==="<response>"){const p=this.resolveRejects[i];return delete this.resolveRejects[i],p?void(r.error?p.reject(qi(r.error)):p.resolve(qi(r.data))):void 0}if(!this.messageHandlers[r.type])return void this.completeTask(i,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const o=qi(r.data),l=new AbortController;this.abortControllers[i]=l;try{const p=yield this.messageHandlers[r.type](r.sourceMapId,o,l);this.completeTask(i,null,p)}catch(p){this.completeTask(i,p)}})}completeTask(i,r,o){const l=[];delete this.abortControllers[i];const p={id:i,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:r?Ls(r):null,data:Ls(o,l)};this.target.postMessage(p,{transfer:l})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},v.D=lt,v.E=oo,v.F=function(){var i=new Hl(16);return Hl!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},v.G=Dr,v.H=function(i,r,o){var l,p,m,_,w,S,E,C,A,L,N,V,H=o[0],X=o[1],re=o[2];return r===i?(i[12]=r[0]*H+r[4]*X+r[8]*re+r[12],i[13]=r[1]*H+r[5]*X+r[9]*re+r[13],i[14]=r[2]*H+r[6]*X+r[10]*re+r[14],i[15]=r[3]*H+r[7]*X+r[11]*re+r[15]):(p=r[1],m=r[2],_=r[3],w=r[4],S=r[5],E=r[6],C=r[7],A=r[8],L=r[9],N=r[10],V=r[11],i[0]=l=r[0],i[1]=p,i[2]=m,i[3]=_,i[4]=w,i[5]=S,i[6]=E,i[7]=C,i[8]=A,i[9]=L,i[10]=N,i[11]=V,i[12]=l*H+w*X+A*re+r[12],i[13]=p*H+S*X+L*re+r[13],i[14]=m*H+E*X+N*re+r[14],i[15]=_*H+C*X+V*re+r[15]),i},v.I=Xm,v.J=function(i,r,o){var l=o[0],p=o[1],m=o[2];return i[0]=r[0]*l,i[1]=r[1]*l,i[2]=r[2]*l,i[3]=r[3]*l,i[4]=r[4]*p,i[5]=r[5]*p,i[6]=r[6]*p,i[7]=r[7]*p,i[8]=r[8]*m,i[9]=r[9]*m,i[10]=r[10]*m,i[11]=r[11]*m,i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],i},v.K=R_,v.L=function(i,r){const o={};for(let l=0;l<r.length;l++){const p=r[l];p in i&&(o[p]=i[p])}return o},v.M=ja,v.N=Iv,v.O=Av,v.P=D,v.Q=zi,v.R=Mi,v.S=ee,v.T=Ma,v.U=q,v.V=mt,v.W=Br,v.X=P,v.Y=tp,v.Z=class extends ${},v._=c,v.a=Ur,v.a$=function(i,r){return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],i},v.a0=ag,v.a1=Ne,v.a2=i=>{const r=window.document.createElement("video");return r.muted=!0,new Promise(o=>{r.onloadstart=()=>{o(r)};for(const l of i){const p=window.document.createElement("source");io(l)||(r.crossOrigin="Anonymous"),p.src=l,r.appendChild(p)}})},v.a3=function(){return Ge++},v.a4=At,v.a5=Xl,v.a6=gc,v.a7=Bs,v.a8=rr,v.a9=Ov,v.aA=function(i){if(i.type==="custom")return new Ok(i);switch(i.type){case"background":return new Lk(i);case"circle":return new xT(i);case"fill":return new FT(i);case"fill-extrusion":return new JT(i);case"heatmap":return new bT(i);case"hillshade":return new TT(i);case"line":return new ak(i);case"raster":return new Dk(i);case"symbol":return new ep(i)}},v.aB=$e,v.aC=function(i,r){if(!i)return[{command:"setStyle",args:[r]}];let o=[];try{if(!Pt(i.version,r.version))return[{command:"setStyle",args:[r]}];Pt(i.center,r.center)||o.push({command:"setCenter",args:[r.center]}),Pt(i.zoom,r.zoom)||o.push({command:"setZoom",args:[r.zoom]}),Pt(i.bearing,r.bearing)||o.push({command:"setBearing",args:[r.bearing]}),Pt(i.pitch,r.pitch)||o.push({command:"setPitch",args:[r.pitch]}),Pt(i.sprite,r.sprite)||o.push({command:"setSprite",args:[r.sprite]}),Pt(i.glyphs,r.glyphs)||o.push({command:"setGlyphs",args:[r.glyphs]}),Pt(i.transition,r.transition)||o.push({command:"setTransition",args:[r.transition]}),Pt(i.light,r.light)||o.push({command:"setLight",args:[r.light]}),Pt(i.terrain,r.terrain)||o.push({command:"setTerrain",args:[r.terrain]}),Pt(i.sky,r.sky)||o.push({command:"setSky",args:[r.sky]}),Pt(i.projection,r.projection)||o.push({command:"setProjection",args:[r.projection]});const l={},p=[];(function(_,w,S,E){let C;for(C in w=w||{},_=_||{})Object.prototype.hasOwnProperty.call(_,C)&&(Object.prototype.hasOwnProperty.call(w,C)||ao(C,S,E));for(C in w)Object.prototype.hasOwnProperty.call(w,C)&&(Object.prototype.hasOwnProperty.call(_,C)?Pt(_[C],w[C])||(_[C].type==="geojson"&&w[C].type==="geojson"&&ci(_,w,C)?Vt(S,{command:"setGeoJSONSourceData",args:[C,w[C].data]}):Vr(C,w,S,E)):ui(C,w,S))})(i.sources,r.sources,p,l);const m=[];i.layers&&i.layers.forEach(_=>{"source"in _&&l[_.source]?o.push({command:"removeLayer",args:[_.id]}):m.push(_)}),o=o.concat(p),function(_,w,S){w=w||[];const E=(_=_||[]).map(bn),C=w.map(bn),A=_.reduce(ko,{}),L=w.reduce(ko,{}),N=E.slice(),V=Object.create(null);let H,X,re,fe,oe;for(let he=0,xe=0;he<E.length;he++)H=E[he],Object.prototype.hasOwnProperty.call(L,H)?xe++:(Vt(S,{command:"removeLayer",args:[H]}),N.splice(N.indexOf(H,xe),1));for(let he=0,xe=0;he<C.length;he++)H=C[C.length-1-he],N[N.length-1-he]!==H&&(Object.prototype.hasOwnProperty.call(A,H)?(Vt(S,{command:"removeLayer",args:[H]}),N.splice(N.lastIndexOf(H,N.length-xe),1)):xe++,fe=N[N.length-he],Vt(S,{command:"addLayer",args:[L[H],fe]}),N.splice(N.length-he,0,H),V[H]=!0);for(let he=0;he<C.length;he++)if(H=C[he],X=A[H],re=L[H],!V[H]&&!Pt(X,re))if(Pt(X.source,re.source)&&Pt(X["source-layer"],re["source-layer"])&&Pt(X.type,re.type)){for(oe in zn(X.layout,re.layout,S,H,null,"setLayoutProperty"),zn(X.paint,re.paint,S,H,null,"setPaintProperty"),Pt(X.filter,re.filter)||Vt(S,{command:"setFilter",args:[H,re.filter]}),Pt(X.minzoom,re.minzoom)&&Pt(X.maxzoom,re.maxzoom)||Vt(S,{command:"setLayerZoomRange",args:[H,re.minzoom,re.maxzoom]}),X)Object.prototype.hasOwnProperty.call(X,oe)&&oe!=="layout"&&oe!=="paint"&&oe!=="filter"&&oe!=="metadata"&&oe!=="minzoom"&&oe!=="maxzoom"&&(oe.indexOf("paint.")===0?zn(X[oe],re[oe],S,H,oe.slice(6),"setPaintProperty"):Pt(X[oe],re[oe])||Vt(S,{command:"setLayerProperty",args:[H,oe,re[oe]]}));for(oe in re)Object.prototype.hasOwnProperty.call(re,oe)&&!Object.prototype.hasOwnProperty.call(X,oe)&&oe!=="layout"&&oe!=="paint"&&oe!=="filter"&&oe!=="metadata"&&oe!=="minzoom"&&oe!=="maxzoom"&&(oe.indexOf("paint.")===0?zn(X[oe],re[oe],S,H,oe.slice(6),"setPaintProperty"):Pt(X[oe],re[oe])||Vt(S,{command:"setLayerProperty",args:[H,oe,re[oe]]}))}else Vt(S,{command:"removeLayer",args:[H]}),fe=N[N.lastIndexOf(H)+1],Vt(S,{command:"addLayer",args:[re,fe]})}(m,r.layers,o)}catch(l){console.warn("Unable to compute style diff:",l),o=[{command:"setStyle",args:[r]}]}return o},v.aD=function(i){const r=[],o=i.id;return o===void 0&&r.push({message:`layers.${o}: missing required property "id"`}),i.render===void 0&&r.push({message:`layers.${o}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&r.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),r},v.aE=function i(r,o){if(Array.isArray(r)){if(!Array.isArray(o)||r.length!==o.length)return!1;for(let l=0;l<r.length;l++)if(!i(r[l],o[l]))return!1;return!0}if(typeof r=="object"&&r!==null&&o!==null){if(typeof o!="object"||Object.keys(r).length!==Object.keys(o).length)return!1;for(const l in r)if(!i(r[l],o[l]))return!1;return!0}return r===o},v.aF=Re,v.aG=Me,v.aH=class extends Ds{constructor(i,r){super(i,r),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}},v.aI=jd,v.aJ=class extends Ds{constructor(i,r){super(i,r),this.current=dT}set(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let r=1;r<16;r++)if(i[r]!==this.current[r]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}},v.aK=S_,v.aL=class extends Ds{constructor(i,r){super(i,r),this.current=[0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))}},v.aM=class extends Ds{constructor(i,r){super(i,r),this.current=[0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))}},v.aN=T_,v.aO=function(i,r,o,l,p,m,_){var w=1/(r-o),S=1/(l-p),E=1/(m-_);return i[0]=-2*w,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*S,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*E,i[11]=0,i[12]=(r+o)*w,i[13]=(p+l)*S,i[14]=(_+m)*E,i[15]=1,i},v.aP=Kt,v.aQ=vT,v.aR=class extends Pe{},v.aS=ck,v.aT=class extends Xe{},v.aU=function(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))},v.aV=N_,v.aW=ta,v.aX=class extends qe{},v.aY=Yr,v.aZ=function(i,r){return i[0]===r[0]&&i[1]===r[1]&&i[2]===r[2]&&i[3]===r[3]&&i[4]===r[4]&&i[5]===r[5]&&i[6]===r[6]&&i[7]===r[7]&&i[8]===r[8]&&i[9]===r[9]&&i[10]===r[10]&&i[11]===r[11]&&i[12]===r[12]&&i[13]===r[13]&&i[14]===r[14]&&i[15]===r[15]},v.a_=function(i,r){var o=i[0],l=i[1],p=i[2],m=i[3],_=i[4],w=i[5],S=i[6],E=i[7],C=i[8],A=i[9],L=i[10],N=i[11],V=i[12],H=i[13],X=i[14],re=i[15],fe=r[0],oe=r[1],he=r[2],xe=r[3],ze=r[4],We=r[5],pt=r[6],Ze=r[7],He=r[8],at=r[9],rt=r[10],Qe=r[11],Ee=r[12],ut=r[13],ot=r[14],xt=r[15];return Math.abs(o-fe)<=Bn*Math.max(1,Math.abs(o),Math.abs(fe))&&Math.abs(l-oe)<=Bn*Math.max(1,Math.abs(l),Math.abs(oe))&&Math.abs(p-he)<=Bn*Math.max(1,Math.abs(p),Math.abs(he))&&Math.abs(m-xe)<=Bn*Math.max(1,Math.abs(m),Math.abs(xe))&&Math.abs(_-ze)<=Bn*Math.max(1,Math.abs(_),Math.abs(ze))&&Math.abs(w-We)<=Bn*Math.max(1,Math.abs(w),Math.abs(We))&&Math.abs(S-pt)<=Bn*Math.max(1,Math.abs(S),Math.abs(pt))&&Math.abs(E-Ze)<=Bn*Math.max(1,Math.abs(E),Math.abs(Ze))&&Math.abs(C-He)<=Bn*Math.max(1,Math.abs(C),Math.abs(He))&&Math.abs(A-at)<=Bn*Math.max(1,Math.abs(A),Math.abs(at))&&Math.abs(L-rt)<=Bn*Math.max(1,Math.abs(L),Math.abs(rt))&&Math.abs(N-Qe)<=Bn*Math.max(1,Math.abs(N),Math.abs(Qe))&&Math.abs(V-Ee)<=Bn*Math.max(1,Math.abs(V),Math.abs(Ee))&&Math.abs(H-ut)<=Bn*Math.max(1,Math.abs(H),Math.abs(ut))&&Math.abs(X-ot)<=Bn*Math.max(1,Math.abs(X),Math.abs(ot))&&Math.abs(re-xt)<=Bn*Math.max(1,Math.abs(re),Math.abs(xt))},v.aa=function(i){const r={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,l,p,m)=>{const _=p||m;return r[l]=!_||_.toLowerCase(),""}),r["max-age"]){const o=parseInt(r["max-age"],10);isNaN(o)?delete r["max-age"]:r["max-age"]=o}return r},v.ab=function(i,r){const o=[];for(const l in i)l in r||o.push(l);return o},v.ac=Ce,v.ad=function(i,r,o){var l=Math.sin(o),p=Math.cos(o),m=r[0],_=r[1],w=r[2],S=r[3],E=r[4],C=r[5],A=r[6],L=r[7];return r!==i&&(i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15]),i[0]=m*p+E*l,i[1]=_*p+C*l,i[2]=w*p+A*l,i[3]=S*p+L*l,i[4]=E*p-m*l,i[5]=C*p-_*l,i[6]=A*p-w*l,i[7]=L*p-S*l,i},v.ae=function(i){var r=new Hl(16);return r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[8]=i[8],r[9]=i[9],r[10]=i[10],r[11]=i[11],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15],r},v.af=Hd,v.ag=function(i,r){let o=0,l=0;if(i.kind==="constant")l=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:p,minZoom:m,maxZoom:_}=i,w=p?Ce(Xn.interpolationFactor(p,r,m,_),0,1):0;i.kind==="camera"?l=Sn.number(i.minSize,i.maxSize,w):o=w}return{uSizeT:o,uSize:l}},v.ai=function(i,{uSize:r,uSizeT:o},{lowerSize:l,upperSize:p}){return i.kind==="source"?l/Ro:i.kind==="composite"?Sn.number(l/Ro,p/Ro,o):r},v.aj=eg,v.ak=function(i,r,o,l){const p=r.y-i.y,m=r.x-i.x,_=l.y-o.y,w=l.x-o.x,S=_*m-w*p;if(S===0)return null;const E=(w*(i.y-o.y)-_*(i.x-o.x))/S;return new D(i.x+E*m,i.y+E*p)},v.al=jv,v.am=P_,v.an=Rm,v.ao=function(i){let r=1/0,o=1/0,l=-1/0,p=-1/0;for(const m of i)r=Math.min(r,m.x),o=Math.min(o,m.y),l=Math.max(l,m.x),p=Math.max(p,m.y);return[r,o,l,p]},v.ap=qr,v.ar=Qm,v.as=function(i,r){var o=r[0],l=r[1],p=r[2],m=r[3],_=r[4],w=r[5],S=r[6],E=r[7],C=r[8],A=r[9],L=r[10],N=r[11],V=r[12],H=r[13],X=r[14],re=r[15],fe=o*w-l*_,oe=o*S-p*_,he=o*E-m*_,xe=l*S-p*w,ze=l*E-m*w,We=p*E-m*S,pt=C*H-A*V,Ze=C*X-L*V,He=C*re-N*V,at=A*X-L*H,rt=A*re-N*H,Qe=L*re-N*X,Ee=fe*Qe-oe*rt+he*at+xe*He-ze*Ze+We*pt;return Ee?(i[0]=(w*Qe-S*rt+E*at)*(Ee=1/Ee),i[1]=(p*rt-l*Qe-m*at)*Ee,i[2]=(H*We-X*ze+re*xe)*Ee,i[3]=(L*ze-A*We-N*xe)*Ee,i[4]=(S*He-_*Qe-E*Ze)*Ee,i[5]=(o*Qe-p*He+m*Ze)*Ee,i[6]=(X*he-V*We-re*oe)*Ee,i[7]=(C*We-L*he+N*oe)*Ee,i[8]=(_*rt-w*He+E*pt)*Ee,i[9]=(l*He-o*rt-m*pt)*Ee,i[10]=(V*ze-H*he+re*fe)*Ee,i[11]=(A*he-C*ze-N*fe)*Ee,i[12]=(w*Ze-_*at-S*pt)*Ee,i[13]=(o*at-l*Ze+p*pt)*Ee,i[14]=(H*oe-V*xe-X*fe)*Ee,i[15]=(C*xe-A*oe+L*fe)*Ee,i):null},v.at=lg,v.au=Jm,v.av=ug,v.aw=function(){const i={},r=be.$version;for(const o in be.$root){const l=be.$root[o];if(l.required){let p=null;p=o==="version"?r:l.type==="array"?[]:{},p!=null&&(i[o]=p)}}return i},v.ax=zd,v.ay=li,v.az=function(i){i=i.slice();const r=Object.create(null);for(let o=0;o<i.length;o++)r[i[o].id]=i[o];for(let o=0;o<i.length;o++)"ref"in i[o]&&(i[o]=wn(i[o],r[i[o].ref]));return i},v.b=ar,v.b0=function(i,r,o){return i[0]=r[0]*o[0],i[1]=r[1]*o[1],i[2]=r[2]*o[2],i[3]=r[3]*o[3],i},v.b1=function(i,r){return i[0]*r[0]+i[1]*r[1]+i[2]*r[2]+i[3]*r[3]},v.b2=Ae,v.b3=Lv,v.b4=Mv,v.b5=function(i,r,o,l,p){var m,_=1/Math.tan(r/2);return i[0]=_/o,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=_,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,p!=null&&p!==1/0?(i[10]=(p+l)*(m=1/(l-p)),i[14]=2*p*l*m):(i[10]=-1,i[14]=-2*l),i},v.b6=function(i,r,o){var l=Math.sin(o),p=Math.cos(o),m=r[4],_=r[5],w=r[6],S=r[7],E=r[8],C=r[9],A=r[10],L=r[11];return r!==i&&(i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15]),i[4]=m*p+E*l,i[5]=_*p+C*l,i[6]=w*p+A*l,i[7]=S*p+L*l,i[8]=E*p-m*l,i[9]=C*p-_*l,i[10]=A*p-w*l,i[11]=L*p-S*l,i},v.b7=te,v.b8=_e,v.b9=function(i){return i*Math.PI/180},v.bA=Cl,v.bB=Mo,v.ba=function(i,r){return i[0]=r[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=r[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=r[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},v.bb=class extends U{},v.bc=ig,v.bd=Zk,v.bf=Gr,v.bg=function(i,r){Ur.REGISTERED_PROTOCOLS[i]=r},v.bh=function(i){delete Ur.REGISTERED_PROTOCOLS[i]},v.bi=function(i,r){const o={};for(let p=0;p<i.length;p++){const m=r&&r[i[p].id]||km(i[p]);r&&(r[i[p].id]=m);let _=o[m];_||(_=o[m]=[]),_.push(i[p])}const l=[];for(const p in o)l.push(o[p]);return l},v.bj=et,v.bk=Dv,v.bl=Fv,v.bm=fv,v.bn=function(i){i.bucket.createArrays(),i.bucket.tilePixelRatio=Br/(512*i.bucket.overscaling),i.bucket.compareText={},i.bucket.iconsNeedLinear=!1;const r=i.bucket.layers[0],o=r.layout,l=r._unevaluatedLayout._values,p={layoutIconSize:l["icon-size"].possiblyEvaluate(new rr(i.bucket.zoom+1),i.canonical),layoutTextSize:l["text-size"].possiblyEvaluate(new rr(i.bucket.zoom+1),i.canonical),textMaxSize:l["text-size"].possiblyEvaluate(new rr(18))};if(i.bucket.textSizeData.kind==="composite"){const{minZoom:E,maxZoom:C}=i.bucket.textSizeData;p.compositeTextSizes=[l["text-size"].possiblyEvaluate(new rr(E),i.canonical),l["text-size"].possiblyEvaluate(new rr(C),i.canonical)]}if(i.bucket.iconSizeData.kind==="composite"){const{minZoom:E,maxZoom:C}=i.bucket.iconSizeData;p.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new rr(E),i.canonical),l["icon-size"].possiblyEvaluate(new rr(C),i.canonical)]}const m=o.get("text-line-height")*qr,_=o.get("text-rotation-alignment")!=="viewport"&&o.get("symbol-placement")!=="point",w=o.get("text-keep-upright"),S=o.get("text-size");for(const E of i.bucket.features){const C=o.get("text-font").evaluate(E,{},i.canonical).join(","),A=S.evaluate(E,{},i.canonical),L=p.layoutTextSize.evaluate(E,{},i.canonical),N=p.layoutIconSize.evaluate(E,{},i.canonical),V={horizontal:{},vertical:void 0},H=E.text;let X,re=[0,0];if(H){const he=H.toString(),xe=o.get("text-letter-spacing").evaluate(E,{},i.canonical)*qr,ze=Cm(he)?xe:0,We=o.get("text-anchor").evaluate(E,{},i.canonical),pt=Kv(r,E,i.canonical);if(!pt){const rt=o.get("text-radial-offset").evaluate(E,{},i.canonical);re=rt?Gv(We,[rt*qr,sg]):o.get("text-offset").evaluate(E,{},i.canonical).map(Qe=>Qe*qr)}let Ze=_?"center":o.get("text-justify").evaluate(E,{},i.canonical);const He=o.get("symbol-placement")==="point"?o.get("text-max-width").evaluate(E,{},i.canonical)*qr:1/0,at=()=>{i.bucket.allowVerticalPlacement&&Cc(he)&&(V.vertical=Yd(H,i.glyphMap,i.glyphPositions,i.imagePositions,C,He,m,We,"left",ze,re,v.ah.vertical,!0,L,A))};if(!_&&pt){const rt=new Set;if(Ze==="auto")for(let Ee=0;Ee<pt.values.length;Ee+=2)rt.add(lg(pt.values[Ee]));else rt.add(Ze);let Qe=!1;for(const Ee of rt)if(!V.horizontal[Ee])if(Qe)V.horizontal[Ee]=V.horizontal[0];else{const ut=Yd(H,i.glyphMap,i.glyphPositions,i.imagePositions,C,He,m,"center",Ee,ze,re,v.ah.horizontal,!1,L,A);ut&&(V.horizontal[Ee]=ut,Qe=ut.positionedLines.length===1)}at()}else{Ze==="auto"&&(Ze=lg(We));const rt=Yd(H,i.glyphMap,i.glyphPositions,i.imagePositions,C,He,m,We,Ze,ze,re,v.ah.horizontal,!1,L,A);rt&&(V.horizontal[Ze]=rt),at(),Cc(he)&&_&&w&&(V.vertical=Yd(H,i.glyphMap,i.glyphPositions,i.imagePositions,C,He,m,We,Ze,ze,re,v.ah.vertical,!1,L,A))}}let fe=!1;if(E.icon&&E.icon.name){const he=i.imageMap[E.icon.name];he&&(X=Pk(i.imagePositions[E.icon.name],o.get("icon-offset").evaluate(E,{},i.canonical),o.get("icon-anchor").evaluate(E,{},i.canonical)),fe=!!he.sdf,i.bucket.sdfIcons===void 0?i.bucket.sdfIcons=fe:i.bucket.sdfIcons!==fe&&it("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(he.pixelRatio!==i.bucket.pixelRatio||o.get("icon-rotate").constantOr(1)!==0)&&(i.bucket.iconsNeedLinear=!0))}const oe=Yv(V.horizontal)||V.vertical;i.bucket.iconsInText=!!oe&&oe.iconsInText,(oe||X)&&Wk(i.bucket,E,V,X,i.imageMap,p,L,N,re,fe,i.canonical)}i.showCollisionBoxes&&i.bucket.generateCollisionDebugBuffers()},v.bo=qm,v.bp=$m,v.bq=Wm,v.br=Fa,v.bs=Gm,v.bt=class{constructor(i){this._marks={start:[i.url,"start"].join("#"),end:[i.url,"end"].join("#"),measure:i.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let i=performance.getEntriesByName(this._marks.measure);return i.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),i=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),i}},v.bu=function(i,r,o,l,p){return c(this,void 0,void 0,function*(){if(q())try{return yield mt(i,r,o,l,p)}catch{}return function(m,_,w,S,E){const C=m.width,A=m.height;yt&&Ct||(yt=new OffscreenCanvas(C,A),Ct=yt.getContext("2d",{willReadFrequently:!0})),yt.width=C,yt.height=A,Ct.drawImage(m,0,0,C,A);const L=Ct.getImageData(_,w,S,E);return Ct.clearRect(0,0,C,A),L.data}(i,r,o,l,p)})},v.bv=Rv,v.bw=I,v.bx=F,v.by=ov,v.bz=function(i){return i.message===Rt},v.c=er,v.d=i=>c(void 0,void 0,void 0,function*(){if(i.byteLength===0)return createImageBitmap(new ImageData(1,1));const r=new Blob([new Uint8Array(i)],{type:"image/png"});try{return createImageBitmap(r)}catch(o){throw new Error(`Could not load image because of ${o.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),v.e=Le,v.f=i=>new Promise((r,o)=>{const l=new Image;l.onload=()=>{r(l),URL.revokeObjectURL(l.src),l.onload=null,window.requestAnimationFrame(()=>{l.src=Ye})},l.onerror=()=>o(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const p=new Blob([new Uint8Array(i)],{type:"image/png"});l.src=i.byteLength?URL.createObjectURL(p):Ye}),v.g=Ir,v.h=(i,r)=>To(Le(i,{type:"json"}),r),v.i=or,v.j=pr,v.k=Hi,v.l=(i,r)=>To(Le(i,{type:"arrayBuffer"}),r),v.m=To,v.n=function(i){return new Gm(i).readFields(wk,[])},v.o=Nc,v.p=pv,v.q=d,v.r=Em,v.s=io,v.t=Ec,v.u=Ke,v.v=be,v.w=it,v.x=Ms,v.y=function([i,r,o]){return r+=90,r*=Math.PI/180,o*=Math.PI/180,{x:i*Math.cos(r)*Math.sin(o),y:i*Math.sin(r)*Math.sin(o),z:i*Math.cos(o)}},v.z=Sn}),h("worker",["./shared"],function(v){class c{constructor(R){this.keyCache={},R&&this.replace(R)}replace(R){this._layerConfigs={},this._layers={},this.update(R,[])}update(R,O){for(const Y of R){this._layerConfigs[Y.id]=Y;const ae=this._layers[Y.id]=v.aA(Y);ae._featureFilter=v.a6(ae.filter),this.keyCache[Y.id]&&delete this.keyCache[Y.id]}for(const Y of O)delete this.keyCache[Y],delete this._layerConfigs[Y],delete this._layers[Y];this.familiesBySource={};const j=v.bi(Object.values(this._layerConfigs),this.keyCache);for(const Y of j){const ae=Y.map(Te=>this._layers[Te.id]),ue=ae[0];if(ue.visibility==="none")continue;const pe=ue.source||"";let ie=this.familiesBySource[pe];ie||(ie=this.familiesBySource[pe]={});const ye=ue.sourceLayer||"_geojsonTileLayer";let Ie=ie[ye];Ie||(Ie=ie[ye]=[]),Ie.push(ae)}}}class I{constructor(R){const O={},j=[];for(const pe in R){const ie=R[pe],ye=O[pe]={};for(const Ie in ie){const Te=ie[+Ie];if(!Te||Te.bitmap.width===0||Te.bitmap.height===0)continue;const Se={x:0,y:0,w:Te.bitmap.width+2,h:Te.bitmap.height+2};j.push(Se),ye[Ie]={rect:Se,metrics:Te.metrics}}}const{w:Y,h:ae}=v.p(j),ue=new v.o({width:Y||1,height:ae||1});for(const pe in R){const ie=R[pe];for(const ye in ie){const Ie=ie[+ye];if(!Ie||Ie.bitmap.width===0||Ie.bitmap.height===0)continue;const Te=O[pe][ye].rect;v.o.copy(Ie.bitmap,ue,{x:0,y:0},{x:Te.x+1,y:Te.y+1},Ie.bitmap)}}this.image=ue,this.positions=O}}v.bj("GlyphAtlas",I);class F{constructor(R){this.tileID=new v.Q(R.tileID.overscaledZ,R.tileID.wrap,R.tileID.canonical.z,R.tileID.canonical.x,R.tileID.canonical.y),this.uid=R.uid,this.zoom=R.zoom,this.pixelRatio=R.pixelRatio,this.tileSize=R.tileSize,this.source=R.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=R.showCollisionBoxes,this.collectResourceTiming=!!R.collectResourceTiming,this.returnDependencies=!!R.returnDependencies,this.promoteId=R.promoteId,this.inFlightDependencies=[]}parse(R,O,j,Y){return v._(this,void 0,void 0,function*(){this.status="parsing",this.data=R,this.collisionBoxArray=new v.a4;const ae=new v.bk(Object.keys(R.layers).sort()),ue=new v.bl(this.tileID,this.promoteId);ue.bucketLayerIDs=[];const pe={},ie={featureIndex:ue,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:j},ye=O.familiesBySource[this.source];for(const It in ye){const mr=R.layers[It];if(!mr)continue;mr.version===1&&v.w(`Vector tile source "${this.source}" layer "${It}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const $r=ae.encode(It),Ln=[];for(let Gn=0;Gn<mr.length;Gn++){const Hr=mr.feature(Gn),va=ue.getId(Hr,It);Ln.push({feature:Hr,id:va,index:Gn,sourceLayerIndex:$r})}for(const Gn of ye[It]){const Hr=Gn[0];Hr.source!==this.source&&v.w(`layer.source = ${Hr.source} does not equal this.source = ${this.source}`),Hr.minzoom&&this.zoom<Math.floor(Hr.minzoom)||Hr.maxzoom&&this.zoom>=Hr.maxzoom||Hr.visibility!=="none"&&(W(Gn,this.zoom,j),(pe[Hr.id]=Hr.createBucket({index:ue.bucketLayerIDs.length,layers:Gn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:$r,sourceID:this.source})).populate(Ln,ie,this.tileID.canonical),ue.bucketLayerIDs.push(Gn.map(va=>va.id)))}}const Ie=v.aF(ie.glyphDependencies,It=>Object.keys(It).map(Number));this.inFlightDependencies.forEach(It=>It==null?void 0:It.abort()),this.inFlightDependencies=[];let Te=Promise.resolve({});if(Object.keys(Ie).length){const It=new AbortController;this.inFlightDependencies.push(It),Te=Y.sendAsync({type:"GG",data:{stacks:Ie,source:this.source,tileID:this.tileID,type:"glyphs"}},It)}const Se=Object.keys(ie.iconDependencies);let dt=Promise.resolve({});if(Se.length){const It=new AbortController;this.inFlightDependencies.push(It),dt=Y.sendAsync({type:"GI",data:{icons:Se,source:this.source,tileID:this.tileID,type:"icons"}},It)}const ht=Object.keys(ie.patternDependencies);let zt=Promise.resolve({});if(ht.length){const It=new AbortController;this.inFlightDependencies.push(It),zt=Y.sendAsync({type:"GI",data:{icons:ht,source:this.source,tileID:this.tileID,type:"patterns"}},It)}const[wt,Dt,Xt]=yield Promise.all([Te,dt,zt]),sr=new I(wt),Or=new v.bm(Dt,Xt);for(const It in pe){const mr=pe[It];mr instanceof v.a5?(W(mr.layers,this.zoom,j),v.bn({bucket:mr,glyphMap:wt,glyphPositions:sr.positions,imageMap:Dt,imagePositions:Or.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):mr.hasPattern&&(mr instanceof v.bo||mr instanceof v.bp||mr instanceof v.bq)&&(W(mr.layers,this.zoom,j),mr.addFeatures(ie,this.tileID.canonical,Or.patternPositions))}return this.status="done",{buckets:Object.values(pe).filter(It=>!It.isEmpty()),featureIndex:ue,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:sr.image,imageAtlas:Or,glyphMap:this.returnDependencies?wt:null,iconMap:this.returnDependencies?Dt:null,glyphPositions:this.returnDependencies?sr.positions:null}})}}function W(Z,R,O){const j=new v.a8(R);for(const Y of Z)Y.recalculate(j,O)}class D{constructor(R,O,j){this.actor=R,this.layerIndex=O,this.availableImages=j,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(R,O){return v._(this,void 0,void 0,function*(){const j=yield v.l(R.request,O);try{return{vectorTile:new v.br.VectorTile(new v.bs(j.data)),rawData:j.data,cacheControl:j.cacheControl,expires:j.expires}}catch(Y){const ae=new Uint8Array(j.data);let ue=`Unable to parse the tile at ${R.request.url}, `;throw ue+=ae[0]===31&&ae[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Y.message}`,new Error(ue)}})}loadTile(R){return v._(this,void 0,void 0,function*(){const O=R.uid,j=!!(R&&R.request&&R.request.collectResourceTiming)&&new v.bt(R.request),Y=new F(R);this.loading[O]=Y;const ae=new AbortController;Y.abort=ae;try{const ue=yield this.loadVectorTile(R,ae);if(delete this.loading[O],!ue)return null;const pe=ue.rawData,ie={};ue.expires&&(ie.expires=ue.expires),ue.cacheControl&&(ie.cacheControl=ue.cacheControl);const ye={};if(j){const Te=j.finish();Te&&(ye.resourceTiming=JSON.parse(JSON.stringify(Te)))}Y.vectorTile=ue.vectorTile;const Ie=Y.parse(ue.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[O]=Y,this.fetching[O]={rawTileData:pe,cacheControl:ie,resourceTiming:ye};try{const Te=yield Ie;return v.e({rawTileData:pe.slice(0)},Te,ie,ye)}finally{delete this.fetching[O]}}catch(ue){throw delete this.loading[O],Y.status="done",this.loaded[O]=Y,ue}})}reloadTile(R){return v._(this,void 0,void 0,function*(){const O=R.uid;if(!this.loaded||!this.loaded[O])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const j=this.loaded[O];if(j.showCollisionBoxes=R.showCollisionBoxes,j.status==="parsing"){const Y=yield j.parse(j.vectorTile,this.layerIndex,this.availableImages,this.actor);let ae;if(this.fetching[O]){const{rawTileData:ue,cacheControl:pe,resourceTiming:ie}=this.fetching[O];delete this.fetching[O],ae=v.e({rawTileData:ue.slice(0)},Y,pe,ie)}else ae=Y;return ae}if(j.status==="done"&&j.vectorTile)return j.parse(j.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(R){return v._(this,void 0,void 0,function*(){const O=this.loading,j=R.uid;O&&O[j]&&O[j].abort&&(O[j].abort.abort(),delete O[j])})}removeTile(R){return v._(this,void 0,void 0,function*(){this.loaded&&this.loaded[R.uid]&&delete this.loaded[R.uid]})}}class B{constructor(){this.loaded={}}loadTile(R){return v._(this,void 0,void 0,function*(){const{uid:O,encoding:j,rawImageData:Y,redFactor:ae,greenFactor:ue,blueFactor:pe,baseShift:ie}=R,ye=Y.width+2,Ie=Y.height+2,Te=v.b(Y)?new v.R({width:ye,height:Ie},yield v.bu(Y,-1,-1,ye,Ie)):Y,Se=new v.bv(O,Te,j,ae,ue,pe,ie);return this.loaded=this.loaded||{},this.loaded[O]=Se,Se})}removeTile(R){const O=this.loaded,j=R.uid;O&&O[j]&&delete O[j]}}function le(Z,R){if(Z.length!==0){ge(Z[0],R);for(var O=1;O<Z.length;O++)ge(Z[O],!R)}}function ge(Z,R){for(var O=0,j=0,Y=0,ae=Z.length,ue=ae-1;Y<ae;ue=Y++){var pe=(Z[Y][0]-Z[ue][0])*(Z[ue][1]+Z[Y][1]),ie=O+pe;j+=Math.abs(O)>=Math.abs(pe)?O-ie+pe:pe-ie+O,O=ie}O+j>=0!=!!R&&Z.reverse()}var de=v.bw(function Z(R,O){var j,Y=R&&R.type;if(Y==="FeatureCollection")for(j=0;j<R.features.length;j++)Z(R.features[j],O);else if(Y==="GeometryCollection")for(j=0;j<R.geometries.length;j++)Z(R.geometries[j],O);else if(Y==="Feature")Z(R.geometry,O);else if(Y==="Polygon")le(R.coordinates,O);else if(Y==="MultiPolygon")for(j=0;j<R.coordinates.length;j++)le(R.coordinates[j],O);return R});const we=v.br.VectorTileFeature.prototype.toGeoJSON;var ee={exports:{}},q=v.bx,te=v.br.VectorTileFeature,_e=Ce;function Ce(Z,R){this.options=R||{},this.features=Z,this.length=Z.length}function Ae(Z,R){this.id=typeof Z.id=="number"?Z.id:void 0,this.type=Z.type,this.rawGeometry=Z.type===1?[Z.geometry]:Z.geometry,this.properties=Z.tags,this.extent=R||4096}Ce.prototype.feature=function(Z){return new Ae(this.features[Z],this.options.extent)},Ae.prototype.loadGeometry=function(){var Z=this.rawGeometry;this.geometry=[];for(var R=0;R<Z.length;R++){for(var O=Z[R],j=[],Y=0;Y<O.length;Y++)j.push(new q(O[Y][0],O[Y][1]));this.geometry.push(j)}return this.geometry},Ae.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Z=this.geometry,R=1/0,O=-1/0,j=1/0,Y=-1/0,ae=0;ae<Z.length;ae++)for(var ue=Z[ae],pe=0;pe<ue.length;pe++){var ie=ue[pe];R=Math.min(R,ie.x),O=Math.max(O,ie.x),j=Math.min(j,ie.y),Y=Math.max(Y,ie.y)}return[R,j,O,Y]},Ae.prototype.toGeoJSON=te.prototype.toGeoJSON;var Le=v.by,Ge=_e;function Re(Z){var R=new Le;return function(O,j){for(var Y in O.layers)j.writeMessage(3,Me,O.layers[Y])}(Z,R),R.finish()}function Me(Z,R){var O;R.writeVarintField(15,Z.version||1),R.writeStringField(1,Z.name||""),R.writeVarintField(5,Z.extent||4096);var j={keys:[],values:[],keycache:{},valuecache:{}};for(O=0;O<Z.length;O++)j.feature=Z.feature(O),R.writeMessage(2,$e,j);var Y=j.keys;for(O=0;O<Y.length;O++)R.writeStringField(3,Y[O]);var ae=j.values;for(O=0;O<ae.length;O++)R.writeMessage(4,Gt,ae[O])}function $e(Z,R){var O=Z.feature;O.id!==void 0&&R.writeVarintField(1,O.id),R.writeMessage(2,ft,Z),R.writeVarintField(3,O.type),R.writeMessage(4,or,O)}function ft(Z,R){var O=Z.feature,j=Z.keys,Y=Z.values,ae=Z.keycache,ue=Z.valuecache;for(var pe in O.properties){var ie=O.properties[pe],ye=ae[pe];if(ie!==null){ye===void 0&&(j.push(pe),ae[pe]=ye=j.length-1),R.writeVarint(ye);var Ie=typeof ie;Ie!=="string"&&Ie!=="boolean"&&Ie!=="number"&&(ie=JSON.stringify(ie));var Te=Ie+":"+ie,Se=ue[Te];Se===void 0&&(Y.push(ie),ue[Te]=Se=Y.length-1),R.writeVarint(Se)}}}function it(Z,R){return(R<<3)+(7&Z)}function st(Z){return Z<<1^Z>>31}function or(Z,R){for(var O=Z.loadGeometry(),j=Z.type,Y=0,ae=0,ue=O.length,pe=0;pe<ue;pe++){var ie=O[pe],ye=1;j===1&&(ye=ie.length),R.writeVarint(it(1,ye));for(var Ie=j===3?ie.length-1:ie.length,Te=0;Te<Ie;Te++){Te===1&&j!==1&&R.writeVarint(it(2,Ie-1));var Se=ie[Te].x-Y,dt=ie[Te].y-ae;R.writeVarint(st(Se)),R.writeVarint(st(dt)),Y+=Se,ae+=dt}j===3&&R.writeVarint(it(7,1))}}function Gt(Z,R){var O=typeof Z;O==="string"?R.writeStringField(1,Z):O==="boolean"?R.writeBooleanField(7,Z):O==="number"&&(Z%1!=0?R.writeDoubleField(3,Z):Z<0?R.writeSVarintField(6,Z):R.writeVarintField(5,Z))}ee.exports=Re,ee.exports.fromVectorTileJs=Re,ee.exports.fromGeojsonVt=function(Z,R){R=R||{};var O={};for(var j in Z)O[j]=new Ge(Z[j].features,R),O[j].name=j,O[j].version=R.version,O[j].extent=R.extent;return Re({layers:O})},ee.exports.GeoJSONWrapper=Ge;var ar=v.bw(ee.exports);const Ye={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Z=>Z},mt=Math.fround||(yt=new Float32Array(1),Z=>(yt[0]=+Z,yt[0]));var yt;const Ct=3,Rt=5,er=6;class Ur{constructor(R){this.options=Object.assign(Object.create(Ye),R),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(R){const{log:O,minZoom:j,maxZoom:Y}=this.options;O&&console.time("total time");const ae=`prepare ${R.length} points`;O&&console.time(ae),this.points=R;const ue=[];for(let ie=0;ie<R.length;ie++){const ye=R[ie];if(!ye.geometry)continue;const[Ie,Te]=ye.geometry.coordinates,Se=mt(Gr(Ie)),dt=mt(li(Te));ue.push(Se,dt,1/0,ie,-1,1),this.options.reduce&&ue.push(0)}let pe=this.trees[Y+1]=this._createTree(ue);O&&console.timeEnd(ae);for(let ie=Y;ie>=j;ie--){const ye=+Date.now();pe=this.trees[ie]=this._createTree(this._cluster(pe,ie)),O&&console.log("z%d: %d clusters in %dms",ie,pe.numItems,+Date.now()-ye)}return O&&console.timeEnd("total time"),this}getClusters(R,O){let j=((R[0]+180)%360+360)%360-180;const Y=Math.max(-90,Math.min(90,R[1]));let ae=R[2]===180?180:((R[2]+180)%360+360)%360-180;const ue=Math.max(-90,Math.min(90,R[3]));if(R[2]-R[0]>=360)j=-180,ae=180;else if(j>ae){const Te=this.getClusters([j,Y,180,ue],O),Se=this.getClusters([-180,Y,ae,ue],O);return Te.concat(Se)}const pe=this.trees[this._limitZoom(O)],ie=pe.range(Gr(j),li(ue),Gr(ae),li(Y)),ye=pe.data,Ie=[];for(const Te of ie){const Se=this.stride*Te;Ie.push(ye[Se+Rt]>1?Ir(ye,Se,this.clusterProps):this.points[ye[Se+Ct]])}return Ie}getChildren(R){const O=this._getOriginId(R),j=this._getOriginZoom(R),Y="No cluster with the specified id.",ae=this.trees[j];if(!ae)throw new Error(Y);const ue=ae.data;if(O*this.stride>=ue.length)throw new Error(Y);const pe=this.options.radius/(this.options.extent*Math.pow(2,j-1)),ie=ae.within(ue[O*this.stride],ue[O*this.stride+1],pe),ye=[];for(const Ie of ie){const Te=Ie*this.stride;ue[Te+4]===R&&ye.push(ue[Te+Rt]>1?Ir(ue,Te,this.clusterProps):this.points[ue[Te+Ct]])}if(ye.length===0)throw new Error(Y);return ye}getLeaves(R,O,j){const Y=[];return this._appendLeaves(Y,R,O=O||10,j=j||0,0),Y}getTile(R,O,j){const Y=this.trees[this._limitZoom(R)],ae=Math.pow(2,R),{extent:ue,radius:pe}=this.options,ie=pe/ue,ye=(j-ie)/ae,Ie=(j+1+ie)/ae,Te={features:[]};return this._addTileFeatures(Y.range((O-ie)/ae,ye,(O+1+ie)/ae,Ie),Y.data,O,j,ae,Te),O===0&&this._addTileFeatures(Y.range(1-ie/ae,ye,1,Ie),Y.data,ae,j,ae,Te),O===ae-1&&this._addTileFeatures(Y.range(0,ye,ie/ae,Ie),Y.data,-1,j,ae,Te),Te.features.length?Te:null}getClusterExpansionZoom(R){let O=this._getOriginZoom(R)-1;for(;O<=this.options.maxZoom;){const j=this.getChildren(R);if(O++,j.length!==1)break;R=j[0].properties.cluster_id}return O}_appendLeaves(R,O,j,Y,ae){const ue=this.getChildren(O);for(const pe of ue){const ie=pe.properties;if(ie&&ie.cluster?ae+ie.point_count<=Y?ae+=ie.point_count:ae=this._appendLeaves(R,ie.cluster_id,j,Y,ae):ae<Y?ae++:R.push(pe),R.length===j)break}return ae}_createTree(R){const O=new v.av(R.length/this.stride|0,this.options.nodeSize,Float32Array);for(let j=0;j<R.length;j+=this.stride)O.add(R[j],R[j+1]);return O.finish(),O.data=R,O}_addTileFeatures(R,O,j,Y,ae,ue){for(const pe of R){const ie=pe*this.stride,ye=O[ie+Rt]>1;let Ie,Te,Se;if(ye)Ie=Dr(O,ie,this.clusterProps),Te=O[ie],Se=O[ie+1];else{const zt=this.points[O[ie+Ct]];Ie=zt.properties;const[wt,Dt]=zt.geometry.coordinates;Te=Gr(wt),Se=li(Dt)}const dt={type:1,geometry:[[Math.round(this.options.extent*(Te*ae-j)),Math.round(this.options.extent*(Se*ae-Y))]],tags:Ie};let ht;ht=ye||this.options.generateId?O[ie+Ct]:this.points[O[ie+Ct]].id,ht!==void 0&&(dt.id=ht),ue.features.push(dt)}}_limitZoom(R){return Math.max(this.options.minZoom,Math.min(Math.floor(+R),this.options.maxZoom+1))}_cluster(R,O){const{radius:j,extent:Y,reduce:ae,minPoints:ue}=this.options,pe=j/(Y*Math.pow(2,O)),ie=R.data,ye=[],Ie=this.stride;for(let Te=0;Te<ie.length;Te+=Ie){if(ie[Te+2]<=O)continue;ie[Te+2]=O;const Se=ie[Te],dt=ie[Te+1],ht=R.within(ie[Te],ie[Te+1],pe),zt=ie[Te+Rt];let wt=zt;for(const Dt of ht){const Xt=Dt*Ie;ie[Xt+2]>O&&(wt+=ie[Xt+Rt])}if(wt>zt&&wt>=ue){let Dt,Xt=Se*zt,sr=dt*zt,Or=-1;const It=((Te/Ie|0)<<5)+(O+1)+this.points.length;for(const mr of ht){const $r=mr*Ie;if(ie[$r+2]<=O)continue;ie[$r+2]=O;const Ln=ie[$r+Rt];Xt+=ie[$r]*Ln,sr+=ie[$r+1]*Ln,ie[$r+4]=It,ae&&(Dt||(Dt=this._map(ie,Te,!0),Or=this.clusterProps.length,this.clusterProps.push(Dt)),ae(Dt,this._map(ie,$r)))}ie[Te+4]=It,ye.push(Xt/wt,sr/wt,1/0,It,-1,wt),ae&&ye.push(Or)}else{for(let Dt=0;Dt<Ie;Dt++)ye.push(ie[Te+Dt]);if(wt>1)for(const Dt of ht){const Xt=Dt*Ie;if(!(ie[Xt+2]<=O)){ie[Xt+2]=O;for(let sr=0;sr<Ie;sr++)ye.push(ie[Xt+sr])}}}}return ye}_getOriginId(R){return R-this.points.length>>5}_getOriginZoom(R){return(R-this.points.length)%32}_map(R,O,j){if(R[O+Rt]>1){const ue=this.clusterProps[R[O+er]];return j?Object.assign({},ue):ue}const Y=this.points[R[O+Ct]].properties,ae=this.options.map(Y);return j&&ae===Y?Object.assign({},ae):ae}}function Ir(Z,R,O){return{type:"Feature",id:Z[R+Ct],properties:Dr(Z,R,O),geometry:{type:"Point",coordinates:[(j=Z[R],360*(j-.5)),To(Z[R+1])]}};var j}function Dr(Z,R,O){const j=Z[R+Rt],Y=j>=1e4?`${Math.round(j/1e3)}k`:j>=1e3?Math.round(j/100)/10+"k":j,ae=Z[R+er],ue=ae===-1?{}:Object.assign({},O[ae]);return Object.assign(ue,{cluster:!0,cluster_id:Z[R+Ct],point_count:j,point_count_abbreviated:Y})}function Gr(Z){return Z/360+.5}function li(Z){const R=Math.sin(Z*Math.PI/180),O=.5-.25*Math.log((1+R)/(1-R))/Math.PI;return O<0?0:O>1?1:O}function To(Z){const R=(180-360*Z)*Math.PI/180;return 360*Math.atan(Math.exp(R))/Math.PI-90}function io(Z,R,O,j){for(var Y,ae=j,ue=O-R>>1,pe=O-R,ie=Z[R],ye=Z[R+1],Ie=Z[O],Te=Z[O+1],Se=R+3;Se<O;Se+=3){var dt=_a(Z[Se],Z[Se+1],ie,ye,Ie,Te);if(dt>ae)Y=Se,ae=dt;else if(dt===ae){var ht=Math.abs(Se-ue);ht<pe&&(Y=Se,pe=ht)}}ae>j&&(Y-R>3&&io(Z,R,Y,j),Z[Y+2]=ae,O-Y>3&&io(Z,Y,O,j))}function _a(Z,R,O,j,Y,ae){var ue=Y-O,pe=ae-j;if(ue!==0||pe!==0){var ie=((Z-O)*ue+(R-j)*pe)/(ue*ue+pe*pe);ie>1?(O=Y,j=ae):ie>0&&(O+=ue*ie,j+=pe*ie)}return(ue=Z-O)*ue+(pe=R-j)*pe}function Zn(Z,R,O,j){var Y={id:Z===void 0?null:Z,type:R,geometry:O,tags:j,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ae){var ue=ae.geometry,pe=ae.type;if(pe==="Point"||pe==="MultiPoint"||pe==="LineString")Hi(ae,ue);else if(pe==="Polygon"||pe==="MultiLineString")for(var ie=0;ie<ue.length;ie++)Hi(ae,ue[ie]);else if(pe==="MultiPolygon")for(ie=0;ie<ue.length;ie++)for(var ye=0;ye<ue[ie].length;ye++)Hi(ae,ue[ie][ye])}(Y),Y}function Hi(Z,R){for(var O=0;O<R.length;O+=3)Z.minX=Math.min(Z.minX,R[O]),Z.minY=Math.min(Z.minY,R[O+1]),Z.maxX=Math.max(Z.maxX,R[O]),Z.maxY=Math.max(Z.maxY,R[O+1])}function pr(Z,R,O,j){if(R.geometry){var Y=R.geometry.coordinates,ae=R.geometry.type,ue=Math.pow(O.tolerance/((1<<O.maxZoom)*O.extent),2),pe=[],ie=R.id;if(O.promoteId?ie=R.properties[O.promoteId]:O.generateId&&(ie=j||0),ae==="Point")oo(Y,pe);else if(ae==="MultiPoint")for(var ye=0;ye<Y.length;ye++)oo(Y[ye],pe);else if(ae==="LineString")be(Y,pe,ue,!1);else if(ae==="MultiLineString"){if(O.lineMetrics){for(ye=0;ye<Y.length;ye++)be(Y[ye],pe=[],ue,!1),Z.push(Zn(ie,"LineString",pe,R.properties));return}Ti(Y,pe,ue,!1)}else if(ae==="Polygon")Ti(Y,pe,ue,!0);else{if(ae!=="MultiPolygon"){if(ae==="GeometryCollection"){for(ye=0;ye<R.geometry.geometries.length;ye++)pr(Z,{id:ie,geometry:R.geometry.geometries[ye],properties:R.properties},O,j);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ye=0;ye<Y.length;ye++){var Ie=[];Ti(Y[ye],Ie,ue,!0),pe.push(Ie)}}Z.push(Zn(ie,ae,pe,R.properties))}}function oo(Z,R){R.push(wn(Z[0])),R.push(Pt(Z[1])),R.push(0)}function be(Z,R,O,j){for(var Y,ae,ue=0,pe=0;pe<Z.length;pe++){var ie=wn(Z[pe][0]),ye=Pt(Z[pe][1]);R.push(ie),R.push(ye),R.push(0),pe>0&&(ue+=j?(Y*ye-ie*ae)/2:Math.sqrt(Math.pow(ie-Y,2)+Math.pow(ye-ae,2))),Y=ie,ae=ye}var Ie=R.length-3;R[2]=1,io(R,0,Ie,O),R[Ie+2]=1,R.size=Math.abs(ue),R.start=0,R.end=R.size}function Ti(Z,R,O,j){for(var Y=0;Y<Z.length;Y++){var ae=[];be(Z[Y],ae,O,j),R.push(ae)}}function wn(Z){return Z/360+.5}function Pt(Z){var R=Math.sin(Z*Math.PI/180),O=.5-.25*Math.log((1+R)/(1-R))/Math.PI;return O<0?0:O>1?1:O}function Vt(Z,R,O,j,Y,ae,ue,pe){if(j/=R,ae>=(O/=R)&&ue<j)return Z;if(ue<O||ae>=j)return null;for(var ie=[],ye=0;ye<Z.length;ye++){var Ie=Z[ye],Te=Ie.geometry,Se=Ie.type,dt=Y===0?Ie.minX:Ie.minY,ht=Y===0?Ie.maxX:Ie.maxY;if(dt>=O&&ht<j)ie.push(Ie);else if(!(ht<O||dt>=j)){var zt=[];if(Se==="Point"||Se==="MultiPoint")ui(Te,zt,O,j,Y);else if(Se==="LineString")ao(Te,zt,O,j,Y,!1,pe.lineMetrics);else if(Se==="MultiLineString")ci(Te,zt,O,j,Y,!1);else if(Se==="Polygon")ci(Te,zt,O,j,Y,!0);else if(Se==="MultiPolygon")for(var wt=0;wt<Te.length;wt++){var Dt=[];ci(Te[wt],Dt,O,j,Y,!0),Dt.length&&zt.push(Dt)}if(zt.length){if(pe.lineMetrics&&Se==="LineString"){for(wt=0;wt<zt.length;wt++)ie.push(Zn(Ie.id,Se,zt[wt],Ie.tags));continue}Se!=="LineString"&&Se!=="MultiLineString"||(zt.length===1?(Se="LineString",zt=zt[0]):Se="MultiLineString"),Se!=="Point"&&Se!=="MultiPoint"||(Se=zt.length===3?"Point":"MultiPoint"),ie.push(Zn(Ie.id,Se,zt,Ie.tags))}}}return ie.length?ie:null}function ui(Z,R,O,j,Y){for(var ae=0;ae<Z.length;ae+=3){var ue=Z[ae+Y];ue>=O&&ue<=j&&(R.push(Z[ae]),R.push(Z[ae+1]),R.push(Z[ae+2]))}}function ao(Z,R,O,j,Y,ae,ue){for(var pe,ie,ye=Vr(Z),Ie=Y===0?bn:ko,Te=Z.start,Se=0;Se<Z.length-3;Se+=3){var dt=Z[Se],ht=Z[Se+1],zt=Z[Se+2],wt=Z[Se+3],Dt=Z[Se+4],Xt=Y===0?dt:ht,sr=Y===0?wt:Dt,Or=!1;ue&&(pe=Math.sqrt(Math.pow(dt-wt,2)+Math.pow(ht-Dt,2))),Xt<O?sr>O&&(ie=Ie(ye,dt,ht,wt,Dt,O),ue&&(ye.start=Te+pe*ie)):Xt>j?sr<j&&(ie=Ie(ye,dt,ht,wt,Dt,j),ue&&(ye.start=Te+pe*ie)):zn(ye,dt,ht,zt),sr<O&&Xt>=O&&(ie=Ie(ye,dt,ht,wt,Dt,O),Or=!0),sr>j&&Xt<=j&&(ie=Ie(ye,dt,ht,wt,Dt,j),Or=!0),!ae&&Or&&(ue&&(ye.end=Te+pe*ie),R.push(ye),ye=Vr(Z)),ue&&(Te+=pe)}var It=Z.length-3;dt=Z[It],ht=Z[It+1],zt=Z[It+2],(Xt=Y===0?dt:ht)>=O&&Xt<=j&&zn(ye,dt,ht,zt),It=ye.length-3,ae&&It>=3&&(ye[It]!==ye[0]||ye[It+1]!==ye[1])&&zn(ye,ye[0],ye[1],ye[2]),ye.length&&R.push(ye)}function Vr(Z){var R=[];return R.size=Z.size,R.start=Z.start,R.end=Z.end,R}function ci(Z,R,O,j,Y,ae){for(var ue=0;ue<Z.length;ue++)ao(Z[ue],R,O,j,Y,ae,!1)}function zn(Z,R,O,j){Z.push(R),Z.push(O),Z.push(j)}function bn(Z,R,O,j,Y,ae){var ue=(ae-R)/(j-R);return Z.push(ae),Z.push(O+(Y-O)*ue),Z.push(1),ue}function ko(Z,R,O,j,Y,ae){var ue=(ae-O)/(Y-O);return Z.push(R+(j-R)*ue),Z.push(ae),Z.push(1),ue}function Ne(Z,R){for(var O=[],j=0;j<Z.length;j++){var Y,ae=Z[j],ue=ae.type;if(ue==="Point"||ue==="MultiPoint"||ue==="LineString")Y=sn(ae.geometry,R);else if(ue==="MultiLineString"||ue==="Polygon"){Y=[];for(var pe=0;pe<ae.geometry.length;pe++)Y.push(sn(ae.geometry[pe],R))}else if(ue==="MultiPolygon")for(Y=[],pe=0;pe<ae.geometry.length;pe++){for(var ie=[],ye=0;ye<ae.geometry[pe].length;ye++)ie.push(sn(ae.geometry[pe][ye],R));Y.push(ie)}O.push(Zn(ae.id,ue,Y,ae.tags))}return O}function sn(Z,R){var O=[];O.size=Z.size,Z.start!==void 0&&(O.start=Z.start,O.end=Z.end);for(var j=0;j<Z.length;j+=3)O.push(Z[j]+R,Z[j+1],Z[j+2]);return O}function Kr(Z,R){if(Z.transformed)return Z;var O,j,Y,ae=1<<Z.z,ue=Z.x,pe=Z.y;for(O=0;O<Z.features.length;O++){var ie=Z.features[O],ye=ie.geometry,Ie=ie.type;if(ie.geometry=[],Ie===1)for(j=0;j<ye.length;j+=2)ie.geometry.push(Eo(ye[j],ye[j+1],R,ae,ue,pe));else for(j=0;j<ye.length;j++){var Te=[];for(Y=0;Y<ye[j].length;Y+=2)Te.push(Eo(ye[j][Y],ye[j][Y+1],R,ae,ue,pe));ie.geometry.push(Te)}}return Z.transformed=!0,Z}function Eo(Z,R,O,j,Y,ae){return[Math.round(O*(Z*j-Y)),Math.round(O*(R*j-ae))]}function so(Z,R,O,j,Y){for(var ae=R===Y.maxZoom?0:Y.tolerance/((1<<R)*Y.extent),ue={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:O,y:j,z:R,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},pe=0;pe<Z.length;pe++){ue.numFeatures++,Be(ue,Z[pe],ae,Y);var ie=Z[pe].minX,ye=Z[pe].minY,Ie=Z[pe].maxX,Te=Z[pe].maxY;ie<ue.minX&&(ue.minX=ie),ye<ue.minY&&(ue.minY=ye),Ie>ue.maxX&&(ue.maxX=Ie),Te>ue.maxY&&(ue.maxY=Te)}return ue}function Be(Z,R,O,j){var Y=R.geometry,ae=R.type,ue=[];if(ae==="Point"||ae==="MultiPoint")for(var pe=0;pe<Y.length;pe+=3)ue.push(Y[pe]),ue.push(Y[pe+1]),Z.numPoints++,Z.numSimplified++;else if(ae==="LineString")Et(ue,Y,Z,O,!1,!1);else if(ae==="MultiLineString"||ae==="Polygon")for(pe=0;pe<Y.length;pe++)Et(ue,Y[pe],Z,O,ae==="Polygon",pe===0);else if(ae==="MultiPolygon")for(var ie=0;ie<Y.length;ie++){var ye=Y[ie];for(pe=0;pe<ye.length;pe++)Et(ue,ye[pe],Z,O,!0,pe===0)}if(ue.length){var Ie=R.tags||null;if(ae==="LineString"&&j.lineMetrics){for(var Te in Ie={},R.tags)Ie[Te]=R.tags[Te];Ie.mapbox_clip_start=Y.start/Y.size,Ie.mapbox_clip_end=Y.end/Y.size}var Se={geometry:ue,type:ae==="Polygon"||ae==="MultiPolygon"?3:ae==="LineString"||ae==="MultiLineString"?2:1,tags:Ie};R.id!==null&&(Se.id=R.id),Z.features.push(Se)}}function Et(Z,R,O,j,Y,ae){var ue=j*j;if(j>0&&R.size<(Y?ue:j))O.numPoints+=R.length/3;else{for(var pe=[],ie=0;ie<R.length;ie+=3)(j===0||R[ie+2]>ue)&&(O.numSimplified++,pe.push(R[ie]),pe.push(R[ie+1])),O.numPoints++;Y&&function(ye,Ie){for(var Te=0,Se=0,dt=ye.length,ht=dt-2;Se<dt;ht=Se,Se+=2)Te+=(ye[Se]-ye[ht])*(ye[Se+1]+ye[ht+1]);if(Te>0===Ie)for(Se=0,dt=ye.length;Se<dt/2;Se+=2){var zt=ye[Se],wt=ye[Se+1];ye[Se]=ye[dt-2-Se],ye[Se+1]=ye[dt-1-Se],ye[dt-2-Se]=zt,ye[dt-1-Se]=wt}}(pe,ae),Z.push(pe)}}function St(Z,R){var O=(R=this.options=function(Y,ae){for(var ue in ae)Y[ue]=ae[ue];return Y}(Object.create(this.options),R)).debug;if(O&&console.time("preprocess data"),R.maxZoom<0||R.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(R.promoteId&&R.generateId)throw new Error("promoteId and generateId cannot be used together.");var j=function(Y,ae){var ue=[];if(Y.type==="FeatureCollection")for(var pe=0;pe<Y.features.length;pe++)pr(ue,Y.features[pe],ae,pe);else pr(ue,Y.type==="Feature"?Y:{geometry:Y},ae);return ue}(Z,R);this.tiles={},this.tileCoords=[],O&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",R.indexMaxZoom,R.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),j=function(Y,ae){var ue=ae.buffer/ae.extent,pe=Y,ie=Vt(Y,1,-1-ue,ue,0,-1,2,ae),ye=Vt(Y,1,1-ue,2+ue,0,-1,2,ae);return(ie||ye)&&(pe=Vt(Y,1,-ue,1+ue,0,-1,2,ae)||[],ie&&(pe=Ne(ie,1).concat(pe)),ye&&(pe=pe.concat(Ne(ye,-1)))),pe}(j,R),j.length&&this.splitTile(j,0,0,0),O&&(j.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function tn(Z,R,O){return 32*((1<<Z)*O+R)+Z}function Xr(Z,R){return R?Z.properties[R]:Z.id}function Tt(Z,R){if(Z==null)return!0;if(Z.type==="Feature")return Xr(Z,R)!=null;if(Z.type==="FeatureCollection"){const O=new Set;for(const j of Z.features){const Y=Xr(j,R);if(Y==null||O.has(Y))return!1;O.add(Y)}return!0}return!1}function ki(Z,R){const O=new Map;if(Z!=null)if(Z.type==="Feature")O.set(Xr(Z,R),Z);else for(const j of Z.features)O.set(Xr(j,R),j);return O}St.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},St.prototype.splitTile=function(Z,R,O,j,Y,ae,ue){for(var pe=[Z,R,O,j],ie=this.options,ye=ie.debug;pe.length;){j=pe.pop(),O=pe.pop(),R=pe.pop(),Z=pe.pop();var Ie=1<<R,Te=tn(R,O,j),Se=this.tiles[Te];if(!Se&&(ye>1&&console.time("creation"),Se=this.tiles[Te]=so(Z,R,O,j,ie),this.tileCoords.push({z:R,x:O,y:j}),ye)){ye>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",R,O,j,Se.numFeatures,Se.numPoints,Se.numSimplified),console.timeEnd("creation"));var dt="z"+R;this.stats[dt]=(this.stats[dt]||0)+1,this.total++}if(Se.source=Z,Y){if(R===ie.maxZoom||R===Y)continue;var ht=1<<Y-R;if(O!==Math.floor(ae/ht)||j!==Math.floor(ue/ht))continue}else if(R===ie.indexMaxZoom||Se.numPoints<=ie.indexMaxPoints)continue;if(Se.source=null,Z.length!==0){ye>1&&console.time("clipping");var zt,wt,Dt,Xt,sr,Or,It=.5*ie.buffer/ie.extent,mr=.5-It,$r=.5+It,Ln=1+It;zt=wt=Dt=Xt=null,sr=Vt(Z,Ie,O-It,O+$r,0,Se.minX,Se.maxX,ie),Or=Vt(Z,Ie,O+mr,O+Ln,0,Se.minX,Se.maxX,ie),Z=null,sr&&(zt=Vt(sr,Ie,j-It,j+$r,1,Se.minY,Se.maxY,ie),wt=Vt(sr,Ie,j+mr,j+Ln,1,Se.minY,Se.maxY,ie),sr=null),Or&&(Dt=Vt(Or,Ie,j-It,j+$r,1,Se.minY,Se.maxY,ie),Xt=Vt(Or,Ie,j+mr,j+Ln,1,Se.minY,Se.maxY,ie),Or=null),ye>1&&console.timeEnd("clipping"),pe.push(zt||[],R+1,2*O,2*j),pe.push(wt||[],R+1,2*O,2*j+1),pe.push(Dt||[],R+1,2*O+1,2*j),pe.push(Xt||[],R+1,2*O+1,2*j+1)}}},St.prototype.getTile=function(Z,R,O){var j=this.options,Y=j.extent,ae=j.debug;if(Z<0||Z>24)return null;var ue=1<<Z,pe=tn(Z,R=(R%ue+ue)%ue,O);if(this.tiles[pe])return Kr(this.tiles[pe],Y);ae>1&&console.log("drilling down to z%d-%d-%d",Z,R,O);for(var ie,ye=Z,Ie=R,Te=O;!ie&&ye>0;)ye--,Ie=Math.floor(Ie/2),Te=Math.floor(Te/2),ie=this.tiles[tn(ye,Ie,Te)];return ie&&ie.source?(ae>1&&console.log("found parent tile z%d-%d-%d",ye,Ie,Te),ae>1&&console.time("drilling down"),this.splitTile(ie.source,ye,Ie,Te,Z,R,O),ae>1&&console.timeEnd("drilling down"),this.tiles[pe]?Kr(this.tiles[pe],Y):null):null};class Ei extends D{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(R,O){return v._(this,void 0,void 0,function*(){const j=R.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Y=this._geoJSONIndex.getTile(j.z,j.x,j.y);if(!Y)return null;const ae=new class{constructor(pe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=v.W,this.length=pe.length,this._features=pe}feature(pe){return new class{constructor(ie){this._feature=ie,this.extent=v.W,this.type=ie.type,this.properties=ie.tags,"id"in ie&&!isNaN(ie.id)&&(this.id=parseInt(ie.id,10))}loadGeometry(){if(this._feature.type===1){const ie=[];for(const ye of this._feature.geometry)ie.push([new v.P(ye[0],ye[1])]);return ie}{const ie=[];for(const ye of this._feature.geometry){const Ie=[];for(const Te of ye)Ie.push(new v.P(Te[0],Te[1]));ie.push(Ie)}return ie}}toGeoJSON(ie,ye,Ie){return we.call(this,ie,ye,Ie)}}(this._features[pe])}}(Y.features);let ue=ar(ae);return ue.byteOffset===0&&ue.byteLength===ue.buffer.byteLength||(ue=new Uint8Array(ue)),{vectorTile:ae,rawData:ue.buffer}})}loadData(R){return v._(this,void 0,void 0,function*(){var O;(O=this._pendingRequest)===null||O===void 0||O.abort();const j=!!(R&&R.request&&R.request.collectResourceTiming)&&new v.bt(R.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(R,this._pendingRequest),this._geoJSONIndex=R.cluster?new Ur(function({superclusterOptions:ae,clusterProperties:ue}){if(!ue||!ae)return ae;const pe={},ie={},ye={accumulated:null,zoom:0},Ie={properties:null},Te=Object.keys(ue);for(const Se of Te){const[dt,ht]=ue[Se],zt=v.bA(ht),wt=v.bA(typeof dt=="string"?[dt,["accumulated"],["get",Se]]:dt);pe[Se]=zt.value,ie[Se]=wt.value}return ae.map=Se=>{Ie.properties=Se;const dt={};for(const ht of Te)dt[ht]=pe[ht].evaluate(ye,Ie);return dt},ae.reduce=(Se,dt)=>{Ie.properties=dt;for(const ht of Te)ye.accumulated=Se[ht],Se[ht]=ie[ht].evaluate(ye,Ie)},ae}(R)).load((yield this._pendingData).features):new St(yield this._pendingData,R.geojsonVtOptions),this.loaded={};const Y={};if(j){const ae=j.finish();ae&&(Y.resourceTiming={},Y.resourceTiming[R.source]=JSON.parse(JSON.stringify(ae)))}return Y}catch(Y){if(delete this._pendingRequest,v.bz(Y))return{abandoned:!0};throw Y}})}getData(){return v._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(R){const O=this.loaded;return O&&O[R.uid]?super.reloadTile(R):this.loadTile(R)}loadAndProcessGeoJSON(R,O){return v._(this,void 0,void 0,function*(){let j=yield this.loadGeoJSON(R,O);if(delete this._pendingRequest,typeof j!="object")throw new Error(`Input data given to '${R.source}' is not a valid GeoJSON object.`);if(de(j,!0),R.filter){const Y=v.bA(R.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Y.result==="error")throw new Error(Y.value.map(ue=>`${ue.key}: ${ue.message}`).join(", "));j={type:"FeatureCollection",features:j.features.filter(ue=>Y.value.evaluate({zoom:0},ue))}}return j})}loadGeoJSON(R,O){return v._(this,void 0,void 0,function*(){const{promoteId:j}=R;if(R.request){const Y=yield v.h(R.request,O);return this._dataUpdateable=Tt(Y.data,j)?ki(Y.data,j):void 0,Y.data}if(typeof R.data=="string")try{const Y=JSON.parse(R.data);return this._dataUpdateable=Tt(Y,j)?ki(Y,j):void 0,Y}catch{throw new Error(`Input data given to '${R.source}' is not a valid GeoJSON object.`)}if(!R.dataDiff)throw new Error(`Input data given to '${R.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${R.source}`);return function(Y,ae,ue){var pe,ie,ye,Ie;if(ae.removeAll&&Y.clear(),ae.remove)for(const Te of ae.remove)Y.delete(Te);if(ae.add)for(const Te of ae.add){const Se=Xr(Te,ue);Se!=null&&Y.set(Se,Te)}if(ae.update)for(const Te of ae.update){let Se=Y.get(Te.id);if(Se==null)continue;const dt=!Te.removeAllProperties&&(((pe=Te.removeProperties)===null||pe===void 0?void 0:pe.length)>0||((ie=Te.addOrUpdateProperties)===null||ie===void 0?void 0:ie.length)>0);if((Te.newGeometry||Te.removeAllProperties||dt)&&(Se=Object.assign({},Se),Y.set(Te.id,Se),dt&&(Se.properties=Object.assign({},Se.properties))),Te.newGeometry&&(Se.geometry=Te.newGeometry),Te.removeAllProperties)Se.properties={};else if(((ye=Te.removeProperties)===null||ye===void 0?void 0:ye.length)>0)for(const ht of Te.removeProperties)Object.prototype.hasOwnProperty.call(Se.properties,ht)&&delete Se.properties[ht];if(((Ie=Te.addOrUpdateProperties)===null||Ie===void 0?void 0:Ie.length)>0)for(const{key:ht,value:zt}of Te.addOrUpdateProperties)Se.properties[ht]=zt}}(this._dataUpdateable,R.dataDiff,j),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(R){return v._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(R){return this._geoJSONIndex.getClusterExpansionZoom(R.clusterId)}getClusterChildren(R){return this._geoJSONIndex.getChildren(R.clusterId)}getClusterLeaves(R){return this._geoJSONIndex.getLeaves(R.clusterId,R.limit,R.offset)}}class Ot{constructor(R){this.self=R,this.actor=new v.C(R),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(O,j)=>{if(this.externalWorkerSourceTypes[O])throw new Error(`Worker source with name "${O}" already registered.`);this.externalWorkerSourceTypes[O]=j},this.self.addProtocol=v.bg,this.self.removeProtocol=v.bh,this.self.registerRTLTextPlugin=O=>{if(v.bB.isParsed())throw new Error("RTL text plugin already registered.");v.bB.setMethods(O)},this.actor.registerMessageHandler("LDT",(O,j)=>this._getDEMWorkerSource(O,j.source).loadTile(j)),this.actor.registerMessageHandler("RDT",(O,j)=>v._(this,void 0,void 0,function*(){this._getDEMWorkerSource(O,j.source).removeTile(j)})),this.actor.registerMessageHandler("GCEZ",(O,j)=>v._(this,void 0,void 0,function*(){return this._getWorkerSource(O,j.type,j.source).getClusterExpansionZoom(j)})),this.actor.registerMessageHandler("GCC",(O,j)=>v._(this,void 0,void 0,function*(){return this._getWorkerSource(O,j.type,j.source).getClusterChildren(j)})),this.actor.registerMessageHandler("GCL",(O,j)=>v._(this,void 0,void 0,function*(){return this._getWorkerSource(O,j.type,j.source).getClusterLeaves(j)})),this.actor.registerMessageHandler("LD",(O,j)=>this._getWorkerSource(O,j.type,j.source).loadData(j)),this.actor.registerMessageHandler("GD",(O,j)=>this._getWorkerSource(O,j.type,j.source).getData()),this.actor.registerMessageHandler("LT",(O,j)=>this._getWorkerSource(O,j.type,j.source).loadTile(j)),this.actor.registerMessageHandler("RT",(O,j)=>this._getWorkerSource(O,j.type,j.source).reloadTile(j)),this.actor.registerMessageHandler("AT",(O,j)=>this._getWorkerSource(O,j.type,j.source).abortTile(j)),this.actor.registerMessageHandler("RMT",(O,j)=>this._getWorkerSource(O,j.type,j.source).removeTile(j)),this.actor.registerMessageHandler("RS",(O,j)=>v._(this,void 0,void 0,function*(){if(!this.workerSources[O]||!this.workerSources[O][j.type]||!this.workerSources[O][j.type][j.source])return;const Y=this.workerSources[O][j.type][j.source];delete this.workerSources[O][j.type][j.source],Y.removeSource!==void 0&&Y.removeSource(j)})),this.actor.registerMessageHandler("RM",O=>v._(this,void 0,void 0,function*(){delete this.layerIndexes[O],delete this.availableImages[O],delete this.workerSources[O],delete this.demWorkerSources[O]})),this.actor.registerMessageHandler("SR",(O,j)=>v._(this,void 0,void 0,function*(){this.referrer=j})),this.actor.registerMessageHandler("SRPS",(O,j)=>this._syncRTLPluginState(O,j)),this.actor.registerMessageHandler("IS",(O,j)=>v._(this,void 0,void 0,function*(){this.self.importScripts(j)})),this.actor.registerMessageHandler("SI",(O,j)=>this._setImages(O,j)),this.actor.registerMessageHandler("UL",(O,j)=>v._(this,void 0,void 0,function*(){this._getLayerIndex(O).update(j.layers,j.removedIds)})),this.actor.registerMessageHandler("SL",(O,j)=>v._(this,void 0,void 0,function*(){this._getLayerIndex(O).replace(j)}))}_setImages(R,O){return v._(this,void 0,void 0,function*(){this.availableImages[R]=O;for(const j in this.workerSources[R]){const Y=this.workerSources[R][j];for(const ae in Y)Y[ae].availableImages=O}})}_syncRTLPluginState(R,O){return v._(this,void 0,void 0,function*(){if(v.bB.isParsed())return v.bB.getState();if(O.pluginStatus!=="loading")return v.bB.setState(O),O;const j=O.pluginURL;if(this.self.importScripts(j),v.bB.isParsed()){const Y={pluginStatus:"loaded",pluginURL:j};return v.bB.setState(Y),Y}throw v.bB.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${j}`)})}_getAvailableImages(R){let O=this.availableImages[R];return O||(O=[]),O}_getLayerIndex(R){let O=this.layerIndexes[R];return O||(O=this.layerIndexes[R]=new c),O}_getWorkerSource(R,O,j){if(this.workerSources[R]||(this.workerSources[R]={}),this.workerSources[R][O]||(this.workerSources[R][O]={}),!this.workerSources[R][O][j]){const Y={sendAsync:(ae,ue)=>(ae.targetMapId=R,this.actor.sendAsync(ae,ue))};switch(O){case"vector":this.workerSources[R][O][j]=new D(Y,this._getLayerIndex(R),this._getAvailableImages(R));break;case"geojson":this.workerSources[R][O][j]=new Ei(Y,this._getLayerIndex(R),this._getAvailableImages(R));break;default:this.workerSources[R][O][j]=new this.externalWorkerSourceTypes[O](Y,this._getLayerIndex(R),this._getAvailableImages(R))}}return this.workerSources[R][O][j]}_getDEMWorkerSource(R,O){return this.demWorkerSources[R]||(this.demWorkerSources[R]={}),this.demWorkerSources[R][O]||(this.demWorkerSources[R][O]=new B),this.demWorkerSources[R][O]}}return v.i(self)&&(self.worker=new Ot(self)),Ot}),h("index",["exports","./shared"],function(v,c){var I="4.4.1";let F,W;const D={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:g=>new Promise((n,s)=>{const d=requestAnimationFrame(n);g.signal.addEventListener("abort",()=>{cancelAnimationFrame(d),s(c.c())})}),getImageData(g,n=0){return this.getImageCanvasContext(g).getImageData(-n,-n,g.width+2*n,g.height+2*n)},getImageCanvasContext(g){const n=window.document.createElement("canvas"),s=n.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return n.width=g.width,n.height=g.height,s.drawImage(g,0,0,g.width,g.height),s},resolveURL:g=>(F||(F=document.createElement("a")),F.href=g,F.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(W==null&&(W=matchMedia("(prefers-reduced-motion: reduce)")),W.matches)}};class B{static testProp(n){if(!B.docStyle)return n[0];for(let s=0;s<n.length;s++)if(n[s]in B.docStyle)return n[s];return n[0]}static create(n,s,d){const f=window.document.createElement(n);return s!==void 0&&(f.className=s),d&&d.appendChild(f),f}static createNS(n,s){return window.document.createElementNS(n,s)}static disableDrag(){B.docStyle&&B.selectProp&&(B.userSelect=B.docStyle[B.selectProp],B.docStyle[B.selectProp]="none")}static enableDrag(){B.docStyle&&B.selectProp&&(B.docStyle[B.selectProp]=B.userSelect)}static setTransform(n,s){n.style[B.transformProp]=s}static addEventListener(n,s,d,f={}){n.addEventListener(s,d,"passive"in f?f:f.capture)}static removeEventListener(n,s,d,f={}){n.removeEventListener(s,d,"passive"in f?f:f.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",B.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",B.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",B.suppressClickInternal,!0)},0)}static getScale(n){const s=n.getBoundingClientRect();return{x:s.width/n.offsetWidth||1,y:s.height/n.offsetHeight||1,boundingClientRect:s}}static getPoint(n,s,d){const f=s.boundingClientRect;return new c.P((d.clientX-f.left)/s.x-n.clientLeft,(d.clientY-f.top)/s.y-n.clientTop)}static mousePos(n,s){const d=B.getScale(n);return B.getPoint(n,d,s)}static touchPos(n,s){const d=[],f=B.getScale(n);for(let y=0;y<s.length;y++)d.push(B.getPoint(n,f,s[y]));return d}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}}B.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,B.selectProp=B.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),B.transformProp=B.testProp(["transform","WebkitTransform"]);const le={supported:!1,testSupport:function(g){!we&&de&&(ee?q(g):ge=g)}};let ge,de,we=!1,ee=!1;function q(g){const n=g.createTexture();g.bindTexture(g.TEXTURE_2D,n);try{if(g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,de),g.isContextLost())return;le.supported=!0}catch{}g.deleteTexture(n),we=!0}var te;typeof document<"u"&&(de=document.createElement("img"),de.onload=()=>{ge&&q(ge),ge=null,ee=!0},de.onerror=()=>{we=!0,ge=null},de.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(g){let n,s,d,f;g.resetRequestQueue=()=>{n=[],s=0,d=0,f={}},g.addThrottleControl=k=>{const P=d++;return f[P]=k,P},g.removeThrottleControl=k=>{delete f[k],b()},g.getImage=(k,P,z=!0)=>new Promise((M,U)=>{le.supported&&(k.headers||(k.headers={}),k.headers.accept="image/webp,*/*"),c.e(k,{type:"image"}),n.push({abortController:P,requestParameters:k,supportImageRefresh:z,state:"queued",onError:$=>{U($)},onSuccess:$=>{M($)}}),b()});const y=k=>c._(this,void 0,void 0,function*(){k.state="running";const{requestParameters:P,supportImageRefresh:z,onError:M,onSuccess:U,abortController:$}=k,G=z===!1&&!c.i(self)&&!c.g(P.url)&&(!P.headers||Object.keys(P.headers).reduce((ne,se)=>ne&&se==="accept",!0));s++;const Q=G?T(P,$):c.m(P,$);try{const ne=yield Q;delete k.abortController,k.state="completed",ne.data instanceof HTMLImageElement||c.b(ne.data)?U(ne):ne.data&&U({data:yield(K=ne.data,typeof createImageBitmap=="function"?c.d(K):c.f(K)),cacheControl:ne.cacheControl,expires:ne.expires})}catch(ne){delete k.abortController,M(ne)}finally{s--,b()}var K}),b=()=>{const k=(()=>{for(const P of Object.keys(f))if(f[P]())return!0;return!1})()?c.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let P=s;P<k&&n.length>0;P++){const z=n.shift();z.abortController.signal.aborted?P--:y(z)}},T=(k,P)=>new Promise((z,M)=>{const U=new Image,$=k.url,G=k.credentials;G&&G==="include"?U.crossOrigin="use-credentials":(G&&G==="same-origin"||!c.s($))&&(U.crossOrigin="anonymous"),P.signal.addEventListener("abort",()=>{U.src="",M(c.c())}),U.fetchPriority="high",U.onload=()=>{U.onerror=U.onload=null,z({data:U})},U.onerror=()=>{U.onerror=U.onload=null,P.signal.aborted||M(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},U.src=$})}(te||(te={})),te.resetRequestQueue();class _e{constructor(n){this._transformRequestFn=n}transformRequest(n,s){return this._transformRequestFn&&this._transformRequestFn(n,s)||{url:n}}setTransformRequest(n){this._transformRequestFn=n}}function Ce(g){var n=new c.A(3);return n[0]=g[0],n[1]=g[1],n[2]=g[2],n}var Ae,Le=function(g,n,s){return g[0]=n[0]-s[0],g[1]=n[1]-s[1],g[2]=n[2]-s[2],g};Ae=new c.A(3),c.A!=Float32Array&&(Ae[0]=0,Ae[1]=0,Ae[2]=0);var Ge=function(g){var n=g[0],s=g[1];return n*n+s*s};function Re(g){const n=[];if(typeof g=="string")n.push({id:"default",url:g});else if(g&&g.length>0){const s=[];for(const{id:d,url:f}of g){const y=`${d}${f}`;s.indexOf(y)===-1&&(s.push(y),n.push({id:d,url:f}))}}return n}function Me(g,n,s){const d=g.split("?");return d[0]+=`${n}${s}`,d.join("?")}(function(){var g=new c.A(2);c.A!=Float32Array&&(g[0]=0,g[1]=0)})();class $e{constructor(n,s,d,f){this.context=n,this.format=d,this.texture=n.gl.createTexture(),this.update(s,f)}update(n,s,d){const{width:f,height:y}=n,b=!(this.size&&this.size[0]===f&&this.size[1]===y||d),{context:T}=this,{gl:k}=T;if(this.useMipmap=!!(s&&s.useMipmap),k.bindTexture(k.TEXTURE_2D,this.texture),T.pixelStoreUnpackFlipY.set(!1),T.pixelStoreUnpack.set(1),T.pixelStoreUnpackPremultiplyAlpha.set(this.format===k.RGBA&&(!s||s.premultiply!==!1)),b)this.size=[f,y],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||c.b(n)?k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,k.UNSIGNED_BYTE,n):k.texImage2D(k.TEXTURE_2D,0,this.format,f,y,0,this.format,k.UNSIGNED_BYTE,n.data);else{const{x:P,y:z}=d||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||c.b(n)?k.texSubImage2D(k.TEXTURE_2D,0,P,z,k.RGBA,k.UNSIGNED_BYTE,n):k.texSubImage2D(k.TEXTURE_2D,0,P,z,f,y,k.RGBA,k.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&k.generateMipmap(k.TEXTURE_2D)}bind(n,s,d){const{context:f}=this,{gl:y}=f;y.bindTexture(y.TEXTURE_2D,this.texture),d!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=y.LINEAR),n!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,n),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,d||n),this.filter=n),s!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,s),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}function ft(g){const{userImage:n}=g;return!!(n&&n.render&&n.render())&&(g.data.replace(new Uint8Array(n.data.buffer)),!0)}class it extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:s,promiseResolve:d}of this.requestors)d(this._getImagesForIds(s));this.requestors=[]}}getImage(n){const s=this.images[n];if(s&&!s.data&&s.spriteData){const d=s.spriteData;s.data=new c.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),s.spriteData=null}return s}addImage(n,s){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,s)&&(this.images[n]=s)}_validate(n,s){let d=!0;const f=s.data||s.spriteData;return this._validateStretch(s.stretchX,f&&f.width)||(this.fire(new c.j(new Error(`Image "${n}" has invalid "stretchX" value`))),d=!1),this._validateStretch(s.stretchY,f&&f.height)||(this.fire(new c.j(new Error(`Image "${n}" has invalid "stretchY" value`))),d=!1),this._validateContent(s.content,s)||(this.fire(new c.j(new Error(`Image "${n}" has invalid "content" value`))),d=!1),d}_validateStretch(n,s){if(!n)return!0;let d=0;for(const f of n){if(f[0]<d||f[1]<f[0]||s<f[1])return!1;d=f[1]}return!0}_validateContent(n,s){if(!n)return!0;if(n.length!==4)return!1;const d=s.spriteData,f=d&&d.width||s.data.width,y=d&&d.height||s.data.height;return!(n[0]<0||f<n[0]||n[1]<0||y<n[1]||n[2]<0||f<n[2]||n[3]<0||y<n[3]||n[2]<n[0]||n[3]<n[1])}updateImage(n,s,d=!0){const f=this.getImage(n);if(d&&(f.data.width!==s.data.width||f.data.height!==s.data.height))throw new Error(`size mismatch between old image (${f.data.width}x${f.data.height}) and new image (${s.data.width}x${s.data.height}).`);s.version=f.version+1,this.images[n]=s,this.updatedImages[n]=!0}removeImage(n){const s=this.images[n];delete this.images[n],delete this.patterns[n],s.userImage&&s.userImage.onRemove&&s.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n){return new Promise((s,d)=>{let f=!0;if(!this.isLoaded())for(const y of n)this.images[y]||(f=!1);this.isLoaded()||f?s(this._getImagesForIds(n)):this.requestors.push({ids:n,promiseResolve:s})})}_getImagesForIds(n){const s={};for(const d of n){let f=this.getImage(d);f||(this.fire(new c.k("styleimagemissing",{id:d})),f=this.getImage(d)),f?s[d]={data:f.data.clone(),pixelRatio:f.pixelRatio,sdf:f.sdf,version:f.version,stretchX:f.stretchX,stretchY:f.stretchY,content:f.content,textFitWidth:f.textFitWidth,textFitHeight:f.textFitHeight,hasRenderCallback:!!(f.userImage&&f.userImage.render)}:c.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return s}getPixelSize(){const{width:n,height:s}=this.atlasImage;return{width:n,height:s}}getPattern(n){const s=this.patterns[n],d=this.getImage(n);if(!d)return null;if(s&&s.position.version===d.version)return s.position;if(s)s.position.version=d.version;else{const f={w:d.data.width+2,h:d.data.height+2,x:0,y:0},y=new c.I(f,d);this.patterns[n]={bin:f,position:y}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const s=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new $e(n,this.atlasImage,s.RGBA),this.atlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const y in this.patterns)n.push(this.patterns[y].bin);const{w:s,h:d}=c.p(n),f=this.atlasImage;f.resize({width:s||1,height:d||1});for(const y in this.patterns){const{bin:b}=this.patterns[y],T=b.x+1,k=b.y+1,P=this.getImage(y).data,z=P.width,M=P.height;c.R.copy(P,f,{x:0,y:0},{x:T,y:k},{width:z,height:M}),c.R.copy(P,f,{x:0,y:M-1},{x:T,y:k-1},{width:z,height:1}),c.R.copy(P,f,{x:0,y:0},{x:T,y:k+M},{width:z,height:1}),c.R.copy(P,f,{x:z-1,y:0},{x:T-1,y:k},{width:1,height:M}),c.R.copy(P,f,{x:0,y:0},{x:T+z,y:k},{width:1,height:M})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const s of n){if(this.callbackDispatchedThisFrame[s])continue;this.callbackDispatchedThisFrame[s]=!0;const d=this.getImage(s);d||c.w(`Image with ID: "${s}" was not found`),ft(d)&&this.updateImage(s,d)}}}const st=1e20;function or(g,n,s,d,f,y,b,T,k){for(let P=n;P<n+d;P++)Gt(g,s*y+P,y,f,b,T,k);for(let P=s;P<s+f;P++)Gt(g,P*y+n,1,d,b,T,k)}function Gt(g,n,s,d,f,y,b){y[0]=0,b[0]=-st,b[1]=st,f[0]=g[n];for(let T=1,k=0,P=0;T<d;T++){f[T]=g[n+T*s];const z=T*T;do{const M=y[k];P=(f[T]-f[M]+z-M*M)/(T-M)/2}while(P<=b[k]&&--k>-1);k++,y[k]=T,b[k]=P,b[k+1]=st}for(let T=0,k=0;T<d;T++){for(;b[k+1]<T;)k++;const P=y[k],z=T-P;g[n+T*s]=f[P]+z*z}}class ar{constructor(n,s){this.requestManager=n,this.localIdeographFontFamily=s,this.entries={}}setURL(n){this.url=n}getGlyphs(n){return c._(this,void 0,void 0,function*(){const s=[];for(const y in n)for(const b of n[y])s.push(this._getAndCacheGlyphsPromise(y,b));const d=yield Promise.all(s),f={};for(const{stack:y,id:b,glyph:T}of d)f[y]||(f[y]={}),f[y][b]=T&&{id:T.id,bitmap:T.bitmap.clone(),metrics:T.metrics};return f})}_getAndCacheGlyphsPromise(n,s){return c._(this,void 0,void 0,function*(){let d=this.entries[n];d||(d=this.entries[n]={glyphs:{},requests:{},ranges:{}});let f=d.glyphs[s];if(f!==void 0)return{stack:n,id:s,glyph:f};if(f=this._tinySDF(d,n,s),f)return d.glyphs[s]=f,{stack:n,id:s,glyph:f};const y=Math.floor(s/256);if(256*y>65535)throw new Error("glyphs > 65535 not supported");if(d.ranges[y])return{stack:n,id:s,glyph:f};if(!this.url)throw new Error("glyphsUrl is not set");if(!d.requests[y]){const T=ar.loadGlyphRange(n,y,this.url,this.requestManager);d.requests[y]=T}const b=yield d.requests[y];for(const T in b)this._doesCharSupportLocalGlyph(+T)||(d.glyphs[+T]=b[+T]);return d.ranges[y]=!0,{stack:n,id:s,glyph:b[s]||null}})}_doesCharSupportLocalGlyph(n){return!!this.localIdeographFontFamily&&(c.u["CJK Unified Ideographs"](n)||c.u["Hangul Syllables"](n)||c.u.Hiragana(n)||c.u.Katakana(n))}_tinySDF(n,s,d){const f=this.localIdeographFontFamily;if(!f||!this._doesCharSupportLocalGlyph(d))return;let y=n.tinySDF;if(!y){let T="400";/bold/i.test(s)?T="900":/medium/i.test(s)?T="500":/light/i.test(s)&&(T="200"),y=n.tinySDF=new ar.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:f,fontWeight:T})}const b=y.draw(String.fromCharCode(d));return{id:d,bitmap:new c.o({width:b.width||60,height:b.height||60},b.data),metrics:{width:b.glyphWidth/2||24,height:b.glyphHeight/2||24,left:b.glyphLeft/2+.5||0,top:b.glyphTop/2-27.5||-8,advance:b.glyphAdvance/2||24,isDoubleResolution:!0}}}}ar.loadGlyphRange=function(g,n,s,d){return c._(this,void 0,void 0,function*(){const f=256*n,y=f+255,b=d.transformRequest(s.replace("{fontstack}",g).replace("{range}",`${f}-${y}`),"Glyphs"),T=yield c.l(b,new AbortController);if(!T||!T.data)throw new Error(`Could not load glyph range. range: ${n}, ${f}-${y}`);const k={};for(const P of c.n(T.data))k[P.id]=P;return k})},ar.TinySDF=class{constructor({fontSize:g=24,buffer:n=3,radius:s=8,cutoff:d=.25,fontFamily:f="sans-serif",fontWeight:y="normal",fontStyle:b="normal"}={}){this.buffer=n,this.cutoff=d,this.radius=s;const T=this.size=g+4*n,k=this._createCanvas(T),P=this.ctx=k.getContext("2d",{willReadFrequently:!0});P.font=`${b} ${y} ${g}px ${f}`,P.textBaseline="alphabetic",P.textAlign="left",P.fillStyle="black",this.gridOuter=new Float64Array(T*T),this.gridInner=new Float64Array(T*T),this.f=new Float64Array(T),this.z=new Float64Array(T+1),this.v=new Uint16Array(T)}_createCanvas(g){const n=document.createElement("canvas");return n.width=n.height=g,n}draw(g){const{width:n,actualBoundingBoxAscent:s,actualBoundingBoxDescent:d,actualBoundingBoxLeft:f,actualBoundingBoxRight:y}=this.ctx.measureText(g),b=Math.ceil(s),T=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-f))),k=Math.min(this.size-this.buffer,b+Math.ceil(d)),P=T+2*this.buffer,z=k+2*this.buffer,M=Math.max(P*z,0),U=new Uint8ClampedArray(M),$={data:U,width:P,height:z,glyphWidth:T,glyphHeight:k,glyphTop:b,glyphLeft:0,glyphAdvance:n};if(T===0||k===0)return $;const{ctx:G,buffer:Q,gridInner:K,gridOuter:ne}=this;G.clearRect(Q,Q,T,k),G.fillText(g,Q,Q+b);const se=G.getImageData(Q,Q,T,k);ne.fill(st,0,M),K.fill(0,0,M);for(let J=0;J<k;J++)for(let ce=0;ce<T;ce++){const me=se.data[4*(J*T+ce)+3]/255;if(me===0)continue;const ve=(J+Q)*P+ce+Q;if(me===1)ne[ve]=0,K[ve]=st;else{const Pe=.5-me;ne[ve]=Pe>0?Pe*Pe:0,K[ve]=Pe<0?Pe*Pe:0}}or(ne,0,0,P,z,P,this.f,this.v,this.z),or(K,Q,Q,T,k,P,this.f,this.v,this.z);for(let J=0;J<M;J++){const ce=Math.sqrt(ne[J])-Math.sqrt(K[J]);U[J]=Math.round(255-255*(ce/this.radius+this.cutoff))}return $}};class Ye{constructor(){this.specification=c.v.light.position}possiblyEvaluate(n,s){return c.y(n.expression.evaluate(s))}interpolate(n,s,d){return{x:c.z.number(n.x,s.x,d),y:c.z.number(n.y,s.y,d),z:c.z.number(n.z,s.z,d)}}}let mt;class yt extends c.E{constructor(n){super(),mt=mt||new c.q({anchor:new c.D(c.v.light.anchor),position:new Ye,color:new c.D(c.v.light.color),intensity:new c.D(c.v.light.intensity)}),this._transitionable=new c.T(mt),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,s={}){if(!this._validate(c.r,n,s))for(const d in n){const f=n[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),f):this._transitionable.setValue(d,f)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,s,d){return(!d||d.validate!==!1)&&c.t(this,n.call(c.x,{value:s,style:{glyphs:!0,sprite:!0},styleSpec:c.v}))}}class Ct{constructor(n,s){this.width=n,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,s){const d=n.join(",")+String(s);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(n,s)),this.dashEntry[d]}getDashRanges(n,s,d){const f=[];let y=n.length%2==1?-n[n.length-1]*d:0,b=n[0]*d,T=!0;f.push({left:y,right:b,isDash:T,zeroLength:n[0]===0});let k=n[0];for(let P=1;P<n.length;P++){T=!T;const z=n[P];y=k*d,k+=z,b=k*d,f.push({left:y,right:b,isDash:T,zeroLength:z===0})}return f}addRoundDash(n,s,d){const f=s/2;for(let y=-d;y<=d;y++){const b=this.width*(this.nextRow+d+y);let T=0,k=n[T];for(let P=0;P<this.width;P++){P/k.right>1&&(k=n[++T]);const z=Math.abs(P-k.left),M=Math.abs(P-k.right),U=Math.min(z,M);let $;const G=y/d*(f+1);if(k.isDash){const Q=f-Math.abs(G);$=Math.sqrt(U*U+Q*Q)}else $=f-Math.sqrt(U*U+G*G);this.data[b+P]=Math.max(0,Math.min(255,$+128))}}}addRegularDash(n){for(let T=n.length-1;T>=0;--T){const k=n[T],P=n[T+1];k.zeroLength?n.splice(T,1):P&&P.isDash===k.isDash&&(P.left=k.left,n.splice(T,1))}const s=n[0],d=n[n.length-1];s.isDash===d.isDash&&(s.left=d.left-this.width,d.right=s.right+this.width);const f=this.width*this.nextRow;let y=0,b=n[y];for(let T=0;T<this.width;T++){T/b.right>1&&(b=n[++y]);const k=Math.abs(T-b.left),P=Math.abs(T-b.right),z=Math.min(k,P);this.data[f+T]=Math.max(0,Math.min(255,(b.isDash?z:-z)+128))}}addDash(n,s){const d=s?7:0,f=2*d+1;if(this.nextRow+f>this.height)return c.w("LineAtlas out of space"),null;let y=0;for(let T=0;T<n.length;T++)y+=n[T];if(y!==0){const T=this.width/y,k=this.getDashRanges(n,this.width,T);s?this.addRoundDash(k,T,d):this.addRegularDash(k)}const b={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:y};return this.nextRow+=f,this.dirty=!0,b}bind(n){const s=n.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))}}const Rt="maplibre_preloaded_worker_pool";class er{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<er.workerCount;)this.workers.push(new Worker(c.a.WORKER_URL));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(s=>{s.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Rt]}numActive(){return Object.keys(this.active).length}}const Ur=Math.floor(D.hardwareConcurrency/2);let Ir,Dr;function Gr(){return Ir||(Ir=new er),Ir}er.workerCount=c.B(globalThis)?Math.max(Math.min(Ur,3),1):1;class li{constructor(n,s){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=s;const d=this.workerPool.acquire(s);for(let f=0;f<d.length;f++){const y=new c.C(d[f],s);y.name=`Worker ${f}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,s){const d=[];for(const f of this.actors)d.push(f.sendAsync({type:n,data:s}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(n=!0){this.actors.forEach(s=>{s.remove()}),this.actors=[],n&&this.workerPool.release(this.id)}registerMessageHandler(n,s){for(const d of this.actors)d.registerMessageHandler(n,s)}}function To(){return Dr||(Dr=new li(Gr(),c.G),Dr.registerMessageHandler("GR",(g,n,s)=>c.m(n,s))),Dr}function io(g,n){const s=c.F();return c.H(s,s,[1,1,0]),c.J(s,s,[.5*g.width,.5*g.height,1]),c.K(s,s,g.calculatePosMatrix(n.toUnwrapped()))}function _a(g,n,s,d,f,y){const b=function(M,U,$){if(M)for(const G of M){const Q=U[G];if(Q&&Q.source===$&&Q.type==="fill-extrusion")return!0}else for(const G in U){const Q=U[G];if(Q.source===$&&Q.type==="fill-extrusion")return!0}return!1}(f&&f.layers,n,g.id),T=y.maxPitchScaleFactor(),k=g.tilesIn(d,T,b);k.sort(Zn);const P=[];for(const M of k)P.push({wrappedTileID:M.tileID.wrapped().key,queryResults:M.tile.queryRenderedFeatures(n,s,g._state,M.queryGeometry,M.cameraQueryGeometry,M.scale,f,y,T,io(g.transform,M.tileID))});const z=function(M){const U={},$={};for(const G of M){const Q=G.queryResults,K=G.wrappedTileID,ne=$[K]=$[K]||{};for(const se in Q){const J=Q[se],ce=ne[se]=ne[se]||{},me=U[se]=U[se]||[];for(const ve of J)ce[ve.featureIndex]||(ce[ve.featureIndex]=!0,me.push(ve))}}return U}(P);for(const M in z)z[M].forEach(U=>{const $=U.feature,G=g.getFeatureState($.layer["source-layer"],$.id);$.source=$.layer.source,$.layer["source-layer"]&&($.sourceLayer=$.layer["source-layer"]),$.state=G});return z}function Zn(g,n){const s=g.tileID,d=n.tileID;return s.overscaledZ-d.overscaledZ||s.canonical.y-d.canonical.y||s.wrap-d.wrap||s.canonical.x-d.canonical.x}function Hi(g,n,s){return c._(this,void 0,void 0,function*(){let d=g;if(g.url?d=(yield c.h(n.transformRequest(g.url,"Source"),s)).data:yield D.frameAsync(s),!d)return null;const f=c.L(c.e(d,g),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in d&&d.vector_layers&&(f.vectorLayerIds=d.vector_layers.map(y=>y.id)),f})}class pr{constructor(n,s){n&&(s?this.setSouthWest(n).setNorthEast(s):Array.isArray(n)&&(n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1])))}setNorthEast(n){return this._ne=n instanceof c.M?new c.M(n.lng,n.lat):c.M.convert(n),this}setSouthWest(n){return this._sw=n instanceof c.M?new c.M(n.lng,n.lat):c.M.convert(n),this}extend(n){const s=this._sw,d=this._ne;let f,y;if(n instanceof c.M)f=n,y=n;else{if(!(n instanceof pr))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(pr.convert(n)):this.extend(c.M.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(c.M.convert(n)):this;if(f=n._sw,y=n._ne,!f||!y)return this}return s||d?(s.lng=Math.min(f.lng,s.lng),s.lat=Math.min(f.lat,s.lat),d.lng=Math.max(y.lng,d.lng),d.lat=Math.max(y.lat,d.lat)):(this._sw=new c.M(f.lng,f.lat),this._ne=new c.M(y.lng,y.lat)),this}getCenter(){return new c.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.M(this.getWest(),this.getNorth())}getSouthEast(){return new c.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:s,lat:d}=c.M.convert(n);let f=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(f=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&f}static convert(n){return n instanceof pr?n:n&&new pr(n)}static fromLngLat(n,s=0){const d=360*s/40075017,f=d/Math.cos(Math.PI/180*n.lat);return new pr(new c.M(n.lng-f,n.lat-d),new c.M(n.lng+f,n.lat+d))}}class oo{constructor(n,s,d){this.bounds=pr.convert(this.validateBounds(n)),this.minzoom=s||0,this.maxzoom=d||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const s=Math.pow(2,n.z),d=Math.floor(c.N(this.bounds.getWest())*s),f=Math.floor(c.O(this.bounds.getNorth())*s),y=Math.ceil(c.N(this.bounds.getEast())*s),b=Math.ceil(c.O(this.bounds.getSouth())*s);return n.x>=d&&n.x<y&&n.y>=f&&n.y<b}}class be extends c.E{constructor(n,s,d,f){if(super(),this.id=n,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.L(s,["url","scheme","tileSize","promoteId"])),this._options=c.e({type:"vector"},s),this._collectResourceTiming=s.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(f)}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield Hi(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),n&&(c.e(this,n),n.bounds&&(this.tileBounds=new oo(n.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this.fire(new c.j(n))}})}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.abort(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return c.e({},this._options)}loadTile(n){return c._(this,void 0,void 0,function*(){const s=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(s,"Tile"),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};d.request.collectResourceTiming=this._collectResourceTiming;let f="RT";if(n.actor&&n.state!=="expired"){if(n.state==="loading")return new Promise((y,b)=>{n.reloadPromise={resolve:y,reject:b}})}else n.actor=this.dispatcher.getActor(),f="LT";n.abortController=new AbortController;try{const y=yield n.actor.sendAsync({type:f,data:d},n.abortController);if(delete n.abortController,n.aborted)return;this._afterTileLoadWorkerResponse(n,y)}catch(y){if(delete n.abortController,n.aborted)return;if(y&&y.status!==404)throw y;this._afterTileLoadWorkerResponse(n,null)}})}_afterTileLoadWorkerResponse(n,s){if(s&&s.resourceTiming&&(n.resourceTiming=s.resourceTiming),s&&this.map._refreshExpiredTiles&&n.setExpiryData(s),n.loadVectorData(s,this.map.painter),n.reloadPromise){const d=n.reloadPromise;n.reloadPromise=null,this.loadTile(n).then(d.resolve).catch(d.reject)}}abortTile(n){return c._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.actor&&(yield n.actor.sendAsync({type:"AT",data:{uid:n.uid,type:this.type,source:this.id}}))})}unloadTile(n){return c._(this,void 0,void 0,function*(){n.unloadVectorData(),n.actor&&(yield n.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Ti extends c.E{constructor(n,s,d,f){super(),this.id=n,this.dispatcher=d,this.setEventedParent(f),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},s),c.e(this,c.L(s,["url","scheme","tileSize"]))}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield Hi(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,n&&(c.e(this,n),n.bounds&&(this.tileBounds=new oo(n.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this.fire(new c.j(n))}})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(n){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}serialize(){return c.e({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n){return c._(this,void 0,void 0,function*(){const s=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.abortController=new AbortController;try{const d=yield te.getImage(this.map._requestManager.transformRequest(s,"Tile"),n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&n.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const f=this.map.painter.context,y=f.gl,b=d.data;n.texture=this.map.painter.getTileTexture(b.width),n.texture?n.texture.update(b,{useMipmap:!0}):(n.texture=new $e(f,b,y.RGBA,{useMipmap:!0}),n.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST),f.extTextureFilterAnisotropic&&y.texParameterf(y.TEXTURE_2D,f.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,f.extTextureFilterAnisotropicMax)),n.state="loaded"}}catch(d){if(delete n.abortController,n.aborted)n.state="unloaded";else if(d)throw n.state="errored",d}})}abortTile(n){return c._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController)})}unloadTile(n){return c._(this,void 0,void 0,function*(){n.texture&&this.map.painter.saveTileTexture(n.texture)})}hasTransition(){return!1}}class wn extends Ti{constructor(n,s,d,f){super(n,s,d,f),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},s),this.encoding=s.encoding||"mapbox",this.redFactor=s.redFactor,this.greenFactor=s.greenFactor,this.blueFactor=s.blueFactor,this.baseShift=s.baseShift}loadTile(n){return c._(this,void 0,void 0,function*(){const s=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(s,"Tile");n.neighboringTiles=this._getNeighboringTiles(n.tileID),n.abortController=new AbortController;try{const f=yield te.getImage(d,n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(f&&f.data){const y=f.data;this.map._refreshExpiredTiles&&f.cacheControl&&f.expires&&n.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});const b=c.b(y)&&c.S()?y:yield this.readImageNow(y),T={type:this.type,uid:n.uid,source:this.id,rawImageData:b,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!n.actor||n.state==="expired"){n.actor=this.dispatcher.getActor();const k=yield n.actor.sendAsync({type:"LDT",data:T});n.dem=k,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded"}}}catch(f){if(delete n.abortController,n.aborted)n.state="unloaded";else if(f)throw n.state="errored",f}})}readImageNow(n){return c._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&c.U()){const s=n.width+2,d=n.height+2;try{return new c.R({width:s,height:d},yield c.V(n,-1,-1,s,d))}catch{}}return D.getImageData(n,1)})}_getNeighboringTiles(n){const s=n.canonical,d=Math.pow(2,s.z),f=(s.x-1+d)%d,y=s.x===0?n.wrap-1:n.wrap,b=(s.x+1+d)%d,T=s.x+1===d?n.wrap+1:n.wrap,k={};return k[new c.Q(n.overscaledZ,y,s.z,f,s.y).key]={backfilled:!1},k[new c.Q(n.overscaledZ,T,s.z,b,s.y).key]={backfilled:!1},s.y>0&&(k[new c.Q(n.overscaledZ,y,s.z,f,s.y-1).key]={backfilled:!1},k[new c.Q(n.overscaledZ,n.wrap,s.z,s.x,s.y-1).key]={backfilled:!1},k[new c.Q(n.overscaledZ,T,s.z,b,s.y-1).key]={backfilled:!1}),s.y+1<d&&(k[new c.Q(n.overscaledZ,y,s.z,f,s.y+1).key]={backfilled:!1},k[new c.Q(n.overscaledZ,n.wrap,s.z,s.x,s.y+1).key]={backfilled:!1},k[new c.Q(n.overscaledZ,T,s.z,b,s.y+1).key]={backfilled:!1}),k}unloadTile(n){return c._(this,void 0,void 0,function*(){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&(yield n.actor.sendAsync({type:"RDT",data:{type:this.type,uid:n.uid,source:this.id}}))})}}class Pt extends c.E{constructor(n,s,d,f){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(f),this._data=s.data,this._options=c.e({},s),this._collectResourceTiming=s.collectResourceTiming,s.maxzoom!==void 0&&(this.maxzoom=s.maxzoom),s.type&&(this.type=s.type),s.attribution&&(this.attribution=s.attribution),this.promoteId=s.promoteId;const y=c.W/this.tileSize;this.workerOptions=c.e({source:this.id,cluster:s.cluster||!1,geojsonVtOptions:{buffer:(s.buffer!==void 0?s.buffer:128)*y,tolerance:(s.tolerance!==void 0?s.tolerance:.375)*y,extent:c.W,maxZoom:this.maxzoom,lineMetrics:s.lineMetrics||!1,generateId:s.generateId||!1},superclusterOptions:{maxZoom:s.clusterMaxZoom!==void 0?s.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,s.clusterMinPoints||2),extent:c.W,radius:(s.clusterRadius||50)*y,log:!1,generateId:s.generateId||!1},clusterProperties:s.clusterProperties,filter:s.filter},s.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return c._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(n){this.map=n,this.load()}setData(n){return this._data=n,this._updateWorkerData(),this}updateData(n){return this._updateWorkerData(n),this}getData(){return c._(this,void 0,void 0,function*(){const n=c.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:n})})}setClusterOptions(n){return this.workerOptions.cluster=n.cluster,n&&(n.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=n.clusterRadius),n.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=n.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(n){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:n,source:this.id}})}getClusterChildren(n){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:n,source:this.id}})}getClusterLeaves(n,s,d){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:n,limit:s,offset:d}})}_updateWorkerData(n){return c._(this,void 0,void 0,function*(){const s=c.e({type:this.type},this.workerOptions);n?s.dataDiff=n:typeof this._data=="string"?(s.request=this.map._requestManager.transformRequest(D.resolveURL(this._data),"Source"),s.request.collectResourceTiming=this._collectResourceTiming):s.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new c.k("dataloading",{dataType:"source"}));try{const d=yield this.actor.sendAsync({type:"LD",data:s});if(this._pendingLoads--,this._removed||d.abandoned)return void this.fire(new c.k("dataabort",{dataType:"source"}));let f=null;d.resourceTiming&&d.resourceTiming[this.id]&&(f=d.resourceTiming[this.id].slice(0));const y={dataType:"source"};this._collectResourceTiming&&f&&f.length>0&&c.e(y,{resourceTiming:f}),this.fire(new c.k("data",Object.assign(Object.assign({},y),{sourceDataType:"metadata"}))),this.fire(new c.k("data",Object.assign(Object.assign({},y),{sourceDataType:"content"})))}catch(d){if(this._pendingLoads--,this._removed)return void this.fire(new c.k("dataabort",{dataType:"source"}));this.fire(new c.j(d))}})}loaded(){return this._pendingLoads===0}loadTile(n){return c._(this,void 0,void 0,function*(){const s=n.actor?"RT":"LT";n.actor=this.actor;const d={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};n.abortController=new AbortController;const f=yield this.actor.sendAsync({type:s,data:d},n.abortController);delete n.abortController,n.unloadVectorData(),n.aborted||n.loadVectorData(f,this.map.painter,s==="RT")})}abortTile(n){return c._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.aborted=!0})}unloadTile(n){return c._(this,void 0,void 0,function*(){n.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return c.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Vt=c.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ui extends c.E{constructor(n,s,d,f){super(),this.id=n,this.dispatcher=d,this.coordinates=s.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(f),this.options=s}load(n){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const s=yield te.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,s&&s.data&&(this.image=s.data,n&&(this.coordinates=n),this._finishLoading())}catch(s){this._request=null,this._loaded=!0,this.fire(new c.j(s))}})}loaded(){return this._loaded}updateImage(n){return n.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=n.url,this.load(n.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(n){this.coordinates=n;const s=n.map(c.Y.fromLngLat);this.tileID=function(f){let y=1/0,b=1/0,T=-1/0,k=-1/0;for(const U of f)y=Math.min(y,U.x),b=Math.min(b,U.y),T=Math.max(T,U.x),k=Math.max(k,U.y);const P=Math.max(T-y,k-b),z=Math.max(0,Math.floor(-Math.log(P)/Math.LN2)),M=Math.pow(2,z);return new c.a0(z,Math.floor((y+T)/2*M),Math.floor((b+k)/2*M))}(s),this.minzoom=this.maxzoom=this.tileID.z;const d=s.map(f=>this.tileID.getTilePoint(f)._round());return this._boundsArray=new c.Z,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,c.W,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,c.W),this._boundsArray.emplaceBack(d[2].x,d[2].y,c.W,c.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,s=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,Vt.members)),this.boundsSegments||(this.boundsSegments=c.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new $e(n,this.image,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE));let d=!1;for(const f in this.tiles){const y=this.tiles[f];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,d=!0)}d&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(n){return c._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={}):n.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class ao extends ui{constructor(n,s,d,f){super(n,s,d,f),this.roundZoom=!0,this.type="video",this.options=s}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1;const n=this.options;this.urls=[];for(const s of n.urls)this.urls.push(this.map._requestManager.transformRequest(s,"Source").url);try{const s=yield c.a2(this.urls);if(this._loaded=!0,!s)return;this.video=s,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(s){this.fire(new c.j(s))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const s=this.video.seekable;n<s.start(0)||n>s.end(0)?this.fire(new c.j(new c.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${s.start(0)} and ${s.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,s=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,Vt.members)),this.boundsSegments||(this.boundsSegments=c.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),s.texSubImage2D(s.TEXTURE_2D,0,0,0,s.RGBA,s.UNSIGNED_BYTE,this.video)):(this.texture=new $e(n,this.video,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE));let d=!1;for(const f in this.tiles){const y=this.tiles[f];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,d=!0)}d&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Vr extends ui{constructor(n,s,d,f){super(n,s,d,f),s.coordinates?Array.isArray(s.coordinates)&&s.coordinates.length===4&&!s.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(b=>typeof b!="number"))||this.fire(new c.j(new c.a1(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.j(new c.a1(`sources.${n}`,null,'missing required property "coordinates"'))),s.animate&&typeof s.animate!="boolean"&&this.fire(new c.j(new c.a1(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),s.canvas?typeof s.canvas=="string"||s.canvas instanceof HTMLCanvasElement||this.fire(new c.j(new c.a1(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.j(new c.a1(`sources.${n}`,null,'missing required property "canvas"'))),this.options=s,this.animate=s.animate===void 0||s.animate}load(){return c._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const s=this.map.painter.context,d=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,Vt.members)),this.boundsSegments||(this.boundsSegments=c.$.simpleSegment(0,0,4,2)),this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new $e(s,this.canvas,d.RGBA,{premultiply:!0});let f=!1;for(const y in this.tiles){const b=this.tiles[y];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,f=!0)}f&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const ci={},zn=g=>{switch(g){case"geojson":return Pt;case"image":return ui;case"raster":return Ti;case"raster-dem":return wn;case"vector":return be;case"video":return ao;case"canvas":return Vr}return ci[g]},bn="RTLPluginLoaded";class ko extends c.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=To()}_syncState(n){return this.status=n,this.dispatcher.broadcast("SRPS",{pluginStatus:n,pluginURL:this.url}).catch(s=>{throw this.status="error",s})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(n){return c._(this,arguments,void 0,function*(s,d=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=D.resolveURL(s),!this.url)throw new Error(`requested url ${s} is invalid`);if(this.status==="unavailable"){if(!d)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return c._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new c.k(bn))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ne=null;function sn(){return Ne||(Ne=new ko),Ne}class Kr{constructor(n,s){this.timeAdded=0,this.fadeEndTime=0,this.tileID=n,this.uid=c.a3(),this.uses=0,this.tileSize=s,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(n){const s=n+this.timeAdded;s<this.fadeEndTime||(this.fadeEndTime=s)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(n,s,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(f,y){const b={};if(!y)return b;for(const T of f){const k=T.layerIds.map(P=>y.getLayer(P)).filter(Boolean);if(k.length!==0){T.layers=k,T.stateDependentLayerIds&&(T.stateDependentLayers=T.stateDependentLayerIds.map(P=>k.filter(z=>z.id===P)[0]));for(const P of k)b[P.id]=T}}return b}(n.buckets,s.style),this.hasSymbolBuckets=!1;for(const f in this.buckets){const y=this.buckets[f];if(y instanceof c.a5){if(this.hasSymbolBuckets=!0,!d)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const f in this.buckets){const y=this.buckets[f];if(y instanceof c.a5&&y.hasRTLText){this.hasRTLText=!0,sn().lazyLoad();break}}this.queryPadding=0;for(const f in this.buckets){const y=this.buckets[f];this.queryPadding=Math.max(this.queryPadding,s.style.getLayer(f).queryRadius(y))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage)}else this.collisionBoxArray=new c.a4}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const d in this.buckets){const f=this.buckets[d];f.uploadPending()&&f.upload(n)}const s=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new $e(n,this.imageAtlas.image,s.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new $e(n,this.glyphAtlasImage,s.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,s,d,f,y,b,T,k,P,z){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:f,cameraQueryGeometry:y,scale:b,tileSize:this.tileSize,pixelPosMatrix:z,transform:k,params:T,queryPadding:this.queryPadding*P},n,s,d):{}}querySourceFeatures(n,s){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const f=d.loadVTLayers(),y=s&&s.sourceLayer?s.sourceLayer:"",b=f._geojsonTileLayer||f[y];if(!b)return;const T=c.a6(s&&s.filter),{z:k,x:P,y:z}=this.tileID.canonical,M={z:k,x:P,y:z};for(let U=0;U<b.length;U++){const $=b.feature(U);if(T.needGeometry){const K=c.a7($,!0);if(!T.filter(new c.a8(this.tileID.overscaledZ),K,this.tileID.canonical))continue}else if(!T.filter(new c.a8(this.tileID.overscaledZ),$))continue;const G=d.getId($,y),Q=new c.a9($,k,P,z,G);Q.tile=M,n.push(Q)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const s=this.expirationTime;if(n.cacheControl){const d=c.aa(n.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const d=Date.now();let f=!1;if(this.expirationTime>d)f=!1;else if(s)if(this.expirationTime<s)f=!0;else{const y=this.expirationTime-s;y?this.expirationTime=d+Math.max(y,3e4):f=!0}else f=!0;f?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,s){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const f in this.buckets){if(!s.style.hasLayer(f))continue;const y=this.buckets[f],b=y.layers[0].sourceLayer||"_geojsonTileLayer",T=d[b],k=n[b];if(!T||!k||Object.keys(k).length===0)continue;y.update(k,T,this.imageAtlas&&this.imageAtlas.patternPositions||{});const P=s&&s.style&&s.style.getLayer(f);P&&(this.queryPadding=Math.max(this.queryPadding,P.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<D.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=D.now()+n}setDependencies(n,s){const d={};for(const f of s)d[f]=!0;this.dependencies[n]=d}hasDependency(n,s){for(const d of n){const f=this.dependencies[d];if(f){for(const y of s)if(f[y])return!0}}return!1}}class Eo{constructor(n,s){this.max=n,this.onRemove=s,this.reset()}reset(){for(const n in this.data)for(const s of this.data[n])s.timeout&&clearTimeout(s.timeout),this.onRemove(s.value);return this.data={},this.order=[],this}add(n,s,d){const f=n.wrapped().key;this.data[f]===void 0&&(this.data[f]=[]);const y={value:s,timeout:void 0};if(d!==void 0&&(y.timeout=setTimeout(()=>{this.remove(n,y)},d)),this.data[f].push(y),this.order.push(f),this.order.length>this.max){const b=this._getAndRemoveByKey(this.order[0]);b&&this.onRemove(b)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const s=this.data[n].shift();return s.timeout&&clearTimeout(s.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),s.value}getByKey(n){const s=this.data[n];return s?s[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,s){if(!this.has(n))return this;const d=n.wrapped().key,f=s===void 0?0:this.data[d].indexOf(s),y=this.data[d][f];return this.data[d].splice(f,1),y.timeout&&clearTimeout(y.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(y.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this}filter(n){const s=[];for(const d in this.data)for(const f of this.data[d])n(f.value)||s.push(f);for(const d of s)this.remove(d.value.tileID,d)}}class so{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,s,d){const f=String(s);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][f]=this.stateChanges[n][f]||{},c.e(this.stateChanges[n][f],d),this.deletedStates[n]===null){this.deletedStates[n]={};for(const y in this.state[n])y!==f&&(this.deletedStates[n][y]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][f]===null){this.deletedStates[n][f]={};for(const y in this.state[n][f])d[y]||(this.deletedStates[n][f][y]=null)}else for(const y in d)this.deletedStates[n]&&this.deletedStates[n][f]&&this.deletedStates[n][f][y]===null&&delete this.deletedStates[n][f][y]}removeFeatureState(n,s,d){if(this.deletedStates[n]===null)return;const f=String(s);if(this.deletedStates[n]=this.deletedStates[n]||{},d&&s!==void 0)this.deletedStates[n][f]!==null&&(this.deletedStates[n][f]=this.deletedStates[n][f]||{},this.deletedStates[n][f][d]=null);else if(s!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][f])for(d in this.deletedStates[n][f]={},this.stateChanges[n][f])this.deletedStates[n][f][d]=null;else this.deletedStates[n][f]=null;else this.deletedStates[n]=null}getState(n,s){const d=String(s),f=c.e({},(this.state[n]||{})[d],(this.stateChanges[n]||{})[d]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const y=this.deletedStates[n][s];if(y===null)return{};for(const b in y)delete f[b]}return f}initializeTileState(n,s){n.setFeatureState(this.state,s)}coalesceChanges(n,s){const d={};for(const f in this.stateChanges){this.state[f]=this.state[f]||{};const y={};for(const b in this.stateChanges[f])this.state[f][b]||(this.state[f][b]={}),c.e(this.state[f][b],this.stateChanges[f][b]),y[b]=this.state[f][b];d[f]=y}for(const f in this.deletedStates){this.state[f]=this.state[f]||{};const y={};if(this.deletedStates[f]===null)for(const b in this.state[f])y[b]={},this.state[f][b]={};else for(const b in this.deletedStates[f]){if(this.deletedStates[f][b]===null)this.state[f][b]={};else for(const T of Object.keys(this.deletedStates[f][b]))delete this.state[f][b][T];y[b]=this.state[f][b]}d[f]=d[f]||{},c.e(d[f],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const f in n)n[f].setFeatureState(d,s)}}class Be extends c.E{constructor(n,s,d){super(),this.id=n,this.dispatcher=d,this.on("data",f=>this._dataHandler(f)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((f,y,b,T)=>{const k=new(zn(y.type))(f,y,b,T);if(k.id!==f)throw new Error(`Expected Source id to be ${f} instead of ${k.id}`);return k})(n,s,d,this),this._tiles={},this._cache=new Eo(0,f=>this._unloadTile(f)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new so,this._didEmitContent=!1,this._updated=!1}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._maxTileCacheZoomLevels=n?n._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const n in this._tiles){const s=this._tiles[n];if(s.state!=="loaded"&&s.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,s,d){return c._(this,void 0,void 0,function*(){try{yield this._source.loadTile(n),this._tileLoaded(n,s,d)}catch(f){n.state="errored",f.status!==404?this._source.fire(new c.j(f,{tile:n})):this.update(this.transform,this.terrain)}})}_unloadTile(n){this._source.unloadTile&&this._source.unloadTile(n)}_abortTile(n){this._source.abortTile&&this._source.abortTile(n),this._source.fire(new c.k("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const s in this._tiles){const d=this._tiles[s];d.upload(n),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(n=>n.tileID).sort(Et).map(n=>n.key)}getRenderableIds(n){const s=[];for(const d in this._tiles)this._isIdRenderable(d,n)&&s.push(this._tiles[d]);return n?s.sort((d,f)=>{const y=d.tileID,b=f.tileID,T=new c.P(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),k=new c.P(b.canonical.x,b.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-b.overscaledZ||k.y-T.y||k.x-T.x}).map(d=>d.tileID.key):s.map(d=>d.tileID).sort(Et).map(d=>d.key)}hasRenderableParent(n){const s=this.findLoadedParent(n,0);return!!s&&this._isIdRenderable(s.tileID.key)}_isIdRenderable(n,s){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(s||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(n,"reloading")}}_reloadTile(n,s){return c._(this,void 0,void 0,function*(){const d=this._tiles[n];d&&(d.state!=="loading"&&(d.state=s),yield this._loadTile(d,n,s))})}_tileLoaded(n,s,d){n.timeAdded=D.now(),d==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(s,n),this.getSource().type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new c.k("data",{dataType:"source",tile:n,coord:n.tileID}))}_backfillDEM(n){const s=this.getRenderableIds();for(let f=0;f<s.length;f++){const y=s[f];if(n.neighboringTiles&&n.neighboringTiles[y]){const b=this.getTileByID(y);d(n,b),d(b,n)}}function d(f,y){f.needsHillshadePrepare=!0,f.needsTerrainPrepare=!0;let b=y.tileID.canonical.x-f.tileID.canonical.x;const T=y.tileID.canonical.y-f.tileID.canonical.y,k=Math.pow(2,f.tileID.canonical.z),P=y.tileID.key;b===0&&T===0||Math.abs(T)>1||(Math.abs(b)>1&&(Math.abs(b+k)===1?b+=k:Math.abs(b-k)===1&&(b-=k)),y.dem&&f.dem&&(f.dem.backfillBorder(y.dem,b,T),f.neighboringTiles&&f.neighboringTiles[P]&&(f.neighboringTiles[P].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,s,d,f){for(const y in this._tiles){let b=this._tiles[y];if(f[y]||!b.hasData()||b.tileID.overscaledZ<=s||b.tileID.overscaledZ>d)continue;let T=b.tileID;for(;b&&b.tileID.overscaledZ>s+1;){const P=b.tileID.scaledTo(b.tileID.overscaledZ-1);b=this._tiles[P.key],b&&b.hasData()&&(T=P)}let k=T;for(;k.overscaledZ>s;)if(k=k.scaledTo(k.overscaledZ-1),n[k.key]){f[T.key]=T;break}}}findLoadedParent(n,s){if(n.key in this._loadedParentTiles){const d=this._loadedParentTiles[n.key];return d&&d.tileID.overscaledZ>=s?d:null}for(let d=n.overscaledZ-1;d>=s;d--){const f=n.scaledTo(d),y=this._getLoadedTile(f);if(y)return y}}findLoadedSibling(n){return this._getLoadedTile(n)}_getLoadedTile(n){const s=this._tiles[n.key];return s&&s.hasData()?s:this._cache.getByKey(n.wrapped().key)}updateCacheSize(n){const s=Math.ceil(n.width/this._source.tileSize)+1,d=Math.ceil(n.height/this._source.tileSize)+1,f=Math.floor(s*d*(this._maxTileCacheZoomLevels===null?c.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,f):f;this._cache.setMaxSize(y)}handleWrapJump(n){const s=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,s){const d={};for(const f in this._tiles){const y=this._tiles[f];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+s),d[y.tileID.key]=y}this._tiles=d;for(const f in this._timers)clearTimeout(this._timers[f]),delete this._timers[f];for(const f in this._tiles)this._setTileReloadTimer(f,this._tiles[f])}}_updateCoveredAndRetainedTiles(n,s,d,f,y,b){const T={},k={},P=Object.keys(n),z=D.now();for(const M of P){const U=n[M],$=this._tiles[M];if(!$||$.fadeEndTime!==0&&$.fadeEndTime<=z)continue;const G=this.findLoadedParent(U,s),Q=this.findLoadedSibling(U),K=G||Q||null;K&&(this._addTile(K.tileID),T[K.tileID.key]=K.tileID),k[M]=U}this._retainLoadedChildren(k,f,d,n);for(const M in T)n[M]||(this._coveredTiles[M]=!0,n[M]=T[M]);if(b){const M={},U={};for(const $ of y)this._tiles[$.key].hasData()?M[$.key]=$:U[$.key]=$;for(const $ in U){const G=U[$].children(this._source.maxzoom);this._tiles[G[0].key]&&this._tiles[G[1].key]&&this._tiles[G[2].key]&&this._tiles[G[3].key]&&(M[G[0].key]=n[G[0].key]=G[0],M[G[1].key]=n[G[1].key]=G[1],M[G[2].key]=n[G[2].key]=G[2],M[G[3].key]=n[G[3].key]=G[3],delete U[$])}for(const $ in U){const G=U[$],Q=this.findLoadedParent(G,this._source.minzoom),K=this.findLoadedSibling(G),ne=Q||K||null;if(ne){M[ne.tileID.key]=n[ne.tileID.key]=ne.tileID;for(const se in M)M[se].isChildOf(ne.tileID)&&delete M[se]}}for(const $ in this._tiles)M[$]||(this._coveredTiles[$]=!0)}}update(n,s){if(!this._sourceLoaded||this._paused)return;let d;this.transform=n,this.terrain=s,this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(z=>new c.Q(z.canonical.z,z.wrap,z.canonical.z,z.canonical.x,z.canonical.y)):(d=n.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:s}),this._source.hasTile&&(d=d.filter(z=>this._source.hasTile(z)))):d=[];const f=n.coveringZoomLevel(this._source),y=Math.max(f-Be.maxOverzooming,this._source.minzoom),b=Math.max(f+Be.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const z={};for(const M of d)if(M.canonical.z>this._source.minzoom){const U=M.scaledTo(M.canonical.z-1);z[U.key]=U;const $=M.scaledTo(Math.max(this._source.minzoom,Math.min(M.canonical.z,5)));z[$.key]=$}d=d.concat(Object.values(z))}const T=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,T&&this.fire(new c.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const k=this._updateRetainedTiles(d,f);St(this._source.type)&&this._updateCoveredAndRetainedTiles(k,y,b,f,d,s);for(const z in k)this._tiles[z].clearFadeHold();const P=c.ab(this._tiles,k);for(const z of P){const M=this._tiles[z];M.hasSymbolBuckets&&!M.holdingForFade()?M.setHoldDuration(this.map._fadeDuration):M.hasSymbolBuckets&&!M.symbolFadeFinished()||this._removeTile(z)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(n)}_updateRetainedTiles(n,s){var d;const f={},y={},b=Math.max(s-Be.maxOverzooming,this._source.minzoom),T=Math.max(s+Be.maxUnderzooming,this._source.minzoom),k={};for(const P of n){const z=this._addTile(P);f[P.key]=P,z.hasData()||s<this._source.maxzoom&&(k[P.key]=P)}this._retainLoadedChildren(k,s,T,f);for(const P of n){let z=this._tiles[P.key];if(z.hasData())continue;if(s+1>this._source.maxzoom){const U=P.children(this._source.maxzoom)[0],$=this.getTile(U);if($&&$.hasData()){f[U.key]=U;continue}}else{const U=P.children(this._source.maxzoom);if(f[U[0].key]&&f[U[1].key]&&f[U[2].key]&&f[U[3].key])continue}let M=z.wasRequested();for(let U=P.overscaledZ-1;U>=b;--U){const $=P.scaledTo(U);if(y[$.key])break;if(y[$.key]=!0,z=this.getTile($),!z&&M&&(z=this._addTile($)),z){const G=z.hasData();if((G||!(!((d=this.map)===null||d===void 0)&&d.cancelPendingTileRequestsWhileZooming)||M)&&(f[$.key]=$),M=z.wasRequested(),G)break}}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const s=[];let d,f=this._tiles[n].tileID;for(;f.overscaledZ>0;){if(f.key in this._loadedParentTiles){d=this._loadedParentTiles[f.key];break}s.push(f.key);const y=f.scaledTo(f.overscaledZ-1);if(d=this._getLoadedTile(y),d)break;f=y}for(const y of s)this._loadedParentTiles[y]=d}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const n in this._tiles){const s=this._tiles[n].tileID,d=this._getLoadedTile(s);this._loadedSiblingTiles[s.key]=d}}_addTile(n){let s=this._tiles[n.key];if(s)return s;s=this._cache.getAndRemove(n),s&&(this._setTileReloadTimer(n.key,s),s.tileID=n,this._state.initializeTileState(s,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,s)));const d=s;return s||(s=new Kr(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(s,n.key,s.state)),s.uses++,this._tiles[n.key]=s,d||this._source.fire(new c.k("dataloading",{tile:s,coord:s.tileID,dataType:"source"})),s}_setTileReloadTimer(n,s){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const d=s.getExpiryTimeout();d&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},d))}_removeTile(n){const s=this._tiles[n];s&&(s.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),s.uses>0||(s.hasData()&&s.state!=="reloading"?this._cache.add(s.tileID,s,s.getExpiryTimeout()):(s.aborted=!0,this._abortTile(s),this._unloadTile(s))))}_dataHandler(n){const s=n.sourceDataType;n.dataType==="source"&&s==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&n.dataType==="source"&&s==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(n);this._cache.reset()}tilesIn(n,s,d){const f=[],y=this.transform;if(!y)return f;const b=d?y.getCameraQueryGeometry(n):n,T=n.map(G=>y.pointCoordinate(G,this.terrain)),k=b.map(G=>y.pointCoordinate(G,this.terrain)),P=this.getIds();let z=1/0,M=1/0,U=-1/0,$=-1/0;for(const G of k)z=Math.min(z,G.x),M=Math.min(M,G.y),U=Math.max(U,G.x),$=Math.max($,G.y);for(let G=0;G<P.length;G++){const Q=this._tiles[P[G]];if(Q.holdingForFade())continue;const K=Q.tileID,ne=Math.pow(2,y.zoom-Q.tileID.overscaledZ),se=s*Q.queryPadding*c.W/Q.tileSize/ne,J=[K.getTilePoint(new c.Y(z,M)),K.getTilePoint(new c.Y(U,$))];if(J[0].x-se<c.W&&J[0].y-se<c.W&&J[1].x+se>=0&&J[1].y+se>=0){const ce=T.map(ve=>K.getTilePoint(ve)),me=k.map(ve=>K.getTilePoint(ve));f.push({tile:Q,tileID:K,queryGeometry:ce,cameraQueryGeometry:me,scale:ne})}}return f}getVisibleCoordinates(n){const s=this.getRenderableIds(n).map(d=>this._tiles[d].tileID);for(const d of s)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return s}hasTransition(){if(this._source.hasTransition())return!0;if(St(this._source.type)){const n=D.now();for(const s in this._tiles)if(this._tiles[s].fadeEndTime>=n)return!0}return!1}setFeatureState(n,s,d){this._state.updateState(n=n||"_geojsonTileLayer",s,d)}removeFeatureState(n,s,d){this._state.removeFeatureState(n=n||"_geojsonTileLayer",s,d)}getFeatureState(n,s){return this._state.getState(n=n||"_geojsonTileLayer",s)}setDependencies(n,s,d){const f=this._tiles[n];f&&f.setDependencies(s,d)}reloadTilesForDependencies(n,s){for(const d in this._tiles)this._tiles[d].hasDependency(n,s)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(n,s))}}function Et(g,n){const s=Math.abs(2*g.wrap)-+(g.wrap<0),d=Math.abs(2*n.wrap)-+(n.wrap<0);return g.overscaledZ-n.overscaledZ||d-s||n.canonical.y-g.canonical.y||n.canonical.x-g.canonical.x}function St(g){return g==="raster"||g==="image"||g==="video"}Be.maxOverzooming=10,Be.maxUnderzooming=3;class tn{constructor(n,s){this.reset(n,s)}reset(n,s){this.points=n||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=c.ac(n,0,1);let s=1,d=this._distances[s];const f=n*this.paddedLength+this.padding;for(;d<f&&s<this._distances.length;)d=this._distances[++s];const y=s-1,b=this._distances[y],T=d-b,k=T>0?(f-b)/T:0;return this.points[y].mult(1-k).add(this.points[s].mult(k))}}function Xr(g,n){let s=!0;return g==="always"||g!=="never"&&n!=="never"||(s=!1),s}class Tt{constructor(n,s,d){const f=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(n/d),this.yCellCount=Math.ceil(s/d);for(let b=0;b<this.xCellCount*this.yCellCount;b++)f.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=s,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,s,d,f,y){this._forEachCell(s,d,f,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(s),this.bboxes.push(d),this.bboxes.push(f),this.bboxes.push(y)}insertCircle(n,s,d,f){this._forEachCell(s-f,d-f,s+f,d+f,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(s),this.circles.push(d),this.circles.push(f)}_insertBoxCell(n,s,d,f,y,b){this.boxCells[y].push(b)}_insertCircleCell(n,s,d,f,y,b){this.circleCells[y].push(b)}_query(n,s,d,f,y,b,T){if(d<0||n>this.width||f<0||s>this.height)return[];const k=[];if(n<=0&&s<=0&&this.width<=d&&this.height<=f){if(y)return[{key:null,x1:n,y1:s,x2:d,y2:f}];for(let P=0;P<this.boxKeys.length;P++)k.push({key:this.boxKeys[P],x1:this.bboxes[4*P],y1:this.bboxes[4*P+1],x2:this.bboxes[4*P+2],y2:this.bboxes[4*P+3]});for(let P=0;P<this.circleKeys.length;P++){const z=this.circles[3*P],M=this.circles[3*P+1],U=this.circles[3*P+2];k.push({key:this.circleKeys[P],x1:z-U,y1:M-U,x2:z+U,y2:M+U})}}else this._forEachCell(n,s,d,f,this._queryCell,k,{hitTest:y,overlapMode:b,seenUids:{box:{},circle:{}}},T);return k}query(n,s,d,f){return this._query(n,s,d,f,!1,null)}hitTest(n,s,d,f,y,b){return this._query(n,s,d,f,!0,y,b).length>0}hitTestCircle(n,s,d,f,y){const b=n-d,T=n+d,k=s-d,P=s+d;if(T<0||b>this.width||P<0||k>this.height)return!1;const z=[];return this._forEachCell(b,k,T,P,this._queryCellCircle,z,{hitTest:!0,overlapMode:f,circle:{x:n,y:s,radius:d},seenUids:{box:{},circle:{}}},y),z.length>0}_queryCell(n,s,d,f,y,b,T,k){const{seenUids:P,hitTest:z,overlapMode:M}=T,U=this.boxCells[y];if(U!==null){const G=this.bboxes;for(const Q of U)if(!P.box[Q]){P.box[Q]=!0;const K=4*Q,ne=this.boxKeys[Q];if(n<=G[K+2]&&s<=G[K+3]&&d>=G[K+0]&&f>=G[K+1]&&(!k||k(ne))&&(!z||!Xr(M,ne.overlapMode))&&(b.push({key:ne,x1:G[K],y1:G[K+1],x2:G[K+2],y2:G[K+3]}),z))return!0}}const $=this.circleCells[y];if($!==null){const G=this.circles;for(const Q of $)if(!P.circle[Q]){P.circle[Q]=!0;const K=3*Q,ne=this.circleKeys[Q];if(this._circleAndRectCollide(G[K],G[K+1],G[K+2],n,s,d,f)&&(!k||k(ne))&&(!z||!Xr(M,ne.overlapMode))){const se=G[K],J=G[K+1],ce=G[K+2];if(b.push({key:ne,x1:se-ce,y1:J-ce,x2:se+ce,y2:J+ce}),z)return!0}}}return!1}_queryCellCircle(n,s,d,f,y,b,T,k){const{circle:P,seenUids:z,overlapMode:M}=T,U=this.boxCells[y];if(U!==null){const G=this.bboxes;for(const Q of U)if(!z.box[Q]){z.box[Q]=!0;const K=4*Q,ne=this.boxKeys[Q];if(this._circleAndRectCollide(P.x,P.y,P.radius,G[K+0],G[K+1],G[K+2],G[K+3])&&(!k||k(ne))&&!Xr(M,ne.overlapMode))return b.push(!0),!0}}const $=this.circleCells[y];if($!==null){const G=this.circles;for(const Q of $)if(!z.circle[Q]){z.circle[Q]=!0;const K=3*Q,ne=this.circleKeys[Q];if(this._circlesCollide(G[K],G[K+1],G[K+2],P.x,P.y,P.radius)&&(!k||k(ne))&&!Xr(M,ne.overlapMode))return b.push(!0),!0}}}_forEachCell(n,s,d,f,y,b,T,k){const P=this._convertToXCellCoord(n),z=this._convertToYCellCoord(s),M=this._convertToXCellCoord(d),U=this._convertToYCellCoord(f);for(let $=P;$<=M;$++)for(let G=z;G<=U;G++)if(y.call(this,n,s,d,f,this.xCellCount*G+$,b,T,k))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,s,d,f,y,b){const T=f-n,k=y-s,P=d+b;return P*P>T*T+k*k}_circleAndRectCollide(n,s,d,f,y,b,T){const k=(b-f)/2,P=Math.abs(n-(f+k));if(P>k+d)return!1;const z=(T-y)/2,M=Math.abs(s-(y+z));if(M>z+d)return!1;if(P<=k||M<=z)return!0;const U=P-k,$=M-z;return U*U+$*$<=d*d}}function ki(g,n,s,d,f){const y=c.F();return n?(c.J(y,y,[1/f,1/f,1]),s||c.ad(y,y,d.angle)):c.K(y,d.labelPlaneMatrix,g),y}function Ei(g,n,s,d,f){if(n){const y=c.ae(g);return c.J(y,y,[f,f,1]),s||c.ad(y,y,-d.angle),y}return d.glCoordMatrix}function Ot(g,n,s){let d;s?(d=[g.x,g.y,s(g.x,g.y),1],c.af(d,d,n)):(d=[g.x,g.y,0,1],function(y,b,T){const k=b[0],P=b[1];y[0]=T[0]*k+T[4]*P+T[12],y[1]=T[1]*k+T[5]*P+T[13],y[3]=T[3]*k+T[7]*P+T[15]}(d,d,n));const f=d[3];return{point:new c.P(d[0]/f,d[1]/f),signedDistanceFromCamera:f,isOccluded:!1}}function Z(g,n){return .5+g/n*.5}function R(g,n){return g.x>=-n[0]&&g.x<=n[0]&&g.y>=-n[1]&&g.y<=n[1]}function O(g,n,s,d,f,y,b,T,k,P,z,M,U,$,G){const Q=d?g.textSizeData:g.iconSizeData,K=c.ag(Q,s.transform.zoom),ne=[256/s.width*2+1,256/s.height*2+1],se=d?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;se.clear();const J=g.lineVertexArray,ce=d?g.text.placedSymbolArray:g.icon.placedSymbolArray,me=s.transform.width/s.transform.height;let ve=!1;for(let Pe=0;Pe<ce.length;Pe++){const De=ce.get(Pe);if(De.hidden||De.writingMode===c.ah.vertical&&!ve){dt(De.numGlyphs,se);continue}ve=!1;const Xe=Ot(new c.P(De.anchorX,De.anchorY),n,G);if(!R(Xe.point,ne)){dt(De.numGlyphs,se);continue}const Je=Z(s.transform.cameraToCenterDistance,Xe.signedDistanceFromCamera),Oe=c.ai(Q,K,De),je=b?Oe/Je:Oe*Je,nt={getElevation:G,labelPlaneMatrix:f,lineVertexArray:J,pitchWithMap:b,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:P,tileAnchorPoint:new c.P(De.anchorX,De.anchorY),unwrappedTileID:z,width:M,height:U,translation:$},bt=ae(nt,De,je,!1,T,n,y,g.glyphOffsetArray,se,me,k);ve=bt.useVertical,(bt.notEnoughRoom||ve||bt.needsFlipping&&ae(nt,De,je,!0,T,n,y,g.glyphOffsetArray,se,me,k).notEnoughRoom)&&dt(De.numGlyphs,se)}d?g.text.dynamicLayoutVertexBuffer.updateData(se):g.icon.dynamicLayoutVertexBuffer.updateData(se)}function j(g,n,s,d,f,y,b,T){const k=y.glyphStartIndex+y.numGlyphs,P=y.lineStartIndex,z=y.lineStartIndex+y.lineLength,M=n.getoffsetX(y.glyphStartIndex),U=n.getoffsetX(k-1),$=Te(g*M,s,d,f,y.segment,P,z,T,b);if(!$)return null;const G=Te(g*U,s,d,f,y.segment,P,z,T,b);return G?T.projectionCache.anyProjectionOccluded?null:{first:$,last:G}:null}function Y(g,n,s,d){return g===c.ah.horizontal&&Math.abs(s.y-n.y)>Math.abs(s.x-n.x)*d?{useVertical:!0}:(g===c.ah.vertical?n.y<s.y:n.x>s.x)?{needsFlipping:!0}:null}function ae(g,n,s,d,f,y,b,T,k,P,z){const M=s/24,U=n.lineOffsetX*M,$=n.lineOffsetY*M;let G;if(n.numGlyphs>1){const Q=n.glyphStartIndex+n.numGlyphs,K=n.lineStartIndex,ne=n.lineStartIndex+n.lineLength,se=j(M,T,U,$,d,n,z,g);if(!se)return{notEnoughRoom:!0};const J=Ot(se.first.point,b,g.getElevation).point,ce=Ot(se.last.point,b,g.getElevation).point;if(f&&!d){const me=Y(n.writingMode,J,ce,P);if(me)return me}G=[se.first];for(let me=n.glyphStartIndex+1;me<Q-1;me++)G.push(Te(M*T.getoffsetX(me),U,$,d,n.segment,K,ne,g,z));G.push(se.last)}else{if(f&&!d){const K=Ot(g.tileAnchorPoint,y,g.getElevation).point,ne=n.lineStartIndex+n.segment+1,se=new c.P(g.lineVertexArray.getx(ne),g.lineVertexArray.gety(ne)),J=Ot(se,y,g.getElevation),ce=J.signedDistanceFromCamera>0?J.point:function(ve,Pe,De,Xe,Je,Oe){return ue(ve,Pe,De,1,Je,Oe)}(g.tileAnchorPoint,se,K,0,y,g),me=Y(n.writingMode,K,ce,P);if(me)return me}const Q=Te(M*T.getoffsetX(n.glyphStartIndex),U,$,d,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,g,z);if(!Q||g.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};G=[Q]}for(const Q of G)c.aj(k,Q.point,Q.angle);return{}}function ue(g,n,s,d,f,y){const b=g.add(g.sub(n)._unit()),T=f!==void 0?Ot(b,f,y.getElevation).point:ie(b.x,b.y,y).point,k=s.sub(T);return s.add(k._mult(d/k.mag()))}function pe(g,n,s){const d=n.projectionCache;if(d.projections[g])return d.projections[g];const f=new c.P(n.lineVertexArray.getx(g),n.lineVertexArray.gety(g)),y=ie(f.x,f.y,n);if(y.signedDistanceFromCamera>0)return d.projections[g]=y.point,d.anyProjectionOccluded=d.anyProjectionOccluded||y.isOccluded,y.point;const b=g-s.direction;return function(T,k,P,z,M){return ue(T,k,P,z,void 0,M)}(s.distanceFromAnchor===0?n.tileAnchorPoint:new c.P(n.lineVertexArray.getx(b),n.lineVertexArray.gety(b)),f,s.previousVertex,s.absOffsetX-s.distanceFromAnchor+1,n)}function ie(g,n,s){const d=g+s.translation[0],f=n+s.translation[1];let y;return!s.pitchWithMap&&s.projection.useSpecialProjectionForSymbols?(y=s.projection.projectTileCoordinates(d,f,s.unwrappedTileID,s.getElevation),y.point.x=(.5*y.point.x+.5)*s.width,y.point.y=(.5*-y.point.y+.5)*s.height):(y=Ot(new c.P(d,f),s.labelPlaneMatrix,s.getElevation),y.isOccluded=!1),y}function ye(g,n,s){return g._unit()._perp()._mult(n*s)}function Ie(g,n,s,d,f,y,b,T,k){if(T.projectionCache.offsets[g])return T.projectionCache.offsets[g];const P=s.add(n);if(g+k.direction<d||g+k.direction>=f)return T.projectionCache.offsets[g]=P,P;const z=pe(g+k.direction,T,k),M=ye(z.sub(s),b,k.direction),U=s.add(M),$=z.add(M);return T.projectionCache.offsets[g]=c.ak(y,P,U,$)||P,T.projectionCache.offsets[g]}function Te(g,n,s,d,f,y,b,T,k){const P=d?g-n:g+n;let z=P>0?1:-1,M=0;d&&(z*=-1,M=Math.PI),z<0&&(M+=Math.PI);let U,$=z>0?y+f:y+f+1;T.projectionCache.cachedAnchorPoint?U=T.projectionCache.cachedAnchorPoint:(U=ie(T.tileAnchorPoint.x,T.tileAnchorPoint.y,T).point,T.projectionCache.cachedAnchorPoint=U);let G,Q,K=U,ne=U,se=0,J=0;const ce=Math.abs(P),me=[];let ve;for(;se+J<=ce;){if($+=z,$<y||$>=b)return null;se+=J,ne=K,Q=G;const Xe={absOffsetX:ce,direction:z,distanceFromAnchor:se,previousVertex:ne};if(K=pe($,T,Xe),s===0)me.push(ne),ve=K.sub(ne);else{let Je;const Oe=K.sub(ne);Je=Oe.mag()===0?ye(pe($+z,T,Xe).sub(K),s,z):ye(Oe,s,z),Q||(Q=ne.add(Je)),G=Ie($,Je,K,y,b,Q,s,T,Xe),me.push(Q),ve=G.sub(Q)}J=ve.mag()}const Pe=ve._mult((ce-se)/J)._add(Q||ne),De=M+Math.atan2(K.y-ne.y,K.x-ne.x);return me.push(Pe),{point:Pe,angle:k?De:0,path:me}}const Se=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function dt(g,n){for(let s=0;s<g;s++){const d=n.length;n.resize(d+4),n.float32.set(Se,3*d)}}const ht=100;class zt{constructor(n,s,d=new Tt(n.width+200,n.height+200,25),f=new Tt(n.width+200,n.height+200,25)){this.transform=n,this.mapProjection=s,this.grid=d,this.ignoredGrid=f,this.pitchFactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+ht,this.screenBottomBoundary=n.height+ht,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,s,d,f,y,b,T,k,P,z,M){const U=n.anchorPointX+k[0],$=n.anchorPointY+k[1],G=this.projectAndGetPerspectiveRatio(f,U,$,y,z),Q=this._projectCollisionBox(n,d,f,y,b,T,k,G,z,M),[K,ne,se,J]=Q.box;return this.mapProjection.useSpecialProjectionForSymbols&&(b?Q.allPointsOccluded:this.mapProjection.isOccluded(U,$,y))||G.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(K,ne,se,J)||s!=="always"&&this.grid.hitTest(K,ne,se,J,s,P)?{box:[K,ne,se,J],placeable:!1,offscreen:!1}:{box:[K,ne,se,J],placeable:!0,offscreen:this.isOffscreen(K,ne,se,J)}}placeCollisionCircles(n,s,d,f,y,b,T,k,P,z,M,U,$,G,Q,K){const ne=[],se=new c.P(s.anchorX,s.anchorY),J=this.getPerspectiveRatio(b,se.x,se.y,T,K),ce=(M?y/J:y*J)/c.ap,me={getElevation:K,labelPlaneMatrix:k,lineVertexArray:d,pitchWithMap:M,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:se,unwrappedTileID:T,width:this.transform.width,height:this.transform.height,translation:Q},ve=j(ce,f,s.lineOffsetX*ce,s.lineOffsetY*ce,!1,s,!1,me);let Pe=!1,De=!1,Xe=!0;if(ve){const Je=.5*$*J+G,Oe=new c.P(-100,-100),je=new c.P(this.screenRightBoundary,this.screenBottomBoundary),nt=new tn,bt=ve.first,Ve=ve.last;let qe=[];for(let At=bt.path.length-1;At>=1;At--)qe.push(bt.path[At]);for(let At=1;At<Ve.path.length;At++)qe.push(Ve.path[At]);const _t=2.5*Je;if(P){const At=this.projectPathToScreenSpace(qe,me,P);qe=At.some(Lt=>Lt.signedDistanceFromCamera<=0)?[]:At.map(Lt=>Lt.point)}let lr=[];if(qe.length>0){const At=qe[0].clone(),Lt=qe[0].clone();for(let ur=1;ur<qe.length;ur++)At.x=Math.min(At.x,qe[ur].x),At.y=Math.min(At.y,qe[ur].y),Lt.x=Math.max(Lt.x,qe[ur].x),Lt.y=Math.max(Lt.y,qe[ur].y);lr=At.x>=Oe.x&&Lt.x<=je.x&&At.y>=Oe.y&&Lt.y<=je.y?[qe]:Lt.x<Oe.x||At.x>je.x||Lt.y<Oe.y||At.y>je.y?[]:c.al([qe],Oe.x,Oe.y,je.x,je.y)}for(const At of lr){nt.reset(At,.25*Je);let Lt=0;Lt=nt.length<=.5*Je?1:Math.ceil(nt.paddedLength/_t)+1;for(let ur=0;ur<Lt;ur++){const un=ur/Math.max(Lt-1,1),Pi=nt.lerp(un),cr=Pi.x+ht,Fn=Pi.y+ht;ne.push(cr,Fn,Je,0);const Tn=cr-Je,cn=Fn-Je,hn=cr+Je,Ii=Fn+Je;if(Xe=Xe&&this.isOffscreen(Tn,cn,hn,Ii),De=De||this.isInsideGrid(Tn,cn,hn,Ii),n!=="always"&&this.grid.hitTestCircle(cr,Fn,Je,n,U)&&(Pe=!0,!z))return{circles:[],offscreen:!1,collisionDetected:Pe}}}}return{circles:!z&&Pe||!De||J<this.perspectiveRatioCutoff?[]:ne,offscreen:Xe,collisionDetected:Pe}}projectPathToScreenSpace(n,s,d){return n.map(f=>Ot(f,d,s.getElevation))}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const s=[];let d=1/0,f=1/0,y=-1/0,b=-1/0;for(const z of n){const M=new c.P(z.x+ht,z.y+ht);d=Math.min(d,M.x),f=Math.min(f,M.y),y=Math.max(y,M.x),b=Math.max(b,M.y),s.push(M)}const T=this.grid.query(d,f,y,b).concat(this.ignoredGrid.query(d,f,y,b)),k={},P={};for(const z of T){const M=z.key;if(k[M.bucketInstanceId]===void 0&&(k[M.bucketInstanceId]={}),k[M.bucketInstanceId][M.featureIndex])continue;const U=[new c.P(z.x1,z.y1),new c.P(z.x2,z.y1),new c.P(z.x2,z.y2),new c.P(z.x1,z.y2)];c.am(s,U)&&(k[M.bucketInstanceId][M.featureIndex]=!0,P[M.bucketInstanceId]===void 0&&(P[M.bucketInstanceId]=[]),P[M.bucketInstanceId].push(M.featureIndex))}return P}insertCollisionBox(n,s,d,f,y,b){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:f,featureIndex:y,collisionGroupID:b,overlapMode:s},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,s,d,f,y,b){const T=d?this.ignoredGrid:this.grid,k={bucketInstanceId:f,featureIndex:y,collisionGroupID:b,overlapMode:s};for(let P=0;P<n.length;P+=4)T.insertCircle(k,n[P],n[P+1],n[P+2])}projectAndGetPerspectiveRatio(n,s,d,f,y){const b=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(s,d,f,y):Ot(new c.P(s,d),n,y);return{point:new c.P((b.point.x+1)/2*this.transform.width+ht,(1-b.point.y)/2*this.transform.height+ht),perspectiveRatio:.5+this.transform.cameraToCenterDistance/b.signedDistanceFromCamera*.5,isOccluded:b.isOccluded,signedDistanceFromCamera:b.signedDistanceFromCamera}}getPerspectiveRatio(n,s,d,f,y){const b=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(s,d,f,y):Ot(new c.P(s,d),n,y);return .5+this.transform.cameraToCenterDistance/b.signedDistanceFromCamera*.5}isOffscreen(n,s,d,f){return d<ht||n>=this.screenRightBoundary||f<ht||s>this.screenBottomBoundary}isInsideGrid(n,s,d,f){return d>=0&&n<this.gridRightBoundary&&f>=0&&s<this.gridBottomBoundary}getViewportMatrix(){const n=c.an([]);return c.H(n,n,[-100,-100,0]),n}_projectCollisionBox(n,s,d,f,y,b,T,k,P,z){const M=s*k.perspectiveRatio;let U=new c.P(1,0),$=new c.P(0,1);const G=new c.P(n.anchorPointX+T[0],n.anchorPointY+T[1]);if(b&&!y){const Je=this.projectAndGetPerspectiveRatio(d,G.x+1,G.y,f,P).point.sub(k.point).unit(),Oe=Math.atan(Je.y/Je.x)+(Je.x<0?Math.PI:0),je=Math.sin(Oe),nt=Math.cos(Oe);U=new c.P(nt,je),$=new c.P(-je,nt)}else if(!b&&y){const Je=-this.transform.angle,Oe=Math.sin(Je),je=Math.cos(Je);U=new c.P(je,Oe),$=new c.P(-Oe,je)}let Q=k.point,K=M;if(y){Q=G;const Je=this.transform.zoom-Math.floor(this.transform.zoom);K=Math.pow(2,-Je),K*=this.mapProjection.getPitchedTextCorrection(this.transform,G,f),z||(K*=c.ac(.5+k.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}z&&(Q=Q.add(U.mult(z.x*K)).add($.mult(z.y*K)));const ne=n.x1*K,se=n.x2*K,J=(ne+se)/2,ce=n.y1*K,me=n.y2*K,ve=(ce+me)/2,Pe=[{offsetX:ne,offsetY:ce},{offsetX:J,offsetY:ce},{offsetX:se,offsetY:ce},{offsetX:se,offsetY:ve},{offsetX:se,offsetY:me},{offsetX:J,offsetY:me},{offsetX:ne,offsetY:me},{offsetX:ne,offsetY:ve}];let De=[];for(const{offsetX:Je,offsetY:Oe}of Pe)De.push(new c.P(Q.x+U.x*Je+$.x*Oe,Q.y+U.y*Je+$.y*Oe));let Xe=!1;if(y){const Je=De.map(Oe=>this.projectAndGetPerspectiveRatio(d,Oe.x,Oe.y,f,P));Xe=Je.some(Oe=>!Oe.isOccluded),De=Je.map(Oe=>Oe.point)}else Xe=!0;return{box:c.ao(De),allPointsOccluded:!Xe}}}function wt(g,n,s){return n*(c.W/(g.tileSize*Math.pow(2,s-g.tileID.overscaledZ)))}class Dt{constructor(n,s,d,f){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?s:-s))):f&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class Xt{constructor(n,s,d,f,y){this.text=new Dt(n?n.text:null,s,d,y),this.icon=new Dt(n?n.icon:null,s,f,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class sr{constructor(n,s,d){this.text=n,this.icon=s,this.skipFade=d}}class Or{constructor(){this.invProjMatrix=c.F(),this.viewportMatrix=c.F(),this.circles=[]}}class It{constructor(n,s,d,f,y){this.bucketInstanceId=n,this.featureIndex=s,this.sourceLayerIndex=d,this.bucketIndex=f,this.tileID=y}}class mr{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const s=++this.maxGroupID;this.collisionGroups[n]={ID:s,predicate:d=>d.collisionGroupID===s}}return this.collisionGroups[n]}}function $r(g,n,s,d,f){const{horizontalAlign:y,verticalAlign:b}=c.au(g);return new c.P(-(y-.5)*n+d[0]*f,-(b-.5)*s+d[1]*f)}class Ln{constructor(n,s,d,f,y,b){this.transform=n.clone(),this.terrain=d,this.collisionIndex=new zt(this.transform,s),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new mr(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(n){const s=this.terrain;return s?(d,f)=>s.getElevation(n,d,f):null}getBucketParts(n,s,d,f){const y=d.getBucket(s),b=d.latestFeatureIndex;if(!y||!b||s.id!==y.layerIds[0])return;const T=d.collisionBoxArray,k=y.layers[0].layout,P=y.layers[0].paint,z=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),M=d.tileSize/c.W,U=d.tileID.toUnwrapped(),$=this.transform.calculatePosMatrix(U),G=k.get("text-pitch-alignment")==="map",Q=k.get("text-rotation-alignment")==="map",K=wt(d,1,this.transform.zoom),ne=this.collisionIndex.mapProjection.translatePosition(this.transform,d,P.get("text-translate"),P.get("text-translate-anchor")),se=this.collisionIndex.mapProjection.translatePosition(this.transform,d,P.get("icon-translate"),P.get("icon-translate-anchor")),J=ki($,G,Q,this.transform,K);let ce=null;if(G){const ve=Ei($,G,Q,this.transform,K);ce=c.K([],this.transform.labelPlaneMatrix,ve)}this.retainedQueryData[y.bucketInstanceId]=new It(y.bucketInstanceId,b,y.sourceLayerIndex,y.index,d.tileID);const me={bucket:y,layout:k,translationText:ne,translationIcon:se,posMatrix:$,unwrappedTileID:U,textLabelPlaneMatrix:J,labelToScreenMatrix:ce,scale:z,textPixelRatio:M,holdingForFade:d.holdingForFade(),collisionBoxArray:T,partiallyEvaluatedTextSize:c.ag(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(f)for(const ve of y.sortKeyRanges){const{sortKey:Pe,symbolInstanceStart:De,symbolInstanceEnd:Xe}=ve;n.push({sortKey:Pe,symbolInstanceStart:De,symbolInstanceEnd:Xe,parameters:me})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:me})}attemptAnchorPlacement(n,s,d,f,y,b,T,k,P,z,M,U,$,G,Q,K,ne,se,J){const ce=c.aq[n.textAnchor],me=[n.textOffset0,n.textOffset1],ve=$r(ce,d,f,me,y),Pe=this.collisionIndex.placeCollisionBox(s,U,k,P,z,T,b,K,M.predicate,J,ve);if((!se||this.collisionIndex.placeCollisionBox(se,U,k,P,z,T,b,ne,M.predicate,J,ve).placeable)&&Pe.placeable){let De;if(this.prevPlacement&&this.prevPlacement.variableOffsets[$.crossTileID]&&this.prevPlacement.placements[$.crossTileID]&&this.prevPlacement.placements[$.crossTileID].text&&(De=this.prevPlacement.variableOffsets[$.crossTileID].anchor),$.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[$.crossTileID]={textOffset:me,width:d,height:f,anchor:ce,textBoxScale:y,prevAnchor:De},this.markUsedJustification(G,ce,$,Q),G.allowVerticalPlacement&&(this.markUsedOrientation(G,Q,$),this.placedOrientations[$.crossTileID]=Q),{shift:ve,placedGlyphBoxes:Pe}}}placeLayerBucketPart(n,s,d){const{bucket:f,layout:y,translationText:b,translationIcon:T,posMatrix:k,unwrappedTileID:P,textLabelPlaneMatrix:z,labelToScreenMatrix:M,textPixelRatio:U,holdingForFade:$,collisionBoxArray:G,partiallyEvaluatedTextSize:Q,collisionGroup:K}=n.parameters,ne=y.get("text-optional"),se=y.get("icon-optional"),J=c.ar(y,"text-overlap","text-allow-overlap"),ce=J==="always",me=c.ar(y,"icon-overlap","icon-allow-overlap"),ve=me==="always",Pe=y.get("text-rotation-alignment")==="map",De=y.get("text-pitch-alignment")==="map",Xe=y.get("icon-text-fit")!=="none",Je=y.get("symbol-z-order")==="viewport-y",Oe=ce&&(ve||!f.hasIconData()||se),je=ve&&(ce||!f.hasTextData()||ne);!f.collisionArrays&&G&&f.deserializeCollisionBoxes(G);const nt=this._getTerrainElevationFunc(this.retainedQueryData[f.bucketInstanceId].tileID),bt=(Ve,qe,_t)=>{var lr,At;if(s[Ve.crossTileID])return;if($)return void(this.placements[Ve.crossTileID]=new sr(!1,!1,!1));let Lt=!1,ur=!1,un=!0,Pi=null,cr={box:null,placeable:!1,offscreen:null},Fn={box:null,placeable:!1,offscreen:null},Tn=null,cn=null,hn=null,Ii=0,ta=0,Fl=0;qe.textFeatureIndex?Ii=qe.textFeatureIndex:Ve.useRuntimeCollisionCircles&&(Ii=Ve.featureIndex),qe.verticalTextFeatureIndex&&(ta=qe.verticalTextFeatureIndex);const za=qe.textBox;if(za){const rn=dn=>{let pn=c.ah.horizontal;if(f.allowVerticalPlacement&&!dn&&this.prevPlacement){const Yr=this.prevPlacement.placedOrientations[Ve.crossTileID];Yr&&(this.placedOrientations[Ve.crossTileID]=Yr,pn=Yr,this.markUsedOrientation(f,pn,Ve))}return pn},Ai=(dn,pn)=>{if(f.allowVerticalPlacement&&Ve.numVerticalGlyphVertices>0&&qe.verticalTextBox){for(const Yr of f.writingModes)if(Yr===c.ah.vertical?(cr=pn(),Fn=cr):cr=dn(),cr&&cr.placeable)break}else cr=dn()},zo=Ve.textAnchorOffsetStartIndex,La=Ve.textAnchorOffsetEndIndex;if(La===zo){const dn=(pn,Yr)=>{const yr=this.collisionIndex.placeCollisionBox(pn,J,U,k,P,De,Pe,b,K.predicate,nt);return yr&&yr.placeable&&(this.markUsedOrientation(f,Yr,Ve),this.placedOrientations[Ve.crossTileID]=Yr),yr};Ai(()=>dn(za,c.ah.horizontal),()=>{const pn=qe.verticalTextBox;return f.allowVerticalPlacement&&Ve.numVerticalGlyphVertices>0&&pn?dn(pn,c.ah.vertical):{box:null,offscreen:null}}),rn(cr&&cr.placeable)}else{let dn=c.aq[(At=(lr=this.prevPlacement)===null||lr===void 0?void 0:lr.variableOffsets[Ve.crossTileID])===null||At===void 0?void 0:At.anchor];const pn=(yr,Ra,zc)=>{const Wr=yr.x2-yr.x1,Fd=yr.y2-yr.y1,Nl=Ve.textBoxScale,jl=Xe&&me==="never"?Ra:null;let Lo=null,Bd=J==="never"?1:2,Lc="never";dn&&Bd++;for(let Rc=0;Rc<Bd;Rc++){for(let Dc=zo;Dc<La;Dc++){const Ul=f.textAnchorOffsets.get(Dc);if(dn&&Ul.textAnchor!==dn)continue;const Da=this.attemptAnchorPlacement(Ul,yr,Wr,Fd,Nl,Pe,De,U,k,P,K,Lc,Ve,f,zc,b,T,jl,nt);if(Da&&(Lo=Da.placedGlyphBoxes,Lo&&Lo.placeable))return Lt=!0,Pi=Da.shift,Lo}dn?dn=null:Lc=J}return d&&!Lo&&(Lo={box:this.collisionIndex.placeCollisionBox(za,"always",U,k,P,De,Pe,b,K.predicate,nt,new c.P(0,0)).box,offscreen:!1,placeable:!1}),Lo};Ai(()=>pn(za,qe.iconBox,c.ah.horizontal),()=>{const yr=qe.verticalTextBox;return f.allowVerticalPlacement&&(!cr||!cr.placeable)&&Ve.numVerticalGlyphVertices>0&&yr?pn(yr,qe.verticalIconBox,c.ah.vertical):{box:null,occluded:!0,offscreen:null}}),cr&&(Lt=cr.placeable,un=cr.offscreen);const Yr=rn(cr&&cr.placeable);if(!Lt&&this.prevPlacement){const yr=this.prevPlacement.variableOffsets[Ve.crossTileID];yr&&(this.variableOffsets[Ve.crossTileID]=yr,this.markUsedJustification(f,yr.anchor,Ve,Yr))}}}if(Tn=cr,Lt=Tn&&Tn.placeable,un=Tn&&Tn.offscreen,Ve.useRuntimeCollisionCircles){const rn=f.text.placedSymbolArray.get(Ve.centerJustifiedTextSymbolIndex),Ai=c.ai(f.textSizeData,Q,rn),zo=y.get("text-padding");cn=this.collisionIndex.placeCollisionCircles(J,rn,f.lineVertexArray,f.glyphOffsetArray,Ai,k,P,z,M,d,De,K.predicate,Ve.collisionCircleDiameter,zo,b,nt),cn.circles.length&&cn.collisionDetected&&!d&&c.w("Collisions detected, but collision boxes are not shown"),Lt=ce||cn.circles.length>0&&!cn.collisionDetected,un=un&&cn.offscreen}if(qe.iconFeatureIndex&&(Fl=qe.iconFeatureIndex),qe.iconBox){const rn=Ai=>this.collisionIndex.placeCollisionBox(Ai,me,U,k,P,De,Pe,T,K.predicate,nt,Xe&&Pi?Pi:void 0);Fn&&Fn.placeable&&qe.verticalIconBox?(hn=rn(qe.verticalIconBox),ur=hn.placeable):(hn=rn(qe.iconBox),ur=hn.placeable),un=un&&hn.offscreen}const ra=ne||Ve.numHorizontalGlyphVertices===0&&Ve.numVerticalGlyphVertices===0,Bl=se||Ve.numIconVertices===0;ra||Bl?Bl?ra||(ur=ur&&Lt):Lt=ur&&Lt:ur=Lt=ur&&Lt;const Mc=ur&&hn.placeable;if(Lt&&Tn.placeable&&this.collisionIndex.insertCollisionBox(Tn.box,J,y.get("text-ignore-placement"),f.bucketInstanceId,Fn&&Fn.placeable&&ta?ta:Ii,K.ID),Mc&&this.collisionIndex.insertCollisionBox(hn.box,me,y.get("icon-ignore-placement"),f.bucketInstanceId,Fl,K.ID),cn&&Lt&&this.collisionIndex.insertCollisionCircles(cn.circles,J,y.get("text-ignore-placement"),f.bucketInstanceId,Ii,K.ID),d&&this.storeCollisionData(f.bucketInstanceId,_t,qe,Tn,hn,cn),Ve.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(f.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ve.crossTileID]=new sr(Lt||Oe,ur||je,un||f.justReloaded),s[Ve.crossTileID]=!0};if(Je){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Ve=f.getSortedSymbolIndexes(this.transform.angle);for(let qe=Ve.length-1;qe>=0;--qe){const _t=Ve[qe];bt(f.symbolInstances.get(_t),f.collisionArrays[_t],_t)}}else for(let Ve=n.symbolInstanceStart;Ve<n.symbolInstanceEnd;Ve++)bt(f.symbolInstances.get(Ve),f.collisionArrays[Ve],Ve);if(d&&f.bucketInstanceId in this.collisionCircleArrays){const Ve=this.collisionCircleArrays[f.bucketInstanceId];c.as(Ve.invProjMatrix,k),Ve.viewportMatrix=this.collisionIndex.getViewportMatrix()}f.justReloaded=!1}storeCollisionData(n,s,d,f,y,b){if(d.textBox||d.iconBox){let T,k;this.collisionBoxArrays.has(n)?T=this.collisionBoxArrays.get(n):(T=new Map,this.collisionBoxArrays.set(n,T)),T.has(s)?k=T.get(s):(k={text:null,icon:null},T.set(s,k)),d.textBox&&(k.text=f.box),d.iconBox&&(k.icon=y.box)}if(b){let T=this.collisionCircleArrays[n];T===void 0&&(T=this.collisionCircleArrays[n]=new Or);for(let k=0;k<b.circles.length;k+=4)T.circles.push(b.circles[k+0]),T.circles.push(b.circles[k+1]),T.circles.push(b.circles[k+2]),T.circles.push(b.collisionDetected?1:0)}}markUsedJustification(n,s,d,f){let y;y=f===c.ah.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[c.at(s)];const b=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const T of b)T>=0&&(n.text.placedSymbolArray.get(T).crossTileID=y>=0&&T!==y?0:d.crossTileID)}markUsedOrientation(n,s,d){const f=s===c.ah.horizontal||s===c.ah.horizontalOnly?s:0,y=s===c.ah.vertical?s:0,b=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const T of b)n.text.placedSymbolArray.get(T).placedOrientation=f;d.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const s=this.prevPlacement;let d=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;const f=s?s.symbolFadeChange(n):1,y=s?s.opacities:{},b=s?s.variableOffsets:{},T=s?s.placedOrientations:{};for(const k in this.placements){const P=this.placements[k],z=y[k];z?(this.opacities[k]=new Xt(z,f,P.text,P.icon),d=d||P.text!==z.text.placed||P.icon!==z.icon.placed):(this.opacities[k]=new Xt(null,f,P.text,P.icon,P.skipFade),d=d||P.text||P.icon)}for(const k in y){const P=y[k];if(!this.opacities[k]){const z=new Xt(P,f,!1,!1);z.isHidden()||(this.opacities[k]=z,d=d||P.text.placed||P.icon.placed)}}for(const k in b)this.variableOffsets[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.variableOffsets[k]=b[k]);for(const k in T)this.placedOrientations[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.placedOrientations[k]=T[k]);if(s&&s.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:n)}updateLayerOpacities(n,s){const d={};for(const f of s){const y=f.getBucket(n);y&&f.latestFeatureIndex&&n.id===y.layerIds[0]&&this.updateBucketOpacities(y,f.tileID,d,f.collisionBoxArray)}}updateBucketOpacities(n,s,d,f){n.hasTextData()&&(n.text.opacityVertexArray.clear(),n.text.hasVisibleVertices=!1),n.hasIconData()&&(n.icon.opacityVertexArray.clear(),n.icon.hasVisibleVertices=!1),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const y=n.layers[0],b=y.layout,T=new Xt(null,0,!1,!1,!0),k=b.get("text-allow-overlap"),P=b.get("icon-allow-overlap"),z=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),M=b.get("text-rotation-alignment")==="map",U=b.get("text-pitch-alignment")==="map",$=b.get("icon-text-fit")!=="none",G=new Xt(null,0,k&&(P||!n.hasIconData()||b.get("icon-optional")),P&&(k||!n.hasTextData()||b.get("text-optional")),!0);!n.collisionArrays&&f&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(f);const Q=(ne,se,J)=>{for(let ce=0;ce<se/4;ce++)ne.opacityVertexArray.emplaceBack(J);ne.hasVisibleVertices=ne.hasVisibleVertices||J!==ms},K=this.collisionBoxArrays.get(n.bucketInstanceId);for(let ne=0;ne<n.symbolInstances.length;ne++){const se=n.symbolInstances.get(ne),{numHorizontalGlyphVertices:J,numVerticalGlyphVertices:ce,crossTileID:me}=se;let ve=this.opacities[me];d[me]?ve=T:ve||(ve=G,this.opacities[me]=ve),d[me]=!0;const Pe=se.numIconVertices>0,De=this.placedOrientations[se.crossTileID],Xe=De===c.ah.vertical,Je=De===c.ah.horizontal||De===c.ah.horizontalOnly;if(J>0||ce>0){const je=Rn(ve.text);Q(n.text,J,Xe?ms:je),Q(n.text,ce,Je?ms:je);const nt=ve.text.isHidden();[se.rightJustifiedTextSymbolIndex,se.centerJustifiedTextSymbolIndex,se.leftJustifiedTextSymbolIndex].forEach(qe=>{qe>=0&&(n.text.placedSymbolArray.get(qe).hidden=nt||Xe?1:0)}),se.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(se.verticalPlacedTextSymbolIndex).hidden=nt||Je?1:0);const bt=this.variableOffsets[se.crossTileID];bt&&this.markUsedJustification(n,bt.anchor,se,De);const Ve=this.placedOrientations[se.crossTileID];Ve&&(this.markUsedJustification(n,"left",se,Ve),this.markUsedOrientation(n,Ve,se))}if(Pe){const je=Rn(ve.icon),nt=!($&&se.verticalPlacedIconSymbolIndex&&Xe);se.placedIconSymbolIndex>=0&&(Q(n.icon,se.numIconVertices,nt?je:ms),n.icon.placedSymbolArray.get(se.placedIconSymbolIndex).hidden=ve.icon.isHidden()),se.verticalPlacedIconSymbolIndex>=0&&(Q(n.icon,se.numVerticalIconVertices,nt?ms:je),n.icon.placedSymbolArray.get(se.verticalPlacedIconSymbolIndex).hidden=ve.icon.isHidden())}const Oe=K&&K.has(ne)?K.get(ne):{text:null,icon:null};if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const je=n.collisionArrays[ne];if(je){let nt=new c.P(0,0);if(je.textBox||je.verticalTextBox){let bt=!0;if(z){const Ve=this.variableOffsets[me];Ve?(nt=$r(Ve.anchor,Ve.width,Ve.height,Ve.textOffset,Ve.textBoxScale),M&&nt._rotate(U?this.transform.angle:-this.transform.angle)):bt=!1}if(je.textBox||je.verticalTextBox){let Ve;je.textBox&&(Ve=Xe),je.verticalTextBox&&(Ve=Je),Gn(n.textCollisionBox.collisionVertexArray,ve.text.placed,!bt||Ve,Oe.text,nt.x,nt.y)}}if(je.iconBox||je.verticalIconBox){const bt=!!(!Je&&je.verticalIconBox);let Ve;je.iconBox&&(Ve=bt),je.verticalIconBox&&(Ve=!bt),Gn(n.iconCollisionBox.collisionVertexArray,ve.icon.placed,Ve,Oe.icon,$?nt.x:0,$?nt.y:0)}}}}if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);if(n.bucketInstanceId in this.collisionCircleArrays){const ne=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=ne.invProjMatrix,n.placementViewportMatrix=ne.viewportMatrix,n.collisionCircleArray=ne.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,s){const d=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*d>n}setStale(){this.stale=!0}}function Gn(g,n,s,d,f,y){d&&d.length!==0||(d=[0,0,0,0]);const b=d[0]-ht,T=d[1]-ht,k=d[2]-ht,P=d[3]-ht;g.emplaceBack(n?1:0,s?1:0,f||0,y||0,b,T),g.emplaceBack(n?1:0,s?1:0,f||0,y||0,k,T),g.emplaceBack(n?1:0,s?1:0,f||0,y||0,k,P),g.emplaceBack(n?1:0,s?1:0,f||0,y||0,b,P)}const Hr=Math.pow(2,25),va=Math.pow(2,24),sm=Math.pow(2,17),Kt=Math.pow(2,16),Hu=Math.pow(2,9),Wu=Math.pow(2,8),Kn=Math.pow(2,1);function Rn(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;const n=g.placed?1:0,s=Math.floor(127*g.opacity);return s*Hr+n*va+s*sm+n*Kt+s*Hu+n*Wu+s*Kn+n}const ms=0;function Dn(){return{isOccluded:(g,n,s)=>!1,getPitchedTextCorrection:(g,n,s)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(g,n,s,d){throw new Error("Not implemented.")},translatePosition:(g,n,s,d)=>function(f,y,b,T,k=!1){if(!b[0]&&!b[1])return[0,0];const P=k?T==="map"?f.angle:0:T==="viewport"?-f.angle:0;if(P){const z=Math.sin(P),M=Math.cos(P);b=[b[0]*M-b[1]*z,b[0]*z+b[1]*M]}return[k?b[0]:wt(y,b[0],f.zoom),k?b[1]:wt(y,b[1],f.zoom)]}(g,n,s,d),getCircleRadiusCorrection:g=>1}}class hi{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,s,d,f,y){const b=this._bucketParts;for(;this._currentTileIndex<n.length;)if(s.getBucketParts(b,f,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,b.sort((T,k)=>T.sortKey-k.sortKey));this._currentPartIndex<b.length;)if(s.placeLayerBucketPart(b[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,y())return!0;return!1}}class ed{constructor(n,s,d,f,y,b,T,k){this.placement=new Ln(n,Dn(),s,b,T,k),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=f,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(n,s,d){const f=D.now(),y=()=>!this._forceFullPlacement&&D.now()-f>2;for(;this._currentPlacementIndex>=0;){const b=s[n[this._currentPlacementIndex]],T=this.placement.collisionIndex.transform.zoom;if(b.type==="symbol"&&(!b.minzoom||b.minzoom<=T)&&(!b.maxzoom||b.maxzoom>T)){if(this._inProgressLayer||(this._inProgressLayer=new hi(b)),this._inProgressLayer.continuePlacement(d[b.source],this.placement,this._showCollisionBoxes,b,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const lo=512/c.W/2;class Fr{constructor(n,s,d){this.tileID=n,this.bucketInstanceId=d,this._symbolsByKey={};const f=new Map;for(let y=0;y<s.length;y++){const b=s.get(y),T=b.key,k=f.get(T);k?k.push(b):f.set(T,[b])}for(const[y,b]of f){const T={positions:b.map(k=>({x:Math.floor(k.anchorX*lo),y:Math.floor(k.anchorY*lo)})),crossTileIDs:b.map(k=>k.crossTileID)};if(T.positions.length>128){const k=new c.av(T.positions.length,16,Uint16Array);for(const{x:P,y:z}of T.positions)k.add(P,z);k.finish(),delete T.positions,T.index=k}this._symbolsByKey[y]=T}}getScaledCoordinates(n,s){const{x:d,y:f,z:y}=this.tileID.canonical,{x:b,y:T,z:k}=s.canonical,P=lo/Math.pow(2,k-y),z=(T*c.W+n.anchorY)*P,M=f*c.W*lo;return{x:Math.floor((b*c.W+n.anchorX)*P-d*c.W*lo),y:Math.floor(z-M)}}findMatches(n,s,d){const f=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z);for(let y=0;y<n.length;y++){const b=n.get(y);if(b.crossTileID)continue;const T=this._symbolsByKey[b.key];if(!T)continue;const k=this.getScaledCoordinates(b,s);if(T.index){const P=T.index.range(k.x-f,k.y-f,k.x+f,k.y+f).sort();for(const z of P){const M=T.crossTileIDs[z];if(!d[M]){d[M]=!0,b.crossTileID=M;break}}}else if(T.positions)for(let P=0;P<T.positions.length;P++){const z=T.positions[P],M=T.crossTileIDs[P];if(Math.abs(z.x-k.x)<=f&&Math.abs(z.y-k.y)<=f&&!d[M]){d[M]=!0,b.crossTileID=M;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:n})=>n)}}class gs{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Wo{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const s=Math.round((n-this.lng)/360);if(s!==0)for(const d in this.indexes){const f=this.indexes[d],y={};for(const b in f){const T=f[b];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+s),y[T.tileID.key]=T}this.indexes[d]=y}this.lng=n}addBucket(n,s,d){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let y=0;y<s.symbolInstances.length;y++)s.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const f=this.usedCrossTileIDs[n.overscaledZ];for(const y in this.indexes){const b=this.indexes[y];if(Number(y)>n.overscaledZ)for(const T in b){const k=b[T];k.tileID.isChildOf(n)&&k.findMatches(s.symbolInstances,n,f)}else{const T=b[n.scaledTo(Number(y)).key];T&&T.findMatches(s.symbolInstances,n,f)}}for(let y=0;y<s.symbolInstances.length;y++){const b=s.symbolInstances.get(y);b.crossTileID||(b.crossTileID=d.generate(),f[b.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new Fr(n,s.symbolInstances,s.bucketInstanceId),!0}removeBucketCrossTileIDs(n,s){for(const d of s.getCrossTileIDsLists())for(const f of d)delete this.usedCrossTileIDs[n][f]}removeStaleBuckets(n){let s=!1;for(const d in this.indexes){const f=this.indexes[d];for(const y in f)n[f[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,f[y]),delete f[y],s=!0)}return s}}class Sr{constructor(){this.layerIndexes={},this.crossTileIDs=new gs,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,s,d){let f=this.layerIndexes[n.id];f===void 0&&(f=this.layerIndexes[n.id]=new Wo);let y=!1;const b={};f.handleWrapJump(d);for(const T of s){const k=T.getBucket(n);k&&n.id===k.layerIds[0]&&(k.bucketInstanceId||(k.bucketInstanceId=++this.maxBucketInstanceId),f.addBucket(T.tileID,k,this.crossTileIDs)&&(y=!0),b[k.bucketInstanceId]=!0)}return f.removeStaleBuckets(b)&&(y=!0),y}pruneUnusedLayers(n){const s={};n.forEach(d=>{s[d]=!0});for(const d in this.layerIndexes)s[d]||delete this.layerIndexes[d]}}const qo=(g,n)=>c.t(g,n&&n.filter(s=>s.identifier!=="source.canvas")),Ci=c.aw();class ol extends c.E{constructor(n,s={}){super(),this._rtlPluginLoaded=()=>{for(const d in this.sourceCaches){const f=this.sourceCaches[d].getSource().type;f!=="vector"&&f!=="geojson"||this.sourceCaches[d].reload()}},this.map=n,this.dispatcher=new li(Gr(),n._getMapId()),this.dispatcher.registerMessageHandler("GG",(d,f)=>this.getGlyphs(d,f)),this.dispatcher.registerMessageHandler("GI",(d,f)=>this.getImages(d,f)),this.imageManager=new it,this.imageManager.setEventedParent(this),this.glyphManager=new ar(n._requestManager,s.localIdeographFontFamily),this.lineAtlas=new Ct(256,512),this.crossTileSymbolIndex=new Sr,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",c.ay()),sn().on(bn,this._rtlPluginLoaded),this.on("data",d=>{if(d.dataType!=="source"||d.sourceDataType!=="metadata")return;const f=this.sourceCaches[d.sourceId];if(!f)return;const y=f.getSource();if(y&&y.vectorLayerIds)for(const b in this._layers){const T=this._layers[b];T.source===y.id&&this._validateLayer(T)}})}loadURL(n,s={},d){this.fire(new c.k("dataloading",{dataType:"style"})),s.validate=typeof s.validate!="boolean"||s.validate;const f=this.map._requestManager.transformRequest(n,"Style");this._loadStyleRequest=new AbortController,c.h(f,this._loadStyleRequest).then(y=>{this._loadStyleRequest=null,this._load(y.data,s,d)}).catch(y=>{this._loadStyleRequest=null,y&&this.fire(new c.j(y))})}loadJSON(n,s={},d){this.fire(new c.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,D.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,s.validate=s.validate!==!1,this._load(n,s,d)}).catch(()=>{})}loadEmpty(){this.fire(new c.k("dataloading",{dataType:"style"})),this._load(Ci,{validate:!1})}_load(n,s,d){var f;const y=s.transformStyle?s.transformStyle(d,n):n;if(!s.validate||!qo(this,c.x(y))){this._loaded=!0,this.stylesheet=y;for(const b in y.sources)this.addSource(b,y.sources[b],{validate:!1});y.sprite?this._loadSprite(y.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(y.glyphs),this._createLayers(),this.light=new yt(this.stylesheet.light),this.map.setTerrain((f=this.stylesheet.terrain)!==null&&f!==void 0?f:null),this.fire(new c.k("data",{dataType:"style"})),this.fire(new c.k("style.load"))}}_createLayers(){const n=c.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",n),this._order=n.map(s=>s.id),this._layers={},this._serializedLayers=null;for(const s of n){const d=c.aA(s);d.setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=d}}_loadSprite(n,s=!1,d=void 0){let f;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(y,b,T,k){return c._(this,void 0,void 0,function*(){const P=Re(y),z=T>1?"@2x":"",M={},U={};for(const{id:$,url:G}of P){const Q=b.transformRequest(Me(G,z,".json"),"SpriteJSON");M[$]=c.h(Q,k);const K=b.transformRequest(Me(G,z,".png"),"SpriteImage");U[$]=te.getImage(K,k)}return yield Promise.all([...Object.values(M),...Object.values(U)]),function($,G){return c._(this,void 0,void 0,function*(){const Q={};for(const K in $){Q[K]={};const ne=D.getImageCanvasContext((yield G[K]).data),se=(yield $[K]).data;for(const J in se){const{width:ce,height:me,x:ve,y:Pe,sdf:De,pixelRatio:Xe,stretchX:Je,stretchY:Oe,content:je,textFitWidth:nt,textFitHeight:bt}=se[J];Q[K][J]={data:null,pixelRatio:Xe,sdf:De,stretchX:Je,stretchY:Oe,content:je,textFitWidth:nt,textFitHeight:bt,spriteData:{width:ce,height:me,x:ve,y:Pe,context:ne}}}}return Q})}(M,U)})}(n,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(y=>{if(this._spriteRequest=null,y)for(const b in y){this._spritesImagesIds[b]=[];const T=this._spritesImagesIds[b]?this._spritesImagesIds[b].filter(k=>!(k in y)):[];for(const k of T)this.imageManager.removeImage(k),this._changedImages[k]=!0;for(const k in y[b]){const P=b==="default"?k:`${b}:${k}`;this._spritesImagesIds[b].push(P),P in this.imageManager.images?this.imageManager.updateImage(P,y[b][k],!1):this.imageManager.addImage(P,y[b][k]),s&&(this._changedImages[P]=!0)}}}).catch(y=>{this._spriteRequest=null,f=y,this.fire(new c.j(f))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),s&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"})),d&&d(f)})}_unloadSprite(){for(const n of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(n),this._changedImages[n]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}_validateLayer(n){const s=this.sourceCaches[n.source];if(!s)return;const d=n.sourceLayer;if(!d)return;const f=s.getSource();(f.type==="geojson"||f.vectorLayerIds&&f.vectorLayerIds.indexOf(d)===-1)&&this.fire(new c.j(new Error(`Source layer "${d}" does not exist on source "${f.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(n){const s=this._serializedAllLayers();if(!n||n.length===0)return Object.values(s);const d=[];for(const f of n)s[f]&&d.push(s[f]);return d}_serializedAllLayers(){let n=this._serializedLayers;if(n)return n;n=this._serializedLayers={};const s=Object.keys(this._layers);for(const d of s){const f=this._layers[d];f.type!=="custom"&&(n[d]=f.serialize())}return n}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const n in this.sourceCaches)if(this.sourceCaches[n].hasTransition())return!0;for(const n in this._layers)if(this._layers[n].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const s=this._changed;if(s){const f=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(f.length||y.length)&&this._updateWorkerLayers(f,y);for(const b in this._updatedSources){const T=this._updatedSources[b];if(T==="reload")this._reloadSource(b);else{if(T!=="clear")throw new Error(`Invalid action ${T}`);this._clearSource(b)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const b in this._updatedPaintProps)this._layers[b].updateTransitions(n);this.light.updateTransitions(n),this._resetUpdates()}const d={};for(const f in this.sourceCaches){const y=this.sourceCaches[f];d[f]=y.used,y.used=!1}for(const f of this._order){const y=this._layers[f];y.recalculate(n,this._availableImages),!y.isHidden(n.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(const f in d){const y=this.sourceCaches[f];!!d[f]!=!!y.used&&y.fire(new c.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:f}))}this.light.recalculate(n),this.z=n.zoom,s&&this.fire(new c.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const n in this.sourceCaches)this.sourceCaches[n].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(n,s){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(n),removedIds:s})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(n,s={}){var d;this._checkLoaded();const f=this.serialize();if(n=s.transformStyle?s.transformStyle(f,n):n,((d=s.validate)===null||d===void 0||d)&&qo(this,c.x(n)))return!1;(n=c.aB(n)).layers=c.az(n.layers);const y=c.aC(f,n),b=this._getOperationsToPerform(y);if(b.unimplemented.length>0)throw new Error(`Unimplemented: ${b.unimplemented.join(", ")}.`);if(b.operations.length===0)return!1;for(const T of b.operations)T();return this.stylesheet=n,this._serializedLayers=null,!0}_getOperationsToPerform(n){const s=[],d=[];for(const f of n)switch(f.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":s.push(()=>this.addLayer.apply(this,f.args));break;case"removeLayer":s.push(()=>this.removeLayer.apply(this,f.args));break;case"setPaintProperty":s.push(()=>this.setPaintProperty.apply(this,f.args));break;case"setLayoutProperty":s.push(()=>this.setLayoutProperty.apply(this,f.args));break;case"setFilter":s.push(()=>this.setFilter.apply(this,f.args));break;case"addSource":s.push(()=>this.addSource.apply(this,f.args));break;case"removeSource":s.push(()=>this.removeSource.apply(this,f.args));break;case"setLayerZoomRange":s.push(()=>this.setLayerZoomRange.apply(this,f.args));break;case"setLight":s.push(()=>this.setLight.apply(this,f.args));break;case"setGeoJSONSourceData":s.push(()=>this.setGeoJSONSourceData.apply(this,f.args));break;case"setGlyphs":s.push(()=>this.setGlyphs.apply(this,f.args));break;case"setSprite":s.push(()=>this.setSprite.apply(this,f.args));break;case"setTerrain":s.push(()=>this.map.setTerrain.apply(this,f.args));break;case"setTransition":s.push(()=>{});break;default:d.push(f.command)}return{operations:s,unimplemented:d}}addImage(n,s){if(this.getImage(n))return this.fire(new c.j(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,s),this._afterImageUpdated(n)}updateImage(n,s){this.imageManager.updateImage(n,s)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new c.j(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,s,d={}){if(this._checkLoaded(),this.sourceCaches[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!s.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(s).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(s.type)>=0&&this._validate(c.x.source,`sources.${n}`,s,null,d))return;this.map&&this.map._collectResourceTiming&&(s.collectResourceTiming=!0);const f=this.sourceCaches[n]=new Be(n,s,this.dispatcher);f.style=this,f.setEventedParent(this,()=>({isSourceLoaded:f.loaded(),source:f.serialize(),sourceId:n})),f.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===n)return this.fire(new c.j(new Error(`Source "${n}" cannot be removed while layer "${d}" is using it.`)));const s=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],s.fire(new c.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),s.setEventedParent(null),s.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,s){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const d=this.sourceCaches[n].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(s),this._changed=!0}getSource(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()}addLayer(n,s,d={}){this._checkLoaded();const f=n.id;if(this.getLayer(f))return void this.fire(new c.j(new Error(`Layer "${f}" already exists on this map.`)));let y;if(n.type==="custom"){if(qo(this,c.aD(n)))return;y=c.aA(n)}else{if("source"in n&&typeof n.source=="object"&&(this.addSource(f,n.source),n=c.aB(n),n=c.e(n,{source:f})),this._validate(c.x.layer,`layers.${f}`,n,{arrayIndex:-1},d))return;y=c.aA(n),this._validateLayer(y),y.setEventedParent(this,{layer:{id:f}})}const b=s?this._order.indexOf(s):this._order.length;if(s&&b===-1)this.fire(new c.j(new Error(`Cannot add layer "${f}" before non-existing layer "${s}".`)));else{if(this._order.splice(b,0,f),this._layerOrderChanged=!0,this._layers[f]=y,this._removedLayers[f]&&y.source&&y.type!=="custom"){const T=this._removedLayers[f];delete this._removedLayers[f],T.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(n,s){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new c.j(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===s)return;const d=this._order.indexOf(n);this._order.splice(d,1);const f=s?this._order.indexOf(s):this._order.length;s&&f===-1?this.fire(new c.j(new Error(`Cannot move layer "${n}" before non-existing layer "${s}".`))):(this._order.splice(f,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const s=this._layers[n];if(!s)return void this.fire(new c.j(new Error(`Cannot remove non-existing layer "${n}".`)));s.setEventedParent(null);const d=this._order.indexOf(n);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=s,delete this._layers[n],this._serializedLayers&&delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],s.onRemove&&s.onRemove(this.map)}getLayer(n){return this._layers[n]}getLayersOrder(){return[...this._order]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,s,d){this._checkLoaded();const f=this.getLayer(n);f?f.minzoom===s&&f.maxzoom===d||(s!=null&&(f.minzoom=s),d!=null&&(f.maxzoom=d),this._updateLayer(f)):this.fire(new c.j(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,s,d={}){this._checkLoaded();const f=this.getLayer(n);if(f){if(!c.aE(f.filter,s))return s==null?(f.filter=void 0,void this._updateLayer(f)):void(this._validate(c.x.filter,`layers.${f.id}.filter`,s,null,d)||(f.filter=c.aB(s),this._updateLayer(f)))}else this.fire(new c.j(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return c.aB(this.getLayer(n).filter)}setLayoutProperty(n,s,d,f={}){this._checkLoaded();const y=this.getLayer(n);y?c.aE(y.getLayoutProperty(s),d)||(y.setLayoutProperty(s,d,f),this._updateLayer(y)):this.fire(new c.j(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,s){const d=this.getLayer(n);if(d)return d.getLayoutProperty(s);this.fire(new c.j(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,s,d,f={}){this._checkLoaded();const y=this.getLayer(n);y?c.aE(y.getPaintProperty(s),d)||(y.setPaintProperty(s,d,f)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[n]=!0,this._serializedLayers=null):this.fire(new c.j(new Error(`Cannot style non-existing layer "${n}".`)))}getPaintProperty(n,s){return this.getLayer(n).getPaintProperty(s)}setFeatureState(n,s){this._checkLoaded();const d=n.source,f=n.sourceLayer,y=this.sourceCaches[d];if(y===void 0)return void this.fire(new c.j(new Error(`The source '${d}' does not exist in the map's style.`)));const b=y.getSource().type;b==="geojson"&&f?this.fire(new c.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):b!=="vector"||f?(n.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),y.setFeatureState(f,n.id,s)):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,s){this._checkLoaded();const d=n.source,f=this.sourceCaches[d];if(f===void 0)return void this.fire(new c.j(new Error(`The source '${d}' does not exist in the map's style.`)));const y=f.getSource().type,b=y==="vector"?n.sourceLayer:void 0;y!=="vector"||b?s&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new c.j(new Error("A feature id is required to remove its specific state property."))):f.removeFeatureState(b,n.id,s):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const s=n.source,d=n.sourceLayer,f=this.sourceCaches[s];if(f!==void 0)return f.getSource().type!=="vector"||d?(n.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),f.getFeatureState(d,n.id)):void this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.j(new Error(`The source '${s}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const n=c.aF(this.sourceCaches,y=>y.serialize()),s=this._serializeByIds(this._order),d=this.map.getTerrain()||void 0,f=this.stylesheet;return c.aG({version:f.version,name:f.name,metadata:f.metadata,light:f.light,center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,sprite:f.sprite,glyphs:f.glyphs,transition:f.transition,sources:n,layers:s,terrain:d},y=>y!==void 0)}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.sourceCaches[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(n){const s=b=>this._layers[b].type==="fill-extrusion",d={},f=[];for(let b=this._order.length-1;b>=0;b--){const T=this._order[b];if(s(T)){d[T]=b;for(const k of n){const P=k[T];if(P)for(const z of P)f.push(z)}}}f.sort((b,T)=>T.intersectionZ-b.intersectionZ);const y=[];for(let b=this._order.length-1;b>=0;b--){const T=this._order[b];if(s(T))for(let k=f.length-1;k>=0;k--){const P=f[k].feature;if(d[P.layer.id]<b)break;y.push(P),f.pop()}else for(const k of n){const P=k[T];if(P)for(const z of P)y.push(z.feature)}}return y}queryRenderedFeatures(n,s,d){s&&s.filter&&this._validate(c.x.filter,"queryRenderedFeatures.filter",s.filter,null,s);const f={};if(s&&s.layers){if(!Array.isArray(s.layers))return this.fire(new c.j(new Error("parameters.layers must be an Array."))),[];for(const T of s.layers){const k=this._layers[T];if(!k)return this.fire(new c.j(new Error(`The layer '${T}' does not exist in the map's style and cannot be queried for features.`))),[];f[k.source]=!0}}const y=[];s.availableImages=this._availableImages;const b=this._serializedAllLayers();for(const T in this.sourceCaches)s.layers&&!f[T]||y.push(_a(this.sourceCaches[T],this._layers,b,n,s,d));return this.placement&&y.push(function(T,k,P,z,M,U,$){const G={},Q=U.queryRenderedSymbols(z),K=[];for(const ne of Object.keys(Q).map(Number))K.push($[ne]);K.sort(Zn);for(const ne of K){const se=ne.featureIndex.lookupSymbolFeatures(Q[ne.bucketInstanceId],k,ne.bucketIndex,ne.sourceLayerIndex,M.filter,M.layers,M.availableImages,T);for(const J in se){const ce=G[J]=G[J]||[],me=se[J];me.sort((ve,Pe)=>{const De=ne.featureSortOrder;if(De){const Xe=De.indexOf(ve.featureIndex);return De.indexOf(Pe.featureIndex)-Xe}return Pe.featureIndex-ve.featureIndex});for(const ve of me)ce.push(ve)}}for(const ne in G)G[ne].forEach(se=>{const J=se.feature,ce=P[T[ne].source].getFeatureState(J.layer["source-layer"],J.id);J.source=J.layer.source,J.layer["source-layer"]&&(J.sourceLayer=J.layer["source-layer"]),J.state=ce});return G}(this._layers,b,this.sourceCaches,n,s,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(n,s){s&&s.filter&&this._validate(c.x.filter,"querySourceFeatures.filter",s.filter,null,s);const d=this.sourceCaches[n];return d?function(f,y){const b=f.getRenderableIds().map(P=>f.getTileByID(P)),T=[],k={};for(let P=0;P<b.length;P++){const z=b[P],M=z.tileID.canonical.key;k[M]||(k[M]=!0,z.querySourceFeatures(T,y))}return T}(d,s):[]}getLight(){return this.light.getLight()}setLight(n,s={}){this._checkLoaded();const d=this.light.getLight();let f=!1;for(const b in n)if(!c.aE(n[b],d[b])){f=!0;break}if(!f)return;const y={now:D.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,s),this.light.updateTransitions(y)}_validate(n,s,d,f,y={}){return(!y||y.validate!==!1)&&qo(this,n.call(c.x,c.e({key:s,style:this.serialize(),value:d,styleSpec:c.v},f)))}_remove(n=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),sn().off(bn,this._rtlPluginLoaded);for(const s in this._layers)this._layers[s].setEventedParent(null);for(const s in this.sourceCaches){const d=this.sourceCaches[s];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),n&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(n)}_clearSource(n){this.sourceCaches[n].clearTiles()}_reloadSource(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload()}_updateSources(n){for(const s in this.sourceCaches)this.sourceCaches[s].update(n,this.map.terrain)}_generateCollisionBoxes(){for(const n in this.sourceCaches)this._reloadSource(n)}_updatePlacement(n,s,d,f,y=!1){let b=!1,T=!1;const k={};for(const P of this._order){const z=this._layers[P];if(z.type!=="symbol")continue;if(!k[z.source]){const U=this.sourceCaches[z.source];k[z.source]=U.getRenderableIds(!0).map($=>U.getTileByID($)).sort(($,G)=>G.tileID.overscaledZ-$.tileID.overscaledZ||($.tileID.isLessThan(G.tileID)?-1:1))}const M=this.crossTileSymbolIndex.addLayer(z,k[z.source],n.center.lng);b=b||M}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(D.now(),n.zoom))&&(this.pauseablePlacement=new ed(n,this.map.terrain,this._order,y,s,d,f,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,k),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(D.now()),T=!0),b&&this.pauseablePlacement.placement.setStale()),T||b)for(const P of this._order){const z=this._layers[P];z.type==="symbol"&&this.placement.updateLayerOpacities(z,k[z.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(D.now())}_releaseSymbolFadeTiles(){for(const n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles()}getImages(n,s){return c._(this,void 0,void 0,function*(){const d=yield this.imageManager.getImages(s.icons);this._updateTilesForChangedImages();const f=this.sourceCaches[s.source];return f&&f.setDependencies(s.tileID.key,s.type,s.icons),d})}getGlyphs(n,s){return c._(this,void 0,void 0,function*(){const d=yield this.glyphManager.getGlyphs(s.stacks),f=this.sourceCaches[s.source];return f&&f.setDependencies(s.tileID.key,s.type,[""]),d})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(n,s={}){this._checkLoaded(),n&&this._validate(c.x.glyphs,"glyphs",n,null,s)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=n,this.glyphManager.entries={},this.glyphManager.setURL(n))}addSprite(n,s,d={},f){this._checkLoaded();const y=[{id:n,url:s}],b=[...Re(this.stylesheet.sprite),...y];this._validate(c.x.sprite,"sprite",b,null,d)||(this.stylesheet.sprite=b,this._loadSprite(y,!0,f))}removeSprite(n){this._checkLoaded();const s=Re(this.stylesheet.sprite);if(s.find(d=>d.id===n)){if(this._spritesImagesIds[n])for(const d of this._spritesImagesIds[n])this.imageManager.removeImage(d),this._changedImages[d]=!0;s.splice(s.findIndex(d=>d.id===n),1),this.stylesheet.sprite=s.length>0?s:void 0,delete this._spritesImagesIds[n],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}else this.fire(new c.j(new Error(`Sprite "${n}" doesn't exists on this map.`)))}getSprite(){return Re(this.stylesheet.sprite)}setSprite(n,s={},d){this._checkLoaded(),n&&this._validate(c.x.sprite,"sprite",n,null,s)||(this.stylesheet.sprite=n,n?this._loadSprite(n,!0,d):(this._unloadSprite(),d&&d(null)))}}var Wi=c.X([{name:"a_pos",type:"Int16",components:2}]),qu="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const xa={prelude:Ht(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Ht(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Ht(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Ht(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Ht("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ht(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Ht(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ht("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ht("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Ht("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Ht(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Ht(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Ht(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Ht(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Ht(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Ht(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Ht(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ht(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Ht(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Ht(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Ht(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Ht(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Ht(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Ht(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Ht(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Ht(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Ht("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",qu),terrainDepth:Ht("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",qu),terrainCoords:Ht("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",qu)};function Ht(g,n){const s=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=n.match(/attribute ([\w]+) ([\w]+)/g),f=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=y?y.concat(f):f,T={};return{fragmentSource:g=g.replace(s,(k,P,z,M,U)=>(T[U]=!0,P==="define"?`
#ifndef HAS_UNIFORM_u_${U}
varying ${z} ${M} ${U};
#else
uniform ${z} ${M} u_${U};
#endif
`:`
#ifdef HAS_UNIFORM_u_${U}
    ${z} ${M} ${U} = u_${U};
#endif
`)),vertexSource:n=n.replace(s,(k,P,z,M,U)=>{const $=M==="float"?"vec2":"vec4",G=U.match(/color/)?"color":$;return T[U]?P==="define"?`
#ifndef HAS_UNIFORM_u_${U}
uniform lowp float u_${U}_t;
attribute ${z} ${$} a_${U};
varying ${z} ${M} ${U};
#else
uniform ${z} ${M} u_${U};
#endif
`:G==="vec4"?`
#ifndef HAS_UNIFORM_u_${U}
    ${U} = a_${U};
#else
    ${z} ${M} ${U} = u_${U};
#endif
`:`
#ifndef HAS_UNIFORM_u_${U}
    ${U} = unpack_mix_${G}(a_${U}, u_${U}_t);
#else
    ${z} ${M} ${U} = u_${U};
#endif
`:P==="define"?`
#ifndef HAS_UNIFORM_u_${U}
uniform lowp float u_${U}_t;
attribute ${z} ${$} a_${U};
#else
uniform ${z} ${M} u_${U};
#endif
`:G==="vec4"?`
#ifndef HAS_UNIFORM_u_${U}
    ${z} ${M} ${U} = a_${U};
#else
    ${z} ${M} ${U} = u_${U};
#endif
`:`
#ifndef HAS_UNIFORM_u_${U}
    ${z} ${M} ${U} = unpack_mix_${G}(a_${U}, u_${U}_t);
#else
    ${z} ${M} ${U} = u_${U};
#endif
`}),staticAttributes:d,staticUniforms:b}}class al{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,s,d,f,y,b,T,k,P){this.context=n;let z=this.boundPaintVertexBuffers.length!==f.length;for(let M=0;!z&&M<f.length;M++)this.boundPaintVertexBuffers[M]!==f[M]&&(z=!0);!this.vao||this.boundProgram!==s||this.boundLayoutVertexBuffer!==d||z||this.boundIndexBuffer!==y||this.boundVertexOffset!==b||this.boundDynamicVertexBuffer!==T||this.boundDynamicVertexBuffer2!==k||this.boundDynamicVertexBuffer3!==P?this.freshBind(s,d,f,y,b,T,k,P):(n.bindVertexArray.set(this.vao),T&&T.bind(),y&&y.dynamicDraw&&y.bind(),k&&k.bind(),P&&P.bind())}freshBind(n,s,d,f,y,b,T,k){const P=n.numAttributes,z=this.context,M=z.gl;this.vao&&this.destroy(),this.vao=z.createVertexArray(),z.bindVertexArray.set(this.vao),this.boundProgram=n,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=f,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=b,this.boundDynamicVertexBuffer2=T,this.boundDynamicVertexBuffer3=k,s.enableAttributes(M,n);for(const U of d)U.enableAttributes(M,n);b&&b.enableAttributes(M,n),T&&T.enableAttributes(M,n),k&&k.enableAttributes(M,n),s.bind(),s.setVertexAttribPointers(M,n,y);for(const U of d)U.bind(),U.setVertexAttribPointers(M,n,y);b&&(b.bind(),b.setVertexAttribPointers(M,n,y)),f&&f.bind(),T&&(T.bind(),T.setVertexAttribPointers(M,n,y)),k&&(k.bind(),k.setVertexAttribPointers(M,n,y)),z.currentNumAttributes=P}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function wa(g){const n=[];for(let s=0;s<g.length;s++){if(g[s]===null)continue;const d=g[s].split(" ");n.push(d.pop())}return n}class Zu{constructor(n,s,d,f,y,b){const T=n.gl;this.program=T.createProgram();const k=wa(s.staticAttributes),P=d?d.getBinderAttributes():[],z=k.concat(P),M=xa.prelude.staticUniforms?wa(xa.prelude.staticUniforms):[],U=s.staticUniforms?wa(s.staticUniforms):[],$=d?d.getBinderUniforms():[],G=M.concat(U).concat($),Q=[];for(const ve of G)Q.indexOf(ve)<0&&Q.push(ve);const K=d?d.defines():[];y&&K.push("#define OVERDRAW_INSPECTOR;"),b&&K.push("#define TERRAIN3D;");const ne=K.concat(xa.prelude.fragmentSource,s.fragmentSource).join(`
`),se=K.concat(xa.prelude.vertexSource,s.vertexSource).join(`
`),J=T.createShader(T.FRAGMENT_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);if(T.shaderSource(J,ne),T.compileShader(J),!T.getShaderParameter(J,T.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${T.getShaderInfoLog(J)}`);T.attachShader(this.program,J);const ce=T.createShader(T.VERTEX_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);if(T.shaderSource(ce,se),T.compileShader(ce),!T.getShaderParameter(ce,T.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${T.getShaderInfoLog(ce)}`);T.attachShader(this.program,ce),this.attributes={};const me={};this.numAttributes=z.length;for(let ve=0;ve<this.numAttributes;ve++)z[ve]&&(T.bindAttribLocation(this.program,ve,z[ve]),this.attributes[z[ve]]=ve);if(T.linkProgram(this.program),!T.getProgramParameter(this.program,T.LINK_STATUS))throw new Error(`Program failed to link: ${T.getProgramInfoLog(this.program)}`);T.deleteShader(ce),T.deleteShader(J);for(let ve=0;ve<Q.length;ve++){const Pe=Q[ve];if(Pe&&!me[Pe]){const De=T.getUniformLocation(this.program,Pe);De&&(me[Pe]=De)}}this.fixedUniforms=f(n,me),this.terrainUniforms=((ve,Pe)=>({u_depth:new c.aH(ve,Pe.u_depth),u_terrain:new c.aH(ve,Pe.u_terrain),u_terrain_dim:new c.aI(ve,Pe.u_terrain_dim),u_terrain_matrix:new c.aJ(ve,Pe.u_terrain_matrix),u_terrain_unpack:new c.aK(ve,Pe.u_terrain_unpack),u_terrain_exaggeration:new c.aI(ve,Pe.u_terrain_exaggeration)}))(n,me),this.binderUniforms=d?d.getUniforms(n,me):[]}draw(n,s,d,f,y,b,T,k,P,z,M,U,$,G,Q,K,ne,se){const J=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(d),n.setStencilMode(f),n.setColorMode(y),n.setCullFace(b),k){n.activeTexture.set(J.TEXTURE2),J.bindTexture(J.TEXTURE_2D,k.depthTexture),n.activeTexture.set(J.TEXTURE3),J.bindTexture(J.TEXTURE_2D,k.texture);for(const me in this.terrainUniforms)this.terrainUniforms[me].set(k[me])}for(const me in this.fixedUniforms)this.fixedUniforms[me].set(T[me]);Q&&Q.setUniforms(n,this.binderUniforms,$,{zoom:G});let ce=0;switch(s){case J.LINES:ce=2;break;case J.TRIANGLES:ce=3;break;case J.LINE_STRIP:ce=1}for(const me of U.get()){const ve=me.vaos||(me.vaos={});(ve[P]||(ve[P]=new al)).bind(n,this,z,Q?Q.getPaintVertexBuffers():[],M,me.vertexOffset,K,ne,se),J.drawElements(s,me.primitiveLength*ce,J.UNSIGNED_SHORT,me.primitiveOffset*ce*2)}}}function sl(g,n,s){const d=1/wt(s,1,n.transform.tileZoom),f=Math.pow(2,s.tileID.overscaledZ),y=s.tileSize*Math.pow(2,n.transform.tileZoom)/f,b=y*(s.tileID.canonical.x+s.tileID.wrap*f),T=y*s.tileID.canonical.y;return{u_image:0,u_texsize:s.imageAtlasTexture.size,u_scale:[d,g.fromScale,g.toScale],u_fade:g.t,u_pixel_coord_upper:[b>>16,T>>16],u_pixel_coord_lower:[65535&b,65535&T]}}const ys=(g,n,s,d)=>{const f=n.style.light,y=f.properties.get("position"),b=[y.x,y.y,y.z],T=function(){var P=new c.A(9);return c.A!=Float32Array&&(P[1]=0,P[2]=0,P[3]=0,P[5]=0,P[6]=0,P[7]=0),P[0]=1,P[4]=1,P[8]=1,P}();f.properties.get("anchor")==="viewport"&&function(P,z){var M=Math.sin(z),U=Math.cos(z);P[0]=U,P[1]=M,P[2]=0,P[3]=-M,P[4]=U,P[5]=0,P[6]=0,P[7]=0,P[8]=1}(T,-n.transform.angle),function(P,z,M){var U=z[0],$=z[1],G=z[2];P[0]=U*M[0]+$*M[3]+G*M[6],P[1]=U*M[1]+$*M[4]+G*M[7],P[2]=U*M[2]+$*M[5]+G*M[8]}(b,b,T);const k=f.properties.get("color");return{u_matrix:g,u_lightpos:b,u_lightintensity:f.properties.get("intensity"),u_lightcolor:[k.r,k.g,k.b],u_vertical_gradient:+s,u_opacity:d}},Gu=(g,n,s,d,f,y,b)=>c.e(ys(g,n,s,d),sl(y,n,b),{u_height_factor:-Math.pow(2,f.overscaledZ)/b.tileSize/8}),ll=g=>({u_matrix:g}),_s=(g,n,s,d)=>c.e(ll(g),sl(s,n,d)),ul=(g,n)=>({u_matrix:g,u_world:n}),vs=(g,n,s,d,f)=>c.e(_s(g,n,s,d),{u_world:f}),lm=(g,n,s,d)=>{const f=g.transform;let y,b;if(d.paint.get("circle-pitch-alignment")==="map"){const T=wt(s,1,f.zoom);y=!0,b=[T,T]}else y=!1,b=f.pixelsToGLUnits;return{u_camera_to_center_distance:f.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:g.translatePosMatrix(n.posMatrix,s,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+y,u_device_pixel_ratio:g.pixelRatio,u_extrude_scale:b}},um=(g,n,s)=>({u_matrix:g,u_inv_matrix:n,u_camera_to_center_distance:s.cameraToCenterDistance,u_viewport_size:[s.width,s.height]}),Ku=(g,n,s=1)=>({u_matrix:g,u_color:n,u_overlay:0,u_overlay_scale:s}),td=g=>({u_matrix:g}),Zo=(g,n,s,d)=>({u_matrix:g,u_extrude_scale:wt(n,1,s),u_intensity:d});function cl(g,n){const s=Math.pow(2,n.canonical.z),d=n.canonical.y;return[new c.Y(0,d/s).toLngLat().lat,new c.Y(0,(d+1)/s).toLngLat().lat]}const Sn=(g,n,s,d)=>{const f=g.transform;return{u_matrix:Ju(g,n,s,d),u_ratio:1/wt(n,1,f.zoom),u_device_pixel_ratio:g.pixelRatio,u_units_to_pixels:[1/f.pixelsToGLUnits[0],1/f.pixelsToGLUnits[1]]}},Xn=(g,n,s,d,f)=>c.e(Sn(g,n,s,f),{u_image:0,u_image_height:d}),Xu=(g,n,s,d,f)=>{const y=g.transform,b=Yu(n,y);return{u_matrix:Ju(g,n,s,f),u_texsize:n.imageAtlasTexture.size,u_ratio:1/wt(n,1,y.zoom),u_device_pixel_ratio:g.pixelRatio,u_image:0,u_scale:[b,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},hl=(g,n,s,d,f,y)=>{const b=g.lineAtlas,T=Yu(n,g.transform),k=s.layout.get("line-cap")==="round",P=b.getDash(d.from,k),z=b.getDash(d.to,k),M=P.width*f.fromScale,U=z.width*f.toScale;return c.e(Sn(g,n,s,y),{u_patternscale_a:[T/M,-P.height/2],u_patternscale_b:[T/U,-z.height/2],u_sdfgamma:b.width/(256*Math.min(M,U)*g.pixelRatio)/2,u_image:0,u_tex_y_a:P.y,u_tex_y_b:z.y,u_mix:f.t})};function Yu(g,n){return 1/wt(g,1,n.tileZoom)}function Ju(g,n,s,d){return g.translatePosMatrix(d?d.posMatrix:n.tileID.posMatrix,n,s.paint.get("line-translate"),s.paint.get("line-translate-anchor"))}const ba=(g,n,s,d,f)=>{return{u_matrix:g,u_tl_parent:n,u_scale_parent:s,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*f.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:f.paint.get("raster-brightness-min"),u_brightness_high:f.paint.get("raster-brightness-max"),u_saturation_factor:(b=f.paint.get("raster-saturation"),b>0?1-1/(1.001-b):-b),u_contrast_factor:(y=f.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:cm(f.paint.get("raster-hue-rotate"))};var y,b};function cm(g){g*=Math.PI/180;const n=Math.sin(g),s=Math.cos(g);return[(2*s+1)/3,(-Math.sqrt(3)*n-s+1)/3,(Math.sqrt(3)*n-s+1)/3]}const rd=(g,n,s,d,f,y,b,T,k,P,z,M,U,$)=>{const G=b.transform;return{u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:G.cameraToCenterDistance,u_pitch:G.pitch/360*2*Math.PI,u_rotate_symbol:+s,u_aspect_ratio:G.width/G.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_matrix:T,u_label_plane_matrix:k,u_coord_matrix:P,u_is_text:+M,u_pitch_with_map:+d,u_is_along_line:f,u_is_variable_anchor:y,u_texsize:U,u_texture:0,u_translation:z,u_pitched_scale:$}},nd=(g,n,s,d,f,y,b,T,k,P,z,M,U,$,G)=>{const Q=b.transform;return c.e(rd(g,n,s,d,f,y,b,T,k,P,z,M,U,G),{u_gamma_scale:d?Math.cos(Q._pitch)*Q.cameraToCenterDistance:1,u_device_pixel_ratio:b.pixelRatio,u_is_halo:+$})},hm=(g,n,s,d,f,y,b,T,k,P,z,M,U,$)=>c.e(nd(g,n,s,d,f,y,b,T,k,P,z,!0,M,!0,$),{u_texsize_icon:U,u_texture_icon:1}),dm=(g,n,s)=>({u_matrix:g,u_opacity:n,u_color:s}),pm=(g,n,s,d,f,y)=>c.e(function(b,T,k,P){const z=k.imageManager.getPattern(b.from.toString()),M=k.imageManager.getPattern(b.to.toString()),{width:U,height:$}=k.imageManager.getPixelSize(),G=Math.pow(2,P.tileID.overscaledZ),Q=P.tileSize*Math.pow(2,k.transform.tileZoom)/G,K=Q*(P.tileID.canonical.x+P.tileID.wrap*G),ne=Q*P.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:z.tl,u_pattern_br_a:z.br,u_pattern_tl_b:M.tl,u_pattern_br_b:M.br,u_texsize:[U,$],u_mix:T.t,u_pattern_size_a:z.displaySize,u_pattern_size_b:M.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/wt(P,1,k.transform.tileZoom),u_pixel_coord_upper:[K>>16,ne>>16],u_pixel_coord_lower:[65535&K,65535&ne]}}(d,y,s,f),{u_matrix:g,u_opacity:n}),dl={fillExtrusion:(g,n)=>({u_matrix:new c.aJ(g,n.u_matrix),u_lightpos:new c.aL(g,n.u_lightpos),u_lightintensity:new c.aI(g,n.u_lightintensity),u_lightcolor:new c.aL(g,n.u_lightcolor),u_vertical_gradient:new c.aI(g,n.u_vertical_gradient),u_opacity:new c.aI(g,n.u_opacity)}),fillExtrusionPattern:(g,n)=>({u_matrix:new c.aJ(g,n.u_matrix),u_lightpos:new c.aL(g,n.u_lightpos),u_lightintensity:new c.aI(g,n.u_lightintensity),u_lightcolor:new c.aL(g,n.u_lightcolor),u_vertical_gradient:new c.aI(g,n.u_vertical_gradient),u_height_factor:new c.aI(g,n.u_height_factor),u_image:new c.aH(g,n.u_image),u_texsize:new c.aM(g,n.u_texsize),u_pixel_coord_upper:new c.aM(g,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.aM(g,n.u_pixel_coord_lower),u_scale:new c.aL(g,n.u_scale),u_fade:new c.aI(g,n.u_fade),u_opacity:new c.aI(g,n.u_opacity)}),fill:(g,n)=>({u_matrix:new c.aJ(g,n.u_matrix)}),fillPattern:(g,n)=>({u_matrix:new c.aJ(g,n.u_matrix),u_image:new c.aH(g,n.u_image),u_texsize:new c.aM(g,n.u_texsize),u_pixel_coord_upper:new c.aM(g,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.aM(g,n.u_pixel_coord_lower),u_scale:new c.aL(g,n.u_scale),u_fade:new c.aI(g,n.u_fade)}),fillOutline:(g,n)=>({u_matrix:new c.aJ(g,n.u_matrix),u_world:new c.aM(g,n.u_world)}),fillOutlinePattern:(g,n)=>({u_matrix:new c.aJ(g,n.u_matrix),u_world:new c.aM(g,n.u_world),u_image:new c.aH(g,n.u_image),u_texsize:new c.aM(g,n.u_texsize),u_pixel_coord_upper:new c.aM(g,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.aM(g,n.u_pixel_coord_lower),u_scale:new c.aL(g,n.u_scale),u_fade:new c.aI(g,n.u_fade)}),circle:(g,n)=>({u_camera_to_center_distance:new c.aI(g,n.u_camera_to_center_distance),u_scale_with_map:new c.aH(g,n.u_scale_with_map),u_pitch_with_map:new c.aH(g,n.u_pitch_with_map),u_extrude_scale:new c.aM(g,n.u_extrude_scale),u_device_pixel_ratio:new c.aI(g,n.u_device_pixel_ratio),u_matrix:new c.aJ(g,n.u_matrix)}),collisionBox:(g,n)=>({u_matrix:new c.aJ(g,n.u_matrix),u_pixel_extrude_scale:new c.aM(g,n.u_pixel_extrude_scale)}),collisionCircle:(g,n)=>({u_matrix:new c.aJ(g,n.u_matrix),u_inv_matrix:new c.aJ(g,n.u_inv_matrix),u_camera_to_center_distance:new c.aI(g,n.u_camera_to_center_distance),u_viewport_size:new c.aM(g,n.u_viewport_size)}),debug:(g,n)=>({u_color:new c.aN(g,n.u_color),u_matrix:new c.aJ(g,n.u_matrix),u_overlay:new c.aH(g,n.u_overlay),u_overlay_scale:new c.aI(g,n.u_overlay_scale)}),clippingMask:(g,n)=>({u_matrix:new c.aJ(g,n.u_matrix)}),heatmap:(g,n)=>({u_extrude_scale:new c.aI(g,n.u_extrude_scale),u_intensity:new c.aI(g,n.u_intensity),u_matrix:new c.aJ(g,n.u_matrix)}),heatmapTexture:(g,n)=>({u_matrix:new c.aJ(g,n.u_matrix),u_world:new c.aM(g,n.u_world),u_image:new c.aH(g,n.u_image),u_color_ramp:new c.aH(g,n.u_color_ramp),u_opacity:new c.aI(g,n.u_opacity)}),hillshade:(g,n)=>({u_matrix:new c.aJ(g,n.u_matrix),u_image:new c.aH(g,n.u_image),u_latrange:new c.aM(g,n.u_latrange),u_light:new c.aM(g,n.u_light),u_shadow:new c.aN(g,n.u_shadow),u_highlight:new c.aN(g,n.u_highlight),u_accent:new c.aN(g,n.u_accent)}),hillshadePrepare:(g,n)=>({u_matrix:new c.aJ(g,n.u_matrix),u_image:new c.aH(g,n.u_image),u_dimension:new c.aM(g,n.u_dimension),u_zoom:new c.aI(g,n.u_zoom),u_unpack:new c.aK(g,n.u_unpack)}),line:(g,n)=>({u_matrix:new c.aJ(g,n.u_matrix),u_ratio:new c.aI(g,n.u_ratio),u_device_pixel_ratio:new c.aI(g,n.u_device_pixel_ratio),u_units_to_pixels:new c.aM(g,n.u_units_to_pixels)}),lineGradient:(g,n)=>({u_matrix:new c.aJ(g,n.u_matrix),u_ratio:new c.aI(g,n.u_ratio),u_device_pixel_ratio:new c.aI(g,n.u_device_pixel_ratio),u_units_to_pixels:new c.aM(g,n.u_units_to_pixels),u_image:new c.aH(g,n.u_image),u_image_height:new c.aI(g,n.u_image_height)}),linePattern:(g,n)=>({u_matrix:new c.aJ(g,n.u_matrix),u_texsize:new c.aM(g,n.u_texsize),u_ratio:new c.aI(g,n.u_ratio),u_device_pixel_ratio:new c.aI(g,n.u_device_pixel_ratio),u_image:new c.aH(g,n.u_image),u_units_to_pixels:new c.aM(g,n.u_units_to_pixels),u_scale:new c.aL(g,n.u_scale),u_fade:new c.aI(g,n.u_fade)}),lineSDF:(g,n)=>({u_matrix:new c.aJ(g,n.u_matrix),u_ratio:new c.aI(g,n.u_ratio),u_device_pixel_ratio:new c.aI(g,n.u_device_pixel_ratio),u_units_to_pixels:new c.aM(g,n.u_units_to_pixels),u_patternscale_a:new c.aM(g,n.u_patternscale_a),u_patternscale_b:new c.aM(g,n.u_patternscale_b),u_sdfgamma:new c.aI(g,n.u_sdfgamma),u_image:new c.aH(g,n.u_image),u_tex_y_a:new c.aI(g,n.u_tex_y_a),u_tex_y_b:new c.aI(g,n.u_tex_y_b),u_mix:new c.aI(g,n.u_mix)}),raster:(g,n)=>({u_matrix:new c.aJ(g,n.u_matrix),u_tl_parent:new c.aM(g,n.u_tl_parent),u_scale_parent:new c.aI(g,n.u_scale_parent),u_buffer_scale:new c.aI(g,n.u_buffer_scale),u_fade_t:new c.aI(g,n.u_fade_t),u_opacity:new c.aI(g,n.u_opacity),u_image0:new c.aH(g,n.u_image0),u_image1:new c.aH(g,n.u_image1),u_brightness_low:new c.aI(g,n.u_brightness_low),u_brightness_high:new c.aI(g,n.u_brightness_high),u_saturation_factor:new c.aI(g,n.u_saturation_factor),u_contrast_factor:new c.aI(g,n.u_contrast_factor),u_spin_weights:new c.aL(g,n.u_spin_weights)}),symbolIcon:(g,n)=>({u_is_size_zoom_constant:new c.aH(g,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aH(g,n.u_is_size_feature_constant),u_size_t:new c.aI(g,n.u_size_t),u_size:new c.aI(g,n.u_size),u_camera_to_center_distance:new c.aI(g,n.u_camera_to_center_distance),u_pitch:new c.aI(g,n.u_pitch),u_rotate_symbol:new c.aH(g,n.u_rotate_symbol),u_aspect_ratio:new c.aI(g,n.u_aspect_ratio),u_fade_change:new c.aI(g,n.u_fade_change),u_matrix:new c.aJ(g,n.u_matrix),u_label_plane_matrix:new c.aJ(g,n.u_label_plane_matrix),u_coord_matrix:new c.aJ(g,n.u_coord_matrix),u_is_text:new c.aH(g,n.u_is_text),u_pitch_with_map:new c.aH(g,n.u_pitch_with_map),u_is_along_line:new c.aH(g,n.u_is_along_line),u_is_variable_anchor:new c.aH(g,n.u_is_variable_anchor),u_texsize:new c.aM(g,n.u_texsize),u_texture:new c.aH(g,n.u_texture),u_translation:new c.aM(g,n.u_translation),u_pitched_scale:new c.aI(g,n.u_pitched_scale)}),symbolSDF:(g,n)=>({u_is_size_zoom_constant:new c.aH(g,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aH(g,n.u_is_size_feature_constant),u_size_t:new c.aI(g,n.u_size_t),u_size:new c.aI(g,n.u_size),u_camera_to_center_distance:new c.aI(g,n.u_camera_to_center_distance),u_pitch:new c.aI(g,n.u_pitch),u_rotate_symbol:new c.aH(g,n.u_rotate_symbol),u_aspect_ratio:new c.aI(g,n.u_aspect_ratio),u_fade_change:new c.aI(g,n.u_fade_change),u_matrix:new c.aJ(g,n.u_matrix),u_label_plane_matrix:new c.aJ(g,n.u_label_plane_matrix),u_coord_matrix:new c.aJ(g,n.u_coord_matrix),u_is_text:new c.aH(g,n.u_is_text),u_pitch_with_map:new c.aH(g,n.u_pitch_with_map),u_is_along_line:new c.aH(g,n.u_is_along_line),u_is_variable_anchor:new c.aH(g,n.u_is_variable_anchor),u_texsize:new c.aM(g,n.u_texsize),u_texture:new c.aH(g,n.u_texture),u_gamma_scale:new c.aI(g,n.u_gamma_scale),u_device_pixel_ratio:new c.aI(g,n.u_device_pixel_ratio),u_is_halo:new c.aH(g,n.u_is_halo),u_translation:new c.aM(g,n.u_translation),u_pitched_scale:new c.aI(g,n.u_pitched_scale)}),symbolTextAndIcon:(g,n)=>({u_is_size_zoom_constant:new c.aH(g,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aH(g,n.u_is_size_feature_constant),u_size_t:new c.aI(g,n.u_size_t),u_size:new c.aI(g,n.u_size),u_camera_to_center_distance:new c.aI(g,n.u_camera_to_center_distance),u_pitch:new c.aI(g,n.u_pitch),u_rotate_symbol:new c.aH(g,n.u_rotate_symbol),u_aspect_ratio:new c.aI(g,n.u_aspect_ratio),u_fade_change:new c.aI(g,n.u_fade_change),u_matrix:new c.aJ(g,n.u_matrix),u_label_plane_matrix:new c.aJ(g,n.u_label_plane_matrix),u_coord_matrix:new c.aJ(g,n.u_coord_matrix),u_is_text:new c.aH(g,n.u_is_text),u_pitch_with_map:new c.aH(g,n.u_pitch_with_map),u_is_along_line:new c.aH(g,n.u_is_along_line),u_is_variable_anchor:new c.aH(g,n.u_is_variable_anchor),u_texsize:new c.aM(g,n.u_texsize),u_texsize_icon:new c.aM(g,n.u_texsize_icon),u_texture:new c.aH(g,n.u_texture),u_texture_icon:new c.aH(g,n.u_texture_icon),u_gamma_scale:new c.aI(g,n.u_gamma_scale),u_device_pixel_ratio:new c.aI(g,n.u_device_pixel_ratio),u_is_halo:new c.aH(g,n.u_is_halo),u_translation:new c.aM(g,n.u_translation),u_pitched_scale:new c.aI(g,n.u_pitched_scale)}),background:(g,n)=>({u_matrix:new c.aJ(g,n.u_matrix),u_opacity:new c.aI(g,n.u_opacity),u_color:new c.aN(g,n.u_color)}),backgroundPattern:(g,n)=>({u_matrix:new c.aJ(g,n.u_matrix),u_opacity:new c.aI(g,n.u_opacity),u_image:new c.aH(g,n.u_image),u_pattern_tl_a:new c.aM(g,n.u_pattern_tl_a),u_pattern_br_a:new c.aM(g,n.u_pattern_br_a),u_pattern_tl_b:new c.aM(g,n.u_pattern_tl_b),u_pattern_br_b:new c.aM(g,n.u_pattern_br_b),u_texsize:new c.aM(g,n.u_texsize),u_mix:new c.aI(g,n.u_mix),u_pattern_size_a:new c.aM(g,n.u_pattern_size_a),u_pattern_size_b:new c.aM(g,n.u_pattern_size_b),u_scale_a:new c.aI(g,n.u_scale_a),u_scale_b:new c.aI(g,n.u_scale_b),u_pixel_coord_upper:new c.aM(g,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.aM(g,n.u_pixel_coord_lower),u_tile_units_to_pixels:new c.aI(g,n.u_tile_units_to_pixels)}),terrain:(g,n)=>({u_matrix:new c.aJ(g,n.u_matrix),u_texture:new c.aH(g,n.u_texture),u_ele_delta:new c.aI(g,n.u_ele_delta)}),terrainDepth:(g,n)=>({u_matrix:new c.aJ(g,n.u_matrix),u_ele_delta:new c.aI(g,n.u_ele_delta)}),terrainCoords:(g,n)=>({u_matrix:new c.aJ(g,n.u_matrix),u_texture:new c.aH(g,n.u_texture),u_terrain_coords_id:new c.aI(g,n.u_terrain_coords_id),u_ele_delta:new c.aI(g,n.u_ele_delta)})};class Qu{constructor(n,s,d){this.context=n;const f=n.gl;this.buffer=f.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),f.bufferData(f.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?f.DYNAMIC_DRAW:f.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const s=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const pl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ec{constructor(n,s,d,f){this.length=s.length,this.attributes=d,this.itemSize=s.bytesPerElement,this.dynamicDraw=f,this.context=n;const y=n.gl;this.buffer=y.createBuffer(),n.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,s){for(let d=0;d<this.attributes.length;d++){const f=s.attributes[this.attributes[d].name];f!==void 0&&n.enableVertexAttribArray(f)}}setVertexAttribPointers(n,s,d){for(let f=0;f<this.attributes.length;f++){const y=this.attributes[f],b=s.attributes[y.name];b!==void 0&&n.vertexAttribPointer(b,y.components,n[pl[y.type]],!1,this.itemSize,y.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const xs=new WeakMap;function Yn(g){var n;if(xs.has(g))return xs.get(g);{const s=(n=g.getParameter(g.VERSION))===null||n===void 0?void 0:n.startsWith("WebGL 2.0");return xs.set(g,s),s}}class Wt{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class tc extends Wt{getDefault(){return c.aP.transparent}set(n){const s=this.current;(n.r!==s.r||n.g!==s.g||n.b!==s.b||n.a!==s.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class ws extends Wt{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class bs extends Wt{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class fm extends Wt{getDefault(){return[!0,!0,!0,!0]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||n[3]!==s[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class fl extends Wt{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class mm extends Wt{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class Sa extends Wt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const s=this.current;(n.func!==s.func||n.ref!==s.ref||n.mask!==s.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class gm extends Wt{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class id extends Wt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.STENCIL_TEST):s.disable(s.STENCIL_TEST),this.current=n,this.dirty=!1}}class ym extends Wt{getDefault(){return[0,1]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class od extends Wt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.DEPTH_TEST):s.disable(s.DEPTH_TEST),this.current=n,this.dirty=!1}}class rc extends Wt{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class ad extends Wt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.BLEND):s.disable(s.BLEND),this.current=n,this.dirty=!1}}class sd extends Wt{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class ld extends Wt{getDefault(){return c.aP.transparent}set(n){const s=this.current;(n.r!==s.r||n.g!==s.g||n.b!==s.b||n.a!==s.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class ud extends Wt{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class Go extends Wt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.CULL_FACE):s.disable(s.CULL_FACE),this.current=n,this.dirty=!1}}class cd extends Wt{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class _m extends Wt{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class vm extends Wt{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class hd extends Wt{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class Ss extends Wt{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||n[3]!==s[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class xm extends Wt{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindFramebuffer(s.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class ml extends Wt{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindRenderbuffer(s.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class wm extends Wt{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindTexture(s.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class bm extends Wt{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindBuffer(s.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class dd extends Wt{getDefault(){return null}set(n){const s=this.gl;s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class pd extends Wt{getDefault(){return null}set(n){var s;if(n===this.current&&!this.dirty)return;const d=this.gl;Yn(d)?d.bindVertexArray(n):(s=d.getExtension("OES_vertex_array_object"))===null||s===void 0||s.bindVertexArrayOES(n),this.current=n,this.dirty=!1}}class fd extends Wt{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class nc extends Wt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class md extends Wt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class Ta extends Wt{constructor(n,s){super(n),this.context=n,this.parent=s}getDefault(){return null}}class uo extends Ta{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class ic extends Ta{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class oc extends Ta{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class ac{constructor(n,s,d,f,y){this.context=n,this.width=s,this.height=d;const b=n.gl,T=this.framebuffer=b.createFramebuffer();if(this.colorAttachment=new uo(n,T),f)this.depthAttachment=y?new oc(n,T):new ic(n,T);else if(y)throw new Error("Stencil cannot be set without depth");if(b.checkFramebufferStatus(b.FRAMEBUFFER)!==b.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const n=this.context.gl,s=this.colorAttachment.get();if(s&&n.deleteTexture(s),this.depthAttachment){const d=this.depthAttachment.get();d&&n.deleteRenderbuffer(d)}n.deleteFramebuffer(this.framebuffer)}}class Tr{constructor(n,s,d){this.blendFunction=n,this.blendColor=s,this.mask=d}}Tr.Replace=[1,0],Tr.disabled=new Tr(Tr.Replace,c.aP.transparent,[!1,!1,!1,!1]),Tr.unblended=new Tr(Tr.Replace,c.aP.transparent,[!0,!0,!0,!0]),Tr.alphaBlended=new Tr([1,771],c.aP.transparent,[!0,!0,!0,!0]);class sc{constructor(n){var s,d;if(this.gl=n,this.clearColor=new tc(this),this.clearDepth=new ws(this),this.clearStencil=new bs(this),this.colorMask=new fm(this),this.depthMask=new fl(this),this.stencilMask=new mm(this),this.stencilFunc=new Sa(this),this.stencilOp=new gm(this),this.stencilTest=new id(this),this.depthRange=new ym(this),this.depthTest=new od(this),this.depthFunc=new rc(this),this.blend=new ad(this),this.blendFunc=new sd(this),this.blendColor=new ld(this),this.blendEquation=new ud(this),this.cullFace=new Go(this),this.cullFaceSide=new cd(this),this.frontFace=new _m(this),this.program=new vm(this),this.activeTexture=new hd(this),this.viewport=new Ss(this),this.bindFramebuffer=new xm(this),this.bindRenderbuffer=new ml(this),this.bindTexture=new wm(this),this.bindVertexBuffer=new bm(this),this.bindElementBuffer=new dd(this),this.bindVertexArray=new pd(this),this.pixelStoreUnpack=new fd(this),this.pixelStoreUnpackPremultiplyAlpha=new nc(this),this.pixelStoreUnpackFlipY=new md(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),Yn(n)){this.HALF_FLOAT=n.HALF_FLOAT;const f=n.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(s=n.RGBA16F)!==null&&s!==void 0?s:f==null?void 0:f.RGBA16F_EXT,this.RGB16F=(d=n.RGB16F)!==null&&d!==void 0?d:f==null?void 0:f.RGB16F_EXT,n.getExtension("EXT_color_buffer_float")}else{n.getExtension("EXT_color_buffer_half_float"),n.getExtension("OES_texture_half_float_linear");const f=n.getExtension("OES_texture_half_float");this.HALF_FLOAT=f==null?void 0:f.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,s){return new Qu(this,n,s)}createVertexBuffer(n,s,d){return new ec(this,n,s,d)}createRenderbuffer(n,s,d){const f=this.gl,y=f.createRenderbuffer();return this.bindRenderbuffer.set(y),f.renderbufferStorage(f.RENDERBUFFER,n,s,d),this.bindRenderbuffer.set(null),y}createFramebuffer(n,s,d,f){return new ac(this,n,s,d,f)}clear({color:n,depth:s,stencil:d}){const f=this.gl;let y=0;n&&(y|=f.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),s!==void 0&&(y|=f.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(s),this.depthMask.set(!0)),d!==void 0&&(y|=f.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),f.clear(y)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){c.aE(n.blendFunction,Tr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}createVertexArray(){var n;return Yn(this.gl)?this.gl.createVertexArray():(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.createVertexArrayOES()}deleteVertexArray(n){var s;return Yn(this.gl)?this.gl.deleteVertexArray(n):(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.deleteVertexArrayOES(n)}unbindVAO(){this.bindVertexArray.set(null)}}class Mt{constructor(n,s,d){this.func=n,this.mask=s,this.range=d}}Mt.ReadOnly=!1,Mt.ReadWrite=!0,Mt.disabled=new Mt(519,Mt.ReadOnly,[0,1]);const Ts=7680;class gr{constructor(n,s,d,f,y,b){this.test=n,this.ref=s,this.mask=d,this.fail=f,this.depthFail=y,this.pass=b}}gr.disabled=new gr({func:519,mask:0},0,0,Ts,Ts,Ts);class fr{constructor(n,s,d){this.enable=n,this.mode=s,this.frontFace=d}}let gl;function gd(g,n,s,d,f){const y=g.context,b=y.gl,T=g.useProgram("collisionBox"),k=[];let P=0,z=0;for(let ne=0;ne<d.length;ne++){const se=d[ne],J=n.getTile(se).getBucket(s);if(!J)continue;const ce=f?J.textCollisionBox:J.iconCollisionBox,me=J.collisionCircleArray;if(me.length>0){const ve=c.F();c.aQ(ve,J.placementInvProjMatrix,g.transform.glCoordMatrix),c.aQ(ve,ve,J.placementViewportMatrix),k.push({circleArray:me,circleOffset:z,transform:se.posMatrix,invTransform:ve,coord:se}),P+=me.length/4,z=P}ce&&T.draw(y,b.LINES,Mt.disabled,gr.disabled,g.colorModeForRenderPass(),fr.disabled,{u_matrix:se.posMatrix,u_pixel_extrude_scale:[1/(M=g.transform).width,1/M.height]},g.style.map.terrain&&g.style.map.terrain.getTerrainData(se),s.id,ce.layoutVertexBuffer,ce.indexBuffer,ce.segments,null,g.transform.zoom,null,null,ce.collisionVertexBuffer)}var M;if(!f||!k.length)return;const U=g.useProgram("collisionCircle"),$=new c.aR;$.resize(4*P),$._trim();let G=0;for(const ne of k)for(let se=0;se<ne.circleArray.length/4;se++){const J=4*se,ce=ne.circleArray[J+0],me=ne.circleArray[J+1],ve=ne.circleArray[J+2],Pe=ne.circleArray[J+3];$.emplace(G++,ce,me,ve,Pe,0),$.emplace(G++,ce,me,ve,Pe,1),$.emplace(G++,ce,me,ve,Pe,2),$.emplace(G++,ce,me,ve,Pe,3)}(!gl||gl.length<2*P)&&(gl=function(ne){const se=2*ne,J=new c.aT;J.resize(se),J._trim();for(let ce=0;ce<se;ce++){const me=6*ce;J.uint16[me+0]=4*ce+0,J.uint16[me+1]=4*ce+1,J.uint16[me+2]=4*ce+2,J.uint16[me+3]=4*ce+2,J.uint16[me+4]=4*ce+3,J.uint16[me+5]=4*ce+0}return J}(P));const Q=y.createIndexBuffer(gl,!0),K=y.createVertexBuffer($,c.aS.members,!0);for(const ne of k){const se=um(ne.transform,ne.invTransform,g.transform);U.draw(y,b.TRIANGLES,Mt.disabled,gr.disabled,g.colorModeForRenderPass(),fr.disabled,se,g.style.map.terrain&&g.style.map.terrain.getTerrainData(ne.coord),s.id,K,Q,c.$.simpleSegment(0,2*ne.circleOffset,ne.circleArray.length,ne.circleArray.length/2),null,g.transform.zoom,null,null,null)}K.destroy(),Q.destroy()}fr.disabled=new fr(!1,1029,2305),fr.backCCW=new fr(!0,1029,2305);const lc=c.an(new Float32Array(16));function Sm(g,n,s,d,f,y){const{horizontalAlign:b,verticalAlign:T}=c.au(g);return new c.P((-(b-.5)*n/f+d[0])*y,(-(T-.5)*s/f+d[1])*y)}function yd(g,n,s,d,f,y){const b=n.tileAnchorPoint.add(new c.P(n.translation[0],n.translation[1]));if(n.pitchWithMap){let T=d.mult(y);return s||(T=T.rotate(-f)),Ot(b.add(T),n.labelPlaneMatrix,n.getElevation).point}if(s){const T=ie(n.tileAnchorPoint.x+1,n.tileAnchorPoint.y,n).point.sub(g),k=Math.atan(T.y/T.x)+(T.x<0?Math.PI:0);return g.add(d.rotate(k))}return g.add(d)}function yl(g,n,s,d,f,y,b,T,k,P,z,M,U,$){const G=g.text.placedSymbolArray,Q=g.text.dynamicLayoutVertexArray,K=g.icon.dynamicLayoutVertexArray,ne={};Q.clear();for(let se=0;se<G.length;se++){const J=G.get(se),ce=J.hidden||!J.crossTileID||g.allowVerticalPlacement&&!J.placedOrientation?null:d[J.crossTileID];if(ce){const me=new c.P(J.anchorX,J.anchorY),ve={getElevation:$,width:f.width,height:f.height,labelPlaneMatrix:y,lineVertexArray:null,pitchWithMap:s,projection:z,projectionCache:null,tileAnchorPoint:me,translation:M,unwrappedTileID:U},Pe=s?Ot(me,b,$):ie(me.x,me.y,ve),De=Z(f.cameraToCenterDistance,Pe.signedDistanceFromCamera);let Xe=c.ai(g.textSizeData,k,J)*De/c.ap;s&&(Xe*=g.tilePixelRatio/T);const{width:Je,height:Oe,anchor:je,textOffset:nt,textBoxScale:bt}=ce,Ve=Sm(je,Je,Oe,nt,bt,Xe),qe=z.getPitchedTextCorrection(f,me.add(new c.P(M[0],M[1])),U),_t=yd(Pe.point,ve,n,Ve,f.angle,qe),lr=g.allowVerticalPlacement&&J.placedOrientation===c.ah.vertical?Math.PI/2:0;for(let At=0;At<J.numGlyphs;At++)c.aj(Q,_t,lr);P&&J.associatedIconIndex>=0&&(ne[J.associatedIconIndex]={shiftedAnchor:_t,angle:lr})}else dt(J.numGlyphs,Q)}if(P){K.clear();const se=g.icon.placedSymbolArray;for(let J=0;J<se.length;J++){const ce=se.get(J);if(ce.hidden)dt(ce.numGlyphs,K);else{const me=ne[J];if(me)for(let ve=0;ve<ce.numGlyphs;ve++)c.aj(K,me.shiftedAnchor,me.angle);else dt(ce.numGlyphs,K)}}g.icon.dynamicLayoutVertexBuffer.updateData(K)}g.text.dynamicLayoutVertexBuffer.updateData(Q)}function _l(g,n,s){return s.iconsInText&&n?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function ks(g,n,s,d,f,y,b,T,k,P,z,M){const U=g.context,$=U.gl,G=g.transform,Q=Dn(),K=T==="map",ne=k==="map",se=T!=="viewport"&&s.layout.get("symbol-placement")!=="point",J=K&&!ne&&!se,ce=!ne&&se,me=!s.layout.get("symbol-sort-key").isConstant();let ve=!1;const Pe=g.depthModeForSublayer(0,Mt.ReadOnly),De=s._unevaluatedLayout.hasValue("text-variable-anchor")||s._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Xe=[],Je=Q.getCircleRadiusCorrection(G);for(const Oe of d){const je=n.getTile(Oe),nt=je.getBucket(s);if(!nt)continue;const bt=f?nt.text:nt.icon;if(!bt||!bt.segments.get().length||!bt.hasVisibleVertices)continue;const Ve=bt.programConfigurations.get(s.id),qe=f||nt.sdfIcons,_t=f?nt.textSizeData:nt.iconSizeData,lr=ne||G.pitch!==0,At=g.useProgram(_l(qe,f,nt),Ve),Lt=c.ag(_t,G.zoom),ur=g.style.map.terrain&&g.style.map.terrain.getTerrainData(Oe);let un,Pi,cr,Fn,Tn=[0,0],cn=null;if(f)Pi=je.glyphAtlasTexture,cr=$.LINEAR,un=je.glyphAtlasTexture.size,nt.iconsInText&&(Tn=je.imageAtlasTexture.size,cn=je.imageAtlasTexture,Fn=lr||g.options.rotating||g.options.zooming||_t.kind==="composite"||_t.kind==="camera"?$.LINEAR:$.NEAREST);else{const yr=s.layout.get("icon-size").constantOr(0)!==1||nt.iconsNeedLinear;Pi=je.imageAtlasTexture,cr=qe||g.options.rotating||g.options.zooming||yr||lr?$.LINEAR:$.NEAREST,un=je.imageAtlasTexture.size}const hn=wt(je,1,g.transform.zoom),Ii=ce?Oe.posMatrix:lc,ta=ki(Ii,ne,K,g.transform,hn),Fl=Ei(Ii,ne,K,g.transform,hn),za=Ei(Oe.posMatrix,ne,K,g.transform,hn),ra=Q.translatePosition(g.transform,je,y,b),Bl=De&&nt.hasTextData(),Mc=s.layout.get("icon-text-fit")!=="none"&&Bl&&nt.hasIconData();if(se){const yr=g.style.map.terrain?(zc,Wr)=>g.style.map.terrain.getElevation(Oe,zc,Wr):null,Ra=s.layout.get("text-rotation-alignment")==="map";O(nt,Oe.posMatrix,g,f,ta,za,ne,P,Ra,Q,Oe.toUnwrapped(),G.width,G.height,ra,yr)}const rn=Oe.posMatrix,Ai=f&&De||Mc,zo=se||Ai?lc:ta,La=Fl,dn=qe&&s.paint.get(f?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let pn;pn=qe?nt.iconsInText?hm(_t.kind,Lt,J,ne,se,Ai,g,rn,zo,La,ra,un,Tn,Je):nd(_t.kind,Lt,J,ne,se,Ai,g,rn,zo,La,ra,f,un,!0,Je):rd(_t.kind,Lt,J,ne,se,Ai,g,rn,zo,La,ra,f,un,Je);const Yr={program:At,buffers:bt,uniformValues:pn,atlasTexture:Pi,atlasTextureIcon:cn,atlasInterpolation:cr,atlasInterpolationIcon:Fn,isSDF:qe,hasHalo:dn};if(me&&nt.canOverlap){ve=!0;const yr=bt.segments.get();for(const Ra of yr)Xe.push({segments:new c.$([Ra]),sortKey:Ra.sortKey,state:Yr,terrainData:ur})}else Xe.push({segments:bt.segments,sortKey:0,state:Yr,terrainData:ur})}ve&&Xe.sort((Oe,je)=>Oe.sortKey-je.sortKey);for(const Oe of Xe){const je=Oe.state;if(U.activeTexture.set($.TEXTURE0),je.atlasTexture.bind(je.atlasInterpolation,$.CLAMP_TO_EDGE),je.atlasTextureIcon&&(U.activeTexture.set($.TEXTURE1),je.atlasTextureIcon&&je.atlasTextureIcon.bind(je.atlasInterpolationIcon,$.CLAMP_TO_EDGE)),je.isSDF){const nt=je.uniformValues;je.hasHalo&&(nt.u_is_halo=1,vl(je.buffers,Oe.segments,s,g,je.program,Pe,z,M,nt,Oe.terrainData)),nt.u_is_halo=0}vl(je.buffers,Oe.segments,s,g,je.program,Pe,z,M,je.uniformValues,Oe.terrainData)}}function vl(g,n,s,d,f,y,b,T,k,P){const z=d.context;f.draw(z,z.gl.TRIANGLES,y,b,T,fr.disabled,k,P,s.id,g.layoutVertexBuffer,g.indexBuffer,n,s.paint,d.transform.zoom,g.programConfigurations.get(s.id),g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer)}function Co(g,n,s,d,f){if(!s||!d||!d.imageAtlas)return;const y=d.imageAtlas.patternPositions;let b=y[s.to.toString()],T=y[s.from.toString()];if(!b&&T&&(b=T),!T&&b&&(T=b),!b||!T){const k=f.getPaintProperty(n);b=y[k],T=y[k]}b&&T&&g.setConstantPatternPositions(b,T)}function Ko(g,n,s,d,f,y,b){const T=g.context.gl,k="fill-pattern",P=s.paint.get(k),z=P&&P.constantOr(1),M=s.getCrossfadeParameters();let U,$,G,Q,K;b?($=z&&!s.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",U=T.LINES):($=z?"fillPattern":"fill",U=T.TRIANGLES);const ne=P.constantOr(null);for(const se of d){const J=n.getTile(se);if(z&&!J.patternsLoaded())continue;const ce=J.getBucket(s);if(!ce)continue;const me=ce.programConfigurations.get(s.id),ve=g.useProgram($,me),Pe=g.style.map.terrain&&g.style.map.terrain.getTerrainData(se);z&&(g.context.activeTexture.set(T.TEXTURE0),J.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),me.updatePaintBuffers(M)),Co(me,k,ne,J,s);const De=Pe?se:null,Xe=g.translatePosMatrix(De?De.posMatrix:se.posMatrix,J,s.paint.get("fill-translate"),s.paint.get("fill-translate-anchor"));if(b){Q=ce.indexBuffer2,K=ce.segments2;const Je=[T.drawingBufferWidth,T.drawingBufferHeight];G=$==="fillOutlinePattern"&&z?vs(Xe,g,M,J,Je):ul(Xe,Je)}else Q=ce.indexBuffer,K=ce.segments,G=z?_s(Xe,g,M,J):ll(Xe);ve.draw(g.context,U,f,g.stencilModeForClipping(se),y,fr.disabled,G,Pe,s.id,ce.layoutVertexBuffer,Q,K,s.paint,g.transform.zoom,me)}}function On(g,n,s,d,f,y,b){const T=g.context,k=T.gl,P="fill-extrusion-pattern",z=s.paint.get(P),M=z.constantOr(1),U=s.getCrossfadeParameters(),$=s.paint.get("fill-extrusion-opacity"),G=z.constantOr(null);for(const Q of d){const K=n.getTile(Q),ne=K.getBucket(s);if(!ne)continue;const se=g.style.map.terrain&&g.style.map.terrain.getTerrainData(Q),J=ne.programConfigurations.get(s.id),ce=g.useProgram(M?"fillExtrusionPattern":"fillExtrusion",J);M&&(g.context.activeTexture.set(k.TEXTURE0),K.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),J.updatePaintBuffers(U)),Co(J,P,G,K,s);const me=g.translatePosMatrix(Q.posMatrix,K,s.paint.get("fill-extrusion-translate"),s.paint.get("fill-extrusion-translate-anchor")),ve=s.paint.get("fill-extrusion-vertical-gradient"),Pe=M?Gu(me,g,ve,$,Q,U,K):ys(me,g,ve,$);ce.draw(T,T.gl.TRIANGLES,f,y,b,fr.backCCW,Pe,se,s.id,ne.layoutVertexBuffer,ne.indexBuffer,ne.segments,s.paint,g.transform.zoom,J,g.style.map.terrain&&ne.centroidVertexBuffer)}}function _d(g,n,s,d,f,y,b){const T=g.context,k=T.gl,P=s.fbo;if(!P)return;const z=g.useProgram("hillshade"),M=g.style.map.terrain&&g.style.map.terrain.getTerrainData(n);T.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,P.colorAttachment.get()),z.draw(T,k.TRIANGLES,f,y,b,fr.disabled,((U,$,G,Q)=>{const K=G.paint.get("hillshade-shadow-color"),ne=G.paint.get("hillshade-highlight-color"),se=G.paint.get("hillshade-accent-color");let J=G.paint.get("hillshade-illumination-direction")*(Math.PI/180);G.paint.get("hillshade-illumination-anchor")==="viewport"&&(J-=U.transform.angle);const ce=!U.options.moving;return{u_matrix:Q?Q.posMatrix:U.transform.calculatePosMatrix($.tileID.toUnwrapped(),ce),u_image:0,u_latrange:cl(0,$.tileID),u_light:[G.paint.get("hillshade-exaggeration"),J],u_shadow:K,u_highlight:ne,u_accent:se}})(g,s,d,M?n:null),M,d.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}function vd(g,n,s,d,f,y){const b=g.context,T=b.gl,k=n.dem;if(k&&k.data){const P=k.dim,z=k.stride,M=k.getPixels();if(b.activeTexture.set(T.TEXTURE1),b.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||g.getTileTexture(z),n.demTexture){const $=n.demTexture;$.update(M,{premultiply:!1}),$.bind(T.NEAREST,T.CLAMP_TO_EDGE)}else n.demTexture=new $e(b,M,T.RGBA,{premultiply:!1}),n.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE);b.activeTexture.set(T.TEXTURE0);let U=n.fbo;if(!U){const $=new $e(b,{width:P,height:P,data:null},T.RGBA);$.bind(T.LINEAR,T.CLAMP_TO_EDGE),U=n.fbo=b.createFramebuffer(P,P,!0,!1),U.colorAttachment.set($.texture)}b.bindFramebuffer.set(U.framebuffer),b.viewport.set([0,0,P,P]),g.useProgram("hillshadePrepare").draw(b,T.TRIANGLES,d,f,y,fr.disabled,(($,G)=>{const Q=G.stride,K=c.F();return c.aO(K,0,c.W,-c.W,0,0,1),c.H(K,K,[0,-c.W,0]),{u_matrix:K,u_image:1,u_dimension:[Q,Q],u_zoom:$.overscaledZ,u_unpack:G.getUnpackVector()}})(n.tileID,k),null,s.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function uc(g,n,s,d,f,y){const b=d.paint.get("raster-fade-duration");if(!y&&b>0){const T=D.now(),k=(T-g.timeAdded)/b,P=n?(T-n.timeAdded)/b:-1,z=s.getSource(),M=f.coveringZoomLevel({tileSize:z.tileSize,roundZoom:z.roundZoom}),U=!n||Math.abs(n.tileID.overscaledZ-M)>Math.abs(g.tileID.overscaledZ-M),$=U&&g.refreshedUponExpiration?1:c.ac(U?k:1-P,0,1);return g.refreshedUponExpiration&&k>=1&&(g.refreshedUponExpiration=!1),n?{opacity:1,mix:1-$}:{opacity:$,mix:0}}return{opacity:1,mix:0}}const Xo=new c.aP(1,0,0,1),xl=new c.aP(0,1,0,1),wl=new c.aP(0,0,1,1),Es=new c.aP(1,0,1,1),bl=new c.aP(0,1,1,1);function cc(g,n,s,d){co(g,0,n+s/2,g.transform.width,s,d)}function Yo(g,n,s,d){co(g,n-s/2,0,s,g.transform.height,d)}function co(g,n,s,d,f,y){const b=g.context,T=b.gl;T.enable(T.SCISSOR_TEST),T.scissor(n*g.pixelRatio,s*g.pixelRatio,d*g.pixelRatio,f*g.pixelRatio),b.clear({color:y}),T.disable(T.SCISSOR_TEST)}function xd(g,n,s){const d=g.context,f=d.gl,y=s.posMatrix,b=g.useProgram("debug"),T=Mt.disabled,k=gr.disabled,P=g.colorModeForRenderPass(),z="$debug",M=g.style.map.terrain&&g.style.map.terrain.getTerrainData(s);d.activeTexture.set(f.TEXTURE0);const U=n.getTileByID(s.key).latestRawTileData,$=Math.floor((U&&U.byteLength||0)/1024),G=n.getTile(s).tileSize,Q=512/Math.min(G,512)*(s.overscaledZ/g.transform.zoom)*.5;let K=s.canonical.toString();s.overscaledZ!==s.canonical.z&&(K+=` => ${s.overscaledZ}`),function(ne,se){ne.initDebugOverlayCanvas();const J=ne.debugOverlayCanvas,ce=ne.context.gl,me=ne.debugOverlayCanvas.getContext("2d");me.clearRect(0,0,J.width,J.height),me.shadowColor="white",me.shadowBlur=2,me.lineWidth=1.5,me.strokeStyle="white",me.textBaseline="top",me.font="bold 36px Open Sans, sans-serif",me.fillText(se,5,5),me.strokeText(se,5,5),ne.debugOverlayTexture.update(J),ne.debugOverlayTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE)}(g,`${K} ${$}kB`),b.draw(d,f.TRIANGLES,T,k,Tr.alphaBlended,fr.disabled,Ku(y,c.aP.transparent,Q),null,z,g.debugBuffer,g.quadTriangleIndexBuffer,g.debugSegments),b.draw(d,f.LINE_STRIP,T,k,P,fr.disabled,Ku(y,c.aP.red),M,z,g.debugBuffer,g.tileBorderIndexBuffer,g.debugSegments)}function Sl(g,n,s){const d=g.context,f=d.gl,y=g.colorModeForRenderPass(),b=new Mt(f.LEQUAL,Mt.ReadWrite,g.depthRangeFor3D),T=g.useProgram("terrain"),k=n.getTerrainMesh();d.bindFramebuffer.set(null),d.viewport.set([0,0,g.width,g.height]);for(const P of s){const z=g.renderToTexture.getTexture(P),M=n.getTerrainData(P.tileID);d.activeTexture.set(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,z.texture);const U={u_matrix:g.transform.calculatePosMatrix(P.tileID.toUnwrapped()),u_texture:0,u_ele_delta:n.getMeshFrameDelta(g.transform.zoom)};T.draw(d,f.TRIANGLES,b,gr.disabled,y,fr.backCCW,U,M,"terrain",k.vertexBuffer,k.indexBuffer,k.segments)}}class jt{constructor(n,s){this.context=new sc(n),this.transform=s,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Be.maxUnderzooming+Be.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Sr}resize(n,s,d){if(this.width=Math.floor(n*d),this.height=Math.floor(s*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const f of this.style._order)this.style._layers[f].resize()}setup(){const n=this.context,s=new c.aW;s.emplaceBack(0,0),s.emplaceBack(c.W,0),s.emplaceBack(0,c.W),s.emplaceBack(c.W,c.W),this.tileExtentBuffer=n.createVertexBuffer(s,Wi.members),this.tileExtentSegments=c.$.simpleSegment(0,0,4,2);const d=new c.aW;d.emplaceBack(0,0),d.emplaceBack(c.W,0),d.emplaceBack(0,c.W),d.emplaceBack(c.W,c.W),this.debugBuffer=n.createVertexBuffer(d,Wi.members),this.debugSegments=c.$.simpleSegment(0,0,4,5);const f=new c.Z;f.emplaceBack(0,0,0,0),f.emplaceBack(c.W,0,c.W,0),f.emplaceBack(0,c.W,0,c.W),f.emplaceBack(c.W,c.W,c.W,c.W),this.rasterBoundsBuffer=n.createVertexBuffer(f,Vt.members),this.rasterBoundsSegments=c.$.simpleSegment(0,0,4,2);const y=new c.aW;y.emplaceBack(0,0),y.emplaceBack(1,0),y.emplaceBack(0,1),y.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(y,Wi.members),this.viewportSegments=c.$.simpleSegment(0,0,4,2);const b=new c.aX;b.emplaceBack(0),b.emplaceBack(1),b.emplaceBack(3),b.emplaceBack(2),b.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(b);const T=new c.aY;T.emplaceBack(0,1,2),T.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(T);const k=this.context.gl;this.stencilClearMode=new gr({func:k.ALWAYS,mask:0},0,255,k.ZERO,k.ZERO,k.ZERO)}clearStencil(){const n=this.context,s=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=c.F();c.aO(d,0,this.width,this.height,0,0,1),c.J(d,d,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,s.TRIANGLES,Mt.disabled,this.stencilClearMode,Tr.disabled,fr.disabled,td(d),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,s){if(this.currentStencilSource===n.source||!n.isTileClipped()||!s||!s.length)return;this.currentStencilSource=n.source;const d=this.context,f=d.gl;this.nextStencilID+s.length>256&&this.clearStencil(),d.setColorMode(Tr.disabled),d.setDepthMode(Mt.disabled);const y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const b of s){const T=this._tileClippingMaskIDs[b.key]=this.nextStencilID++,k=this.style.map.terrain&&this.style.map.terrain.getTerrainData(b);y.draw(d,f.TRIANGLES,Mt.disabled,new gr({func:f.ALWAYS,mask:0},T,255,f.KEEP,f.KEEP,f.REPLACE),Tr.disabled,fr.disabled,td(b.posMatrix),k,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,s=this.context.gl;return new gr({func:s.NOTEQUAL,mask:255},n,255,s.KEEP,s.KEEP,s.REPLACE)}stencilModeForClipping(n){const s=this.context.gl;return new gr({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,s.KEEP,s.KEEP,s.REPLACE)}stencilConfigForOverlap(n){const s=this.context.gl,d=n.sort((b,T)=>T.overscaledZ-b.overscaledZ),f=d[d.length-1].overscaledZ,y=d[0].overscaledZ-f+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();const b={};for(let T=0;T<y;T++)b[T+f]=new gr({func:s.GEQUAL,mask:255},T+this.nextStencilID,255,s.KEEP,s.KEEP,s.REPLACE);return this.nextStencilID+=y,[b,d]}return[{[f]:gr.disabled},d]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new Tr([n.CONSTANT_COLOR,n.ONE],new c.aP(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Tr.unblended:Tr.alphaBlended}depthModeForSublayer(n,s,d){if(!this.opaquePassEnabledForLayer())return Mt.disabled;const f=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new Mt(d||this.context.gl.LEQUAL,s,[f,f])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,s){this.style=n,this.options=s,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(D.now()),this.imageManager.beginFrame();const d=this.style._order,f=this.style.sourceCaches,y={},b={},T={};for(const k in f){const P=f[k];P.used&&P.prepare(this.context),y[k]=P.getVisibleCoordinates(),b[k]=y[k].slice().reverse(),T[k]=P.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let k=0;k<d.length;k++)if(this.style._layers[d[k]].is3D()){this.opaquePassCutoff=k;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const k of d){const P=this.style._layers[k];if(!P.hasOffscreenPass()||P.isHidden(this.transform.zoom))continue;const z=b[P.source];(P.type==="custom"||z.length)&&this.renderLayer(this,f[P.source],P,z)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?c.aP.black:c.aP.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){const k=this.style._layers[d[this.currentLayer]],P=f[k.source],z=y[k.source];this._renderTileClippingMasks(k,z),this.renderLayer(this,P,k,z)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){const k=this.style._layers[d[this.currentLayer]],P=f[k.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(k))continue;const z=(k.type==="symbol"?T:b)[k.source];this._renderTileClippingMasks(k,y[k.source]),this.renderLayer(this,P,k,z)}if(this.options.showTileBoundaries){const k=function(P,z){let M=null;const U=Object.values(P._layers).flatMap(K=>K.source&&!K.isHidden(z)?[P.sourceCaches[K.source]]:[]),$=U.filter(K=>K.getSource().type==="vector"),G=U.filter(K=>K.getSource().type!=="vector"),Q=K=>{(!M||M.getSource().maxzoom<K.getSource().maxzoom)&&(M=K)};return $.forEach(K=>Q(K)),M||G.forEach(K=>Q(K)),M}(this.style,this.transform.zoom);k&&function(P,z,M){for(let U=0;U<M.length;U++)xd(P,z,M[U])}(this,k,k.getVisibleCoordinates())}this.options.showPadding&&function(k){const P=k.transform.padding;cc(k,k.transform.height-(P.top||0),3,Xo),cc(k,P.bottom||0,3,xl),Yo(k,P.left||0,3,wl),Yo(k,k.transform.width-(P.right||0),3,Es);const z=k.transform.centerPoint;(function(M,U,$,G){co(M,U-1,$-10,2,20,G),co(M,U-10,$-1,20,2,G)})(k,z.x,k.transform.height-z.y,bl)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(n){if(!this.style||!this.style.map||!this.style.map.terrain)return;const s=this.terrainFacilitator.matrix,d=this.transform.modelViewProjectionMatrix;let f=this.terrainFacilitator.dirty;f||(f=n?!c.aZ(s,d):!c.a_(s,d)),f||(f=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),f&&(c.a$(s,d),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(y,b){const T=y.context,k=T.gl,P=Tr.unblended,z=new Mt(k.LEQUAL,Mt.ReadWrite,[0,1]),M=b.getTerrainMesh(),U=b.sourceCache.getRenderableTiles(),$=y.useProgram("terrainDepth");T.bindFramebuffer.set(b.getFramebuffer("depth").framebuffer),T.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),T.clear({color:c.aP.transparent,depth:1});for(const G of U){const Q=b.getTerrainData(G.tileID),K={u_matrix:y.transform.calculatePosMatrix(G.tileID.toUnwrapped()),u_ele_delta:b.getMeshFrameDelta(y.transform.zoom)};$.draw(T,k.TRIANGLES,z,gr.disabled,P,fr.backCCW,K,Q,"terrain",M.vertexBuffer,M.indexBuffer,M.segments)}T.bindFramebuffer.set(null),T.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain),function(y,b){const T=y.context,k=T.gl,P=Tr.unblended,z=new Mt(k.LEQUAL,Mt.ReadWrite,[0,1]),M=b.getTerrainMesh(),U=b.getCoordsTexture(),$=b.sourceCache.getRenderableTiles(),G=y.useProgram("terrainCoords");T.bindFramebuffer.set(b.getFramebuffer("coords").framebuffer),T.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),T.clear({color:c.aP.transparent,depth:1}),b.coordsIndex=[];for(const Q of $){const K=b.getTerrainData(Q.tileID);T.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,U.texture);const ne={u_matrix:y.transform.calculatePosMatrix(Q.tileID.toUnwrapped()),u_terrain_coords_id:(255-b.coordsIndex.length)/255,u_texture:0,u_ele_delta:b.getMeshFrameDelta(y.transform.zoom)};G.draw(T,k.TRIANGLES,z,gr.disabled,P,fr.backCCW,ne,K,"terrain",M.vertexBuffer,M.indexBuffer,M.segments),b.coordsIndex.push(Q.tileID.key)}T.bindFramebuffer.set(null),T.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain))}renderLayer(n,s,d,f){if(!d.isHidden(this.transform.zoom)&&(d.type==="background"||d.type==="custom"||(f||[]).length))switch(this.id=d.id,d.type){case"symbol":(function(y,b,T,k,P){if(y.renderPass!=="translucent")return;const z=gr.disabled,M=y.colorModeForRenderPass();(T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(U,$,G,Q,K,ne,se,J,ce){const me=$.transform,ve=Dn(),Pe=K==="map",De=ne==="map";for(const Xe of U){const Je=Q.getTile(Xe),Oe=Je.getBucket(G);if(!Oe||!Oe.text||!Oe.text.segments.get().length)continue;const je=c.ag(Oe.textSizeData,me.zoom),nt=wt(Je,1,$.transform.zoom),bt=ki(Xe.posMatrix,De,Pe,$.transform,nt),Ve=G.layout.get("icon-text-fit")!=="none"&&Oe.hasIconData();if(je){const qe=Math.pow(2,me.zoom-Je.tileID.overscaledZ),_t=$.style.map.terrain?(At,Lt)=>$.style.map.terrain.getElevation(Xe,At,Lt):null,lr=ve.translatePosition(me,Je,se,J);yl(Oe,Pe,De,ce,me,bt,Xe.posMatrix,qe,je,Ve,ve,lr,Xe.toUnwrapped(),_t)}}}(k,y,T,b,T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),P),T.paint.get("icon-opacity").constantOr(1)!==0&&ks(y,b,T,k,!1,T.paint.get("icon-translate"),T.paint.get("icon-translate-anchor"),T.layout.get("icon-rotation-alignment"),T.layout.get("icon-pitch-alignment"),T.layout.get("icon-keep-upright"),z,M),T.paint.get("text-opacity").constantOr(1)!==0&&ks(y,b,T,k,!0,T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.layout.get("text-keep-upright"),z,M),b.map.showCollisionBoxes&&(gd(y,b,T,k,!0),gd(y,b,T,k,!1))})(n,s,d,f,this.style.placement.variableOffsets);break;case"circle":(function(y,b,T,k){if(y.renderPass!=="translucent")return;const P=T.paint.get("circle-opacity"),z=T.paint.get("circle-stroke-width"),M=T.paint.get("circle-stroke-opacity"),U=!T.layout.get("circle-sort-key").isConstant();if(P.constantOr(1)===0&&(z.constantOr(1)===0||M.constantOr(1)===0))return;const $=y.context,G=$.gl,Q=y.depthModeForSublayer(0,Mt.ReadOnly),K=gr.disabled,ne=y.colorModeForRenderPass(),se=[];for(let J=0;J<k.length;J++){const ce=k[J],me=b.getTile(ce),ve=me.getBucket(T);if(!ve)continue;const Pe=ve.programConfigurations.get(T.id),De=y.useProgram("circle",Pe),Xe=ve.layoutVertexBuffer,Je=ve.indexBuffer,Oe=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ce),je={programConfiguration:Pe,program:De,layoutVertexBuffer:Xe,indexBuffer:Je,uniformValues:lm(y,ce,me,T),terrainData:Oe};if(U){const nt=ve.segments.get();for(const bt of nt)se.push({segments:new c.$([bt]),sortKey:bt.sortKey,state:je})}else se.push({segments:ve.segments,sortKey:0,state:je})}U&&se.sort((J,ce)=>J.sortKey-ce.sortKey);for(const J of se){const{programConfiguration:ce,program:me,layoutVertexBuffer:ve,indexBuffer:Pe,uniformValues:De,terrainData:Xe}=J.state;me.draw($,G.TRIANGLES,Q,K,ne,fr.disabled,De,Xe,T.id,ve,Pe,J.segments,T.paint,y.transform.zoom,ce)}})(n,s,d,f);break;case"heatmap":(function(y,b,T,k){if(T.paint.get("heatmap-opacity")!==0)if(y.renderPass==="offscreen"){const P=y.context,z=P.gl,M=gr.disabled,U=new Tr([z.ONE,z.ONE],c.aP.transparent,[!0,!0,!0,!0]);(function($,G,Q){const K=$.gl;$.activeTexture.set(K.TEXTURE1),$.viewport.set([0,0,G.width/4,G.height/4]);let ne=Q.heatmapFbo;if(ne)K.bindTexture(K.TEXTURE_2D,ne.colorAttachment.get()),$.bindFramebuffer.set(ne.framebuffer);else{const se=K.createTexture();K.bindTexture(K.TEXTURE_2D,se),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_S,K.CLAMP_TO_EDGE),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_T,K.CLAMP_TO_EDGE),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MIN_FILTER,K.LINEAR),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MAG_FILTER,K.LINEAR),ne=Q.heatmapFbo=$.createFramebuffer(G.width/4,G.height/4,!1,!1),function(J,ce,me,ve){var Pe,De;const Xe=J.gl,Je=(Pe=J.HALF_FLOAT)!==null&&Pe!==void 0?Pe:Xe.UNSIGNED_BYTE,Oe=(De=J.RGBA16F)!==null&&De!==void 0?De:Xe.RGBA;Xe.texImage2D(Xe.TEXTURE_2D,0,Oe,ce.width/4,ce.height/4,0,Xe.RGBA,Je,null),ve.colorAttachment.set(me)}($,G,se,ne)}})(P,y,T),P.clear({color:c.aP.transparent});for(let $=0;$<k.length;$++){const G=k[$];if(b.hasRenderableParent(G))continue;const Q=b.getTile(G),K=Q.getBucket(T);if(!K)continue;const ne=K.programConfigurations.get(T.id),se=y.useProgram("heatmap",ne),{zoom:J}=y.transform;se.draw(P,z.TRIANGLES,Mt.disabled,M,U,fr.disabled,Zo(G.posMatrix,Q,J,T.paint.get("heatmap-intensity")),null,T.id,K.layoutVertexBuffer,K.indexBuffer,K.segments,T.paint,y.transform.zoom,ne)}P.viewport.set([0,0,y.width,y.height])}else y.renderPass==="translucent"&&(y.context.setColorMode(y.colorModeForRenderPass()),function(P,z){const M=P.context,U=M.gl,$=z.heatmapFbo;if(!$)return;M.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,$.colorAttachment.get()),M.activeTexture.set(U.TEXTURE1);let G=z.colorRampTexture;G||(G=z.colorRampTexture=new $e(M,z.colorRamp,U.RGBA)),G.bind(U.LINEAR,U.CLAMP_TO_EDGE),P.useProgram("heatmapTexture").draw(M,U.TRIANGLES,Mt.disabled,gr.disabled,P.colorModeForRenderPass(),fr.disabled,((Q,K,ne,se)=>{const J=c.F();c.aO(J,0,Q.width,Q.height,0,0,1);const ce=Q.context.gl;return{u_matrix:J,u_world:[ce.drawingBufferWidth,ce.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:K.paint.get("heatmap-opacity")}})(P,z),null,z.id,P.viewportBuffer,P.quadTriangleIndexBuffer,P.viewportSegments,z.paint,P.transform.zoom)}(y,T))})(n,s,d,f);break;case"line":(function(y,b,T,k){if(y.renderPass!=="translucent")return;const P=T.paint.get("line-opacity"),z=T.paint.get("line-width");if(P.constantOr(1)===0||z.constantOr(1)===0)return;const M=y.depthModeForSublayer(0,Mt.ReadOnly),U=y.colorModeForRenderPass(),$=T.paint.get("line-dasharray"),G=T.paint.get("line-pattern"),Q=G.constantOr(1),K=T.paint.get("line-gradient"),ne=T.getCrossfadeParameters(),se=Q?"linePattern":$?"lineSDF":K?"lineGradient":"line",J=y.context,ce=J.gl;let me=!0;for(const ve of k){const Pe=b.getTile(ve);if(Q&&!Pe.patternsLoaded())continue;const De=Pe.getBucket(T);if(!De)continue;const Xe=De.programConfigurations.get(T.id),Je=y.context.program.get(),Oe=y.useProgram(se,Xe),je=me||Oe.program!==Je,nt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ve),bt=G.constantOr(null);if(bt&&Pe.imageAtlas){const _t=Pe.imageAtlas,lr=_t.patternPositions[bt.to.toString()],At=_t.patternPositions[bt.from.toString()];lr&&At&&Xe.setConstantPatternPositions(lr,At)}const Ve=nt?ve:null,qe=Q?Xu(y,Pe,T,ne,Ve):$?hl(y,Pe,T,$,ne,Ve):K?Xn(y,Pe,T,De.lineClipsArray.length,Ve):Sn(y,Pe,T,Ve);if(Q)J.activeTexture.set(ce.TEXTURE0),Pe.imageAtlasTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),Xe.updatePaintBuffers(ne);else if($&&(je||y.lineAtlas.dirty))J.activeTexture.set(ce.TEXTURE0),y.lineAtlas.bind(J);else if(K){const _t=De.gradients[T.id];let lr=_t.texture;if(T.gradientVersion!==_t.version){let At=256;if(T.stepInterpolant){const Lt=b.getSource().maxzoom,ur=ve.canonical.z===Lt?Math.ceil(1<<y.transform.maxZoom-ve.canonical.z):1;At=c.ac(c.aU(De.maxLineLength/c.W*1024*ur),256,J.maxTextureSize)}_t.gradient=c.aV({expression:T.gradientExpression(),evaluationKey:"lineProgress",resolution:At,image:_t.gradient||void 0,clips:De.lineClipsArray}),_t.texture?_t.texture.update(_t.gradient):_t.texture=new $e(J,_t.gradient,ce.RGBA),_t.version=T.gradientVersion,lr=_t.texture}J.activeTexture.set(ce.TEXTURE0),lr.bind(T.stepInterpolant?ce.NEAREST:ce.LINEAR,ce.CLAMP_TO_EDGE)}Oe.draw(J,ce.TRIANGLES,M,y.stencilModeForClipping(ve),U,fr.disabled,qe,nt,T.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,T.paint,y.transform.zoom,Xe,De.layoutVertexBuffer2),me=!1}})(n,s,d,f);break;case"fill":(function(y,b,T,k){const P=T.paint.get("fill-color"),z=T.paint.get("fill-opacity");if(z.constantOr(1)===0)return;const M=y.colorModeForRenderPass(),U=T.paint.get("fill-pattern"),$=y.opaquePassEnabledForLayer()&&!U.constantOr(1)&&P.constantOr(c.aP.transparent).a===1&&z.constantOr(0)===1?"opaque":"translucent";if(y.renderPass===$){const G=y.depthModeForSublayer(1,y.renderPass==="opaque"?Mt.ReadWrite:Mt.ReadOnly);Ko(y,b,T,k,G,M,!1)}if(y.renderPass==="translucent"&&T.paint.get("fill-antialias")){const G=y.depthModeForSublayer(T.getPaintProperty("fill-outline-color")?2:0,Mt.ReadOnly);Ko(y,b,T,k,G,M,!0)}})(n,s,d,f);break;case"fill-extrusion":(function(y,b,T,k){const P=T.paint.get("fill-extrusion-opacity");if(P!==0&&y.renderPass==="translucent"){const z=new Mt(y.context.gl.LEQUAL,Mt.ReadWrite,y.depthRangeFor3D);if(P!==1||T.paint.get("fill-extrusion-pattern").constantOr(1))On(y,b,T,k,z,gr.disabled,Tr.disabled),On(y,b,T,k,z,y.stencilModeFor3D(),y.colorModeForRenderPass());else{const M=y.colorModeForRenderPass();On(y,b,T,k,z,gr.disabled,M)}}})(n,s,d,f);break;case"hillshade":(function(y,b,T,k){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent")return;const P=y.context,z=y.depthModeForSublayer(0,Mt.ReadOnly),M=y.colorModeForRenderPass(),[U,$]=y.renderPass==="translucent"?y.stencilConfigForOverlap(k):[{},k];for(const G of $){const Q=b.getTile(G);Q.needsHillshadePrepare!==void 0&&Q.needsHillshadePrepare&&y.renderPass==="offscreen"?vd(y,Q,T,z,gr.disabled,M):y.renderPass==="translucent"&&_d(y,G,Q,T,z,U[G.overscaledZ],M)}P.viewport.set([0,0,y.width,y.height])})(n,s,d,f);break;case"raster":(function(y,b,T,k){if(y.renderPass!=="translucent"||T.paint.get("raster-opacity")===0||!k.length)return;const P=y.context,z=P.gl,M=b.getSource(),U=y.useProgram("raster"),$=y.colorModeForRenderPass(),[G,Q]=M instanceof ui?[{},k]:y.stencilConfigForOverlap(k),K=Q[Q.length-1].overscaledZ,ne=!y.options.moving;for(const se of Q){const J=y.depthModeForSublayer(se.overscaledZ-K,T.paint.get("raster-opacity")===1?Mt.ReadWrite:Mt.ReadOnly,z.LESS),ce=b.getTile(se);ce.registerFadeDuration(T.paint.get("raster-fade-duration"));const me=b.findLoadedParent(se,0),ve=b.findLoadedSibling(se),Pe=uc(ce,me||ve||null,b,T,y.transform,y.style.map.terrain);let De,Xe;const Je=T.paint.get("raster-resampling")==="nearest"?z.NEAREST:z.LINEAR;P.activeTexture.set(z.TEXTURE0),ce.texture.bind(Je,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),P.activeTexture.set(z.TEXTURE1),me?(me.texture.bind(Je,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),De=Math.pow(2,me.tileID.overscaledZ-ce.tileID.overscaledZ),Xe=[ce.tileID.canonical.x*De%1,ce.tileID.canonical.y*De%1]):ce.texture.bind(Je,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST);const Oe=y.style.map.terrain&&y.style.map.terrain.getTerrainData(se),je=Oe?se:null,nt=je?je.posMatrix:y.transform.calculatePosMatrix(se.toUnwrapped(),ne),bt=ba(nt,Xe||[0,0],De||1,Pe,T);M instanceof ui?U.draw(P,z.TRIANGLES,J,gr.disabled,$,fr.disabled,bt,Oe,T.id,M.boundsBuffer,y.quadTriangleIndexBuffer,M.boundsSegments):U.draw(P,z.TRIANGLES,J,G[se.overscaledZ],$,fr.disabled,bt,Oe,T.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}})(n,s,d,f);break;case"background":(function(y,b,T,k){const P=T.paint.get("background-color"),z=T.paint.get("background-opacity");if(z===0)return;const M=y.context,U=M.gl,$=y.transform,G=$.tileSize,Q=T.paint.get("background-pattern");if(y.isPatternMissing(Q))return;const K=!Q&&P.a===1&&z===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==K)return;const ne=gr.disabled,se=y.depthModeForSublayer(0,K==="opaque"?Mt.ReadWrite:Mt.ReadOnly),J=y.colorModeForRenderPass(),ce=y.useProgram(Q?"backgroundPattern":"background"),me=k||$.coveringTiles({tileSize:G,terrain:y.style.map.terrain});Q&&(M.activeTexture.set(U.TEXTURE0),y.imageManager.bind(y.context));const ve=T.getCrossfadeParameters();for(const Pe of me){const De=k?Pe.posMatrix:y.transform.calculatePosMatrix(Pe.toUnwrapped()),Xe=Q?pm(De,z,y,Q,{tileID:Pe,tileSize:G},ve):dm(De,z,P),Je=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Pe);ce.draw(M,U.TRIANGLES,se,ne,J,fr.disabled,Xe,Je,T.id,y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}})(n,0,d,f);break;case"custom":(function(y,b,T){const k=y.context,P=T.implementation;if(y.renderPass==="offscreen"){const z=P.prerender;z&&(y.setCustomLayerDefaults(),k.setColorMode(y.colorModeForRenderPass()),z.call(P,k.gl,y.transform.customLayerMatrix()),k.setDirty(),y.setBaseState())}else if(y.renderPass==="translucent"){y.setCustomLayerDefaults(),k.setColorMode(y.colorModeForRenderPass()),k.setStencilMode(gr.disabled);const z=P.renderingMode==="3d"?new Mt(y.context.gl.LEQUAL,Mt.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,Mt.ReadOnly);k.setDepthMode(z),P.render(k.gl,y.transform.customLayerMatrix()),k.setDirty(),y.setBaseState(),k.bindFramebuffer.set(null)}})(n,0,d)}}translatePosMatrix(n,s,d,f,y){if(!d[0]&&!d[1])return n;const b=y?f==="map"?this.transform.angle:0:f==="viewport"?-this.transform.angle:0;if(b){const P=Math.sin(b),z=Math.cos(b);d=[d[0]*z-d[1]*P,d[0]*P+d[1]*z]}const T=[y?d[0]:wt(s,d[0],this.transform.zoom),y?d[1]:wt(s,d[1],this.transform.zoom),0],k=new Float32Array(16);return c.H(k,n,T),k}saveTileTexture(n){const s=this._tileTextures[n.size[0]];s?s.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const s=this._tileTextures[n];return s&&s.length>0?s.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const s=this.imageManager.getPattern(n.from.toString()),d=this.imageManager.getPattern(n.to.toString());return!s||!d}useProgram(n,s){this.cache=this.cache||{};const d=n+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[d]||(this.cache[d]=new Zu(this.context,xa[n],s,dl[n],this._showOverdrawInspector,this.style.map.terrain)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new $e(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:n,drawingBufferHeight:s}=this.context.gl;return this.width!==n||this.height!==s}}class ka{constructor(n,s){this.points=n,this.planes=s}static fromInvProjectionMatrix(n,s,d){const f=Math.pow(2,d),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(T=>{const k=1/(T=c.af([],T,n))[3]/s*f;return c.b0(T,T,[k,k,1/T[3],k])}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(T=>{const k=function(U,$){var G=$[0],Q=$[1],K=$[2],ne=G*G+Q*Q+K*K;return ne>0&&(ne=1/Math.sqrt(ne)),U[0]=$[0]*ne,U[1]=$[1]*ne,U[2]=$[2]*ne,U}([],function(U,$,G){var Q=$[0],K=$[1],ne=$[2],se=G[0],J=G[1],ce=G[2];return U[0]=K*ce-ne*J,U[1]=ne*se-Q*ce,U[2]=Q*J-K*se,U}([],Le([],y[T[0]],y[T[1]]),Le([],y[T[2]],y[T[1]]))),P=-((z=k)[0]*(M=y[T[1]])[0]+z[1]*M[1]+z[2]*M[2]);var z,M;return k.concat(P)});return new ka(y,b)}}class Tl{constructor(n,s){this.min=n,this.max=s,this.center=function(d,f,y){return d[0]=.5*f[0],d[1]=.5*f[1],d[2]=.5*f[2],d}([],function(d,f,y){return d[0]=f[0]+y[0],d[1]=f[1]+y[1],d[2]=f[2]+y[2],d}([],this.min,this.max))}quadrant(n){const s=[n%2==0,n<2],d=Ce(this.min),f=Ce(this.max);for(let y=0;y<s.length;y++)d[y]=s[y]?this.min[y]:this.center[y],f[y]=s[y]?this.center[y]:this.max[y];return f[2]=this.max[2],new Tl(d,f)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersects(n){const s=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let d=!0;for(let f=0;f<n.planes.length;f++){const y=n.planes[f];let b=0;for(let T=0;T<s.length;T++)c.b1(y,s[T])>=0&&b++;if(b===0)return 0;b!==s.length&&(d=!1)}if(d)return 2;for(let f=0;f<3;f++){let y=Number.MAX_VALUE,b=-Number.MAX_VALUE;for(let T=0;T<n.points.length;T++){const k=n.points[T][f]-this.min[f];y=Math.min(y,k),b=Math.max(b,k)}if(b<0||y>this.max[f]-this.min[f])return 0}return 1}}class Cs{constructor(n=0,s=0,d=0,f=0){if(isNaN(n)||n<0||isNaN(s)||s<0||isNaN(d)||d<0||isNaN(f)||f<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=s,this.left=d,this.right=f}interpolate(n,s,d){return s.top!=null&&n.top!=null&&(this.top=c.z.number(n.top,s.top,d)),s.bottom!=null&&n.bottom!=null&&(this.bottom=c.z.number(n.bottom,s.bottom,d)),s.left!=null&&n.left!=null&&(this.left=c.z.number(n.left,s.left,d)),s.right!=null&&n.right!=null&&(this.right=c.z.number(n.right,s.right,d)),this}getCenter(n,s){const d=c.ac((this.left+n-this.right)/2,0,n),f=c.ac((this.top+s-this.bottom)/2,0,s);return new c.P(d,f)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new Cs(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Ea=85.051129;class hc{constructor(n,s,d,f,y){this.tileSize=512,this._renderWorldCopies=y===void 0||!!y,this._minZoom=n||0,this._maxZoom=s||22,this._minPitch=d??0,this._maxPitch=f??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new c.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Cs,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const n=new hc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.apply(this),n}apply(n){this.tileSize=n.tileSize,this.latRange=n.latRange,this.width=n.width,this.height=n.height,this._center=n._center,this._elevation=n._elevation,this.minElevationForCurrentTile=n.minElevationForCurrentTile,this.zoom=n.zoom,this.angle=n.angle,this._fov=n._fov,this._pitch=n._pitch,this._unmodified=n._unmodified,this._edgeInsets=n._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))}get maxZoom(){return this._maxZoom}set maxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))}get minPitch(){return this._minPitch}set minPitch(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))}get maxPitch(){return this._maxPitch}set maxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(n){const s=-c.b2(n,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=function(){var d=new c.A(4);return c.A!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}(),function(d,f,y){var b=f[0],T=f[1],k=f[2],P=f[3],z=Math.sin(y),M=Math.cos(y);d[0]=b*M+k*z,d[1]=T*M+P*z,d[2]=b*-z+k*M,d[3]=T*-z+P*M}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(n){const s=c.ac(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(n){const s=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.tileZoom=Math.max(0,Math.floor(s)),this.scale=this.zoomScale(s),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(n){n!==this._elevation&&(this._elevation=n,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,s,d){this._unmodified=!1,this._edgeInsets.interpolate(n,s,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(n){const s=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,s)}getVisibleUnwrappedCoordinates(n){const s=[new c.b3(0,n)];if(this._renderWorldCopies){const d=this.pointCoordinate(new c.P(0,0)),f=this.pointCoordinate(new c.P(this.width,0)),y=this.pointCoordinate(new c.P(this.width,this.height)),b=this.pointCoordinate(new c.P(0,this.height)),T=Math.floor(Math.min(d.x,f.x,y.x,b.x)),k=Math.floor(Math.max(d.x,f.x,y.x,b.x)),P=1;for(let z=T-P;z<=k+P;z++)z!==0&&s.push(new c.b3(z,n))}return s}coveringTiles(n){var s,d;let f=this.coveringZoomLevel(n);const y=f;if(n.minzoom!==void 0&&f<n.minzoom)return[];n.maxzoom!==void 0&&f>n.maxzoom&&(f=n.maxzoom);const b=this.pointCoordinate(this.getCameraPoint()),T=c.Y.fromLngLat(this.center),k=Math.pow(2,f),P=[k*b.x,k*b.y,0],z=[k*T.x,k*T.y,0],M=ka.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,f);let U=n.minzoom||0;!n.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(U=f);const $=n.terrain?2/Math.min(this.tileSize,n.tileSize)*this.tileSize:3,G=J=>({aabb:new Tl([J*k,0,0],[(J+1)*k,k,0]),zoom:0,x:0,y:0,wrap:J,fullyVisible:!1}),Q=[],K=[],ne=f,se=n.reparseOverscaled?y:f;if(this._renderWorldCopies)for(let J=1;J<=3;J++)Q.push(G(-J)),Q.push(G(J));for(Q.push(G(0));Q.length>0;){const J=Q.pop(),ce=J.x,me=J.y;let ve=J.fullyVisible;if(!ve){const Oe=J.aabb.intersects(M);if(Oe===0)continue;ve=Oe===2}const Pe=n.terrain?P:z,De=J.aabb.distanceX(Pe),Xe=J.aabb.distanceY(Pe),Je=Math.max(Math.abs(De),Math.abs(Xe));if(J.zoom===ne||Je>$+(1<<ne-J.zoom)-2&&J.zoom>=U){const Oe=ne-J.zoom,je=P[0]-.5-(ce<<Oe),nt=P[1]-.5-(me<<Oe);K.push({tileID:new c.Q(J.zoom===ne?se:J.zoom,J.wrap,J.zoom,ce,me),distanceSq:Ge([z[0]-.5-ce,z[1]-.5-me]),tileDistanceToCamera:Math.sqrt(je*je+nt*nt)})}else for(let Oe=0;Oe<4;Oe++){const je=(ce<<1)+Oe%2,nt=(me<<1)+(Oe>>1),bt=J.zoom+1;let Ve=J.aabb.quadrant(Oe);if(n.terrain){const qe=new c.Q(bt,J.wrap,bt,je,nt),_t=n.terrain.getMinMaxElevation(qe),lr=(s=_t.minElevation)!==null&&s!==void 0?s:this.elevation,At=(d=_t.maxElevation)!==null&&d!==void 0?d:this.elevation;Ve=new Tl([Ve.min[0],Ve.min[1],lr],[Ve.max[0],Ve.max[1],At])}Q.push({aabb:Ve,zoom:bt,x:je,y:nt,wrap:J.wrap,fullyVisible:ve})}}return K.sort((J,ce)=>J.distanceSq-ce.distanceSq).map(J=>J.tileID)}resize(n,s){this.width=n,this.height=s,this.pixelsToGLUnits=[2/n,-2/s],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(n){return Math.pow(2,n)}scaleZoom(n){return Math.log(n)/Math.LN2}project(n){const s=c.ac(n.lat,-85.051129,Ea);return new c.P(c.N(n.lng)*this.worldSize,c.O(s)*this.worldSize)}unproject(n){return new c.Y(n.x/this.worldSize,n.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(n){const s=this.elevation,d=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,f=this.pointLocation(this.centerPoint,n),y=n.getElevationForLngLatZoom(f,this.tileZoom);if(!(this.elevation-y))return;const b=d+s-y,T=Math.cos(this._pitch)*this.cameraToCenterDistance/b/c.b4(1,f.lat),k=this.scaleZoom(T/this.tileSize);this._elevation=y,this._center=f,this.zoom=k}setLocationAtPoint(n,s){const d=this.pointCoordinate(s),f=this.pointCoordinate(this.centerPoint),y=this.locationCoordinate(n),b=new c.Y(y.x-(d.x-f.x),y.y-(d.y-f.y));this.center=this.coordinateLocation(b),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(n,s){return s?this.coordinatePoint(this.locationCoordinate(n),s.getElevationForLngLatZoom(n,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(n))}pointLocation(n,s){return this.coordinateLocation(this.pointCoordinate(n,s))}locationCoordinate(n){return c.Y.fromLngLat(n)}coordinateLocation(n){return n&&n.toLngLat()}pointCoordinate(n,s){if(s){const U=s.pointCoordinate(n);if(U!=null)return U}const d=[n.x,n.y,0,1],f=[n.x,n.y,1,1];c.af(d,d,this.pixelMatrixInverse),c.af(f,f,this.pixelMatrixInverse);const y=d[3],b=f[3],T=d[1]/y,k=f[1]/b,P=d[2]/y,z=f[2]/b,M=P===z?0:(0-P)/(z-P);return new c.Y(c.z.number(d[0]/y,f[0]/b,M)/this.worldSize,c.z.number(T,k,M)/this.worldSize)}coordinatePoint(n,s=0,d=this.pixelMatrix){const f=[n.x*this.worldSize,n.y*this.worldSize,s,1];return c.af(f,f,d),new c.P(f[0]/f[3],f[1]/f[3])}getBounds(){const n=Math.max(0,this.height/2-this.getHorizon());return new pr().extend(this.pointLocation(new c.P(0,n))).extend(this.pointLocation(new c.P(this.width,n))).extend(this.pointLocation(new c.P(this.width,this.height))).extend(this.pointLocation(new c.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new pr([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Ea])}calculatePosMatrix(n,s=!1){const d=n.key,f=s?this._alignedPosMatrixCache:this._posMatrixCache;if(f[d])return f[d];const y=n.canonical,b=this.worldSize/this.zoomScale(y.z),T=y.x+Math.pow(2,y.z)*n.wrap,k=c.an(new Float64Array(16));return c.H(k,k,[T*b,y.y*b,0]),c.J(k,k,[b/c.W,b/c.W,1]),c.K(k,s?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,k),f[d]=new Float32Array(k),f[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(n,s){s=c.ac(+s,this.minZoom,this.maxZoom);const d={center:new c.M(n.lng,n.lat),zoom:s};let f=this.lngRange;if(!this._renderWorldCopies&&f===null){const J=179.9999999999;f=[-J,J]}const y=this.tileSize*this.zoomScale(d.zoom);let b=0,T=y,k=0,P=y,z=0,M=0;const{x:U,y:$}=this.size;if(this.latRange){const J=this.latRange;b=c.O(J[1])*y,T=c.O(J[0])*y,T-b<$&&(z=$/(T-b))}f&&(k=c.b2(c.N(f[0])*y,0,y),P=c.b2(c.N(f[1])*y,0,y),P<k&&(P+=y),P-k<U&&(M=U/(P-k)));const{x:G,y:Q}=this.project.call({worldSize:y},n);let K,ne;const se=Math.max(M||0,z||0);if(se){const J=new c.P(M?(P+k)/2:G,z?(T+b)/2:Q);return d.center=this.unproject.call({worldSize:y},J).wrap(),d.zoom+=this.scaleZoom(se),d}if(this.latRange){const J=$/2;Q-J<b&&(ne=b+J),Q+J>T&&(ne=T-J)}if(f){const J=(k+P)/2;let ce=G;this._renderWorldCopies&&(ce=c.b2(G,J-y/2,J+y/2));const me=U/2;ce-me<k&&(K=k+me),ce+me>P&&(K=P-me)}if(K!==void 0||ne!==void 0){const J=new c.P(K??G,ne??Q);d.center=this.unproject.call({worldSize:y},J).wrap()}return d}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const n=this._unmodified,{center:s,zoom:d}=this.getConstrained(this.center,this.zoom);this.center=s,this.zoom=d,this._unmodified=n,this._constraining=!1}_calcMatrices(){if(!this.height)return;const n=this.centerOffset,s=this.point.x,d=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=c.b4(1,this.center.lat)*this.worldSize;let f=c.an(new Float64Array(16));c.J(f,f,[this.width/2,-this.height/2,1]),c.H(f,f,[1,-1,0]),this.labelPlaneMatrix=f,f=c.an(new Float64Array(16)),c.J(f,f,[1,-1,1]),c.H(f,f,[-1,-1,0]),c.J(f,f,[2/this.width,2/this.height,1]),this.glCoordMatrix=f;const y=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),b=Math.min(this.elevation,this.minElevationForCurrentTile),T=y-b*this._pixelPerMeter/Math.cos(this._pitch),k=b<0?T:y,P=Math.PI/2+this._pitch,z=this._fov*(.5+n.y/this.height),M=Math.sin(z)*k/Math.sin(c.ac(Math.PI-P-z,.01,Math.PI-.01)),U=this.getHorizon(),$=2*Math.atan(U/this.cameraToCenterDistance)*(.5+n.y/(2*U)),G=Math.sin($)*k/Math.sin(c.ac(Math.PI-P-$,.01,Math.PI-.01)),Q=Math.min(M,G),K=1.01*(Math.cos(Math.PI/2-this._pitch)*Q+k),ne=this.height/50;f=new Float64Array(16),c.b5(f,this._fov,this.width/this.height,ne,K),f[8]=2*-n.x/this.width,f[9]=2*n.y/this.height,c.J(f,f,[1,-1,1]),c.H(f,f,[0,0,-this.cameraToCenterDistance]),c.b6(f,f,this._pitch),c.ad(f,f,this.angle),c.H(f,f,[-s,-d,0]),this.mercatorMatrix=c.J([],f,[this.worldSize,this.worldSize,this.worldSize]),c.J(f,f,[1,1,this._pixelPerMeter]),this.pixelMatrix=c.K(new Float64Array(16),this.labelPlaneMatrix,f),c.H(f,f,[0,0,-this.elevation]),this.modelViewProjectionMatrix=f,this.invModelViewProjectionMatrix=c.as([],f),this.pixelMatrix3D=c.K(new Float64Array(16),this.labelPlaneMatrix,f);const se=this.width%2/2,J=this.height%2/2,ce=Math.cos(this.angle),me=Math.sin(this.angle),ve=s-Math.round(s)+ce*se+me*J,Pe=d-Math.round(d)+ce*J+me*se,De=new Float64Array(f);if(c.H(De,De,[ve>.5?ve-1:ve,Pe>.5?Pe-1:Pe,0]),this.alignedModelViewProjectionMatrix=De,f=c.as(new Float64Array(16),this.pixelMatrix),!f)throw new Error("failed to invert matrix");this.pixelMatrixInverse=f,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const n=this.pointCoordinate(new c.P(0,0)),s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return c.af(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(0,n))}getCameraQueryGeometry(n){const s=this.getCameraPoint();if(n.length===1)return[n[0],s];{let d=s.x,f=s.y,y=s.x,b=s.y;for(const T of n)d=Math.min(d,T.x),f=Math.min(f,T.y),y=Math.max(y,T.x),b=Math.max(b,T.y);return[new c.P(d,f),new c.P(y,f),new c.P(y,b),new c.P(d,b),new c.P(d,f)]}}lngLatToCameraDepth(n,s){const d=this.locationCoordinate(n),f=[d.x*this.worldSize,d.y*this.worldSize,s,1];return c.af(f,f,this.modelViewProjectionMatrix),f[2]/f[3]}}function wd(g,n){let s,d=!1,f=null,y=null;const b=()=>{f=null,d&&(g.apply(y,s),f=setTimeout(b,n),d=!1)};return(...T)=>(d=!0,y=this,s=T,f||b(),f)}class dc{constructor(n){this._getCurrentHash=()=>{const s=window.location.hash.replace("#","");if(this._hashName){let d;return s.split("&").map(f=>f.split("=")).forEach(f=>{f[0]===this._hashName&&(d=f)}),(d&&d[1]||"").split("/")}return s.split("/")},this._onHashChange=()=>{const s=this._getCurrentHash();if(s.length>=3&&!s.some(d=>isNaN(d))){const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(s[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+s[2],+s[1]],zoom:+s[0],bearing:d,pitch:+(s[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const s=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,s)}catch{}},this._updateHash=wd(this._updateHashUnthrottled,300),this._hashName=n&&encodeURIComponent(n)}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(n){const s=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,f=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,f),b=Math.round(s.lng*y)/y,T=Math.round(s.lat*y)/y,k=this._map.getBearing(),P=this._map.getPitch();let z="";if(z+=n?`/${b}/${T}/${d}`:`${d}/${T}/${b}`,(k||P)&&(z+="/"+Math.round(10*k)/10),P&&(z+=`/${Math.round(P)}`),this._hashName){const M=this._hashName;let U=!1;const $=window.location.hash.slice(1).split("&").map(G=>{const Q=G.split("=")[0];return Q===M?(U=!0,`${Q}=${z}`):G}).filter(G=>G);return U||$.push(`${M}=${z}`),`#${$.join("&")}`}return`#${z}`}}const kl={linearity:.3,easing:c.b7(0,0,.3,1)},pc=c.e({deceleration:2500,maxSpeed:1400},kl),El=c.e({deceleration:20,maxSpeed:1400},kl),Cl=c.e({deceleration:1e3,maxSpeed:360},kl),fc=c.e({deceleration:1e3,maxSpeed:90},kl);class mc{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:D.now(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,s=D.now();for(;n.length>0&&s-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const s={zoom:0,bearing:0,pitch:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:y}of this._inertiaBuffer)s.zoom+=y.zoomDelta||0,s.bearing+=y.bearingDelta||0,s.pitch+=y.pitchDelta||0,y.panDelta&&s.pan._add(y.panDelta),y.around&&(s.around=y.around),y.pinchAround&&(s.pinchAround=y.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,f={};if(s.pan.mag()){const y=Jo(s.pan.mag(),d,c.e({},pc,n||{}));f.offset=s.pan.mult(y.amount/s.pan.mag()),f.center=this._map.transform.center,Ps(f,y)}if(s.zoom){const y=Jo(s.zoom,d,El);f.zoom=this._map.transform.zoom+y.amount,Ps(f,y)}if(s.bearing){const y=Jo(s.bearing,d,Cl);f.bearing=this._map.transform.bearing+c.ac(y.amount,-179,179),Ps(f,y)}if(s.pitch){const y=Jo(s.pitch,d,fc);f.pitch=this._map.transform.pitch+y.amount,Ps(f,y)}if(f.zoom||f.bearing){const y=s.pinchAround===void 0?s.around:s.pinchAround;f.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),c.e(f,{noMoveStart:!0})}}function Ps(g,n){(!g.duration||g.duration<n.duration)&&(g.duration=n.duration,g.easing=n.easing)}function Jo(g,n,s){const{maxSpeed:d,linearity:f,deceleration:y}=s,b=c.ac(g*f/(n/1e3),-d,d),T=Math.abs(b)/(y*f);return{easing:s.easing,duration:1e3*T,amount:b*(T/2)}}class ln extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,s,d,f={}){const y=B.mousePos(s.getCanvas(),d),b=s.unproject(y);super(n,c.e({point:y,lngLat:b,originalEvent:d},f)),this._defaultPrevented=!1,this.target=s}}class Qo extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,s,d){const f=n==="touchend"?d.changedTouches:d.touches,y=B.touchPos(s.getCanvasContainer(),f),b=y.map(k=>s.unproject(k)),T=y.reduce((k,P,z,M)=>k.add(P.div(M.length)),new c.P(0,0));super(n,{points:y,point:T,lngLats:b,lngLat:s.unproject(T),originalEvent:d}),this._defaultPrevented=!1}}class bd extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,s,d){super(n,{originalEvent:d}),this._defaultPrevented=!1}}class gc{constructor(n,s){this._map=n,this._clickTolerance=s.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new bd(n.type,this._map,n))}mousedown(n,s){return this._mousedownPos=s,this._firePreventable(new ln(n.type,this._map,n))}mouseup(n){this._map.fire(new ln(n.type,this._map,n))}click(n,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new ln(n.type,this._map,n))}dblclick(n){return this._firePreventable(new ln(n.type,this._map,n))}mouseover(n){this._map.fire(new ln(n.type,this._map,n))}mouseout(n){this._map.fire(new ln(n.type,this._map,n))}touchstart(n){return this._firePreventable(new Qo(n.type,this._map,n))}touchmove(n){this._map.fire(new Qo(n.type,this._map,n))}touchend(n){this._map.fire(new Qo(n.type,this._map,n))}touchcancel(n){this._map.fire(new Qo(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Tm{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new ln(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ln("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new ln(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ca{constructor(n){this._map=n}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(n){return this.transform.pointLocation(c.P.convert(n),this._map.terrain)}}class Is{constructor(n,s){this._map=n,this._tr=new Ca(n),this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=s.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,s){this.isEnabled()&&n.shiftKey&&n.button===0&&(B.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)}mousemoveWindow(n,s){if(!this._active)return;const d=s;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const f=this._startPos;this._lastPos=d,this._box||(this._box=B.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",n));const y=Math.min(f.x,d.x),b=Math.max(f.x,d.x),T=Math.min(f.y,d.y),k=Math.max(f.y,d.y);B.setTransform(this._box,`translate(${y}px,${T}px)`),this._box.style.width=b-y+"px",this._box.style.height=k-T+"px"}mouseupWindow(n,s){if(!this._active||n.button!==0)return;const d=this._startPos,f=s;if(this.reset(),B.suppressClick(),d.x!==f.x||d.y!==f.y)return this._map.fire(new c.k("boxzoomend",{originalEvent:n})),{cameraAnimation:y=>y.fitScreenCoordinates(d,f,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(B.remove(this._box),this._box=null),B.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,s){return this._map.fire(new c.k(n,{originalEvent:s}))}}function As(g,n){if(g.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${g.length}, points ${n.length}`);const s={};for(let d=0;d<g.length;d++)s[g[d].identifier]=n[d];return s}class Sd{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,s,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),d.length===this.numTouches&&(this.centroid=function(f){const y=new c.P(0,0);for(const b of f)y._add(b);return y.div(f.length)}(s),this.touches=As(d,s)))}touchmove(n,s,d){if(this.aborted||!this.centroid)return;const f=As(d,s);for(const y in this.touches){const b=f[y];(!b||b.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(n,s,d){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const f=!this.aborted&&this.centroid;if(this.reset(),f)return f}}}class Pl{constructor(n){this.singleTap=new Sd(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,s,d){this.singleTap.touchstart(n,s,d)}touchmove(n,s,d){this.singleTap.touchmove(n,s,d)}touchend(n,s,d){const f=this.singleTap.touchend(n,s,d);if(f){const y=n.timeStamp-this.lastTime<500,b=!this.lastTap||this.lastTap.dist(f)<30;if(y&&b||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=f,this.count===this.numTaps)return this.reset(),f}}}class Il{constructor(n){this._tr=new Ca(n),this._zoomIn=new Pl({numTouches:1,numTaps:2}),this._zoomOut=new Pl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,s,d){this._zoomIn.touchstart(n,s,d),this._zoomOut.touchstart(n,s,d)}touchmove(n,s,d){this._zoomIn.touchmove(n,s,d),this._zoomOut.touchmove(n,s,d)}touchend(n,s,d){const f=this._zoomIn.touchend(n,s,d),y=this._zoomOut.touchend(n,s,d),b=this._tr;return f?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:b.zoom+1,around:b.unproject(f)},{originalEvent:n})}):y?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:b.zoom-1,around:b.unproject(y)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ea{constructor(n){this._enabled=!!n.enable,this._moveStateManager=n.moveStateManager,this._clickTolerance=n.clickTolerance||1,this._moveFunction=n.move,this._activateOnStart=!!n.activateOnStart,n.assignEvents(this),this.reset()}reset(n){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(n)}_move(...n){const s=this._moveFunction(...n);if(s.bearingDelta||s.pitchDelta||s.around||s.panDelta)return this._active=!0,s}dragStart(n,s){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(n)&&(this._moveStateManager.startMove(n),this._lastPoint=s.length?s[0]:s,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(n,s){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(n.preventDefault(),!this._moveStateManager.isValidMoveEvent(n))return void this.reset(n);const f=s.length?s[0]:s;return!this._moved&&f.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=f,this._move(d,f))}dragEnd(n){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(n)&&(this._moved&&B.suppressClick(),this.reset(n))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const km={0:1,2:2};class Al{constructor(n){this._correctEvent=n.checkCorrectEvent}startMove(n){const s=B.mouseButton(n);this._eventButton=s}endMove(n){delete this._eventButton}isValidStartEvent(n){return this._correctEvent(n)}isValidMoveEvent(n){return!function(s,d){const f=km[d];return s.buttons===void 0||(s.buttons&f)!==f}(n,this._eventButton)}isValidEndEvent(n){return B.mouseButton(n)===this._eventButton}}class vr{constructor(){this._firstTouch=void 0}_isOneFingerTouch(n){return n.targetTouches.length===1}_isSameTouchEvent(n){return n.targetTouches[0].identifier===this._firstTouch}startMove(n){this._firstTouch=n.targetTouches[0].identifier}endMove(n){delete this._firstTouch}isValidStartEvent(n){return this._isOneFingerTouch(n)}isValidMoveEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}isValidEndEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}}const ho=g=>{g.mousedown=g.dragStart,g.mousemoveWindow=g.dragMove,g.mouseup=g.dragEnd,g.contextmenu=n=>{n.preventDefault()}},Jn=({enable:g,clickTolerance:n,bearingDegreesPerPixelMoved:s=.8})=>{const d=new Al({checkCorrectEvent:f=>B.mouseButton(f)===0&&f.ctrlKey||B.mouseButton(f)===2});return new ea({clickTolerance:n,move:(f,y)=>({bearingDelta:(y.x-f.x)*s}),moveStateManager:d,enable:g,assignEvents:ho})},Ml=({enable:g,clickTolerance:n,pitchDegreesPerPixelMoved:s=-.5})=>{const d=new Al({checkCorrectEvent:f=>B.mouseButton(f)===0&&f.ctrlKey||B.mouseButton(f)===2});return new ea({clickTolerance:n,move:(f,y)=>({pitchDelta:(y.y-f.y)*s}),moveStateManager:d,enable:g,assignEvents:ho})};class yc{constructor(n,s){this._clickTolerance=n.clickTolerance||1,this._map=s,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(n,s,d){return this._calculateTransform(n,s,d)}touchmove(n,s,d){if(this._active&&!(d.length<this.minTouchs()))return n.preventDefault(),this._calculateTransform(n,s,d)}touchend(n,s,d){this._calculateTransform(n,s,d),this._active&&d.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,s,d){d.length>0&&(this._active=!0);const f=As(d,s),y=new c.P(0,0),b=new c.P(0,0);let T=0;for(const P in f){const z=f[P],M=this._touches[P];M&&(y._add(z),b._add(z.sub(M)),T++,f[P]=z)}if(this._touches=f,T<this.minTouchs()||!b.mag())return;const k=b.div(T);return this._sum._add(k),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(T),panDelta:k}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zl{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(n,s,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([s[0],s[1]]))}touchmove(n,s,d){if(!this._firstTwoTouches)return;n.preventDefault();const[f,y]=this._firstTwoTouches,b=po(d,s,f),T=po(d,s,y);if(!b||!T)return;const k=this._aroundCenter?null:b.add(T).div(2);return this._move([b,T],k,n)}touchend(n,s,d){if(!this._firstTwoTouches)return;const[f,y]=this._firstTwoTouches,b=po(d,s,f),T=po(d,s,y);b&&T||(this._active&&B.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function po(g,n,s){for(let d=0;d<g.length;d++)if(g[d].identifier===s)return n[d]}function Pa(g,n){return Math.log(g/n)/Math.LN2}class Ll extends zl{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,s){const d=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(Pa(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Pa(this._distance,d),pinchAround:s}}}function _c(g,n){return 180*g.angleWith(n)/Math.PI}class vc extends zl{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,s,d){const f=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:_c(this._vector,f),pinchAround:s}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const s=25/(Math.PI*this._minDiameter)*360,d=_c(n,this._startVector);return Math.abs(d)<s}}function Rl(g){return Math.abs(g.y)>Math.abs(g.x)}class xc extends zl{constructor(n){super(),this._currentTouchCount=0,this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,s,d){super.touchstart(n,s,d),this._currentTouchCount=d.length}_start(n){this._lastPoints=n,Rl(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,s,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const f=n[0].sub(this._lastPoints[0]),y=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(f,y,d.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(f.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(n,s,d){if(this._valid!==void 0)return this._valid;const f=n.mag()>=2,y=s.mag()>=2;if(!f&&!y)return;if(!f||!y)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const b=n.y>0==s.y>0;return Rl(n)&&Rl(s)&&b}}const Td={panStep:100,bearingStep:15,pitchStep:10};class Po{constructor(n){this._tr=new Ca(n);const s=Td;this._panStep=s.panStep,this._bearingStep=s.bearingStep,this._pitchStep=s.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let s=0,d=0,f=0,y=0,b=0;switch(n.keyCode){case 61:case 107:case 171:case 187:s=1;break;case 189:case 109:case 173:s=-1;break;case 37:n.shiftKey?d=-1:(n.preventDefault(),y=-1);break;case 39:n.shiftKey?d=1:(n.preventDefault(),y=1);break;case 38:n.shiftKey?f=1:(n.preventDefault(),b=-1);break;case 40:n.shiftKey?f=-1:(n.preventDefault(),b=1);break;default:return}return this._rotationDisabled&&(d=0,f=0),{cameraAnimation:T=>{const k=this._tr;T.easeTo({duration:300,easeId:"keyboardHandler",easing:kd,zoom:s?Math.round(k.zoom)+s*(n.shiftKey?2:1):k.zoom,bearing:k.bearing+d*this._bearingStep,pitch:k.pitch+f*this._pitchStep,offset:[-y*this._panStep,-b*this._panStep],center:k.center},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function kd(g){return g*(2-g)}const wc=4.000244140625;class bc{constructor(n,s){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=n,this._tr=new Ca(n),this._triggerRenderFrame=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(n){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!n[this._map.cooperativeGestures._bypassKey])return;let s=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const d=D.now(),f=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,s!==0&&s%wc==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":f>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(f*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),n.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=n,this._delta-=s,this._active||this._start(n)),n.preventDefault()}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const s=B.mousePos(this._map.getCanvas(),n),d=this._tr;this._around=s.y>d.transform.height/2-d.transform.getHorizon()?c.M.convert(this._aroundCenter?d.center:d.unproject(s)):c.M.convert(d.center),this._aroundPoint=d.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._tr.transform;if(this._delta!==0){const T=this._type==="wheel"&&Math.abs(this._delta)>wc?this._wheelZoomRate:this._defaultZoomRate;let k=2/(1+Math.exp(-Math.abs(this._delta*T)));this._delta<0&&k!==0&&(k=1/k);const P=typeof this._targetZoom=="number"?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(P*k))),this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const s=typeof this._targetZoom=="number"?this._targetZoom:n.zoom,d=this._startZoom,f=this._easing;let y,b=!1;if(this._type==="wheel"&&d&&f){const T=Math.min((D.now()-this._lastWheelEventTime)/200,1),k=f(T);y=c.z.number(d,s,k),T<1?this._frameId||(this._frameId=!0):b=!0}else y=s,b=!0;return this._active=!0,b&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!b,zoomDelta:y-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let s=c.b8;if(this._prevEase){const d=this._prevEase,f=(D.now()-d.start)/d.duration,y=d.easing(f+.01)-d.easing(f),b=.27/Math.sqrt(y*y+1e-4)*.01,T=Math.sqrt(.0729-b*b);s=c.b7(b,T,.25,1)}return this._prevEase={start:D.now(),duration:n,easing:s},s}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Sc{constructor(n,s){this._clickZoom=n,this._tapZoom=s}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ed{constructor(n){this._tr=new Ca(n),this.reset()}reset(){this._active=!1}dblclick(n,s){return n.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(n.shiftKey?-1:1),around:this._tr.unproject(s)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Cd{constructor(){this._tap=new Pl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(n,s,d){if(!this._swipePoint)if(this._tapTime){const f=s[0],y=n.timeStamp-this._tapTime<500,b=this._tapPoint.dist(f)<30;y&&b?d.length>0&&(this._swipePoint=f,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(n,s,d)}touchmove(n,s,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const f=s[0],y=f.y-this._swipePoint.y;return this._swipePoint=f,n.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(n,s,d)}touchend(n,s,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const f=this._tap.touchend(n,s,d);f&&(this._tapTime=n.timeStamp,this._tapPoint=f)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Tc{constructor(n,s,d){this._el=n,this._mousePan=s,this._touchPan=d}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ia{constructor(n,s,d){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=s,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class kc{constructor(n,s,d,f){this._el=n,this._touchZoom=s,this._touchRotate=d,this._tapDragZoom=f,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class di{constructor(n,s){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=n,this._options=s,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const n=this._map.getCanvasContainer();n.classList.add("maplibregl-cooperative-gestures"),this._container=B.create("div","maplibregl-cooperative-gesture-screen",n);let s=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(s=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),f=document.createElement("div");f.className="maplibregl-desktop-message",f.textContent=s,this._container.appendChild(f);const y=document.createElement("div");y.className="maplibregl-mobile-message",y.textContent=d,this._container.appendChild(y),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(B.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(n){this._onCooperativeGesture(n.touches.length===1)}wheel(n){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!n[this._bypassKey])}_onCooperativeGesture(n){this._enabled&&n&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Qn=g=>g.zoom||g.drag||g.pitch||g.rotate;class Pd extends c.k{}function pi(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}class Ms{constructor(n,s){this.handleWindowEvent=f=>{this.handleEvent(f,`${f.type}Window`)},this.handleEvent=(f,y)=>{if(f.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const b=f.type==="renderFrame"?void 0:f,T={needsRenderFrame:!1},k={},P={},z=f.touches,M=z?this._getMapTouches(z):void 0,U=M?B.touchPos(this._map.getCanvas(),M):B.mousePos(this._map.getCanvas(),f);for(const{handlerName:Q,handler:K,allowed:ne}of this._handlers){if(!K.isEnabled())continue;let se;this._blockedByActive(P,ne,Q)?K.reset():K[y||f.type]&&(se=K[y||f.type](f,U,M),this.mergeHandlerResult(T,k,se,Q,b),se&&se.needsRenderFrame&&this._triggerRenderFrame()),(se||K.isActive())&&(P[Q]=K)}const $={};for(const Q in this._previousActiveHandlers)P[Q]||($[Q]=b);this._previousActiveHandlers=P,(Object.keys($).length||pi(T))&&(this._changes.push([T,k,$]),this._triggerRenderFrame()),(Object.keys(P).length||pi(T))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:G}=T;G&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],G(this._map))},this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new mc(n),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[f,y,b]of this._listeners)B.addEventListener(f,y,f===document?this.handleWindowEvent:this.handleEvent,b)}destroy(){for(const[n,s,d]of this._listeners)B.removeEventListener(n,s,n===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(n){const s=this._map,d=s.getCanvasContainer();this._add("mapEvent",new gc(s,n));const f=s.boxZoom=new Is(s,n);this._add("boxZoom",f),n.interactive&&n.boxZoom&&f.enable();const y=s.cooperativeGestures=new di(s,n.cooperativeGestures);this._add("cooperativeGestures",y),n.cooperativeGestures&&y.enable();const b=new Il(s),T=new Ed(s);s.doubleClickZoom=new Sc(T,b),this._add("tapZoom",b),this._add("clickZoom",T),n.interactive&&n.doubleClickZoom&&s.doubleClickZoom.enable();const k=new Cd;this._add("tapDragZoom",k);const P=s.touchPitch=new xc(s);this._add("touchPitch",P),n.interactive&&n.touchPitch&&s.touchPitch.enable(n.touchPitch);const z=Jn(n),M=Ml(n);s.dragRotate=new Ia(n,z,M),this._add("mouseRotate",z,["mousePitch"]),this._add("mousePitch",M,["mouseRotate"]),n.interactive&&n.dragRotate&&s.dragRotate.enable();const U=(({enable:se,clickTolerance:J})=>{const ce=new Al({checkCorrectEvent:me=>B.mouseButton(me)===0&&!me.ctrlKey});return new ea({clickTolerance:J,move:(me,ve)=>({around:ve,panDelta:ve.sub(me)}),activateOnStart:!0,moveStateManager:ce,enable:se,assignEvents:ho})})(n),$=new yc(n,s);s.dragPan=new Tc(d,U,$),this._add("mousePan",U),this._add("touchPan",$,["touchZoom","touchRotate"]),n.interactive&&n.dragPan&&s.dragPan.enable(n.dragPan);const G=new vc,Q=new Ll;s.touchZoomRotate=new kc(d,Q,G,k),this._add("touchRotate",G,["touchPan","touchZoom"]),this._add("touchZoom",Q,["touchPan","touchRotate"]),n.interactive&&n.touchZoomRotate&&s.touchZoomRotate.enable(n.touchZoomRotate);const K=s.scrollZoom=new bc(s,()=>this._triggerRenderFrame());this._add("scrollZoom",K,["mousePan"]),n.interactive&&n.scrollZoom&&s.scrollZoom.enable(n.scrollZoom);const ne=s.keyboard=new Po(s);this._add("keyboard",ne),n.interactive&&n.keyboard&&s.keyboard.enable(),this._add("blockableMapEvent",new Tm(s))}_add(n,s,d){this._handlers.push({handlerName:n,handler:s,allowed:d}),this._handlersById[n]=s}stop(n){if(!this._updatingCamera){for(const{handler:s}of this._handlers)s.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Qn(this._eventsInProgress)||this.isZooming()}_blockedByActive(n,s,d){for(const f in n)if(f!==d&&(!s||s.indexOf(f)<0))return!0;return!1}_getMapTouches(n){const s=[];for(const d of n)this._el.contains(d.target)&&s.push(d);return s}mergeHandlerResult(n,s,d,f,y){if(!d)return;c.e(n,d);const b={handlerName:f,originalEvent:d.originalEvent||y};d.zoomDelta!==void 0&&(s.zoom=b),d.panDelta!==void 0&&(s.drag=b),d.pitchDelta!==void 0&&(s.pitch=b),d.bearingDelta!==void 0&&(s.rotate=b)}_applyChanges(){const n={},s={},d={};for(const[f,y,b]of this._changes)f.panDelta&&(n.panDelta=(n.panDelta||new c.P(0,0))._add(f.panDelta)),f.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+f.zoomDelta),f.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+f.bearingDelta),f.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+f.pitchDelta),f.around!==void 0&&(n.around=f.around),f.pinchAround!==void 0&&(n.pinchAround=f.pinchAround),f.noInertia&&(n.noInertia=f.noInertia),c.e(s,y),c.e(d,b);this._updateMapTransform(n,s,d),this._changes=[]}_updateMapTransform(n,s,d){const f=this._map,y=f._getTransformForUpdate(),b=f.terrain;if(!(pi(n)||b&&this._terrainMovement))return this._fireEvents(s,d,!0);let{panDelta:T,zoomDelta:k,bearingDelta:P,pitchDelta:z,around:M,pinchAround:U}=n;U!==void 0&&(M=U),f._stop(!0),M=M||f.transform.centerPoint;const $=y.pointLocation(T?M.sub(T):M);P&&(y.bearing+=P),z&&(y.pitch+=z),k&&(y.zoom+=k),b?this._terrainMovement||!s.drag&&!s.zoom?s.drag&&this._terrainMovement?y.center=y.pointLocation(y.centerPoint.sub(T)):y.setLocationAtPoint($,M):(this._terrainMovement=!0,this._map._elevationFreeze=!0,y.setLocationAtPoint($,M)):y.setLocationAtPoint($,M),f._applyUpdatedTransform(y),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(s,d,!0)}_fireEvents(n,s,d){const f=Qn(this._eventsInProgress),y=Qn(n),b={};for(const M in n){const{originalEvent:U}=n[M];this._eventsInProgress[M]||(b[`${M}start`]=U),this._eventsInProgress[M]=n[M]}!f&&y&&this._fireEvent("movestart",y.originalEvent);for(const M in b)this._fireEvent(M,b[M]);y&&this._fireEvent("move",y.originalEvent);for(const M in n){const{originalEvent:U}=n[M];this._fireEvent(M,U)}const T={};let k;for(const M in this._eventsInProgress){const{handlerName:U,originalEvent:$}=this._eventsInProgress[M];this._handlersById[U].isActive()||(delete this._eventsInProgress[M],k=s[U]||$,T[`${M}end`]=k)}for(const M in T)this._fireEvent(M,T[M]);const P=Qn(this._eventsInProgress),z=(f||y)&&!P;if(z&&this._terrainMovement&&(this._map._elevationFreeze=!1,this._terrainMovement=!1,this._map.transform.recalculateZoom(this._map.terrain)),d&&z){this._updatingCamera=!0;const M=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),U=$=>$!==0&&-this._bearingSnap<$&&$<this._bearingSnap;!M||!M.essential&&D.prefersReducedMotion?(this._map.fire(new c.k("moveend",{originalEvent:k})),U(this._map.getBearing())&&this._map.resetNorth()):(U(M.bearing||this._map.getBearing())&&(M.bearing=0),M.freezeElevation=!0,this._map.easeTo(M,{originalEvent:k})),this._updatingCamera=!1}}_fireEvent(n,s){this._map.fire(new c.k(n,s?{originalEvent:s}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{delete this._frameId,this.handleEvent(new Pd("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Em extends c.E{constructor(n,s){super(),this._renderFrameCallback=()=>{const d=Math.min((D.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=s.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new c.M(this.transform.center.lng,this.transform.center.lat)}setCenter(n,s){return this.jumpTo({center:n},s)}panBy(n,s,d){return n=c.P.convert(n).mult(-1),this.panTo(this.transform.center,c.e({offset:n},s),d)}panTo(n,s,d){return this.easeTo(c.e({center:n},s),d)}getZoom(){return this.transform.zoom}setZoom(n,s){return this.jumpTo({zoom:n},s),this}zoomTo(n,s,d){return this.easeTo(c.e({zoom:n},s),d)}zoomIn(n,s){return this.zoomTo(this.getZoom()+1,n,s),this}zoomOut(n,s){return this.zoomTo(this.getZoom()-1,n,s),this}getBearing(){return this.transform.bearing}setBearing(n,s){return this.jumpTo({bearing:n},s),this}getPadding(){return this.transform.padding}setPadding(n,s){return this.jumpTo({padding:n},s),this}rotateTo(n,s,d){return this.easeTo(c.e({bearing:n},s),d)}resetNorth(n,s){return this.rotateTo(0,c.e({duration:1e3},n),s),this}resetNorthPitch(n,s){return this.easeTo(c.e({bearing:0,pitch:0,duration:1e3},n),s),this}snapToNorth(n,s){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,s):this}getPitch(){return this.transform.pitch}setPitch(n,s){return this.jumpTo({pitch:n},s),this}cameraForBounds(n,s){n=pr.convert(n);const d=s&&s.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),d,s)}_cameraForBoxAndBearing(n,s,d,f){const y={top:0,bottom:0,right:0,left:0};if(typeof(f=c.e({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},f)).padding=="number"){const Oe=f.padding;f.padding={top:Oe,bottom:Oe,right:Oe,left:Oe}}f.padding=c.e(y,f.padding);const b=this.transform,T=b.padding,k=new pr(n,s),P=b.project(k.getNorthWest()),z=b.project(k.getNorthEast()),M=b.project(k.getSouthEast()),U=b.project(k.getSouthWest()),$=c.b9(-d),G=P.rotate($),Q=z.rotate($),K=M.rotate($),ne=U.rotate($),se=new c.P(Math.max(G.x,Q.x,ne.x,K.x),Math.max(G.y,Q.y,ne.y,K.y)),J=new c.P(Math.min(G.x,Q.x,ne.x,K.x),Math.min(G.y,Q.y,ne.y,K.y)),ce=se.sub(J),me=(b.width-(T.left+T.right+f.padding.left+f.padding.right))/ce.x,ve=(b.height-(T.top+T.bottom+f.padding.top+f.padding.bottom))/ce.y;if(ve<0||me<0)return void c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Pe=Math.min(b.scaleZoom(b.scale*Math.min(me,ve)),f.maxZoom),De=c.P.convert(f.offset),Xe=new c.P((f.padding.left-f.padding.right)/2,(f.padding.top-f.padding.bottom)/2).rotate(c.b9(d)),Je=De.add(Xe).mult(b.scale/b.zoomScale(Pe));return{center:b.unproject(P.add(M).div(2).sub(Je)),zoom:Pe,bearing:d}}fitBounds(n,s,d){return this._fitInternal(this.cameraForBounds(n,s),s,d)}fitScreenCoordinates(n,s,d,f,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(c.P.convert(n)),this.transform.pointLocation(c.P.convert(s)),d,f),f,y)}_fitInternal(n,s,d){return n?(delete(s=c.e(n,s)).padding,s.linear?this.easeTo(s,d):this.flyTo(s,d)):this}jumpTo(n,s){this.stop();const d=this._getTransformForUpdate();let f=!1,y=!1,b=!1;return"zoom"in n&&d.zoom!==+n.zoom&&(f=!0,d.zoom=+n.zoom),n.center!==void 0&&(d.center=c.M.convert(n.center)),"bearing"in n&&d.bearing!==+n.bearing&&(y=!0,d.bearing=+n.bearing),"pitch"in n&&d.pitch!==+n.pitch&&(b=!0,d.pitch=+n.pitch),n.padding==null||d.isPaddingEqual(n.padding)||(d.padding=n.padding),this._applyUpdatedTransform(d),this.fire(new c.k("movestart",s)).fire(new c.k("move",s)),f&&this.fire(new c.k("zoomstart",s)).fire(new c.k("zoom",s)).fire(new c.k("zoomend",s)),y&&this.fire(new c.k("rotatestart",s)).fire(new c.k("rotate",s)).fire(new c.k("rotateend",s)),b&&this.fire(new c.k("pitchstart",s)).fire(new c.k("pitch",s)).fire(new c.k("pitchend",s)),this.fire(new c.k("moveend",s))}calculateCameraOptionsFromTo(n,s,d,f=0){const y=c.Y.fromLngLat(n,s),b=c.Y.fromLngLat(d,f),T=b.x-y.x,k=b.y-y.y,P=b.z-y.z,z=Math.hypot(T,k,P);if(z===0)throw new Error("Can't calculate camera options with same From and To");const M=Math.hypot(T,k),U=this.transform.scaleZoom(this.transform.cameraToCenterDistance/z/this.transform.tileSize),$=180*Math.atan2(T,-k)/Math.PI;let G=180*Math.acos(M/z)/Math.PI;return G=P<0?90-G:90+G,{center:b.toLngLat(),zoom:U,pitch:G,bearing:$}}easeTo(n,s){var d;this._stop(!1,n.easeId),((n=c.e({offset:[0,0],duration:500,easing:c.b8},n)).animate===!1||!n.essential&&D.prefersReducedMotion)&&(n.duration=0);const f=this._getTransformForUpdate(),y=this.getZoom(),b=this.getBearing(),T=this.getPitch(),k=this.getPadding(),P="bearing"in n?this._normalizeBearing(n.bearing,b):b,z="pitch"in n?+n.pitch:T,M="padding"in n?n.padding:f.padding,U=c.P.convert(n.offset);let $=f.centerPoint.add(U);const G=f.pointLocation($),{center:Q,zoom:K}=f.getConstrained(c.M.convert(n.center||G),(d=n.zoom)!==null&&d!==void 0?d:y);this._normalizeCenter(Q);const ne=f.project(G),se=f.project(Q).sub(ne),J=f.zoomScale(K-y);let ce,me;n.around&&(ce=c.M.convert(n.around),me=f.locationPoint(ce));const ve={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||K!==y,this._rotating=this._rotating||b!==P,this._pitching=this._pitching||z!==T,this._padding=!f.isPaddingEqual(M),this._easeId=n.easeId,this._prepareEase(s,n.noMoveStart,ve),this.terrain&&this._prepareElevation(Q),this._ease(Pe=>{if(this._zooming&&(f.zoom=c.z.number(y,K,Pe)),this._rotating&&(f.bearing=c.z.number(b,P,Pe)),this._pitching&&(f.pitch=c.z.number(T,z,Pe)),this._padding&&(f.interpolatePadding(k,M,Pe),$=f.centerPoint.add(U)),this.terrain&&!n.freezeElevation&&this._updateElevation(Pe),ce)f.setLocationAtPoint(ce,me);else{const De=f.zoomScale(f.zoom-y),Xe=K>y?Math.min(2,J):Math.max(.5,J),Je=Math.pow(Xe,1-Pe),Oe=f.unproject(ne.add(se.mult(Pe*Je)).mult(De));f.setLocationAtPoint(f.renderWorldCopies?Oe.wrap():Oe,$)}this._applyUpdatedTransform(f),this._fireMoveEvents(s)},Pe=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(s,Pe)},n),this}_prepareEase(n,s,d={}){this._moving=!0,s||d.moving||this.fire(new c.k("movestart",n)),this._zooming&&!d.zooming&&this.fire(new c.k("zoomstart",n)),this._rotating&&!d.rotating&&this.fire(new c.k("rotatestart",n)),this._pitching&&!d.pitching&&this.fire(new c.k("pitchstart",n))}_prepareElevation(n){this._elevationCenter=n,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(n){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const s=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(n<1&&s!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=n*(d-(s-(d*n+this._elevationStart))/(1-n)),this._elevationTarget=s}this.transform.elevation=c.z.number(this._elevationStart,this._elevationTarget,n)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(n){if(!this.transformCameraUpdate)return;const s=n.clone(),{center:d,zoom:f,pitch:y,bearing:b,elevation:T}=this.transformCameraUpdate(s);d&&(s.center=d),f!==void 0&&(s.zoom=f),y!==void 0&&(s.pitch=y),b!==void 0&&(s.bearing=b),T!==void 0&&(s.elevation=T),this.transform.apply(s)}_fireMoveEvents(n){this.fire(new c.k("move",n)),this._zooming&&this.fire(new c.k("zoom",n)),this._rotating&&this.fire(new c.k("rotate",n)),this._pitching&&this.fire(new c.k("pitch",n))}_afterEase(n,s){if(this._easeId&&s&&this._easeId===s)return;delete this._easeId;const d=this._zooming,f=this._rotating,y=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new c.k("zoomend",n)),f&&this.fire(new c.k("rotateend",n)),y&&this.fire(new c.k("pitchend",n)),this.fire(new c.k("moveend",n))}flyTo(n,s){var d;if(!n.essential&&D.prefersReducedMotion){const qe=c.L(n,["center","zoom","bearing","pitch","around"]);return this.jumpTo(qe,s)}this.stop(),n=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.b8},n);const f=this._getTransformForUpdate(),y=this.getZoom(),b=this.getBearing(),T=this.getPitch(),k=this.getPadding(),P="bearing"in n?this._normalizeBearing(n.bearing,b):b,z="pitch"in n?+n.pitch:T,M="padding"in n?n.padding:f.padding,U=c.P.convert(n.offset);let $=f.centerPoint.add(U);const G=f.pointLocation($),{center:Q,zoom:K}=f.getConstrained(c.M.convert(n.center||G),(d=n.zoom)!==null&&d!==void 0?d:y);this._normalizeCenter(Q);const ne=f.zoomScale(K-y),se=f.project(G),J=f.project(Q).sub(se);let ce=n.curve;const me=Math.max(f.width,f.height),ve=me/ne,Pe=J.mag();if("minZoom"in n){const qe=c.ac(Math.min(n.minZoom,y,K),f.minZoom,f.maxZoom),_t=me/f.zoomScale(qe-y);ce=Math.sqrt(_t/Pe*2)}const De=ce*ce;function Xe(qe){const _t=(ve*ve-me*me+(qe?-1:1)*De*De*Pe*Pe)/(2*(qe?ve:me)*De*Pe);return Math.log(Math.sqrt(_t*_t+1)-_t)}function Je(qe){return(Math.exp(qe)-Math.exp(-qe))/2}function Oe(qe){return(Math.exp(qe)+Math.exp(-qe))/2}const je=Xe(!1);let nt=function(qe){return Oe(je)/Oe(je+ce*qe)},bt=function(qe){return me*((Oe(je)*(Je(_t=je+ce*qe)/Oe(_t))-Je(je))/De)/Pe;var _t},Ve=(Xe(!0)-je)/ce;if(Math.abs(Pe)<1e-6||!isFinite(Ve)){if(Math.abs(me-ve)<1e-6)return this.easeTo(n,s);const qe=ve<me?-1:1;Ve=Math.abs(Math.log(ve/me))/ce,bt=()=>0,nt=_t=>Math.exp(qe*ce*_t)}return n.duration="duration"in n?+n.duration:1e3*Ve/("screenSpeed"in n?+n.screenSpeed/ce:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=b!==P,this._pitching=z!==T,this._padding=!f.isPaddingEqual(M),this._prepareEase(s,!1),this.terrain&&this._prepareElevation(Q),this._ease(qe=>{const _t=qe*Ve,lr=1/nt(_t);f.zoom=qe===1?K:y+f.scaleZoom(lr),this._rotating&&(f.bearing=c.z.number(b,P,qe)),this._pitching&&(f.pitch=c.z.number(T,z,qe)),this._padding&&(f.interpolatePadding(k,M,qe),$=f.centerPoint.add(U)),this.terrain&&!n.freezeElevation&&this._updateElevation(qe);const At=qe===1?Q:f.unproject(se.add(J.mult(bt(_t))).mult(lr));f.setLocationAtPoint(f.renderWorldCopies?At.wrap():At,$),this._applyUpdatedTransform(f),this._fireMoveEvents(s)},()=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(s)},n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,s){var d;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,s)}return n||(d=this.handlers)===null||d===void 0||d.stop(!1),this}_ease(n,s,d){d.animate===!1||d.duration===0?(n(1),s()):(this._easeStart=D.now(),this._easeOptions=d,this._onEaseFrame=n,this._onEaseEnd=s,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(n,s){n=c.b2(n,-180,180);const d=Math.abs(n-s);return Math.abs(n-360-s)<d&&(n-=360),Math.abs(n+360-s)<d&&(n+=360),n}_normalizeCenter(n){const s=this.transform;if(!s.renderWorldCopies||s.lngRange)return;const d=n.lng-s.center.lng;n.lng+=d>180?-360:d<-180?360:0}queryTerrainElevation(n){return this.terrain?this.terrain.getElevationForLngLatZoom(c.M.convert(n),this.transform.tileZoom)-this.transform.elevation:null}}const Id={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Ad{constructor(n=Id){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=s=>{!s||s.sourceDataType!=="metadata"&&s.sourceDataType!=="visibility"&&s.dataType!=="style"&&s.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=n}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options.compact,this._container=B.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=B.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=B.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){B.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,s){const d=this._map._getUIString(`AttributionControl.${s}`);n.title=d,n.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(f=>typeof f!="string"?"":f)):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const f=this._map.style.stylesheet;this.styleOwner=f.owner,this.styleId=f.id}const s=this._map.style.sourceCaches;for(const f in s){const y=s[f];if(y.used||y.usedForTerrain){const b=y.getSource();b.attribution&&n.indexOf(b.attribution)<0&&n.push(b.attribution)}}n=n.filter(f=>String(f).trim()),n.sort((f,y)=>f.length-y.length),n=n.filter((f,y)=>{for(let b=y+1;b<n.length;b++)if(n[b].indexOf(f)>=0)return!1;return!0});const d=n.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,n.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Ec{constructor(n={}){this._updateCompact=()=>{const s=this._container.children;if(s.length){const d=s[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=n}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=B.create("div","maplibregl-ctrl");const s=B.create("a","maplibregl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://maplibre.org/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){B.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class zs{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const s=++this._id;return this._queue.push({callback:n,id:s,cancelled:!1}),s}remove(n){const s=this._currentlyRunning,d=s?this._queue.concat(s):this._queue;for(const f of d)if(f.id===n)return void(f.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const s=this._currentlyRunning=this._queue;this._queue=[];for(const d of s)if(!d.cancelled&&(d.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Io=c.X([{name:"a_pos3d",type:"Int16",components:3}]);class et extends c.E{constructor(n){super(),this.sourceCache=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,n.usedForTerrain=!0,n.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(n,s){this.sourceCache.update(n,s),this._renderableTilesKeys=[];const d={};for(const f of n.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:s}))d[f.key]=!0,this._renderableTilesKeys.push(f.key),this._tiles[f.key]||(f.posMatrix=new Float64Array(16),c.aO(f.posMatrix,0,c.W,0,c.W,0,1),this._tiles[f.key]=new Kr(f,this.tileSize));for(const f in this._tiles)d[f]||delete this._tiles[f]}freeRtt(n){for(const s in this._tiles){const d=this._tiles[s];(!n||d.tileID.equals(n)||d.tileID.isChildOf(n)||n.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(n=>this.getTileByID(n))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n){const s={};for(const d of this._renderableTilesKeys){const f=this._tiles[d].tileID;if(f.canonical.equals(n.canonical)){const y=n.clone();y.posMatrix=new Float64Array(16),c.aO(y.posMatrix,0,c.W,0,c.W,0,1),s[d]=y}else if(f.canonical.isChildOf(n.canonical)){const y=n.clone();y.posMatrix=new Float64Array(16);const b=f.canonical.z-n.canonical.z,T=f.canonical.x-(f.canonical.x>>b<<b),k=f.canonical.y-(f.canonical.y>>b<<b),P=c.W>>b;c.aO(y.posMatrix,0,P,0,P,0,1),c.H(y.posMatrix,y.posMatrix,[-T*P,-k*P,0]),s[d]=y}else if(n.canonical.isChildOf(f.canonical)){const y=n.clone();y.posMatrix=new Float64Array(16);const b=n.canonical.z-f.canonical.z,T=n.canonical.x-(n.canonical.x>>b<<b),k=n.canonical.y-(n.canonical.y>>b<<b),P=c.W>>b;c.aO(y.posMatrix,0,c.W,0,c.W,0,1),c.H(y.posMatrix,y.posMatrix,[T*P,k*P,0]),c.J(y.posMatrix,y.posMatrix,[1/2**b,1/2**b,0]),s[d]=y}}return s}getSourceTile(n,s){const d=this.sourceCache._source;let f=n.overscaledZ-this.deltaZoom;if(f>d.maxzoom&&(f=d.maxzoom),f<d.minzoom)return null;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(f).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[n.key]);if((!y||!y.dem)&&s)for(;f>=d.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(n.scaledTo(f--).key);return y}tilesAfterTime(n=Date.now()){return Object.values(this._tiles).filter(s=>s.timeAdded>=n)}}class Md{constructor(n,s,d){this.painter=n,this.sourceCache=new et(s),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(n,s,d,f=c.W){var y;if(!(s>=0&&s<f&&d>=0&&d<f))return 0;const b=this.getTerrainData(n),T=(y=b.tile)===null||y===void 0?void 0:y.dem;if(!T)return 0;const k=function(G,Q,K){var ne=Q[0],se=Q[1];return G[0]=K[0]*ne+K[4]*se+K[12],G[1]=K[1]*ne+K[5]*se+K[13],G}([],[s/f*c.W,d/f*c.W],b.u_terrain_matrix),P=[k[0]*T.dim,k[1]*T.dim],z=Math.floor(P[0]),M=Math.floor(P[1]),U=P[0]-z,$=P[1]-M;return T.get(z,M)*(1-U)*(1-$)+T.get(z+1,M)*U*(1-$)+T.get(z,M+1)*(1-U)*$+T.get(z+1,M+1)*U*$}getElevationForLngLatZoom(n,s){const{tileID:d,mercatorX:f,mercatorY:y}=this._getOverscaledTileIDFromLngLatZoom(n,s);return this.getElevation(d,f%c.W,y%c.W,c.W)}getElevation(n,s,d,f=c.W){return this.getDEMElevation(n,s,d,f)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const f=this.painter.context,y=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new $e(f,y,f.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new $e(f,new c.R({width:1,height:1}),f.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(f.gl.NEAREST,f.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.an([])}const s=this.sourceCache.getSourceTile(n,!0);if(s&&s.dem&&(!s.demTexture||s.needsTerrainPrepare)){const f=this.painter.context;s.demTexture=this.painter.getTileTexture(s.dem.stride),s.demTexture?s.demTexture.update(s.dem.getPixels(),{premultiply:!1}):s.demTexture=new $e(f,s.dem.getPixels(),f.gl.RGBA,{premultiply:!1}),s.demTexture.bind(f.gl.NEAREST,f.gl.CLAMP_TO_EDGE),s.needsTerrainPrepare=!1}const d=s&&s+s.tileID.key+n.key;if(d&&!this._demMatrixCache[d]){const f=this.sourceCache.sourceCache._source.maxzoom;let y=n.canonical.z-s.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=f?y=n.canonical.z-f:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const b=n.canonical.x-(n.canonical.x>>y<<y),T=n.canonical.y-(n.canonical.y>>y<<y),k=c.ba(new Float64Array(16),[1/(c.W<<y),1/(c.W<<y),0]);c.H(k,k,[b*c.W,T*c.W,0]),this._demMatrixCache[n.key]={matrix:k,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:s&&s.dem&&s.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:s&&s.dem&&s.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(s&&s.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:s}}getFramebuffer(n){const s=this.painter,d=s.width/devicePixelRatio,f=s.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===f||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new $e(s.context,{width:d,height:f,data:null},s.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(s.context.gl.NEAREST,s.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new $e(s.context,{width:d,height:f,data:null},s.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(s.context.gl.NEAREST,s.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=s.context.createFramebuffer(d,f,!0,!1),this._fbo.depthAttachment.set(s.context.createRenderbuffer(s.context.gl.DEPTH_COMPONENT16,d,f))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const s=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,b=0;y<this._coordsTextureSize;y++)for(let T=0;T<this._coordsTextureSize;T++,b+=4)s[b+0]=255&T,s[b+1]=255&y,s[b+2]=T>>8<<4|y>>8,s[b+3]=0;const d=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(s.buffer)),f=new $e(n,d,n.gl.RGBA,{premultiply:!1});return f.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=f,f}pointCoordinate(n){this.painter.maybeDrawDepthAndCoords(!0);const s=new Uint8Array(4),d=this.painter.context,f=d.gl,y=Math.round(n.x*this.painter.pixelRatio/devicePixelRatio),b=Math.round(n.y*this.painter.pixelRatio/devicePixelRatio),T=Math.round(this.painter.height/devicePixelRatio);d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),f.readPixels(y,T-b-1,1,1,f.RGBA,f.UNSIGNED_BYTE,s),d.bindFramebuffer.set(null);const k=s[0]+(s[2]>>4<<8),P=s[1]+((15&s[2])<<8),z=this.coordsIndex[255-s[3]],M=z&&this.sourceCache.getTileByID(z);if(!M)return null;const U=this._coordsTextureSize,$=(1<<M.tileID.canonical.z)*U;return new c.Y((M.tileID.canonical.x*U+k)/$+M.tileID.wrap,(M.tileID.canonical.y*U+P)/$,this.getElevation(M.tileID,k,P,U))}depthAtPoint(n){const s=new Uint8Array(4),d=this.painter.context,f=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),f.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,f.RGBA,f.UNSIGNED_BYTE,s),d.bindFramebuffer.set(null),(s[0]/16777216+s[1]/65536+s[2]/256+s[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const n=this.painter.context,s=new c.bb,d=new c.aY,f=this.meshSize,y=c.W/f,b=f*f;for(let M=0;M<=f;M++)for(let U=0;U<=f;U++)s.emplaceBack(U*y,M*y,0);for(let M=0;M<b;M+=f+1)for(let U=0;U<f;U++)d.emplaceBack(U+M,f+U+M+1,f+U+M+2),d.emplaceBack(U+M,f+U+M+2,U+M+1);const T=s.length,k=T+2*(f+1);for(const M of[0,1])for(let U=0;U<=f;U++)for(const $ of[0,1])s.emplaceBack(U*y,M*c.W,$);for(let M=0;M<2*f;M+=2)d.emplaceBack(k+M,k+M+1,k+M+3),d.emplaceBack(k+M,k+M+3,k+M+2),d.emplaceBack(T+M,T+M+3,T+M+1),d.emplaceBack(T+M,T+M+2,T+M+3);const P=s.length,z=P+2*(f+1);for(const M of[0,1])for(let U=0;U<=f;U++)for(const $ of[0,1])s.emplaceBack(M*c.W,U*y,$);for(let M=0;M<2*f;M+=2)d.emplaceBack(P+M,P+M+1,P+M+3),d.emplaceBack(P+M,P+M+3,P+M+2),d.emplaceBack(z+M,z+M+3,z+M+1),d.emplaceBack(z+M,z+M+2,z+M+3);return this._mesh={indexBuffer:n.createIndexBuffer(d),vertexBuffer:n.createVertexBuffer(s,Io.members),segments:c.$.simpleSegment(0,0,s.length,d.length)},this._mesh}getMeshFrameDelta(n){return 2*Math.PI*c.bc/Math.pow(2,n)/5}getMinTileElevationForLngLatZoom(n,s){var d;const{tileID:f}=this._getOverscaledTileIDFromLngLatZoom(n,s);return(d=this.getMinMaxElevation(f).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(n){const s=this.getTerrainData(n).tile,d={minElevation:null,maxElevation:null};return s&&s.dem&&(d.minElevation=s.dem.min*this.exaggeration,d.maxElevation=s.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(n,s){const d=c.Y.fromLngLat(n.wrap()),f=(1<<s)*c.W,y=d.x*f,b=d.y*f,T=Math.floor(y/c.W),k=Math.floor(b/c.W);return{tileID:new c.Q(s,0,s,T,k),mercatorX:y,mercatorY:b}}}class Ls{constructor(n,s,d){this._context=n,this._size=s,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const n of this._objects)n.texture.destroy(),n.fbo.destroy()}_createObject(n){const s=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new $e(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),s.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),s.colorAttachment.set(d.texture),{id:n,fbo:s,texture:d,stamp:-1,inUse:!1}}getObjectForId(n){return this._objects[n]}useObject(n){n.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(s=>n.id!==s),this._recentlyUsed.push(n.id)}stampObject(n){n.stamp=++this._stamp}getOrCreateFreeObject(){for(const s of this._recentlyUsed)if(!this._objects[s].inUse)return this._objects[s];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const n=this._createObject(this._objects.length);return this._objects.push(n),n}freeObject(n){n.inUse=!1}freeAllObjects(){for(const n of this._objects)this.freeObject(n)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(n=>!n.inUse)===!1}}const qi={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class zd{constructor(n,s){this.painter=n,this.terrain=s,this.pool=new Ls(n.context,30,s.sourceCache.tileSize*s.qualityFactor)}destruct(){this.pool.destruct()}getTexture(n){return this.pool.getObjectForId(n.rtt[this._stacks.length-1].id).texture}prepareForRender(n,s){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=n._order.filter(d=>!n._layers[d].isHidden(s)),this._coordsDescendingInv={};for(const d in n.sourceCaches){this._coordsDescendingInv[d]={};const f=n.sourceCaches[d].getVisibleCoordinates();for(const y of f){const b=this.terrain.sourceCache.getTerrainCoords(y);for(const T in b)this._coordsDescendingInv[d][T]||(this._coordsDescendingInv[d][T]=[]),this._coordsDescendingInv[d][T].push(b[T])}}this._coordsDescendingInvStr={};for(const d of n._order){const f=n._layers[d],y=f.source;if(qi[f.type]&&!this._coordsDescendingInvStr[y]){this._coordsDescendingInvStr[y]={};for(const b in this._coordsDescendingInv[y])this._coordsDescendingInvStr[y][b]=this._coordsDescendingInv[y][b].map(T=>T.key).sort().join()}}for(const d of this._renderableTiles)for(const f in this._coordsDescendingInvStr){const y=this._coordsDescendingInvStr[f][d.tileID.key];y&&y!==d.rttCoords[f]&&(d.rtt=[])}}renderLayer(n){if(n.isHidden(this.painter.transform.zoom))return!1;const s=n.type,d=this.painter,f=this._renderableLayerIds[this._renderableLayerIds.length-1]===n.id;if(qi[s]&&(this._prevType&&qi[this._prevType]||this._stacks.push([]),this._prevType=s,this._stacks[this._stacks.length-1].push(n.id),!f))return!0;if(qi[this._prevType]||qi[s]&&f){this._prevType=s;const y=this._stacks.length-1,b=this._stacks[y]||[];for(const T of this._renderableTiles){if(this.pool.isFull()&&(Sl(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(T),T.rtt[y]){const P=this.pool.getObjectForId(T.rtt[y].id);if(P.stamp===T.rtt[y].stamp){this.pool.useObject(P);continue}}const k=this.pool.getOrCreateFreeObject();this.pool.useObject(k),this.pool.stampObject(k),T.rtt[y]={id:k.id,stamp:k.stamp},d.context.bindFramebuffer.set(k.fbo.framebuffer),d.context.clear({color:c.aP.transparent,stencil:0}),d.currentStencilSource=void 0;for(let P=0;P<b.length;P++){const z=d.style._layers[b[P]],M=z.source?this._coordsDescendingInv[z.source][T.tileID.key]:[T.tileID];d.context.viewport.set([0,0,k.fbo.width,k.fbo.height]),d._renderTileClippingMasks(z,M),d.renderLayer(d,d.style.sourceCaches[z.source],z,M),z.source&&(T.rttCoords[z.source]=this._coordsDescendingInvStr[z.source][T.tileID.key])}}return Sl(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),qi[s]}return!1}}const Ke={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Cc=I,Cm={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Id,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Ld=g=>{g.touchstart=g.dragStart,g.touchmoveWindow=g.dragMove,g.touchend=g.dragEnd},Pc={showCompass:!0,showZoom:!0,visualizePitch:!1};class Rd{constructor(n,s,d=!1){this.mousedown=b=>{this.startMouse(c.e({},b,{ctrlKey:!0,preventDefault:()=>b.preventDefault()}),B.mousePos(this.element,b)),B.addEventListener(window,"mousemove",this.mousemove),B.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=b=>{this.moveMouse(b,B.mousePos(this.element,b))},this.mouseup=b=>{this.mouseRotate.dragEnd(b),this.mousePitch&&this.mousePitch.dragEnd(b),this.offTemp()},this.touchstart=b=>{b.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=B.touchPos(this.element,b.targetTouches)[0],this.startTouch(b,this._startPos),B.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),B.addEventListener(window,"touchend",this.touchend))},this.touchmove=b=>{b.targetTouches.length!==1?this.reset():(this._lastPos=B.touchPos(this.element,b.targetTouches)[0],this.moveTouch(b,this._lastPos))},this.touchend=b=>{b.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const f=n.dragRotate._mouseRotate.getClickTolerance(),y=n.dragRotate._mousePitch.getClickTolerance();this.element=s,this.mouseRotate=Jn({clickTolerance:f,enable:!0}),this.touchRotate=(({enable:b,clickTolerance:T,bearingDegreesPerPixelMoved:k=.8})=>{const P=new vr;return new ea({clickTolerance:T,move:(z,M)=>({bearingDelta:(M.x-z.x)*k}),moveStateManager:P,enable:b,assignEvents:Ld})})({clickTolerance:f,enable:!0}),this.map=n,d&&(this.mousePitch=Ml({clickTolerance:y,enable:!0}),this.touchPitch=(({enable:b,clickTolerance:T,pitchDegreesPerPixelMoved:k=-.5})=>{const P=new vr;return new ea({clickTolerance:T,move:(z,M)=>({pitchDelta:(M.y-z.y)*k}),moveStateManager:P,enable:b,assignEvents:Ld})})({clickTolerance:y,enable:!0})),B.addEventListener(s,"mousedown",this.mousedown),B.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),B.addEventListener(s,"touchcancel",this.reset)}startMouse(n,s){this.mouseRotate.dragStart(n,s),this.mousePitch&&this.mousePitch.dragStart(n,s),B.disableDrag()}startTouch(n,s){this.touchRotate.dragStart(n,s),this.touchPitch&&this.touchPitch.dragStart(n,s),B.disableDrag()}moveMouse(n,s){const d=this.map,{bearingDelta:f}=this.mouseRotate.dragMove(n,s)||{};if(f&&d.setBearing(d.getBearing()+f),this.mousePitch){const{pitchDelta:y}=this.mousePitch.dragMove(n,s)||{};y&&d.setPitch(d.getPitch()+y)}}moveTouch(n,s){const d=this.map,{bearingDelta:f}=this.touchRotate.dragMove(n,s)||{};if(f&&d.setBearing(d.getBearing()+f),this.touchPitch){const{pitchDelta:y}=this.touchPitch.dragMove(n,s)||{};y&&d.setPitch(d.getPitch()+y)}}off(){const n=this.element;B.removeEventListener(n,"mousedown",this.mousedown),B.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),B.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),B.removeEventListener(window,"touchend",this.touchend),B.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){B.enableDrag(),B.removeEventListener(window,"mousemove",this.mousemove),B.removeEventListener(window,"mouseup",this.mouseup),B.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),B.removeEventListener(window,"touchend",this.touchend)}}let Ao;function Dd(g,n,s){const d=new c.M(g.lng,g.lat);if(g=new c.M(g.lng,g.lat),n){const f=new c.M(g.lng-360,g.lat),y=new c.M(g.lng+360,g.lat),b=s.locationPoint(g).distSqr(n);s.locationPoint(f).distSqr(n)<b?g=f:s.locationPoint(y).distSqr(n)<b&&(g=y)}for(;Math.abs(g.lng-s.center.lng)>180;){const f=s.locationPoint(g);if(f.x>=0&&f.y>=0&&f.x<=s.width&&f.y<=s.height)break;g.lng>s.center.lng?g.lng-=360:g.lng+=360}return g.lng!==d.lng&&s.locationPoint(g).y>s.height/2-s.getHorizon()?g:d}const Ic={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Mo(g,n,s){const d=g.classList;for(const f in Ic)d.remove(`maplibregl-${s}-anchor-${f}`);d.add(`maplibregl-${s}-anchor-${n}`)}class rr extends c.E{constructor(n){if(super(),this._onKeyPress=s=>{const d=s.code,f=s.charCode||s.keyCode;d!=="Space"&&d!=="Enter"&&f!==32&&f!==13||this.togglePopup()},this._onMapClick=s=>{const d=s.originalEvent.target,f=this._element;this._popup&&(d===f||f.contains(d))&&this.togglePopup()},this._update=s=>{var d;if(!this._map)return;const f=this._map.loaded()&&!this._map.isMoving();((s==null?void 0:s.type)==="terrain"||(s==null?void 0:s.type)==="render"&&!f)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Dd(this._lngLat,this._flatPos,this._map.transform):(d=this._lngLat)===null||d===void 0?void 0:d.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b=`rotateX(${this._map.getPitch()}deg)`),s&&s.type!=="moveend"||(this._pos=this._pos.round()),B.setTransform(this._element,`${Ic[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${b} ${y}`),D.frameAsync(new AbortController).then(()=>{this._updateOpacity(s&&s.type==="moveend")}).catch(()=>{})},this._onMove=s=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=s.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=s.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.k("dragstart"))),this.fire(new c.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.k("dragend")),this._state="inactive"},this._addDragHandler=s=>{this._element.contains(s.originalEvent.target)&&(s.preventDefault(),this._positionDelta=s.point.sub(this._pos).add(this._offset),this._pointerdownPos=s.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(n==null?void 0:n.opacity,n==null?void 0:n.opacityWhenCovered),n&&n.element)this._element=n.element,this._offset=c.P.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=B.create("div");const s=B.createNS("http://www.w3.org/2000/svg","svg"),d=41,f=27;s.setAttributeNS(null,"display","block"),s.setAttributeNS(null,"height",`${d}px`),s.setAttributeNS(null,"width",`${f}px`),s.setAttributeNS(null,"viewBox",`0 0 ${f} ${d}`);const y=B.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");const b=B.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"fill-rule","nonzero");const T=B.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"transform","translate(3.0, 29.0)"),T.setAttributeNS(null,"fill","#000000");const k=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ne of k){const se=B.createNS("http://www.w3.org/2000/svg","ellipse");se.setAttributeNS(null,"opacity","0.04"),se.setAttributeNS(null,"cx","10.5"),se.setAttributeNS(null,"cy","5.80029008"),se.setAttributeNS(null,"rx",ne.rx),se.setAttributeNS(null,"ry",ne.ry),T.appendChild(se)}const P=B.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"fill",this._color);const z=B.createNS("http://www.w3.org/2000/svg","path");z.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),P.appendChild(z);const M=B.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"opacity","0.25"),M.setAttributeNS(null,"fill","#000000");const U=B.createNS("http://www.w3.org/2000/svg","path");U.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),M.appendChild(U);const $=B.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"transform","translate(6.0, 7.0)"),$.setAttributeNS(null,"fill","#FFFFFF");const G=B.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Q=B.createNS("http://www.w3.org/2000/svg","circle");Q.setAttributeNS(null,"fill","#000000"),Q.setAttributeNS(null,"opacity","0.25"),Q.setAttributeNS(null,"cx","5.5"),Q.setAttributeNS(null,"cy","5.5"),Q.setAttributeNS(null,"r","5.4999962");const K=B.createNS("http://www.w3.org/2000/svg","circle");K.setAttributeNS(null,"fill","#FFFFFF"),K.setAttributeNS(null,"cx","5.5"),K.setAttributeNS(null,"cy","5.5"),K.setAttributeNS(null,"r","5.4999962"),G.appendChild(Q),G.appendChild(K),b.appendChild(T),b.appendChild(P),b.appendChild(M),b.appendChild($),b.appendChild(G),s.appendChild(b),s.setAttributeNS(null,"height",d*this._scale+"px"),s.setAttributeNS(null,"width",f*this._scale+"px"),this._element.appendChild(s),this._offset=c.P.convert(n&&n.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",s=>{s.preventDefault()}),this._element.addEventListener("mousedown",s=>{s.preventDefault()}),Mo(this._element,this._anchor,"marker"),n&&n.className)for(const s of n.className.split(" "))this._element.classList.add(s);this._popup=null}addTo(n){return this.remove(),this._map=n,this._element.setAttribute("aria-label",n._getUIString("Marker.Title")),n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),n.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),B.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=c.M.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const f=Math.abs(13.5)/Math.SQRT2;n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[f,-1*(38.1-13.5+f)],"bottom-right":[-f,-1*(38.1-13.5+f)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const n=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:n?(n.isOpen()?n.remove():(n.setLngLat(this._lngLat),n.addTo(this._map)),this):this}_updateOpacity(n=!1){var s,d;if(!(!((s=this._map)===null||s===void 0)&&s.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(n)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const f=this._map,y=f.terrain.depthAtPoint(this._pos),b=f.terrain.getElevationForLngLatZoom(this._lngLat,f.transform.tileZoom);if(f.transform.lngLatToCameraDepth(this._lngLat,b)-y<.006)return void(this._element.style.opacity=this._opacity);const T=-this._offset.y/f.transform._pixelPerMeter,k=Math.sin(f.getPitch()*Math.PI/180)*T,P=f.terrain.depthAtPoint(new c.P(this._pos.x,this._pos.y-this._offset.y)),z=f.transform.lngLatToCameraDepth(this._lngLat,b+k)-P>.006;!((d=this._popup)===null||d===void 0)&&d.isOpen()&&z&&this._popup.remove(),this._element.style.opacity=z?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(n){return this._offset=c.P.convert(n),this._update(),this}addClassName(n){this._element.classList.add(n)}removeClassName(n){this._element.classList.remove(n)}toggleClassName(n){return this._element.classList.toggle(n)}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(n,s){return n===void 0&&s===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),n!==void 0&&(this._opacity=n),s!==void 0&&(this._opacityWhenCovered=s),this._map&&this._updateOpacity(!0),this}}const Dl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Aa=0,Ma=!1;const Od={maxWidth:100,unit:"metric"};function Ac(g,n,s){const d=s&&s.maxWidth||100,f=g._container.clientHeight/2,y=g.unproject([0,f]),b=g.unproject([d,f]),T=y.distanceTo(b);if(s&&s.unit==="imperial"){const k=3.2808*T;k>5280?Rs(n,d,k/5280,g._getUIString("ScaleControl.Miles")):Rs(n,d,k,g._getUIString("ScaleControl.Feet"))}else s&&s.unit==="nautical"?Rs(n,d,T/1852,g._getUIString("ScaleControl.NauticalMiles")):T>=1e3?Rs(n,d,T/1e3,g._getUIString("ScaleControl.Kilometers")):Rs(n,d,T,g._getUIString("ScaleControl.Meters"))}function Rs(g,n,s,d){const f=function(y){const b=Math.pow(10,`${Math.floor(y)}`.length-1);let T=y/b;return T=T>=10?10:T>=5?5:T>=3?3:T>=2?2:T>=1?1:function(k){const P=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10));return Math.round(k*P)/P}(T),b*T}(s);g.style.width=n*(f/s)+"px",g.innerHTML=`${f}&nbsp;${d}`}const Zi={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Ol=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function lt(g){if(g){if(typeof g=="number"){const n=Math.round(Math.abs(g)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,g),"top-left":new c.P(n,n),"top-right":new c.P(-n,n),bottom:new c.P(0,-g),"bottom-left":new c.P(n,-n),"bottom-right":new c.P(-n,-n),left:new c.P(g,0),right:new c.P(-g,0)}}if(g instanceof c.P||Array.isArray(g)){const n=c.P.convert(g);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:c.P.convert(g.center||[0,0]),top:c.P.convert(g.top||[0,0]),"top-left":c.P.convert(g["top-left"]||[0,0]),"top-right":c.P.convert(g["top-right"]||[0,0]),bottom:c.P.convert(g.bottom||[0,0]),"bottom-left":c.P.convert(g["bottom-left"]||[0,0]),"bottom-right":c.P.convert(g["bottom-right"]||[0,0]),left:c.P.convert(g.left||[0,0]),right:c.P.convert(g.right||[0,0])}}return lt(new c.P(0,0))}const gt=I;v.AJAXError=c.bf,v.Evented=c.E,v.LngLat=c.M,v.MercatorCoordinate=c.Y,v.Point=c.P,v.addProtocol=c.bg,v.config=c.a,v.removeProtocol=c.bh,v.AttributionControl=Ad,v.BoxZoomHandler=Is,v.CanvasSource=Vr,v.CooperativeGesturesHandler=di,v.DoubleClickZoomHandler=Sc,v.DragPanHandler=Tc,v.DragRotateHandler=Ia,v.EdgeInsets=Cs,v.FullscreenControl=class extends c.E{constructor(g={}){super(),this._onFullscreenChange=()=>{var n;let s=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((n=s==null?void 0:s.shadowRoot)===null||n===void 0)&&n.fullscreenElement;)s=s.shadowRoot.fullscreenElement;s===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,g&&g.container&&(g.container instanceof HTMLElement?this._container=g.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=B.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){B.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const g=this._fullscreenButton=B.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);B.create("span","maplibregl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.title=g}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new c.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},v.GeoJSONSource=Pt,v.GeolocateControl=class extends c.E{constructor(g){super(),this._onSuccess=n=>{if(this._map){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new c.k("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(n),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.k("geolocate",n)),this._finish()}},this._updateCamera=n=>{const s=new c.M(n.coords.longitude,n.coords.latitude),d=n.coords.accuracy,f=this._map.getBearing(),y=c.e({bearing:f},this.options.fitBoundsOptions),b=pr.fromLngLat(s,d);this._map.fitBounds(b,y,{geolocateSource:!0})},this._updateMarker=n=>{if(n){const s=new c.M(n.coords.longitude,n.coords.latitude);this._accuracyCircleMarker.setLngLat(s).addTo(this._map),this._userLocationDotMarker.setLngLat(s).addTo(this._map),this._accuracy=n.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=n=>{if(this._map){if(this.options.trackUserLocation)if(n.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(n.code===3&&Ma)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.k("error",n)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=n=>{if(this._map){if(this._container.addEventListener("contextmenu",s=>s.preventDefault()),this._geolocateButton=B.create("button","maplibregl-ctrl-geolocate",this._container),B.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",n===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s)}else{const s=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=B.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new rr({element:this._dotElement}),this._circleElement=B.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new rr({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",s=>{s.geolocateSource||this._watchState!=="ACTIVE_LOCK"||s.originalEvent&&s.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.k("trackuserlocationend")),this.fire(new c.k("userlocationlostfocus")))})}},this.options=c.e({},Dl,g)}onAdd(g){return this._map=g,this._container=B.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return c._(this,arguments,void 0,function*(n=!1){if(Ao!==void 0&&!n)return Ao;if(window.navigator.permissions===void 0)return Ao=!!window.navigator.geolocation,Ao;try{Ao=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Ao=!!window.navigator.geolocation}return Ao})}().then(n=>this._setupUI(n)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),B.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Aa=0,Ma=!1}_isOutOfMapMaxBounds(g){const n=this._map.getMaxBounds(),s=g.coords;return n&&(s.longitude<n.getWest()||s.longitude>n.getEast()||s.latitude<n.getSouth()||s.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const g=this._map.getBounds(),n=g.getSouthEast(),s=g.getNorthEast(),d=n.distanceTo(s),f=Math.ceil(this._accuracy/(d/this._map._container.clientHeight)*2);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Aa--,Ma=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.k("trackuserlocationstart")),this.fire(new c.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Aa++,Aa>1?(g={maximumAge:6e5,timeout:0},Ma=!0):(g=this.options.positionOptions,Ma=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,g)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},v.Hash=dc,v.ImageSource=ui,v.KeyboardHandler=Po,v.LngLatBounds=pr,v.LogoControl=Ec,v.Map=class extends Em{constructor(g){c.bd.mark(c.be.create);const n=Object.assign(Object.assign({},Cm),g);if(n.minZoom!=null&&n.maxZoom!=null&&n.minZoom>n.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(n.minPitch!=null&&n.maxPitch!=null&&n.minPitch>n.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(n.minPitch!=null&&n.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(n.maxPitch!=null&&n.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new hc(n.minZoom,n.maxZoom,n.minPitch,n.maxPitch,n.renderWorldCopies),{bearingSnap:n.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new zs,this._controls=[],this._mapId=c.a3(),this._contextLost=s=>{s.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new c.k("webglcontextlost",{originalEvent:s}))},this._contextRestored=s=>{this._setupPainter(),this.resize(),this._update(),this.fire(new c.k("webglcontextrestored",{originalEvent:s}))},this._onMapScroll=s=>{if(s.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=n.interactive,this._maxTileCacheSize=n.maxTileCacheSize,this._maxTileCacheZoomLevels=n.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=n.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=n.preserveDrawingBuffer===!0,this._antialias=n.antialias===!0,this._trackResize=n.trackResize===!0,this._bearingSnap=n.bearingSnap,this._refreshExpiredTiles=n.refreshExpiredTiles===!0,this._fadeDuration=n.fadeDuration,this._crossSourceCollisions=n.crossSourceCollisions===!0,this._collectResourceTiming=n.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Ke),n.locale),this._clickTolerance=n.clickTolerance,this._overridePixelRatio=n.pixelRatio,this._maxCanvasSize=n.maxCanvasSize,this.transformCameraUpdate=n.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=n.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=te.addThrottleControl(()=>this.isMoving()),this._requestManager=new _e(n.transformRequest),typeof n.container=="string"){if(this._container=document.getElementById(n.container),!this._container)throw new Error(`Container '${n.container}' not found.`)}else{if(!(n.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=n.container}if(n.maxBounds&&this.setMaxBounds(n.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let s=!1;const d=wd(f=>{this._trackResize&&!this._removed&&this.resize(f)._update()},50);this._resizeObserver=new ResizeObserver(f=>{s?d(f):s=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Ms(this,n),this._hash=n.hash&&new dc(typeof n.hash=="string"&&n.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}),n.bounds&&(this.resize(),this.fitBounds(n.bounds,c.e({},n.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=n.localIdeographFontFamily,this._validateStyle=n.validateStyle,n.style&&this.setStyle(n.style,{localIdeographFontFamily:n.localIdeographFontFamily}),n.attributionControl&&this.addControl(new Ad(typeof n.attributionControl=="boolean"?void 0:n.attributionControl)),n.maplibreLogo&&this.addControl(new Ec,n.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",s=>{this._update(s.dataType==="style"),this.fire(new c.k(`${s.dataType}data`,s))}),this.on("dataloading",s=>{this.fire(new c.k(`${s.dataType}dataloading`,s))}),this.on("dataabort",s=>{this.fire(new c.k("sourcedataabort",s))})}_getMapId(){return this._mapId}addControl(g,n){if(n===void 0&&(n=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new c.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const s=g.onAdd(this);this._controls.push(g);const d=this._controlPositions[n];return n.indexOf("bottom")!==-1?d.insertBefore(s,d.firstChild):d.appendChild(s),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new c.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(g);return n>-1&&this._controls.splice(n,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}calculateCameraOptionsFromTo(g,n,s,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(g,n,s,d)}resize(g){var n;const s=this._containerDimensions(),d=s[0],f=s[1],y=this._getClampedPixelRatio(d,f);if(this._resizeCanvas(d,f,y),this.painter.resize(d,f,y),this.painter.overLimit()){const T=this.painter.context.gl;this._maxCanvasSize=[T.drawingBufferWidth,T.drawingBufferHeight];const k=this._getClampedPixelRatio(d,f);this._resizeCanvas(d,f,k),this.painter.resize(d,f,k)}this.transform.resize(d,f),(n=this._requestedCameraState)===null||n===void 0||n.resize(d,f);const b=!this._moving;return b&&(this.stop(),this.fire(new c.k("movestart",g)).fire(new c.k("move",g))),this.fire(new c.k("resize",g)),b&&this.fire(new c.k("moveend",g)),this}_getClampedPixelRatio(g,n){const{0:s,1:d}=this._maxCanvasSize,f=this.getPixelRatio(),y=g*f,b=n*f;return Math.min(y>s?s/y:1,b>d?d/b:1)*f}getPixelRatio(){var g;return(g=this._overridePixelRatio)!==null&&g!==void 0?g:devicePixelRatio}setPixelRatio(g){this._overridePixelRatio=g,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(g){return this.transform.setMaxBounds(pr.convert(g)),this._update()}setMinZoom(g){if((g=g??-2)>=-2&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g&&this.setZoom(g),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g??22)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g&&this.setZoom(g),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g&&this.setPitch(g),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g&&this.setPitch(g),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.renderWorldCopies=g,this._update()}project(g){return this.transform.locationPoint(c.M.convert(g),this.style&&this.terrain)}unproject(g){return this.transform.pointLocation(c.P.convert(g),this.terrain)}isMoving(){var g;return this._moving||((g=this.handlers)===null||g===void 0?void 0:g.isMoving())}isZooming(){var g;return this._zooming||((g=this.handlers)===null||g===void 0?void 0:g.isZooming())}isRotating(){var g;return this._rotating||((g=this.handlers)===null||g===void 0?void 0:g.isRotating())}_createDelegatedListener(g,n,s){if(g==="mouseenter"||g==="mouseover"){let d=!1;return{layer:n,listener:s,delegates:{mousemove:y=>{const b=this.getLayer(n)?this.queryRenderedFeatures(y.point,{layers:[n]}):[];b.length?d||(d=!0,s.call(this,new ln(g,this,y.originalEvent,{features:b}))):d=!1},mouseout:()=>{d=!1}}}}if(g==="mouseleave"||g==="mouseout"){let d=!1;return{layer:n,listener:s,delegates:{mousemove:b=>{(this.getLayer(n)?this.queryRenderedFeatures(b.point,{layers:[n]}):[]).length?d=!0:d&&(d=!1,s.call(this,new ln(g,this,b.originalEvent)))},mouseout:b=>{d&&(d=!1,s.call(this,new ln(g,this,b.originalEvent)))}}}}{const d=f=>{const y=this.getLayer(n)?this.queryRenderedFeatures(f.point,{layers:[n]}):[];y.length&&(f.features=y,s.call(this,f),delete f.features)};return{layer:n,listener:s,delegates:{[g]:d}}}}on(g,n,s){if(s===void 0)return super.on(g,n);const d=this._createDelegatedListener(g,n,s);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(d);for(const f in d.delegates)this.on(f,d.delegates[f]);return this}once(g,n,s){if(s===void 0)return super.once(g,n);const d=this._createDelegatedListener(g,n,s);for(const f in d.delegates)this.once(f,d.delegates[f]);return this}off(g,n,s){return s===void 0?super.off(g,n):(this._delegatedListeners&&this._delegatedListeners[g]&&(d=>{const f=this._delegatedListeners[g];for(let y=0;y<f.length;y++){const b=f[y];if(b.layer===n&&b.listener===s){for(const T in b.delegates)this.off(T,b.delegates[T]);return f.splice(y,1),this}}})(),this)}queryRenderedFeatures(g,n){if(!this.style)return[];let s;const d=g instanceof c.P||Array.isArray(g),f=d?g:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(d?{}:g)||{},f instanceof c.P||typeof f[0]=="number")s=[c.P.convert(f)];else{const y=c.P.convert(f[0]),b=c.P.convert(f[1]);s=[y,new c.P(b.x,y.y),b,new c.P(y.x,b.y),y]}return this.style.queryRenderedFeatures(s,n,this.transform)}querySourceFeatures(g,n){return this.style.querySourceFeatures(g,n)}setStyle(g,n){return(n=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&g?(this._diffStyle(g,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(g,n))}setTransformRequest(g){return this._requestManager.setTransformRequest(g),this}_getUIString(g){const n=this._locale[g];if(n==null)throw new Error(`Missing UI string '${g}'`);return n}_updateStyle(g,n){if(n.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(g,n));const s=this.style&&n.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!g)),g?(this.style=new ol(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g,n,s):this.style.loadJSON(g,n,s),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ol(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,n){if(typeof g=="string"){const s=this._requestManager.transformRequest(g,"Style");c.h(s,new AbortController).then(d=>{this._updateDiff(d.data,n)}).catch(d=>{d&&this.fire(new c.j(d))})}else typeof g=="object"&&this._updateDiff(g,n)}_updateDiff(g,n){try{this.style.setState(g,n)&&this._update(!0)}catch(s){c.w(`Unable to perform style diff: ${s.message||s.error||s}.  Rebuilding the style from scratch.`),this._updateStyle(g,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(g,n){return this._lazyInitEmptyStyle(),this.style.addSource(g,n),this._update(!0)}isSourceLoaded(g){const n=this.style&&this.style.sourceCaches[g];if(n!==void 0)return n.loaded();this.fire(new c.j(new Error(`There is no source with ID '${g}'`)))}setTerrain(g){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),g){const n=this.style.sourceCaches[g.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${g.source}`);this.terrain===null&&n.reload();for(const s in this.style._layers){const d=this.style._layers[s];d.type==="hillshade"&&d.source===g.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Md(this.painter,n,g),this.painter.renderToTexture=new zd(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=s=>{s.dataType==="style"?this.terrain.sourceCache.freeRtt():s.dataType==="source"&&s.tile&&(s.sourceId!==g.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(s.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new c.k("terrain",{terrain:g})),this}getTerrain(){var g,n;return(n=(g=this.terrain)===null||g===void 0?void 0:g.options)!==null&&n!==void 0?n:null}areTilesLoaded(){const g=this.style&&this.style.sourceCaches;for(const n in g){const s=g[n]._tiles;for(const d in s){const f=s[d];if(f.state!=="loaded"&&f.state!=="errored")return!1}}return!0}removeSource(g){return this.style.removeSource(g),this._update(!0)}getSource(g){return this.style.getSource(g)}addImage(g,n,s={}){const{pixelRatio:d=1,sdf:f=!1,stretchX:y,stretchY:b,content:T,textFitWidth:k,textFitHeight:P}=s;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||c.b(n))){if(n.width===void 0||n.height===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:z,height:M,data:U}=n,$=n;return this.style.addImage(g,{data:new c.R({width:z,height:M},new Uint8Array(U)),pixelRatio:d,stretchX:y,stretchY:b,content:T,textFitWidth:k,textFitHeight:P,sdf:f,version:0,userImage:$}),$.onAdd&&$.onAdd(this,g),this}}{const{width:z,height:M,data:U}=D.getImageData(n);this.style.addImage(g,{data:new c.R({width:z,height:M},U),pixelRatio:d,stretchX:y,stretchY:b,content:T,textFitWidth:k,textFitHeight:P,sdf:f,version:0})}}updateImage(g,n){const s=this.style.getImage(g);if(!s)return this.fire(new c.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=n instanceof HTMLImageElement||c.b(n)?D.getImageData(n):n,{width:f,height:y,data:b}=d;if(f===void 0||y===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(f!==s.data.width||y!==s.data.height)return this.fire(new c.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const T=!(n instanceof HTMLImageElement||c.b(n));return s.data.replace(b,T),this.style.updateImage(g,s),this}getImage(g){return this.style.getImage(g)}hasImage(g){return g?!!this.style.getImage(g):(this.fire(new c.j(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g){return te.getImage(this._requestManager.transformRequest(g,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(g,n){return this._lazyInitEmptyStyle(),this.style.addLayer(g,n),this._update(!0)}moveLayer(g,n){return this.style.moveLayer(g,n),this._update(!0)}removeLayer(g){return this.style.removeLayer(g),this._update(!0)}getLayer(g){return this.style.getLayer(g)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(g,n,s){return this.style.setLayerZoomRange(g,n,s),this._update(!0)}setFilter(g,n,s={}){return this.style.setFilter(g,n,s),this._update(!0)}getFilter(g){return this.style.getFilter(g)}setPaintProperty(g,n,s,d={}){return this.style.setPaintProperty(g,n,s,d),this._update(!0)}getPaintProperty(g,n){return this.style.getPaintProperty(g,n)}setLayoutProperty(g,n,s,d={}){return this.style.setLayoutProperty(g,n,s,d),this._update(!0)}getLayoutProperty(g,n){return this.style.getLayoutProperty(g,n)}setGlyphs(g,n={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(g,n),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(g,n,s={}){return this._lazyInitEmptyStyle(),this.style.addSprite(g,n,s,d=>{d||this._update(!0)}),this}removeSprite(g){return this._lazyInitEmptyStyle(),this.style.removeSprite(g),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(g,n={}){return this._lazyInitEmptyStyle(),this.style.setSprite(g,n,s=>{s||this._update(!0)}),this}setLight(g,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(g,n),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(g,n){return this.style.setFeatureState(g,n),this._update()}removeFeatureState(g,n){return this.style.removeFeatureState(g,n),this._update()}getFeatureState(g){return this.style.getFeatureState(g)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let g=0,n=0;return this._container&&(g=this._container.clientWidth||400,n=this._container.clientHeight||300),[g,n]}_setupContainer(){const g=this._container;g.classList.add("maplibregl-map");const n=this._canvasContainer=B.create("div","maplibregl-canvas-container",g);this._interactive&&n.classList.add("maplibregl-interactive"),this._canvas=B.create("canvas","maplibregl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const s=this._containerDimensions(),d=this._getClampedPixelRatio(s[0],s[1]);this._resizeCanvas(s[0],s[1],d);const f=this._controlContainer=B.create("div","maplibregl-control-container",g),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(b=>{y[b]=B.create("div",`maplibregl-ctrl-${b} `,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(g,n,s){this._canvas.width=Math.floor(s*g),this._canvas.height=Math.floor(s*n),this._canvas.style.width=`${g}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const g={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let n=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{n={requestedAttributes:g},d&&(n.statusMessage=d.statusMessage,n.type=d.type)},{once:!0});const s=this._canvas.getContext("webgl2",g)||this._canvas.getContext("webgl",g);if(!s){const d="Failed to initialize WebGL";throw n?(n.message=d,new Error(JSON.stringify(n))):new Error(d)}this.painter=new jt(s,this.transform),le.testSupport(s)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_render(g){const n=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(g),this._removed)return;let s=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const f=this.transform.zoom,y=D.now();this.style.zoomHistory.update(f,y);const b=new c.a8(f,{now:y,fadeDuration:n,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),T=b.crossFadingFactor();T===1&&T===this._crossFadingFactor||(s=!0,this._crossFadingFactor=T),this.style.update(b)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,n,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:n,showPadding:this.showPadding}),this.fire(new c.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.bd.mark(c.be.load),this.fire(new c.k("load"))),this.style&&(this.style.hasTransitions()||s)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.k("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,c.bd.mark(c.be.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var g;this._hash&&this._hash.remove();for(const s of this._controls)s.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),te.removeThrottleControl(this._imageQueueHandle),(g=this._resizeObserver)===null||g===void 0||g.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");n!=null&&n.loseContext&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),B.remove(this._canvasContainer),B.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),c.bd.clearMetrics(),this._removed=!0,this.fire(new c.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,D.frameAsync(this._frameRequest).then(g=>{c.bd.frame(g),this._frameRequest=null,this._render(g)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get version(){return Cc}getCameraTargetElevation(){return this.transform.elevation}},v.MapMouseEvent=ln,v.MapTouchEvent=Qo,v.MapWheelEvent=bd,v.Marker=rr,v.NavigationControl=class{constructor(g){this._updateZoomButtons=()=>{const n=this._map.getZoom(),s=n===this._map.getMaxZoom(),d=n===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{const n=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=n},this._setButtonTitle=(n,s)=>{const d=this._map._getUIString(`NavigationControl.${s}`);n.title=d,n.setAttribute("aria-label",d)},this.options=c.e({},Pc,g),this._container=B.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",n=>this._map.zoomIn({},{originalEvent:n})),B.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",n=>this._map.zoomOut({},{originalEvent:n})),B.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}),this._compassIcon=B.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Rd(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){B.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(g,n){const s=B.create("button",g,this._container);return s.type="button",s.addEventListener("click",n),s}},v.Popup=class extends c.E{constructor(g){super(),this.remove=()=>(this._content&&B.remove(this._content),this._container&&(B.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new c.k("close"))),this),this._onMouseUp=n=>{this._update(n.point)},this._onMouseMove=n=>{this._update(n.point)},this._onDrag=n=>{this._update(n.point)},this._update=n=>{var s;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=B.create("div","maplibregl-popup",this._map.getContainer()),this._tip=B.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Dd(this._lngLat,this._flatPos,this._map.transform):(s=this._lngLat)===null||s===void 0?void 0:s.wrap(),this._trackPointer&&!n)return;const d=this._flatPos=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&n?n:this._map.transform.locationPoint(this._lngLat));let f=this.options.anchor;const y=lt(this.options.offset);if(!f){const T=this._container.offsetWidth,k=this._container.offsetHeight;let P;P=d.y+y.bottom.y<k?["top"]:d.y>this._map.transform.height-k?["bottom"]:[],d.x<T/2?P.push("left"):d.x>this._map.transform.width-T/2&&P.push("right"),f=P.length===0?"bottom":P.join("-")}let b=d.add(y[f]);this.options.subpixelPositioning||(b=b.round()),B.setTransform(this._container,`${Ic[f]} translate(${b.x}px,${b.y}px)`),Mo(this._container,f,"popup")},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(Zi),g)}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(g){return this._lngLat=c.M.convert(g),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(document.createTextNode(g))}setHTML(g){const n=document.createDocumentFragment(),s=document.createElement("body");let d;for(s.innerHTML=g;d=s.firstChild,d;)n.appendChild(d);return this.setDOMContent(n)}getMaxWidth(){var g;return(g=this._container)===null||g===void 0?void 0:g.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=B.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(g),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(g){return this._container&&this._container.classList.add(g),this}removeClassName(g){return this._container&&this._container.classList.remove(g),this}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){if(this._container)return this._container.classList.toggle(g)}setSubpixelPositioning(g){this.options.subpixelPositioning=g}_createCloseButton(){this.options.closeButton&&(this._closeButton=B.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const g=this._container.querySelector(Ol);g&&g.focus()}},v.RasterDEMTileSource=wn,v.RasterTileSource=Ti,v.ScaleControl=class{constructor(g){this._onMove=()=>{Ac(this._map,this._container,this.options)},this.setUnit=n=>{this.options.unit=n,Ac(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Od),g)}getDefaultPosition(){return"bottom-left"}onAdd(g){return this._map=g,this._container=B.create("div","maplibregl-ctrl maplibregl-ctrl-scale",g.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){B.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},v.ScrollZoomHandler=bc,v.Style=ol,v.TerrainControl=class{constructor(g){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=g}onAdd(g){return this._map=g,this._container=B.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=B.create("button","maplibregl-ctrl-terrain",this._container),B.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){B.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},v.TwoFingersTouchPitchHandler=xc,v.TwoFingersTouchRotateHandler=vc,v.TwoFingersTouchZoomHandler=Ll,v.TwoFingersTouchZoomRotateHandler=kc,v.VectorTileSource=be,v.VideoSource=ao,v.addSourceType=(g,n)=>c._(void 0,void 0,void 0,function*(){if(zn(g))throw new Error(`A source type called "${g}" already exists.`);((s,d)=>{ci[s]=d})(g,n)}),v.clearPrewarmedResources=function(){const g=Ir;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(Rt),Ir=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},v.getMaxParallelImageRequests=function(){return c.a.MAX_PARALLEL_IMAGE_REQUESTS},v.getRTLTextPluginStatus=function(){return sn().getRTLTextPluginStatus()},v.getVersion=function(){return gt},v.getWorkerCount=function(){return er.workerCount},v.getWorkerUrl=function(){return c.a.WORKER_URL},v.importScriptInWorkers=function(g){return To().broadcast("IS",g)},v.prewarm=function(){Gr().acquire(Rt)},v.setMaxParallelImageRequests=function(g){c.a.MAX_PARALLEL_IMAGE_REQUESTS=g},v.setRTLTextPlugin=function(g,n){return sn().setRTLTextPlugin(g,n)},v.setWorkerCount=function(g){er.workerCount=g},v.setWorkerUrl=function(g){c.a.WORKER_URL=g}});var x=a;return x})})(D2);var t0=D2.exports;const Qt=Bu(t0);var p_={exports:{}},xu=typeof Reflect=="object"?Reflect:null,bx=xu&&typeof xu.apply=="function"?xu.apply:function(t,a,u){return Function.prototype.apply.call(t,a,u)},Up;xu&&typeof xu.ownKeys=="function"?Up=xu.ownKeys:Object.getOwnPropertySymbols?Up=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Up=function(t){return Object.getOwnPropertyNames(t)};function NP(e){console&&console.warn&&console.warn(e)}var F2=Number.isNaN||function(t){return t!==t};function dr(){dr.init.call(this)}p_.exports=dr;p_.exports.once=$P;dr.EventEmitter=dr;dr.prototype._events=void 0;dr.prototype._eventsCount=0;dr.prototype._maxListeners=void 0;var Sx=10;function em(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(dr,"defaultMaxListeners",{enumerable:!0,get:function(){return Sx},set:function(e){if(typeof e!="number"||e<0||F2(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Sx=e}});dr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};dr.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||F2(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function B2(e){return e._maxListeners===void 0?dr.defaultMaxListeners:e._maxListeners}dr.prototype.getMaxListeners=function(){return B2(this)};dr.prototype.emit=function(t){for(var a=[],u=1;u<arguments.length;u++)a.push(arguments[u]);var h=t==="error",x=this._events;if(x!==void 0)h=h&&x.error===void 0;else if(!h)return!1;if(h){var v;if(a.length>0&&(v=a[0]),v instanceof Error)throw v;var c=new Error("Unhandled error."+(v?" ("+v.message+")":""));throw c.context=v,c}var I=x[t];if(I===void 0)return!1;if(typeof I=="function")bx(I,this,a);else for(var F=I.length,W=$2(I,F),u=0;u<F;++u)bx(W[u],this,a);return!0};function N2(e,t,a,u){var h,x,v;if(em(a),x=e._events,x===void 0?(x=e._events=Object.create(null),e._eventsCount=0):(x.newListener!==void 0&&(e.emit("newListener",t,a.listener?a.listener:a),x=e._events),v=x[t]),v===void 0)v=x[t]=a,++e._eventsCount;else if(typeof v=="function"?v=x[t]=u?[a,v]:[v,a]:u?v.unshift(a):v.push(a),h=B2(e),h>0&&v.length>h&&!v.warned){v.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+v.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=v.length,NP(c)}return e}dr.prototype.addListener=function(t,a){return N2(this,t,a,!1)};dr.prototype.on=dr.prototype.addListener;dr.prototype.prependListener=function(t,a){return N2(this,t,a,!0)};function jP(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function j2(e,t,a){var u={fired:!1,wrapFn:void 0,target:e,type:t,listener:a},h=jP.bind(u);return h.listener=a,u.wrapFn=h,h}dr.prototype.once=function(t,a){return em(a),this.on(t,j2(this,t,a)),this};dr.prototype.prependOnceListener=function(t,a){return em(a),this.prependListener(t,j2(this,t,a)),this};dr.prototype.removeListener=function(t,a){var u,h,x,v,c;if(em(a),h=this._events,h===void 0)return this;if(u=h[t],u===void 0)return this;if(u===a||u.listener===a)--this._eventsCount===0?this._events=Object.create(null):(delete h[t],h.removeListener&&this.emit("removeListener",t,u.listener||a));else if(typeof u!="function"){for(x=-1,v=u.length-1;v>=0;v--)if(u[v]===a||u[v].listener===a){c=u[v].listener,x=v;break}if(x<0)return this;x===0?u.shift():UP(u,x),u.length===1&&(h[t]=u[0]),h.removeListener!==void 0&&this.emit("removeListener",t,c||a)}return this};dr.prototype.off=dr.prototype.removeListener;dr.prototype.removeAllListeners=function(t){var a,u,h;if(u=this._events,u===void 0)return this;if(u.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):u[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete u[t]),this;if(arguments.length===0){var x=Object.keys(u),v;for(h=0;h<x.length;++h)v=x[h],v!=="removeListener"&&this.removeAllListeners(v);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(a=u[t],typeof a=="function")this.removeListener(t,a);else if(a!==void 0)for(h=a.length-1;h>=0;h--)this.removeListener(t,a[h]);return this};function U2(e,t,a){var u=e._events;if(u===void 0)return[];var h=u[t];return h===void 0?[]:typeof h=="function"?a?[h.listener||h]:[h]:a?VP(h):$2(h,h.length)}dr.prototype.listeners=function(t){return U2(this,t,!0)};dr.prototype.rawListeners=function(t){return U2(this,t,!1)};dr.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):V2.call(e,t)};dr.prototype.listenerCount=V2;function V2(e){var t=this._events;if(t!==void 0){var a=t[e];if(typeof a=="function")return 1;if(a!==void 0)return a.length}return 0}dr.prototype.eventNames=function(){return this._eventsCount>0?Up(this._events):[]};function $2(e,t){for(var a=new Array(t),u=0;u<t;++u)a[u]=e[u];return a}function UP(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function VP(e){for(var t=new Array(e.length),a=0;a<t.length;++a)t[a]=e[a].listener||e[a];return t}function $P(e,t){return new Promise(function(a,u){function h(v){e.removeListener(t,x),u(v)}function x(){typeof e.removeListener=="function"&&e.removeListener("error",h),a([].slice.call(arguments))}H2(e,t,x,{once:!0}),t!=="error"&&HP(e,h,{once:!0})})}function HP(e,t,a){typeof e.on=="function"&&H2(e,"error",t,a)}function H2(e,t,a,u){if(typeof e.on=="function")u.once?e.once(t,a):e.on(t,a);else if(typeof e.addEventListener=="function")e.addEventListener(t,function h(x){u.once&&e.removeEventListener(t,h),a(x)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var WP=p_.exports;const qP=Bu(WP);function ZP(){return typeof self<"u"?fetch.bind(self):typeof global<"u"&&global.fetch?global.fetch:null}class GP{constructor(){this._apiKey="",this._fetch=ZP(),this.tileCacheSize=200}set apiKey(t){this._apiKey=t}get apiKey(){return this._apiKey}set fetch(t){this._fetch=t}get fetch(){return this._fetch}}const wu=new GP,KP={AUTO:"auto",ALBANIAN:"sq",ARABIC:"ar",ARMENIAN:"hy",AZERBAIJANI:"az",BELORUSSIAN:"be",BOSNIAN:"bs",BRETON:"br",BULGARIAN:"bg",CATALAN:"ca",CHINESE:"zh",CROATIAN:"hr",CZECH:"cs",DANISH:"da",DUTCH:"nl",ENGLISH:"en",ESPERANTO:"eo",ESTONIAN:"et",FINNISH:"fi",FRENCH:"fr",FRISIAN:"fy",GEORGIAN:"ka",GERMAN:"de",GREEK:"el",HEBREW:"he",HUNGARIAN:"hu",ICELANDIC:"is",IRISH:"ga",ITALIAN:"it",JAPANESE:"ja",KANNADA:"kn",KAZAKH:"kk",KOREAN:"ko",ROMAN_LATIN:"la",LATVIAN:"lv",LITHUANIAN:"lt",LUXEMBOURGISH:"lb",MACEDONIAN:"mk",MALTESE:"mt",NORWEGIAN:"no",POLISH:"pl",PORTUGUESE:"pt",ROMANIAN:"ro",ROMANSH:"rm",RUSSIAN:"ru",SCOTTISH_GAELIC:"gd",SERBIAN_CYRILLIC:"sr",SLOVAK:"sk",SLOVENE:"sl",SPANISH:"es",SWEDISH:"sv",THAI:"th",TURKISH:"tr",UKRAINIAN:"uk",WELSH:"cy"};new Set(Object.values(KP));async function XP(e,t={}){if(wu.fetch===null)throw new Error("The fetch function was not found. If on NodeJS < 18 please specify the fetch function with config.fetch");if(new URL(e).searchParams.get("key").trim()==="")throw new Error("The MapTiler Cloud API key is missing. Set it in `config.apiKey` or get one for free at https://maptiler.com");return wu.fetch(e,t)}const W2={maptilerApiURL:"https://api.maptiler.com/",mapStyle:"streets-v2"};Object.freeze(W2);class YP extends Error{constructor(t,a=""){super(`Call to enpoint ${t.url} failed with the status code ${t.status}. ${a}`),this.res=t}}const Tx={403:"Key is missing, invalid or restricted"};async function JP(e={}){const t=new URL("geolocation/ip.json",W2.maptilerApiURL);t.searchParams.set("key",e.apiKey??wu.apiKey);const a=t.toString(),u=await XP(a);if(!u.ok)throw new YP(u,u.status in Tx?Tx[u.status]:"");return await u.json()}const kx={info:JP};function q2(e){const t=/^maptiler:\/\/(.*)/;let a;const u=e.trim();let h;return u.startsWith("http://")||u.startsWith("https://")?h=u:(a=t.exec(u))!==null?h=`https://api.maptiler.com/maps/${a[1]}/style.json`:h=`https://api.maptiler.com/maps/${u}/style.json`,h}class Z2{constructor(t,a,u,h,x,v){this.name=t,this.variantType=a,this.id=u,this.referenceStyle=h,this.description=x,this.imageURL=v}getName(){return this.name}getFullName(){return`${this.referenceStyle.getName()} ${this.name}`}getType(){return this.variantType}getId(){return this.id}getDescription(){return this.description}getReferenceStyle(){return this.referenceStyle}hasVariant(t){return this.referenceStyle.hasVariant(t)}getVariant(t){return this.referenceStyle.getVariant(t)}getVariants(){return this.referenceStyle.getVariants().filter(t=>t!==this)}getImageURL(){return this.imageURL}getExpandedStyleURL(){return q2(this.getId())}}class G2{constructor(t,a){this.name=t,this.id=a,this.variants={},this.orderedVariants=[]}getName(){return this.name}getId(){return this.id}addVariant(t){this.variants[t.getType()]=t,this.orderedVariants.push(t)}hasVariant(t){return t in this.variants}getVariant(t){return t in this.variants?this.variants[t]:this.orderedVariants[0]}getVariants(){return Object.values(this.variants)}getDefaultVariant(){return this.orderedVariants[0]}}const r0=[{referenceStyleID:"STREETS",name:"Streets",description:"",variants:[{id:"streets-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"streets-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"streets-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"streets-v2-night",name:"Night",variantType:"NIGHT",description:"",imageURL:""},{id:"streets-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OUTDOOR",name:"Outdoor",description:"",variants:[{id:"outdoor-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"outdoor-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"WINTER",name:"Winter",description:"",variants:[{id:"winter-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"winter-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"SATELLITE",name:"Satellite",description:"",variants:[{id:"satellite",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"HYBRID",name:"Hybrid",description:"",variants:[{id:"hybrid",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"BASIC",name:"Basic",description:"",variants:[{id:"basic-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"basic-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"basic-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BRIGHT",name:"Bright",description:"",variants:[{id:"bright-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"bright-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"bright-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"bright-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OPENSTREETMAP",name:"OpenStreetMap",description:"",variants:[{id:"openstreetmap",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"TOPO",name:"Topo",description:"",variants:[{id:"topo-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"topo-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"topo-v2-shiny",name:"Shiny",variantType:"SHINY",description:"",imageURL:""},{id:"topo-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""},{id:"topo-v2-topographique",name:"Topographique",variantType:"TOPOGRAPHIQUE",description:"",imageURL:""}]},{referenceStyleID:"VOYAGER",name:"Voyager",description:"",variants:[{id:"voyager-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"voyager-v2-darkmatter",name:"Darkmatter",variantType:"DARK",description:"",imageURL:""},{id:"voyager-v2-positron",name:"Positron",variantType:"LIGHT",description:"",imageURL:""},{id:"voyager-v2-vintage",name:"Vintage",variantType:"VINTAGE",description:"",imageURL:""}]},{referenceStyleID:"TONER",name:"Toner",description:"",variants:[{id:"toner-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"toner-v2-background",name:"Background",variantType:"BACKGROUND",description:"",imageURL:""},{id:"toner-v2-lite",name:"Lite",variantType:"LITE",description:"",imageURL:""},{id:"toner-v2-lines",name:"Lines",variantType:"LINES",description:"",imageURL:""}]},{referenceStyleID:"DATAVIZ",name:"Dataviz",description:"",variants:[{id:"dataviz",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"dataviz-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"dataviz-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BACKDROP",name:"Backdrop",description:"",variants:[{id:"backdrop",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"backdrop-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"backdrop-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"OCEAN",name:"Ocean",description:"",variants:[{id:"ocean",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]}];function QP(e){return new Proxy(e,{get(t,a,u){return t.hasVariant(a)?t.getVariant(a):a.toString().toUpperCase()===a?e.getDefaultVariant():Reflect.get(t,a,u)}})}function eI(){const e={};for(let t=0;t<r0.length;t+=1){const a=r0[t],u=QP(new G2(a.name,a.referenceStyleID));for(let h=0;h<a.variants.length;h+=1){const x=a.variants[h],v=new Z2(x.name,x.variantType,x.id,u,x.description,x.imageURL);u.addVariant(v)}e[a.referenceStyleID]=u}return e}const tI=eI();let kp;const rI=new Uint8Array(16);function nI(){if(!kp&&(kp=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!kp))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return kp(rI)}const Cn=[];for(let e=0;e<256;++e)Cn.push((e+256).toString(16).slice(1));function iI(e,t=0){return Cn[e[t+0]]+Cn[e[t+1]]+Cn[e[t+2]]+Cn[e[t+3]]+"-"+Cn[e[t+4]]+Cn[e[t+5]]+"-"+Cn[e[t+6]]+Cn[e[t+7]]+"-"+Cn[e[t+8]]+Cn[e[t+9]]+"-"+Cn[e[t+10]]+Cn[e[t+11]]+Cn[e[t+12]]+Cn[e[t+13]]+Cn[e[t+14]]+Cn[e[t+15]]}const oI=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ex={randomUUID:oI};function aI(e,t,a){if(Ex.randomUUID&&!t&&!e)return Ex.randomUUID();e=e||{};const u=e.random||(e.rng||nI)();return u[6]=u[6]&15|64,u[8]=u[8]&63|128,iI(u)}const K2="3.7.7",sI=K2,$u=typeof Buffer=="function",Cx=typeof TextDecoder=="function"?new TextDecoder:void 0,Px=typeof TextEncoder=="function"?new TextEncoder:void 0,lI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",fh=Array.prototype.slice.call(lI),Ep=(e=>{let t={};return e.forEach((a,u)=>t[a]=u),t})(fh),uI=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,In=String.fromCharCode.bind(String),Ix=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),X2=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),Y2=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),J2=e=>{let t,a,u,h,x="";const v=e.length%3;for(let c=0;c<e.length;){if((a=e.charCodeAt(c++))>255||(u=e.charCodeAt(c++))>255||(h=e.charCodeAt(c++))>255)throw new TypeError("invalid character found");t=a<<16|u<<8|h,x+=fh[t>>18&63]+fh[t>>12&63]+fh[t>>6&63]+fh[t&63]}return v?x.slice(0,v-3)+"===".substring(v):x},f_=typeof btoa=="function"?e=>btoa(e):$u?e=>Buffer.from(e,"binary").toString("base64"):J2,n0=$u?e=>Buffer.from(e).toString("base64"):e=>{let a=[];for(let u=0,h=e.length;u<h;u+=4096)a.push(In.apply(null,e.subarray(u,u+4096)));return f_(a.join(""))},Vp=(e,t=!1)=>t?X2(n0(e)):n0(e),cI=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?In(192|t>>>6)+In(128|t&63):In(224|t>>>12&15)+In(128|t>>>6&63)+In(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return In(240|t>>>18&7)+In(128|t>>>12&63)+In(128|t>>>6&63)+In(128|t&63)}},hI=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Q2=e=>e.replace(hI,cI),Ax=$u?e=>Buffer.from(e,"utf8").toString("base64"):Px?e=>n0(Px.encode(e)):e=>f_(Q2(e)),bu=(e,t=!1)=>t?X2(Ax(e)):Ax(e),Mx=e=>bu(e,!0),dI=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,pI=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),a=t-65536;return In((a>>>10)+55296)+In((a&1023)+56320);case 3:return In((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return In((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},eS=e=>e.replace(dI,pI),tS=e=>{if(e=e.replace(/\s+/g,""),!uI.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,a="",u,h;for(let x=0;x<e.length;)t=Ep[e.charAt(x++)]<<18|Ep[e.charAt(x++)]<<12|(u=Ep[e.charAt(x++)])<<6|(h=Ep[e.charAt(x++)]),a+=u===64?In(t>>16&255):h===64?In(t>>16&255,t>>8&255):In(t>>16&255,t>>8&255,t&255);return a},m_=typeof atob=="function"?e=>atob(Y2(e)):$u?e=>Buffer.from(e,"base64").toString("binary"):tS,rS=$u?e=>Ix(Buffer.from(e,"base64")):e=>Ix(m_(e).split("").map(t=>t.charCodeAt(0))),nS=e=>rS(iS(e)),fI=$u?e=>Buffer.from(e,"base64").toString("utf8"):Cx?e=>Cx.decode(rS(e)):e=>eS(m_(e)),iS=e=>Y2(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),i0=e=>fI(iS(e)),mI=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},oS=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),aS=function(){const e=(t,a)=>Object.defineProperty(String.prototype,t,oS(a));e("fromBase64",function(){return i0(this)}),e("toBase64",function(t){return bu(this,t)}),e("toBase64URI",function(){return bu(this,!0)}),e("toBase64URL",function(){return bu(this,!0)}),e("toUint8Array",function(){return nS(this)})},sS=function(){const e=(t,a)=>Object.defineProperty(Uint8Array.prototype,t,oS(a));e("toBase64",function(t){return Vp(this,t)}),e("toBase64URI",function(){return Vp(this,!0)}),e("toBase64URL",function(){return Vp(this,!0)})},gI=()=>{aS(),sS()},yI={version:K2,VERSION:sI,atob:m_,atobPolyfill:tS,btoa:f_,btoaPolyfill:J2,fromBase64:i0,toBase64:bu,encode:bu,encodeURI:Mx,encodeURL:Mx,utob:Q2,btou:eS,decode:i0,isValid:mI,fromUint8Array:Vp,toUint8Array:nS,extendString:aS,extendUint8Array:sS,extendBuiltins:gI},qt={VISITOR:"visitor",VISITOR_ENGLISH:"visitor_en",STYLE:"style",AUTO:"auto",STYLE_LOCK:"style_lock",LATIN:"name:latin",NON_LATIN:"name:nonlatin",LOCAL:"name",INTERNATIONAL:"name_int",ALBANIAN:"name:sq",AMHARIC:"name:am",ARABIC:"name:ar",ARMENIAN:"name:hy",AZERBAIJANI:"name:az",BASQUE:"name:eu",BELORUSSIAN:"name:be",BENGALI:"name:bn",BOSNIAN:"name:bs",BRETON:"name:br",BULGARIAN:"name:bg",CATALAN:"name:ca",CHINESE:"name:zh",TRADITIONAL_CHINESE:"name:zh-Hant",SIMPLIFIED_CHINESE:"name:zh-Hans",CORSICAN:"name:co",CROATIAN:"name:hr",CZECH:"name:cs",DANISH:"name:da",DUTCH:"name:nl",ENGLISH:"name:en",ESPERANTO:"name:eo",ESTONIAN:"name:et",FINNISH:"name:fi",FRENCH:"name:fr",FRISIAN:"name:fy",GEORGIAN:"name:ka",GERMAN:"name:de",GREEK:"name:el",HEBREW:"name:he",HINDI:"name:hi",HUNGARIAN:"name:hu",ICELANDIC:"name:is",INDONESIAN:"name:id",IRISH:"name:ga",ITALIAN:"name:it",JAPANESE:"name:ja",JAPANESE_HIRAGANA:"name:ja-Hira",JAPANESE_KANA:"name:ja_kana",JAPANESE_LATIN:"name:ja_rm",JAPANESE_2018:"name:ja-Latn",KANNADA:"name:kn",KAZAKH:"name:kk",KOREAN:"name:ko",KOREAN_LATIN:"name:ko-Latn",KURDISH:"name:ku",ROMAN_LATIN:"name:la",LATVIAN:"name:lv",LITHUANIAN:"name:lt",LUXEMBOURGISH:"name:lb",MACEDONIAN:"name:mk",MALAYALAM:"name:ml",MALTESE:"name:mt",NORWEGIAN:"name:no",OCCITAN:"name:oc",PERSIAN:"name:fa",POLISH:"name:pl",PORTUGUESE:"name:pt",PUNJABI:"name:pa",WESTERN_PUNJABI:"name:pnb",ROMANIAN:"name:ro",ROMANSH:"name:rm",RUSSIAN:"name:ru",SCOTTISH_GAELIC:"name:gd",SERBIAN_CYRILLIC:"name:sr",SERBIAN_LATIN:"name:sr-Latn",SLOVAK:"name:sk",SLOVENE:"name:sl",SPANISH:"name:es",SWEDISH:"name:sv",TAMIL:"name:ta",TELUGU:"name:te",THAI:"name:th",TURKISH:"name:tr",UKRAINIAN:"name:uk",URDU:"name:ur",VIETNAMIAN_LATIN:"name:vi",WELSH:"name:cy"},_I=new Set(Object.values(qt));function zx(e){return _I.has(e)}const vI=new Set(Object.values(qt));function Lx(){if(typeof navigator>"u")return`name:${Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0]}`;const e=Array.from(new Set(navigator.languages.map(t=>`name:${t.split("-")[0]}`))).filter(t=>vI.has(t));return e.length?e[0]:qt.LOCAL}const yi={maptilerLogoURL:"https://api.maptiler.com/resources/logo.svg",maptilerURL:"https://www.maptiler.com/",maptilerApiHost:"api.maptiler.com",rtlPluginURL:"https://cdn.maptiler.com/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.min.js",primaryLanguage:qt.STYLE,secondaryLanguage:qt.LOCAL,terrainSourceURL:"https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json",terrainSourceId:"maptiler-terrain"};Object.freeze(yi);const lS=aI();class xI extends qP{constructor(){super(...arguments),this.primaryLanguage=yi.primaryLanguage,this.session=!0,this.caching=!0,this._unit="metric",this._apiKey=""}set unit(t){this._unit=t,this.emit("unit",t)}get unit(){return this._unit}set apiKey(t){this._apiKey=t,wu.apiKey=t,this.emit("apiKey",t)}get apiKey(){return this._apiKey}set fetch(t){wu.fetch=t}get fetch(){return wu.fetch}}const gi=new xI,o0="localcache_source",a0="localcache",wI="maptiler_sdk",bI=1e3,SI=100,s0=typeof caches<"u";function TI(e,t){if(s0&&gi.caching&&gi.session&&e.host===yi.maptilerApiHost){if(t==="Source"&&e.href.includes("tiles.json"))return e.href.replace("https://",`${o0}://`);if(t==="Tile"||t==="Glyphs")return e.href.replace("https://",`${a0}://`)}return e.href}let Wg;async function uS(){return Wg||(Wg=await caches.open(wI)),Wg}let Rx=0;async function kI(){const e=await uS(),t=await e.keys(),a=t.slice(0,Math.max(t.length-bI,0));for(const u of a)e.delete(u)}function EI(){t0.addProtocol(o0,async(e,t)=>{if(!e.url)throw new Error("");e.url=e.url.replace(`${o0}://`,"https://");const a=e;a.signal=t.signal;const u=await fetch(e.url,a),h=await u.json();return h.tiles&&h.tiles.length>0&&(h.tiles[0]+=`&last-modified=${u.headers.get("Last-Modified")}`),{data:h,cacheControl:u.headers.get("Cache-Control"),expires:u.headers.get("Expires")}}),t0.addProtocol(a0,async(e,t)=>{if(!e.url)throw new Error("");e.url=e.url.replace(`${a0}://`,"https://");const a=new URL(e.url),u=new URL(a);u.searchParams.delete("mtsid"),u.searchParams.delete("key");const h=u.toString(),x=new URL(a);x.searchParams.delete("last-modified");const v=x.toString(),c=async B=>({data:await B.arrayBuffer(),cacheControl:B.headers.get("Cache-Control"),expires:B.headers.get("Expires")}),I=await uS(),F=await I.match(h);if(F)return c(F);const W=e;W.signal=t.signal;const D=await fetch(v,W);return D.status>=200&&D.status<300&&(I.put(h,D.clone()).catch(()=>{}),++Rx>SI&&(kI(),Rx=0)),c(D)})}function CI(){if(typeof window>"u")return;const e=Qt.getRTLTextPluginStatus();if(e==="unavailable"||e==="requested")try{Qt.setRTLTextPlugin(yi.rtlPluginURL,!0)}catch{}}function PI(e,t){for(const a of e)typeof t[a]=="function"&&(t[a]=t[a].bind(t))}function Qa(e,t,a){const u=window.document.createElement(e);return t!==void 0&&(u.className=t),a&&a.appendChild(u),u}function cS(e){e.parentNode&&e.parentNode.removeChild(e)}function Dx(e,t){let a=null;try{a=new URL(e)}catch{return{url:e}}return a.host===yi.maptilerApiHost&&(a.searchParams.has("key")||a.searchParams.append("key",gi.apiKey),gi.session&&a.searchParams.append("mtsid",lS)),{url:TI(a,t)}}function Ox(e){return(t,a)=>{if(e!=null){const u=e(t,a),h=Dx((u==null?void 0:u.url)??"",a);return{...u,...h}}return Dx(t,a)}}function II(){return document.createElement("canvas").getContext("webgl2")?null:typeof WebGL2RenderingContext<"u"?"Graphic rendering with WebGL2 has been disabled or is not supported by your graphic card. The map cannot be displayed.":"Your browser does not support graphic rendering with WebGL2. The map cannot be displayed."}function AI(e){const t=II();if(!t)return;let a=null;if(typeof e=="string"?a=document.getElementById(e):e instanceof HTMLElement&&(a=e),!a)throw new Error("The Map container must be provided.");const u=document.createElement("div");throw u.innerHTML=t,u.classList.add("no-webgl-support-div"),a.appendChild(u),new Error(t)}let MI=class extends Qt.Marker{addTo(t){return super.addTo(t)}},$M=class extends Qt.Popup{addTo(t){return super.addTo(t)}},WM=class extends Qt.Style{constructor(t,a={}){super(t,a)}};class ZM extends Qt.CanvasSource{onAdd(t){super.onAdd(t)}}class GM extends Qt.GeoJSONSource{onAdd(t){super.onAdd(t)}}class KM extends Qt.ImageSource{onAdd(t){super.onAdd(t)}}class XM extends Qt.RasterTileSource{onAdd(t){super.onAdd(t)}}class YM extends Qt.RasterDEMTileSource{onAdd(t){super.onAdd(t)}}class JM extends Qt.VectorTileSource{onAdd(t){super.onAdd(t)}}class QM extends Qt.VideoSource{onAdd(t){super.onAdd(t)}}class zI extends Qt.NavigationControl{onAdd(t){return super.onAdd(t)}}class LI extends Qt.GeolocateControl{onAdd(t){return super.onAdd(t)}}class e4 extends Qt.AttributionControl{onAdd(t){return super.onAdd(t)}}class RI extends Qt.LogoControl{onAdd(t){return super.onAdd(t)}}class DI extends Qt.ScaleControl{onAdd(t){return super.onAdd(t)}}class OI extends Qt.FullscreenControl{onAdd(t){return super.onAdd(t)}}class t4 extends Qt.TerrainControl{onAdd(t){return super.onAdd(t)}}class r4 extends Qt.BoxZoomHandler{constructor(t,a){super(t,a)}}class n4 extends Qt.ScrollZoomHandler{constructor(t,a){super(t,a)}}class i4 extends Qt.CooperativeGesturesHandler{constructor(t,a){super(t,a)}}class o4 extends Qt.KeyboardHandler{constructor(t){super(t)}}class a4 extends Qt.TwoFingersTouchPitchHandler{constructor(t){super(t)}}class s4 extends Qt.MapWheelEvent{constructor(t,a,u){super(t,a,u)}}class l4 extends Qt.MapTouchEvent{constructor(t,a,u){super(t,a,u)}}class u4 extends Qt.MapMouseEvent{constructor(t,a,u,h={}){super(t,a,u,h)}}class Fx extends RI{constructor(t={}){super(t),this.logoURL="",this.linkURL="",this.logoURL=t.logoURL??yi.maptilerLogoURL,this.linkURL=t.linkURL??yi.maptilerURL}onAdd(t){this._map=t,this._compact=this.options.compact??!1,this._container=window.document.createElement("div"),this._container.className="maplibregl-ctrl";const a=window.document.createElement("a");return a.style.backgroundRepeat="no-repeat",a.style.cursor="pointer",a.style.display="block",a.style.height="23px",a.style.margin="0 0 -4px -4px",a.style.overflow="hidden",a.style.width="88px",a.style.backgroundImage=`url(${this.logoURL})`,a.style.backgroundSize="100px 30px",a.style.width="100px",a.style.height="30px",a.target="_blank",a.rel="noopener",a.href=this.linkURL,a.setAttribute("aria-label","MapTiler logo"),a.setAttribute("rel","noopener"),this._container.appendChild(a),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}}function Bx(e){return e?typeof e=="string"||e instanceof String?!e.startsWith("http")&&e.toLowerCase().includes(".json")?e:q2(e):e instanceof Z2?e.getExpandedStyleURL():e instanceof G2?e.getDefaultVariant().getExpandedStyleURL():e:tI[r0[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL()}class FI{constructor(){PI(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(t){return this._map=t,this._container=Qa("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=Qa("button","maplibregl-ctrl-terrain",this._container),Qa("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){cS(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.hasTerrain()?this._map.disableTerrain():this._map.enableTerrain(),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.hasTerrain()?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))}}class BI extends zI{constructor(){super({showCompass:!0,showZoom:!0,visualizePitch:!0}),this._rotateCompassArrow=()=>{const t=this.options.visualizePitch?`scale(${Math.min(1.5,1/Math.cos(this._map.transform.pitch*(Math.PI/180))**.5)}) rotateX(${Math.min(70,this._map.transform.pitch)}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=t},this._compass.removeEventListener("click",this._compass.clickFunction),this._compass.addEventListener("click",t=>{this._map.getPitch()===0?this._map.easeTo({pitch:Math.min(this._map.getMaxPitch(),80)}):this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})}_createButton(t,a){const u=super._createButton(t,a);return u.clickFunction=a,u}}const Nx=Qt.Marker,jx=Qt.LngLat,NI=Qt.LngLatBounds;class jI extends LI{constructor(){super(...arguments),this.lastUpdatedCenter=new jx(0,0),this._updateCamera=t=>{var F,W;const a=new jx(t.coords.longitude,t.coords.latitude),u=t.coords.accuracy,x={bearing:this._map.getBearing(),...this.options.fitBoundsOptions,linear:!0},v=this._map.getZoom();v>(((W=(F=this.options)==null?void 0:F.fitBoundsOptions)==null?void 0:W.maxZoom)??30)&&(x.zoom=v),this._map.fitBounds(NI.fromLngLat(a,u),x,{geolocateSource:!0});let c=!1;const I=()=>{c=!0};this._map.once("click",I),this._map.once("dblclick",I),this._map.once("dragstart",I),this._map.once("mousedown",I),this._map.once("touchstart",I),this._map.once("wheel",I),this._map.once("moveend",()=>{this._map.off("click",I),this._map.off("dblclick",I),this._map.off("dragstart",I),this._map.off("mousedown",I),this._map.off("touchstart",I),this._map.off("wheel",I),!c&&(this.lastUpdatedCenter=this._map.getCenter())})},this._setupUI=t=>{if(this.lastUpdatedCenter=this._map.getCenter(),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this._geolocateButton=Qa("button","maplibregl-ctrl-geolocate",this._container),Qa("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",t===!1){const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}else{const a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Qa("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Nx({element:this._dotElement}),this._circleElement=Qa("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Nx({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("move",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("moveend",a=>{const u=a.originalEvent&&a.originalEvent.type==="resize",h=this.lastUpdatedCenter.distanceTo(this._map.getCenter());!a.geolocateSource&&this._watchState==="ACTIVE_LOCK"&&!u&&h>1&&(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new Event("trackuserlocationend")))})},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}}_updateCircleRadius(){if(this._watchState!=="BACKGROUND"&&this._watchState!=="ACTIVE_LOCK")return;const t=[this._lastKnownPosition.coords.longitude,this._lastKnownPosition.coords.latitude],a=this._map.project(t),u=this._map.unproject([a.x,a.y]),h=this._map.unproject([a.x+20,a.y]),x=u.distanceTo(h)/20,v=Math.ceil(2*this._accuracy/x);this._circleElement.style.width=`${v}px`,this._circleElement.style.height=`${v}px`}}var hS=e=>{throw TypeError(e)},g_=(e,t,a)=>t.has(e)||hS("Cannot "+a),$t=(e,t,a)=>(g_(e,t,"read from private field"),a?a.call(e):t.get(e)),Ha=(e,t,a)=>t.has(e)?hS("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,a),tu=(e,t,a,u)=>(g_(e,t,"write to private field"),t.set(e,a),a),Oi=(e,t,a)=>(g_(e,t,"access private method"),a),Fi,Uo,Hs,dS,Xs,Xi,$p,ni,pS,Yi,fS;class qg{constructor(t,a){Ha(this,ni),Ha(this,Fi),Ha(this,Uo),Ha(this,Hs),Ha(this,dS),Ha(this,Xs),Ha(this,Xi,!1),Ha(this,$p),t.style!==void 0&&tu(this,Xi,!0),tu(this,Fi,{zoomAdjust:-4,position:"top-right",...a,forceNoAttributionControl:!0,attributionControl:!1,navigationControl:!1,geolocateControl:!1,maptilerLogo:!1,minimap:!1,hash:!1,pitchAdjust:!1,...t,containerStyle:{border:"1px solid #000",width:"400px",height:"300px",...t.containerStyle??{}}}),t.lockZoom!==void 0&&($t(this,Fi).minZoom=t.lockZoom,$t(this,Fi).maxZoom=t.lockZoom)}setStyle(t,a){$t(this,Xi)||this.map.setStyle(t,a),Oi(this,ni,Yi).call(this)}addLayer(t,a){return $t(this,Xi)||this.map.addLayer(t,a),Oi(this,ni,Yi).call(this),this.map}moveLayer(t,a){return $t(this,Xi)||this.map.moveLayer(t,a),Oi(this,ni,Yi).call(this),this.map}removeLayer(t){return $t(this,Xi)||this.map.removeLayer(t),Oi(this,ni,Yi).call(this),this}setLayerZoomRange(t,a,u){return $t(this,Xi)||this.map.setLayerZoomRange(t,a,u),Oi(this,ni,Yi).call(this),this}setFilter(t,a,u){return $t(this,Xi)||this.map.setFilter(t,a,u),Oi(this,ni,Yi).call(this),this}setPaintProperty(t,a,u,h){return $t(this,Xi)||this.map.setPaintProperty(t,a,u,h),Oi(this,ni,Yi).call(this),this}setLayoutProperty(t,a,u,h){return $t(this,Xi)||this.map.setLayoutProperty(t,a,u,h),Oi(this,ni,Yi).call(this),this}setGlyphs(t,a){return $t(this,Xi)||this.map.setGlyphs(t,a),Oi(this,ni,Yi).call(this),this}onAdd(t){tu(this,Uo,t),tu(this,Hs,Qa("div","maplibregl-ctrl maplibregl-ctrl-group"));for(const[a,u]of Object.entries($t(this,Fi).containerStyle))$t(this,Hs).style.setProperty(a,u);return $t(this,Fi).container=$t(this,Hs),$t(this,Fi).zoom=t.getZoom()+$t(this,Fi).zoomAdjust,this.map=new mS($t(this,Fi)),this.map.once("style.load",()=>{this.map.resize()}),this.map.once("load",()=>{Oi(this,ni,pS).call(this,$t(this,Fi).parentRect),tu(this,$p,Oi(this,ni,fS).call(this))}),$t(this,Hs)}onRemove(){var t;(t=$t(this,$p))==null||t.call(this),cS($t(this,Hs))}}Fi=new WeakMap;Uo=new WeakMap;Hs=new WeakMap;dS=new WeakMap;Xs=new WeakMap;Xi=new WeakMap;$p=new WeakMap;ni=new WeakSet;pS=function(e){e===void 0||e.linePaint===void 0&&e.fillPaint===void 0||(tu(this,Xs,{type:"Feature",properties:{name:"parentRect"},geometry:{type:"Polygon",coordinates:[[[],[],[],[],[]]]}}),this.map.addSource("parentRect",{type:"geojson",data:$t(this,Xs)}),(e.lineLayout!==void 0||e.linePaint!==void 0)&&this.map.addLayer({id:"parentRectOutline",type:"line",source:"parentRect",layout:{...e.lineLayout},paint:{"line-color":"#FFF","line-width":1,"line-opacity":.85,...e.linePaint}}),e.fillPaint!==void 0&&this.map.addLayer({id:"parentRectFill",type:"fill",source:"parentRect",layout:{},paint:{"fill-color":"#08F","fill-opacity":.135,...e.fillPaint}}),Oi(this,ni,Yi).call(this))};Yi=function(){if($t(this,Xs)===void 0)return;const{devicePixelRatio:e}=window,t=$t(this,Uo).getCanvas(),a=t.width/e,u=t.height/e,h=$t(this,Uo).unproject.bind($t(this,Uo)),x=h([0,0]),v=h([a,0]),c=h([0,u]),I=h([a,u]);$t(this,Xs).geometry.coordinates=[[c.toArray(),I.toArray(),v.toArray(),x.toArray(),c.toArray()]],this.map.getSource("parentRect").setData($t(this,Xs))};fS=function(){const{pitchAdjust:e}=$t(this,Fi),t=()=>{x("parent")},a=()=>{x("minimap")},u=()=>{$t(this,Uo).on("move",t),this.map.on("move",a)},h=()=>{$t(this,Uo).off("move",t),this.map.off("move",a)},x=v=>{h();const c=v==="parent"?$t(this,Uo):this.map,I=v==="parent"?this.map:$t(this,Uo),F=c.getCenter(),W=c.getZoom()+($t(this,Fi).zoomAdjust??-4)*(v==="parent"?1:-1),D=c.getBearing(),B=c.getPitch();I.jumpTo({center:F,zoom:W,bearing:D,pitch:e?B:0}),Oi(this,ni,Yi).call(this),u()};return u(),()=>{h()}};const UI={POINT:"POINT",COUNTRY:"COUNTRY"};let mS=class extends Qt.Map{constructor(t){AI(t.container),t.apiKey&&(gi.apiKey=t.apiKey);const a=Bx(t.style),u=location.hash;gi.apiKey||console.warn("MapTiler Cloud API key is not set. Visit https://maptiler.com and try Cloud for free!");let h={compact:!1};t.customAttribution?h.customAttribution=t.customAttribution:t.attributionControl&&typeof t.attributionControl=="object"&&(h={...h,...t.attributionControl}),super({...t,style:a,maplibreLogo:!1,transformRequest:Ox(t.transformRequest),attributionControl:t.forceNoAttributionControl===!0?!1:h}),this.isTerrainEnabled=!1,this.terrainExaggeration=1,this.terrainGrowing=!1,this.terrainFlattening=!1,this.isReady=!1,gi.caching&&!s0&&console.warn("The cache API is only available in secure contexts. More info at https://developer.mozilla.org/en-US/docs/Web/API/Cache"),gi.caching&&s0&&EI(),this.primaryLanguage=t.language??gi.primaryLanguage,this.forceLanguageUpdate=!(this.primaryLanguage===qt.STYLE||this.primaryLanguage===qt.STYLE_LOCK),this.languageAlwaysBeenStyle=this.primaryLanguage===qt.STYLE,this.terrainExaggeration=t.terrainExaggeration??this.terrainExaggeration,this.once("styledata",async()=>{if(!t.geolocate||t.center||t.hash&&u)return;try{if(t.geolocate===UI.COUNTRY){await this.fitToIpBounds();return}}catch(D){console.warn(D.message)}let F;try{await this.centerOnIpPoint(t.zoom),F=this.getCameraHash()}catch(D){console.warn(D.message)}(await navigator.permissions.query({name:"geolocation"})).state==="granted"&&navigator.geolocation.getCurrentPosition(D=>{F===this.getCameraHash()&&(this.terrain?this.easeTo({center:[D.coords.longitude,D.coords.latitude],zoom:t.zoom||12,duration:2e3}):this.once("terrain",()=>{this.easeTo({center:[D.coords.longitude,D.coords.latitude],zoom:t.zoom||12,duration:2e3})}))},null,{maximumAge:24*3600*1e3,timeout:5e3,enableHighAccuracy:!1})}),this.on("styledata",()=>{this.setPrimaryLanguage(this.primaryLanguage)}),this.on("styledata",()=>{this.getTerrain()===null&&this.isTerrainEnabled&&this.enableTerrain(this.terrainExaggeration)}),this.once("load",async()=>{let F={logo:null};try{const W=Object.keys(this.style.sourceCaches).map(le=>this.getSource(le)).filter(le=>le&&"url"in le&&typeof le.url=="string"&&(le==null?void 0:le.url.includes("tiles.json"))),D=new URL(W[0].url);D.searchParams.has("key")||D.searchParams.append("key",gi.apiKey),F=await(await fetch(D.href)).json()}catch{}if(t.forceNoAttributionControl!==!0)if("logo"in F&&F.logo){const W=F.logo;this.addControl(new Fx({logoURL:W}),t.logoPosition)}else t.maptilerLogo&&this.addControl(new Fx,t.logoPosition);if(t.scaleControl){const W=t.scaleControl===!0||t.scaleControl===void 0?"bottom-right":t.scaleControl,D=new DI({unit:gi.unit});this.addControl(D,W),gi.on("unit",B=>{D.setUnit(B)})}if(t.navigationControl!==!1){const W=t.navigationControl===!0||t.navigationControl===void 0?"top-right":t.navigationControl;this.addControl(new BI,W)}if(t.geolocateControl!==!1){const W=t.geolocateControl===!0||t.geolocateControl===void 0?"top-right":t.geolocateControl;this.addControl(new jI({positionOptions:{enableHighAccuracy:!0,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!0,showAccuracyCircle:!0,showUserLocation:!0}),W)}if(t.terrainControl){const W=t.terrainControl===!0||t.terrainControl===void 0?"top-right":t.terrainControl;this.addControl(new FI,W)}if(t.fullscreenControl){const W=t.fullscreenControl===!0||t.fullscreenControl===void 0?"top-right":t.fullscreenControl;this.addControl(new OI({}),W)}this.isReady=!0,this.fire("ready",{target:this})});let x=!1,v=!1,c;this.once("ready",()=>{x=!0,v&&this.fire("loadWithTerrain",c)}),this.once("style.load",()=>{const{minimap:F}=t;if(typeof F=="object"){const{zoom:W,center:D,style:B,language:le,apiKey:ge,maptilerLogo:de,antialias:we,refreshExpiredTiles:ee,maxBounds:q,scrollZoom:te,minZoom:_e,maxZoom:Ce,boxZoom:Ae,locale:Le,fadeDuration:Ge,crossSourceCollisions:Re,clickTolerance:Me,bounds:$e,fitBoundsOptions:ft,pixelRatio:it,validateStyle:st}=t;this.minimap=new qg(F,{zoom:W,center:D,style:B,language:le,apiKey:ge,container:"null",maptilerLogo:de,antialias:we,refreshExpiredTiles:ee,maxBounds:q,scrollZoom:te,minZoom:_e,maxZoom:Ce,boxZoom:Ae,locale:Le,fadeDuration:Ge,crossSourceCollisions:Re,clickTolerance:Me,bounds:$e,fitBoundsOptions:ft,pixelRatio:it,validateStyle:st}),this.addControl(this.minimap,F.position??"bottom-left")}else F===!0?(this.minimap=new qg({},t),this.addControl(this.minimap,"bottom-left")):F!==void 0&&F!==!1&&(this.minimap=new qg({},t),this.addControl(this.minimap,F))});const I=F=>{F.terrain&&(v=!0,c={type:"loadWithTerrain",target:this,terrain:F.terrain},this.off("terrain",I),x&&this.fire("loadWithTerrain",c))};this.on("terrain",I),t.terrain&&this.enableTerrain(t.terrainExaggeration??this.terrainExaggeration)}async onLoadAsync(){return new Promise(t=>{if(this.loaded())return t(this);this.once("load",()=>{t(this)})})}async onReadyAsync(){return new Promise(t=>{if(this.isReady)return t(this);this.once("ready",()=>{t(this)})})}async onLoadWithTerrainAsync(){return new Promise(t=>{if(this.isReady&&this.terrain)return t(this);this.once("loadWithTerrain",()=>{t(this)})})}setStyle(t,a){var u;return(u=this.minimap)==null||u.setStyle(t),this.forceLanguageUpdate=!0,this.once("idle",()=>{this.forceLanguageUpdate=!1}),super.setStyle(Bx(t),a)}addLayer(t,a){var u;return(u=this.minimap)==null||u.addLayer(t,a),super.addLayer(t,a)}moveLayer(t,a){var u;return(u=this.minimap)==null||u.moveLayer(t,a),super.moveLayer(t,a)}removeLayer(t){var a;return(a=this.minimap)==null||a.removeLayer(t),super.removeLayer(t)}setLayerZoomRange(t,a,u){var h;return(h=this.minimap)==null||h.setLayerZoomRange(t,a,u),super.setLayerZoomRange(t,a,u)}setFilter(t,a,u){var h;return(h=this.minimap)==null||h.setFilter(t,a,u),super.setFilter(t,a,u)}setPaintProperty(t,a,u,h){var x;return(x=this.minimap)==null||x.setPaintProperty(t,a,u,h),super.setPaintProperty(t,a,u,h)}setLayoutProperty(t,a,u,h){var x;return(x=this.minimap)==null||x.setLayoutProperty(t,a,u,h),super.setLayoutProperty(t,a,u,h)}setGlyphs(t,a){var u;return(u=this.minimap)==null||u.setGlyphs(t,a),super.setGlyphs(t,a)}getStyleLanguage(){return!this.style.stylesheet.metadata||typeof this.style.stylesheet.metadata!="object"?null:"maptiler:language"in this.style.stylesheet.metadata&&typeof this.style.stylesheet.metadata["maptiler:language"]=="string"?this.style.stylesheet.metadata["maptiler:language"]:null}setLanguage(t){var a,u;(u=(a=this.minimap)==null?void 0:a.map)==null||u.setLanguage(t),this.onStyleReady(()=>{this.setPrimaryLanguage(t)})}setPrimaryLanguage(t){const a=this.getStyleLanguage();if(!(t===qt.STYLE&&(a===qt.AUTO||a===qt.VISITOR))&&(t!==qt.STYLE&&(this.languageAlwaysBeenStyle=!1),this.languageAlwaysBeenStyle||this.primaryLanguage===t&&!this.forceLanguageUpdate))return;if(!zx(t)){console.warn(`The language "${t}" is not supported.`);return}if(this.primaryLanguage===qt.STYLE_LOCK){console.warn("The language cannot be changed because this map has been instantiated with the STYLE_LOCK language flag.");return}this.primaryLanguage=t;let u=t;if(t===qt.STYLE){if(!a){console.warn("The style has no default languages.");return}if(!zx(a)){console.warn("The language defined in the style is not valid.");return}u=a}let h=qt.LOCAL,x=`{${h}}`;u===qt.VISITOR?(h=Lx(),x=["case",["all",["has",h],["has",qt.LOCAL]],["case",["==",["get",h],["get",qt.LOCAL]],["get",qt.LOCAL],["format",["get",h],{"font-scale":.8},`
`,["get",qt.LOCAL],{"font-scale":1.1}]],["get",qt.LOCAL]]):u===qt.VISITOR_ENGLISH?(h=qt.ENGLISH,x=["case",["all",["has",h],["has",qt.LOCAL]],["case",["==",["get",h],["get",qt.LOCAL]],["get",qt.LOCAL],["format",["get",h],{"font-scale":.8},`
`,["get",qt.LOCAL],{"font-scale":1.1}]],["get",qt.LOCAL]]):u===qt.AUTO?(h=Lx(),x=["case",["has",h],["get",h],["get",qt.LOCAL]]):u===qt.LOCAL?(h=qt.LOCAL,x=`{${h}}`):(h=u,x=["case",["has",h],["get",h],["get",qt.LOCAL]]);const{layers:v}=this.getStyle();for(const c of v){if(c.type!=="symbol")continue;const I=c,F=this.getSource(I.source);if(!F||!("url"in F&&typeof F.url=="string")||new URL(F.url).host!==yi.maptilerApiHost)continue;const{id:D,layout:B}=I;if(!B||!("text-field"in B))continue;const le=this.getLayoutProperty(D,"text-field");typeof le=="string"&&(le.toLowerCase().includes("ref")||le.toLowerCase().includes("housenumber"))||this.setLayoutProperty(D,"text-field",x)}}getPrimaryLanguage(){return this.primaryLanguage}getTerrainExaggeration(){return this.terrainExaggeration}hasTerrain(){return this.isTerrainEnabled}growTerrain(t,a=1e3){if(!this.terrain)return;const u=performance.now(),h=this.terrain.exaggeration,x=t-h,v=()=>{if(!this.terrain||this.terrainFlattening)return;const c=(performance.now()-u)/a;if(c<.99){const I=1-(1-c)**4,F=h+I*x;this.terrain.exaggeration=F,requestAnimationFrame(v)}else this.terrainGrowing=!1,this.terrainFlattening=!1,this.terrain.exaggeration=t;this.triggerRepaint()};this.terrainGrowing=!0,this.terrainFlattening=!1,requestAnimationFrame(v)}enableTerrain(t=this.terrainExaggeration){if(t<0){console.warn("Terrain exaggeration cannot be negative.");return}const a=async h=>{!this.terrain||h.type!=="data"||h.dataType!=="source"||!("source"in h)||h.sourceId!=="maptiler-terrain"||h.source.type!=="raster-dem"||h.isSourceLoaded&&(this.off("data",a),this.growTerrain(t))},u=()=>{this.isTerrainEnabled=!0,this.terrainExaggeration=t,this.on("data",a),this.addSource(yi.terrainSourceId,{type:"raster-dem",url:yi.terrainSourceURL}),this.setTerrain({source:yi.terrainSourceId,exaggeration:0})};if(this.getTerrain()){this.isTerrainEnabled=!0,this.growTerrain(t);return}this.loaded()||this.isTerrainEnabled?u():this.once("load",()=>{this.getTerrain()&&this.getSource(yi.terrainSourceId)||u()})}disableTerrain(){if(!this.terrain)return;this.isTerrainEnabled=!1;const t=1*1e3,a=performance.now(),u=this.terrain.exaggeration,h=()=>{if(!this.terrain||this.terrainGrowing)return;const x=(performance.now()-a)/t;if(x<.99){const v=(1-x)**4,c=u*v;this.terrain.exaggeration=c,requestAnimationFrame(h)}else this.terrain.exaggeration=0,this.terrainGrowing=!1,this.terrainFlattening=!1,this.setTerrain(),this.getSource(yi.terrainSourceId)&&this.removeSource(yi.terrainSourceId);this.triggerRepaint()};this.terrainGrowing=!1,this.terrainFlattening=!0,requestAnimationFrame(h)}setTerrainExaggeration(t,a=!0){!a&&this.terrain?(this.terrainExaggeration=t,this.terrain.exaggeration=t,this.triggerRepaint()):this.enableTerrain(t)}onStyleReady(t){this.isStyleLoaded()?t():this.once("styledata",()=>{t()})}async fitToIpBounds(){const t=await kx.info();this.fitBounds(t.country_bounds,{duration:0,padding:100})}async centerOnIpPoint(t){const a=await kx.info();this.jumpTo({center:[(a==null?void 0:a.longitude)??0,(a==null?void 0:a.latitude)??0],zoom:t||11})}getCameraHash(){const t=new Float32Array(5),a=this.getCenter();return t[0]=a.lng,t[1]=a.lat,t[2]=this.getZoom(),t[3]=this.getPitch(),t[4]=this.getBearing(),yI.fromUint8Array(new Uint8Array(t.buffer))}getSdkConfig(){return gi}getMaptilerSessionId(){return lS}setTransformRequest(t){return super.setTransformRequest(Ox(t)),this}};function Cp(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function VI(e){return`#${Cp(e[0])}${Cp(e[1])}${Cp(e[2])}${e.length===4?Cp(e[3]):""}`}class vt extends Array{constructor(t={}){super(),this.min=0,this.max=1,"min"in t&&(this.min=t.min),"max"in t&&(this.max=t.max),"stops"in t&&this.setStops(t.stops,{clone:!1})}static fromArrayDefinition(t){return new vt({stops:t.map(a=>({value:a[0],color:a[1]}))})}setStops(t,a={clone:!0}){const u=a.clone?this.clone():this;u.length=0;let h=Number.POSITIVE_INFINITY,x=Number.NEGATIVE_INFINITY;for(let v=0;v<t.length;v+=1)h=Math.min(h,t[v].value),x=Math.max(x,t[v].value),u.push({value:t[v].value,color:t[v].color.slice()});return u.sort((v,c)=>v.value<c.value?-1:1),this.min=h,this.max=x,u}scale(t,a,u={clone:!0}){const h=u.clone,x=this[0].value,c=this.at(-1).value-x,I=a-t,F=[];for(let W=0;W<this.length;W+=1){const le=(this[W].value-x)/c*I+t;h?F.push({value:le,color:this[W].color.slice()}):this[W].value=le}return h?new vt({stops:F}):this}at(t){return t<0?this[this.length+t]:this[t]}clone(){return new vt({stops:this.getRawColorStops()})}getRawColorStops(){const t=[];for(let a=0;a<this.length;a+=1)t.push({value:this[a].value,color:this[a].color});return t}reverse(t={clone:!0}){const a=t.clone?this.clone():this;for(let u=0;u<~~(a.length/2);u+=1){const h=a[u].color;a[u].color=a.at(-(u+1)).color,a.at(-(u+1)).color=h}return a}getBounds(){return{min:this.min,max:this.max}}getColor(t,a={smooth:!0}){if(t<=this[0].value)return this[0].color;if(t>=this.at(-1).value)return this.at(-1).color;for(let u=0;u<this.length-1;u+=1){if(t>this[u+1].value)continue;const h=this[u].color;if(!a.smooth)return h.slice();const x=this[u].value,v=this[u+1].value,c=this[u+1].color,I=(v-t)/(v-x);return h.map((F,W)=>Math.round(F*I+c[W]*(1-I)))}return[0,0,0]}getColorHex(t,a={smooth:!0,withAlpha:!1}){return VI(this.getColor(t,a))}getColorRelative(t,a={smooth:!0}){const u=this.getBounds();return this.getColor(u.min+t*(u.max-u.min),a)}getCanvasStrip(t={horizontal:!0,size:512,smooth:!0}){const a=document.createElement("canvas");a.width=t.horizontal?t.size:1,a.height=t.horizontal?1:t.size;const u=a.getContext("2d");if(!u)throw new Error("Canvs context is missing");const h=u.getImageData(0,0,a.width,a.height),x=h.data,v=t.size,c=this[0].value,W=(this.at(-1).value-c)/v;for(let D=0;D<v;D+=1){const B=this.getColor(c+D*W,{smooth:t.smooth});x[D*4]=B[0],x[D*4+1]=B[1],x[D*4+2]=B[2],x[D*4+3]=B.length>3?B[3]:255}return u.putImageData(h,0,0),a}resample(t,a=15){const u=this.getBounds(),h=this.scale(0,1),x=1/(a-1);let v;if(t==="ease-in-square")v=Array.from({length:a},(F,W)=>{const D=W*x,B=D**2,le=h.getColor(B);return{value:D,color:le}});else if(t==="ease-out-square")v=Array.from({length:a},(F,W)=>{const D=W*x,B=1-(1-D)**2,le=h.getColor(B);return{value:D,color:le}});else if(t==="ease-out-sqrt")v=Array.from({length:a},(F,W)=>{const D=W*x,B=D**.5,le=h.getColor(B);return{value:D,color:le}});else if(t==="ease-in-sqrt")v=Array.from({length:a},(F,W)=>{const D=W*x,B=1-(1-D)**.5,le=h.getColor(B);return{value:D,color:le}});else if(t==="ease-out-exp")v=Array.from({length:a},(F,W)=>{const D=W*x,B=1-2**(-10*D),le=h.getColor(B);return{value:D,color:le}});else if(t==="ease-in-exp")v=Array.from({length:a},(F,W)=>{const D=W*x,B=2**(10*D-10),le=h.getColor(B);return{value:D,color:le}});else throw new Error("Invalid ressampling method.");return new vt({stops:v}).scale(u.min,u.max)}transparentStart(){const t=this.getRawColorStops();t.unshift({value:t[0].value,color:t[0].color.slice()}),t[1].value+=.001;for(const a of t)a.color.length===3&&a.color.push(255);return t[0].color[3]=0,new vt({stops:t})}hasTransparentStart(){return this[0].color.length===4&&this[0].color[3]===0}}new vt({stops:[{value:0,color:[0,0,0,0]},{value:1,color:[0,0,0,0]}]}),new vt({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),new vt({stops:[{value:0,color:[0,0,131]},{value:.125,color:[0,60,170]},{value:.375,color:[5,255,255]},{value:.625,color:[255,255,0]},{value:.875,color:[250,0,0]},{value:1,color:[128,0,0]}]}),new vt({stops:[{value:0,color:[255,0,0]},{value:.169,color:[253,255,2]},{value:.173,color:[247,255,2]},{value:.337,color:[0,252,4]},{value:.341,color:[0,252,10]},{value:.506,color:[1,249,255]},{value:.671,color:[2,0,253]},{value:.675,color:[8,0,253]},{value:.839,color:[255,0,251]},{value:.843,color:[255,0,245]},{value:1,color:[255,0,6]}]}),new vt({stops:[{value:0,color:[0,0,0]},{value:.3,color:[230,0,0]},{value:.6,color:[255,210,0]},{value:1,color:[255,255,255]}]}),new vt({stops:[{value:0,color:[255,0,255]},{value:1,color:[255,255,0]}]}),new vt({stops:[{value:0,color:[0,128,102]},{value:1,color:[255,255,102]}]}),new vt({stops:[{value:0,color:[255,0,0]},{value:1,color:[255,255,0]}]}),new vt({stops:[{value:0,color:[0,0,255]},{value:1,color:[0,255,128]}]}),new vt({stops:[{value:0,color:[0,0,0]},{value:.376,color:[84,84,116]},{value:.753,color:[169,200,200]},{value:1,color:[255,255,255]}]}),new vt({stops:[{value:0,color:[0,0,0]},{value:.804,color:[255,160,102]},{value:1,color:[255,199,127]}]}),new vt({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),new vt({stops:[{value:0,color:[8,29,88]},{value:.125,color:[37,52,148]},{value:.25,color:[34,94,168]},{value:.375,color:[29,145,192]},{value:.5,color:[65,182,196]},{value:.625,color:[127,205,187]},{value:.75,color:[199,233,180]},{value:.875,color:[237,248,217]},{value:1,color:[255,255,217]}]}),new vt({stops:[{value:0,color:[0,68,27]},{value:.125,color:[0,109,44]},{value:.25,color:[35,139,69]},{value:.375,color:[65,171,93]},{value:.5,color:[116,196,118]},{value:.625,color:[161,217,155]},{value:.75,color:[199,233,192]},{value:.875,color:[229,245,224]},{value:1,color:[247,252,245]}]}),new vt({stops:[{value:0,color:[128,0,38]},{value:.125,color:[189,0,38]},{value:.25,color:[227,26,28]},{value:.375,color:[252,78,42]},{value:.5,color:[253,141,60]},{value:.625,color:[254,178,76]},{value:.75,color:[254,217,118]},{value:.875,color:[255,237,160]},{value:1,color:[255,255,204]}]}),new vt({stops:[{value:0,color:[0,0,255]},{value:1,color:[255,0,0]}]}),new vt({stops:[{value:0,color:[5,10,172]},{value:.35,color:[106,137,247]},{value:.5,color:[190,190,190]},{value:.6,color:[220,170,132]},{value:.7,color:[230,145,90]},{value:1,color:[178,10,28]}]}),new vt({stops:[{value:0,color:[0,0,255]},{value:.1,color:[51,153,255]},{value:.2,color:[102,204,255]},{value:.3,color:[153,204,255]},{value:.4,color:[204,204,255]},{value:.5,color:[255,255,255]},{value:.6,color:[255,204,255]},{value:.7,color:[255,153,255]},{value:.8,color:[255,102,204]},{value:.9,color:[255,102,102]},{value:1,color:[255,0,0]}]}),new vt({stops:[{value:0,color:[150,0,90]},{value:.125,color:[0,0,200]},{value:.25,color:[0,25,255]},{value:.375,color:[0,152,255]},{value:.5,color:[44,255,150]},{value:.625,color:[151,255,0]},{value:.75,color:[255,234,0]},{value:.875,color:[255,111,0]},{value:1,color:[255,0,0]}]}),new vt({stops:[{value:0,color:[12,51,131]},{value:.25,color:[10,136,186]},{value:.5,color:[242,211,56]},{value:.75,color:[242,143,56]},{value:1,color:[217,30,30]}]}),new vt({stops:[{value:0,color:[0,0,0]},{value:.2,color:[230,0,0]},{value:.4,color:[230,210,0]},{value:.7,color:[255,255,255]},{value:1,color:[160,200,255]}]}),new vt({stops:[{value:0,color:[0,0,130]},{value:.1,color:[0,180,180]},{value:.2,color:[40,210,40]},{value:.4,color:[230,230,50]},{value:.6,color:[120,70,20]},{value:1,color:[255,255,255]}]}),new vt({stops:[{value:0,color:[0,0,0]},{value:.15,color:[30,0,100]},{value:.4,color:[120,0,100]},{value:.6,color:[160,90,0]},{value:.8,color:[230,200,0]},{value:1,color:[255,250,220]}]}),new vt({stops:[{value:0,color:[68,1,84]},{value:.13,color:[71,44,122]},{value:.25,color:[59,81,139]},{value:.38,color:[44,113,142]},{value:.5,color:[33,144,141]},{value:.63,color:[39,173,129]},{value:.75,color:[92,200,99]},{value:.88,color:[170,220,50]},{value:1,color:[253,231,37]}]}),new vt({stops:[{value:0,color:[0,0,4]},{value:.13,color:[31,12,72]},{value:.25,color:[85,15,109]},{value:.38,color:[136,34,106]},{value:.5,color:[186,54,85]},{value:.63,color:[227,89,51]},{value:.75,color:[249,140,10]},{value:.88,color:[249,201,50]},{value:1,color:[252,255,164]}]}),new vt({stops:[{value:0,color:[0,0,4]},{value:.13,color:[28,16,68]},{value:.25,color:[79,18,123]},{value:.38,color:[129,37,129]},{value:.5,color:[181,54,122]},{value:.63,color:[229,80,100]},{value:.75,color:[251,135,97]},{value:.88,color:[254,194,135]},{value:1,color:[252,253,191]}]}),new vt({stops:[{value:0,color:[13,8,135]},{value:.13,color:[75,3,161]},{value:.25,color:[125,3,168]},{value:.38,color:[168,34,150]},{value:.5,color:[203,70,121]},{value:.63,color:[229,107,93]},{value:.75,color:[248,148,65]},{value:.88,color:[253,195,40]},{value:1,color:[240,249,33]}]}),new vt({stops:[{value:0,color:[125,0,179]},{value:.13,color:[172,0,187]},{value:.25,color:[219,0,170]},{value:.38,color:[255,0,130]},{value:.5,color:[255,63,74]},{value:.63,color:[255,123,0]},{value:.75,color:[234,176,0]},{value:.88,color:[190,228,0]},{value:1,color:[147,255,0]}]}),new vt({stops:[{value:0,color:[125,0,179]},{value:.13,color:[116,0,218]},{value:.25,color:[98,74,237]},{value:.38,color:[68,146,231]},{value:.5,color:[0,204,197]},{value:.63,color:[0,247,146]},{value:.75,color:[0,255,88]},{value:.88,color:[40,255,8]},{value:1,color:[147,255,0]}]}),new vt({stops:[{value:0,color:[125,0,179]},{value:.1,color:[199,0,180]},{value:.2,color:[255,0,121]},{value:.3,color:[255,108,0]},{value:.4,color:[222,194,0]},{value:.5,color:[150,255,0]},{value:.6,color:[0,255,55]},{value:.7,color:[0,246,150]},{value:.8,color:[50,167,222]},{value:.9,color:[103,51,235]},{value:1,color:[124,0,186]}]}),new vt({stops:[{value:0,color:[40,26,44]},{value:.13,color:[59,49,90]},{value:.25,color:[64,76,139]},{value:.38,color:[63,110,151]},{value:.5,color:[72,142,158]},{value:.63,color:[85,174,163]},{value:.75,color:[120,206,163]},{value:.88,color:[187,230,172]},{value:1,color:[253,254,204]}]}),new vt({stops:[{value:0,color:[47,15,62]},{value:.13,color:[87,23,86]},{value:.25,color:[130,28,99]},{value:.38,color:[171,41,96]},{value:.5,color:[206,67,86]},{value:.63,color:[230,106,84]},{value:.75,color:[242,149,103]},{value:.88,color:[249,193,135]},{value:1,color:[254,237,176]}]}),new vt({stops:[{value:0,color:[18,36,20]},{value:.13,color:[25,63,41]},{value:.25,color:[24,91,59]},{value:.38,color:[13,119,72]},{value:.5,color:[18,148,80]},{value:.63,color:[80,173,89]},{value:.75,color:[132,196,122]},{value:.88,color:[175,221,162]},{value:1,color:[215,249,208]}]}),new vt({stops:[{value:0,color:[54,14,36]},{value:.13,color:[89,23,80]},{value:.25,color:[110,45,132]},{value:.38,color:[120,77,178]},{value:.5,color:[120,113,213]},{value:.63,color:[115,151,228]},{value:.75,color:[134,185,227]},{value:.88,color:[177,214,227]},{value:1,color:[230,241,241]}]}),new vt({stops:[{value:0,color:[30,4,110]},{value:.13,color:[47,14,176]},{value:.25,color:[41,45,236]},{value:.38,color:[25,99,212]},{value:.5,color:[68,131,200]},{value:.63,color:[114,156,197]},{value:.75,color:[157,181,203]},{value:.88,color:[200,208,216]},{value:1,color:[241,237,236]}]}),new vt({stops:[{value:0,color:[60,9,18]},{value:.13,color:[100,17,27]},{value:.25,color:[142,20,29]},{value:.38,color:[177,43,27]},{value:.5,color:[192,87,63]},{value:.63,color:[205,125,105]},{value:.75,color:[216,162,148]},{value:.88,color:[227,199,193]},{value:1,color:[241,237,236]}]}),new vt({stops:[{value:0,color:[64,5,5]},{value:.13,color:[106,6,15]},{value:.25,color:[144,26,7]},{value:.38,color:[168,64,3]},{value:.5,color:[188,100,4]},{value:.63,color:[206,136,11]},{value:.75,color:[220,174,25]},{value:.88,color:[231,215,44]},{value:1,color:[248,254,105]}]}),new vt({stops:[{value:0,color:[51,20,24]},{value:.13,color:[90,32,35]},{value:.25,color:[129,44,34]},{value:.38,color:[159,68,25]},{value:.5,color:[182,99,19]},{value:.63,color:[199,134,22]},{value:.75,color:[212,171,35]},{value:.88,color:[221,210,54]},{value:1,color:[225,253,75]}]}),new vt({stops:[{value:0,color:[145,105,18]},{value:.13,color:[184,71,38]},{value:.25,color:[186,58,115]},{value:.38,color:[160,71,185]},{value:.5,color:[110,97,218]},{value:.63,color:[50,123,164]},{value:.75,color:[31,131,110]},{value:.88,color:[77,129,34]},{value:1,color:[145,105,18]}]}),new vt({stops:[{value:0,color:[42,24,108]},{value:.13,color:[33,50,162]},{value:.25,color:[15,90,145]},{value:.38,color:[40,118,137]},{value:.5,color:[59,146,135]},{value:.63,color:[79,175,126]},{value:.75,color:[120,203,104]},{value:.88,color:[193,221,100]},{value:1,color:[253,239,154]}]}),new vt({stops:[{value:0,color:[4,35,51]},{value:.13,color:[23,51,122]},{value:.25,color:[85,59,157]},{value:.38,color:[129,79,143]},{value:.5,color:[175,95,130]},{value:.63,color:[222,112,101]},{value:.75,color:[249,146,66]},{value:.88,color:[249,196,65]},{value:1,color:[232,250,91]}]}),new vt({stops:[{value:0,color:[34,31,27]},{value:.13,color:[65,50,41]},{value:.25,color:[98,69,52]},{value:.38,color:[131,89,57]},{value:.5,color:[161,112,59]},{value:.63,color:[185,140,66]},{value:.75,color:[202,174,88]},{value:.88,color:[216,209,126]},{value:1,color:[233,246,171]}]}),new vt({stops:[{value:0,color:[17,32,64]},{value:.13,color:[35,52,116]},{value:.25,color:[29,81,156]},{value:.38,color:[31,113,162]},{value:.5,color:[50,144,169]},{value:.63,color:[87,173,176]},{value:.75,color:[149,196,189]},{value:.88,color:[203,221,211]},{value:1,color:[254,251,230]}]}),new vt({stops:[{value:0,color:[23,35,19]},{value:.13,color:[24,64,38]},{value:.25,color:[11,95,45]},{value:.38,color:[39,123,35]},{value:.5,color:[95,146,12]},{value:.63,color:[152,165,18]},{value:.75,color:[201,186,69]},{value:.88,color:[233,216,137]},{value:1,color:[255,253,205]}]}),new vt({stops:[{value:0,color:[0,0,0]},{value:.07,color:[22,5,59]},{value:.13,color:[60,4,105]},{value:.2,color:[109,1,135]},{value:.27,color:[161,0,147]},{value:.33,color:[210,2,142]},{value:.4,color:[251,11,123]},{value:.47,color:[255,29,97]},{value:.53,color:[255,54,69]},{value:.6,color:[255,85,46]},{value:.67,color:[255,120,34]},{value:.73,color:[255,157,37]},{value:.8,color:[241,191,57]},{value:.87,color:[224,220,93]},{value:.93,color:[218,241,142]},{value:1,color:[227,253,198]}]}),new vt({stops:[{value:0,color:[0,32,77,255]},{value:.125,color:[5,54,110,255]},{value:.25,color:[65,77,108,255]},{value:.375,color:[97,100,111,255]},{value:.5,color:[125,124,121,255]},{value:.625,color:[156,149,120,255]},{value:.75,color:[190,175,111,255]},{value:.875,color:[225,204,94,255]},{value:1,color:[255,235,70,255]}]}),new vt({stops:[{value:0,color:[48,18,59,255]},{value:.125,color:[70,107,227,255]},{value:.25,color:[40,187,236,255]},{value:.375,color:[49,242,153,255]},{value:.5,color:[162,252,60,255]},{value:.625,color:[237,208,58,255]},{value:.75,color:[251,128,34,255]},{value:.875,color:[210,49,5,255]},{value:1,color:[122,4,3,255]}]}),new vt({stops:[{value:0,color:[250,235,221,0]},{value:.133,color:[250,235,221,255]},{value:.266,color:[246,170,130,255]},{value:.4,color:[240,96,67,255]},{value:.533,color:[203,27,79,255]},{value:.666,color:[132,30,90,255]},{value:.8,color:[63,27,68,255]},{value:1,color:[3,5,26,255]}]}),new vt({stops:[{value:0,color:[11,4,5,255]},{value:.125,color:[43,28,53,255]},{value:.25,color:[62,53,107,255]},{value:.375,color:[59,86,152,255]},{value:.5,color:[53,123,162,255]},{value:.625,color:[53,158,170,255]},{value:.75,color:[73,193,173,255]},{value:.875,color:[150,221,181,255]},{value:1,color:[222,245,229,255]}]});CI();const wf=[{id:"czubereki",category:"ukrainska",title:"Czebureki, chaczapuri, bilaszy",subtitle:"Kuchania ukraiska",address:"Park praski 01, 03-402 Warszawa",phone:"797-863-182",website:"",googleMaps:"https://www.google.com/maps/place/Czebureki/@52.8210271,17.7380807,7z/data=!4m10!1m2!2m1!1sczeburek+bilaszy!3m6!1s0x471ecd6d101d96d1:0x7188e7de441fb816!8m2!3d52.2527061!4d21.0294178!15sChBjemVidXJlayBiaWxhc3p5WhIiEGN6ZWJ1cmVrIGJpbGFzenmSARRmYXN0X2Zvb2RfcmVzdGF1cmFudJoBI0NoWkRTVWhOTUc5blMwVkpRMEZuU1VSRWEwOTZVMGwzRUFF4AEA!16s%2Fg%2F11fm_snlkg?entry=ttu",youtube:"https://www.youtube.com/watch?v=E3odGfugOKc",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/czubereki.png?alt=media&token=91d3bd46-4228-4889-888c-69655d8d77fc",latitude:52.252628,longitude:21.029509},{id:"barKantyna",category:"polska",title:"Bar KANTYNA",subtitle:"Kuchania polska/wojskowa",address:"Igoomska 31, 31-983 Krakw",phone:"",website:"https://www.facebook.com/barkantyna",googleMaps:"https://www.google.com/maps/place/Bar+KANTYNA/@50.0760822,20.1467722,18.75z/data=!4m6!3m5!1s0x4716461b75180f73:0x594ecc1c195614a9!8m2!3d50.0763717!4d20.1471332!16s%2Fg%2F11f5hly38x?entry=ttu",youtube:"https://www.youtube.com/watch?v=ysajqVdMpYE",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/barKantyna.png?alt=media&token=7430ea04-9568-476f-b770-4cf3694d7f99",latitude:50.076236,longitude:20.14715},{id:"domsTrawy",category:"amerykanska",title:"DOM sTRAWY",subtitle:"Kuchania amerykaska",address:"Tarnowska 40, 25-394 Kielce",phone:"607-540-620",website:"http://domstrawy.pl/",googleMaps:"https://www.google.com/maps/place/DOM+sTRAWY/@50.8588814,20.6381072,17z/data=!3m1!4b1!4m6!3m5!1s0x4718271ac65d076d:0x1035db3a30240b1f!8m2!3d50.8588814!4d20.6381072!16s%2Fg%2F11rwqqgs6z?entry=ttu",youtube:"https://www.youtube.com/watch?v=M1w4N17lnh4",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/domStrawy.png?alt=media&token=61d61a6a-9dd9-4e11-bb1c-87040b9a5f1a",latitude:50.858846,longitude:20.638403},{id:"zapiekankiAdamus",category:"polska",title:"Zapiekanki Adamus",subtitle:"Kuchania polska",address:"Wadysawa Sikorskiego 11, 32-050 Skawina",phone:"12-276-20-75",website:"https://www.zapiekankiadamus.pl/",googleMaps:"https://www.google.com/maps/place/Zapiekanki+Adamus/@49.9766782,19.8197595,17z/data=!3m1!4b1!4m6!3m5!1s0x47165df3a2ab5b6f:0x1b5b3f1df6b4cc6e!8m2!3d49.9766782!4d19.8223344!16s%2Fg%2F1hf0704g4?entry=ttu",youtube:"https://www.youtube.com/watch?v=gcvveo0zZBc",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/zapiekankiAdamus.png?alt=media&token=9035c718-e970-4e2a-a40f-72373de37186",latitude:49.976788,longitude:19.82226},{id:"zapiekankiBilgoraj",category:"polska",title:"Zapiekanki w Bilgoraju",subtitle:"Kuchania polska",address:"Tadeusza Kociuszki 79, 23-400 Bigoraj",phone:"",website:"",googleMaps:"https://www.google.com/maps/place/Zapiekanki/@50.5317838,22.7191173,17.75z/data=!4m15!1m8!3m7!1s0x4723355490a92515:0xe0d361f3a39adbac!2sZapiekanki!8m2!3d50.5321864!4d22.7198235!10e1!16s%2Fg%2F11v4lxmsxy!3m5!1s0x4723355490a92515:0xe0d361f3a39adbac!8m2!3d50.5321864!4d22.7198235!16s%2Fg%2F11v4lxmsxy?entry=ttu",youtube:"https://www.youtube.com/watch?v=CUP0IlOyhAQ",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/zapiekankiBilgoraj.png?alt=media&token=ce05b630-2a2f-4350-9934-9ff82c0963c2",latitude:50.532214,longitude:22.719633},{id:"slaskaProhibicja",category:"polska",title:"lska Prohibicja",subtitle:"Kuchania polska",address:"Krawczyka 1, 40-423 Katowice",phone:"32-723-28-99",website:"https://slaskaprohibicja.pl/",googleMaps:"https://www.google.com/maps/place/%C5%9Al%C4%85ska+Prohibicja/@50.2436485,19.079971,17z/data=!3m1!4b1!4m6!3m5!1s0x4716cf8c1b89cb0f:0xa7a6844a6499e6bf!8m2!3d50.2436485!4d19.079971!16s%2Fg%2F11d_8ck8mn?entry=ttu",youtube:"https://www.youtube.com/watch?v=ArkjDgSBF8M",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/slaskaProhibicja.png?alt=media&token=1add60bc-4a14-4be6-9b8d-83be480915f9",latitude:50.243522,longitude:19.079916},{id:"barKukuryku",category:"polska",title:"Bar Mleczny KukuRyku",subtitle:"Kuchania polska",address:"Wilimowskiego 6, 40-061 Katowice",phone:"881-799-105",website:"http://www.barmlecznykukuryku.pl/",googleMaps:"https://www.google.com/maps/place/Bar+Mleczny+KukuRyku/@50.2553652,19.0101222,17z/data=!3m1!4b1!4m6!3m5!1s0x4716cf1f0fae3ca7:0xe7cdff632c633a6f!8m2!3d50.2553652!4d19.0101222!16s%2Fg%2F11fk8c4j3x?entry=ttu",youtube:"https://www.youtube.com/watch?v=D-1zlC5aXT0",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/barKukuryku.png?alt=media&token=190fc75e-b811-4733-ab4f-3674f2fc7bf3",latitude:50.255285,longitude:19.010111},{id:"szamkaKebab",category:"turecka",title:"Szamka | Kebab",subtitle:"Kuchnia turecka",address:"Mickiewicza 1, 62-300 Wrzenia",phone:"609-930-842",website:"https://www.szamkawrzesnia.pl/",googleMaps:"https://www.google.com/maps/place/Szamka+%7C+Kebab/@52.3245656,17.5639971,17z/data=!4m6!3m5!1s0x4704e9981ff8febb:0x39328f92e8f2a65e!8m2!3d52.3245263!4d17.5648876!16s%2Fg%2F11j1g2l0b2?entry=ttu",youtube:"https://www.youtube.com/watch?v=fvCh5i8dA-Q",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/szamkaKebab.png?alt=media&token=9dbd7ca4-1625-4ae2-9b33-9a3b8cdce6f4",latitude:52.324511,longitude:17.564768},{id:"zapiekankiPaniAni",category:"polska",title:"Zapiekanki Pani Ani",subtitle:"Kuchania polska",address:"Mieszka I 27a, 62-200 Gniezno",phone:"",website:"",googleMaps:"https://www.google.com/maps/place/Zapiekanki/@52.5324777,17.598315,17z/data=!3m1!4b1!4m6!3m5!1s0x4704910dee71df9d:0x4912d76677fc377!8m2!3d52.5324777!4d17.598315!16s%2Fg%2F11dxm8ksqk?entry=ttu",youtube:"https://www.youtube.com/watch?v=8elt86N50Kw",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/zapiekankiPaniAni.png?alt=media&token=edea33b0-ccf8-40ea-be4a-113d41f6d1e8",latitude:52.53245,longitude:17.598152},{id:"chefNaKolach",category:"burger",title:"Chef na koach",subtitle:"Kuchania amerykaska",address:"Podzamcze, 87-200 Wbrzeno",phone:"724-398-964",website:"",googleMaps:"https://www.google.com/maps/place/Chef+na+ko%C5%82ach/@53.2851267,18.9387407,17z/data=!3m1!4b1!4m6!3m5!1s0x471d2bd61f23c477:0x95d06d720c16dae1!8m2!3d53.2851267!4d18.9387407!16s%2Fg%2F11q2xkl4py?entry=ttu",youtube:"https://www.youtube.com/watch?v=YN0dvxH4bAg&t=761s",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/chefNaKolach.png?alt=media&token=07e5ece0-c281-4877-9596-f18574c73e49",latitude:53.285105,longitude:18.938681},{id:"burgerMeister",category:"amerykanska",title:"Burgermeister",subtitle:"Kuchania amerykaska",address:"Dircksenstrae 113, 10178 Berlin, Niemcy",phone:"+49 30-678-268-20",website:"http://www.burgermeister.com/",googleMaps:"https://www.google.com/maps/place/Burgermeister+Alexanderplatz/@52.5203627,13.4131421,17z/data=!3m1!4b1!4m6!3m5!1s0x47a84f3c22892d55:0xd95d5cd7eb147184!8m2!3d52.5203627!4d13.4131421!16s%2Fg%2F11t3x_j0vk?entry=ttu",youtube:"https://www.youtube.com/watch?v=DeZ5Ai4H2xA",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/burgerMeister.png?alt=media&token=7ea22ce4-d4ba-46ad-8d90-66acb44408d6",latitude:52.520352,longitude:13.413112},{id:"barMlecznyJaros",category:"polska",title:"Bar Mleczny Jaros",subtitle:"Kuchania polska",address:"Jagielloska 38, 80-367 Gdask",phone:"",website:"https://m.facebook.com/permalink.php?story_fbid=133387804971372&id=110130200630466",googleMaps:"https://www.google.com/maps/place/Bar+mleczny+Jaros/@54.4131327,18.5984808,17z/data=!3m1!4b1!4m6!3m5!1s0x46fd0b293cd3c0db:0x4d91fe00f2dc3cfc!8m2!3d54.4131327!4d18.5984808!16s%2Fg%2F11c0r5rcnq?entry=ttu",youtube:"https://www.youtube.com/watch?v=lQJUlmTGpQE",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/barMlecznyJaros.png?alt=media&token=f00383f9-b3f7-40be-9324-eb9bf0d71f28",latitude:54.413238,longitude:18.598047},{id:"hellskiBurger",category:"amerykanska",title:"HELLski Burger",subtitle:"Kuchania amerykaska",address:"Wiejska 109, 84-150 Hel",phone:"539-231-243",website:"https://www.facebook.com/HELLskiBurger/",googleMaps:"https://www.google.com/maps/place/HELLski+Burger/@54.6029726,18.8042298,17z/data=!3m1!4b1!4m6!3m5!1s0x46fd05e282a05703:0x5b1b29565322b0d!8m2!3d54.6029726!4d18.8042298!16s%2Fg%2F11hfy0nt2l?entry=ttu",youtube:"https://www.youtube.com/watch?v=4Gwwdk_QF3M",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/hellskiBurger.png?alt=media&token=353ee5c1-1b3e-4e96-bcf2-95d605286995",latitude:54.602977,longitude:18.804015},{id:"fazirKebab",category:"turecka",title:"Fazir kebab falafel",subtitle:"Kuchania turecka",address:"Jzefa Pisudskiego 40, 05-410 Jzefw",phone:"782-544-139",website:"https://www.facebook.com/FazirKebab/",googleMaps:"https://www.google.com/maps/place/Fazir+kebab+falafel/@52.1476184,21.2245048,17z/data=!3m1!4b1!4m6!3m5!1s0x47192b7cf7cac355:0x600e20c0e580d8bc!8m2!3d52.1476184!4d21.2245048!16s%2Fg%2F11ghzsw9tg?entry=ttu",youtube:"https://www.youtube.com/watch?v=KHDBR8QSu2E&t=383s",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/fazirKebab.png?alt=media&token=cec49526-328c-433a-b945-a0d4740c5a88",latitude:52.147704,longitude:21.224647},{id:"kurczakZRozna",category:"polska",title:"Kurczak z rona na Dolnej",subtitle:"Kuchania polska",address:"Dolna 2A, 00-774 Warszawa",phone:"882-947-555",website:"https://akur.at/",googleMaps:"https://www.google.com/maps/place/Kurczak+z+ro%C5%BCna+na+Dolnej/@52.2018841,21.0347823,17z/data=!3m1!4b1!4m6!3m5!1s0x471ecd251089ef71:0x2661c17194883d6e!8m2!3d52.2018841!4d21.0347823!16s%2Fg%2F11c5g83bp8?entry=ttu",youtube:"https://www.youtube.com/watch?v=lffmCKTrDo0",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/kurczakZRo%C5%BCna.png?alt=media&token=c198cbef-5799-4bdf-99c6-c2786d9c910c",latitude:52.201777,longitude:21.034856},{id:"senorLucas",category:"meksykanska",title:"Seor Lucas Taquera",subtitle:"Kuchania meksykaska",address:"Poznaska 26, 00-684 Warszawa",phone:"690-590-610",website:"https://www.facebook.com/senorlucasmexican/",googleMaps:"https://www.google.com/maps/place/Se%C3%B1or+Lucas+Taquer%C3%ADa/@52.2267735,21.0111552,17z/data=!3m1!4b1!4m6!3m5!1s0x471ecd4dd98ae9d9:0x27685bb2d55387c6!8m2!3d52.2267735!4d21.0111552!16s%2Fg%2F11kmwvdsj5?entry=ttu",youtube:"https://www.youtube.com/watch?v=0zVJKtICbB4",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/senorLucas.png?alt=media&token=80f8cbaa-36c5-4fa9-a6c3-d8e7d4b5d90b",latitude:52.201777,longitude:21.034856},{id:"pyzyFlakiGorace",category:"polska",title:"Pyzy, Flaki Gorce!",subtitle:"Kuchania polska",address:"Brzeska 29/31, 03-739 Warszawa",phone:"606-294-499",website:"https://www.pyzyflakigorace.pl/",googleMaps:"https://www.google.com/maps/place/Pyzy,+Flaki+Gor%C4%85ce!/@52.2528996,21.0412598,17z/data=!3m1!4b1!4m6!3m5!1s0x471ecc47eab857bf:0x314660c3d0799146!8m2!3d52.2528996!4d21.0412598!16s%2Fg%2F11cn9lbqsj?entry=ttu",youtube:"https://www.youtube.com/watch?v=oy44sJxYIKs",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/pyzyFlakiGor%C4%85ce.png?alt=media&token=089f978c-9de2-4ba0-9762-4a12f566418a",latitude:52.252964,longitude:21.041384},{id:"sirinBodrum",category:"turecka",title:"Sirin Bodrum Dner Kebab",subtitle:"Kuchania turecka",address:"al. Jana Pawa II 18, 00-116 Warszawa",phone:"780-641-041",website:"https://www.instagram.com/sirindonerkebab/",googleMaps:"https://www.google.com/maps/place/Sirin+Bodrum+D%C3%B6ner+Kebab/@52.2339175,20.9985659,17z/data=!3m1!4b1!4m6!3m5!1s0x471ecd3f1dc04e13:0x61df34b43a6bed1a!8m2!3d52.2339175!4d20.9985659!16s%2Fg%2F11y1brkhkk?entry=ttu",youtube:"https://www.youtube.com/watch?v=m3MOkp6LSvc",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/sirinBodrum.png?alt=media&token=bbbc6dfa-b0e4-4a51-8670-f7ab04807e73",latitude:52.233901,longitude:20.998434},{id:"eleganceRestauracja",category:"turecka",title:"Sirin Bodrum Dner Kebab",subtitle:"Kuchania turecka",address:"Karolkowa 28a/lok. U3, 01-207 Warszawa",phone:"577-276-911",website:"https://linktr.ee/elegancerestauracja",googleMaps:"https://www.google.com/maps/place/Elegance+Restauracja/@52.2311692,20.9780393,17z/data=!3m1!4b1!4m6!3m5!1s0x471ecde5931c6ba7:0x225edb27f1c7201d!8m2!3d52.2311692!4d20.9780393!16s%2Fg%2F11s5fshm02?entry=ttu",youtube:"https://www.youtube.com/watch?v=HCI7GcbYCrc",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/eleganceRestauracja.png?alt=media&token=40049dfb-7d2a-4a73-825f-2524851aec81",latitude:52.231125,longitude:20.977851},{id:"rurki",category:"polska",title:"Rurki z prawdziw bit mietan",subtitle:"Kuchania polska",address:"Wolska 50a/paw.7 B, 01-187 Warszawa",phone:"603-348-316",website:"https://www.facebook.com/people/Wolskie-Rurki-z-Prawdziw%C4%85-Bit%C4%85-%C5%9Amietan%C4%85/100049241751807/",googleMaps:"https://www.google.com/maps/place/Rurki+z+prawdziw%C4%85+bit%C4%85+%C5%9Bmietan%C4%85/@52.2340758,20.9682963,17z/data=!3m1!4b1!4m6!3m5!1s0x471ecbd505f3a8e3:0xe8574efa1d76e759!8m2!3d52.2340758!4d20.9682963!16s%2Fg%2F11hf84xhp5?entry=ttu",youtube:"https://www.youtube.com/watch?v=Z7chnfu8cJY",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/rurki.png?alt=media&token=921a8d70-69d6-4206-a01a-f7a722724f49",latitude:52.234013,longitude:20.968336},{id:"tantuni",category:"turecka",title:"Tantuni Kebab",subtitle:"Kuchania turkish",address:"Wolska 44a, 01-187 Warszawa",phone:"603-348-316",website:"https://www.facebook.com/people/Wolskie-Rurki-z-Prawdziw%C4%85-Bit%C4%85-%C5%9Amietan%C4%85/100049241751807/",googleMaps:"https://www.google.com/maps/place/TANTUN%C4%B0+KEBAB/@52.2342638,20.969816,19.25z/data=!4m6!3m5!1s0x471ecb7624ac367d:0xbec29bdb08007fa!8m2!3d52.2344118!4d20.9698039!16s%2Fg%2F11kr76lqqc?entry=ttu",youtube:"https://www.youtube.com/watch?v=HCI7GcbYCrc",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/tantuni.png?alt=media&token=462c1171-15ee-4656-9000-7388ba1ab7fc",latitude:52.234296,longitude:20.969827},{id:"barWaga",category:"polska",title:"Bar Waga",subtitle:"Kuchania polska",address:"Obozowa 82A/lok 15, 01-434 Warszawa",phone:"662-934-705",website:"https://www.facebook.com/profile.php?id=100093054352680",googleMaps:"https://www.google.com/maps/place/Bar+Waga/@52.2473272,20.9469746,17z/data=!3m1!4b1!4m6!3m5!1s0x471ecc817966ef13:0x73fbc9147e5ec5f!8m2!3d52.2473272!4d20.9469746!16s%2Fg%2F11g86lrkr_?entry=ttu",youtube:"https://www.youtube.com/watch?v=0ksqvzDROUE",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/barWaga.png?alt=media&token=3887fac1-589d-4831-be98-acb0e504d87f",latitude:52.247096,longitude:20.947053}];function kh(){return kh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u])}return e},kh.apply(this,arguments)}var $I=function(t,a){a===void 0&&(a=!0),ke.useEffect(function(){if(a){var u=function(x){x.key==="Escape"&&t(x)};return document.addEventListener("keyup",u),function(){a&&document.removeEventListener("keyup",u)}}},[t,a])},HI=function(t,a){a===void 0&&(a=!0),ke.useEffect(function(){if(a){var u=function(){t()};return window.addEventListener("resize",u),function(){a&&window.removeEventListener("resize",u)}}},[t,a])},WI=function(t,a,u){u===void 0&&(u=!0),ke.useEffect(function(){if(u){var h=function(v){var c=Array.isArray(t)?t:[t],I=!1;c.forEach(function(F){if(!F.current||F.current.contains(v.target)){I=!0;return}}),v.stopPropagation(),I||a(v)};return document.addEventListener("mousedown",h),document.addEventListener("touchstart",h),function(){u&&(document.removeEventListener("mousedown",h),document.removeEventListener("touchstart",h))}}},[t,a,u])},qI=function(t,a){a===void 0&&(a=!0),ke.useEffect(function(){if(a){var u=function(x){if(x.keyCode===9){var v,c=t==null||(v=t.current)===null||v===void 0?void 0:v.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),I=Array.prototype.slice.call(c);if(I.length===1){x.preventDefault();return}var F=I[0],W=I[I.length-1];x.shiftKey&&document.activeElement===F?(x.preventDefault(),W.focus()):document.activeElement===W&&(x.preventDefault(),F.focus())}};return document.addEventListener("keydown",u),function(){a&&document.removeEventListener("keydown",u)}}},[t,a])},ZI=typeof window<"u"?ke.useLayoutEffect:ke.useEffect,sh={popupContent:{tooltip:{position:"absolute",zIndex:999},modal:{position:"relative",margin:"auto"}},popupArrow:{height:"8px",width:"16px",position:"absolute",background:"transparent",color:"#FFF",zIndex:-1},overlay:{tooltip:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",zIndex:999},modal:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",display:"flex",zIndex:999}}},GI=["top left","top center","top right","right top","right center","right bottom","bottom left","bottom center","bottom right","left top","left center","left bottom"],KI=function(t,a,u,h,x){var v=x.offsetX,c=x.offsetY,I=h?8:0,F=u.split(" "),W=t.top+t.height/2,D=t.left+t.width/2,B=a.height,le=a.width,ge=W-B/2,de=D-le/2,we="",ee="0%",q="0%";switch(F[0]){case"top":ge-=B/2+t.height/2+I,we="rotate(180deg)  translateX(50%)",ee="100%",q="50%";break;case"bottom":ge+=B/2+t.height/2+I,we="rotate(0deg) translateY(-100%) translateX(-50%)",q="50%";break;case"left":de-=le/2+t.width/2+I,we=" rotate(90deg)  translateY(50%) translateX(-25%)",q="100%",ee="50%";break;case"right":de+=le/2+t.width/2+I,we="rotate(-90deg)  translateY(-150%) translateX(25%)",ee="50%";break}switch(F[1]){case"top":ge=t.top,ee=t.height/2+"px";break;case"bottom":ge=t.top-B+t.height,ee=B-t.height/2+"px";break;case"left":de=t.left,q=t.width/2+"px";break;case"right":de=t.left-le+t.width,q=le-t.width/2+"px";break}return ge=F[0]==="top"?ge-c:ge+c,de=F[0]==="left"?de-v:de+v,{top:ge,left:de,transform:we,arrowLeft:q,arrowTop:ee}},XI=function(t){var a={top:0,left:0,width:window.innerWidth,height:window.innerHeight};if(typeof t=="string"){var u=document.querySelector(t);u!==null&&(a=u.getBoundingClientRect())}return a},YI=function(t,a,u,h,x,v){var c=x.offsetX,I=x.offsetY,F={arrowLeft:"0%",arrowTop:"0%",left:0,top:0,transform:"rotate(135deg)"},W=0,D=XI(v),B=Array.isArray(u)?u:[u];for((v||Array.isArray(u))&&(B=[].concat(B,GI));W<B.length;){F=KI(t,a,B[W],h,{offsetX:c,offsetY:I});var le={top:F.top,left:F.left,width:a.width,height:a.height};if(le.top<=D.top||le.left<=D.left||le.top+le.height>=D.top+D.height||le.left+le.width>=D.left+D.width)W++;else break}return F},JI=0,QI=function(){var t=document.getElementById("popup-root");return t===null&&(t=document.createElement("div"),t.setAttribute("id","popup-root"),document.body.appendChild(t)),t},eA=ke.forwardRef(function(e,t){var a=e.trigger,u=a===void 0?null:a,h=e.onOpen,x=h===void 0?function(){}:h,v=e.onClose,c=v===void 0?function(){}:v,I=e.defaultOpen,F=I===void 0?!1:I,W=e.open,D=W===void 0?void 0:W,B=e.disabled,le=B===void 0?!1:B,ge=e.nested,de=ge===void 0?!1:ge,we=e.closeOnDocumentClick,ee=we===void 0?!0:we,q=e.repositionOnResize,te=q===void 0?!0:q,_e=e.closeOnEscape,Ce=_e===void 0?!0:_e,Ae=e.on,Le=Ae===void 0?["click"]:Ae,Ge=e.contentStyle,Re=Ge===void 0?{}:Ge,Me=e.arrowStyle,$e=Me===void 0?{}:Me,ft=e.overlayStyle,it=ft===void 0?{}:ft,st=e.className,or=st===void 0?"":st,Gt=e.position,ar=Gt===void 0?"bottom center":Gt,Ye=e.modal,mt=Ye===void 0?!1:Ye,yt=e.lockScroll,Ct=yt===void 0?!1:yt,Rt=e.arrow,er=Rt===void 0?!0:Rt,Ur=e.offsetX,Ir=Ur===void 0?0:Ur,Dr=e.offsetY,Gr=Dr===void 0?0:Dr,li=e.mouseEnterDelay,To=li===void 0?100:li,io=e.mouseLeaveDelay,_a=io===void 0?100:io,Zn=e.keepTooltipInside,Hi=Zn===void 0?!1:Zn,pr=e.children,oo=ke.useState(D||F),be=oo[0],Ti=oo[1],wn=ke.useRef(null),Pt=ke.useRef(null),Vt=ke.useRef(null),ui=ke.useRef(null),ao=ke.useRef("popup-"+ ++JI),Vr=mt?!0:!u,ci=ke.useRef(0);ZI(function(){return be?(ui.current=document.activeElement,Et(),Be(),Eo()):so(),function(){clearTimeout(ci.current)}},[be]),ke.useEffect(function(){typeof D=="boolean"&&(D?zn():bn())},[D,le]);var zn=function(Z){be||le||(Ti(!0),setTimeout(function(){return x(Z)},0))},bn=function(Z){var R;!be||le||(Ti(!1),Vr&&((R=ui.current)===null||R===void 0||R.focus()),setTimeout(function(){return c(Z)},0))},ko=function(Z){Z==null||Z.stopPropagation(),be?bn(Z):zn(Z)},Ne=function(Z){clearTimeout(ci.current),ci.current=setTimeout(function(){return zn(Z)},To)},sn=function(Z){Z==null||Z.preventDefault(),ko()},Kr=function(Z){clearTimeout(ci.current),ci.current=setTimeout(function(){return bn(Z)},_a)},Eo=function(){Vr&&Ct&&(document.getElementsByTagName("body")[0].style.overflow="hidden")},so=function(){Vr&&Ct&&(document.getElementsByTagName("body")[0].style.overflow="auto")},Be=function(){var Z,R=Pt==null||(Z=Pt.current)===null||Z===void 0?void 0:Z.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),O=Array.prototype.slice.call(R)[0];O==null||O.focus()};ke.useImperativeHandle(t,function(){return{open:function(){zn()},close:function(){bn()},toggle:function(){ko()}}});var Et=function(){if(!(Vr||!be)&&!(!(wn!=null&&wn.current)||!(wn!=null&&wn.current)||!(Pt!=null&&Pt.current))){var Z=wn.current.getBoundingClientRect(),R=Pt.current.getBoundingClientRect(),O=YI(Z,R,ar,er,{offsetX:Ir,offsetY:Gr},Hi);if(Pt.current.style.top=O.top+window.scrollY+"px",Pt.current.style.left=O.left+window.scrollX+"px",er&&Vt.current){var j,Y;Vt.current.style.transform=O.transform,Vt.current.style.setProperty("-ms-transform",O.transform),Vt.current.style.setProperty("-webkit-transform",O.transform),Vt.current.style.top=((j=$e.top)===null||j===void 0?void 0:j.toString())||O.arrowTop,Vt.current.style.left=((Y=$e.left)===null||Y===void 0?void 0:Y.toString())||O.arrowLeft}}};$I(bn,Ce),qI(Pt,be&&Vr),HI(Et,te),WI(u?[Pt,wn]:[Pt],bn,ee&&!de);var St=function(){for(var Z={key:"T",ref:wn,"aria-describedby":ao.current},R=Array.isArray(Le)?Le:[Le],O=0,j=R.length;O<j;O++)switch(R[O]){case"click":Z.onClick=ko;break;case"right-click":Z.onContextMenu=sn;break;case"hover":Z.onMouseEnter=Ne,Z.onMouseLeave=Kr;break;case"focus":Z.onFocus=Ne,Z.onBlur=Kr;break}if(typeof u=="function"){var Y=u(be);return!!u&&_n.cloneElement(Y,Z)}return!!u&&_n.cloneElement(u,Z)},tn=function(){var Z=Vr?sh.popupContent.modal:sh.popupContent.tooltip,R={className:"popup-content "+(or!==""?or.split(" ").map(function(O){return O+"-content"}).join(" "):""),style:kh({},Z,Re,{pointerEvents:"auto"}),ref:Pt,onClick:function(j){j.stopPropagation()}};return!mt&&Le.indexOf("hover")>=0&&(R.onMouseEnter=Ne,R.onMouseLeave=Kr),R},Xr=function(){return _n.createElement("div",Object.assign({},tn(),{key:"C",role:Vr?"dialog":"tooltip",id:ao.current}),er&&!Vr&&_n.createElement("div",{ref:Vt,style:sh.popupArrow},_n.createElement("svg",{"data-testid":"arrow",className:"popup-arrow "+(or!==""?or.split(" ").map(function(Z){return Z+"-arrow"}).join(" "):""),viewBox:"0 0 32 16",style:kh({position:"absolute"},$e)},_n.createElement("path",{d:"M16 0l16 16H0z",fill:"currentcolor"}))),pr&&typeof pr=="function"?pr(bn,be):pr)},Tt=!(Le.indexOf("hover")>=0),ki=Vr?sh.overlay.modal:sh.overlay.tooltip,Ei=[Tt&&_n.createElement("div",{key:"O","data-testid":"overlay","data-popup":Vr?"modal":"tooltip",className:"popup-overlay "+(or!==""?or.split(" ").map(function(Ot){return Ot+"-overlay"}).join(" "):""),style:kh({},ki,it,{pointerEvents:ee&&de||Vr?"auto":"none"}),onClick:ee&&de?bn:void 0,tabIndex:-1},Vr&&Xr()),!Vr&&Xr()];return _n.createElement(_n.Fragment,null,St(),be&&L5.createPortal(Ei,QI()))}),gS={exports:{}},tA="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",rA=tA,nA=rA;function yS(){}function _S(){}_S.resetWarningCache=yS;var iA=function(){function e(u,h,x,v,c,I){if(I!==nA){var F=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw F.name="Invariant Violation",F}}e.isRequired=e;function t(){return e}var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:_S,resetWarningCache:yS};return a.PropTypes=a,a};gS.exports=iA();var oA=gS.exports;const mh=Bu(oA);var vS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ux=_n.createContext&&_n.createContext(vS),aA=["attr","size","title"];function sA(e,t){if(e==null)return{};var a=lA(e,t),u,h;if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(e);for(h=0;h<x.length;h++)u=x[h],!(t.indexOf(u)>=0)&&Object.prototype.propertyIsEnumerable.call(e,u)&&(a[u]=e[u])}return a}function lA(e,t){if(e==null)return{};var a={};for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){if(t.indexOf(u)>=0)continue;a[u]=e[u]}return a}function bf(){return bf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u])}return e},bf.apply(this,arguments)}function Vx(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);t&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),a.push.apply(a,u)}return a}function Sf(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Vx(Object(a),!0).forEach(function(u){uA(e,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Vx(Object(a)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(a,u))})}return e}function uA(e,t,a){return t=cA(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function cA(e){var t=hA(e,"string");return typeof t=="symbol"?t:t+""}function hA(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var u=a.call(e,t||"default");if(typeof u!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xS(e){return e&&e.map((t,a)=>_n.createElement(t.tag,Sf({key:a},t.attr),xS(t.child)))}function Si(e){return t=>_n.createElement(dA,bf({attr:Sf({},e.attr)},t),xS(e.child))}function dA(e){var t=a=>{var{attr:u,size:h,title:x}=e,v=sA(e,aA),c=h||a.size||"1em",I;return a.className&&(I=a.className),e.className&&(I=(I?I+" ":"")+e.className),_n.createElement("svg",bf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,u,v,{className:I,style:Sf(Sf({color:e.color||a.color},a.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),x&&_n.createElement("title",null,x),e.children)};return Ux!==void 0?_n.createElement(Ux.Consumer,null,a=>t(a)):t(vS)}function pA(e){return Si({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M456.69 421.39 362.6 327.3a173.81 173.81 0 0 0 34.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 0 0 327.3 362.6l94.09 94.09a25 25 0 0 0 35.3-35.3zM97.92 222.72a124.8 124.8 0 1 1 124.8 124.8 124.95 124.95 0 0 1-124.8-124.8z"},child:[]}]})(e)}function fA(e){return Si({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"},child:[]}]})(e)}function mA(e){return Si({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9.37 5.51A7.35 7.35 0 0 0 9.1 7.5c0 4.08 3.32 7.4 7.4 7.4.68 0 1.35-.09 1.99-.27A7.014 7.014 0 0 1 12 19c-3.86 0-7-3.14-7-7 0-2.93 1.81-5.45 4.37-6.49zM12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"},child:[]}]})(e)}function gA(e){return Si({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"},child:[]}]})(e)}function wS(e){var t,a,u="";if(typeof e=="string"||typeof e=="number")u+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(a=wS(e[t]))&&(u&&(u+=" "),u+=a);else for(t in e)e[t]&&(u&&(u+=" "),u+=t);return u}function Jh(){for(var e,t,a=0,u="";a<arguments.length;)(e=arguments[a++])&&(t=wS(e))&&(u&&(u+=" "),u+=t);return u}function bS(e){return function(t){e.forEach(function(a){typeof a=="function"?a(t):a!=null&&(a.current=t)})}}let yA="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",_A=(e=21)=>{let t="",a=e;for(;a--;)t+=yA[Math.random()*64|0];return t};const vA={pointerEvents:"none"},y_=({locked:e,style:t})=>e?{...vA,...t}:t,SS=e=>ke.useMemo(()=>{if(e){let t="icon";e.type==="img"?t="image":e.type==="svg"&&(t="svg");const a=new RegExp(`\\b${t}\\b`);return{iconType:e.props["data-type"]||t,icon:e.props.className&&!a.test(e.props.className)?ke.cloneElement(e,{...e.props,className:Jh(e.props.className,t)}):e}}return{}},[e]),xA=(e,t)=>t?!1:!e||e==="smooth"||e==="pulse",__=(e,t)=>{const{animation:a,bigger:u,locked:h,plain:x,shape:v,variant:c,iconType:I,hasFocus:F}=e;return{"p-default":!t&&xA(a,I),"p-bigger":u,"p-locked":h,"p-plain":x,"p-has-focus":F,[`p-${a}`]:a,[`p-${v}`]:v,[`p-${c}`]:c,[`p-${I}`]:I}},$x=e=>typeof e=="boolean",Zg=e=>e==null,wA=e=>e==="indeterminate",v_=e=>{let{checked:t,state:a,setState:u,value:h,defaultValue:x,...v}=e;return u&&(($x(a)||wA(a))&&!$x(t)&&Zg(t)?t=!!a:Array.isArray(a)?t=a.includes(h):Zg(t)&&(t=Object.is(a,h)),Zg(h)&&(h=x||"")),{checked:t,value:h,state:a,...v}},bA="pcr_",SA=()=>ke.useRef(bA+_A(8)).current,TS=e=>{const t=SA(),{locked:a,color:u,variant:h,animation:x,children:v,style:c,id:I=t,className:F,bigger:W,hasFocus:D,...B}=e;return{locked:a,color:u,variant:h,animation:x,children:v,id:I,className:F,bigger:W,style:c,hasFocus:D,htmlProps:B}},kS=e=>{const{shape:t,plain:a,icon:u,indeterminate:h,hasFocus:x,...v}=e;return{shape:t,plain:a,icon:u,indeterminate:h,...TS(v)}},tm=({color:e,icon:t,id:a,children:u,...h})=>ke.createElement("div",{className:Jh("state",e&&`p-${e}`),...h},t,ke.createElement("label",{htmlFor:a},u));tm.displayName="State";const TA=({checked:e,state:t,indeterminate:a})=>{const[u,h]=ke.useState(!1),x=ke.useRef(null);return ke.useEffect(()=>{t!==void 0&&x.current&&h(t==="indeterminate")},[t]),ke.useEffect(()=>{t!=="indeterminate"&&x.current&&typeof a<"u"&&(x.current.checked=a,h(a))},[a,t]),{ref:x,"aria-checked":u?"mixed":e}},ES=ke.forwardRef((e,t)=>{const{checked:a,value:u,state:h,...x}=v_(e),{children:v,locked:c,color:I,id:F,className:W,style:D,indeterminate:B,icon:le,htmlProps:ge}=kS(x),{ref:de,...we}=TA({state:h,checked:a,indeterminate:B}),ee=y_({locked:c,style:D}),{icon:q,iconType:te}=SS(le);return ke.createElement("div",{style:ee,className:Jh("pretty",__({...e,iconType:te}),W)},ke.createElement("input",{ref:bS([t,de]),value:u,type:"checkbox",id:F,checked:a,...we,...ge}),ke.createElement(tm,{id:F,icon:q,color:I},v))});ES.displayName="Checkbox";const kA=ke.forwardRef((e,t)=>{const{checked:a,value:u,state:h,...x}=v_(e),{shape:v="round",children:c,locked:I,color:F,id:W,className:D,style:B,icon:le,htmlProps:ge}=kS(x),de=y_({locked:I,style:B}),{icon:we,iconType:ee}=SS(le);return ke.createElement("div",{style:de,className:Jh("pretty",__({...e,shape:v,iconType:ee}),D)},ke.createElement("input",{ref:t,value:u,type:"radio",id:W,checked:a,...ge}),ke.createElement(tm,{id:W,icon:we,color:F},c))});kA.displayName="Radio";const Hx=e=>{e.currentTarget.setAttribute("aria-checked",e.currentTarget.checked+"")},EA=({setState:e,checked:t})=>{const a=ke.useRef(null);return ke.useEffect(()=>{const u=a.current;let h=!1;return!e&&!t&&u&&(u.setAttribute("aria-checked",u.checked+""),u.addEventListener("change",Hx),h=!0),()=>{h&&u&&u.removeEventListener("change",Hx)}},[e,t]),a},CA=ke.forwardRef((e,t)=>{const{checked:a,value:u,state:h,...x}=v_(e),{children:v,locked:c,color:I,id:F,className:W,style:D,htmlProps:B}=TS(x),le=y_({locked:c,style:D}),ge=EA({setState:e.setState,checked:a});return ke.createElement("div",{style:le,className:Jh("pretty","p-switch",__(e,!0),W)},ke.createElement("input",{ref:bS([t,ge]),type:"checkbox",role:"switch",value:u,id:F,"aria-checked":a,checked:a,...B}),ke.createElement(tm,{id:F,color:I},v))});CA.displayName="Switch";function PA(e){return Si({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M11.03 2.59a1.501 1.501 0 0 1 1.94 0l7.5 6.363a1.5 1.5 0 0 1 .53 1.144V19.5a1.5 1.5 0 0 1-1.5 1.5h-5.75a.75.75 0 0 1-.75-.75V14h-2v6.25a.75.75 0 0 1-.75.75H4.5A1.5 1.5 0 0 1 3 19.5v-9.403c0-.44.194-.859.53-1.144ZM12 3.734l-7.5 6.363V19.5h5v-6.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v6.25h5v-9.403Z"},child:[]}]})(e)}function IA(e){return Si({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16 1.75V3h5.25a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1 0-1.5H8V1.75C8 .784 8.784 0 9.75 0h4.5C15.216 0 16 .784 16 1.75Zm-6.5 0V3h5V1.75a.25.25 0 0 0-.25-.25h-4.5a.25.25 0 0 0-.25.25ZM4.997 6.178a.75.75 0 1 0-1.493.144L4.916 20.92a1.75 1.75 0 0 0 1.742 1.58h10.684a1.75 1.75 0 0 0 1.742-1.581l1.413-14.597a.75.75 0 0 0-1.494-.144l-1.412 14.596a.25.25 0 0 1-.249.226H6.658a.25.25 0 0 1-.249-.226L4.997 6.178Z"},child:[]},{tag:"path",attr:{d:"M9.206 7.501a.75.75 0 0 1 .793.705l.5 8.5A.75.75 0 1 1 9 16.794l-.5-8.5a.75.75 0 0 1 .705-.793Zm6.293.793A.75.75 0 1 0 14 8.206l-.5 8.5a.75.75 0 0 0 1.498.088l.5-8.5Z"},child:[]}]})(e)}function CS({typeFilter:e}){const[t,a]=ke.useState(!1),[u,h]=R2(),[x]=ke.useState(e);function v(){a(!1),e!=x&&window.location.reload()}function c(F,W){h(D=>{const B=new URLSearchParams(D),le=B.getAll(F);if(le.includes(W)){const ge=le.filter(de=>de!==W);B.delete(F),ge.forEach(de=>B.append(F,de))}else B.append(F,W);return B})}function I(){h({}),window.location.reload()}return Fe.jsx(Fe.Fragment,{children:Fe.jsxs("div",{className:"absolute flex rounded-full top-3 left-4 bg-navColor text-white shadow-lg duration-200 hover:text-main hover:shadow-main hover:scale-110",children:[Fe.jsx("button",{type:"button",className:"p-3",onClick:()=>a(F=>!F),children:Fe.jsx("span",{children:Fe.jsx(pA,{size:30})})}),Fe.jsx(eA,{open:t,closeOnDocumentClick:!0,onClose:v,children:Fe.jsxs("div",{className:"modal relative flex flex-col items-center justify-center bg-navColor mx-auto p-4 text-white dark:bg-lightGray dark:text-appColor rounded-lg shadow-xl",children:[Fe.jsx("div",{className:"absolute flex rounded-full dark:border-[2px] dark:border-[#dbdbdb] top-2 right-3 shadow-sm duration-200 hover:text-main hover:shadow-main hover:scale-110",children:Fe.jsx("button",{type:"button",className:"p-3  dark:text-appColor ",onClick:I,children:Fe.jsx("span",{children:Fe.jsx(IA,{size:30})})})}),Fe.jsx("div",{className:"absolute flex rounded-full top-2 left-3 bg-navColor dark:bg-lightGray dark:text-appColor dark:border-[2px] dark:border-[#dbdbdb] cursor-pointer text-white shadow-sm duration-200 hover:text-main hover:shadow-main hover:scale-110",children:Fe.jsx("button",{className:"close p-3",onClick:v,children:Fe.jsx("span",{children:Fe.jsx(gA,{size:30})})})}),Fe.jsxs("div",{className:"w-full flex flex-col text-lg p-4 mt-7",children:[Fe.jsxs("h1",{className:"text-center text-2xl mb-4",children:["Filtr ",Fe.jsx("span",{className:"text-main font-bold",children:"Muala"})," miejsc"]}),["polska","ukrainska","amerykanska","turecka","meksykanska"].map(F=>Fe.jsxs("div",{className:"flex items-center justify-between border-b border-gray-500",children:[Fe.jsxs("label",{className:"font-light p-3",children:["Kuchnia"," ",Fe.jsx("span",{className:"text-main font-bold",children:F})]}),Fe.jsx(ES,{animation:"jelly",color:"warning",className:"my-4",checked:e.includes(F),onChange:()=>c("category",F)})]},F))]}),Fe.jsx("button",{className:"mx-auto w-1/2 p-3 rounded-xl border-[2px] border-main duration-300 text-white dark:text-appColor hover:text-main hover:shadow-main hover:scale-105",onClick:()=>window.location.reload(),children:"Zapisz zmiany"})]})})]})})}CS.propTypes={typeFilter:mh.array.isRequired};function AA(){gi.apiKey="i10L3MwNCIbub5Dvmg3m";const e=ke.useRef(null),t=ke.useRef(null),a={lng:19.1451,lat:51.9194},u=5.5,h=d_(),x=Ho(),v=(x==null?void 0:x.search)||"/",[c]=R2(),I=c.getAll("category"),F=I.length?wf.filter(W=>I.includes(W.category)):wf;return ke.useEffect(()=>{t.current||(t.current=new mS({container:e.current,style:"https://api.maptiler.com/maps/streets-v2/style.json?key=i10L3MwNCIbub5Dvmg3m",center:[a.lng,a.lat],zoom:u}),t.current.on("load",()=>{const W={type:"FeatureCollection",features:F.map(D=>({type:"Feature",properties:{id:D.id},geometry:{type:"Point",coordinates:[D.longitude,D.latitude]}}))};t.current.addSource("displayedLocation",{type:"geojson",data:W,cluster:!0,clusterMaxZoom:14,clusterRadius:50}),t.current.addLayer({id:"clusters",type:"circle",source:"displayedLocation",filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#F18C18",100,"#F18C18",750,"#F18C18"],"circle-radius":["step",["get","point_count"],20,100,30,750,40]}}),t.current.addLayer({id:"cluster-count",type:"symbol",source:"displayedLocation",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}}),t.current.addLayer({id:"unclustered-point",type:"circle",source:"displayedLocation",filter:["!",["has","point_count"]],paint:{"circle-color":"#F18C18","circle-radius":12,"circle-stroke-width":1,"circle-stroke-color":"#fff"}}),F.forEach(D=>{const B=document.createElement("div");B.className="marker",B.style.backgroundImage=`url(${D.mainImage})`,B.style.width="50px",B.style.height="50px",B.style.backgroundSize="cover",B.style.backgroundPosition="center",B.addEventListener("click",()=>{h(`/${D.id}`,{state:{link:v}})});const le=new MI({element:B}).setLngLat([D.longitude,D.latitude]).addTo(t.current);t.current.on("zoom",()=>{t.current.getZoom()>9?le.getElement().style.display="block":le.getElement().style.display="none"})}),t.current.on("click","clusters",D=>{const B=t.current.queryRenderedFeatures(D.point,{layers:["clusters"]}),le=B[0].properties.cluster_id;t.current.getSource("displayedLocation").getClusterExpansionZoom(le,(ge,de)=>{ge||t.current.easeTo({center:B[0].geometry.coordinates,zoom:de})})}),t.current.on("click","unclustered-point",D=>{const{id:B}=D.features[0].properties;h(`/${B}`,{state:{link:v}})}),t.current.on("mouseenter","clusters",()=>{t.current.getCanvas().style.cursor="pointer"}),t.current.on("mouseleave","clusters",()=>{t.current.getCanvas().style.cursor=""})}))},[a.lng,a.lat,u,h,F]),Fe.jsxs("div",{className:"map-wrap",children:[Fe.jsx("div",{ref:e,className:"map"}),Fe.jsx(CS,{typeFilter:I})]})}function MA(e){return Si({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"View_List"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M18.436,20.937H5.562a2.5,2.5,0,0,1-2.5-2.5V5.563a2.5,2.5,0,0,1,2.5-2.5H18.436a2.5,2.5,0,0,1,2.5,2.5V18.437A2.5,2.5,0,0,1,18.436,20.937ZM5.562,4.063a1.5,1.5,0,0,0-1.5,1.5V18.437a1.5,1.5,0,0,0,1.5,1.5H18.436a1.5,1.5,0,0,0,1.5-1.5V5.563a1.5,1.5,0,0,0-1.5-1.5Z"},child:[]},{tag:"path",attr:{d:"M6.544,8.283h0a.519.519,0,0,1-.353-.147.5.5,0,0,1,0-.707.512.512,0,0,1,.353-.146H7.55a.516.516,0,0,1,.353.146.5.5,0,0,1,.147.354.5.5,0,0,1-.5.5Z"},child:[]},{tag:"path",attr:{d:"M6.544,12.5h0a.523.523,0,0,1-.353-.146.5.5,0,0,1,0-.708.516.516,0,0,1,.353-.146H7.55a.521.521,0,0,1,.353.146.5.5,0,0,1,0,.708.516.516,0,0,1-.353.146Z"},child:[]},{tag:"path",attr:{d:"M6.544,16.72h0a.519.519,0,0,1-.353-.147.5.5,0,0,1,0-.707.516.516,0,0,1,.353-.146H7.55a.516.516,0,0,1,.353.146.5.5,0,0,1,.147.354.5.5,0,0,1-.5.5Z"},child:[]},{tag:"path",attr:{d:"M10.554,8.281h0a.5.5,0,0,1,0-1h6.9a.5.5,0,0,1,0,1Z"},child:[]},{tag:"path",attr:{d:"M10.554,12.5h0a.5.5,0,0,1,0-1h6.9a.5.5,0,0,1,0,1Z"},child:[]},{tag:"path",attr:{d:"M10.554,16.718h0a.5.5,0,0,1,0-1h6.9a.5.5,0,0,1,0,1Z"},child:[]}]}]}]})(e)}function zA(e){return Si({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"},child:[]},{tag:"path",attr:{d:"M9 16v-8l3 5l3 -5v8"},child:[]}]})(e)}function LA(e){return Si({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19.5 7a9 9 0 0 0 -7.5 -4a8.991 8.991 0 0 0 -7.484 4"},child:[]},{tag:"path",attr:{d:"M11.5 3a16.989 16.989 0 0 0 -1.826 4"},child:[]},{tag:"path",attr:{d:"M12.5 3a16.989 16.989 0 0 1 1.828 4"},child:[]},{tag:"path",attr:{d:"M19.5 17a9 9 0 0 1 -7.5 4a8.991 8.991 0 0 1 -7.484 -4"},child:[]},{tag:"path",attr:{d:"M11.5 21a16.989 16.989 0 0 1 -1.826 -4"},child:[]},{tag:"path",attr:{d:"M12.5 21a16.989 16.989 0 0 0 1.828 -4"},child:[]},{tag:"path",attr:{d:"M2 10l1 4l1.5 -4l1.5 4l1 -4"},child:[]},{tag:"path",attr:{d:"M17 10l1 4l1.5 -4l1.5 4l1 -4"},child:[]},{tag:"path",attr:{d:"M9.5 10l1 4l1.5 -4l1.5 4l1 -4"},child:[]}]})(e)}function RA(){const e={fontWeight:"bold",color:"#F18C18"},t=Ho(),a=(t==null?void 0:t.search)||"/";return Fe.jsx("footer",{className:"fixed bottom-2 w-screen flex items-center justify-center",children:Fe.jsxs("nav",{className:"flex items-center justify-center bg-gradient-to-r px-6 p-2 bg-navColor text-fontColor no-underline rounded-[15rem] mt-3 gap-5",children:[Fe.jsxs(xx,{className:"flex items-center w-12 flex-col hover:text-main",style:({isActive:u})=>u?e:null,to:"/",children:[Fe.jsx("span",{children:Fe.jsx(PA,{size:30,className:"transition-colors duration-200"})}),"Home"]}),Fe.jsx(zA,{color:"F18C18",size:60}),Fe.jsxs(xx,{className:"flex items-center w-12 flex-col hover:text-main",style:({isActive:u})=>u?e:null,to:"list",state:{link:a},children:[Fe.jsx("span",{children:Fe.jsx(MA,{size:30,className:"transition-colors duration-200"})}),"List"]})]})})}function DA(){const[e,t]=ke.useState(()=>{const u=localStorage.getItem("isDarkMode");return u?JSON.parse(u):!0});ke.useEffect(()=>{e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("isDarkMode",JSON.stringify(e))},[e]);const a=()=>{t(u=>!u)};return Fe.jsx("div",{className:"absolute z-10 flex rounded-full top-[4.5rem] left-4 bg-navColor text-white shadow-lg duration-200 hover:text-main hover:shadow-main hover:scale-110",children:Fe.jsx("button",{type:"button",className:"p-3",onClick:a,children:Fe.jsx("span",{children:e?Fe.jsx(mA,{size:30}):Fe.jsx(fA,{size:30})})})})}function OA(){return Fe.jsxs("main",{className:"relative bg-appColor dark:bg-lightGray",children:[Fe.jsx(DA,{}),Fe.jsx(bP,{}),Fe.jsx(RA,{})]})}function PS(e){return Si({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(e)}function FA(e){return Si({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(e)}function BA(e){return Si({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(e)}function NA(e){return Si({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 160c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h320c26.5 0 48-21.5 48-48v-48h20c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20v-64h20c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20v-64h20zm-68 304H48V48h320v416zM208 256c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm-89.6 128h179.2c12.4 0 22.4-8.6 22.4-19.2v-19.2c0-31.8-30.1-57.6-67.2-57.6-10.8 0-18.7 8-44.8 8-26.9 0-33.4-8-44.8-8-37.1 0-67.2 25.8-67.2 57.6v19.2c0 10.6 10 19.2 22.4 19.2z"},child:[]}]})(e)}var IS={},AS={},rm={},MS={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={animating:!1,autoplaying:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,dragging:!1,edgeDragged:!1,initialized:!1,lazyLoadedList:[],listHeight:null,listWidth:null,scrolling:!1,slideCount:null,slideHeight:null,slideWidth:null,swipeLeft:null,swiped:!1,swiping:!1,touchObject:{startX:0,startY:0,curX:0,curY:0},trackStyle:{},trackWidth:0,targetSlide:0};e.default=t})(MS);var jA="Expected a function",Wx=NaN,UA="[object Symbol]",VA=/^\s+|\s+$/g,$A=/^[-+]0x[0-9a-f]+$/i,HA=/^0b[01]+$/i,WA=/^0o[0-7]+$/i,qA=parseInt,ZA=typeof lh=="object"&&lh&&lh.Object===Object&&lh,GA=typeof self=="object"&&self&&self.Object===Object&&self,KA=ZA||GA||Function("return this")(),XA=Object.prototype,YA=XA.toString,JA=Math.max,QA=Math.min,Gg=function(){return KA.Date.now()};function e3(e,t,a){var u,h,x,v,c,I,F=0,W=!1,D=!1,B=!0;if(typeof e!="function")throw new TypeError(jA);t=qx(t)||0,l0(a)&&(W=!!a.leading,D="maxWait"in a,x=D?JA(qx(a.maxWait)||0,t):x,B="trailing"in a?!!a.trailing:B);function le(Ae){var Le=u,Ge=h;return u=h=void 0,F=Ae,v=e.apply(Ge,Le),v}function ge(Ae){return F=Ae,c=setTimeout(ee,t),W?le(Ae):v}function de(Ae){var Le=Ae-I,Ge=Ae-F,Re=t-Le;return D?QA(Re,x-Ge):Re}function we(Ae){var Le=Ae-I,Ge=Ae-F;return I===void 0||Le>=t||Le<0||D&&Ge>=x}function ee(){var Ae=Gg();if(we(Ae))return q(Ae);c=setTimeout(ee,de(Ae))}function q(Ae){return c=void 0,B&&u?le(Ae):(u=h=void 0,v)}function te(){c!==void 0&&clearTimeout(c),F=0,u=I=h=c=void 0}function _e(){return c===void 0?v:q(Gg())}function Ce(){var Ae=Gg(),Le=we(Ae);if(u=arguments,h=this,I=Ae,Le){if(c===void 0)return ge(I);if(D)return c=setTimeout(ee,t),le(I)}return c===void 0&&(c=setTimeout(ee,t)),v}return Ce.cancel=te,Ce.flush=_e,Ce}function l0(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function t3(e){return!!e&&typeof e=="object"}function r3(e){return typeof e=="symbol"||t3(e)&&YA.call(e)==UA}function qx(e){if(typeof e=="number")return e;if(r3(e))return Wx;if(l0(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=l0(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(VA,"");var a=HA.test(e);return a||WA.test(e)?qA(e.slice(2),a?2:8):$A.test(e)?Wx:+e}var n3=e3,zS={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function a(){for(var x="",v=0;v<arguments.length;v++){var c=arguments[v];c&&(x=h(x,u(c)))}return x}function u(x){if(typeof x=="string"||typeof x=="number")return x;if(typeof x!="object")return"";if(Array.isArray(x))return a.apply(null,x);if(x.toString!==Object.prototype.toString&&!x.toString.toString().includes("[native code]"))return x.toString();var v="";for(var c in x)t.call(x,c)&&x[c]&&(v=h(v,c));return v}function h(x,v){return v?x?x+" "+v:x+v:x}e.exports?(a.default=a,e.exports=a):window.classNames=a})()})(zS);var nm=zS.exports,tt={},x_={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(ke);function a(h){return h&&h.__esModule?h:{default:h}}var u={accessibility:!0,adaptiveHeight:!1,afterChange:null,appendDots:function(x){return t.default.createElement("ul",{style:{display:"block"}},x)},arrows:!0,autoplay:!1,autoplaySpeed:3e3,beforeChange:null,centerMode:!1,centerPadding:"50px",className:"",cssEase:"ease",customPaging:function(x){return t.default.createElement("button",null,x+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:null,nextArrow:null,onEdge:null,onInit:null,onLazyLoadError:null,onReInit:null,pauseOnDotsHover:!1,pauseOnFocus:!1,pauseOnHover:!0,prevArrow:null,responsive:null,rows:1,rtl:!1,slide:"div",slidesPerRow:1,slidesToScroll:1,slidesToShow:1,speed:500,swipe:!0,swipeEvent:null,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0,asNavFor:null};e.default=u})(x_);Object.defineProperty(tt,"__esModule",{value:!0});tt.checkSpecKeys=tt.checkNavigable=tt.changeSlide=tt.canUseDOM=tt.canGoNext=void 0;tt.clamp=RS;tt.extractObject=void 0;tt.filterSettings=_3;tt.validSettings=tt.swipeStart=tt.swipeMove=tt.swipeEnd=tt.slidesOnRight=tt.slidesOnLeft=tt.slideHandler=tt.siblingDirection=tt.safePreventDefault=tt.lazyStartIndex=tt.lazySlidesOnRight=tt.lazySlidesOnLeft=tt.lazyEndIndex=tt.keyHandler=tt.initializedState=tt.getWidth=tt.getTrackLeft=tt.getTrackCSS=tt.getTrackAnimateCSS=tt.getTotalSlides=tt.getSwipeDirection=tt.getSlideCount=tt.getRequiredLazySlides=tt.getPreClones=tt.getPostClones=tt.getOnDemandLazySlides=tt.getNavigableIndexes=tt.getHeight=void 0;var i3=LS(ke),o3=LS(x_);function LS(e){return e&&e.__esModule?e:{default:e}}function Wh(e){"@babel/helpers - typeof";return Wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wh(e)}function Zx(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);t&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),a.push.apply(a,u)}return a}function Cr(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Zx(Object(a),!0).forEach(function(u){a3(e,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Zx(Object(a)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(a,u))})}return e}function a3(e,t,a){return t=s3(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s3(e){var t=l3(e,"string");return Wh(t)=="symbol"?t:String(t)}function l3(e,t){if(Wh(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var u=a.call(e,t||"default");if(Wh(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RS(e,t,a){return Math.max(t,Math.min(e,a))}var Su=tt.safePreventDefault=function(t){var a=["onTouchStart","onTouchMove","onWheel"];a.includes(t._reactName)||t.preventDefault()},DS=tt.getOnDemandLazySlides=function(t){for(var a=[],u=OS(t),h=FS(t),x=u;x<h;x++)t.lazyLoadedList.indexOf(x)<0&&a.push(x);return a};tt.getRequiredLazySlides=function(t){for(var a=[],u=OS(t),h=FS(t),x=u;x<h;x++)a.push(x);return a};var OS=tt.lazyStartIndex=function(t){return t.currentSlide-u3(t)},FS=tt.lazyEndIndex=function(t){return t.currentSlide+c3(t)},u3=tt.lazySlidesOnLeft=function(t){return t.centerMode?Math.floor(t.slidesToShow/2)+(parseInt(t.centerPadding)>0?1:0):0},c3=tt.lazySlidesOnRight=function(t){return t.centerMode?Math.floor((t.slidesToShow-1)/2)+1+(parseInt(t.centerPadding)>0?1:0):t.slidesToShow},u0=tt.getWidth=function(t){return t&&t.offsetWidth||0},BS=tt.getHeight=function(t){return t&&t.offsetHeight||0},NS=tt.getSwipeDirection=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u,h,x,v;return u=t.startX-t.curX,h=t.startY-t.curY,x=Math.atan2(h,u),v=Math.round(x*180/Math.PI),v<0&&(v=360-Math.abs(v)),v<=45&&v>=0||v<=360&&v>=315?"left":v>=135&&v<=225?"right":a===!0?v>=35&&v<=135?"up":"down":"vertical"},jS=tt.canGoNext=function(t){var a=!0;return t.infinite||(t.centerMode&&t.currentSlide>=t.slideCount-1||t.slideCount<=t.slidesToShow||t.currentSlide>=t.slideCount-t.slidesToShow)&&(a=!1),a};tt.extractObject=function(t,a){var u={};return a.forEach(function(h){return u[h]=t[h]}),u};tt.initializedState=function(t){var a=i3.default.Children.count(t.children),u=t.listRef,h=Math.ceil(u0(u)),x=t.trackRef&&t.trackRef.node,v=Math.ceil(u0(x)),c;if(t.vertical)c=h;else{var I=t.centerMode&&parseInt(t.centerPadding)*2;typeof t.centerPadding=="string"&&t.centerPadding.slice(-1)==="%"&&(I*=h/100),c=Math.ceil((h-I)/t.slidesToShow)}var F=u&&BS(u.querySelector('[data-index="0"]')),W=F*t.slidesToShow,D=t.currentSlide===void 0?t.initialSlide:t.currentSlide;t.rtl&&t.currentSlide===void 0&&(D=a-1-t.initialSlide);var B=t.lazyLoadedList||[],le=DS(Cr(Cr({},t),{},{currentSlide:D,lazyLoadedList:B}));B=B.concat(le);var ge={slideCount:a,slideWidth:c,listWidth:h,trackWidth:v,currentSlide:D,slideHeight:F,listHeight:W,lazyLoadedList:B};return t.autoplaying===null&&t.autoplay&&(ge.autoplaying="playing"),ge};tt.slideHandler=function(t){var a=t.waitForAnimate,u=t.animating,h=t.fade,x=t.infinite,v=t.index,c=t.slideCount,I=t.lazyLoad,F=t.currentSlide,W=t.centerMode,D=t.slidesToScroll,B=t.slidesToShow,le=t.useCSS,ge=t.lazyLoadedList;if(a&&u)return{};var de=v,we,ee,q,te={},_e={},Ce=x?v:RS(v,0,c-1);if(h){if(!x&&(v<0||v>=c))return{};v<0?de=v+c:v>=c&&(de=v-c),I&&ge.indexOf(de)<0&&(ge=ge.concat(de)),te={animating:!0,currentSlide:de,lazyLoadedList:ge,targetSlide:de},_e={animating:!1,targetSlide:de}}else we=de,de<0?(we=de+c,x?c%D!==0&&(we=c-c%D):we=0):!jS(t)&&de>F?de=we=F:W&&de>=c?(de=x?c:c-1,we=x?0:c-1):de>=c&&(we=de-c,x?c%D!==0&&(we=0):we=c-B),!x&&de+B>=c&&(we=c-B),ee=kf(Cr(Cr({},t),{},{slideIndex:de})),q=kf(Cr(Cr({},t),{},{slideIndex:we})),x||(ee===q&&(de=we),ee=q),I&&(ge=ge.concat(DS(Cr(Cr({},t),{},{currentSlide:de})))),le?(te={animating:!0,currentSlide:we,trackStyle:US(Cr(Cr({},t),{},{left:ee})),lazyLoadedList:ge,targetSlide:Ce},_e={animating:!1,currentSlide:we,trackStyle:Tf(Cr(Cr({},t),{},{left:q})),swipeLeft:null,targetSlide:Ce}):te={currentSlide:we,trackStyle:Tf(Cr(Cr({},t),{},{left:q})),lazyLoadedList:ge,targetSlide:Ce};return{state:te,nextState:_e}};tt.changeSlide=function(t,a){var u,h,x,v,c,I=t.slidesToScroll,F=t.slidesToShow,W=t.slideCount,D=t.currentSlide,B=t.targetSlide,le=t.lazyLoad,ge=t.infinite;if(v=W%I!==0,u=v?0:(W-D)%I,a.message==="previous")x=u===0?I:F-u,c=D-x,le&&!ge&&(h=D-x,c=h===-1?W-1:h),ge||(c=B-I);else if(a.message==="next")x=u===0?I:u,c=D+x,le&&!ge&&(c=(D+I)%W+u),ge||(c=B+I);else if(a.message==="dots")c=a.index*a.slidesToScroll;else if(a.message==="children"){if(c=a.index,ge){var de=f3(Cr(Cr({},t),{},{targetSlide:c}));c>a.currentSlide&&de==="left"?c=c-W:c<a.currentSlide&&de==="right"&&(c=c+W)}}else a.message==="index"&&(c=Number(a.index));return c};tt.keyHandler=function(t,a,u){return t.target.tagName.match("TEXTAREA|INPUT|SELECT")||!a?"":t.keyCode===37?u?"next":"previous":t.keyCode===39?u?"previous":"next":""};tt.swipeStart=function(t,a,u){return t.target.tagName==="IMG"&&Su(t),!a||!u&&t.type.indexOf("mouse")!==-1?"":{dragging:!0,touchObject:{startX:t.touches?t.touches[0].pageX:t.clientX,startY:t.touches?t.touches[0].pageY:t.clientY,curX:t.touches?t.touches[0].pageX:t.clientX,curY:t.touches?t.touches[0].pageY:t.clientY}}};tt.swipeMove=function(t,a){var u=a.scrolling,h=a.animating,x=a.vertical,v=a.swipeToSlide,c=a.verticalSwiping,I=a.rtl,F=a.currentSlide,W=a.edgeFriction,D=a.edgeDragged,B=a.onEdge,le=a.swiped,ge=a.swiping,de=a.slideCount,we=a.slidesToScroll,ee=a.infinite,q=a.touchObject,te=a.swipeEvent,_e=a.listHeight,Ce=a.listWidth;if(!u){if(h)return Su(t);x&&v&&c&&Su(t);var Ae,Le={},Ge=kf(a);q.curX=t.touches?t.touches[0].pageX:t.clientX,q.curY=t.touches?t.touches[0].pageY:t.clientY,q.swipeLength=Math.round(Math.sqrt(Math.pow(q.curX-q.startX,2)));var Re=Math.round(Math.sqrt(Math.pow(q.curY-q.startY,2)));if(!c&&!ge&&Re>10)return{scrolling:!0};c&&(q.swipeLength=Re);var Me=(I?-1:1)*(q.curX>q.startX?1:-1);c&&(Me=q.curY>q.startY?1:-1);var $e=Math.ceil(de/we),ft=NS(a.touchObject,c),it=q.swipeLength;return ee||(F===0&&(ft==="right"||ft==="down")||F+1>=$e&&(ft==="left"||ft==="up")||!jS(a)&&(ft==="left"||ft==="up"))&&(it=q.swipeLength*W,D===!1&&B&&(B(ft),Le.edgeDragged=!0)),!le&&te&&(te(ft),Le.swiped=!0),x?Ae=Ge+it*(_e/Ce)*Me:I?Ae=Ge-it*Me:Ae=Ge+it*Me,c&&(Ae=Ge+it*Me),Le=Cr(Cr({},Le),{},{touchObject:q,swipeLeft:Ae,trackStyle:Tf(Cr(Cr({},a),{},{left:Ae}))}),Math.abs(q.curX-q.startX)<Math.abs(q.curY-q.startY)*.8||q.swipeLength>10&&(Le.swiping=!0,Su(t)),Le}};tt.swipeEnd=function(t,a){var u=a.dragging,h=a.swipe,x=a.touchObject,v=a.listWidth,c=a.touchThreshold,I=a.verticalSwiping,F=a.listHeight,W=a.swipeToSlide,D=a.scrolling,B=a.onSwipe,le=a.targetSlide,ge=a.currentSlide,de=a.infinite;if(!u)return h&&Su(t),{};var we=I?F/c:v/c,ee=NS(x,I),q={dragging:!1,edgeDragged:!1,scrolling:!1,swiping:!1,swiped:!1,swipeLeft:null,touchObject:{}};if(D||!x.swipeLength)return q;if(x.swipeLength>we){Su(t),B&&B(ee);var te,_e,Ce=de?ge:le;switch(ee){case"left":case"up":_e=Ce+Kx(a),te=W?Gx(a,_e):_e,q.currentDirection=0;break;case"right":case"down":_e=Ce-Kx(a),te=W?Gx(a,_e):_e,q.currentDirection=1;break;default:te=Ce}q.triggerSlideHandler=te}else{var Ae=kf(a);q.trackStyle=US(Cr(Cr({},a),{},{left:Ae}))}return q};var h3=tt.getNavigableIndexes=function(t){for(var a=t.infinite?t.slideCount*2:t.slideCount,u=t.infinite?t.slidesToShow*-1:0,h=t.infinite?t.slidesToShow*-1:0,x=[];u<a;)x.push(u),u=h+t.slidesToScroll,h+=Math.min(t.slidesToScroll,t.slidesToShow);return x},Gx=tt.checkNavigable=function(t,a){var u=h3(t),h=0;if(a>u[u.length-1])a=u[u.length-1];else for(var x in u){if(a<u[x]){a=h;break}h=u[x]}return a},Kx=tt.getSlideCount=function(t){var a=t.centerMode?t.slideWidth*Math.floor(t.slidesToShow/2):0;if(t.swipeToSlide){var u,h=t.listRef,x=h.querySelectorAll&&h.querySelectorAll(".slick-slide")||[];if(Array.from(x).every(function(I){if(t.vertical){if(I.offsetTop+BS(I)/2>t.swipeLeft*-1)return u=I,!1}else if(I.offsetLeft-a+u0(I)/2>t.swipeLeft*-1)return u=I,!1;return!0}),!u)return 0;var v=t.rtl===!0?t.slideCount-t.currentSlide:t.currentSlide,c=Math.abs(u.dataset.index-v)||1;return c}else return t.slidesToScroll},w_=tt.checkSpecKeys=function(t,a){return a.reduce(function(u,h){return u&&t.hasOwnProperty(h)},!0)?null:console.error("Keys Missing:",t)},Tf=tt.getTrackCSS=function(t){w_(t,["left","variableWidth","slideCount","slidesToShow","slideWidth"]);var a,u,h=t.slideCount+2*t.slidesToShow;t.vertical?u=h*t.slideHeight:a=p3(t)*t.slideWidth;var x={opacity:1,transition:"",WebkitTransition:""};if(t.useTransform){var v=t.vertical?"translate3d(0px, "+t.left+"px, 0px)":"translate3d("+t.left+"px, 0px, 0px)",c=t.vertical?"translate3d(0px, "+t.left+"px, 0px)":"translate3d("+t.left+"px, 0px, 0px)",I=t.vertical?"translateY("+t.left+"px)":"translateX("+t.left+"px)";x=Cr(Cr({},x),{},{WebkitTransform:v,transform:c,msTransform:I})}else t.vertical?x.top=t.left:x.left=t.left;return t.fade&&(x={opacity:1}),a&&(x.width=a),u&&(x.height=u),window&&!window.addEventListener&&window.attachEvent&&(t.vertical?x.marginTop=t.left+"px":x.marginLeft=t.left+"px"),x},US=tt.getTrackAnimateCSS=function(t){w_(t,["left","variableWidth","slideCount","slidesToShow","slideWidth","speed","cssEase"]);var a=Tf(t);return t.useTransform?(a.WebkitTransition="-webkit-transform "+t.speed+"ms "+t.cssEase,a.transition="transform "+t.speed+"ms "+t.cssEase):t.vertical?a.transition="top "+t.speed+"ms "+t.cssEase:a.transition="left "+t.speed+"ms "+t.cssEase,a},kf=tt.getTrackLeft=function(t){if(t.unslick)return 0;w_(t,["slideIndex","trackRef","infinite","centerMode","slideCount","slidesToShow","slidesToScroll","slideWidth","listWidth","variableWidth","slideHeight"]);var a=t.slideIndex,u=t.trackRef,h=t.infinite,x=t.centerMode,v=t.slideCount,c=t.slidesToShow,I=t.slidesToScroll,F=t.slideWidth,W=t.listWidth,D=t.variableWidth,B=t.slideHeight,le=t.fade,ge=t.vertical,de=0,we,ee,q=0;if(le||t.slideCount===1)return 0;var te=0;if(h?(te=-Hp(t),v%I!==0&&a+I>v&&(te=-(a>v?c-(a-v):v%I)),x&&(te+=parseInt(c/2))):(v%I!==0&&a+I>v&&(te=c-v%I),x&&(te=parseInt(c/2))),de=te*F,q=te*B,ge?we=a*B*-1+q:we=a*F*-1+de,D===!0){var _e,Ce=u&&u.node;if(_e=a+Hp(t),ee=Ce&&Ce.childNodes[_e],we=ee?ee.offsetLeft*-1:0,x===!0){_e=h?a+Hp(t):a,ee=Ce&&Ce.children[_e],we=0;for(var Ae=0;Ae<_e;Ae++)we-=Ce&&Ce.children[Ae]&&Ce.children[Ae].offsetWidth;we-=parseInt(t.centerPadding),we+=ee&&(W-ee.offsetWidth)/2}}return we},Hp=tt.getPreClones=function(t){return t.unslick||!t.infinite?0:t.variableWidth?t.slideCount:t.slidesToShow+(t.centerMode?1:0)},d3=tt.getPostClones=function(t){return t.unslick||!t.infinite?0:t.slideCount},p3=tt.getTotalSlides=function(t){return t.slideCount===1?1:Hp(t)+t.slideCount+d3(t)},f3=tt.siblingDirection=function(t){return t.targetSlide>t.currentSlide?t.targetSlide>t.currentSlide+m3(t)?"left":"right":t.targetSlide<t.currentSlide-g3(t)?"right":"left"},m3=tt.slidesOnRight=function(t){var a=t.slidesToShow,u=t.centerMode,h=t.rtl,x=t.centerPadding;if(u){var v=(a-1)/2+1;return parseInt(x)>0&&(v+=1),h&&a%2===0&&(v+=1),v}return h?0:a-1},g3=tt.slidesOnLeft=function(t){var a=t.slidesToShow,u=t.centerMode,h=t.rtl,x=t.centerPadding;if(u){var v=(a-1)/2+1;return parseInt(x)>0&&(v+=1),!h&&a%2===0&&(v+=1),v}return h?a-1:0};tt.canUseDOM=function(){return!!(typeof window<"u"&&window.document&&window.document.createElement)};var y3=tt.validSettings=Object.keys(o3.default);function _3(e){return y3.reduce(function(t,a){return e.hasOwnProperty(a)&&(t[a]=e[a]),t},{})}var im={};Object.defineProperty(im,"__esModule",{value:!0});im.Track=void 0;var Za=VS(ke),Kg=VS(nm),Xg=tt;function VS(e){return e&&e.__esModule?e:{default:e}}function Lu(e){"@babel/helpers - typeof";return Lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lu(e)}function c0(){return c0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u])}return e},c0.apply(this,arguments)}function v3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x3(e,t){for(var a=0;a<t.length;a++){var u=t[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,HS(u.key),u)}}function w3(e,t,a){return t&&x3(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function b3(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h0(e,t)}function h0(e,t){return h0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,h){return u.__proto__=h,u},h0(e,t)}function S3(e){var t=$S();return function(){var u=Ef(e),h;if(t){var x=Ef(this).constructor;h=Reflect.construct(u,arguments,x)}else h=u.apply(this,arguments);return T3(this,h)}}function T3(e,t){if(t&&(Lu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d0(e)}function d0(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $S(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($S=function(){return!!e})()}function Ef(e){return Ef=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Ef(e)}function Xx(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);t&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),a.push.apply(a,u)}return a}function mi(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Xx(Object(a),!0).forEach(function(u){p0(e,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Xx(Object(a)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(a,u))})}return e}function p0(e,t,a){return t=HS(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function HS(e){var t=k3(e,"string");return Lu(t)=="symbol"?t:String(t)}function k3(e,t){if(Lu(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var u=a.call(e,t||"default");if(Lu(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yg=function(t){var a,u,h,x,v;t.rtl?v=t.slideCount-1-t.index:v=t.index,h=v<0||v>=t.slideCount,t.centerMode?(x=Math.floor(t.slidesToShow/2),u=(v-t.currentSlide)%t.slideCount===0,v>t.currentSlide-x-1&&v<=t.currentSlide+x&&(a=!0)):a=t.currentSlide<=v&&v<t.currentSlide+t.slidesToShow;var c;t.targetSlide<0?c=t.targetSlide+t.slideCount:t.targetSlide>=t.slideCount?c=t.targetSlide-t.slideCount:c=t.targetSlide;var I=v===c;return{"slick-slide":!0,"slick-active":a,"slick-center":u,"slick-cloned":h,"slick-current":I}},E3=function(t){var a={};return(t.variableWidth===void 0||t.variableWidth===!1)&&(a.width=t.slideWidth),t.fade&&(a.position="relative",t.vertical?a.top=-t.index*parseInt(t.slideHeight):a.left=-t.index*parseInt(t.slideWidth),a.opacity=t.currentSlide===t.index?1:0,a.zIndex=t.currentSlide===t.index?999:998,t.useCSS&&(a.transition="opacity "+t.speed+"ms "+t.cssEase+", visibility "+t.speed+"ms "+t.cssEase)),a},Jg=function(t,a){return t.key||a},C3=function(t){var a,u=[],h=[],x=[],v=Za.default.Children.count(t.children),c=(0,Xg.lazyStartIndex)(t),I=(0,Xg.lazyEndIndex)(t);return Za.default.Children.forEach(t.children,function(F,W){var D,B={message:"children",index:W,slidesToScroll:t.slidesToScroll,currentSlide:t.currentSlide};!t.lazyLoad||t.lazyLoad&&t.lazyLoadedList.indexOf(W)>=0?D=F:D=Za.default.createElement("div",null);var le=E3(mi(mi({},t),{},{index:W})),ge=D.props.className||"",de=Yg(mi(mi({},t),{},{index:W}));if(u.push(Za.default.cloneElement(D,{key:"original"+Jg(D,W),"data-index":W,className:(0,Kg.default)(de,ge),tabIndex:"-1","aria-hidden":!de["slick-active"],style:mi(mi({outline:"none"},D.props.style||{}),le),onClick:function(q){D.props&&D.props.onClick&&D.props.onClick(q),t.focusOnSelect&&t.focusOnSelect(B)}})),t.infinite&&t.fade===!1){var we=v-W;we<=(0,Xg.getPreClones)(t)&&(a=-we,a>=c&&(D=F),de=Yg(mi(mi({},t),{},{index:a})),h.push(Za.default.cloneElement(D,{key:"precloned"+Jg(D,a),"data-index":a,tabIndex:"-1",className:(0,Kg.default)(de,ge),"aria-hidden":!de["slick-active"],style:mi(mi({},D.props.style||{}),le),onClick:function(q){D.props&&D.props.onClick&&D.props.onClick(q),t.focusOnSelect&&t.focusOnSelect(B)}}))),a=v+W,a<I&&(D=F),de=Yg(mi(mi({},t),{},{index:a})),x.push(Za.default.cloneElement(D,{key:"postcloned"+Jg(D,a),"data-index":a,tabIndex:"-1",className:(0,Kg.default)(de,ge),"aria-hidden":!de["slick-active"],style:mi(mi({},D.props.style||{}),le),onClick:function(q){D.props&&D.props.onClick&&D.props.onClick(q),t.focusOnSelect&&t.focusOnSelect(B)}}))}}),t.rtl?h.concat(u,x).reverse():h.concat(u,x)};im.Track=function(e){b3(a,e);var t=S3(a);function a(){var u;v3(this,a);for(var h=arguments.length,x=new Array(h),v=0;v<h;v++)x[v]=arguments[v];return u=t.call.apply(t,[this].concat(x)),p0(d0(u),"node",null),p0(d0(u),"handleRef",function(c){u.node=c}),u}return w3(a,[{key:"render",value:function(){var h=C3(this.props),x=this.props,v=x.onMouseEnter,c=x.onMouseOver,I=x.onMouseLeave,F={onMouseEnter:v,onMouseOver:c,onMouseLeave:I};return Za.default.createElement("div",c0({ref:this.handleRef,className:"slick-track",style:this.props.trackStyle},F),h)}}]),a}(Za.default.PureComponent);var om={};function Ru(e){"@babel/helpers - typeof";return Ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ru(e)}Object.defineProperty(om,"__esModule",{value:!0});om.Dots=void 0;var Pp=WS(ke),P3=WS(nm),Yx=tt;function WS(e){return e&&e.__esModule?e:{default:e}}function Jx(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);t&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),a.push.apply(a,u)}return a}function I3(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Jx(Object(a),!0).forEach(function(u){A3(e,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Jx(Object(a)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(a,u))})}return e}function A3(e,t,a){return t=qS(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function M3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z3(e,t){for(var a=0;a<t.length;a++){var u=t[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,qS(u.key),u)}}function L3(e,t,a){return t&&z3(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function qS(e){var t=R3(e,"string");return Ru(t)=="symbol"?t:String(t)}function R3(e,t){if(Ru(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var u=a.call(e,t||"default");if(Ru(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D3(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f0(e,t)}function f0(e,t){return f0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,h){return u.__proto__=h,u},f0(e,t)}function O3(e){var t=ZS();return function(){var u=Cf(e),h;if(t){var x=Cf(this).constructor;h=Reflect.construct(u,arguments,x)}else h=u.apply(this,arguments);return F3(this,h)}}function F3(e,t){if(t&&(Ru(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B3(e)}function B3(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZS=function(){return!!e})()}function Cf(e){return Cf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Cf(e)}var N3=function(t){var a;return t.infinite?a=Math.ceil(t.slideCount/t.slidesToScroll):a=Math.ceil((t.slideCount-t.slidesToShow)/t.slidesToScroll)+1,a};om.Dots=function(e){D3(a,e);var t=O3(a);function a(){return M3(this,a),t.apply(this,arguments)}return L3(a,[{key:"clickHandler",value:function(h,x){x.preventDefault(),this.props.clickHandler(h)}},{key:"render",value:function(){for(var h=this.props,x=h.onMouseEnter,v=h.onMouseOver,c=h.onMouseLeave,I=h.infinite,F=h.slidesToScroll,W=h.slidesToShow,D=h.slideCount,B=h.currentSlide,le=N3({slideCount:D,slidesToScroll:F,slidesToShow:W,infinite:I}),ge={onMouseEnter:x,onMouseOver:v,onMouseLeave:c},de=[],we=0;we<le;we++){var ee=(we+1)*F-1,q=I?ee:(0,Yx.clamp)(ee,0,D-1),te=q-(F-1),_e=I?te:(0,Yx.clamp)(te,0,D-1),Ce=(0,P3.default)({"slick-active":I?B>=_e&&B<=q:B===_e}),Ae={message:"dots",index:we,slidesToScroll:F,currentSlide:B},Le=this.clickHandler.bind(this,Ae);de=de.concat(Pp.default.createElement("li",{key:we,className:Ce},Pp.default.cloneElement(this.props.customPaging(we),{onClick:Le})))}return Pp.default.cloneElement(this.props.appendDots(de),I3({className:this.props.dotsClass},ge))}}]),a}(Pp.default.PureComponent);var Du={};function Ou(e){"@babel/helpers - typeof";return Ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ou(e)}Object.defineProperty(Du,"__esModule",{value:!0});Du.PrevArrow=Du.NextArrow=void 0;var Tu=KS(ke),GS=KS(nm),j3=tt;function KS(e){return e&&e.__esModule?e:{default:e}}function Pf(){return Pf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u])}return e},Pf.apply(this,arguments)}function Qx(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);t&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),a.push.apply(a,u)}return a}function If(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Qx(Object(a),!0).forEach(function(u){U3(e,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qx(Object(a)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(a,u))})}return e}function U3(e,t,a){return t=JS(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function XS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V3(e,t){for(var a=0;a<t.length;a++){var u=t[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,JS(u.key),u)}}function YS(e,t,a){return t&&V3(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function JS(e){var t=$3(e,"string");return Ou(t)=="symbol"?t:String(t)}function $3(e,t){if(Ou(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var u=a.call(e,t||"default");if(Ou(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QS(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m0(e,t)}function m0(e,t){return m0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,h){return u.__proto__=h,u},m0(e,t)}function eT(e){var t=tT();return function(){var u=Af(e),h;if(t){var x=Af(this).constructor;h=Reflect.construct(u,arguments,x)}else h=u.apply(this,arguments);return H3(this,h)}}function H3(e,t){if(t&&(Ou(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W3(e)}function W3(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tT=function(){return!!e})()}function Af(e){return Af=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Af(e)}Du.PrevArrow=function(e){QS(a,e);var t=eT(a);function a(){return XS(this,a),t.apply(this,arguments)}return YS(a,[{key:"clickHandler",value:function(h,x){x&&x.preventDefault(),this.props.clickHandler(h,x)}},{key:"render",value:function(){var h={"slick-arrow":!0,"slick-prev":!0},x=this.clickHandler.bind(this,{message:"previous"});!this.props.infinite&&(this.props.currentSlide===0||this.props.slideCount<=this.props.slidesToShow)&&(h["slick-disabled"]=!0,x=null);var v={key:"0","data-role":"none",className:(0,GS.default)(h),style:{display:"block"},onClick:x},c={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},I;return this.props.prevArrow?I=Tu.default.cloneElement(this.props.prevArrow,If(If({},v),c)):I=Tu.default.createElement("button",Pf({key:"0",type:"button"},v)," ","Previous"),I}}]),a}(Tu.default.PureComponent);Du.NextArrow=function(e){QS(a,e);var t=eT(a);function a(){return XS(this,a),t.apply(this,arguments)}return YS(a,[{key:"clickHandler",value:function(h,x){x&&x.preventDefault(),this.props.clickHandler(h,x)}},{key:"render",value:function(){var h={"slick-arrow":!0,"slick-next":!0},x=this.clickHandler.bind(this,{message:"next"});(0,j3.canGoNext)(this.props)||(h["slick-disabled"]=!0,x=null);var v={key:"1","data-role":"none",className:(0,GS.default)(h),style:{display:"block"},onClick:x},c={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},I;return this.props.nextArrow?I=Tu.default.cloneElement(this.props.nextArrow,If(If({},v),c)):I=Tu.default.createElement("button",Pf({key:"1",type:"button"},v)," ","Next"),I}}]),a}(Tu.default.PureComponent);var rT=function(){if(typeof Map<"u")return Map;function e(t,a){var u=-1;return t.some(function(h,x){return h[0]===a?(u=x,!0):!1}),u}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(a){var u=e(this.__entries__,a),h=this.__entries__[u];return h&&h[1]},t.prototype.set=function(a,u){var h=e(this.__entries__,a);~h?this.__entries__[h][1]=u:this.__entries__.push([a,u])},t.prototype.delete=function(a){var u=this.__entries__,h=e(u,a);~h&&u.splice(h,1)},t.prototype.has=function(a){return!!~e(this.__entries__,a)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(a,u){u===void 0&&(u=null);for(var h=0,x=this.__entries__;h<x.length;h++){var v=x[h];a.call(u,v[1],v[0])}},t}()}(),g0=typeof window<"u"&&typeof document<"u"&&window.document===document,Mf=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),q3=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Mf):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),Z3=2;function G3(e,t){var a=!1,u=!1,h=0;function x(){a&&(a=!1,e()),u&&c()}function v(){q3(x)}function c(){var I=Date.now();if(a){if(I-h<Z3)return;u=!0}else a=!0,u=!1,setTimeout(v,t);h=I}return c}var K3=20,X3=["top","right","bottom","left","width","height","size","weight"],Y3=typeof MutationObserver<"u",J3=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=G3(this.refresh.bind(this),K3)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var a=this.observers_,u=a.indexOf(t);~u&&a.splice(u,1),!a.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(a){return a.gatherActive(),a.hasActive()});return t.forEach(function(a){return a.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!g0||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Y3?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!g0||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var a=t.propertyName,u=a===void 0?"":a,h=X3.some(function(x){return!!~u.indexOf(x)});h&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),nT=function(e,t){for(var a=0,u=Object.keys(t);a<u.length;a++){var h=u[a];Object.defineProperty(e,h,{value:t[h],enumerable:!1,writable:!1,configurable:!0})}return e},Fu=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||Mf},iT=am(0,0,0,0);function zf(e){return parseFloat(e)||0}function ew(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return t.reduce(function(u,h){var x=e["border-"+h+"-width"];return u+zf(x)},0)}function Q3(e){for(var t=["top","right","bottom","left"],a={},u=0,h=t;u<h.length;u++){var x=h[u],v=e["padding-"+x];a[x]=zf(v)}return a}function eM(e){var t=e.getBBox();return am(0,0,t.width,t.height)}function tM(e){var t=e.clientWidth,a=e.clientHeight;if(!t&&!a)return iT;var u=Fu(e).getComputedStyle(e),h=Q3(u),x=h.left+h.right,v=h.top+h.bottom,c=zf(u.width),I=zf(u.height);if(u.boxSizing==="border-box"&&(Math.round(c+x)!==t&&(c-=ew(u,"left","right")+x),Math.round(I+v)!==a&&(I-=ew(u,"top","bottom")+v)),!nM(e)){var F=Math.round(c+x)-t,W=Math.round(I+v)-a;Math.abs(F)!==1&&(c-=F),Math.abs(W)!==1&&(I-=W)}return am(h.left,h.top,c,I)}var rM=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof Fu(e).SVGGraphicsElement}:function(e){return e instanceof Fu(e).SVGElement&&typeof e.getBBox=="function"}}();function nM(e){return e===Fu(e).document.documentElement}function iM(e){return g0?rM(e)?eM(e):tM(e):iT}function oM(e){var t=e.x,a=e.y,u=e.width,h=e.height,x=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,v=Object.create(x.prototype);return nT(v,{x:t,y:a,width:u,height:h,top:a,right:t+u,bottom:h+a,left:t}),v}function am(e,t,a,u){return{x:e,y:t,width:a,height:u}}var aM=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=am(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=iM(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),sM=function(){function e(t,a){var u=oM(a);nT(this,{target:t,contentRect:u})}return e}(),lM=function(){function e(t,a,u){if(this.activeObservations_=[],this.observations_=new rT,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=a,this.callbackCtx_=u}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Fu(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var a=this.observations_;a.has(t)||(a.set(t,new aM(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Fu(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var a=this.observations_;a.has(t)&&(a.delete(t),a.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(a){a.isActive()&&t.activeObservations_.push(a)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,a=this.activeObservations_.map(function(u){return new sM(u.target,u.broadcastRect())});this.callback_.call(t,a,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),oT=typeof WeakMap<"u"?new WeakMap:new rT,aT=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var a=J3.getInstance(),u=new lM(t,a,this);oT.set(this,u)}return e}();["observe","unobserve","disconnect"].forEach(function(e){aT.prototype[e]=function(){var t;return(t=oT.get(this))[e].apply(t,arguments)}});var uM=function(){return typeof Mf.ResizeObserver<"u"?Mf.ResizeObserver:aT}();const cM=Object.freeze(Object.defineProperty({__proto__:null,default:uM},Symbol.toStringTag,{value:"Module"})),hM=aE(cM);Object.defineProperty(rm,"__esModule",{value:!0});rm.InnerSlider=void 0;var ri=Qh(ke),dM=Qh(MS),pM=Qh(n3),fM=Qh(nm),Mr=tt,mM=im,gM=om,tw=Du,yM=Qh(hM);function Qh(e){return e&&e.__esModule?e:{default:e}}function rl(e){"@babel/helpers - typeof";return rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rl(e)}function Lf(){return Lf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u])}return e},Lf.apply(this,arguments)}function _M(e,t){if(e==null)return{};var a=vM(e,t),u,h;if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(e);for(h=0;h<x.length;h++)u=x[h],!(t.indexOf(u)>=0)&&Object.prototype.propertyIsEnumerable.call(e,u)&&(a[u]=e[u])}return a}function vM(e,t){if(e==null)return{};var a={},u=Object.keys(e),h,x;for(x=0;x<u.length;x++)h=u[x],!(t.indexOf(h)>=0)&&(a[h]=e[h]);return a}function rw(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);t&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),a.push.apply(a,u)}return a}function kt(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?rw(Object(a),!0).forEach(function(u){Bt(e,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):rw(Object(a)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(a,u))})}return e}function xM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wM(e,t){for(var a=0;a<t.length;a++){var u=t[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,lT(u.key),u)}}function bM(e,t,a){return t&&wM(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function SM(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y0(e,t)}function y0(e,t){return y0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,h){return u.__proto__=h,u},y0(e,t)}function TM(e){var t=sT();return function(){var u=Rf(e),h;if(t){var x=Rf(this).constructor;h=Reflect.construct(u,arguments,x)}else h=u.apply(this,arguments);return kM(this,h)}}function kM(e,t){if(t&&(rl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ft(e)}function Ft(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sT=function(){return!!e})()}function Rf(e){return Rf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Rf(e)}function Bt(e,t,a){return t=lT(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function lT(e){var t=EM(e,"string");return rl(t)=="symbol"?t:String(t)}function EM(e,t){if(rl(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var u=a.call(e,t||"default");if(rl(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}rm.InnerSlider=function(e){SM(a,e);var t=TM(a);function a(u){var h;xM(this,a),h=t.call(this,u),Bt(Ft(h),"listRefHandler",function(v){return h.list=v}),Bt(Ft(h),"trackRefHandler",function(v){return h.track=v}),Bt(Ft(h),"adaptHeight",function(){if(h.props.adaptiveHeight&&h.list){var v=h.list.querySelector('[data-index="'.concat(h.state.currentSlide,'"]'));h.list.style.height=(0,Mr.getHeight)(v)+"px"}}),Bt(Ft(h),"componentDidMount",function(){if(h.props.onInit&&h.props.onInit(),h.props.lazyLoad){var v=(0,Mr.getOnDemandLazySlides)(kt(kt({},h.props),h.state));v.length>0&&(h.setState(function(I){return{lazyLoadedList:I.lazyLoadedList.concat(v)}}),h.props.onLazyLoad&&h.props.onLazyLoad(v))}var c=kt({listRef:h.list,trackRef:h.track},h.props);h.updateState(c,!0,function(){h.adaptHeight(),h.props.autoplay&&h.autoPlay("update")}),h.props.lazyLoad==="progressive"&&(h.lazyLoadTimer=setInterval(h.progressiveLazyLoad,1e3)),h.ro=new yM.default(function(){h.state.animating?(h.onWindowResized(!1),h.callbackTimers.push(setTimeout(function(){return h.onWindowResized()},h.props.speed))):h.onWindowResized()}),h.ro.observe(h.list),document.querySelectorAll&&Array.prototype.forEach.call(document.querySelectorAll(".slick-slide"),function(I){I.onfocus=h.props.pauseOnFocus?h.onSlideFocus:null,I.onblur=h.props.pauseOnFocus?h.onSlideBlur:null}),window.addEventListener?window.addEventListener("resize",h.onWindowResized):window.attachEvent("onresize",h.onWindowResized)}),Bt(Ft(h),"componentWillUnmount",function(){h.animationEndCallback&&clearTimeout(h.animationEndCallback),h.lazyLoadTimer&&clearInterval(h.lazyLoadTimer),h.callbackTimers.length&&(h.callbackTimers.forEach(function(v){return clearTimeout(v)}),h.callbackTimers=[]),window.addEventListener?window.removeEventListener("resize",h.onWindowResized):window.detachEvent("onresize",h.onWindowResized),h.autoplayTimer&&clearInterval(h.autoplayTimer),h.ro.disconnect()}),Bt(Ft(h),"componentDidUpdate",function(v){if(h.checkImagesLoad(),h.props.onReInit&&h.props.onReInit(),h.props.lazyLoad){var c=(0,Mr.getOnDemandLazySlides)(kt(kt({},h.props),h.state));c.length>0&&(h.setState(function(W){return{lazyLoadedList:W.lazyLoadedList.concat(c)}}),h.props.onLazyLoad&&h.props.onLazyLoad(c))}h.adaptHeight();var I=kt(kt({listRef:h.list,trackRef:h.track},h.props),h.state),F=h.didPropsChange(v);F&&h.updateState(I,F,function(){h.state.currentSlide>=ri.default.Children.count(h.props.children)&&h.changeSlide({message:"index",index:ri.default.Children.count(h.props.children)-h.props.slidesToShow,currentSlide:h.state.currentSlide}),h.props.autoplay?h.autoPlay("update"):h.pause("paused")})}),Bt(Ft(h),"onWindowResized",function(v){h.debouncedResize&&h.debouncedResize.cancel(),h.debouncedResize=(0,pM.default)(function(){return h.resizeWindow(v)},50),h.debouncedResize()}),Bt(Ft(h),"resizeWindow",function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,c=!!(h.track&&h.track.node);if(c){var I=kt(kt({listRef:h.list,trackRef:h.track},h.props),h.state);h.updateState(I,v,function(){h.props.autoplay?h.autoPlay("update"):h.pause("paused")}),h.setState({animating:!1}),clearTimeout(h.animationEndCallback),delete h.animationEndCallback}}),Bt(Ft(h),"updateState",function(v,c,I){var F=(0,Mr.initializedState)(v);v=kt(kt(kt({},v),F),{},{slideIndex:F.currentSlide});var W=(0,Mr.getTrackLeft)(v);v=kt(kt({},v),{},{left:W});var D=(0,Mr.getTrackCSS)(v);(c||ri.default.Children.count(h.props.children)!==ri.default.Children.count(v.children))&&(F.trackStyle=D),h.setState(F,I)}),Bt(Ft(h),"ssrInit",function(){if(h.props.variableWidth){var v=0,c=0,I=[],F=(0,Mr.getPreClones)(kt(kt(kt({},h.props),h.state),{},{slideCount:h.props.children.length})),W=(0,Mr.getPostClones)(kt(kt(kt({},h.props),h.state),{},{slideCount:h.props.children.length}));h.props.children.forEach(function(Le){I.push(Le.props.style.width),v+=Le.props.style.width});for(var D=0;D<F;D++)c+=I[I.length-1-D],v+=I[I.length-1-D];for(var B=0;B<W;B++)v+=I[B];for(var le=0;le<h.state.currentSlide;le++)c+=I[le];var ge={width:v+"px",left:-c+"px"};if(h.props.centerMode){var de="".concat(I[h.state.currentSlide],"px");ge.left="calc(".concat(ge.left," + (100% - ").concat(de,") / 2 ) ")}return{trackStyle:ge}}var we=ri.default.Children.count(h.props.children),ee=kt(kt(kt({},h.props),h.state),{},{slideCount:we}),q=(0,Mr.getPreClones)(ee)+(0,Mr.getPostClones)(ee)+we,te=100/h.props.slidesToShow*q,_e=100/q,Ce=-_e*((0,Mr.getPreClones)(ee)+h.state.currentSlide)*te/100;h.props.centerMode&&(Ce+=(100-_e*te/100)/2);var Ae={width:te+"%",left:Ce+"%"};return{slideWidth:_e+"%",trackStyle:Ae}}),Bt(Ft(h),"checkImagesLoad",function(){var v=h.list&&h.list.querySelectorAll&&h.list.querySelectorAll(".slick-slide img")||[],c=v.length,I=0;Array.prototype.forEach.call(v,function(F){var W=function(){return++I&&I>=c&&h.onWindowResized()};if(!F.onclick)F.onclick=function(){return F.parentNode.focus()};else{var D=F.onclick;F.onclick=function(B){D(B),F.parentNode.focus()}}F.onload||(h.props.lazyLoad?F.onload=function(){h.adaptHeight(),h.callbackTimers.push(setTimeout(h.onWindowResized,h.props.speed))}:(F.onload=W,F.onerror=function(){W(),h.props.onLazyLoadError&&h.props.onLazyLoadError()}))})}),Bt(Ft(h),"progressiveLazyLoad",function(){for(var v=[],c=kt(kt({},h.props),h.state),I=h.state.currentSlide;I<h.state.slideCount+(0,Mr.getPostClones)(c);I++)if(h.state.lazyLoadedList.indexOf(I)<0){v.push(I);break}for(var F=h.state.currentSlide-1;F>=-(0,Mr.getPreClones)(c);F--)if(h.state.lazyLoadedList.indexOf(F)<0){v.push(F);break}v.length>0?(h.setState(function(W){return{lazyLoadedList:W.lazyLoadedList.concat(v)}}),h.props.onLazyLoad&&h.props.onLazyLoad(v)):h.lazyLoadTimer&&(clearInterval(h.lazyLoadTimer),delete h.lazyLoadTimer)}),Bt(Ft(h),"slideHandler",function(v){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,I=h.props,F=I.asNavFor,W=I.beforeChange,D=I.onLazyLoad,B=I.speed,le=I.afterChange,ge=h.state.currentSlide,de=(0,Mr.slideHandler)(kt(kt(kt({index:v},h.props),h.state),{},{trackRef:h.track,useCSS:h.props.useCSS&&!c})),we=de.state,ee=de.nextState;if(we){W&&W(ge,we.currentSlide);var q=we.lazyLoadedList.filter(function(te){return h.state.lazyLoadedList.indexOf(te)<0});D&&q.length>0&&D(q),!h.props.waitForAnimate&&h.animationEndCallback&&(clearTimeout(h.animationEndCallback),le&&le(ge),delete h.animationEndCallback),h.setState(we,function(){F&&h.asNavForIndex!==v&&(h.asNavForIndex=v,F.innerSlider.slideHandler(v)),ee&&(h.animationEndCallback=setTimeout(function(){var te=ee.animating,_e=_M(ee,["animating"]);h.setState(_e,function(){h.callbackTimers.push(setTimeout(function(){return h.setState({animating:te})},10)),le&&le(we.currentSlide),delete h.animationEndCallback})},B))})}}),Bt(Ft(h),"changeSlide",function(v){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,I=kt(kt({},h.props),h.state),F=(0,Mr.changeSlide)(I,v);if(!(F!==0&&!F)&&(c===!0?h.slideHandler(F,c):h.slideHandler(F),h.props.autoplay&&h.autoPlay("update"),h.props.focusOnSelect)){var W=h.list.querySelectorAll(".slick-current");W[0]&&W[0].focus()}}),Bt(Ft(h),"clickHandler",function(v){h.clickable===!1&&(v.stopPropagation(),v.preventDefault()),h.clickable=!0}),Bt(Ft(h),"keyHandler",function(v){var c=(0,Mr.keyHandler)(v,h.props.accessibility,h.props.rtl);c!==""&&h.changeSlide({message:c})}),Bt(Ft(h),"selectHandler",function(v){h.changeSlide(v)}),Bt(Ft(h),"disableBodyScroll",function(){var v=function(I){I=I||window.event,I.preventDefault&&I.preventDefault(),I.returnValue=!1};window.ontouchmove=v}),Bt(Ft(h),"enableBodyScroll",function(){window.ontouchmove=null}),Bt(Ft(h),"swipeStart",function(v){h.props.verticalSwiping&&h.disableBodyScroll();var c=(0,Mr.swipeStart)(v,h.props.swipe,h.props.draggable);c!==""&&h.setState(c)}),Bt(Ft(h),"swipeMove",function(v){var c=(0,Mr.swipeMove)(v,kt(kt(kt({},h.props),h.state),{},{trackRef:h.track,listRef:h.list,slideIndex:h.state.currentSlide}));c&&(c.swiping&&(h.clickable=!1),h.setState(c))}),Bt(Ft(h),"swipeEnd",function(v){var c=(0,Mr.swipeEnd)(v,kt(kt(kt({},h.props),h.state),{},{trackRef:h.track,listRef:h.list,slideIndex:h.state.currentSlide}));if(c){var I=c.triggerSlideHandler;delete c.triggerSlideHandler,h.setState(c),I!==void 0&&(h.slideHandler(I),h.props.verticalSwiping&&h.enableBodyScroll())}}),Bt(Ft(h),"touchEnd",function(v){h.swipeEnd(v),h.clickable=!0}),Bt(Ft(h),"slickPrev",function(){h.callbackTimers.push(setTimeout(function(){return h.changeSlide({message:"previous"})},0))}),Bt(Ft(h),"slickNext",function(){h.callbackTimers.push(setTimeout(function(){return h.changeSlide({message:"next"})},0))}),Bt(Ft(h),"slickGoTo",function(v){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(v=Number(v),isNaN(v))return"";h.callbackTimers.push(setTimeout(function(){return h.changeSlide({message:"index",index:v,currentSlide:h.state.currentSlide},c)},0))}),Bt(Ft(h),"play",function(){var v;if(h.props.rtl)v=h.state.currentSlide-h.props.slidesToScroll;else if((0,Mr.canGoNext)(kt(kt({},h.props),h.state)))v=h.state.currentSlide+h.props.slidesToScroll;else return!1;h.slideHandler(v)}),Bt(Ft(h),"autoPlay",function(v){h.autoplayTimer&&clearInterval(h.autoplayTimer);var c=h.state.autoplaying;if(v==="update"){if(c==="hovered"||c==="focused"||c==="paused")return}else if(v==="leave"){if(c==="paused"||c==="focused")return}else if(v==="blur"&&(c==="paused"||c==="hovered"))return;h.autoplayTimer=setInterval(h.play,h.props.autoplaySpeed+50),h.setState({autoplaying:"playing"})}),Bt(Ft(h),"pause",function(v){h.autoplayTimer&&(clearInterval(h.autoplayTimer),h.autoplayTimer=null);var c=h.state.autoplaying;v==="paused"?h.setState({autoplaying:"paused"}):v==="focused"?(c==="hovered"||c==="playing")&&h.setState({autoplaying:"focused"}):c==="playing"&&h.setState({autoplaying:"hovered"})}),Bt(Ft(h),"onDotsOver",function(){return h.props.autoplay&&h.pause("hovered")}),Bt(Ft(h),"onDotsLeave",function(){return h.props.autoplay&&h.state.autoplaying==="hovered"&&h.autoPlay("leave")}),Bt(Ft(h),"onTrackOver",function(){return h.props.autoplay&&h.pause("hovered")}),Bt(Ft(h),"onTrackLeave",function(){return h.props.autoplay&&h.state.autoplaying==="hovered"&&h.autoPlay("leave")}),Bt(Ft(h),"onSlideFocus",function(){return h.props.autoplay&&h.pause("focused")}),Bt(Ft(h),"onSlideBlur",function(){return h.props.autoplay&&h.state.autoplaying==="focused"&&h.autoPlay("blur")}),Bt(Ft(h),"render",function(){var v=(0,fM.default)("slick-slider",h.props.className,{"slick-vertical":h.props.vertical,"slick-initialized":!0}),c=kt(kt({},h.props),h.state),I=(0,Mr.extractObject)(c,["fade","cssEase","speed","infinite","centerMode","focusOnSelect","currentSlide","lazyLoad","lazyLoadedList","rtl","slideWidth","slideHeight","listHeight","vertical","slidesToShow","slidesToScroll","slideCount","trackStyle","variableWidth","unslick","centerPadding","targetSlide","useCSS"]),F=h.props.pauseOnHover;I=kt(kt({},I),{},{onMouseEnter:F?h.onTrackOver:null,onMouseLeave:F?h.onTrackLeave:null,onMouseOver:F?h.onTrackOver:null,focusOnSelect:h.props.focusOnSelect&&h.clickable?h.selectHandler:null});var W;if(h.props.dots===!0&&h.state.slideCount>=h.props.slidesToShow){var D=(0,Mr.extractObject)(c,["dotsClass","slideCount","slidesToShow","currentSlide","slidesToScroll","clickHandler","children","customPaging","infinite","appendDots"]),B=h.props.pauseOnDotsHover;D=kt(kt({},D),{},{clickHandler:h.changeSlide,onMouseEnter:B?h.onDotsLeave:null,onMouseOver:B?h.onDotsOver:null,onMouseLeave:B?h.onDotsLeave:null}),W=ri.default.createElement(gM.Dots,D)}var le,ge,de=(0,Mr.extractObject)(c,["infinite","centerMode","currentSlide","slideCount","slidesToShow","prevArrow","nextArrow"]);de.clickHandler=h.changeSlide,h.props.arrows&&(le=ri.default.createElement(tw.PrevArrow,de),ge=ri.default.createElement(tw.NextArrow,de));var we=null;h.props.vertical&&(we={height:h.state.listHeight});var ee=null;h.props.vertical===!1?h.props.centerMode===!0&&(ee={padding:"0px "+h.props.centerPadding}):h.props.centerMode===!0&&(ee={padding:h.props.centerPadding+" 0px"});var q=kt(kt({},we),ee),te=h.props.touchMove,_e={className:"slick-list",style:q,onClick:h.clickHandler,onMouseDown:te?h.swipeStart:null,onMouseMove:h.state.dragging&&te?h.swipeMove:null,onMouseUp:te?h.swipeEnd:null,onMouseLeave:h.state.dragging&&te?h.swipeEnd:null,onTouchStart:te?h.swipeStart:null,onTouchMove:h.state.dragging&&te?h.swipeMove:null,onTouchEnd:te?h.touchEnd:null,onTouchCancel:h.state.dragging&&te?h.swipeEnd:null,onKeyDown:h.props.accessibility?h.keyHandler:null},Ce={className:v,dir:"ltr",style:h.props.style};return h.props.unslick&&(_e={className:"slick-list"},Ce={className:v}),ri.default.createElement("div",Ce,h.props.unslick?"":le,ri.default.createElement("div",Lf({ref:h.listRefHandler},_e),ri.default.createElement(mM.Track,Lf({ref:h.trackRefHandler},I),h.props.children)),h.props.unslick?"":ge,h.props.unslick?"":W)}),h.list=null,h.track=null,h.state=kt(kt({},dM.default),{},{currentSlide:h.props.initialSlide,targetSlide:h.props.initialSlide?h.props.initialSlide:0,slideCount:ri.default.Children.count(h.props.children)}),h.callbackTimers=[],h.clickable=!0,h.debouncedResize=null;var x=h.ssrInit();return h.state=kt(kt({},h.state),x),h}return bM(a,[{key:"didPropsChange",value:function(h){for(var x=!1,v=0,c=Object.keys(this.props);v<c.length;v++){var I=c[v];if(!h.hasOwnProperty(I)){x=!0;break}if(!(rl(h[I])==="object"||typeof h[I]=="function"||isNaN(h[I]))&&h[I]!==this.props[I]){x=!0;break}}return x||ri.default.Children.count(this.props.children)!==ri.default.Children.count(h.children)}}]),a}(ri.default.Component);var CM=function(e){return e.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()}).toLowerCase()},PM=CM,IM=PM,AM=function(e){var t=/[height|width]$/;return t.test(e)},nw=function(e){var t="",a=Object.keys(e);return a.forEach(function(u,h){var x=e[u];u=IM(u),AM(u)&&typeof x=="number"&&(x=x+"px"),x===!0?t+=u:x===!1?t+="not "+u:t+="("+u+": "+x+")",h<a.length-1&&(t+=" and ")}),t},MM=function(e){var t="";return typeof e=="string"?e:e instanceof Array?(e.forEach(function(a,u){t+=nw(a),u<e.length-1&&(t+=", ")}),t):nw(e)},zM=MM,Qg,iw;function LM(){if(iw)return Qg;iw=1;function e(t){this.options=t,!t.deferSetup&&this.setup()}return e.prototype={constructor:e,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(t){return this.options===t||this.options.match===t}},Qg=e,Qg}var ey,ow;function uT(){if(ow)return ey;ow=1;function e(u,h){var x=0,v=u.length,c;for(x;x<v&&(c=h(u[x],x),c!==!1);x++);}function t(u){return Object.prototype.toString.apply(u)==="[object Array]"}function a(u){return typeof u=="function"}return ey={isFunction:a,isArray:t,each:e},ey}var ty,aw;function RM(){if(aw)return ty;aw=1;var e=LM(),t=uT().each;function a(u,h){this.query=u,this.isUnconditional=h,this.handlers=[],this.mql=window.matchMedia(u);var x=this;this.listener=function(v){x.mql=v.currentTarget||v,x.assess()},this.mql.addListener(this.listener)}return a.prototype={constuctor:a,addHandler:function(u){var h=new e(u);this.handlers.push(h),this.matches()&&h.on()},removeHandler:function(u){var h=this.handlers;t(h,function(x,v){if(x.equals(u))return x.destroy(),!h.splice(v,1)})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){t(this.handlers,function(u){u.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var u=this.matches()?"on":"off";t(this.handlers,function(h){h[u]()})}},ty=a,ty}var ry,sw;function DM(){if(sw)return ry;sw=1;var e=RM(),t=uT(),a=t.each,u=t.isFunction,h=t.isArray;function x(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}return x.prototype={constructor:x,register:function(v,c,I){var F=this.queries,W=I&&this.browserIsIncapable;return F[v]||(F[v]=new e(v,W)),u(c)&&(c={match:c}),h(c)||(c=[c]),a(c,function(D){u(D)&&(D={match:D}),F[v].addHandler(D)}),this},unregister:function(v,c){var I=this.queries[v];return I&&(c?I.removeHandler(c):(I.clear(),delete this.queries[v])),this}},ry=x,ry}var ny,lw;function OM(){if(lw)return ny;lw=1;var e=DM();return ny=new e,ny}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=v(ke),a=rm,u=v(zM),h=v(x_),x=tt;function v(Re){return Re&&Re.__esModule?Re:{default:Re}}function c(Re){"@babel/helpers - typeof";return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Me){return typeof Me}:function(Me){return Me&&typeof Symbol=="function"&&Me.constructor===Symbol&&Me!==Symbol.prototype?"symbol":typeof Me},c(Re)}function I(){return I=Object.assign?Object.assign.bind():function(Re){for(var Me=1;Me<arguments.length;Me++){var $e=arguments[Me];for(var ft in $e)Object.prototype.hasOwnProperty.call($e,ft)&&(Re[ft]=$e[ft])}return Re},I.apply(this,arguments)}function F(Re,Me){var $e=Object.keys(Re);if(Object.getOwnPropertySymbols){var ft=Object.getOwnPropertySymbols(Re);Me&&(ft=ft.filter(function(it){return Object.getOwnPropertyDescriptor(Re,it).enumerable})),$e.push.apply($e,ft)}return $e}function W(Re){for(var Me=1;Me<arguments.length;Me++){var $e=arguments[Me]!=null?arguments[Me]:{};Me%2?F(Object($e),!0).forEach(function(ft){Ce(Re,ft,$e[ft])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Re,Object.getOwnPropertyDescriptors($e)):F(Object($e)).forEach(function(ft){Object.defineProperty(Re,ft,Object.getOwnPropertyDescriptor($e,ft))})}return Re}function D(Re,Me){if(!(Re instanceof Me))throw new TypeError("Cannot call a class as a function")}function B(Re,Me){for(var $e=0;$e<Me.length;$e++){var ft=Me[$e];ft.enumerable=ft.enumerable||!1,ft.configurable=!0,"value"in ft&&(ft.writable=!0),Object.defineProperty(Re,Ae(ft.key),ft)}}function le(Re,Me,$e){return Me&&B(Re.prototype,Me),Object.defineProperty(Re,"prototype",{writable:!1}),Re}function ge(Re,Me){if(typeof Me!="function"&&Me!==null)throw new TypeError("Super expression must either be null or a function");Re.prototype=Object.create(Me&&Me.prototype,{constructor:{value:Re,writable:!0,configurable:!0}}),Object.defineProperty(Re,"prototype",{writable:!1}),Me&&de(Re,Me)}function de(Re,Me){return de=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ft,it){return ft.__proto__=it,ft},de(Re,Me)}function we(Re){var Me=te();return function(){var ft=_e(Re),it;if(Me){var st=_e(this).constructor;it=Reflect.construct(ft,arguments,st)}else it=ft.apply(this,arguments);return ee(this,it)}}function ee(Re,Me){if(Me&&(c(Me)==="object"||typeof Me=="function"))return Me;if(Me!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q(Re)}function q(Re){if(Re===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Re}function te(){try{var Re=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(te=function(){return!!Re})()}function _e(Re){return _e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($e){return $e.__proto__||Object.getPrototypeOf($e)},_e(Re)}function Ce(Re,Me,$e){return Me=Ae(Me),Me in Re?Object.defineProperty(Re,Me,{value:$e,enumerable:!0,configurable:!0,writable:!0}):Re[Me]=$e,Re}function Ae(Re){var Me=Le(Re,"string");return c(Me)=="symbol"?Me:String(Me)}function Le(Re,Me){if(c(Re)!="object"||!Re)return Re;var $e=Re[Symbol.toPrimitive];if($e!==void 0){var ft=$e.call(Re,Me||"default");if(c(ft)!="object")return ft;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Me==="string"?String:Number)(Re)}var Ge=(0,x.canUseDOM)()&&OM();e.default=function(Re){ge($e,Re);var Me=we($e);function $e(ft){var it;return D(this,$e),it=Me.call(this,ft),Ce(q(it),"innerSliderRefHandler",function(st){return it.innerSlider=st}),Ce(q(it),"slickPrev",function(){return it.innerSlider.slickPrev()}),Ce(q(it),"slickNext",function(){return it.innerSlider.slickNext()}),Ce(q(it),"slickGoTo",function(st){var or=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return it.innerSlider.slickGoTo(st,or)}),Ce(q(it),"slickPause",function(){return it.innerSlider.pause("paused")}),Ce(q(it),"slickPlay",function(){return it.innerSlider.autoPlay("play")}),it.state={breakpoint:null},it._responsiveMediaHandlers=[],it}return le($e,[{key:"media",value:function(it,st){Ge.register(it,st),this._responsiveMediaHandlers.push({query:it,handler:st})}},{key:"componentDidMount",value:function(){var it=this;if(this.props.responsive){var st=this.props.responsive.map(function(Gt){return Gt.breakpoint});st.sort(function(Gt,ar){return Gt-ar}),st.forEach(function(Gt,ar){var Ye;ar===0?Ye=(0,u.default)({minWidth:0,maxWidth:Gt}):Ye=(0,u.default)({minWidth:st[ar-1]+1,maxWidth:Gt}),(0,x.canUseDOM)()&&it.media(Ye,function(){it.setState({breakpoint:Gt})})});var or=(0,u.default)({minWidth:st.slice(-1)[0]});(0,x.canUseDOM)()&&this.media(or,function(){it.setState({breakpoint:null})})}}},{key:"componentWillUnmount",value:function(){this._responsiveMediaHandlers.forEach(function(it){Ge.unregister(it.query,it.handler)})}},{key:"render",value:function(){var it=this,st,or;this.state.breakpoint?(or=this.props.responsive.filter(function(Ir){return Ir.breakpoint===it.state.breakpoint}),st=or[0].settings==="unslick"?"unslick":W(W(W({},h.default),this.props),or[0].settings)):st=W(W({},h.default),this.props),st.centerMode&&(st.slidesToScroll>1,st.slidesToScroll=1),st.fade&&(st.slidesToShow>1,st.slidesToScroll>1,st.slidesToShow=1,st.slidesToScroll=1);var Gt=t.default.Children.toArray(this.props.children);Gt=Gt.filter(function(Ir){return typeof Ir=="string"?!!Ir.trim():!!Ir}),st.variableWidth&&(st.rows>1||st.slidesPerRow>1)&&(console.warn("variableWidth is not supported in case of rows > 1 or slidesPerRow > 1"),st.variableWidth=!1);for(var ar=[],Ye=null,mt=0;mt<Gt.length;mt+=st.rows*st.slidesPerRow){for(var yt=[],Ct=mt;Ct<mt+st.rows*st.slidesPerRow;Ct+=st.slidesPerRow){for(var Rt=[],er=Ct;er<Ct+st.slidesPerRow&&(st.variableWidth&&Gt[er].props.style&&(Ye=Gt[er].props.style.width),!(er>=Gt.length));er+=1)Rt.push(t.default.cloneElement(Gt[er],{key:100*mt+10*Ct+er,tabIndex:-1,style:{width:"".concat(100/st.slidesPerRow,"%"),display:"inline-block"}}));yt.push(t.default.createElement("div",{key:10*mt+Ct},Rt))}st.variableWidth?ar.push(t.default.createElement("div",{key:mt,style:{width:Ye}},yt)):ar.push(t.default.createElement("div",{key:mt},yt))}if(st==="unslick"){var Ur="regular slider "+(this.props.className||"");return t.default.createElement("div",{className:Ur},Gt)}else ar.length<=st.slidesToShow&&!st.infinite&&(st.unslick=!0);return t.default.createElement(a.InnerSlider,I({style:this.props.style,ref:this.innerSliderRefHandler},(0,x.filterSettings)(st)),ar)}}]),$e}(t.default.Component)})(AS);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(AS);function a(u){return u&&u.__esModule?u:{default:u}}e.default=t.default})(IS);const FM=Bu(IS);function cT({images:e}){const t={infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:4e3,dots:!0};return Fe.jsx("div",{className:"mt-6 carousel-container",children:Fe.jsxs(FM,{...t,children:[Fe.jsx("div",{children:Fe.jsx("img",{src:e.image1,className:"rounded-2xl object-cover mx-auto",alt:"Slide 1"})}),Fe.jsx("div",{children:Fe.jsx("img",{src:e.image2,className:"rounded-2xl object-cover mx-auto",alt:"Slide 2"})}),Fe.jsx("div",{children:Fe.jsx("img",{src:e.image3,className:"rounded-2xl object-cover mx-auto",alt:"Slide 3"})})]})})}cT.propTypes={images:mh.shape({image1:mh.string.isRequired,image2:mh.string.isRequired,image3:mh.string.isRequired}).isRequired};const BM="/mualaApp/assets/mualalogo-CEI02jA0.png";function hT(e){return Si({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 288 480 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-370.7 0 73.4-73.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-128 128z"},child:[]}]})(e)}function NM(){var h;const{id:e}=uP(),t=wf.find(x=>x.id===e),u=((h=Ho().state)==null?void 0:h.link)||"/";return Fe.jsxs("div",{className:"markerdetail h-[90vh] 2xl:w-[1440px] mx-auto bg-appColor dark:bg-lightGray dark:text-appColor overflow-y-auto overflow-x-hidden",children:[Fe.jsx("div",{className:"fixed z-10 flex rounded-full top-2 left-4 bg-navColor text-white shadow-lg duration-200 hover:text-main hover:shadow-main hover:scale-110",children:Fe.jsx("button",{type:"button",className:"p-3",children:Fe.jsx(xf,{to:`../${u}`,children:Fe.jsx(hT,{size:30})})})}),Fe.jsx("img",{src:BM,className:"absolute top-10 left-1/2 transform -translate-x-1/2 -translate-y-1/2 size-16",alt:"logo"}),Fe.jsx("img",{src:t.mainImage,alt:"Delicious Noodle Bar",className:"w-full h-2/5 object-cover bg-center"}),Fe.jsx("div",{className:"absolute bottom-4 left-0 right-0 bg-appColor dark:bg-lightGray dark:text-appColor rounded-t-[2rem] 2xl:rounded-none px-8 pt-4 text-fontColor text-xl h-3/5",children:Fe.jsxs("div",{className:"mx-auto lg:w-3/5 2xl:w-2/5",children:[Fe.jsx("h1",{className:"text-5xl text-center tracking-wider font-bold bg-gradient-to-tr from-yellow-500 via-yellow-400 to-amber-500 bg-clip-text text-transparent pb-2",children:t.title}),Fe.jsx("p",{className:"text-main text-center dark:font-normal font-extralight italic -mt-2",children:t.subtitle}),Fe.jsxs("p",{className:"flex items-center justify-center dark:font-normal font-extralight mt-3",children:[Fe.jsx(NA,{className:"mr-2"}),t.address]}),t.phone&&Fe.jsxs("a",{href:`tel:${t.phone}`,className:"flex items-center justify-center dark:font-normal font-extralight mt-3",children:[Fe.jsx(BA,{className:"mr-2"}),t.phone]}),Fe.jsxs("div",{className:`mx-auto grid gap-5 dark:text-white ${t.website===""||t.youtube===""||t.googleMaps===""?"grid-cols-2":"grid-cols-3"} h-40 text-2xl`,children:[t.website&&Fe.jsxs("a",{href:t.website,className:"group col-span-1 row-span-1 flex items-center justify-center mt-4 px-5 bg-gradient-to-tr from-orange-400 via-amber-400 to-orange-400 rounded-2xl shadow-lg transition-colors hover:bg-whiteHover",children:[Fe.jsx(LA,{className:"mr-1 duration-300 group-hover:text-blue-600"}),"WWW"]}),Fe.jsxs("a",{href:t.youtube,className:"group col-span-1 row-span-1 flex items-center justify-center mt-4 px-5 bg-gradient-to-tr from-orange-400 via-amber-400 to-orange-400 rounded-2xl shadow-lg transition-colors hover:bg-whiteHover",target:"_blank",children:[Fe.jsx(PS,{className:"mr-1 duration-300 group-hover:text-red-600"}),"Youtube"]}),Fe.jsxs("a",{href:t.googleMaps,className:"group col-span-1 row-span-1 flex items-center justify-center mt-4 px-5 bg-gradient-to-tr from-orange-400 via-amber-400 to-orange-400 rounded-2xl shadow-lg transition-colors hover:bg-whiteHover",children:[Fe.jsx(FA,{className:"mr-1 duration-300 group-hover:text-green-600"}),"Maps"]})]}),Fe.jsx(cT,{images:t.images})]})})]})}function jM(){var a;const t=((a=Ho().state)==null?void 0:a.link)||"/";return Fe.jsxs("div",{className:"w-4/6 mx-auto mt-4 2xl:w-[1440px]",children:[Fe.jsx("div",{className:"fixed z-10 flex rounded-full top-2 left-4 bg-navColor  text-white shadow-lg duration-200 hover:text-main hover:shadow-main hover:scale-110",children:Fe.jsx("button",{type:"button",className:"p-3",children:Fe.jsx(xf,{to:`../${t}`,children:Fe.jsx(hT,{size:30})})})}),wf.map((u,h)=>(h++,Fe.jsx(xf,{to:`/${u.id}`,state:{from:"/list"},children:Fe.jsxs("div",{className:"flex items-center 2xl:w-[1000px] justify-center relative text-white dark:text-appColor mb-6 w-full xl:w-4/6 border-[2px] border-[#424349] dark:border-[#e6e5e5] mx-auto p-2 rounded-2xl shadow-xl hover:shadow-main hover:shadow-md transition duration-300",children:[Fe.jsx("span",{className:"absolute flex items-center justify-center left-2 top-2 rounded-full bg-main size-6 text-white",children:h}),Fe.jsxs("div",{className:"w-4/6 mt-7 flex justify-center flex-col font-medium text-left",children:[Fe.jsx("h1",{className:"lg:text-xl xl:text-2xl mb-2",children:u.title}),Fe.jsxs("a",{href:u.youtube,className:"group flex w-1/2 p-7 items-center lg:text-lg xl:text-xl justify-center lg:mt-2 bg-gradient-to-tr from-orange-400 dark:text-white via-amber-400 to-orange-400 rounded-2xl shadow-lg transition-colors hover:bg-whiteHover",children:[Fe.jsx(PS,{className:"mr-1 duration-300  group-hover:text-red-600"}),"Youtube"]})]}),Fe.jsx("div",{className:"w-3/6 max-h-1/2",children:Fe.jsx("div",{className:"rounded-2xl overflow-hidden aspect-w-16 aspect-h-9",children:Fe.jsx("img",{src:u.mainImage,className:"object-cover w-full h-full",style:{width:"100%",height:"100%",objectFit:"cover"},alt:"main image"})})})]})},u.id)))]})}function UM(){return Fe.jsx(TP,{children:Fe.jsxs(ph,{path:"/",element:Fe.jsx(OA,{}),children:[Fe.jsx(ph,{index:!0,element:Fe.jsx(AA,{})}),Fe.jsx(ph,{path:"/:id",element:Fe.jsx(NM,{})}),Fe.jsx(ph,{path:"/list",element:Fe.jsx(jM,{})})]})})}iy.createRoot(document.getElementById("root")).render(Fe.jsx(_n.StrictMode,{children:Fe.jsx(LP,{children:Fe.jsx(UM,{})})}));
