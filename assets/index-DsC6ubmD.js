function Xw(e,t){for(var a=0;a<t.length;a++){const u=t[a];if(typeof u!="string"&&!Array.isArray(u)){for(const c in u)if(c!=="default"&&!(c in e)){const x=Object.getOwnPropertyDescriptor(u,c);x&&Object.defineProperty(e,c,x.get?x:{enumerable:!0,get:()=>u[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))u(c);new MutationObserver(c=>{for(const x of c)if(x.type==="childList")for(const g of x.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&u(g)}).observe(document,{childList:!0,subtree:!0});function a(c){const x={};return c.integrity&&(x.integrity=c.integrity),c.referrerPolicy&&(x.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?x.credentials="include":c.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function u(c){if(c.ep)return;c.ep=!0;const x=a(c);fetch(c.href,x)}})();var kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Yk(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var a=function u(){return this instanceof u?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};a.prototype=t.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(e).forEach(function(u){var c=Object.getOwnPropertyDescriptor(e,u);Object.defineProperty(a,u,c.get?c:{enumerable:!0,get:function(){return e[u]}})}),a}var Yw={exports:{}},em={},Jw={exports:{}},Qt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hd=Symbol.for("react.element"),Jk=Symbol.for("react.portal"),Qk=Symbol.for("react.fragment"),eC=Symbol.for("react.strict_mode"),tC=Symbol.for("react.profiler"),rC=Symbol.for("react.provider"),nC=Symbol.for("react.context"),iC=Symbol.for("react.forward_ref"),oC=Symbol.for("react.suspense"),aC=Symbol.for("react.memo"),sC=Symbol.for("react.lazy"),L1=Symbol.iterator;function lC(e){return e===null||typeof e!="object"?null:(e=L1&&e[L1]||e["@@iterator"],typeof e=="function"?e:null)}var Qw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},eb=Object.assign,tb={};function nc(e,t,a){this.props=e,this.context=t,this.refs=tb,this.updater=a||Qw}nc.prototype.isReactComponent={};nc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};nc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function rb(){}rb.prototype=nc.prototype;function F0(e,t,a){this.props=e,this.context=t,this.refs=tb,this.updater=a||Qw}var B0=F0.prototype=new rb;B0.constructor=F0;eb(B0,nc.prototype);B0.isPureReactComponent=!0;var R1=Array.isArray,nb=Object.prototype.hasOwnProperty,N0={current:null},ib={key:!0,ref:!0,__self:!0,__source:!0};function ob(e,t,a){var u,c={},x=null,g=null;if(t!=null)for(u in t.ref!==void 0&&(g=t.ref),t.key!==void 0&&(x=""+t.key),t)nb.call(t,u)&&!ib.hasOwnProperty(u)&&(c[u]=t[u]);var h=arguments.length-2;if(h===1)c.children=a;else if(1<h){for(var C=Array(h),D=0;D<h;D++)C[D]=arguments[D+2];c.children=C}if(e&&e.defaultProps)for(u in h=e.defaultProps,h)c[u]===void 0&&(c[u]=h[u]);return{$$typeof:hd,type:e,key:x,ref:g,props:c,_owner:N0.current}}function uC(e,t){return{$$typeof:hd,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function j0(e){return typeof e=="object"&&e!==null&&e.$$typeof===hd}function cC(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(a){return t[a]})}var D1=/\/+/g;function Dg(e,t){return typeof e=="object"&&e!==null&&e.key!=null?cC(""+e.key):t.toString(36)}function Gp(e,t,a,u,c){var x=typeof e;(x==="undefined"||x==="boolean")&&(e=null);var g=!1;if(e===null)g=!0;else switch(x){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case hd:case Jk:g=!0}}if(g)return g=e,c=c(g),e=u===""?"."+Dg(g,0):u,R1(c)?(a="",e!=null&&(a=e.replace(D1,"$&/")+"/"),Gp(c,t,a,"",function(D){return D})):c!=null&&(j0(c)&&(c=uC(c,a+(!c.key||g&&g.key===c.key?"":(""+c.key).replace(D1,"$&/")+"/")+e)),t.push(c)),1;if(g=0,u=u===""?".":u+":",R1(e))for(var h=0;h<e.length;h++){x=e[h];var C=u+Dg(x,h);g+=Gp(x,t,a,C,c)}else if(C=lC(e),typeof C=="function")for(e=C.call(e),h=0;!(x=e.next()).done;)x=x.value,C=u+Dg(x,h++),g+=Gp(x,t,a,C,c);else if(x==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return g}function Cp(e,t,a){if(e==null)return e;var u=[],c=0;return Gp(e,u,"","",function(x){return t.call(a,x,c++)}),u}function hC(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(a){(e._status===0||e._status===-1)&&(e._status=1,e._result=a)},function(a){(e._status===0||e._status===-1)&&(e._status=2,e._result=a)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var bi={current:null},Kp={transition:null},dC={ReactCurrentDispatcher:bi,ReactCurrentBatchConfig:Kp,ReactCurrentOwner:N0};function ab(){throw Error("act(...) is not supported in production builds of React.")}Qt.Children={map:Cp,forEach:function(e,t,a){Cp(e,function(){t.apply(this,arguments)},a)},count:function(e){var t=0;return Cp(e,function(){t++}),t},toArray:function(e){return Cp(e,function(t){return t})||[]},only:function(e){if(!j0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Qt.Component=nc;Qt.Fragment=Qk;Qt.Profiler=tC;Qt.PureComponent=F0;Qt.StrictMode=eC;Qt.Suspense=oC;Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dC;Qt.act=ab;Qt.cloneElement=function(e,t,a){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var u=eb({},e.props),c=e.key,x=e.ref,g=e._owner;if(t!=null){if(t.ref!==void 0&&(x=t.ref,g=N0.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var h=e.type.defaultProps;for(C in t)nb.call(t,C)&&!ib.hasOwnProperty(C)&&(u[C]=t[C]===void 0&&h!==void 0?h[C]:t[C])}var C=arguments.length-2;if(C===1)u.children=a;else if(1<C){h=Array(C);for(var D=0;D<C;D++)h[D]=arguments[D+2];u.children=h}return{$$typeof:hd,type:e.type,key:c,ref:x,props:u,_owner:g}};Qt.createContext=function(e){return e={$$typeof:nC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:rC,_context:e},e.Consumer=e};Qt.createElement=ob;Qt.createFactory=function(e){var t=ob.bind(null,e);return t.type=e,t};Qt.createRef=function(){return{current:null}};Qt.forwardRef=function(e){return{$$typeof:iC,render:e}};Qt.isValidElement=j0;Qt.lazy=function(e){return{$$typeof:sC,_payload:{_status:-1,_result:e},_init:hC}};Qt.memo=function(e,t){return{$$typeof:aC,type:e,compare:t===void 0?null:t}};Qt.startTransition=function(e){var t=Kp.transition;Kp.transition={};try{e()}finally{Kp.transition=t}};Qt.unstable_act=ab;Qt.useCallback=function(e,t){return bi.current.useCallback(e,t)};Qt.useContext=function(e){return bi.current.useContext(e)};Qt.useDebugValue=function(){};Qt.useDeferredValue=function(e){return bi.current.useDeferredValue(e)};Qt.useEffect=function(e,t){return bi.current.useEffect(e,t)};Qt.useId=function(){return bi.current.useId()};Qt.useImperativeHandle=function(e,t,a){return bi.current.useImperativeHandle(e,t,a)};Qt.useInsertionEffect=function(e,t){return bi.current.useInsertionEffect(e,t)};Qt.useLayoutEffect=function(e,t){return bi.current.useLayoutEffect(e,t)};Qt.useMemo=function(e,t){return bi.current.useMemo(e,t)};Qt.useReducer=function(e,t,a){return bi.current.useReducer(e,t,a)};Qt.useRef=function(e){return bi.current.useRef(e)};Qt.useState=function(e){return bi.current.useState(e)};Qt.useSyncExternalStore=function(e,t,a){return bi.current.useSyncExternalStore(e,t,a)};Qt.useTransition=function(){return bi.current.useTransition()};Qt.version="18.3.1";Jw.exports=Qt;var Pe=Jw.exports;const Fn=rc(Pe),pC=Xw({__proto__:null,default:Fn},[Pe]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fC=Pe,mC=Symbol.for("react.element"),gC=Symbol.for("react.fragment"),yC=Object.prototype.hasOwnProperty,_C=fC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vC={key:!0,ref:!0,__self:!0,__source:!0};function sb(e,t,a){var u,c={},x=null,g=null;a!==void 0&&(x=""+a),t.key!==void 0&&(x=""+t.key),t.ref!==void 0&&(g=t.ref);for(u in t)yC.call(t,u)&&!vC.hasOwnProperty(u)&&(c[u]=t[u]);if(e&&e.defaultProps)for(u in t=e.defaultProps,t)c[u]===void 0&&(c[u]=t[u]);return{$$typeof:mC,type:e,key:x,ref:g,props:c,_owner:_C.current}}em.Fragment=gC;em.jsx=sb;em.jsxs=sb;Yw.exports=em;var qe=Yw.exports,Sy={},lb={exports:{}},io={},ub={exports:{}},cb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(et,yt){var bt=et.length;et.push(yt);e:for(;0<bt;){var Et=bt-1>>>1,jt=et[Et];if(0<c(jt,yt))et[Et]=yt,et[bt]=jt,bt=Et;else break e}}function a(et){return et.length===0?null:et[0]}function u(et){if(et.length===0)return null;var yt=et[0],bt=et.pop();if(bt!==yt){et[0]=bt;e:for(var Et=0,jt=et.length,er=jt>>>1;Et<er;){var cr=2*(Et+1)-1,hr=et[cr],gr=cr+1,en=et[gr];if(0>c(hr,bt))gr<jt&&0>c(en,hr)?(et[Et]=en,et[gr]=bt,Et=gr):(et[Et]=hr,et[cr]=bt,Et=cr);else if(gr<jt&&0>c(en,bt))et[Et]=en,et[gr]=bt,Et=gr;else break e}}return yt}function c(et,yt){var bt=et.sortIndex-yt.sortIndex;return bt!==0?bt:et.id-yt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;e.unstable_now=function(){return x.now()}}else{var g=Date,h=g.now();e.unstable_now=function(){return g.now()-h}}var C=[],D=[],$=1,M=null,L=3,ce=!1,pe=!1,se=!1,Ee=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ne(et){for(var yt=a(D);yt!==null;){if(yt.callback===null)u(D);else if(yt.startTime<=et)u(D),yt.sortIndex=yt.expirationTime,t(C,yt);else break;yt=a(D)}}function be(et){if(se=!1,ne(et),!pe)if(a(C)!==null)pe=!0,Kt(Ae);else{var yt=a(D);yt!==null&&Ft(be,yt.startTime-et)}}function Ae(et,yt){pe=!1,se&&(se=!1,te($e),$e=-1),ce=!0;var bt=L;try{for(ne(yt),M=a(C);M!==null&&(!(M.expirationTime>yt)||et&&!Be());){var Et=M.callback;if(typeof Et=="function"){M.callback=null,L=M.priorityLevel;var jt=Et(M.expirationTime<=yt);yt=e.unstable_now(),typeof jt=="function"?M.callback=jt:M===a(C)&&u(C),ne(yt)}else u(C);M=a(C)}if(M!==null)var er=!0;else{var cr=a(D);cr!==null&&Ft(be,cr.startTime-yt),er=!1}return er}finally{M=null,L=bt,ce=!1}}var le=!1,Me=null,$e=-1,Ie=5,ze=-1;function Be(){return!(e.unstable_now()-ze<Ie)}function ut(){if(Me!==null){var et=e.unstable_now();ze=et;var yt=!0;try{yt=Me(!0,et)}finally{yt?Ke():(le=!1,Me=null)}}else le=!1}var Ke;if(typeof H=="function")Ke=function(){H(ut)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,nr=Qe.port2;Qe.port1.onmessage=ut,Ke=function(){nr.postMessage(null)}}else Ke=function(){Ee(ut,0)};function Kt(et){Me=et,le||(le=!0,Ke())}function Ft(et,yt){$e=Ee(function(){et(e.unstable_now())},yt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(et){et.callback=null},e.unstable_continueExecution=function(){pe||ce||(pe=!0,Kt(Ae))},e.unstable_forceFrameRate=function(et){0>et||125<et?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ie=0<et?Math.floor(1e3/et):5},e.unstable_getCurrentPriorityLevel=function(){return L},e.unstable_getFirstCallbackNode=function(){return a(C)},e.unstable_next=function(et){switch(L){case 1:case 2:case 3:var yt=3;break;default:yt=L}var bt=L;L=yt;try{return et()}finally{L=bt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(et,yt){switch(et){case 1:case 2:case 3:case 4:case 5:break;default:et=3}var bt=L;L=et;try{return yt()}finally{L=bt}},e.unstable_scheduleCallback=function(et,yt,bt){var Et=e.unstable_now();switch(typeof bt=="object"&&bt!==null?(bt=bt.delay,bt=typeof bt=="number"&&0<bt?Et+bt:Et):bt=Et,et){case 1:var jt=-1;break;case 2:jt=250;break;case 5:jt=1073741823;break;case 4:jt=1e4;break;default:jt=5e3}return jt=bt+jt,et={id:$++,callback:yt,priorityLevel:et,startTime:bt,expirationTime:jt,sortIndex:-1},bt>Et?(et.sortIndex=bt,t(D,et),a(C)===null&&et===a(D)&&(se?(te($e),$e=-1):se=!0,Ft(be,bt-Et))):(et.sortIndex=jt,t(C,et),pe||ce||(pe=!0,Kt(Ae))),et},e.unstable_shouldYield=Be,e.unstable_wrapCallback=function(et){var yt=L;return function(){var bt=L;L=yt;try{return et.apply(this,arguments)}finally{L=bt}}}})(cb);ub.exports=cb;var xC=ub.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wC=Pe,no=xC;function Ge(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hb=new Set,Wh={};function vl(e,t){Vu(e,t),Vu(e+"Capture",t)}function Vu(e,t){for(Wh[e]=t,e=0;e<t.length;e++)hb.add(t[e])}var Ca=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ty=Object.prototype.hasOwnProperty,bC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O1={},F1={};function SC(e){return Ty.call(F1,e)?!0:Ty.call(O1,e)?!1:bC.test(e)?F1[e]=!0:(O1[e]=!0,!1)}function TC(e,t,a,u){if(a!==null&&a.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return u?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function EC(e,t,a,u){if(t===null||typeof t>"u"||TC(e,t,a,u))return!0;if(u)return!1;if(a!==null)switch(a.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Si(e,t,a,u,c,x,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=u,this.attributeNamespace=c,this.mustUseProperty=a,this.propertyName=e,this.type=t,this.sanitizeURL=x,this.removeEmptyString=g}var Kn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Kn[e]=new Si(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Kn[t]=new Si(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Kn[e]=new Si(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Kn[e]=new Si(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Kn[e]=new Si(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Kn[e]=new Si(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Kn[e]=new Si(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Kn[e]=new Si(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Kn[e]=new Si(e,5,!1,e.toLowerCase(),null,!1,!1)});var U0=/[\-:]([a-z])/g;function V0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(U0,V0);Kn[t]=new Si(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(U0,V0);Kn[t]=new Si(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(U0,V0);Kn[t]=new Si(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Kn[e]=new Si(e,1,!1,e.toLowerCase(),null,!1,!1)});Kn.xlinkHref=new Si("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Kn[e]=new Si(e,1,!1,e.toLowerCase(),null,!0,!0)});function $0(e,t,a,u){var c=Kn.hasOwnProperty(t)?Kn[t]:null;(c!==null?c.type!==0:u||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(EC(t,a,c,u)&&(a=null),u||c===null?SC(t)&&(a===null?e.removeAttribute(t):e.setAttribute(t,""+a)):c.mustUseProperty?e[c.propertyName]=a===null?c.type===3?!1:"":a:(t=c.attributeName,u=c.attributeNamespace,a===null?e.removeAttribute(t):(c=c.type,a=c===3||c===4&&a===!0?"":""+a,u?e.setAttributeNS(u,t,a):e.setAttribute(t,a))))}var za=wC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pp=Symbol.for("react.element"),vu=Symbol.for("react.portal"),xu=Symbol.for("react.fragment"),H0=Symbol.for("react.strict_mode"),Ey=Symbol.for("react.profiler"),db=Symbol.for("react.provider"),pb=Symbol.for("react.context"),W0=Symbol.for("react.forward_ref"),ky=Symbol.for("react.suspense"),Cy=Symbol.for("react.suspense_list"),q0=Symbol.for("react.memo"),as=Symbol.for("react.lazy"),fb=Symbol.for("react.offscreen"),B1=Symbol.iterator;function fh(e){return e===null||typeof e!="object"?null:(e=B1&&e[B1]||e["@@iterator"],typeof e=="function"?e:null)}var Qr=Object.assign,Og;function Ch(e){if(Og===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Og=t&&t[1]||""}return`
`+Og+e}var Fg=!1;function Bg(e,t){if(!e||Fg)return"";Fg=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(D){var u=D}Reflect.construct(e,[],t)}else{try{t.call()}catch(D){u=D}e.call(t.prototype)}else{try{throw Error()}catch(D){u=D}e()}}catch(D){if(D&&u&&typeof D.stack=="string"){for(var c=D.stack.split(`
`),x=u.stack.split(`
`),g=c.length-1,h=x.length-1;1<=g&&0<=h&&c[g]!==x[h];)h--;for(;1<=g&&0<=h;g--,h--)if(c[g]!==x[h]){if(g!==1||h!==1)do if(g--,h--,0>h||c[g]!==x[h]){var C=`
`+c[g].replace(" at new "," at ");return e.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",e.displayName)),C}while(1<=g&&0<=h);break}}}finally{Fg=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?Ch(e):""}function kC(e){switch(e.tag){case 5:return Ch(e.type);case 16:return Ch("Lazy");case 13:return Ch("Suspense");case 19:return Ch("SuspenseList");case 0:case 2:case 15:return e=Bg(e.type,!1),e;case 11:return e=Bg(e.type.render,!1),e;case 1:return e=Bg(e.type,!0),e;default:return""}}function Py(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case xu:return"Fragment";case vu:return"Portal";case Ey:return"Profiler";case H0:return"StrictMode";case ky:return"Suspense";case Cy:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case pb:return(e.displayName||"Context")+".Consumer";case db:return(e._context.displayName||"Context")+".Provider";case W0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case q0:return t=e.displayName||null,t!==null?t:Py(e.type)||"Memo";case as:t=e._payload,e=e._init;try{return Py(e(t))}catch{}}return null}function CC(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Py(t);case 8:return t===H0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function bs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function mb(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function PC(e){var t=mb(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),u=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var c=a.get,x=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){u=""+g,x.call(this,g)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(g){u=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ip(e){e._valueTracker||(e._valueTracker=PC(e))}function gb(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),u="";return e&&(u=mb(e)?e.checked?"true":"false":e.value),e=u,e!==a?(t.setValue(e),!0):!1}function df(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Iy(e,t){var a=t.checked;return Qr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function N1(e,t){var a=t.defaultValue==null?"":t.defaultValue,u=t.checked!=null?t.checked:t.defaultChecked;a=bs(t.value!=null?t.value:a),e._wrapperState={initialChecked:u,initialValue:a,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function yb(e,t){t=t.checked,t!=null&&$0(e,"checked",t,!1)}function Ay(e,t){yb(e,t);var a=bs(t.value),u=t.type;if(a!=null)u==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(u==="submit"||u==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?My(e,t.type,a):t.hasOwnProperty("defaultValue")&&My(e,t.type,bs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function j1(e,t,a){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var u=t.type;if(!(u!=="submit"&&u!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,a||t===e.value||(e.value=t),e.defaultValue=t}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function My(e,t,a){(t!=="number"||df(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var Ph=Array.isArray;function Mu(e,t,a,u){if(e=e.options,t){t={};for(var c=0;c<a.length;c++)t["$"+a[c]]=!0;for(a=0;a<e.length;a++)c=t.hasOwnProperty("$"+e[a].value),e[a].selected!==c&&(e[a].selected=c),c&&u&&(e[a].defaultSelected=!0)}else{for(a=""+bs(a),t=null,c=0;c<e.length;c++){if(e[c].value===a){e[c].selected=!0,u&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function zy(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ge(91));return Qr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function U1(e,t){var a=t.value;if(a==null){if(a=t.children,t=t.defaultValue,a!=null){if(t!=null)throw Error(Ge(92));if(Ph(a)){if(1<a.length)throw Error(Ge(93));a=a[0]}t=a}t==null&&(t=""),a=t}e._wrapperState={initialValue:bs(a)}}function _b(e,t){var a=bs(t.value),u=bs(t.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),t.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),u!=null&&(e.defaultValue=""+u)}function V1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function vb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ly(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?vb(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ap,xb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,a,u,c){MSApp.execUnsafeLocalFunction(function(){return e(t,a,u,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ap=Ap||document.createElement("div"),Ap.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ap.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qh(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Rh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IC=["Webkit","ms","Moz","O"];Object.keys(Rh).forEach(function(e){IC.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Rh[t]=Rh[e]})});function wb(e,t,a){return t==null||typeof t=="boolean"||t===""?"":a||typeof t!="number"||t===0||Rh.hasOwnProperty(e)&&Rh[e]?(""+t).trim():t+"px"}function bb(e,t){e=e.style;for(var a in t)if(t.hasOwnProperty(a)){var u=a.indexOf("--")===0,c=wb(a,t[a],u);a==="float"&&(a="cssFloat"),u?e.setProperty(a,c):e[a]=c}}var AC=Qr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ry(e,t){if(t){if(AC[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ge(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ge(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ge(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ge(62))}}function Dy(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oy=null;function Z0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fy=null,zu=null,Lu=null;function $1(e){if(e=fd(e)){if(typeof Fy!="function")throw Error(Ge(280));var t=e.stateNode;t&&(t=om(t),Fy(e.stateNode,e.type,t))}}function Sb(e){zu?Lu?Lu.push(e):Lu=[e]:zu=e}function Tb(){if(zu){var e=zu,t=Lu;if(Lu=zu=null,$1(e),t)for(e=0;e<t.length;e++)$1(t[e])}}function Eb(e,t){return e(t)}function kb(){}var Ng=!1;function Cb(e,t,a){if(Ng)return e(t,a);Ng=!0;try{return Eb(e,t,a)}finally{Ng=!1,(zu!==null||Lu!==null)&&(kb(),Tb())}}function Zh(e,t){var a=e.stateNode;if(a===null)return null;var u=om(a);if(u===null)return null;a=u[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(e=e.type,u=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!u;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(Ge(231,t,typeof a));return a}var By=!1;if(Ca)try{var mh={};Object.defineProperty(mh,"passive",{get:function(){By=!0}}),window.addEventListener("test",mh,mh),window.removeEventListener("test",mh,mh)}catch{By=!1}function MC(e,t,a,u,c,x,g,h,C){var D=Array.prototype.slice.call(arguments,3);try{t.apply(a,D)}catch($){this.onError($)}}var Dh=!1,pf=null,ff=!1,Ny=null,zC={onError:function(e){Dh=!0,pf=e}};function LC(e,t,a,u,c,x,g,h,C){Dh=!1,pf=null,MC.apply(zC,arguments)}function RC(e,t,a,u,c,x,g,h,C){if(LC.apply(this,arguments),Dh){if(Dh){var D=pf;Dh=!1,pf=null}else throw Error(Ge(198));ff||(ff=!0,Ny=D)}}function xl(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function Pb(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function H1(e){if(xl(e)!==e)throw Error(Ge(188))}function DC(e){var t=e.alternate;if(!t){if(t=xl(e),t===null)throw Error(Ge(188));return t!==e?null:e}for(var a=e,u=t;;){var c=a.return;if(c===null)break;var x=c.alternate;if(x===null){if(u=c.return,u!==null){a=u;continue}break}if(c.child===x.child){for(x=c.child;x;){if(x===a)return H1(c),e;if(x===u)return H1(c),t;x=x.sibling}throw Error(Ge(188))}if(a.return!==u.return)a=c,u=x;else{for(var g=!1,h=c.child;h;){if(h===a){g=!0,a=c,u=x;break}if(h===u){g=!0,u=c,a=x;break}h=h.sibling}if(!g){for(h=x.child;h;){if(h===a){g=!0,a=x,u=c;break}if(h===u){g=!0,u=x,a=c;break}h=h.sibling}if(!g)throw Error(Ge(189))}}if(a.alternate!==u)throw Error(Ge(190))}if(a.tag!==3)throw Error(Ge(188));return a.stateNode.current===a?e:t}function Ib(e){return e=DC(e),e!==null?Ab(e):null}function Ab(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ab(e);if(t!==null)return t;e=e.sibling}return null}var Mb=no.unstable_scheduleCallback,W1=no.unstable_cancelCallback,OC=no.unstable_shouldYield,FC=no.unstable_requestPaint,hn=no.unstable_now,BC=no.unstable_getCurrentPriorityLevel,G0=no.unstable_ImmediatePriority,zb=no.unstable_UserBlockingPriority,mf=no.unstable_NormalPriority,NC=no.unstable_LowPriority,Lb=no.unstable_IdlePriority,tm=null,na=null;function jC(e){if(na&&typeof na.onCommitFiberRoot=="function")try{na.onCommitFiberRoot(tm,e,void 0,(e.current.flags&128)===128)}catch{}}var Bo=Math.clz32?Math.clz32:$C,UC=Math.log,VC=Math.LN2;function $C(e){return e>>>=0,e===0?32:31-(UC(e)/VC|0)|0}var Mp=64,zp=4194304;function Ih(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gf(e,t){var a=e.pendingLanes;if(a===0)return 0;var u=0,c=e.suspendedLanes,x=e.pingedLanes,g=a&268435455;if(g!==0){var h=g&~c;h!==0?u=Ih(h):(x&=g,x!==0&&(u=Ih(x)))}else g=a&~c,g!==0?u=Ih(g):x!==0&&(u=Ih(x));if(u===0)return 0;if(t!==0&&t!==u&&!(t&c)&&(c=u&-u,x=t&-t,c>=x||c===16&&(x&4194240)!==0))return t;if(u&4&&(u|=a&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=u;0<t;)a=31-Bo(t),c=1<<a,u|=e[a],t&=~c;return u}function HC(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WC(e,t){for(var a=e.suspendedLanes,u=e.pingedLanes,c=e.expirationTimes,x=e.pendingLanes;0<x;){var g=31-Bo(x),h=1<<g,C=c[g];C===-1?(!(h&a)||h&u)&&(c[g]=HC(h,t)):C<=t&&(e.expiredLanes|=h),x&=~h}}function jy(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Rb(){var e=Mp;return Mp<<=1,!(Mp&4194240)&&(Mp=64),e}function jg(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function dd(e,t,a){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Bo(t),e[t]=a}function qC(e,t){var a=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var u=e.eventTimes;for(e=e.expirationTimes;0<a;){var c=31-Bo(a),x=1<<c;t[c]=0,u[c]=-1,e[c]=-1,a&=~x}}function K0(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var u=31-Bo(a),c=1<<u;c&t|e[u]&t&&(e[u]|=t),a&=~c}}var wr=0;function Db(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ob,X0,Fb,Bb,Nb,Uy=!1,Lp=[],fs=null,ms=null,gs=null,Gh=new Map,Kh=new Map,us=[],ZC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function q1(e,t){switch(e){case"focusin":case"focusout":fs=null;break;case"dragenter":case"dragleave":ms=null;break;case"mouseover":case"mouseout":gs=null;break;case"pointerover":case"pointerout":Gh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kh.delete(t.pointerId)}}function gh(e,t,a,u,c,x){return e===null||e.nativeEvent!==x?(e={blockedOn:t,domEventName:a,eventSystemFlags:u,nativeEvent:x,targetContainers:[c]},t!==null&&(t=fd(t),t!==null&&X0(t)),e):(e.eventSystemFlags|=u,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function GC(e,t,a,u,c){switch(t){case"focusin":return fs=gh(fs,e,t,a,u,c),!0;case"dragenter":return ms=gh(ms,e,t,a,u,c),!0;case"mouseover":return gs=gh(gs,e,t,a,u,c),!0;case"pointerover":var x=c.pointerId;return Gh.set(x,gh(Gh.get(x)||null,e,t,a,u,c)),!0;case"gotpointercapture":return x=c.pointerId,Kh.set(x,gh(Kh.get(x)||null,e,t,a,u,c)),!0}return!1}function jb(e){var t=il(e.target);if(t!==null){var a=xl(t);if(a!==null){if(t=a.tag,t===13){if(t=Pb(a),t!==null){e.blockedOn=t,Nb(e.priority,function(){Fb(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Vy(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var u=new a.constructor(a.type,a);Oy=u,a.target.dispatchEvent(u),Oy=null}else return t=fd(a),t!==null&&X0(t),e.blockedOn=a,!1;t.shift()}return!0}function Z1(e,t,a){Xp(e)&&a.delete(t)}function KC(){Uy=!1,fs!==null&&Xp(fs)&&(fs=null),ms!==null&&Xp(ms)&&(ms=null),gs!==null&&Xp(gs)&&(gs=null),Gh.forEach(Z1),Kh.forEach(Z1)}function yh(e,t){e.blockedOn===t&&(e.blockedOn=null,Uy||(Uy=!0,no.unstable_scheduleCallback(no.unstable_NormalPriority,KC)))}function Xh(e){function t(c){return yh(c,e)}if(0<Lp.length){yh(Lp[0],e);for(var a=1;a<Lp.length;a++){var u=Lp[a];u.blockedOn===e&&(u.blockedOn=null)}}for(fs!==null&&yh(fs,e),ms!==null&&yh(ms,e),gs!==null&&yh(gs,e),Gh.forEach(t),Kh.forEach(t),a=0;a<us.length;a++)u=us[a],u.blockedOn===e&&(u.blockedOn=null);for(;0<us.length&&(a=us[0],a.blockedOn===null);)jb(a),a.blockedOn===null&&us.shift()}var Ru=za.ReactCurrentBatchConfig,yf=!0;function XC(e,t,a,u){var c=wr,x=Ru.transition;Ru.transition=null;try{wr=1,Y0(e,t,a,u)}finally{wr=c,Ru.transition=x}}function YC(e,t,a,u){var c=wr,x=Ru.transition;Ru.transition=null;try{wr=4,Y0(e,t,a,u)}finally{wr=c,Ru.transition=x}}function Y0(e,t,a,u){if(yf){var c=Vy(e,t,a,u);if(c===null)Xg(e,t,u,_f,a),q1(e,u);else if(GC(c,e,t,a,u))u.stopPropagation();else if(q1(e,u),t&4&&-1<ZC.indexOf(e)){for(;c!==null;){var x=fd(c);if(x!==null&&Ob(x),x=Vy(e,t,a,u),x===null&&Xg(e,t,u,_f,a),x===c)break;c=x}c!==null&&u.stopPropagation()}else Xg(e,t,u,null,a)}}var _f=null;function Vy(e,t,a,u){if(_f=null,e=Z0(u),e=il(e),e!==null)if(t=xl(e),t===null)e=null;else if(a=t.tag,a===13){if(e=Pb(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return _f=e,null}function Ub(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(BC()){case G0:return 1;case zb:return 4;case mf:case NC:return 16;case Lb:return 536870912;default:return 16}default:return 16}}var hs=null,J0=null,Yp=null;function Vb(){if(Yp)return Yp;var e,t=J0,a=t.length,u,c="value"in hs?hs.value:hs.textContent,x=c.length;for(e=0;e<a&&t[e]===c[e];e++);var g=a-e;for(u=1;u<=g&&t[a-u]===c[x-u];u++);return Yp=c.slice(e,1<u?1-u:void 0)}function Jp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Rp(){return!0}function G1(){return!1}function oo(e){function t(a,u,c,x,g){this._reactName=a,this._targetInst=c,this.type=u,this.nativeEvent=x,this.target=g,this.currentTarget=null;for(var h in e)e.hasOwnProperty(h)&&(a=e[h],this[h]=a?a(x):x[h]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Rp:G1,this.isPropagationStopped=G1,this}return Qr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Rp)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Rp)},persist:function(){},isPersistent:Rp}),t}var ic={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Q0=oo(ic),pd=Qr({},ic,{view:0,detail:0}),JC=oo(pd),Ug,Vg,_h,rm=Qr({},pd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:e_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==_h&&(_h&&e.type==="mousemove"?(Ug=e.screenX-_h.screenX,Vg=e.screenY-_h.screenY):Vg=Ug=0,_h=e),Ug)},movementY:function(e){return"movementY"in e?e.movementY:Vg}}),K1=oo(rm),QC=Qr({},rm,{dataTransfer:0}),eP=oo(QC),tP=Qr({},pd,{relatedTarget:0}),$g=oo(tP),rP=Qr({},ic,{animationName:0,elapsedTime:0,pseudoElement:0}),nP=oo(rP),iP=Qr({},ic,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),oP=oo(iP),aP=Qr({},ic,{data:0}),X1=oo(aP),sP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cP(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=uP[e])?!!t[e]:!1}function e_(){return cP}var hP=Qr({},pd,{key:function(e){if(e.key){var t=sP[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Jp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lP[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:e_,charCode:function(e){return e.type==="keypress"?Jp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),dP=oo(hP),pP=Qr({},rm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Y1=oo(pP),fP=Qr({},pd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:e_}),mP=oo(fP),gP=Qr({},ic,{propertyName:0,elapsedTime:0,pseudoElement:0}),yP=oo(gP),_P=Qr({},rm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vP=oo(_P),xP=[9,13,27,32],t_=Ca&&"CompositionEvent"in window,Oh=null;Ca&&"documentMode"in document&&(Oh=document.documentMode);var wP=Ca&&"TextEvent"in window&&!Oh,$b=Ca&&(!t_||Oh&&8<Oh&&11>=Oh),J1=" ",Q1=!1;function Hb(e,t){switch(e){case"keyup":return xP.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wb(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var wu=!1;function bP(e,t){switch(e){case"compositionend":return Wb(t);case"keypress":return t.which!==32?null:(Q1=!0,J1);case"textInput":return e=t.data,e===J1&&Q1?null:e;default:return null}}function SP(e,t){if(wu)return e==="compositionend"||!t_&&Hb(e,t)?(e=Vb(),Yp=J0=hs=null,wu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $b&&t.locale!=="ko"?null:t.data;default:return null}}var TP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ex(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!TP[e.type]:t==="textarea"}function qb(e,t,a,u){Sb(u),t=vf(t,"onChange"),0<t.length&&(a=new Q0("onChange","change",null,a,u),e.push({event:a,listeners:t}))}var Fh=null,Yh=null;function EP(e){n2(e,0)}function nm(e){var t=Tu(e);if(gb(t))return e}function kP(e,t){if(e==="change")return t}var Zb=!1;if(Ca){var Hg;if(Ca){var Wg="oninput"in document;if(!Wg){var tx=document.createElement("div");tx.setAttribute("oninput","return;"),Wg=typeof tx.oninput=="function"}Hg=Wg}else Hg=!1;Zb=Hg&&(!document.documentMode||9<document.documentMode)}function rx(){Fh&&(Fh.detachEvent("onpropertychange",Gb),Yh=Fh=null)}function Gb(e){if(e.propertyName==="value"&&nm(Yh)){var t=[];qb(t,Yh,e,Z0(e)),Cb(EP,t)}}function CP(e,t,a){e==="focusin"?(rx(),Fh=t,Yh=a,Fh.attachEvent("onpropertychange",Gb)):e==="focusout"&&rx()}function PP(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return nm(Yh)}function IP(e,t){if(e==="click")return nm(t)}function AP(e,t){if(e==="input"||e==="change")return nm(t)}function MP(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jo=typeof Object.is=="function"?Object.is:MP;function Jh(e,t){if(jo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),u=Object.keys(t);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var c=a[u];if(!Ty.call(t,c)||!jo(e[c],t[c]))return!1}return!0}function nx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ix(e,t){var a=nx(e);e=0;for(var u;a;){if(a.nodeType===3){if(u=e+a.textContent.length,e<=t&&u>=t)return{node:a,offset:t-e};e=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=nx(a)}}function Kb(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Kb(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Xb(){for(var e=window,t=df();t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=df(e.document)}return t}function r_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function zP(e){var t=Xb(),a=e.focusedElem,u=e.selectionRange;if(t!==a&&a&&a.ownerDocument&&Kb(a.ownerDocument.documentElement,a)){if(u!==null&&r_(a)){if(t=u.start,e=u.end,e===void 0&&(e=t),"selectionStart"in a)a.selectionStart=t,a.selectionEnd=Math.min(e,a.value.length);else if(e=(t=a.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=a.textContent.length,x=Math.min(u.start,c);u=u.end===void 0?x:Math.min(u.end,c),!e.extend&&x>u&&(c=u,u=x,x=c),c=ix(a,x);var g=ix(a,u);c&&g&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),x>u?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=a;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<t.length;a++)e=t[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var LP=Ca&&"documentMode"in document&&11>=document.documentMode,bu=null,$y=null,Bh=null,Hy=!1;function ox(e,t,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Hy||bu==null||bu!==df(u)||(u=bu,"selectionStart"in u&&r_(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Bh&&Jh(Bh,u)||(Bh=u,u=vf($y,"onSelect"),0<u.length&&(t=new Q0("onSelect","select",null,t,a),e.push({event:t,listeners:u}),t.target=bu)))}function Dp(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Su={animationend:Dp("Animation","AnimationEnd"),animationiteration:Dp("Animation","AnimationIteration"),animationstart:Dp("Animation","AnimationStart"),transitionend:Dp("Transition","TransitionEnd")},qg={},Yb={};Ca&&(Yb=document.createElement("div").style,"AnimationEvent"in window||(delete Su.animationend.animation,delete Su.animationiteration.animation,delete Su.animationstart.animation),"TransitionEvent"in window||delete Su.transitionend.transition);function im(e){if(qg[e])return qg[e];if(!Su[e])return e;var t=Su[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Yb)return qg[e]=t[a];return e}var Jb=im("animationend"),Qb=im("animationiteration"),e2=im("animationstart"),t2=im("transitionend"),r2=new Map,ax="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ts(e,t){r2.set(e,t),vl(t,[e])}for(var Zg=0;Zg<ax.length;Zg++){var Gg=ax[Zg],RP=Gg.toLowerCase(),DP=Gg[0].toUpperCase()+Gg.slice(1);Ts(RP,"on"+DP)}Ts(Jb,"onAnimationEnd");Ts(Qb,"onAnimationIteration");Ts(e2,"onAnimationStart");Ts("dblclick","onDoubleClick");Ts("focusin","onFocus");Ts("focusout","onBlur");Ts(t2,"onTransitionEnd");Vu("onMouseEnter",["mouseout","mouseover"]);Vu("onMouseLeave",["mouseout","mouseover"]);Vu("onPointerEnter",["pointerout","pointerover"]);Vu("onPointerLeave",["pointerout","pointerover"]);vl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vl("onBeforeInput",["compositionend","keypress","textInput","paste"]);vl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ah="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ah));function sx(e,t,a){var u=e.type||"unknown-event";e.currentTarget=a,RC(u,t,void 0,e),e.currentTarget=null}function n2(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var u=e[a],c=u.event;u=u.listeners;e:{var x=void 0;if(t)for(var g=u.length-1;0<=g;g--){var h=u[g],C=h.instance,D=h.currentTarget;if(h=h.listener,C!==x&&c.isPropagationStopped())break e;sx(c,h,D),x=C}else for(g=0;g<u.length;g++){if(h=u[g],C=h.instance,D=h.currentTarget,h=h.listener,C!==x&&c.isPropagationStopped())break e;sx(c,h,D),x=C}}}if(ff)throw e=Ny,ff=!1,Ny=null,e}function Nr(e,t){var a=t[Ky];a===void 0&&(a=t[Ky]=new Set);var u=e+"__bubble";a.has(u)||(i2(t,e,2,!1),a.add(u))}function Kg(e,t,a){var u=0;t&&(u|=4),i2(a,e,u,t)}var Op="_reactListening"+Math.random().toString(36).slice(2);function Qh(e){if(!e[Op]){e[Op]=!0,hb.forEach(function(a){a!=="selectionchange"&&(OP.has(a)||Kg(a,!1,e),Kg(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Op]||(t[Op]=!0,Kg("selectionchange",!1,t))}}function i2(e,t,a,u){switch(Ub(t)){case 1:var c=XC;break;case 4:c=YC;break;default:c=Y0}a=c.bind(null,t,a,e),c=void 0,!By||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),u?c!==void 0?e.addEventListener(t,a,{capture:!0,passive:c}):e.addEventListener(t,a,!0):c!==void 0?e.addEventListener(t,a,{passive:c}):e.addEventListener(t,a,!1)}function Xg(e,t,a,u,c){var x=u;if(!(t&1)&&!(t&2)&&u!==null)e:for(;;){if(u===null)return;var g=u.tag;if(g===3||g===4){var h=u.stateNode.containerInfo;if(h===c||h.nodeType===8&&h.parentNode===c)break;if(g===4)for(g=u.return;g!==null;){var C=g.tag;if((C===3||C===4)&&(C=g.stateNode.containerInfo,C===c||C.nodeType===8&&C.parentNode===c))return;g=g.return}for(;h!==null;){if(g=il(h),g===null)return;if(C=g.tag,C===5||C===6){u=x=g;continue e}h=h.parentNode}}u=u.return}Cb(function(){var D=x,$=Z0(a),M=[];e:{var L=r2.get(e);if(L!==void 0){var ce=Q0,pe=e;switch(e){case"keypress":if(Jp(a)===0)break e;case"keydown":case"keyup":ce=dP;break;case"focusin":pe="focus",ce=$g;break;case"focusout":pe="blur",ce=$g;break;case"beforeblur":case"afterblur":ce=$g;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=K1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=eP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=mP;break;case Jb:case Qb:case e2:ce=nP;break;case t2:ce=yP;break;case"scroll":ce=JC;break;case"wheel":ce=vP;break;case"copy":case"cut":case"paste":ce=oP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=Y1}var se=(t&4)!==0,Ee=!se&&e==="scroll",te=se?L!==null?L+"Capture":null:L;se=[];for(var H=D,ne;H!==null;){ne=H;var be=ne.stateNode;if(ne.tag===5&&be!==null&&(ne=be,te!==null&&(be=Zh(H,te),be!=null&&se.push(ed(H,be,ne)))),Ee)break;H=H.return}0<se.length&&(L=new ce(L,pe,null,a,$),M.push({event:L,listeners:se}))}}if(!(t&7)){e:{if(L=e==="mouseover"||e==="pointerover",ce=e==="mouseout"||e==="pointerout",L&&a!==Oy&&(pe=a.relatedTarget||a.fromElement)&&(il(pe)||pe[Pa]))break e;if((ce||L)&&(L=$.window===$?$:(L=$.ownerDocument)?L.defaultView||L.parentWindow:window,ce?(pe=a.relatedTarget||a.toElement,ce=D,pe=pe?il(pe):null,pe!==null&&(Ee=xl(pe),pe!==Ee||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(ce=null,pe=D),ce!==pe)){if(se=K1,be="onMouseLeave",te="onMouseEnter",H="mouse",(e==="pointerout"||e==="pointerover")&&(se=Y1,be="onPointerLeave",te="onPointerEnter",H="pointer"),Ee=ce==null?L:Tu(ce),ne=pe==null?L:Tu(pe),L=new se(be,H+"leave",ce,a,$),L.target=Ee,L.relatedTarget=ne,be=null,il($)===D&&(se=new se(te,H+"enter",pe,a,$),se.target=ne,se.relatedTarget=Ee,be=se),Ee=be,ce&&pe)t:{for(se=ce,te=pe,H=0,ne=se;ne;ne=gu(ne))H++;for(ne=0,be=te;be;be=gu(be))ne++;for(;0<H-ne;)se=gu(se),H--;for(;0<ne-H;)te=gu(te),ne--;for(;H--;){if(se===te||te!==null&&se===te.alternate)break t;se=gu(se),te=gu(te)}se=null}else se=null;ce!==null&&lx(M,L,ce,se,!1),pe!==null&&Ee!==null&&lx(M,Ee,pe,se,!0)}}e:{if(L=D?Tu(D):window,ce=L.nodeName&&L.nodeName.toLowerCase(),ce==="select"||ce==="input"&&L.type==="file")var Ae=kP;else if(ex(L))if(Zb)Ae=AP;else{Ae=PP;var le=CP}else(ce=L.nodeName)&&ce.toLowerCase()==="input"&&(L.type==="checkbox"||L.type==="radio")&&(Ae=IP);if(Ae&&(Ae=Ae(e,D))){qb(M,Ae,a,$);break e}le&&le(e,L,D),e==="focusout"&&(le=L._wrapperState)&&le.controlled&&L.type==="number"&&My(L,"number",L.value)}switch(le=D?Tu(D):window,e){case"focusin":(ex(le)||le.contentEditable==="true")&&(bu=le,$y=D,Bh=null);break;case"focusout":Bh=$y=bu=null;break;case"mousedown":Hy=!0;break;case"contextmenu":case"mouseup":case"dragend":Hy=!1,ox(M,a,$);break;case"selectionchange":if(LP)break;case"keydown":case"keyup":ox(M,a,$)}var Me;if(t_)e:{switch(e){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else wu?Hb(e,a)&&($e="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&($e="onCompositionStart");$e&&($b&&a.locale!=="ko"&&(wu||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&wu&&(Me=Vb()):(hs=$,J0="value"in hs?hs.value:hs.textContent,wu=!0)),le=vf(D,$e),0<le.length&&($e=new X1($e,e,null,a,$),M.push({event:$e,listeners:le}),Me?$e.data=Me:(Me=Wb(a),Me!==null&&($e.data=Me)))),(Me=wP?bP(e,a):SP(e,a))&&(D=vf(D,"onBeforeInput"),0<D.length&&($=new X1("onBeforeInput","beforeinput",null,a,$),M.push({event:$,listeners:D}),$.data=Me))}n2(M,t)})}function ed(e,t,a){return{instance:e,listener:t,currentTarget:a}}function vf(e,t){for(var a=t+"Capture",u=[];e!==null;){var c=e,x=c.stateNode;c.tag===5&&x!==null&&(c=x,x=Zh(e,a),x!=null&&u.unshift(ed(e,x,c)),x=Zh(e,t),x!=null&&u.push(ed(e,x,c))),e=e.return}return u}function gu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function lx(e,t,a,u,c){for(var x=t._reactName,g=[];a!==null&&a!==u;){var h=a,C=h.alternate,D=h.stateNode;if(C!==null&&C===u)break;h.tag===5&&D!==null&&(h=D,c?(C=Zh(a,x),C!=null&&g.unshift(ed(a,C,h))):c||(C=Zh(a,x),C!=null&&g.push(ed(a,C,h)))),a=a.return}g.length!==0&&e.push({event:t,listeners:g})}var FP=/\r\n?/g,BP=/\u0000|\uFFFD/g;function ux(e){return(typeof e=="string"?e:""+e).replace(FP,`
`).replace(BP,"")}function Fp(e,t,a){if(t=ux(t),ux(e)!==t&&a)throw Error(Ge(425))}function xf(){}var Wy=null,qy=null;function Zy(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Gy=typeof setTimeout=="function"?setTimeout:void 0,NP=typeof clearTimeout=="function"?clearTimeout:void 0,cx=typeof Promise=="function"?Promise:void 0,jP=typeof queueMicrotask=="function"?queueMicrotask:typeof cx<"u"?function(e){return cx.resolve(null).then(e).catch(UP)}:Gy;function UP(e){setTimeout(function(){throw e})}function Yg(e,t){var a=t,u=0;do{var c=a.nextSibling;if(e.removeChild(a),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(u===0){e.removeChild(c),Xh(t);return}u--}else a!=="$"&&a!=="$?"&&a!=="$!"||u++;a=c}while(a);Xh(t)}function ys(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function hx(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}var oc=Math.random().toString(36).slice(2),ta="__reactFiber$"+oc,td="__reactProps$"+oc,Pa="__reactContainer$"+oc,Ky="__reactEvents$"+oc,VP="__reactListeners$"+oc,$P="__reactHandles$"+oc;function il(e){var t=e[ta];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Pa]||a[ta]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=hx(e);e!==null;){if(a=e[ta])return a;e=hx(e)}return t}e=a,a=e.parentNode}return null}function fd(e){return e=e[ta]||e[Pa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Tu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ge(33))}function om(e){return e[td]||null}var Xy=[],Eu=-1;function Es(e){return{current:e}}function jr(e){0>Eu||(e.current=Xy[Eu],Xy[Eu]=null,Eu--)}function Dr(e,t){Eu++,Xy[Eu]=e.current,e.current=t}var Ss={},li=Es(Ss),Ri=Es(!1),dl=Ss;function $u(e,t){var a=e.type.contextTypes;if(!a)return Ss;var u=e.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===t)return u.__reactInternalMemoizedMaskedChildContext;var c={},x;for(x in a)c[x]=t[x];return u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Di(e){return e=e.childContextTypes,e!=null}function wf(){jr(Ri),jr(li)}function dx(e,t,a){if(li.current!==Ss)throw Error(Ge(168));Dr(li,t),Dr(Ri,a)}function o2(e,t,a){var u=e.stateNode;if(t=t.childContextTypes,typeof u.getChildContext!="function")return a;u=u.getChildContext();for(var c in u)if(!(c in t))throw Error(Ge(108,CC(e)||"Unknown",c));return Qr({},a,u)}function bf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ss,dl=li.current,Dr(li,e),Dr(Ri,Ri.current),!0}function px(e,t,a){var u=e.stateNode;if(!u)throw Error(Ge(169));a?(e=o2(e,t,dl),u.__reactInternalMemoizedMergedChildContext=e,jr(Ri),jr(li),Dr(li,e)):jr(Ri),Dr(Ri,a)}var ba=null,am=!1,Jg=!1;function a2(e){ba===null?ba=[e]:ba.push(e)}function HP(e){am=!0,a2(e)}function ks(){if(!Jg&&ba!==null){Jg=!0;var e=0,t=wr;try{var a=ba;for(wr=1;e<a.length;e++){var u=a[e];do u=u(!0);while(u!==null)}ba=null,am=!1}catch(c){throw ba!==null&&(ba=ba.slice(e+1)),Mb(G0,ks),c}finally{wr=t,Jg=!1}}return null}var ku=[],Cu=0,Sf=null,Tf=0,xo=[],wo=0,pl=null,Sa=1,Ta="";function el(e,t){ku[Cu++]=Tf,ku[Cu++]=Sf,Sf=e,Tf=t}function s2(e,t,a){xo[wo++]=Sa,xo[wo++]=Ta,xo[wo++]=pl,pl=e;var u=Sa;e=Ta;var c=32-Bo(u)-1;u&=~(1<<c),a+=1;var x=32-Bo(t)+c;if(30<x){var g=c-c%5;x=(u&(1<<g)-1).toString(32),u>>=g,c-=g,Sa=1<<32-Bo(t)+c|a<<c|u,Ta=x+e}else Sa=1<<x|a<<c|u,Ta=e}function n_(e){e.return!==null&&(el(e,1),s2(e,1,0))}function i_(e){for(;e===Sf;)Sf=ku[--Cu],ku[Cu]=null,Tf=ku[--Cu],ku[Cu]=null;for(;e===pl;)pl=xo[--wo],xo[wo]=null,Ta=xo[--wo],xo[wo]=null,Sa=xo[--wo],xo[wo]=null}var ro=null,to=null,Wr=!1,Fo=null;function l2(e,t){var a=bo(5,null,null,0);a.elementType="DELETED",a.stateNode=t,a.return=e,t=e.deletions,t===null?(e.deletions=[a],e.flags|=16):t.push(a)}function fx(e,t){switch(e.tag){case 5:var a=e.type;return t=t.nodeType!==1||a.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ro=e,to=ys(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ro=e,to=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(a=pl!==null?{id:Sa,overflow:Ta}:null,e.memoizedState={dehydrated:t,treeContext:a,retryLane:1073741824},a=bo(18,null,null,0),a.stateNode=t,a.return=e,e.child=a,ro=e,to=null,!0):!1;default:return!1}}function Yy(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Jy(e){if(Wr){var t=to;if(t){var a=t;if(!fx(e,t)){if(Yy(e))throw Error(Ge(418));t=ys(a.nextSibling);var u=ro;t&&fx(e,t)?l2(u,a):(e.flags=e.flags&-4097|2,Wr=!1,ro=e)}}else{if(Yy(e))throw Error(Ge(418));e.flags=e.flags&-4097|2,Wr=!1,ro=e}}}function mx(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ro=e}function Bp(e){if(e!==ro)return!1;if(!Wr)return mx(e),Wr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Zy(e.type,e.memoizedProps)),t&&(t=to)){if(Yy(e))throw u2(),Error(Ge(418));for(;t;)l2(e,t),t=ys(t.nextSibling)}if(mx(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ge(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(t===0){to=ys(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++}e=e.nextSibling}to=null}}else to=ro?ys(e.stateNode.nextSibling):null;return!0}function u2(){for(var e=to;e;)e=ys(e.nextSibling)}function Hu(){to=ro=null,Wr=!1}function o_(e){Fo===null?Fo=[e]:Fo.push(e)}var WP=za.ReactCurrentBatchConfig;function vh(e,t,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(Ge(309));var u=a.stateNode}if(!u)throw Error(Ge(147,e));var c=u,x=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===x?t.ref:(t=function(g){var h=c.refs;g===null?delete h[x]:h[x]=g},t._stringRef=x,t)}if(typeof e!="string")throw Error(Ge(284));if(!a._owner)throw Error(Ge(290,e))}return e}function Np(e,t){throw e=Object.prototype.toString.call(t),Error(Ge(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function gx(e){var t=e._init;return t(e._payload)}function c2(e){function t(te,H){if(e){var ne=te.deletions;ne===null?(te.deletions=[H],te.flags|=16):ne.push(H)}}function a(te,H){if(!e)return null;for(;H!==null;)t(te,H),H=H.sibling;return null}function u(te,H){for(te=new Map;H!==null;)H.key!==null?te.set(H.key,H):te.set(H.index,H),H=H.sibling;return te}function c(te,H){return te=ws(te,H),te.index=0,te.sibling=null,te}function x(te,H,ne){return te.index=ne,e?(ne=te.alternate,ne!==null?(ne=ne.index,ne<H?(te.flags|=2,H):ne):(te.flags|=2,H)):(te.flags|=1048576,H)}function g(te){return e&&te.alternate===null&&(te.flags|=2),te}function h(te,H,ne,be){return H===null||H.tag!==6?(H=oy(ne,te.mode,be),H.return=te,H):(H=c(H,ne),H.return=te,H)}function C(te,H,ne,be){var Ae=ne.type;return Ae===xu?$(te,H,ne.props.children,be,ne.key):H!==null&&(H.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===as&&gx(Ae)===H.type)?(be=c(H,ne.props),be.ref=vh(te,H,ne),be.return=te,be):(be=af(ne.type,ne.key,ne.props,null,te.mode,be),be.ref=vh(te,H,ne),be.return=te,be)}function D(te,H,ne,be){return H===null||H.tag!==4||H.stateNode.containerInfo!==ne.containerInfo||H.stateNode.implementation!==ne.implementation?(H=ay(ne,te.mode,be),H.return=te,H):(H=c(H,ne.children||[]),H.return=te,H)}function $(te,H,ne,be,Ae){return H===null||H.tag!==7?(H=cl(ne,te.mode,be,Ae),H.return=te,H):(H=c(H,ne),H.return=te,H)}function M(te,H,ne){if(typeof H=="string"&&H!==""||typeof H=="number")return H=oy(""+H,te.mode,ne),H.return=te,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Pp:return ne=af(H.type,H.key,H.props,null,te.mode,ne),ne.ref=vh(te,null,H),ne.return=te,ne;case vu:return H=ay(H,te.mode,ne),H.return=te,H;case as:var be=H._init;return M(te,be(H._payload),ne)}if(Ph(H)||fh(H))return H=cl(H,te.mode,ne,null),H.return=te,H;Np(te,H)}return null}function L(te,H,ne,be){var Ae=H!==null?H.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number")return Ae!==null?null:h(te,H,""+ne,be);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case Pp:return ne.key===Ae?C(te,H,ne,be):null;case vu:return ne.key===Ae?D(te,H,ne,be):null;case as:return Ae=ne._init,L(te,H,Ae(ne._payload),be)}if(Ph(ne)||fh(ne))return Ae!==null?null:$(te,H,ne,be,null);Np(te,ne)}return null}function ce(te,H,ne,be,Ae){if(typeof be=="string"&&be!==""||typeof be=="number")return te=te.get(ne)||null,h(H,te,""+be,Ae);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case Pp:return te=te.get(be.key===null?ne:be.key)||null,C(H,te,be,Ae);case vu:return te=te.get(be.key===null?ne:be.key)||null,D(H,te,be,Ae);case as:var le=be._init;return ce(te,H,ne,le(be._payload),Ae)}if(Ph(be)||fh(be))return te=te.get(ne)||null,$(H,te,be,Ae,null);Np(H,be)}return null}function pe(te,H,ne,be){for(var Ae=null,le=null,Me=H,$e=H=0,Ie=null;Me!==null&&$e<ne.length;$e++){Me.index>$e?(Ie=Me,Me=null):Ie=Me.sibling;var ze=L(te,Me,ne[$e],be);if(ze===null){Me===null&&(Me=Ie);break}e&&Me&&ze.alternate===null&&t(te,Me),H=x(ze,H,$e),le===null?Ae=ze:le.sibling=ze,le=ze,Me=Ie}if($e===ne.length)return a(te,Me),Wr&&el(te,$e),Ae;if(Me===null){for(;$e<ne.length;$e++)Me=M(te,ne[$e],be),Me!==null&&(H=x(Me,H,$e),le===null?Ae=Me:le.sibling=Me,le=Me);return Wr&&el(te,$e),Ae}for(Me=u(te,Me);$e<ne.length;$e++)Ie=ce(Me,te,$e,ne[$e],be),Ie!==null&&(e&&Ie.alternate!==null&&Me.delete(Ie.key===null?$e:Ie.key),H=x(Ie,H,$e),le===null?Ae=Ie:le.sibling=Ie,le=Ie);return e&&Me.forEach(function(Be){return t(te,Be)}),Wr&&el(te,$e),Ae}function se(te,H,ne,be){var Ae=fh(ne);if(typeof Ae!="function")throw Error(Ge(150));if(ne=Ae.call(ne),ne==null)throw Error(Ge(151));for(var le=Ae=null,Me=H,$e=H=0,Ie=null,ze=ne.next();Me!==null&&!ze.done;$e++,ze=ne.next()){Me.index>$e?(Ie=Me,Me=null):Ie=Me.sibling;var Be=L(te,Me,ze.value,be);if(Be===null){Me===null&&(Me=Ie);break}e&&Me&&Be.alternate===null&&t(te,Me),H=x(Be,H,$e),le===null?Ae=Be:le.sibling=Be,le=Be,Me=Ie}if(ze.done)return a(te,Me),Wr&&el(te,$e),Ae;if(Me===null){for(;!ze.done;$e++,ze=ne.next())ze=M(te,ze.value,be),ze!==null&&(H=x(ze,H,$e),le===null?Ae=ze:le.sibling=ze,le=ze);return Wr&&el(te,$e),Ae}for(Me=u(te,Me);!ze.done;$e++,ze=ne.next())ze=ce(Me,te,$e,ze.value,be),ze!==null&&(e&&ze.alternate!==null&&Me.delete(ze.key===null?$e:ze.key),H=x(ze,H,$e),le===null?Ae=ze:le.sibling=ze,le=ze);return e&&Me.forEach(function(ut){return t(te,ut)}),Wr&&el(te,$e),Ae}function Ee(te,H,ne,be){if(typeof ne=="object"&&ne!==null&&ne.type===xu&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case Pp:e:{for(var Ae=ne.key,le=H;le!==null;){if(le.key===Ae){if(Ae=ne.type,Ae===xu){if(le.tag===7){a(te,le.sibling),H=c(le,ne.props.children),H.return=te,te=H;break e}}else if(le.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===as&&gx(Ae)===le.type){a(te,le.sibling),H=c(le,ne.props),H.ref=vh(te,le,ne),H.return=te,te=H;break e}a(te,le);break}else t(te,le);le=le.sibling}ne.type===xu?(H=cl(ne.props.children,te.mode,be,ne.key),H.return=te,te=H):(be=af(ne.type,ne.key,ne.props,null,te.mode,be),be.ref=vh(te,H,ne),be.return=te,te=be)}return g(te);case vu:e:{for(le=ne.key;H!==null;){if(H.key===le)if(H.tag===4&&H.stateNode.containerInfo===ne.containerInfo&&H.stateNode.implementation===ne.implementation){a(te,H.sibling),H=c(H,ne.children||[]),H.return=te,te=H;break e}else{a(te,H);break}else t(te,H);H=H.sibling}H=ay(ne,te.mode,be),H.return=te,te=H}return g(te);case as:return le=ne._init,Ee(te,H,le(ne._payload),be)}if(Ph(ne))return pe(te,H,ne,be);if(fh(ne))return se(te,H,ne,be);Np(te,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"?(ne=""+ne,H!==null&&H.tag===6?(a(te,H.sibling),H=c(H,ne),H.return=te,te=H):(a(te,H),H=oy(ne,te.mode,be),H.return=te,te=H),g(te)):a(te,H)}return Ee}var Wu=c2(!0),h2=c2(!1),Ef=Es(null),kf=null,Pu=null,a_=null;function s_(){a_=Pu=kf=null}function l_(e){var t=Ef.current;jr(Ef),e._currentValue=t}function Qy(e,t,a){for(;e!==null;){var u=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,u!==null&&(u.childLanes|=t)):u!==null&&(u.childLanes&t)!==t&&(u.childLanes|=t),e===a)break;e=e.return}}function Du(e,t){kf=e,a_=Pu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Li=!0),e.firstContext=null)}function To(e){var t=e._currentValue;if(a_!==e)if(e={context:e,memoizedValue:t,next:null},Pu===null){if(kf===null)throw Error(Ge(308));Pu=e,kf.dependencies={lanes:0,firstContext:e}}else Pu=Pu.next=e;return t}var ol=null;function u_(e){ol===null?ol=[e]:ol.push(e)}function d2(e,t,a,u){var c=t.interleaved;return c===null?(a.next=a,u_(t)):(a.next=c.next,c.next=a),t.interleaved=a,Ia(e,u)}function Ia(e,t){e.lanes|=t;var a=e.alternate;for(a!==null&&(a.lanes|=t),a=e,e=e.return;e!==null;)e.childLanes|=t,a=e.alternate,a!==null&&(a.childLanes|=t),a=e,e=e.return;return a.tag===3?a.stateNode:null}var ss=!1;function c_(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function p2(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ea(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function _s(e,t,a){var u=e.updateQueue;if(u===null)return null;if(u=u.shared,ur&2){var c=u.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),u.pending=t,Ia(e,a)}return c=u.interleaved,c===null?(t.next=t,u_(u)):(t.next=c.next,c.next=t),u.interleaved=t,Ia(e,a)}function Qp(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194240)!==0)){var u=t.lanes;u&=e.pendingLanes,a|=u,t.lanes=a,K0(e,a)}}function yx(e,t){var a=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var c=null,x=null;if(a=a.firstBaseUpdate,a!==null){do{var g={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};x===null?c=x=g:x=x.next=g,a=a.next}while(a!==null);x===null?c=x=t:x=x.next=t}else c=x=t;a={baseState:u.baseState,firstBaseUpdate:c,lastBaseUpdate:x,shared:u.shared,effects:u.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}function Cf(e,t,a,u){var c=e.updateQueue;ss=!1;var x=c.firstBaseUpdate,g=c.lastBaseUpdate,h=c.shared.pending;if(h!==null){c.shared.pending=null;var C=h,D=C.next;C.next=null,g===null?x=D:g.next=D,g=C;var $=e.alternate;$!==null&&($=$.updateQueue,h=$.lastBaseUpdate,h!==g&&(h===null?$.firstBaseUpdate=D:h.next=D,$.lastBaseUpdate=C))}if(x!==null){var M=c.baseState;g=0,$=D=C=null,h=x;do{var L=h.lane,ce=h.eventTime;if((u&L)===L){$!==null&&($=$.next={eventTime:ce,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var pe=e,se=h;switch(L=t,ce=a,se.tag){case 1:if(pe=se.payload,typeof pe=="function"){M=pe.call(ce,M,L);break e}M=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=se.payload,L=typeof pe=="function"?pe.call(ce,M,L):pe,L==null)break e;M=Qr({},M,L);break e;case 2:ss=!0}}h.callback!==null&&h.lane!==0&&(e.flags|=64,L=c.effects,L===null?c.effects=[h]:L.push(h))}else ce={eventTime:ce,lane:L,tag:h.tag,payload:h.payload,callback:h.callback,next:null},$===null?(D=$=ce,C=M):$=$.next=ce,g|=L;if(h=h.next,h===null){if(h=c.shared.pending,h===null)break;L=h,h=L.next,L.next=null,c.lastBaseUpdate=L,c.shared.pending=null}}while(!0);if($===null&&(C=M),c.baseState=C,c.firstBaseUpdate=D,c.lastBaseUpdate=$,t=c.shared.interleaved,t!==null){c=t;do g|=c.lane,c=c.next;while(c!==t)}else x===null&&(c.shared.lanes=0);ml|=g,e.lanes=g,e.memoizedState=M}}function _x(e,t,a){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var u=e[t],c=u.callback;if(c!==null){if(u.callback=null,u=a,typeof c!="function")throw Error(Ge(191,c));c.call(u)}}}var md={},ia=Es(md),rd=Es(md),nd=Es(md);function al(e){if(e===md)throw Error(Ge(174));return e}function h_(e,t){switch(Dr(nd,t),Dr(rd,e),Dr(ia,md),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ly(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ly(t,e)}jr(ia),Dr(ia,t)}function qu(){jr(ia),jr(rd),jr(nd)}function f2(e){al(nd.current);var t=al(ia.current),a=Ly(t,e.type);t!==a&&(Dr(rd,e),Dr(ia,a))}function d_(e){rd.current===e&&(jr(ia),jr(rd))}var Yr=Es(0);function Pf(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Qg=[];function p_(){for(var e=0;e<Qg.length;e++)Qg[e]._workInProgressVersionPrimary=null;Qg.length=0}var ef=za.ReactCurrentDispatcher,ey=za.ReactCurrentBatchConfig,fl=0,Jr=null,Sn=null,Bn=null,If=!1,Nh=!1,id=0,qP=0;function oi(){throw Error(Ge(321))}function f_(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!jo(e[a],t[a]))return!1;return!0}function m_(e,t,a,u,c,x){if(fl=x,Jr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ef.current=e===null||e.memoizedState===null?XP:YP,e=a(u,c),Nh){x=0;do{if(Nh=!1,id=0,25<=x)throw Error(Ge(301));x+=1,Bn=Sn=null,t.updateQueue=null,ef.current=JP,e=a(u,c)}while(Nh)}if(ef.current=Af,t=Sn!==null&&Sn.next!==null,fl=0,Bn=Sn=Jr=null,If=!1,t)throw Error(Ge(300));return e}function g_(){var e=id!==0;return id=0,e}function ea(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bn===null?Jr.memoizedState=Bn=e:Bn=Bn.next=e,Bn}function Eo(){if(Sn===null){var e=Jr.alternate;e=e!==null?e.memoizedState:null}else e=Sn.next;var t=Bn===null?Jr.memoizedState:Bn.next;if(t!==null)Bn=t,Sn=e;else{if(e===null)throw Error(Ge(310));Sn=e,e={memoizedState:Sn.memoizedState,baseState:Sn.baseState,baseQueue:Sn.baseQueue,queue:Sn.queue,next:null},Bn===null?Jr.memoizedState=Bn=e:Bn=Bn.next=e}return Bn}function od(e,t){return typeof t=="function"?t(e):t}function ty(e){var t=Eo(),a=t.queue;if(a===null)throw Error(Ge(311));a.lastRenderedReducer=e;var u=Sn,c=u.baseQueue,x=a.pending;if(x!==null){if(c!==null){var g=c.next;c.next=x.next,x.next=g}u.baseQueue=c=x,a.pending=null}if(c!==null){x=c.next,u=u.baseState;var h=g=null,C=null,D=x;do{var $=D.lane;if((fl&$)===$)C!==null&&(C=C.next={lane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),u=D.hasEagerState?D.eagerState:e(u,D.action);else{var M={lane:$,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null};C===null?(h=C=M,g=u):C=C.next=M,Jr.lanes|=$,ml|=$}D=D.next}while(D!==null&&D!==x);C===null?g=u:C.next=h,jo(u,t.memoizedState)||(Li=!0),t.memoizedState=u,t.baseState=g,t.baseQueue=C,a.lastRenderedState=u}if(e=a.interleaved,e!==null){c=e;do x=c.lane,Jr.lanes|=x,ml|=x,c=c.next;while(c!==e)}else c===null&&(a.lanes=0);return[t.memoizedState,a.dispatch]}function ry(e){var t=Eo(),a=t.queue;if(a===null)throw Error(Ge(311));a.lastRenderedReducer=e;var u=a.dispatch,c=a.pending,x=t.memoizedState;if(c!==null){a.pending=null;var g=c=c.next;do x=e(x,g.action),g=g.next;while(g!==c);jo(x,t.memoizedState)||(Li=!0),t.memoizedState=x,t.baseQueue===null&&(t.baseState=x),a.lastRenderedState=x}return[x,u]}function m2(){}function g2(e,t){var a=Jr,u=Eo(),c=t(),x=!jo(u.memoizedState,c);if(x&&(u.memoizedState=c,Li=!0),u=u.queue,y_(v2.bind(null,a,u,e),[e]),u.getSnapshot!==t||x||Bn!==null&&Bn.memoizedState.tag&1){if(a.flags|=2048,ad(9,_2.bind(null,a,u,c,t),void 0,null),Nn===null)throw Error(Ge(349));fl&30||y2(a,t,c)}return c}function y2(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Jr.updateQueue,t===null?(t={lastEffect:null,stores:null},Jr.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function _2(e,t,a,u){t.value=a,t.getSnapshot=u,x2(t)&&w2(e)}function v2(e,t,a){return a(function(){x2(t)&&w2(e)})}function x2(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!jo(e,a)}catch{return!0}}function w2(e){var t=Ia(e,1);t!==null&&No(t,e,1,-1)}function vx(e){var t=ea();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:od,lastRenderedState:e},t.queue=e,e=e.dispatch=KP.bind(null,Jr,e),[t.memoizedState,e]}function ad(e,t,a,u){return e={tag:e,create:t,destroy:a,deps:u,next:null},t=Jr.updateQueue,t===null?(t={lastEffect:null,stores:null},Jr.updateQueue=t,t.lastEffect=e.next=e):(a=t.lastEffect,a===null?t.lastEffect=e.next=e:(u=a.next,a.next=e,e.next=u,t.lastEffect=e)),e}function b2(){return Eo().memoizedState}function tf(e,t,a,u){var c=ea();Jr.flags|=e,c.memoizedState=ad(1|t,a,void 0,u===void 0?null:u)}function sm(e,t,a,u){var c=Eo();u=u===void 0?null:u;var x=void 0;if(Sn!==null){var g=Sn.memoizedState;if(x=g.destroy,u!==null&&f_(u,g.deps)){c.memoizedState=ad(t,a,x,u);return}}Jr.flags|=e,c.memoizedState=ad(1|t,a,x,u)}function xx(e,t){return tf(8390656,8,e,t)}function y_(e,t){return sm(2048,8,e,t)}function S2(e,t){return sm(4,2,e,t)}function T2(e,t){return sm(4,4,e,t)}function E2(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function k2(e,t,a){return a=a!=null?a.concat([e]):null,sm(4,4,E2.bind(null,t,e),a)}function __(){}function C2(e,t){var a=Eo();t=t===void 0?null:t;var u=a.memoizedState;return u!==null&&t!==null&&f_(t,u[1])?u[0]:(a.memoizedState=[e,t],e)}function P2(e,t){var a=Eo();t=t===void 0?null:t;var u=a.memoizedState;return u!==null&&t!==null&&f_(t,u[1])?u[0]:(e=e(),a.memoizedState=[e,t],e)}function I2(e,t,a){return fl&21?(jo(a,t)||(a=Rb(),Jr.lanes|=a,ml|=a,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Li=!0),e.memoizedState=a)}function ZP(e,t){var a=wr;wr=a!==0&&4>a?a:4,e(!0);var u=ey.transition;ey.transition={};try{e(!1),t()}finally{wr=a,ey.transition=u}}function A2(){return Eo().memoizedState}function GP(e,t,a){var u=xs(e);if(a={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null},M2(e))z2(t,a);else if(a=d2(e,t,a,u),a!==null){var c=wi();No(a,e,u,c),L2(a,t,u)}}function KP(e,t,a){var u=xs(e),c={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null};if(M2(e))z2(t,c);else{var x=e.alternate;if(e.lanes===0&&(x===null||x.lanes===0)&&(x=t.lastRenderedReducer,x!==null))try{var g=t.lastRenderedState,h=x(g,a);if(c.hasEagerState=!0,c.eagerState=h,jo(h,g)){var C=t.interleaved;C===null?(c.next=c,u_(t)):(c.next=C.next,C.next=c),t.interleaved=c;return}}catch{}finally{}a=d2(e,t,c,u),a!==null&&(c=wi(),No(a,e,u,c),L2(a,t,u))}}function M2(e){var t=e.alternate;return e===Jr||t!==null&&t===Jr}function z2(e,t){Nh=If=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function L2(e,t,a){if(a&4194240){var u=t.lanes;u&=e.pendingLanes,a|=u,t.lanes=a,K0(e,a)}}var Af={readContext:To,useCallback:oi,useContext:oi,useEffect:oi,useImperativeHandle:oi,useInsertionEffect:oi,useLayoutEffect:oi,useMemo:oi,useReducer:oi,useRef:oi,useState:oi,useDebugValue:oi,useDeferredValue:oi,useTransition:oi,useMutableSource:oi,useSyncExternalStore:oi,useId:oi,unstable_isNewReconciler:!1},XP={readContext:To,useCallback:function(e,t){return ea().memoizedState=[e,t===void 0?null:t],e},useContext:To,useEffect:xx,useImperativeHandle:function(e,t,a){return a=a!=null?a.concat([e]):null,tf(4194308,4,E2.bind(null,t,e),a)},useLayoutEffect:function(e,t){return tf(4194308,4,e,t)},useInsertionEffect:function(e,t){return tf(4,2,e,t)},useMemo:function(e,t){var a=ea();return t=t===void 0?null:t,e=e(),a.memoizedState=[e,t],e},useReducer:function(e,t,a){var u=ea();return t=a!==void 0?a(t):t,u.memoizedState=u.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},u.queue=e,e=e.dispatch=GP.bind(null,Jr,e),[u.memoizedState,e]},useRef:function(e){var t=ea();return e={current:e},t.memoizedState=e},useState:vx,useDebugValue:__,useDeferredValue:function(e){return ea().memoizedState=e},useTransition:function(){var e=vx(!1),t=e[0];return e=ZP.bind(null,e[1]),ea().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,a){var u=Jr,c=ea();if(Wr){if(a===void 0)throw Error(Ge(407));a=a()}else{if(a=t(),Nn===null)throw Error(Ge(349));fl&30||y2(u,t,a)}c.memoizedState=a;var x={value:a,getSnapshot:t};return c.queue=x,xx(v2.bind(null,u,x,e),[e]),u.flags|=2048,ad(9,_2.bind(null,u,x,a,t),void 0,null),a},useId:function(){var e=ea(),t=Nn.identifierPrefix;if(Wr){var a=Ta,u=Sa;a=(u&~(1<<32-Bo(u)-1)).toString(32)+a,t=":"+t+"R"+a,a=id++,0<a&&(t+="H"+a.toString(32)),t+=":"}else a=qP++,t=":"+t+"r"+a.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},YP={readContext:To,useCallback:C2,useContext:To,useEffect:y_,useImperativeHandle:k2,useInsertionEffect:S2,useLayoutEffect:T2,useMemo:P2,useReducer:ty,useRef:b2,useState:function(){return ty(od)},useDebugValue:__,useDeferredValue:function(e){var t=Eo();return I2(t,Sn.memoizedState,e)},useTransition:function(){var e=ty(od)[0],t=Eo().memoizedState;return[e,t]},useMutableSource:m2,useSyncExternalStore:g2,useId:A2,unstable_isNewReconciler:!1},JP={readContext:To,useCallback:C2,useContext:To,useEffect:y_,useImperativeHandle:k2,useInsertionEffect:S2,useLayoutEffect:T2,useMemo:P2,useReducer:ry,useRef:b2,useState:function(){return ry(od)},useDebugValue:__,useDeferredValue:function(e){var t=Eo();return Sn===null?t.memoizedState=e:I2(t,Sn.memoizedState,e)},useTransition:function(){var e=ry(od)[0],t=Eo().memoizedState;return[e,t]},useMutableSource:m2,useSyncExternalStore:g2,useId:A2,unstable_isNewReconciler:!1};function Ro(e,t){if(e&&e.defaultProps){t=Qr({},t),e=e.defaultProps;for(var a in e)t[a]===void 0&&(t[a]=e[a]);return t}return t}function e0(e,t,a,u){t=e.memoizedState,a=a(u,t),a=a==null?t:Qr({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var lm={isMounted:function(e){return(e=e._reactInternals)?xl(e)===e:!1},enqueueSetState:function(e,t,a){e=e._reactInternals;var u=wi(),c=xs(e),x=Ea(u,c);x.payload=t,a!=null&&(x.callback=a),t=_s(e,x,c),t!==null&&(No(t,e,c,u),Qp(t,e,c))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var u=wi(),c=xs(e),x=Ea(u,c);x.tag=1,x.payload=t,a!=null&&(x.callback=a),t=_s(e,x,c),t!==null&&(No(t,e,c,u),Qp(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=wi(),u=xs(e),c=Ea(a,u);c.tag=2,t!=null&&(c.callback=t),t=_s(e,c,u),t!==null&&(No(t,e,u,a),Qp(t,e,u))}};function wx(e,t,a,u,c,x,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(u,x,g):t.prototype&&t.prototype.isPureReactComponent?!Jh(a,u)||!Jh(c,x):!0}function R2(e,t,a){var u=!1,c=Ss,x=t.contextType;return typeof x=="object"&&x!==null?x=To(x):(c=Di(t)?dl:li.current,u=t.contextTypes,x=(u=u!=null)?$u(e,c):Ss),t=new t(a,x),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=lm,e.stateNode=t,t._reactInternals=e,u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=x),t}function bx(e,t,a,u){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,u),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,u),t.state!==e&&lm.enqueueReplaceState(t,t.state,null)}function t0(e,t,a,u){var c=e.stateNode;c.props=a,c.state=e.memoizedState,c.refs={},c_(e);var x=t.contextType;typeof x=="object"&&x!==null?c.context=To(x):(x=Di(t)?dl:li.current,c.context=$u(e,x)),c.state=e.memoizedState,x=t.getDerivedStateFromProps,typeof x=="function"&&(e0(e,t,x,a),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&lm.enqueueReplaceState(c,c.state,null),Cf(e,a,c,u),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Zu(e,t){try{var a="",u=t;do a+=kC(u),u=u.return;while(u);var c=a}catch(x){c=`
Error generating stack: `+x.message+`
`+x.stack}return{value:e,source:t,stack:c,digest:null}}function ny(e,t,a){return{value:e,source:null,stack:a??null,digest:t??null}}function r0(e,t){try{console.error(t.value)}catch(a){setTimeout(function(){throw a})}}var QP=typeof WeakMap=="function"?WeakMap:Map;function D2(e,t,a){a=Ea(-1,a),a.tag=3,a.payload={element:null};var u=t.value;return a.callback=function(){zf||(zf=!0,d0=u),r0(e,t)},a}function O2(e,t,a){a=Ea(-1,a),a.tag=3;var u=e.type.getDerivedStateFromError;if(typeof u=="function"){var c=t.value;a.payload=function(){return u(c)},a.callback=function(){r0(e,t)}}var x=e.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(a.callback=function(){r0(e,t),typeof u!="function"&&(vs===null?vs=new Set([this]):vs.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),a}function Sx(e,t,a){var u=e.pingCache;if(u===null){u=e.pingCache=new QP;var c=new Set;u.set(t,c)}else c=u.get(t),c===void 0&&(c=new Set,u.set(t,c));c.has(a)||(c.add(a),e=p5.bind(null,e,t,a),t.then(e,e))}function Tx(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ex(e,t,a,u,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(t=Ea(-1,1),t.tag=2,_s(a,t,1))),a.lanes|=1),e)}var e5=za.ReactCurrentOwner,Li=!1;function xi(e,t,a,u){t.child=e===null?h2(t,null,a,u):Wu(t,e.child,a,u)}function kx(e,t,a,u,c){a=a.render;var x=t.ref;return Du(t,c),u=m_(e,t,a,u,x,c),a=g_(),e!==null&&!Li?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Aa(e,t,c)):(Wr&&a&&n_(t),t.flags|=1,xi(e,t,u,c),t.child)}function Cx(e,t,a,u,c){if(e===null){var x=a.type;return typeof x=="function"&&!k_(x)&&x.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(t.tag=15,t.type=x,F2(e,t,x,u,c)):(e=af(a.type,null,u,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(x=e.child,!(e.lanes&c)){var g=x.memoizedProps;if(a=a.compare,a=a!==null?a:Jh,a(g,u)&&e.ref===t.ref)return Aa(e,t,c)}return t.flags|=1,e=ws(x,u),e.ref=t.ref,e.return=t,t.child=e}function F2(e,t,a,u,c){if(e!==null){var x=e.memoizedProps;if(Jh(x,u)&&e.ref===t.ref)if(Li=!1,t.pendingProps=u=x,(e.lanes&c)!==0)e.flags&131072&&(Li=!0);else return t.lanes=e.lanes,Aa(e,t,c)}return n0(e,t,a,u,c)}function B2(e,t,a){var u=t.pendingProps,c=u.children,x=e!==null?e.memoizedState:null;if(u.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dr(Au,Qi),Qi|=a;else{if(!(a&1073741824))return e=x!==null?x.baseLanes|a:a,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Dr(Au,Qi),Qi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=x!==null?x.baseLanes:a,Dr(Au,Qi),Qi|=u}else x!==null?(u=x.baseLanes|a,t.memoizedState=null):u=a,Dr(Au,Qi),Qi|=u;return xi(e,t,c,a),t.child}function N2(e,t){var a=t.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(t.flags|=512,t.flags|=2097152)}function n0(e,t,a,u,c){var x=Di(a)?dl:li.current;return x=$u(t,x),Du(t,c),a=m_(e,t,a,u,x,c),u=g_(),e!==null&&!Li?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Aa(e,t,c)):(Wr&&u&&n_(t),t.flags|=1,xi(e,t,a,c),t.child)}function Px(e,t,a,u,c){if(Di(a)){var x=!0;bf(t)}else x=!1;if(Du(t,c),t.stateNode===null)rf(e,t),R2(t,a,u),t0(t,a,u,c),u=!0;else if(e===null){var g=t.stateNode,h=t.memoizedProps;g.props=h;var C=g.context,D=a.contextType;typeof D=="object"&&D!==null?D=To(D):(D=Di(a)?dl:li.current,D=$u(t,D));var $=a.getDerivedStateFromProps,M=typeof $=="function"||typeof g.getSnapshotBeforeUpdate=="function";M||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(h!==u||C!==D)&&bx(t,g,u,D),ss=!1;var L=t.memoizedState;g.state=L,Cf(t,u,g,c),C=t.memoizedState,h!==u||L!==C||Ri.current||ss?(typeof $=="function"&&(e0(t,a,$,u),C=t.memoizedState),(h=ss||wx(t,a,h,u,L,C,D))?(M||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=u,t.memoizedState=C),g.props=u,g.state=C,g.context=D,u=h):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),u=!1)}else{g=t.stateNode,p2(e,t),h=t.memoizedProps,D=t.type===t.elementType?h:Ro(t.type,h),g.props=D,M=t.pendingProps,L=g.context,C=a.contextType,typeof C=="object"&&C!==null?C=To(C):(C=Di(a)?dl:li.current,C=$u(t,C));var ce=a.getDerivedStateFromProps;($=typeof ce=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(h!==M||L!==C)&&bx(t,g,u,C),ss=!1,L=t.memoizedState,g.state=L,Cf(t,u,g,c);var pe=t.memoizedState;h!==M||L!==pe||Ri.current||ss?(typeof ce=="function"&&(e0(t,a,ce,u),pe=t.memoizedState),(D=ss||wx(t,a,D,u,L,pe,C)||!1)?($||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,pe,C),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,pe,C)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||h===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),t.memoizedProps=u,t.memoizedState=pe),g.props=u,g.state=pe,g.context=C,u=D):(typeof g.componentDidUpdate!="function"||h===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),u=!1)}return i0(e,t,a,u,x,c)}function i0(e,t,a,u,c,x){N2(e,t);var g=(t.flags&128)!==0;if(!u&&!g)return c&&px(t,a,!1),Aa(e,t,x);u=t.stateNode,e5.current=t;var h=g&&typeof a.getDerivedStateFromError!="function"?null:u.render();return t.flags|=1,e!==null&&g?(t.child=Wu(t,e.child,null,x),t.child=Wu(t,null,h,x)):xi(e,t,h,x),t.memoizedState=u.state,c&&px(t,a,!0),t.child}function j2(e){var t=e.stateNode;t.pendingContext?dx(e,t.pendingContext,t.pendingContext!==t.context):t.context&&dx(e,t.context,!1),h_(e,t.containerInfo)}function Ix(e,t,a,u,c){return Hu(),o_(c),t.flags|=256,xi(e,t,a,u),t.child}var o0={dehydrated:null,treeContext:null,retryLane:0};function a0(e){return{baseLanes:e,cachePool:null,transitions:null}}function U2(e,t,a){var u=t.pendingProps,c=Yr.current,x=!1,g=(t.flags&128)!==0,h;if((h=g)||(h=e!==null&&e.memoizedState===null?!1:(c&2)!==0),h?(x=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),Dr(Yr,c&1),e===null)return Jy(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(g=u.children,e=u.fallback,x?(u=t.mode,x=t.child,g={mode:"hidden",children:g},!(u&1)&&x!==null?(x.childLanes=0,x.pendingProps=g):x=hm(g,u,0,null),e=cl(e,u,a,null),x.return=t,e.return=t,x.sibling=e,t.child=x,t.child.memoizedState=a0(a),t.memoizedState=o0,e):v_(t,g));if(c=e.memoizedState,c!==null&&(h=c.dehydrated,h!==null))return t5(e,t,g,u,h,c,a);if(x){x=u.fallback,g=t.mode,c=e.child,h=c.sibling;var C={mode:"hidden",children:u.children};return!(g&1)&&t.child!==c?(u=t.child,u.childLanes=0,u.pendingProps=C,t.deletions=null):(u=ws(c,C),u.subtreeFlags=c.subtreeFlags&14680064),h!==null?x=ws(h,x):(x=cl(x,g,a,null),x.flags|=2),x.return=t,u.return=t,u.sibling=x,t.child=u,u=x,x=t.child,g=e.child.memoizedState,g=g===null?a0(a):{baseLanes:g.baseLanes|a,cachePool:null,transitions:g.transitions},x.memoizedState=g,x.childLanes=e.childLanes&~a,t.memoizedState=o0,u}return x=e.child,e=x.sibling,u=ws(x,{mode:"visible",children:u.children}),!(t.mode&1)&&(u.lanes=a),u.return=t,u.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=u,t.memoizedState=null,u}function v_(e,t){return t=hm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function jp(e,t,a,u){return u!==null&&o_(u),Wu(t,e.child,null,a),e=v_(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function t5(e,t,a,u,c,x,g){if(a)return t.flags&256?(t.flags&=-257,u=ny(Error(Ge(422))),jp(e,t,g,u)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(x=u.fallback,c=t.mode,u=hm({mode:"visible",children:u.children},c,0,null),x=cl(x,c,g,null),x.flags|=2,u.return=t,x.return=t,u.sibling=x,t.child=u,t.mode&1&&Wu(t,e.child,null,g),t.child.memoizedState=a0(g),t.memoizedState=o0,x);if(!(t.mode&1))return jp(e,t,g,null);if(c.data==="$!"){if(u=c.nextSibling&&c.nextSibling.dataset,u)var h=u.dgst;return u=h,x=Error(Ge(419)),u=ny(x,u,void 0),jp(e,t,g,u)}if(h=(g&e.childLanes)!==0,Li||h){if(u=Nn,u!==null){switch(g&-g){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(u.suspendedLanes|g)?0:c,c!==0&&c!==x.retryLane&&(x.retryLane=c,Ia(e,c),No(u,e,c,-1))}return E_(),u=ny(Error(Ge(421))),jp(e,t,g,u)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=f5.bind(null,e),c._reactRetry=t,null):(e=x.treeContext,to=ys(c.nextSibling),ro=t,Wr=!0,Fo=null,e!==null&&(xo[wo++]=Sa,xo[wo++]=Ta,xo[wo++]=pl,Sa=e.id,Ta=e.overflow,pl=t),t=v_(t,u.children),t.flags|=4096,t)}function Ax(e,t,a){e.lanes|=t;var u=e.alternate;u!==null&&(u.lanes|=t),Qy(e.return,t,a)}function iy(e,t,a,u,c){var x=e.memoizedState;x===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:c}:(x.isBackwards=t,x.rendering=null,x.renderingStartTime=0,x.last=u,x.tail=a,x.tailMode=c)}function V2(e,t,a){var u=t.pendingProps,c=u.revealOrder,x=u.tail;if(xi(e,t,u.children,a),u=Yr.current,u&2)u=u&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ax(e,a,t);else if(e.tag===19)Ax(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}u&=1}if(Dr(Yr,u),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(a=t.child,c=null;a!==null;)e=a.alternate,e!==null&&Pf(e)===null&&(c=a),a=a.sibling;a=c,a===null?(c=t.child,t.child=null):(c=a.sibling,a.sibling=null),iy(t,!1,c,a,x);break;case"backwards":for(a=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Pf(e)===null){t.child=c;break}e=c.sibling,c.sibling=a,a=c,c=e}iy(t,!0,a,null,x);break;case"together":iy(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function rf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Aa(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),ml|=t.lanes,!(a&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ge(153));if(t.child!==null){for(e=t.child,a=ws(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=ws(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function r5(e,t,a){switch(t.tag){case 3:j2(t),Hu();break;case 5:f2(t);break;case 1:Di(t.type)&&bf(t);break;case 4:h_(t,t.stateNode.containerInfo);break;case 10:var u=t.type._context,c=t.memoizedProps.value;Dr(Ef,u._currentValue),u._currentValue=c;break;case 13:if(u=t.memoizedState,u!==null)return u.dehydrated!==null?(Dr(Yr,Yr.current&1),t.flags|=128,null):a&t.child.childLanes?U2(e,t,a):(Dr(Yr,Yr.current&1),e=Aa(e,t,a),e!==null?e.sibling:null);Dr(Yr,Yr.current&1);break;case 19:if(u=(a&t.childLanes)!==0,e.flags&128){if(u)return V2(e,t,a);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Dr(Yr,Yr.current),u)break;return null;case 22:case 23:return t.lanes=0,B2(e,t,a)}return Aa(e,t,a)}var $2,s0,H2,W2;$2=function(e,t){for(var a=t.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};s0=function(){};H2=function(e,t,a,u){var c=e.memoizedProps;if(c!==u){e=t.stateNode,al(ia.current);var x=null;switch(a){case"input":c=Iy(e,c),u=Iy(e,u),x=[];break;case"select":c=Qr({},c,{value:void 0}),u=Qr({},u,{value:void 0}),x=[];break;case"textarea":c=zy(e,c),u=zy(e,u),x=[];break;default:typeof c.onClick!="function"&&typeof u.onClick=="function"&&(e.onclick=xf)}Ry(a,u);var g;a=null;for(D in c)if(!u.hasOwnProperty(D)&&c.hasOwnProperty(D)&&c[D]!=null)if(D==="style"){var h=c[D];for(g in h)h.hasOwnProperty(g)&&(a||(a={}),a[g]="")}else D!=="dangerouslySetInnerHTML"&&D!=="children"&&D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(Wh.hasOwnProperty(D)?x||(x=[]):(x=x||[]).push(D,null));for(D in u){var C=u[D];if(h=c!=null?c[D]:void 0,u.hasOwnProperty(D)&&C!==h&&(C!=null||h!=null))if(D==="style")if(h){for(g in h)!h.hasOwnProperty(g)||C&&C.hasOwnProperty(g)||(a||(a={}),a[g]="");for(g in C)C.hasOwnProperty(g)&&h[g]!==C[g]&&(a||(a={}),a[g]=C[g])}else a||(x||(x=[]),x.push(D,a)),a=C;else D==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,h=h?h.__html:void 0,C!=null&&h!==C&&(x=x||[]).push(D,C)):D==="children"?typeof C!="string"&&typeof C!="number"||(x=x||[]).push(D,""+C):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&(Wh.hasOwnProperty(D)?(C!=null&&D==="onScroll"&&Nr("scroll",e),x||h===C||(x=[])):(x=x||[]).push(D,C))}a&&(x=x||[]).push("style",a);var D=x;(t.updateQueue=D)&&(t.flags|=4)}};W2=function(e,t,a,u){a!==u&&(t.flags|=4)};function xh(e,t){if(!Wr)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null}}function ai(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,u=0;if(t)for(var c=e.child;c!==null;)a|=c.lanes|c.childLanes,u|=c.subtreeFlags&14680064,u|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)a|=c.lanes|c.childLanes,u|=c.subtreeFlags,u|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=u,e.childLanes=a,t}function n5(e,t,a){var u=t.pendingProps;switch(i_(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ai(t),null;case 1:return Di(t.type)&&wf(),ai(t),null;case 3:return u=t.stateNode,qu(),jr(Ri),jr(li),p_(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(e===null||e.child===null)&&(Bp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Fo!==null&&(m0(Fo),Fo=null))),s0(e,t),ai(t),null;case 5:d_(t);var c=al(nd.current);if(a=t.type,e!==null&&t.stateNode!=null)H2(e,t,a,u,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!u){if(t.stateNode===null)throw Error(Ge(166));return ai(t),null}if(e=al(ia.current),Bp(t)){u=t.stateNode,a=t.type;var x=t.memoizedProps;switch(u[ta]=t,u[td]=x,e=(t.mode&1)!==0,a){case"dialog":Nr("cancel",u),Nr("close",u);break;case"iframe":case"object":case"embed":Nr("load",u);break;case"video":case"audio":for(c=0;c<Ah.length;c++)Nr(Ah[c],u);break;case"source":Nr("error",u);break;case"img":case"image":case"link":Nr("error",u),Nr("load",u);break;case"details":Nr("toggle",u);break;case"input":N1(u,x),Nr("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!x.multiple},Nr("invalid",u);break;case"textarea":U1(u,x),Nr("invalid",u)}Ry(a,x),c=null;for(var g in x)if(x.hasOwnProperty(g)){var h=x[g];g==="children"?typeof h=="string"?u.textContent!==h&&(x.suppressHydrationWarning!==!0&&Fp(u.textContent,h,e),c=["children",h]):typeof h=="number"&&u.textContent!==""+h&&(x.suppressHydrationWarning!==!0&&Fp(u.textContent,h,e),c=["children",""+h]):Wh.hasOwnProperty(g)&&h!=null&&g==="onScroll"&&Nr("scroll",u)}switch(a){case"input":Ip(u),j1(u,x,!0);break;case"textarea":Ip(u),V1(u);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(u.onclick=xf)}u=c,t.updateQueue=u,u!==null&&(t.flags|=4)}else{g=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=vb(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof u.is=="string"?e=g.createElement(a,{is:u.is}):(e=g.createElement(a),a==="select"&&(g=e,u.multiple?g.multiple=!0:u.size&&(g.size=u.size))):e=g.createElementNS(e,a),e[ta]=t,e[td]=u,$2(e,t,!1,!1),t.stateNode=e;e:{switch(g=Dy(a,u),a){case"dialog":Nr("cancel",e),Nr("close",e),c=u;break;case"iframe":case"object":case"embed":Nr("load",e),c=u;break;case"video":case"audio":for(c=0;c<Ah.length;c++)Nr(Ah[c],e);c=u;break;case"source":Nr("error",e),c=u;break;case"img":case"image":case"link":Nr("error",e),Nr("load",e),c=u;break;case"details":Nr("toggle",e),c=u;break;case"input":N1(e,u),c=Iy(e,u),Nr("invalid",e);break;case"option":c=u;break;case"select":e._wrapperState={wasMultiple:!!u.multiple},c=Qr({},u,{value:void 0}),Nr("invalid",e);break;case"textarea":U1(e,u),c=zy(e,u),Nr("invalid",e);break;default:c=u}Ry(a,c),h=c;for(x in h)if(h.hasOwnProperty(x)){var C=h[x];x==="style"?bb(e,C):x==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&xb(e,C)):x==="children"?typeof C=="string"?(a!=="textarea"||C!=="")&&qh(e,C):typeof C=="number"&&qh(e,""+C):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(Wh.hasOwnProperty(x)?C!=null&&x==="onScroll"&&Nr("scroll",e):C!=null&&$0(e,x,C,g))}switch(a){case"input":Ip(e),j1(e,u,!1);break;case"textarea":Ip(e),V1(e);break;case"option":u.value!=null&&e.setAttribute("value",""+bs(u.value));break;case"select":e.multiple=!!u.multiple,x=u.value,x!=null?Mu(e,!!u.multiple,x,!1):u.defaultValue!=null&&Mu(e,!!u.multiple,u.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=xf)}switch(a){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ai(t),null;case 6:if(e&&t.stateNode!=null)W2(e,t,e.memoizedProps,u);else{if(typeof u!="string"&&t.stateNode===null)throw Error(Ge(166));if(a=al(nd.current),al(ia.current),Bp(t)){if(u=t.stateNode,a=t.memoizedProps,u[ta]=t,(x=u.nodeValue!==a)&&(e=ro,e!==null))switch(e.tag){case 3:Fp(u.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fp(u.nodeValue,a,(e.mode&1)!==0)}x&&(t.flags|=4)}else u=(a.nodeType===9?a:a.ownerDocument).createTextNode(u),u[ta]=t,t.stateNode=u}return ai(t),null;case 13:if(jr(Yr),u=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Wr&&to!==null&&t.mode&1&&!(t.flags&128))u2(),Hu(),t.flags|=98560,x=!1;else if(x=Bp(t),u!==null&&u.dehydrated!==null){if(e===null){if(!x)throw Error(Ge(318));if(x=t.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(Ge(317));x[ta]=t}else Hu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ai(t),x=!1}else Fo!==null&&(m0(Fo),Fo=null),x=!0;if(!x)return t.flags&65536?t:null}return t.flags&128?(t.lanes=a,t):(u=u!==null,u!==(e!==null&&e.memoizedState!==null)&&u&&(t.child.flags|=8192,t.mode&1&&(e===null||Yr.current&1?Tn===0&&(Tn=3):E_())),t.updateQueue!==null&&(t.flags|=4),ai(t),null);case 4:return qu(),s0(e,t),e===null&&Qh(t.stateNode.containerInfo),ai(t),null;case 10:return l_(t.type._context),ai(t),null;case 17:return Di(t.type)&&wf(),ai(t),null;case 19:if(jr(Yr),x=t.memoizedState,x===null)return ai(t),null;if(u=(t.flags&128)!==0,g=x.rendering,g===null)if(u)xh(x,!1);else{if(Tn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(g=Pf(e),g!==null){for(t.flags|=128,xh(x,!1),u=g.updateQueue,u!==null&&(t.updateQueue=u,t.flags|=4),t.subtreeFlags=0,u=a,a=t.child;a!==null;)x=a,e=u,x.flags&=14680066,g=x.alternate,g===null?(x.childLanes=0,x.lanes=e,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=g.childLanes,x.lanes=g.lanes,x.child=g.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=g.memoizedProps,x.memoizedState=g.memoizedState,x.updateQueue=g.updateQueue,x.type=g.type,e=g.dependencies,x.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return Dr(Yr,Yr.current&1|2),t.child}e=e.sibling}x.tail!==null&&hn()>Gu&&(t.flags|=128,u=!0,xh(x,!1),t.lanes=4194304)}else{if(!u)if(e=Pf(g),e!==null){if(t.flags|=128,u=!0,a=e.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),xh(x,!0),x.tail===null&&x.tailMode==="hidden"&&!g.alternate&&!Wr)return ai(t),null}else 2*hn()-x.renderingStartTime>Gu&&a!==1073741824&&(t.flags|=128,u=!0,xh(x,!1),t.lanes=4194304);x.isBackwards?(g.sibling=t.child,t.child=g):(a=x.last,a!==null?a.sibling=g:t.child=g,x.last=g)}return x.tail!==null?(t=x.tail,x.rendering=t,x.tail=t.sibling,x.renderingStartTime=hn(),t.sibling=null,a=Yr.current,Dr(Yr,u?a&1|2:a&1),t):(ai(t),null);case 22:case 23:return T_(),u=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==u&&(t.flags|=8192),u&&t.mode&1?Qi&1073741824&&(ai(t),t.subtreeFlags&6&&(t.flags|=8192)):ai(t),null;case 24:return null;case 25:return null}throw Error(Ge(156,t.tag))}function i5(e,t){switch(i_(t),t.tag){case 1:return Di(t.type)&&wf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return qu(),jr(Ri),jr(li),p_(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return d_(t),null;case 13:if(jr(Yr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ge(340));Hu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return jr(Yr),null;case 4:return qu(),null;case 10:return l_(t.type._context),null;case 22:case 23:return T_(),null;case 24:return null;default:return null}}var Up=!1,si=!1,o5=typeof WeakSet=="function"?WeakSet:Set,wt=null;function Iu(e,t){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(u){an(e,t,u)}else a.current=null}function l0(e,t,a){try{a()}catch(u){an(e,t,u)}}var Mx=!1;function a5(e,t){if(Wy=yf,e=Xb(),r_(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var c=u.anchorOffset,x=u.focusNode;u=u.focusOffset;try{a.nodeType,x.nodeType}catch{a=null;break e}var g=0,h=-1,C=-1,D=0,$=0,M=e,L=null;t:for(;;){for(var ce;M!==a||c!==0&&M.nodeType!==3||(h=g+c),M!==x||u!==0&&M.nodeType!==3||(C=g+u),M.nodeType===3&&(g+=M.nodeValue.length),(ce=M.firstChild)!==null;)L=M,M=ce;for(;;){if(M===e)break t;if(L===a&&++D===c&&(h=g),L===x&&++$===u&&(C=g),(ce=M.nextSibling)!==null)break;M=L,L=M.parentNode}M=ce}a=h===-1||C===-1?null:{start:h,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(qy={focusedElem:e,selectionRange:a},yf=!1,wt=t;wt!==null;)if(t=wt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,wt=e;else for(;wt!==null;){t=wt;try{var pe=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var se=pe.memoizedProps,Ee=pe.memoizedState,te=t.stateNode,H=te.getSnapshotBeforeUpdate(t.elementType===t.type?se:Ro(t.type,se),Ee);te.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var ne=t.stateNode.containerInfo;ne.nodeType===1?ne.textContent="":ne.nodeType===9&&ne.documentElement&&ne.removeChild(ne.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ge(163))}}catch(be){an(t,t.return,be)}if(e=t.sibling,e!==null){e.return=t.return,wt=e;break}wt=t.return}return pe=Mx,Mx=!1,pe}function jh(e,t,a){var u=t.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var c=u=u.next;do{if((c.tag&e)===e){var x=c.destroy;c.destroy=void 0,x!==void 0&&l0(t,a,x)}c=c.next}while(c!==u)}}function um(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var a=t=t.next;do{if((a.tag&e)===e){var u=a.create;a.destroy=u()}a=a.next}while(a!==t)}}function u0(e){var t=e.ref;if(t!==null){var a=e.stateNode;switch(e.tag){case 5:e=a;break;default:e=a}typeof t=="function"?t(e):t.current=e}}function q2(e){var t=e.alternate;t!==null&&(e.alternate=null,q2(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ta],delete t[td],delete t[Ky],delete t[VP],delete t[$P])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Z2(e){return e.tag===5||e.tag===3||e.tag===4}function zx(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Z2(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function c0(e,t,a){var u=e.tag;if(u===5||u===6)e=e.stateNode,t?a.nodeType===8?a.parentNode.insertBefore(e,t):a.insertBefore(e,t):(a.nodeType===8?(t=a.parentNode,t.insertBefore(e,a)):(t=a,t.appendChild(e)),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=xf));else if(u!==4&&(e=e.child,e!==null))for(c0(e,t,a),e=e.sibling;e!==null;)c0(e,t,a),e=e.sibling}function h0(e,t,a){var u=e.tag;if(u===5||u===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(u!==4&&(e=e.child,e!==null))for(h0(e,t,a),e=e.sibling;e!==null;)h0(e,t,a),e=e.sibling}var qn=null,Do=!1;function ns(e,t,a){for(a=a.child;a!==null;)G2(e,t,a),a=a.sibling}function G2(e,t,a){if(na&&typeof na.onCommitFiberUnmount=="function")try{na.onCommitFiberUnmount(tm,a)}catch{}switch(a.tag){case 5:si||Iu(a,t);case 6:var u=qn,c=Do;qn=null,ns(e,t,a),qn=u,Do=c,qn!==null&&(Do?(e=qn,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):qn.removeChild(a.stateNode));break;case 18:qn!==null&&(Do?(e=qn,a=a.stateNode,e.nodeType===8?Yg(e.parentNode,a):e.nodeType===1&&Yg(e,a),Xh(e)):Yg(qn,a.stateNode));break;case 4:u=qn,c=Do,qn=a.stateNode.containerInfo,Do=!0,ns(e,t,a),qn=u,Do=c;break;case 0:case 11:case 14:case 15:if(!si&&(u=a.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){c=u=u.next;do{var x=c,g=x.destroy;x=x.tag,g!==void 0&&(x&2||x&4)&&l0(a,t,g),c=c.next}while(c!==u)}ns(e,t,a);break;case 1:if(!si&&(Iu(a,t),u=a.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=a.memoizedProps,u.state=a.memoizedState,u.componentWillUnmount()}catch(h){an(a,t,h)}ns(e,t,a);break;case 21:ns(e,t,a);break;case 22:a.mode&1?(si=(u=si)||a.memoizedState!==null,ns(e,t,a),si=u):ns(e,t,a);break;default:ns(e,t,a)}}function Lx(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new o5),t.forEach(function(u){var c=m5.bind(null,e,u);a.has(u)||(a.add(u),u.then(c,c))})}}function Lo(e,t){var a=t.deletions;if(a!==null)for(var u=0;u<a.length;u++){var c=a[u];try{var x=e,g=t,h=g;e:for(;h!==null;){switch(h.tag){case 5:qn=h.stateNode,Do=!1;break e;case 3:qn=h.stateNode.containerInfo,Do=!0;break e;case 4:qn=h.stateNode.containerInfo,Do=!0;break e}h=h.return}if(qn===null)throw Error(Ge(160));G2(x,g,c),qn=null,Do=!1;var C=c.alternate;C!==null&&(C.return=null),c.return=null}catch(D){an(c,t,D)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)K2(t,e),t=t.sibling}function K2(e,t){var a=e.alternate,u=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Lo(t,e),Qo(e),u&4){try{jh(3,e,e.return),um(3,e)}catch(se){an(e,e.return,se)}try{jh(5,e,e.return)}catch(se){an(e,e.return,se)}}break;case 1:Lo(t,e),Qo(e),u&512&&a!==null&&Iu(a,a.return);break;case 5:if(Lo(t,e),Qo(e),u&512&&a!==null&&Iu(a,a.return),e.flags&32){var c=e.stateNode;try{qh(c,"")}catch(se){an(e,e.return,se)}}if(u&4&&(c=e.stateNode,c!=null)){var x=e.memoizedProps,g=a!==null?a.memoizedProps:x,h=e.type,C=e.updateQueue;if(e.updateQueue=null,C!==null)try{h==="input"&&x.type==="radio"&&x.name!=null&&yb(c,x),Dy(h,g);var D=Dy(h,x);for(g=0;g<C.length;g+=2){var $=C[g],M=C[g+1];$==="style"?bb(c,M):$==="dangerouslySetInnerHTML"?xb(c,M):$==="children"?qh(c,M):$0(c,$,M,D)}switch(h){case"input":Ay(c,x);break;case"textarea":_b(c,x);break;case"select":var L=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!x.multiple;var ce=x.value;ce!=null?Mu(c,!!x.multiple,ce,!1):L!==!!x.multiple&&(x.defaultValue!=null?Mu(c,!!x.multiple,x.defaultValue,!0):Mu(c,!!x.multiple,x.multiple?[]:"",!1))}c[td]=x}catch(se){an(e,e.return,se)}}break;case 6:if(Lo(t,e),Qo(e),u&4){if(e.stateNode===null)throw Error(Ge(162));c=e.stateNode,x=e.memoizedProps;try{c.nodeValue=x}catch(se){an(e,e.return,se)}}break;case 3:if(Lo(t,e),Qo(e),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Xh(t.containerInfo)}catch(se){an(e,e.return,se)}break;case 4:Lo(t,e),Qo(e);break;case 13:Lo(t,e),Qo(e),c=e.child,c.flags&8192&&(x=c.memoizedState!==null,c.stateNode.isHidden=x,!x||c.alternate!==null&&c.alternate.memoizedState!==null||(b_=hn())),u&4&&Lx(e);break;case 22:if($=a!==null&&a.memoizedState!==null,e.mode&1?(si=(D=si)||$,Lo(t,e),si=D):Lo(t,e),Qo(e),u&8192){if(D=e.memoizedState!==null,(e.stateNode.isHidden=D)&&!$&&e.mode&1)for(wt=e,$=e.child;$!==null;){for(M=wt=$;wt!==null;){switch(L=wt,ce=L.child,L.tag){case 0:case 11:case 14:case 15:jh(4,L,L.return);break;case 1:Iu(L,L.return);var pe=L.stateNode;if(typeof pe.componentWillUnmount=="function"){u=L,a=L.return;try{t=u,pe.props=t.memoizedProps,pe.state=t.memoizedState,pe.componentWillUnmount()}catch(se){an(u,a,se)}}break;case 5:Iu(L,L.return);break;case 22:if(L.memoizedState!==null){Dx(M);continue}}ce!==null?(ce.return=L,wt=ce):Dx(M)}$=$.sibling}e:for($=null,M=e;;){if(M.tag===5){if($===null){$=M;try{c=M.stateNode,D?(x=c.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(h=M.stateNode,C=M.memoizedProps.style,g=C!=null&&C.hasOwnProperty("display")?C.display:null,h.style.display=wb("display",g))}catch(se){an(e,e.return,se)}}}else if(M.tag===6){if($===null)try{M.stateNode.nodeValue=D?"":M.memoizedProps}catch(se){an(e,e.return,se)}}else if((M.tag!==22&&M.tag!==23||M.memoizedState===null||M===e)&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===e)break e;for(;M.sibling===null;){if(M.return===null||M.return===e)break e;$===M&&($=null),M=M.return}$===M&&($=null),M.sibling.return=M.return,M=M.sibling}}break;case 19:Lo(t,e),Qo(e),u&4&&Lx(e);break;case 21:break;default:Lo(t,e),Qo(e)}}function Qo(e){var t=e.flags;if(t&2){try{e:{for(var a=e.return;a!==null;){if(Z2(a)){var u=a;break e}a=a.return}throw Error(Ge(160))}switch(u.tag){case 5:var c=u.stateNode;u.flags&32&&(qh(c,""),u.flags&=-33);var x=zx(e);h0(e,x,c);break;case 3:case 4:var g=u.stateNode.containerInfo,h=zx(e);c0(e,h,g);break;default:throw Error(Ge(161))}}catch(C){an(e,e.return,C)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function s5(e,t,a){wt=e,X2(e)}function X2(e,t,a){for(var u=(e.mode&1)!==0;wt!==null;){var c=wt,x=c.child;if(c.tag===22&&u){var g=c.memoizedState!==null||Up;if(!g){var h=c.alternate,C=h!==null&&h.memoizedState!==null||si;h=Up;var D=si;if(Up=g,(si=C)&&!D)for(wt=c;wt!==null;)g=wt,C=g.child,g.tag===22&&g.memoizedState!==null?Ox(c):C!==null?(C.return=g,wt=C):Ox(c);for(;x!==null;)wt=x,X2(x),x=x.sibling;wt=c,Up=h,si=D}Rx(e)}else c.subtreeFlags&8772&&x!==null?(x.return=c,wt=x):Rx(e)}}function Rx(e){for(;wt!==null;){var t=wt;if(t.flags&8772){var a=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:si||um(5,t);break;case 1:var u=t.stateNode;if(t.flags&4&&!si)if(a===null)u.componentDidMount();else{var c=t.elementType===t.type?a.memoizedProps:Ro(t.type,a.memoizedProps);u.componentDidUpdate(c,a.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var x=t.updateQueue;x!==null&&_x(t,x,u);break;case 3:var g=t.updateQueue;if(g!==null){if(a=null,t.child!==null)switch(t.child.tag){case 5:a=t.child.stateNode;break;case 1:a=t.child.stateNode}_x(t,g,a)}break;case 5:var h=t.stateNode;if(a===null&&t.flags&4){a=h;var C=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&a.focus();break;case"img":C.src&&(a.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var D=t.alternate;if(D!==null){var $=D.memoizedState;if($!==null){var M=$.dehydrated;M!==null&&Xh(M)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ge(163))}si||t.flags&512&&u0(t)}catch(L){an(t,t.return,L)}}if(t===e){wt=null;break}if(a=t.sibling,a!==null){a.return=t.return,wt=a;break}wt=t.return}}function Dx(e){for(;wt!==null;){var t=wt;if(t===e){wt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,wt=a;break}wt=t.return}}function Ox(e){for(;wt!==null;){var t=wt;try{switch(t.tag){case 0:case 11:case 15:var a=t.return;try{um(4,t)}catch(C){an(t,a,C)}break;case 1:var u=t.stateNode;if(typeof u.componentDidMount=="function"){var c=t.return;try{u.componentDidMount()}catch(C){an(t,c,C)}}var x=t.return;try{u0(t)}catch(C){an(t,x,C)}break;case 5:var g=t.return;try{u0(t)}catch(C){an(t,g,C)}}}catch(C){an(t,t.return,C)}if(t===e){wt=null;break}var h=t.sibling;if(h!==null){h.return=t.return,wt=h;break}wt=t.return}}var l5=Math.ceil,Mf=za.ReactCurrentDispatcher,x_=za.ReactCurrentOwner,So=za.ReactCurrentBatchConfig,ur=0,Nn=null,_n=null,Gn=0,Qi=0,Au=Es(0),Tn=0,sd=null,ml=0,cm=0,w_=0,Uh=null,zi=null,b_=0,Gu=1/0,wa=null,zf=!1,d0=null,vs=null,Vp=!1,ds=null,Lf=0,Vh=0,p0=null,nf=-1,of=0;function wi(){return ur&6?hn():nf!==-1?nf:nf=hn()}function xs(e){return e.mode&1?ur&2&&Gn!==0?Gn&-Gn:WP.transition!==null?(of===0&&(of=Rb()),of):(e=wr,e!==0||(e=window.event,e=e===void 0?16:Ub(e.type)),e):1}function No(e,t,a,u){if(50<Vh)throw Vh=0,p0=null,Error(Ge(185));dd(e,a,u),(!(ur&2)||e!==Nn)&&(e===Nn&&(!(ur&2)&&(cm|=a),Tn===4&&cs(e,Gn)),Oi(e,u),a===1&&ur===0&&!(t.mode&1)&&(Gu=hn()+500,am&&ks()))}function Oi(e,t){var a=e.callbackNode;WC(e,t);var u=gf(e,e===Nn?Gn:0);if(u===0)a!==null&&W1(a),e.callbackNode=null,e.callbackPriority=0;else if(t=u&-u,e.callbackPriority!==t){if(a!=null&&W1(a),t===1)e.tag===0?HP(Fx.bind(null,e)):a2(Fx.bind(null,e)),jP(function(){!(ur&6)&&ks()}),a=null;else{switch(Db(u)){case 1:a=G0;break;case 4:a=zb;break;case 16:a=mf;break;case 536870912:a=Lb;break;default:a=mf}a=iS(a,Y2.bind(null,e))}e.callbackPriority=t,e.callbackNode=a}}function Y2(e,t){if(nf=-1,of=0,ur&6)throw Error(Ge(327));var a=e.callbackNode;if(Ou()&&e.callbackNode!==a)return null;var u=gf(e,e===Nn?Gn:0);if(u===0)return null;if(u&30||u&e.expiredLanes||t)t=Rf(e,u);else{t=u;var c=ur;ur|=2;var x=Q2();(Nn!==e||Gn!==t)&&(wa=null,Gu=hn()+500,ul(e,t));do try{h5();break}catch(h){J2(e,h)}while(!0);s_(),Mf.current=x,ur=c,_n!==null?t=0:(Nn=null,Gn=0,t=Tn)}if(t!==0){if(t===2&&(c=jy(e),c!==0&&(u=c,t=f0(e,c))),t===1)throw a=sd,ul(e,0),cs(e,u),Oi(e,hn()),a;if(t===6)cs(e,u);else{if(c=e.current.alternate,!(u&30)&&!u5(c)&&(t=Rf(e,u),t===2&&(x=jy(e),x!==0&&(u=x,t=f0(e,x))),t===1))throw a=sd,ul(e,0),cs(e,u),Oi(e,hn()),a;switch(e.finishedWork=c,e.finishedLanes=u,t){case 0:case 1:throw Error(Ge(345));case 2:tl(e,zi,wa);break;case 3:if(cs(e,u),(u&130023424)===u&&(t=b_+500-hn(),10<t)){if(gf(e,0)!==0)break;if(c=e.suspendedLanes,(c&u)!==u){wi(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Gy(tl.bind(null,e,zi,wa),t);break}tl(e,zi,wa);break;case 4:if(cs(e,u),(u&4194240)===u)break;for(t=e.eventTimes,c=-1;0<u;){var g=31-Bo(u);x=1<<g,g=t[g],g>c&&(c=g),u&=~x}if(u=c,u=hn()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*l5(u/1960))-u,10<u){e.timeoutHandle=Gy(tl.bind(null,e,zi,wa),u);break}tl(e,zi,wa);break;case 5:tl(e,zi,wa);break;default:throw Error(Ge(329))}}}return Oi(e,hn()),e.callbackNode===a?Y2.bind(null,e):null}function f0(e,t){var a=Uh;return e.current.memoizedState.isDehydrated&&(ul(e,t).flags|=256),e=Rf(e,t),e!==2&&(t=zi,zi=a,t!==null&&m0(t)),e}function m0(e){zi===null?zi=e:zi.push.apply(zi,e)}function u5(e){for(var t=e;;){if(t.flags&16384){var a=t.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var u=0;u<a.length;u++){var c=a[u],x=c.getSnapshot;c=c.value;try{if(!jo(x(),c))return!1}catch{return!1}}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function cs(e,t){for(t&=~w_,t&=~cm,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var a=31-Bo(t),u=1<<a;e[a]=-1,t&=~u}}function Fx(e){if(ur&6)throw Error(Ge(327));Ou();var t=gf(e,0);if(!(t&1))return Oi(e,hn()),null;var a=Rf(e,t);if(e.tag!==0&&a===2){var u=jy(e);u!==0&&(t=u,a=f0(e,u))}if(a===1)throw a=sd,ul(e,0),cs(e,t),Oi(e,hn()),a;if(a===6)throw Error(Ge(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,tl(e,zi,wa),Oi(e,hn()),null}function S_(e,t){var a=ur;ur|=1;try{return e(t)}finally{ur=a,ur===0&&(Gu=hn()+500,am&&ks())}}function gl(e){ds!==null&&ds.tag===0&&!(ur&6)&&Ou();var t=ur;ur|=1;var a=So.transition,u=wr;try{if(So.transition=null,wr=1,e)return e()}finally{wr=u,So.transition=a,ur=t,!(ur&6)&&ks()}}function T_(){Qi=Au.current,jr(Au)}function ul(e,t){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,NP(a)),_n!==null)for(a=_n.return;a!==null;){var u=a;switch(i_(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&wf();break;case 3:qu(),jr(Ri),jr(li),p_();break;case 5:d_(u);break;case 4:qu();break;case 13:jr(Yr);break;case 19:jr(Yr);break;case 10:l_(u.type._context);break;case 22:case 23:T_()}a=a.return}if(Nn=e,_n=e=ws(e.current,null),Gn=Qi=t,Tn=0,sd=null,w_=cm=ml=0,zi=Uh=null,ol!==null){for(t=0;t<ol.length;t++)if(a=ol[t],u=a.interleaved,u!==null){a.interleaved=null;var c=u.next,x=a.pending;if(x!==null){var g=x.next;x.next=c,u.next=g}a.pending=u}ol=null}return e}function J2(e,t){do{var a=_n;try{if(s_(),ef.current=Af,If){for(var u=Jr.memoizedState;u!==null;){var c=u.queue;c!==null&&(c.pending=null),u=u.next}If=!1}if(fl=0,Bn=Sn=Jr=null,Nh=!1,id=0,x_.current=null,a===null||a.return===null){Tn=1,sd=t,_n=null;break}e:{var x=e,g=a.return,h=a,C=t;if(t=Gn,h.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var D=C,$=h,M=$.tag;if(!($.mode&1)&&(M===0||M===11||M===15)){var L=$.alternate;L?($.updateQueue=L.updateQueue,$.memoizedState=L.memoizedState,$.lanes=L.lanes):($.updateQueue=null,$.memoizedState=null)}var ce=Tx(g);if(ce!==null){ce.flags&=-257,Ex(ce,g,h,x,t),ce.mode&1&&Sx(x,D,t),t=ce,C=D;var pe=t.updateQueue;if(pe===null){var se=new Set;se.add(C),t.updateQueue=se}else pe.add(C);break e}else{if(!(t&1)){Sx(x,D,t),E_();break e}C=Error(Ge(426))}}else if(Wr&&h.mode&1){var Ee=Tx(g);if(Ee!==null){!(Ee.flags&65536)&&(Ee.flags|=256),Ex(Ee,g,h,x,t),o_(Zu(C,h));break e}}x=C=Zu(C,h),Tn!==4&&(Tn=2),Uh===null?Uh=[x]:Uh.push(x),x=g;do{switch(x.tag){case 3:x.flags|=65536,t&=-t,x.lanes|=t;var te=D2(x,C,t);yx(x,te);break e;case 1:h=C;var H=x.type,ne=x.stateNode;if(!(x.flags&128)&&(typeof H.getDerivedStateFromError=="function"||ne!==null&&typeof ne.componentDidCatch=="function"&&(vs===null||!vs.has(ne)))){x.flags|=65536,t&=-t,x.lanes|=t;var be=O2(x,h,t);yx(x,be);break e}}x=x.return}while(x!==null)}tS(a)}catch(Ae){t=Ae,_n===a&&a!==null&&(_n=a=a.return);continue}break}while(!0)}function Q2(){var e=Mf.current;return Mf.current=Af,e===null?Af:e}function E_(){(Tn===0||Tn===3||Tn===2)&&(Tn=4),Nn===null||!(ml&268435455)&&!(cm&268435455)||cs(Nn,Gn)}function Rf(e,t){var a=ur;ur|=2;var u=Q2();(Nn!==e||Gn!==t)&&(wa=null,ul(e,t));do try{c5();break}catch(c){J2(e,c)}while(!0);if(s_(),ur=a,Mf.current=u,_n!==null)throw Error(Ge(261));return Nn=null,Gn=0,Tn}function c5(){for(;_n!==null;)eS(_n)}function h5(){for(;_n!==null&&!OC();)eS(_n)}function eS(e){var t=nS(e.alternate,e,Qi);e.memoizedProps=e.pendingProps,t===null?tS(e):_n=t,x_.current=null}function tS(e){var t=e;do{var a=t.alternate;if(e=t.return,t.flags&32768){if(a=i5(a,t),a!==null){a.flags&=32767,_n=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Tn=6,_n=null;return}}else if(a=n5(a,t,Qi),a!==null){_n=a;return}if(t=t.sibling,t!==null){_n=t;return}_n=t=e}while(t!==null);Tn===0&&(Tn=5)}function tl(e,t,a){var u=wr,c=So.transition;try{So.transition=null,wr=1,d5(e,t,a,u)}finally{So.transition=c,wr=u}return null}function d5(e,t,a,u){do Ou();while(ds!==null);if(ur&6)throw Error(Ge(327));a=e.finishedWork;var c=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(Ge(177));e.callbackNode=null,e.callbackPriority=0;var x=a.lanes|a.childLanes;if(qC(e,x),e===Nn&&(_n=Nn=null,Gn=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Vp||(Vp=!0,iS(mf,function(){return Ou(),null})),x=(a.flags&15990)!==0,a.subtreeFlags&15990||x){x=So.transition,So.transition=null;var g=wr;wr=1;var h=ur;ur|=4,x_.current=null,a5(e,a),K2(a,e),zP(qy),yf=!!Wy,qy=Wy=null,e.current=a,s5(a),FC(),ur=h,wr=g,So.transition=x}else e.current=a;if(Vp&&(Vp=!1,ds=e,Lf=c),x=e.pendingLanes,x===0&&(vs=null),jC(a.stateNode),Oi(e,hn()),t!==null)for(u=e.onRecoverableError,a=0;a<t.length;a++)c=t[a],u(c.value,{componentStack:c.stack,digest:c.digest});if(zf)throw zf=!1,e=d0,d0=null,e;return Lf&1&&e.tag!==0&&Ou(),x=e.pendingLanes,x&1?e===p0?Vh++:(Vh=0,p0=e):Vh=0,ks(),null}function Ou(){if(ds!==null){var e=Db(Lf),t=So.transition,a=wr;try{if(So.transition=null,wr=16>e?16:e,ds===null)var u=!1;else{if(e=ds,ds=null,Lf=0,ur&6)throw Error(Ge(331));var c=ur;for(ur|=4,wt=e.current;wt!==null;){var x=wt,g=x.child;if(wt.flags&16){var h=x.deletions;if(h!==null){for(var C=0;C<h.length;C++){var D=h[C];for(wt=D;wt!==null;){var $=wt;switch($.tag){case 0:case 11:case 15:jh(8,$,x)}var M=$.child;if(M!==null)M.return=$,wt=M;else for(;wt!==null;){$=wt;var L=$.sibling,ce=$.return;if(q2($),$===D){wt=null;break}if(L!==null){L.return=ce,wt=L;break}wt=ce}}}var pe=x.alternate;if(pe!==null){var se=pe.child;if(se!==null){pe.child=null;do{var Ee=se.sibling;se.sibling=null,se=Ee}while(se!==null)}}wt=x}}if(x.subtreeFlags&2064&&g!==null)g.return=x,wt=g;else e:for(;wt!==null;){if(x=wt,x.flags&2048)switch(x.tag){case 0:case 11:case 15:jh(9,x,x.return)}var te=x.sibling;if(te!==null){te.return=x.return,wt=te;break e}wt=x.return}}var H=e.current;for(wt=H;wt!==null;){g=wt;var ne=g.child;if(g.subtreeFlags&2064&&ne!==null)ne.return=g,wt=ne;else e:for(g=H;wt!==null;){if(h=wt,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:um(9,h)}}catch(Ae){an(h,h.return,Ae)}if(h===g){wt=null;break e}var be=h.sibling;if(be!==null){be.return=h.return,wt=be;break e}wt=h.return}}if(ur=c,ks(),na&&typeof na.onPostCommitFiberRoot=="function")try{na.onPostCommitFiberRoot(tm,e)}catch{}u=!0}return u}finally{wr=a,So.transition=t}}return!1}function Bx(e,t,a){t=Zu(a,t),t=D2(e,t,1),e=_s(e,t,1),t=wi(),e!==null&&(dd(e,1,t),Oi(e,t))}function an(e,t,a){if(e.tag===3)Bx(e,e,a);else for(;t!==null;){if(t.tag===3){Bx(t,e,a);break}else if(t.tag===1){var u=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(vs===null||!vs.has(u))){e=Zu(a,e),e=O2(t,e,1),t=_s(t,e,1),e=wi(),t!==null&&(dd(t,1,e),Oi(t,e));break}}t=t.return}}function p5(e,t,a){var u=e.pingCache;u!==null&&u.delete(t),t=wi(),e.pingedLanes|=e.suspendedLanes&a,Nn===e&&(Gn&a)===a&&(Tn===4||Tn===3&&(Gn&130023424)===Gn&&500>hn()-b_?ul(e,0):w_|=a),Oi(e,t)}function rS(e,t){t===0&&(e.mode&1?(t=zp,zp<<=1,!(zp&130023424)&&(zp=4194304)):t=1);var a=wi();e=Ia(e,t),e!==null&&(dd(e,t,a),Oi(e,a))}function f5(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),rS(e,a)}function m5(e,t){var a=0;switch(e.tag){case 13:var u=e.stateNode,c=e.memoizedState;c!==null&&(a=c.retryLane);break;case 19:u=e.stateNode;break;default:throw Error(Ge(314))}u!==null&&u.delete(t),rS(e,a)}var nS;nS=function(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ri.current)Li=!0;else{if(!(e.lanes&a)&&!(t.flags&128))return Li=!1,r5(e,t,a);Li=!!(e.flags&131072)}else Li=!1,Wr&&t.flags&1048576&&s2(t,Tf,t.index);switch(t.lanes=0,t.tag){case 2:var u=t.type;rf(e,t),e=t.pendingProps;var c=$u(t,li.current);Du(t,a),c=m_(null,t,u,e,c,a);var x=g_();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(u)?(x=!0,bf(t)):x=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c_(t),c.updater=lm,t.stateNode=c,c._reactInternals=t,t0(t,u,e,a),t=i0(null,t,u,!0,x,a)):(t.tag=0,Wr&&x&&n_(t),xi(null,t,c,a),t=t.child),t;case 16:u=t.elementType;e:{switch(rf(e,t),e=t.pendingProps,c=u._init,u=c(u._payload),t.type=u,c=t.tag=y5(u),e=Ro(u,e),c){case 0:t=n0(null,t,u,e,a);break e;case 1:t=Px(null,t,u,e,a);break e;case 11:t=kx(null,t,u,e,a);break e;case 14:t=Cx(null,t,u,Ro(u.type,e),a);break e}throw Error(Ge(306,u,""))}return t;case 0:return u=t.type,c=t.pendingProps,c=t.elementType===u?c:Ro(u,c),n0(e,t,u,c,a);case 1:return u=t.type,c=t.pendingProps,c=t.elementType===u?c:Ro(u,c),Px(e,t,u,c,a);case 3:e:{if(j2(t),e===null)throw Error(Ge(387));u=t.pendingProps,x=t.memoizedState,c=x.element,p2(e,t),Cf(t,u,null,a);var g=t.memoizedState;if(u=g.element,x.isDehydrated)if(x={element:u,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=x,t.memoizedState=x,t.flags&256){c=Zu(Error(Ge(423)),t),t=Ix(e,t,u,a,c);break e}else if(u!==c){c=Zu(Error(Ge(424)),t),t=Ix(e,t,u,a,c);break e}else for(to=ys(t.stateNode.containerInfo.firstChild),ro=t,Wr=!0,Fo=null,a=h2(t,null,u,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Hu(),u===c){t=Aa(e,t,a);break e}xi(e,t,u,a)}t=t.child}return t;case 5:return f2(t),e===null&&Jy(t),u=t.type,c=t.pendingProps,x=e!==null?e.memoizedProps:null,g=c.children,Zy(u,c)?g=null:x!==null&&Zy(u,x)&&(t.flags|=32),N2(e,t),xi(e,t,g,a),t.child;case 6:return e===null&&Jy(t),null;case 13:return U2(e,t,a);case 4:return h_(t,t.stateNode.containerInfo),u=t.pendingProps,e===null?t.child=Wu(t,null,u,a):xi(e,t,u,a),t.child;case 11:return u=t.type,c=t.pendingProps,c=t.elementType===u?c:Ro(u,c),kx(e,t,u,c,a);case 7:return xi(e,t,t.pendingProps,a),t.child;case 8:return xi(e,t,t.pendingProps.children,a),t.child;case 12:return xi(e,t,t.pendingProps.children,a),t.child;case 10:e:{if(u=t.type._context,c=t.pendingProps,x=t.memoizedProps,g=c.value,Dr(Ef,u._currentValue),u._currentValue=g,x!==null)if(jo(x.value,g)){if(x.children===c.children&&!Ri.current){t=Aa(e,t,a);break e}}else for(x=t.child,x!==null&&(x.return=t);x!==null;){var h=x.dependencies;if(h!==null){g=x.child;for(var C=h.firstContext;C!==null;){if(C.context===u){if(x.tag===1){C=Ea(-1,a&-a),C.tag=2;var D=x.updateQueue;if(D!==null){D=D.shared;var $=D.pending;$===null?C.next=C:(C.next=$.next,$.next=C),D.pending=C}}x.lanes|=a,C=x.alternate,C!==null&&(C.lanes|=a),Qy(x.return,a,t),h.lanes|=a;break}C=C.next}}else if(x.tag===10)g=x.type===t.type?null:x.child;else if(x.tag===18){if(g=x.return,g===null)throw Error(Ge(341));g.lanes|=a,h=g.alternate,h!==null&&(h.lanes|=a),Qy(g,a,t),g=x.sibling}else g=x.child;if(g!==null)g.return=x;else for(g=x;g!==null;){if(g===t){g=null;break}if(x=g.sibling,x!==null){x.return=g.return,g=x;break}g=g.return}x=g}xi(e,t,c.children,a),t=t.child}return t;case 9:return c=t.type,u=t.pendingProps.children,Du(t,a),c=To(c),u=u(c),t.flags|=1,xi(e,t,u,a),t.child;case 14:return u=t.type,c=Ro(u,t.pendingProps),c=Ro(u.type,c),Cx(e,t,u,c,a);case 15:return F2(e,t,t.type,t.pendingProps,a);case 17:return u=t.type,c=t.pendingProps,c=t.elementType===u?c:Ro(u,c),rf(e,t),t.tag=1,Di(u)?(e=!0,bf(t)):e=!1,Du(t,a),R2(t,u,c),t0(t,u,c,a),i0(null,t,u,!0,e,a);case 19:return V2(e,t,a);case 22:return B2(e,t,a)}throw Error(Ge(156,t.tag))};function iS(e,t){return Mb(e,t)}function g5(e,t,a,u){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bo(e,t,a,u){return new g5(e,t,a,u)}function k_(e){return e=e.prototype,!(!e||!e.isReactComponent)}function y5(e){if(typeof e=="function")return k_(e)?1:0;if(e!=null){if(e=e.$$typeof,e===W0)return 11;if(e===q0)return 14}return 2}function ws(e,t){var a=e.alternate;return a===null?(a=bo(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function af(e,t,a,u,c,x){var g=2;if(u=e,typeof e=="function")k_(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case xu:return cl(a.children,c,x,t);case H0:g=8,c|=8;break;case Ey:return e=bo(12,a,t,c|2),e.elementType=Ey,e.lanes=x,e;case ky:return e=bo(13,a,t,c),e.elementType=ky,e.lanes=x,e;case Cy:return e=bo(19,a,t,c),e.elementType=Cy,e.lanes=x,e;case fb:return hm(a,c,x,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case db:g=10;break e;case pb:g=9;break e;case W0:g=11;break e;case q0:g=14;break e;case as:g=16,u=null;break e}throw Error(Ge(130,e==null?e:typeof e,""))}return t=bo(g,a,t,c),t.elementType=e,t.type=u,t.lanes=x,t}function cl(e,t,a,u){return e=bo(7,e,u,t),e.lanes=a,e}function hm(e,t,a,u){return e=bo(22,e,u,t),e.elementType=fb,e.lanes=a,e.stateNode={isHidden:!1},e}function oy(e,t,a){return e=bo(6,e,null,t),e.lanes=a,e}function ay(e,t,a){return t=bo(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function _5(e,t,a,u,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jg(0),this.expirationTimes=jg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jg(0),this.identifierPrefix=u,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function C_(e,t,a,u,c,x,g,h,C){return e=new _5(e,t,a,h,C),t===1?(t=1,x===!0&&(t|=8)):t=0,x=bo(3,null,null,t),e.current=x,x.stateNode=e,x.memoizedState={element:u,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},c_(x),e}function v5(e,t,a){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vu,key:u==null?null:""+u,children:e,containerInfo:t,implementation:a}}function oS(e){if(!e)return Ss;e=e._reactInternals;e:{if(xl(e)!==e||e.tag!==1)throw Error(Ge(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ge(171))}if(e.tag===1){var a=e.type;if(Di(a))return o2(e,a,t)}return t}function aS(e,t,a,u,c,x,g,h,C){return e=C_(a,u,!0,e,c,x,g,h,C),e.context=oS(null),a=e.current,u=wi(),c=xs(a),x=Ea(u,c),x.callback=t??null,_s(a,x,c),e.current.lanes=c,dd(e,c,u),Oi(e,u),e}function dm(e,t,a,u){var c=t.current,x=wi(),g=xs(c);return a=oS(a),t.context===null?t.context=a:t.pendingContext=a,t=Ea(x,g),t.payload={element:e},u=u===void 0?null:u,u!==null&&(t.callback=u),e=_s(c,t,g),e!==null&&(No(e,c,g,x),Qp(e,c,g)),g}function Df(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Nx(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function P_(e,t){Nx(e,t),(e=e.alternate)&&Nx(e,t)}function x5(){return null}var sS=typeof reportError=="function"?reportError:function(e){console.error(e)};function I_(e){this._internalRoot=e}pm.prototype.render=I_.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ge(409));dm(e,t,null,null)};pm.prototype.unmount=I_.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;gl(function(){dm(null,e,null,null)}),t[Pa]=null}};function pm(e){this._internalRoot=e}pm.prototype.unstable_scheduleHydration=function(e){if(e){var t=Bb();e={blockedOn:null,target:e,priority:t};for(var a=0;a<us.length&&t!==0&&t<us[a].priority;a++);us.splice(a,0,e),a===0&&jb(e)}};function A_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function jx(){}function w5(e,t,a,u,c){if(c){if(typeof u=="function"){var x=u;u=function(){var D=Df(g);x.call(D)}}var g=aS(t,u,e,0,null,!1,!1,"",jx);return e._reactRootContainer=g,e[Pa]=g.current,Qh(e.nodeType===8?e.parentNode:e),gl(),g}for(;c=e.lastChild;)e.removeChild(c);if(typeof u=="function"){var h=u;u=function(){var D=Df(C);h.call(D)}}var C=C_(e,0,!1,null,null,!1,!1,"",jx);return e._reactRootContainer=C,e[Pa]=C.current,Qh(e.nodeType===8?e.parentNode:e),gl(function(){dm(t,C,a,u)}),C}function mm(e,t,a,u,c){var x=a._reactRootContainer;if(x){var g=x;if(typeof c=="function"){var h=c;c=function(){var C=Df(g);h.call(C)}}dm(t,g,e,c)}else g=w5(a,t,e,c,u);return Df(g)}Ob=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var a=Ih(t.pendingLanes);a!==0&&(K0(t,a|1),Oi(t,hn()),!(ur&6)&&(Gu=hn()+500,ks()))}break;case 13:gl(function(){var u=Ia(e,1);if(u!==null){var c=wi();No(u,e,1,c)}}),P_(e,1)}};X0=function(e){if(e.tag===13){var t=Ia(e,134217728);if(t!==null){var a=wi();No(t,e,134217728,a)}P_(e,134217728)}};Fb=function(e){if(e.tag===13){var t=xs(e),a=Ia(e,t);if(a!==null){var u=wi();No(a,e,t,u)}P_(e,t)}};Bb=function(){return wr};Nb=function(e,t){var a=wr;try{return wr=e,t()}finally{wr=a}};Fy=function(e,t,a){switch(t){case"input":if(Ay(e,a),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<a.length;t++){var u=a[t];if(u!==e&&u.form===e.form){var c=om(u);if(!c)throw Error(Ge(90));gb(u),Ay(u,c)}}}break;case"textarea":_b(e,a);break;case"select":t=a.value,t!=null&&Mu(e,!!a.multiple,t,!1)}};Eb=S_;kb=gl;var b5={usingClientEntryPoint:!1,Events:[fd,Tu,om,Sb,Tb,S_]},wh={findFiberByHostInstance:il,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},S5={bundleType:wh.bundleType,version:wh.version,rendererPackageName:wh.rendererPackageName,rendererConfig:wh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:za.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ib(e),e===null?null:e.stateNode},findFiberByHostInstance:wh.findFiberByHostInstance||x5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$p.isDisabled&&$p.supportsFiber)try{tm=$p.inject(S5),na=$p}catch{}}io.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b5;io.createPortal=function(e,t){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A_(t))throw Error(Ge(200));return v5(e,t,null,a)};io.createRoot=function(e,t){if(!A_(e))throw Error(Ge(299));var a=!1,u="",c=sS;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(u=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=C_(e,1,!1,null,null,a,!1,u,c),e[Pa]=t.current,Qh(e.nodeType===8?e.parentNode:e),new I_(t)};io.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ge(188)):(e=Object.keys(e).join(","),Error(Ge(268,e)));return e=Ib(t),e=e===null?null:e.stateNode,e};io.flushSync=function(e){return gl(e)};io.hydrate=function(e,t,a){if(!fm(t))throw Error(Ge(200));return mm(null,e,t,!0,a)};io.hydrateRoot=function(e,t,a){if(!A_(e))throw Error(Ge(405));var u=a!=null&&a.hydratedSources||null,c=!1,x="",g=sS;if(a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(x=a.identifierPrefix),a.onRecoverableError!==void 0&&(g=a.onRecoverableError)),t=aS(t,null,e,1,a??null,c,!1,x,g),e[Pa]=t.current,Qh(e),u)for(e=0;e<u.length;e++)a=u[e],c=a._getVersion,c=c(a._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[a,c]:t.mutableSourceEagerHydrationData.push(a,c);return new pm(t)};io.render=function(e,t,a){if(!fm(t))throw Error(Ge(200));return mm(null,e,t,!1,a)};io.unmountComponentAtNode=function(e){if(!fm(e))throw Error(Ge(40));return e._reactRootContainer?(gl(function(){mm(null,null,e,!1,function(){e._reactRootContainer=null,e[Pa]=null})}),!0):!1};io.unstable_batchedUpdates=S_;io.unstable_renderSubtreeIntoContainer=function(e,t,a,u){if(!fm(a))throw Error(Ge(200));if(e==null||e._reactInternals===void 0)throw Error(Ge(38));return mm(e,t,a,!1,u)};io.version="18.3.1-next-f1338f8080-20240426";function lS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lS)}catch(e){console.error(e)}}lS(),lb.exports=io;var M_=lb.exports;const uS=rc(M_),T5=Xw({__proto__:null,default:uS},[M_]);var Ux=M_;Sy.createRoot=Ux.createRoot,Sy.hydrateRoot=Ux.hydrateRoot;/**
 * @remix-run/router v1.17.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xr(){return Xr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u])}return e},Xr.apply(this,arguments)}var yn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(yn||(yn={}));const Vx="popstate";function E5(e){e===void 0&&(e={});function t(u,c){let{pathname:x,search:g,hash:h}=u.location;return ld("",{pathname:x,search:g,hash:h},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function a(u,c){return typeof c=="string"?c:yl(c)}return C5(t,a,null,e)}function Zt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ku(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function k5(){return Math.random().toString(36).substr(2,8)}function $x(e,t){return{usr:e.state,key:e.key,idx:t}}function ld(e,t,a,u){return a===void 0&&(a=null),Xr({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Cs(t):t,{state:a,key:t&&t.key||u||k5()})}function yl(e){let{pathname:t="/",search:a="",hash:u=""}=e;return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),u&&u!=="#"&&(t+=u.charAt(0)==="#"?u:"#"+u),t}function Cs(e){let t={};if(e){let a=e.indexOf("#");a>=0&&(t.hash=e.substr(a),e=e.substr(0,a));let u=e.indexOf("?");u>=0&&(t.search=e.substr(u),e=e.substr(0,u)),e&&(t.pathname=e)}return t}function C5(e,t,a,u){u===void 0&&(u={});let{window:c=document.defaultView,v5Compat:x=!1}=u,g=c.history,h=yn.Pop,C=null,D=$();D==null&&(D=0,g.replaceState(Xr({},g.state,{idx:D}),""));function $(){return(g.state||{idx:null}).idx}function M(){h=yn.Pop;let Ee=$(),te=Ee==null?null:Ee-D;D=Ee,C&&C({action:h,location:se.location,delta:te})}function L(Ee,te){h=yn.Push;let H=ld(se.location,Ee,te);D=$()+1;let ne=$x(H,D),be=se.createHref(H);try{g.pushState(ne,"",be)}catch(Ae){if(Ae instanceof DOMException&&Ae.name==="DataCloneError")throw Ae;c.location.assign(be)}x&&C&&C({action:h,location:se.location,delta:1})}function ce(Ee,te){h=yn.Replace;let H=ld(se.location,Ee,te);D=$();let ne=$x(H,D),be=se.createHref(H);g.replaceState(ne,"",be),x&&C&&C({action:h,location:se.location,delta:0})}function pe(Ee){let te=c.location.origin!=="null"?c.location.origin:c.location.href,H=typeof Ee=="string"?Ee:yl(Ee);return H=H.replace(/ $/,"%20"),Zt(te,"No window.location.(origin|href) available to create URL for href: "+H),new URL(H,te)}let se={get action(){return h},get location(){return e(c,g)},listen(Ee){if(C)throw new Error("A history only accepts one active listener");return c.addEventListener(Vx,M),C=Ee,()=>{c.removeEventListener(Vx,M),C=null}},createHref(Ee){return t(c,Ee)},createURL:pe,encodeLocation(Ee){let te=pe(Ee);return{pathname:te.pathname,search:te.search,hash:te.hash}},push:L,replace:ce,go(Ee){return g.go(Ee)}};return se}var Rr;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Rr||(Rr={}));const P5=new Set(["lazy","caseSensitive","path","id","index","children"]);function I5(e){return e.index===!0}function ud(e,t,a,u){return a===void 0&&(a=[]),u===void 0&&(u={}),e.map((c,x)=>{let g=[...a,String(x)],h=typeof c.id=="string"?c.id:g.join("-");if(Zt(c.index!==!0||!c.children,"Cannot specify children on an index route"),Zt(!u[h],'Found a route id collision on id "'+h+`".  Route id's must be globally unique within Data Router usages`),I5(c)){let C=Xr({},c,t(c),{id:h});return u[h]=C,C}else{let C=Xr({},c,t(c),{id:h,children:void 0});return u[h]=C,c.children&&(C.children=ud(c.children,t,g,u)),C}})}function nl(e,t,a){return a===void 0&&(a="/"),sf(e,t,a,!1)}function sf(e,t,a,u){let c=typeof t=="string"?Cs(t):t,x=Ma(c.pathname||"/",a);if(x==null)return null;let g=cS(e);M5(g);let h=null;for(let C=0;h==null&&C<g.length;++C){let D=V5(x);h=j5(g[C],D,u)}return h}function A5(e,t){let{route:a,pathname:u,params:c}=e;return{id:a.id,pathname:u,params:c,data:t[a.id],handle:a.handle}}function cS(e,t,a,u){t===void 0&&(t=[]),a===void 0&&(a=[]),u===void 0&&(u="");let c=(x,g,h)=>{let C={relativePath:h===void 0?x.path||"":h,caseSensitive:x.caseSensitive===!0,childrenIndex:g,route:x};C.relativePath.startsWith("/")&&(Zt(C.relativePath.startsWith(u),'Absolute route path "'+C.relativePath+'" nested under path '+('"'+u+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),C.relativePath=C.relativePath.slice(u.length));let D=ka([u,C.relativePath]),$=a.concat(C);x.children&&x.children.length>0&&(Zt(x.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+D+'".')),cS(x.children,t,$,D)),!(x.path==null&&!x.index)&&t.push({path:D,score:B5(D,x.index),routesMeta:$})};return e.forEach((x,g)=>{var h;if(x.path===""||!((h=x.path)!=null&&h.includes("?")))c(x,g);else for(let C of hS(x.path))c(x,g,C)}),t}function hS(e){let t=e.split("/");if(t.length===0)return[];let[a,...u]=t,c=a.endsWith("?"),x=a.replace(/\?$/,"");if(u.length===0)return c?[x,""]:[x];let g=hS(u.join("/")),h=[];return h.push(...g.map(C=>C===""?x:[x,C].join("/"))),c&&h.push(...g),h.map(C=>e.startsWith("/")&&C===""?"/":C)}function M5(e){e.sort((t,a)=>t.score!==a.score?a.score-t.score:N5(t.routesMeta.map(u=>u.childrenIndex),a.routesMeta.map(u=>u.childrenIndex)))}const z5=/^:[\w-]+$/,L5=3,R5=2,D5=1,O5=10,F5=-2,Hx=e=>e==="*";function B5(e,t){let a=e.split("/"),u=a.length;return a.some(Hx)&&(u+=F5),t&&(u+=R5),a.filter(c=>!Hx(c)).reduce((c,x)=>c+(z5.test(x)?L5:x===""?D5:O5),u)}function N5(e,t){return e.length===t.length&&e.slice(0,-1).every((u,c)=>u===t[c])?e[e.length-1]-t[t.length-1]:0}function j5(e,t,a){a===void 0&&(a=!1);let{routesMeta:u}=e,c={},x="/",g=[];for(let h=0;h<u.length;++h){let C=u[h],D=h===u.length-1,$=x==="/"?t:t.slice(x.length)||"/",M=Of({path:C.relativePath,caseSensitive:C.caseSensitive,end:D},$),L=C.route;if(!M&&D&&a&&!u[u.length-1].route.index&&(M=Of({path:C.relativePath,caseSensitive:C.caseSensitive,end:!1},$)),!M)return null;Object.assign(c,M.params),g.push({params:c,pathname:ka([x,M.pathname]),pathnameBase:W5(ka([x,M.pathnameBase])),route:L}),M.pathnameBase!=="/"&&(x=ka([x,M.pathnameBase]))}return g}function Of(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[a,u]=U5(e.path,e.caseSensitive,e.end),c=t.match(a);if(!c)return null;let x=c[0],g=x.replace(/(.)\/+$/,"$1"),h=c.slice(1);return{params:u.reduce((D,$,M)=>{let{paramName:L,isOptional:ce}=$;if(L==="*"){let se=h[M]||"";g=x.slice(0,x.length-se.length).replace(/(.)\/+$/,"$1")}const pe=h[M];return ce&&!pe?D[L]=void 0:D[L]=(pe||"").replace(/%2F/g,"/"),D},{}),pathname:x,pathnameBase:g,pattern:e}}function U5(e,t,a){t===void 0&&(t=!1),a===void 0&&(a=!0),Ku(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let u=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(g,h,C)=>(u.push({paramName:h,isOptional:C!=null}),C?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(u.push({paramName:"*"}),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,t?void 0:"i"),u]}function V5(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ku(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ma(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,u=e.charAt(a);return u&&u!=="/"?null:e.slice(a)||"/"}function $5(e,t){t===void 0&&(t="/");let{pathname:a,search:u="",hash:c=""}=typeof e=="string"?Cs(e):e;return{pathname:a?a.startsWith("/")?a:H5(a,t):t,search:q5(u),hash:Z5(c)}}function H5(e,t){let a=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?a.length>1&&a.pop():c!=="."&&a.push(c)}),a.length>1?a.join("/"):"/"}function sy(e,t,a,u){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(u)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dS(e){return e.filter((t,a)=>a===0||t.route.path&&t.route.path.length>0)}function z_(e,t){let a=dS(e);return t?a.map((u,c)=>c===a.length-1?u.pathname:u.pathnameBase):a.map(u=>u.pathnameBase)}function L_(e,t,a,u){u===void 0&&(u=!1);let c;typeof e=="string"?c=Cs(e):(c=Xr({},e),Zt(!c.pathname||!c.pathname.includes("?"),sy("?","pathname","search",c)),Zt(!c.pathname||!c.pathname.includes("#"),sy("#","pathname","hash",c)),Zt(!c.search||!c.search.includes("#"),sy("#","search","hash",c)));let x=e===""||c.pathname==="",g=x?"/":c.pathname,h;if(g==null)h=a;else{let M=t.length-1;if(!u&&g.startsWith("..")){let L=g.split("/");for(;L[0]==="..";)L.shift(),M-=1;c.pathname=L.join("/")}h=M>=0?t[M]:"/"}let C=$5(c,h),D=g&&g!=="/"&&g.endsWith("/"),$=(x||g===".")&&a.endsWith("/");return!C.pathname.endsWith("/")&&(D||$)&&(C.pathname+="/"),C}const ka=e=>e.join("/").replace(/\/\/+/g,"/"),W5=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),q5=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Z5=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class R_{constructor(t,a,u,c){c===void 0&&(c=!1),this.status=t,this.statusText=a||"",this.internal=c,u instanceof Error?(this.data=u.toString(),this.error=u):this.data=u}}function gm(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const pS=["post","put","patch","delete"],G5=new Set(pS),K5=["get",...pS],X5=new Set(K5),Y5=new Set([301,302,303,307,308]),J5=new Set([307,308]),ly={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Q5={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},bh={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},D_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eI=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),fS="remix-router-transitions";function tI(e){const t=e.window?e.window:typeof window<"u"?window:void 0,a=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",u=!a;Zt(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let c;if(e.mapRouteProperties)c=e.mapRouteProperties;else if(e.detectErrorBoundary){let Z=e.detectErrorBoundary;c=K=>({hasErrorBoundary:Z(K)})}else c=eI;let x={},g=ud(e.routes,c,void 0,x),h,C=e.basename||"/",D=e.unstable_dataStrategy||aI,$=e.unstable_patchRoutesOnMiss,M=Xr({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},e.future),L=null,ce=new Set,pe=null,se=null,Ee=null,te=e.hydrationData!=null,H=nl(g,e.history.location,C),ne=null;if(H==null&&!$){let Z=vi(404,{pathname:e.history.location.pathname}),{matches:K,route:Y}=ew(g);H=K,ne={[Y.id]:Z}}H&&$&&me(H,g,e.history.location.pathname).active&&(H=null);let be;if(!H)be=!1,H=[];else if(H.some(Z=>Z.route.lazy))be=!1;else if(!H.some(Z=>Z.route.loader))be=!0;else if(M.v7_partialHydration){let Z=e.hydrationData?e.hydrationData.loaderData:null,K=e.hydrationData?e.hydrationData.errors:null,Y=xe=>xe.route.loader?typeof xe.route.loader=="function"&&xe.route.loader.hydrate===!0?!1:Z&&Z[xe.route.id]!==void 0||K&&K[xe.route.id]!==void 0:!0;if(K){let xe=H.findIndex(Le=>K[Le.route.id]!==void 0);be=H.slice(0,xe+1).every(Y)}else be=H.every(Y)}else be=e.hydrationData!=null;let Ae,le={historyAction:e.history.action,location:e.history.location,matches:H,initialized:be,navigation:ly,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||ne,fetchers:new Map,blockers:new Map},Me=yn.Pop,$e=!1,Ie,ze=!1,Be=new Map,ut=null,Ke=!1,Qe=!1,nr=[],Kt=[],Ft=new Map,et=0,yt=-1,bt=new Map,Et=new Set,jt=new Map,er=new Map,cr=new Set,hr=new Map,gr=new Map,en=new Map,En=!1;function ao(){if(L=e.history.listen(Z=>{let{action:K,location:Y,delta:xe}=Z;if(En){En=!1;return}Ku(gr.size===0||xe!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Le=Yn({currentLocation:le.location,nextLocation:Y,historyAction:K});if(Le&&xe!=null){En=!0,e.history.go(xe*-1),kn(Le,{state:"blocked",location:Y,proceed(){kn(Le,{state:"proceeding",proceed:void 0,reset:void 0,location:Y}),e.history.go(xe)},reset(){let We=new Map(le.blockers);We.set(Le,bh),dr({blockers:We})}});return}return ke(K,Y)}),a){vI(t,Be);let Z=()=>xI(t,Be);t.addEventListener("pagehide",Z),ut=()=>t.removeEventListener("pagehide",Z)}return le.initialized||ke(yn.Pop,le.location,{initialHydration:!0}),Ae}function Bi(){L&&L(),ut&&ut(),ce.clear(),Ie&&Ie.abort(),le.fetchers.forEach((Z,K)=>ci(K)),le.blockers.forEach((Z,K)=>zt(K))}function Uo(Z){return ce.add(Z),()=>ce.delete(Z)}function dr(Z,K){K===void 0&&(K={}),le=Xr({},le,Z);let Y=[],xe=[];M.v7_fetcherPersist&&le.fetchers.forEach((Le,We)=>{Le.state==="idle"&&(cr.has(We)?xe.push(We):Y.push(We))}),[...ce].forEach(Le=>Le(le,{deletedFetchers:xe,unstable_viewTransitionOpts:K.viewTransitionOpts,unstable_flushSync:K.flushSync===!0})),M.v7_fetcherPersist&&(Y.forEach(Le=>le.fetchers.delete(Le)),xe.forEach(Le=>ci(Le)))}function vn(Z,K,Y){var xe,Le;let{flushSync:We}=Y===void 0?{}:Y,He=le.actionData!=null&&le.navigation.formMethod!=null&&Oo(le.navigation.formMethod)&&le.navigation.state==="loading"&&((xe=Z.state)==null?void 0:xe._isRedirect)!==!0,Oe;K.actionData?Object.keys(K.actionData).length>0?Oe=K.actionData:Oe=null:He?Oe=le.actionData:Oe=null;let mt=K.loaderData?Jx(le.loaderData,K.loaderData,K.matches||[],K.errors):le.loaderData,ot=le.blockers;ot.size>0&&(ot=new Map(ot),ot.forEach((kt,Bt)=>ot.set(Bt,bh)));let dt=$e===!0||le.navigation.formMethod!=null&&Oo(le.navigation.formMethod)&&((Le=Z.state)==null?void 0:Le._isRedirect)!==!0;h&&(g=h,h=void 0),Ke||Me===yn.Pop||(Me===yn.Push?e.history.push(Z,Z.state):Me===yn.Replace&&e.history.replace(Z,Z.state));let ct;if(Me===yn.Pop){let kt=Be.get(le.location.pathname);kt&&kt.has(Z.pathname)?ct={currentLocation:le.location,nextLocation:Z}:Be.has(Z.pathname)&&(ct={currentLocation:Z,nextLocation:le.location})}else if(ze){let kt=Be.get(le.location.pathname);kt?kt.add(Z.pathname):(kt=new Set([Z.pathname]),Be.set(le.location.pathname,kt)),ct={currentLocation:le.location,nextLocation:Z}}dr(Xr({},K,{actionData:Oe,loaderData:mt,historyAction:Me,location:Z,initialized:!0,navigation:ly,revalidation:"idle",restoreScrollPosition:he(Z,K.matches||le.matches),preventScrollReset:dt,blockers:ot}),{viewTransitionOpts:ct,flushSync:We===!0}),Me=yn.Pop,$e=!1,ze=!1,Ke=!1,Qe=!1,nr=[],Kt=[]}async function yr(Z,K){if(typeof Z=="number"){e.history.go(Z);return}let Y=g0(le.location,le.matches,C,M.v7_prependBasename,Z,M.v7_relativeSplatPath,K==null?void 0:K.fromRouteId,K==null?void 0:K.relative),{path:xe,submission:Le,error:We}=Wx(M.v7_normalizeFormMethod,!1,Y,K),He=le.location,Oe=ld(le.location,xe,K&&K.state);Oe=Xr({},Oe,e.history.encodeLocation(Oe));let mt=K&&K.replace!=null?K.replace:void 0,ot=yn.Push;mt===!0?ot=yn.Replace:mt===!1||Le!=null&&Oo(Le.formMethod)&&Le.formAction===le.location.pathname+le.location.search&&(ot=yn.Replace);let dt=K&&"preventScrollReset"in K?K.preventScrollReset===!0:void 0,ct=(K&&K.unstable_flushSync)===!0,kt=Yn({currentLocation:He,nextLocation:Oe,historyAction:ot});if(kt){kn(kt,{state:"blocked",location:Oe,proceed(){kn(kt,{state:"proceeding",proceed:void 0,reset:void 0,location:Oe}),yr(Z,K)},reset(){let Bt=new Map(le.blockers);Bt.set(kt,bh),dr({blockers:Bt})}});return}return await ke(ot,Oe,{submission:Le,pendingError:We,preventScrollReset:dt,replace:K&&K.replace,enableViewTransition:K&&K.unstable_viewTransition,flushSync:ct})}function Ni(){if(Ti(),dr({revalidation:"loading"}),le.navigation.state!=="submitting"){if(le.navigation.state==="idle"){ke(le.historyAction,le.location,{startUninterruptedRevalidation:!0});return}ke(Me||le.historyAction,le.navigation.location,{overrideNavigation:le.navigation})}}async function ke(Z,K,Y){Ie&&Ie.abort(),Ie=null,Me=Z,Ke=(Y&&Y.startUninterruptedRevalidation)===!0,Q(le.location,le.matches),$e=(Y&&Y.preventScrollReset)===!0,ze=(Y&&Y.enableViewTransition)===!0;let xe=h||g,Le=Y&&Y.overrideNavigation,We=nl(xe,K,C),He=(Y&&Y.flushSync)===!0,Oe=me(We,xe,K.pathname);if(Oe.active&&Oe.matches&&(We=Oe.matches),!We){let{error:Ut,notFoundMatches:sr,route:Wt}=Ht(K.pathname);vn(K,{matches:sr,loaderData:{},errors:{[Wt.id]:Ut}},{flushSync:He});return}if(le.initialized&&!Qe&&dI(le.location,K)&&!(Y&&Y.submission&&Oo(Y.submission.formMethod))){vn(K,{matches:We},{flushSync:He});return}Ie=new AbortController;let mt=yu(e.history,K,Ie.signal,Y&&Y.submission),ot;if(Y&&Y.pendingError)ot=[$h(We).route.id,{type:Rr.error,error:Y.pendingError}];else if(Y&&Y.submission&&Oo(Y.submission.formMethod)){let Ut=await ui(mt,K,Y.submission,We,Oe.active,{replace:Y.replace,flushSync:He});if(Ut.shortCircuited)return;if(Ut.pendingActionResult){let[sr,Wt]=Ut.pendingActionResult;if(eo(Wt)&&gm(Wt.error)&&Wt.error.status===404){Ie=null,vn(K,{matches:Ut.matches,loaderData:{},errors:{[sr]:Wt.error}});return}}We=Ut.matches||We,ot=Ut.pendingActionResult,Le=uy(K,Y.submission),He=!1,Oe.active=!1,mt=yu(e.history,mt.url,mt.signal)}let{shortCircuited:dt,matches:ct,loaderData:kt,errors:Bt}=await xn(mt,K,We,Oe.active,Le,Y&&Y.submission,Y&&Y.fetcherSubmission,Y&&Y.replace,Y&&Y.initialHydration===!0,He,ot);dt||(Ie=null,vn(K,Xr({matches:ct||We},Qx(ot),{loaderData:kt,errors:Bt})))}async function ui(Z,K,Y,xe,Le,We){We===void 0&&(We={}),Ti();let He=yI(K,Y);if(dr({navigation:He},{flushSync:We.flushSync===!0}),Le){let ot=await _e(xe,K.pathname,Z.signal);if(ot.type==="aborted")return{shortCircuited:!0};if(ot.type==="error"){let{error:dt,notFoundMatches:ct,route:kt}=G(K.pathname,ot);return{matches:ct,pendingActionResult:[kt.id,{type:Rr.error,error:dt}]}}else if(ot.matches)xe=ot.matches;else{let{notFoundMatches:dt,error:ct,route:kt}=Ht(K.pathname);return{matches:dt,pendingActionResult:[kt.id,{type:Rr.error,error:ct}]}}}let Oe,mt=Mh(xe,K);if(!mt.route.action&&!mt.route.lazy)Oe={type:Rr.error,error:vi(405,{method:Z.method,pathname:K.pathname,routeId:mt.route.id})};else if(Oe=(await tn("action",Z,[mt],xe))[0],Z.signal.aborted)return{shortCircuited:!0};if(ll(Oe)){let ot;return We&&We.replace!=null?ot=We.replace:ot=Kx(Oe.response.headers.get("Location"),new URL(Z.url),C)===le.location.pathname+le.location.search,await dn(Z,Oe,{submission:Y,replace:ot}),{shortCircuited:!0}}if(sl(Oe))throw vi(400,{type:"defer-action"});if(eo(Oe)){let ot=$h(xe,mt.route.id);return(We&&We.replace)!==!0&&(Me=yn.Push),{matches:xe,pendingActionResult:[ot.route.id,Oe]}}return{matches:xe,pendingActionResult:[mt.route.id,Oe]}}async function xn(Z,K,Y,xe,Le,We,He,Oe,mt,ot,dt){let ct=Le||uy(K,We),kt=We||He||nw(ct),Bt=!Ke&&(!M.v7_partialHydration||!mt);if(xe){if(Bt){let Pr=Dt(dt);dr(Xr({navigation:ct},Pr!==void 0?{actionData:Pr}:{}),{flushSync:ot})}let At=await _e(Y,K.pathname,Z.signal);if(At.type==="aborted")return{shortCircuited:!0};if(At.type==="error"){let{error:Pr,notFoundMatches:Or,route:Nt}=G(K.pathname,At);return{matches:Or,loaderData:{},errors:{[Nt.id]:Pr}}}else if(At.matches)Y=At.matches;else{let{error:Pr,notFoundMatches:Or,route:Nt}=Ht(K.pathname);return{matches:Or,loaderData:{},errors:{[Nt.id]:Pr}}}}let Ut=h||g,[sr,Wt]=qx(e.history,le,Y,kt,K,M.v7_partialHydration&&mt===!0,M.unstable_skipActionErrorRevalidation,Qe,nr,Kt,cr,jt,Et,Ut,C,dt);if(F(At=>!(Y&&Y.some(Pr=>Pr.route.id===At))||sr&&sr.some(Pr=>Pr.route.id===At)),yt=++et,sr.length===0&&Wt.length===0){let At=Ct();return vn(K,Xr({matches:Y,loaderData:{},errors:dt&&eo(dt[1])?{[dt[0]]:dt[1].error}:null},Qx(dt),At?{fetchers:new Map(le.fetchers)}:{}),{flushSync:ot}),{shortCircuited:!0}}if(Bt){let At={};if(!xe){At.navigation=ct;let Pr=Dt(dt);Pr!==void 0&&(At.actionData=Pr)}Wt.length>0&&(At.fetchers=Xt(Wt)),dr(At,{flushSync:ot})}Wt.forEach(At=>{Ft.has(At.key)&&Ne(At.key),At.controller&&Ft.set(At.key,At.controller)});let Ei=()=>Wt.forEach(At=>Ne(At.key));Ie&&Ie.signal.addEventListener("abort",Ei);let{loaderResults:so,fetcherResults:Gt}=await pn(le.matches,Y,sr,Wt,Z);if(Z.signal.aborted)return{shortCircuited:!0};Ie&&Ie.signal.removeEventListener("abort",Ei),Wt.forEach(At=>Ft.delete(At.key));let lo=tw([...so,...Gt]);if(lo){if(lo.idx>=sr.length){let At=Wt[lo.idx-sr.length].key;Et.add(At)}return await dn(Z,lo.result,{replace:Oe}),{shortCircuited:!0}}let{loaderData:uo,errors:Ar}=Yx(le,Y,sr,so,dt,Wt,Gt,hr);hr.forEach((At,Pr)=>{At.subscribe(Or=>{(Or||At.done)&&hr.delete(Pr)})}),M.v7_partialHydration&&mt&&le.errors&&Object.entries(le.errors).filter(At=>{let[Pr]=At;return!sr.some(Or=>Or.route.id===Pr)}).forEach(At=>{let[Pr,Or]=At;Ar=Object.assign(Ar||{},{[Pr]:Or})});let sn=Ct(),co=rn(yt),ln=sn||co||Wt.length>0;return Xr({matches:Y,loaderData:uo,errors:Ar},ln?{fetchers:new Map(le.fetchers)}:{})}function Dt(Z){if(Z&&!eo(Z[1]))return{[Z[0]]:Z[1].data};if(le.actionData)return Object.keys(le.actionData).length===0?null:le.actionData}function Xt(Z){return Z.forEach(K=>{let Y=le.fetchers.get(K.key),xe=Sh(void 0,Y?Y.data:void 0);le.fetchers.set(K.key,xe)}),new Map(le.fetchers)}function Xn(Z,K,Y,xe){if(u)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Ft.has(Z)&&Ne(Z);let Le=(xe&&xe.unstable_flushSync)===!0,We=h||g,He=g0(le.location,le.matches,C,M.v7_prependBasename,Y,M.v7_relativeSplatPath,K,xe==null?void 0:xe.relative),Oe=nl(We,He,C),mt=me(Oe,We,He);if(mt.active&&mt.matches&&(Oe=mt.matches),!Oe){br(Z,K,vi(404,{pathname:He}),{flushSync:Le});return}let{path:ot,submission:dt,error:ct}=Wx(M.v7_normalizeFormMethod,!0,He,xe);if(ct){br(Z,K,ct,{flushSync:Le});return}let kt=Mh(Oe,ot);if($e=(xe&&xe.preventScrollReset)===!0,dt&&Oo(dt.formMethod)){ji(Z,K,ot,kt,Oe,mt.active,Le,dt);return}jt.set(Z,{routeId:K,path:ot}),qr(Z,K,ot,kt,Oe,mt.active,Le,dt)}async function ji(Z,K,Y,xe,Le,We,He,Oe){Ti(),jt.delete(Z);function mt(Nt){if(!Nt.route.action&&!Nt.route.lazy){let jn=vi(405,{method:Oe.formMethod,pathname:Y,routeId:K});return br(Z,K,jn,{flushSync:He}),!0}return!1}if(!We&&mt(xe))return;let ot=le.fetchers.get(Z);je(Z,_I(Oe,ot),{flushSync:He});let dt=new AbortController,ct=yu(e.history,Y,dt.signal,Oe);if(We){let Nt=await _e(Le,Y,ct.signal);if(Nt.type==="aborted")return;if(Nt.type==="error"){let{error:jn}=G(Y,Nt);br(Z,K,jn,{flushSync:He});return}else if(Nt.matches){if(Le=Nt.matches,xe=Mh(Le,Y),mt(xe))return}else{br(Z,K,vi(404,{pathname:Y}),{flushSync:He});return}}Ft.set(Z,dt);let kt=et,Ut=(await tn("action",ct,[xe],Le))[0];if(ct.signal.aborted){Ft.get(Z)===dt&&Ft.delete(Z);return}if(M.v7_fetcherPersist&&cr.has(Z)){if(ll(Ut)||eo(Ut)){je(Z,os(void 0));return}}else{if(ll(Ut))if(Ft.delete(Z),yt>kt){je(Z,os(void 0));return}else return Et.add(Z),je(Z,Sh(Oe)),dn(ct,Ut,{fetcherSubmission:Oe});if(eo(Ut)){br(Z,K,Ut.error);return}}if(sl(Ut))throw vi(400,{type:"defer-action"});let sr=le.navigation.location||le.location,Wt=yu(e.history,sr,dt.signal),Ei=h||g,so=le.navigation.state!=="idle"?nl(Ei,le.navigation.location,C):le.matches;Zt(so,"Didn't find any matches after fetcher action");let Gt=++et;bt.set(Z,Gt);let lo=Sh(Oe,Ut.data);le.fetchers.set(Z,lo);let[uo,Ar]=qx(e.history,le,so,Oe,sr,!1,M.unstable_skipActionErrorRevalidation,Qe,nr,Kt,cr,jt,Et,Ei,C,[xe.route.id,Ut]);Ar.filter(Nt=>Nt.key!==Z).forEach(Nt=>{let jn=Nt.key,ho=le.fetchers.get(jn),Mr=Sh(void 0,ho?ho.data:void 0);le.fetchers.set(jn,Mr),Ft.has(jn)&&Ne(jn),Nt.controller&&Ft.set(jn,Nt.controller)}),dr({fetchers:new Map(le.fetchers)});let sn=()=>Ar.forEach(Nt=>Ne(Nt.key));dt.signal.addEventListener("abort",sn);let{loaderResults:co,fetcherResults:ln}=await pn(le.matches,so,uo,Ar,Wt);if(dt.signal.aborted)return;dt.signal.removeEventListener("abort",sn),bt.delete(Z),Ft.delete(Z),Ar.forEach(Nt=>Ft.delete(Nt.key));let At=tw([...co,...ln]);if(At){if(At.idx>=uo.length){let Nt=Ar[At.idx-uo.length].key;Et.add(Nt)}return dn(Wt,At.result)}let{loaderData:Pr,errors:Or}=Yx(le,le.matches,uo,co,void 0,Ar,ln,hr);if(le.fetchers.has(Z)){let Nt=os(Ut.data);le.fetchers.set(Z,Nt)}rn(Gt),le.navigation.state==="loading"&&Gt>yt?(Zt(Me,"Expected pending action"),Ie&&Ie.abort(),vn(le.navigation.location,{matches:so,loaderData:Pr,errors:Or,fetchers:new Map(le.fetchers)})):(dr({errors:Or,loaderData:Jx(le.loaderData,Pr,so,Or),fetchers:new Map(le.fetchers)}),Qe=!1)}async function qr(Z,K,Y,xe,Le,We,He,Oe){let mt=le.fetchers.get(Z);je(Z,Sh(Oe,mt?mt.data:void 0),{flushSync:He});let ot=new AbortController,dt=yu(e.history,Y,ot.signal);if(We){let Ut=await _e(Le,Y,dt.signal);if(Ut.type==="aborted")return;if(Ut.type==="error"){let{error:sr}=G(Y,Ut);br(Z,K,sr,{flushSync:He});return}else if(Ut.matches)Le=Ut.matches,xe=Mh(Le,Y);else{br(Z,K,vi(404,{pathname:Y}),{flushSync:He});return}}Ft.set(Z,ot);let ct=et,Bt=(await tn("loader",dt,[xe],Le))[0];if(sl(Bt)&&(Bt=await vS(Bt,dt.signal,!0)||Bt),Ft.get(Z)===ot&&Ft.delete(Z),!dt.signal.aborted){if(cr.has(Z)){je(Z,os(void 0));return}if(ll(Bt))if(yt>ct){je(Z,os(void 0));return}else{Et.add(Z),await dn(dt,Bt);return}if(eo(Bt)){br(Z,K,Bt.error);return}Zt(!sl(Bt),"Unhandled fetcher deferred data"),je(Z,os(Bt.data))}}async function dn(Z,K,Y){let{submission:xe,fetcherSubmission:Le,replace:We}=Y===void 0?{}:Y;K.response.headers.has("X-Remix-Revalidate")&&(Qe=!0);let He=K.response.headers.get("Location");Zt(He,"Expected a Location header on the redirect Response"),He=Kx(He,new URL(Z.url),C);let Oe=ld(le.location,He,{_isRedirect:!0});if(a){let Bt=!1;if(K.response.headers.has("X-Remix-Reload-Document"))Bt=!0;else if(D_.test(He)){const Ut=e.history.createURL(He);Bt=Ut.origin!==t.location.origin||Ma(Ut.pathname,C)==null}if(Bt){We?t.location.replace(He):t.location.assign(He);return}}Ie=null;let mt=We===!0?yn.Replace:yn.Push,{formMethod:ot,formAction:dt,formEncType:ct}=le.navigation;!xe&&!Le&&ot&&dt&&ct&&(xe=nw(le.navigation));let kt=xe||Le;if(J5.has(K.response.status)&&kt&&Oo(kt.formMethod))await ke(mt,Oe,{submission:Xr({},kt,{formAction:He}),preventScrollReset:$e});else{let Bt=uy(Oe,xe);await ke(mt,Oe,{overrideNavigation:Bt,fetcherSubmission:Le,preventScrollReset:$e})}}async function tn(Z,K,Y,xe){try{let Le=await sI(D,Z,K,Y,xe,x,c);return await Promise.all(Le.map((We,He)=>{if(fI(We)){let Oe=We.result;return{type:Rr.redirect,response:cI(Oe,K,Y[He].route.id,xe,C,M.v7_relativeSplatPath)}}return uI(We)}))}catch(Le){return Y.map(()=>({type:Rr.error,error:Le}))}}async function pn(Z,K,Y,xe,Le){let[We,...He]=await Promise.all([Y.length?tn("loader",Le,Y,K):[],...xe.map(Oe=>{if(Oe.matches&&Oe.match&&Oe.controller){let mt=yu(e.history,Oe.path,Oe.controller.signal);return tn("loader",mt,[Oe.match],Oe.matches).then(ot=>ot[0])}else return Promise.resolve({type:Rr.error,error:vi(404,{pathname:Oe.path})})})]);return await Promise.all([rw(Z,Y,We,We.map(()=>Le.signal),!1,le.loaderData),rw(Z,xe.map(Oe=>Oe.match),He,xe.map(Oe=>Oe.controller?Oe.controller.signal:null),!0)]),{loaderResults:We,fetcherResults:He}}function Ti(){Qe=!0,nr.push(...F()),jt.forEach((Z,K)=>{Ft.has(K)&&(Kt.push(K),Ne(K))})}function je(Z,K,Y){Y===void 0&&(Y={}),le.fetchers.set(Z,K),dr({fetchers:new Map(le.fetchers)},{flushSync:(Y&&Y.flushSync)===!0})}function br(Z,K,Y,xe){xe===void 0&&(xe={});let Le=$h(le.matches,K);ci(Z),dr({errors:{[Le.route.id]:Y},fetchers:new Map(le.fetchers)},{flushSync:(xe&&xe.flushSync)===!0})}function Zr(Z){return M.v7_fetcherPersist&&(er.set(Z,(er.get(Z)||0)+1),cr.has(Z)&&cr.delete(Z)),le.fetchers.get(Z)||Q5}function ci(Z){let K=le.fetchers.get(Z);Ft.has(Z)&&!(K&&K.state==="loading"&&bt.has(Z))&&Ne(Z),jt.delete(Z),bt.delete(Z),Et.delete(Z),cr.delete(Z),le.fetchers.delete(Z)}function Ui(Z){if(M.v7_fetcherPersist){let K=(er.get(Z)||0)-1;K<=0?(er.delete(Z),cr.add(Z)):er.set(Z,K)}else ci(Z);dr({fetchers:new Map(le.fetchers)})}function Ne(Z){let K=Ft.get(Z);Zt(K,"Expected fetch controller: "+Z),K.abort(),Ft.delete(Z)}function Rt(Z){for(let K of Z){let Y=Zr(K),xe=os(Y.data);le.fetchers.set(K,xe)}}function Ct(){let Z=[],K=!1;for(let Y of Et){let xe=le.fetchers.get(Y);Zt(xe,"Expected fetcher: "+Y),xe.state==="loading"&&(Et.delete(Y),Z.push(Y),K=!0)}return Rt(Z),K}function rn(Z){let K=[];for(let[Y,xe]of bt)if(xe<Z){let Le=le.fetchers.get(Y);Zt(Le,"Expected fetcher: "+Y),Le.state==="loading"&&(Ne(Y),bt.delete(Y),K.push(Y))}return Rt(K),K.length>0}function nn(Z,K){let Y=le.blockers.get(Z)||bh;return gr.get(Z)!==K&&gr.set(Z,K),Y}function zt(Z){le.blockers.delete(Z),gr.delete(Z)}function kn(Z,K){let Y=le.blockers.get(Z)||bh;Zt(Y.state==="unblocked"&&K.state==="blocked"||Y.state==="blocked"&&K.state==="blocked"||Y.state==="blocked"&&K.state==="proceeding"||Y.state==="blocked"&&K.state==="unblocked"||Y.state==="proceeding"&&K.state==="unblocked","Invalid blocker state transition: "+Y.state+" -> "+K.state);let xe=new Map(le.blockers);xe.set(Z,K),dr({blockers:xe})}function Yn(Z){let{currentLocation:K,nextLocation:Y,historyAction:xe}=Z;if(gr.size===0)return;gr.size>1&&Ku(!1,"A router only supports one blocker at a time");let Le=Array.from(gr.entries()),[We,He]=Le[Le.length-1],Oe=le.blockers.get(We);if(!(Oe&&Oe.state==="proceeding")&&He({currentLocation:K,nextLocation:Y,historyAction:xe}))return We}function Ht(Z){let K=vi(404,{pathname:Z}),Y=h||g,{matches:xe,route:Le}=ew(Y);return F(),{notFoundMatches:xe,route:Le,error:K}}function G(Z,K){let Y=K.partialMatches,xe=Y[Y.length-1].route,Le=vi(400,{type:"route-discovery",routeId:xe.id,pathname:Z,message:K.error!=null&&"message"in K.error?K.error:String(K.error)});return{notFoundMatches:Y,route:xe,error:Le}}function F(Z){let K=[];return hr.forEach((Y,xe)=>{(!Z||Z(xe))&&(Y.cancel(),K.push(xe),hr.delete(xe))}),K}function B(Z,K,Y){if(pe=Z,Ee=K,se=Y||null,!te&&le.navigation===ly){te=!0;let xe=he(le.location,le.matches);xe!=null&&dr({restoreScrollPosition:xe})}return()=>{pe=null,Ee=null,se=null}}function j(Z,K){return se&&se(Z,K.map(xe=>A5(xe,le.loaderData)))||Z.key}function Q(Z,K){if(pe&&Ee){let Y=j(Z,K);pe[Y]=Ee()}}function he(Z,K){if(pe){let Y=j(Z,K),xe=pe[Y];if(typeof xe=="number")return xe}return null}function me(Z,K,Y){if($)if(Z){let xe=Z[Z.length-1].route;if(xe.path&&(xe.path==="*"||xe.path.endsWith("/*")))return{active:!0,matches:sf(K,Y,C,!0)}}else return{active:!0,matches:sf(K,Y,C,!0)||[]};return{active:!1,matches:null}}async function _e(Z,K,Y){let xe=Z,Le=xe.length>0?xe[xe.length-1].route:null;for(;;){let We=h==null,He=h||g;try{await oI($,K,xe,He,x,c,en,Y)}catch(dt){return{type:"error",error:dt,partialMatches:xe}}finally{We&&(g=[...g])}if(Y.aborted)return{type:"aborted"};let Oe=nl(He,K,C),mt=!1;if(Oe){let dt=Oe[Oe.length-1].route;if(dt.index)return{type:"success",matches:Oe};if(dt.path&&dt.path.length>0)if(dt.path==="*")mt=!0;else return{type:"success",matches:Oe}}let ot=sf(He,K,C,!0);if(!ot||xe.map(dt=>dt.route.id).join("-")===ot.map(dt=>dt.route.id).join("-"))return{type:"success",matches:mt?Oe:null};if(xe=ot,Le=xe[xe.length-1].route,Le.path==="*")return{type:"success",matches:xe}}}function ue(Z){x={},h=ud(Z,c,void 0,x)}function Se(Z,K){let Y=h==null;gS(Z,K,h||g,x,c),Y&&(g=[...g],dr({}))}return Ae={get basename(){return C},get future(){return M},get state(){return le},get routes(){return g},get window(){return t},initialize:ao,subscribe:Uo,enableScrollRestoration:B,navigate:yr,fetch:Xn,revalidate:Ni,createHref:Z=>e.history.createHref(Z),encodeLocation:Z=>e.history.encodeLocation(Z),getFetcher:Zr,deleteFetcher:Ui,dispose:Bi,getBlocker:nn,deleteBlocker:zt,patchRoutes:Se,_internalFetchControllers:Ft,_internalActiveDeferreds:hr,_internalSetRoutes:ue},Ae}function rI(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function g0(e,t,a,u,c,x,g,h){let C,D;if(g){C=[];for(let M of t)if(C.push(M),M.route.id===g){D=M;break}}else C=t,D=t[t.length-1];let $=L_(c||".",z_(C,x),Ma(e.pathname,a)||e.pathname,h==="path");return c==null&&($.search=e.search,$.hash=e.hash),(c==null||c===""||c===".")&&D&&D.route.index&&!O_($.search)&&($.search=$.search?$.search.replace(/^\?/,"?index&"):"?index"),u&&a!=="/"&&($.pathname=$.pathname==="/"?a:ka([a,$.pathname])),yl($)}function Wx(e,t,a,u){if(!u||!rI(u))return{path:a};if(u.formMethod&&!gI(u.formMethod))return{path:a,error:vi(405,{method:u.formMethod})};let c=()=>({path:a,error:vi(400,{type:"invalid-body"})}),x=u.formMethod||"get",g=e?x.toUpperCase():x.toLowerCase(),h=yS(a);if(u.body!==void 0){if(u.formEncType==="text/plain"){if(!Oo(g))return c();let L=typeof u.body=="string"?u.body:u.body instanceof FormData||u.body instanceof URLSearchParams?Array.from(u.body.entries()).reduce((ce,pe)=>{let[se,Ee]=pe;return""+ce+se+"="+Ee+`
`},""):String(u.body);return{path:a,submission:{formMethod:g,formAction:h,formEncType:u.formEncType,formData:void 0,json:void 0,text:L}}}else if(u.formEncType==="application/json"){if(!Oo(g))return c();try{let L=typeof u.body=="string"?JSON.parse(u.body):u.body;return{path:a,submission:{formMethod:g,formAction:h,formEncType:u.formEncType,formData:void 0,json:L,text:void 0}}}catch{return c()}}}Zt(typeof FormData=="function","FormData is not available in this environment");let C,D;if(u.formData)C=y0(u.formData),D=u.formData;else if(u.body instanceof FormData)C=y0(u.body),D=u.body;else if(u.body instanceof URLSearchParams)C=u.body,D=Xx(C);else if(u.body==null)C=new URLSearchParams,D=new FormData;else try{C=new URLSearchParams(u.body),D=Xx(C)}catch{return c()}let $={formMethod:g,formAction:h,formEncType:u&&u.formEncType||"application/x-www-form-urlencoded",formData:D,json:void 0,text:void 0};if(Oo($.formMethod))return{path:a,submission:$};let M=Cs(a);return t&&M.search&&O_(M.search)&&C.append("index",""),M.search="?"+C,{path:yl(M),submission:$}}function nI(e,t){let a=e;if(t){let u=e.findIndex(c=>c.route.id===t);u>=0&&(a=e.slice(0,u))}return a}function qx(e,t,a,u,c,x,g,h,C,D,$,M,L,ce,pe,se){let Ee=se?eo(se[1])?se[1].error:se[1].data:void 0,te=e.createURL(t.location),H=e.createURL(c),ne=se&&eo(se[1])?se[0]:void 0,be=ne?nI(a,ne):a,Ae=se?se[1].statusCode:void 0,le=g&&Ae&&Ae>=400,Me=be.filter((Ie,ze)=>{let{route:Be}=Ie;if(Be.lazy)return!0;if(Be.loader==null)return!1;if(x)return typeof Be.loader!="function"||Be.loader.hydrate?!0:t.loaderData[Be.id]===void 0&&(!t.errors||t.errors[Be.id]===void 0);if(iI(t.loaderData,t.matches[ze],Ie)||C.some(Qe=>Qe===Ie.route.id))return!0;let ut=t.matches[ze],Ke=Ie;return Zx(Ie,Xr({currentUrl:te,currentParams:ut.params,nextUrl:H,nextParams:Ke.params},u,{actionResult:Ee,unstable_actionStatus:Ae,defaultShouldRevalidate:le?!1:h||te.pathname+te.search===H.pathname+H.search||te.search!==H.search||mS(ut,Ke)}))}),$e=[];return M.forEach((Ie,ze)=>{if(x||!a.some(nr=>nr.route.id===Ie.routeId)||$.has(ze))return;let Be=nl(ce,Ie.path,pe);if(!Be){$e.push({key:ze,routeId:Ie.routeId,path:Ie.path,matches:null,match:null,controller:null});return}let ut=t.fetchers.get(ze),Ke=Mh(Be,Ie.path),Qe=!1;L.has(ze)?Qe=!1:D.includes(ze)?Qe=!0:ut&&ut.state!=="idle"&&ut.data===void 0?Qe=h:Qe=Zx(Ke,Xr({currentUrl:te,currentParams:t.matches[t.matches.length-1].params,nextUrl:H,nextParams:a[a.length-1].params},u,{actionResult:Ee,unstable_actionStatus:Ae,defaultShouldRevalidate:le?!1:h})),Qe&&$e.push({key:ze,routeId:Ie.routeId,path:Ie.path,matches:Be,match:Ke,controller:new AbortController})}),[Me,$e]}function iI(e,t,a){let u=!t||a.route.id!==t.route.id,c=e[a.route.id]===void 0;return u||c}function mS(e,t){let a=e.route.path;return e.pathname!==t.pathname||a!=null&&a.endsWith("*")&&e.params["*"]!==t.params["*"]}function Zx(e,t){if(e.route.shouldRevalidate){let a=e.route.shouldRevalidate(t);if(typeof a=="boolean")return a}return t.defaultShouldRevalidate}async function oI(e,t,a,u,c,x,g,h){let C=[t,...a.map(D=>D.route.id)].join("-");try{let D=g.get(C);D||(D=e({path:t,matches:a,patch:($,M)=>{h.aborted||gS($,M,u,c,x)}}),g.set(C,D)),D&&pI(D)&&await D}finally{g.delete(C)}}function gS(e,t,a,u,c){if(e){var x;let g=u[e];Zt(g,"No route found to patch children into: routeId = "+e);let h=ud(t,c,[e,"patch",String(((x=g.children)==null?void 0:x.length)||"0")],u);g.children?g.children.push(...h):g.children=h}else{let g=ud(t,c,["patch",String(a.length||"0")],u);a.push(...g)}}async function Gx(e,t,a){if(!e.lazy)return;let u=await e.lazy();if(!e.lazy)return;let c=a[e.id];Zt(c,"No route found in manifest");let x={};for(let g in u){let C=c[g]!==void 0&&g!=="hasErrorBoundary";Ku(!C,'Route "'+c.id+'" has a static property "'+g+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+g+'" will be ignored.')),!C&&!P5.has(g)&&(x[g]=u[g])}Object.assign(c,x),Object.assign(c,Xr({},t(c),{lazy:void 0}))}function aI(e){return Promise.all(e.matches.map(t=>t.resolve()))}async function sI(e,t,a,u,c,x,g,h){let C=u.reduce((M,L)=>M.add(L.route.id),new Set),D=new Set,$=await e({matches:c.map(M=>{let L=C.has(M.route.id);return Xr({},M,{shouldLoad:L,resolve:pe=>(D.add(M.route.id),L?lI(t,a,M,x,g,pe,h):Promise.resolve({type:Rr.data,result:void 0}))})}),request:a,params:c[0].params,context:h});return c.forEach(M=>Zt(D.has(M.route.id),'`match.resolve()` was not called for route id "'+M.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),$.filter((M,L)=>C.has(c[L].route.id))}async function lI(e,t,a,u,c,x,g){let h,C,D=$=>{let M,L=new Promise((se,Ee)=>M=Ee);C=()=>M(),t.signal.addEventListener("abort",C);let ce=se=>typeof $!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+a.route.id+"]"))):$({request:t,params:a.params,context:g},...se!==void 0?[se]:[]),pe;return x?pe=x(se=>ce(se)):pe=(async()=>{try{return{type:"data",result:await ce()}}catch(se){return{type:"error",result:se}}})(),Promise.race([pe,L])};try{let $=a.route[e];if(a.route.lazy)if($){let M,[L]=await Promise.all([D($).catch(ce=>{M=ce}),Gx(a.route,c,u)]);if(M!==void 0)throw M;h=L}else if(await Gx(a.route,c,u),$=a.route[e],$)h=await D($);else if(e==="action"){let M=new URL(t.url),L=M.pathname+M.search;throw vi(405,{method:t.method,pathname:L,routeId:a.route.id})}else return{type:Rr.data,result:void 0};else if($)h=await D($);else{let M=new URL(t.url),L=M.pathname+M.search;throw vi(404,{pathname:L})}Zt(h.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+a.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch($){return{type:Rr.error,result:$}}finally{C&&t.signal.removeEventListener("abort",C)}return h}async function uI(e){let{result:t,type:a,status:u}=e;if(_S(t)){let g;try{let h=t.headers.get("Content-Type");h&&/\bapplication\/json\b/.test(h)?t.body==null?g=null:g=await t.json():g=await t.text()}catch(h){return{type:Rr.error,error:h}}return a===Rr.error?{type:Rr.error,error:new R_(t.status,t.statusText,g),statusCode:t.status,headers:t.headers}:{type:Rr.data,data:g,statusCode:t.status,headers:t.headers}}if(a===Rr.error)return{type:Rr.error,error:t,statusCode:gm(t)?t.status:u};if(mI(t)){var c,x;return{type:Rr.deferred,deferredData:t,statusCode:(c=t.init)==null?void 0:c.status,headers:((x=t.init)==null?void 0:x.headers)&&new Headers(t.init.headers)}}return{type:Rr.data,data:t,statusCode:u}}function cI(e,t,a,u,c,x){let g=e.headers.get("Location");if(Zt(g,"Redirects returned/thrown from loaders/actions must have a Location header"),!D_.test(g)){let h=u.slice(0,u.findIndex(C=>C.route.id===a)+1);g=g0(new URL(t.url),h,c,!0,g,x),e.headers.set("Location",g)}return e}function Kx(e,t,a){if(D_.test(e)){let u=e,c=u.startsWith("//")?new URL(t.protocol+u):new URL(u),x=Ma(c.pathname,a)!=null;if(c.origin===t.origin&&x)return c.pathname+c.search+c.hash}return e}function yu(e,t,a,u){let c=e.createURL(yS(t)).toString(),x={signal:a};if(u&&Oo(u.formMethod)){let{formMethod:g,formEncType:h}=u;x.method=g.toUpperCase(),h==="application/json"?(x.headers=new Headers({"Content-Type":h}),x.body=JSON.stringify(u.json)):h==="text/plain"?x.body=u.text:h==="application/x-www-form-urlencoded"&&u.formData?x.body=y0(u.formData):x.body=u.formData}return new Request(c,x)}function y0(e){let t=new URLSearchParams;for(let[a,u]of e.entries())t.append(a,typeof u=="string"?u:u.name);return t}function Xx(e){let t=new FormData;for(let[a,u]of e.entries())t.append(a,u);return t}function hI(e,t,a,u,c,x){let g={},h=null,C,D=!1,$={},M=u&&eo(u[1])?u[1].error:void 0;return a.forEach((L,ce)=>{let pe=t[ce].route.id;if(Zt(!ll(L),"Cannot handle redirect results in processLoaderData"),eo(L)){let se=L.error;M!==void 0&&(se=M,M=void 0),h=h||{};{let Ee=$h(e,pe);h[Ee.route.id]==null&&(h[Ee.route.id]=se)}g[pe]=void 0,D||(D=!0,C=gm(L.error)?L.error.status:500),L.headers&&($[pe]=L.headers)}else sl(L)?(c.set(pe,L.deferredData),g[pe]=L.deferredData.data,L.statusCode!=null&&L.statusCode!==200&&!D&&(C=L.statusCode),L.headers&&($[pe]=L.headers)):(g[pe]=L.data,L.statusCode&&L.statusCode!==200&&!D&&(C=L.statusCode),L.headers&&($[pe]=L.headers))}),M!==void 0&&u&&(h={[u[0]]:M},g[u[0]]=void 0),{loaderData:g,errors:h,statusCode:C||200,loaderHeaders:$}}function Yx(e,t,a,u,c,x,g,h){let{loaderData:C,errors:D}=hI(t,a,u,c,h);for(let $=0;$<x.length;$++){let{key:M,match:L,controller:ce}=x[$];Zt(g!==void 0&&g[$]!==void 0,"Did not find corresponding fetcher result");let pe=g[$];if(!(ce&&ce.signal.aborted))if(eo(pe)){let se=$h(e.matches,L==null?void 0:L.route.id);D&&D[se.route.id]||(D=Xr({},D,{[se.route.id]:pe.error})),e.fetchers.delete(M)}else if(ll(pe))Zt(!1,"Unhandled fetcher revalidation redirect");else if(sl(pe))Zt(!1,"Unhandled fetcher deferred data");else{let se=os(pe.data);e.fetchers.set(M,se)}}return{loaderData:C,errors:D}}function Jx(e,t,a,u){let c=Xr({},t);for(let x of a){let g=x.route.id;if(t.hasOwnProperty(g)?t[g]!==void 0&&(c[g]=t[g]):e[g]!==void 0&&x.route.loader&&(c[g]=e[g]),u&&u.hasOwnProperty(g))break}return c}function Qx(e){return e?eo(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function $h(e,t){return(t?e.slice(0,e.findIndex(u=>u.route.id===t)+1):[...e]).reverse().find(u=>u.route.hasErrorBoundary===!0)||e[0]}function ew(e){let t=e.length===1?e[0]:e.find(a=>a.index||!a.path||a.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function vi(e,t){let{pathname:a,routeId:u,method:c,type:x,message:g}=t===void 0?{}:t,h="Unknown Server Error",C="Unknown @remix-run/router error";return e===400?(h="Bad Request",x==="route-discovery"?C='Unable to match URL "'+a+'" - the `children()` function for '+("route `"+u+"` threw the following error:\n"+g):c&&a&&u?C="You made a "+c+' request to "'+a+'" but '+('did not provide a `loader` for route "'+u+'", ')+"so there is no way to handle the request.":x==="defer-action"?C="defer() is not supported in actions":x==="invalid-body"&&(C="Unable to encode submission body")):e===403?(h="Forbidden",C='Route "'+u+'" does not match URL "'+a+'"'):e===404?(h="Not Found",C='No route matches URL "'+a+'"'):e===405&&(h="Method Not Allowed",c&&a&&u?C="You made a "+c.toUpperCase()+' request to "'+a+'" but '+('did not provide an `action` for route "'+u+'", ')+"so there is no way to handle the request.":c&&(C='Invalid request method "'+c.toUpperCase()+'"')),new R_(e||500,h,new Error(C),!0)}function tw(e){for(let t=e.length-1;t>=0;t--){let a=e[t];if(ll(a))return{result:a,idx:t}}}function yS(e){let t=typeof e=="string"?Cs(e):e;return yl(Xr({},t,{hash:""}))}function dI(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function pI(e){return typeof e=="object"&&e!=null&&"then"in e}function fI(e){return _S(e.result)&&Y5.has(e.result.status)}function sl(e){return e.type===Rr.deferred}function eo(e){return e.type===Rr.error}function ll(e){return(e&&e.type)===Rr.redirect}function mI(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function _S(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function gI(e){return X5.has(e.toLowerCase())}function Oo(e){return G5.has(e.toLowerCase())}async function rw(e,t,a,u,c,x){for(let g=0;g<a.length;g++){let h=a[g],C=t[g];if(!C)continue;let D=e.find(M=>M.route.id===C.route.id),$=D!=null&&!mS(D,C)&&(x&&x[C.route.id])!==void 0;if(sl(h)&&(c||$)){let M=u[g];Zt(M,"Expected an AbortSignal for revalidating fetcher deferred result"),await vS(h,M,c).then(L=>{L&&(a[g]=L||a[g])})}}}async function vS(e,t,a){if(a===void 0&&(a=!1),!await e.deferredData.resolveData(t)){if(a)try{return{type:Rr.data,data:e.deferredData.unwrappedData}}catch(c){return{type:Rr.error,error:c}}return{type:Rr.data,data:e.deferredData.data}}}function O_(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Mh(e,t){let a=typeof t=="string"?Cs(t).search:t.search;if(e[e.length-1].route.index&&O_(a||""))return e[e.length-1];let u=dS(e);return u[u.length-1]}function nw(e){let{formMethod:t,formAction:a,formEncType:u,text:c,formData:x,json:g}=e;if(!(!t||!a||!u)){if(c!=null)return{formMethod:t,formAction:a,formEncType:u,formData:void 0,json:void 0,text:c};if(x!=null)return{formMethod:t,formAction:a,formEncType:u,formData:x,json:void 0,text:void 0};if(g!==void 0)return{formMethod:t,formAction:a,formEncType:u,formData:void 0,json:g,text:void 0}}}function uy(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function yI(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Sh(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function _I(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function os(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function vI(e,t){try{let a=e.sessionStorage.getItem(fS);if(a){let u=JSON.parse(a);for(let[c,x]of Object.entries(u||{}))x&&Array.isArray(x)&&t.set(c,new Set(x||[]))}}catch{}}function xI(e,t){if(t.size>0){let a={};for(let[u,c]of t)a[u]=[...c];try{e.sessionStorage.setItem(fS,JSON.stringify(a))}catch(u){Ku(!1,"Failed to save applied view transitions in sessionStorage ("+u+").")}}}/**
 * React Router v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ff(){return Ff=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u])}return e},Ff.apply(this,arguments)}const gd=Pe.createContext(null),F_=Pe.createContext(null),Ps=Pe.createContext(null),B_=Pe.createContext(null),La=Pe.createContext({outlet:null,matches:[],isDataRoute:!1}),xS=Pe.createContext(null);function wI(e,t){let{relative:a}=t===void 0?{}:t;yd()||Zt(!1);let{basename:u,navigator:c}=Pe.useContext(Ps),{hash:x,pathname:g,search:h}=ym(e,{relative:a}),C=g;return u!=="/"&&(C=g==="/"?u:ka([u,g])),c.createHref({pathname:C,search:h,hash:x})}function yd(){return Pe.useContext(B_)!=null}function oa(){return yd()||Zt(!1),Pe.useContext(B_).location}function wS(e){Pe.useContext(Ps).static||Pe.useLayoutEffect(e)}function N_(){let{isDataRoute:e}=Pe.useContext(La);return e?OI():bI()}function bI(){yd()||Zt(!1);let e=Pe.useContext(gd),{basename:t,future:a,navigator:u}=Pe.useContext(Ps),{matches:c}=Pe.useContext(La),{pathname:x}=oa(),g=JSON.stringify(z_(c,a.v7_relativeSplatPath)),h=Pe.useRef(!1);return wS(()=>{h.current=!0}),Pe.useCallback(function(D,$){if($===void 0&&($={}),!h.current)return;if(typeof D=="number"){u.go(D);return}let M=L_(D,JSON.parse(g),x,$.relative==="path");e==null&&t!=="/"&&(M.pathname=M.pathname==="/"?t:ka([t,M.pathname])),($.replace?u.replace:u.push)(M,$.state,$)},[t,u,g,x,e])}const SI=Pe.createContext(null);function TI(e){let t=Pe.useContext(La).outlet;return t&&Pe.createElement(SI.Provider,{value:e},t)}function EI(){let{matches:e}=Pe.useContext(La),t=e[e.length-1];return t?t.params:{}}function ym(e,t){let{relative:a}=t===void 0?{}:t,{future:u}=Pe.useContext(Ps),{matches:c}=Pe.useContext(La),{pathname:x}=oa(),g=JSON.stringify(z_(c,u.v7_relativeSplatPath));return Pe.useMemo(()=>L_(e,JSON.parse(g),x,a==="path"),[e,g,x,a])}function kI(e,t,a,u){yd()||Zt(!1);let{navigator:c}=Pe.useContext(Ps),{matches:x}=Pe.useContext(La),g=x[x.length-1],h=g?g.params:{};g&&g.pathname;let C=g?g.pathnameBase:"/";g&&g.route;let D=oa(),$;$=D;let M=$.pathname||"/",L=M;if(C!=="/"){let se=C.replace(/^\//,"").split("/");L="/"+M.replace(/^\//,"").split("/").slice(se.length).join("/")}let ce=nl(e,{pathname:L});return MI(ce&&ce.map(se=>Object.assign({},se,{params:Object.assign({},h,se.params),pathname:ka([C,c.encodeLocation?c.encodeLocation(se.pathname).pathname:se.pathname]),pathnameBase:se.pathnameBase==="/"?C:ka([C,c.encodeLocation?c.encodeLocation(se.pathnameBase).pathname:se.pathnameBase])})),x,a,u)}function CI(){let e=DI(),t=gm(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Pe.createElement(Pe.Fragment,null,Pe.createElement("h2",null,"Unexpected Application Error!"),Pe.createElement("h3",{style:{fontStyle:"italic"}},t),a?Pe.createElement("pre",{style:c},a):null,null)}const PI=Pe.createElement(CI,null);class II extends Pe.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){console.error("React Router caught the following error during render",t,a)}render(){return this.state.error!==void 0?Pe.createElement(La.Provider,{value:this.props.routeContext},Pe.createElement(xS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function AI(e){let{routeContext:t,match:a,children:u}=e,c=Pe.useContext(gd);return c&&c.static&&c.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=a.route.id),Pe.createElement(La.Provider,{value:t},u)}function MI(e,t,a,u){var c;if(t===void 0&&(t=[]),a===void 0&&(a=null),u===void 0&&(u=null),e==null){var x;if((x=a)!=null&&x.errors)e=a.matches;else return null}let g=e,h=(c=a)==null?void 0:c.errors;if(h!=null){let $=g.findIndex(M=>M.route.id&&(h==null?void 0:h[M.route.id])!==void 0);$>=0||Zt(!1),g=g.slice(0,Math.min(g.length,$+1))}let C=!1,D=-1;if(a&&u&&u.v7_partialHydration)for(let $=0;$<g.length;$++){let M=g[$];if((M.route.HydrateFallback||M.route.hydrateFallbackElement)&&(D=$),M.route.id){let{loaderData:L,errors:ce}=a,pe=M.route.loader&&L[M.route.id]===void 0&&(!ce||ce[M.route.id]===void 0);if(M.route.lazy||pe){C=!0,D>=0?g=g.slice(0,D+1):g=[g[0]];break}}}return g.reduceRight(($,M,L)=>{let ce,pe=!1,se=null,Ee=null;a&&(ce=h&&M.route.id?h[M.route.id]:void 0,se=M.route.errorElement||PI,C&&(D<0&&L===0?(FI("route-fallback"),pe=!0,Ee=null):D===L&&(pe=!0,Ee=M.route.hydrateFallbackElement||null)));let te=t.concat(g.slice(0,L+1)),H=()=>{let ne;return ce?ne=se:pe?ne=Ee:M.route.Component?ne=Pe.createElement(M.route.Component,null):M.route.element?ne=M.route.element:ne=$,Pe.createElement(AI,{match:M,routeContext:{outlet:$,matches:te,isDataRoute:a!=null},children:ne})};return a&&(M.route.ErrorBoundary||M.route.errorElement||L===0)?Pe.createElement(II,{location:a.location,revalidation:a.revalidation,component:se,error:ce,children:H(),routeContext:{outlet:null,matches:te,isDataRoute:!0}}):H()},null)}var bS=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(bS||{}),Bf=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Bf||{});function zI(e){let t=Pe.useContext(gd);return t||Zt(!1),t}function LI(e){let t=Pe.useContext(F_);return t||Zt(!1),t}function RI(e){let t=Pe.useContext(La);return t||Zt(!1),t}function SS(e){let t=RI(),a=t.matches[t.matches.length-1];return a.route.id||Zt(!1),a.route.id}function DI(){var e;let t=Pe.useContext(xS),a=LI(Bf.UseRouteError),u=SS(Bf.UseRouteError);return t!==void 0?t:(e=a.errors)==null?void 0:e[u]}function OI(){let{router:e}=zI(bS.UseNavigateStable),t=SS(Bf.UseNavigateStable),a=Pe.useRef(!1);return wS(()=>{a.current=!0}),Pe.useCallback(function(c,x){x===void 0&&(x={}),a.current&&(typeof c=="number"?e.navigate(c):e.navigate(c,Ff({fromRouteId:t},x)))},[e,t])}const iw={};function FI(e,t,a){iw[e]||(iw[e]=!0)}function BI(e){return TI(e.context)}function NI(e){let{basename:t="/",children:a=null,location:u,navigationType:c=yn.Pop,navigator:x,static:g=!1,future:h}=e;yd()&&Zt(!1);let C=t.replace(/^\/*/,"/"),D=Pe.useMemo(()=>({basename:C,navigator:x,static:g,future:Ff({v7_relativeSplatPath:!1},h)}),[C,h,x,g]);typeof u=="string"&&(u=Cs(u));let{pathname:$="/",search:M="",hash:L="",state:ce=null,key:pe="default"}=u,se=Pe.useMemo(()=>{let Ee=Ma($,C);return Ee==null?null:{location:{pathname:Ee,search:M,hash:L,state:ce,key:pe},navigationType:c}},[C,$,M,L,ce,pe,c]);return se==null?null:Pe.createElement(Ps.Provider,{value:D},Pe.createElement(B_.Provider,{children:a,value:se}))}new Promise(()=>{});function jI(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:Pe.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:Pe.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:Pe.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xu(){return Xu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u])}return e},Xu.apply(this,arguments)}function TS(e,t){if(e==null)return{};var a={},u=Object.keys(e),c,x;for(x=0;x<u.length;x++)c=u[x],!(t.indexOf(c)>=0)&&(a[c]=e[c]);return a}function UI(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function VI(e,t){return e.button===0&&(!t||t==="_self")&&!UI(e)}function _0(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,a)=>{let u=e[a];return t.concat(Array.isArray(u)?u.map(c=>[a,c]):[[a,u]])},[]))}function $I(e,t){let a=_0(e);return t&&t.forEach((u,c)=>{a.has(c)||t.getAll(c).forEach(x=>{a.append(c,x)})}),a}const HI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],WI=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],qI="6";try{window.__reactRouterVersion=qI}catch{}function ZI(e,t){return tI({basename:void 0,future:Xu({},void 0,{v7_prependBasename:!0}),history:E5({window:void 0}),hydrationData:GI(),routes:e,mapRouteProperties:jI,unstable_dataStrategy:void 0,unstable_patchRoutesOnMiss:void 0,window:void 0}).initialize()}function GI(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=Xu({},t,{errors:KI(t.errors)})),t}function KI(e){if(!e)return null;let t=Object.entries(e),a={};for(let[u,c]of t)if(c&&c.__type==="RouteErrorResponse")a[u]=new R_(c.status,c.statusText,c.data,c.internal===!0);else if(c&&c.__type==="Error"){if(c.__subType){let x=window[c.__subType];if(typeof x=="function")try{let g=new x(c.message);g.stack="",a[u]=g}catch{}}if(a[u]==null){let x=new Error(c.message);x.stack="",a[u]=x}}else a[u]=c;return a}const ES=Pe.createContext({isTransitioning:!1}),XI=Pe.createContext(new Map),YI="startTransition",ow=pC[YI],JI="flushSync",aw=T5[JI];function QI(e){ow?ow(e):e()}function Th(e){aw?aw(e):e()}class eA{constructor(){this.status="pending",this.promise=new Promise((t,a)=>{this.resolve=u=>{this.status==="pending"&&(this.status="resolved",t(u))},this.reject=u=>{this.status==="pending"&&(this.status="rejected",a(u))}})}}function tA(e){let{fallbackElement:t,router:a,future:u}=e,[c,x]=Pe.useState(a.state),[g,h]=Pe.useState(),[C,D]=Pe.useState({isTransitioning:!1}),[$,M]=Pe.useState(),[L,ce]=Pe.useState(),[pe,se]=Pe.useState(),Ee=Pe.useRef(new Map),{v7_startTransition:te}=u||{},H=Pe.useCallback(Me=>{te?QI(Me):Me()},[te]),ne=Pe.useCallback((Me,$e)=>{let{deletedFetchers:Ie,unstable_flushSync:ze,unstable_viewTransitionOpts:Be}=$e;Ie.forEach(Ke=>Ee.current.delete(Ke)),Me.fetchers.forEach((Ke,Qe)=>{Ke.data!==void 0&&Ee.current.set(Qe,Ke.data)});let ut=a.window==null||a.window.document==null||typeof a.window.document.startViewTransition!="function";if(!Be||ut){ze?Th(()=>x(Me)):H(()=>x(Me));return}if(ze){Th(()=>{L&&($&&$.resolve(),L.skipTransition()),D({isTransitioning:!0,flushSync:!0,currentLocation:Be.currentLocation,nextLocation:Be.nextLocation})});let Ke=a.window.document.startViewTransition(()=>{Th(()=>x(Me))});Ke.finished.finally(()=>{Th(()=>{M(void 0),ce(void 0),h(void 0),D({isTransitioning:!1})})}),Th(()=>ce(Ke));return}L?($&&$.resolve(),L.skipTransition(),se({state:Me,currentLocation:Be.currentLocation,nextLocation:Be.nextLocation})):(h(Me),D({isTransitioning:!0,flushSync:!1,currentLocation:Be.currentLocation,nextLocation:Be.nextLocation}))},[a.window,L,$,Ee,H]);Pe.useLayoutEffect(()=>a.subscribe(ne),[a,ne]),Pe.useEffect(()=>{C.isTransitioning&&!C.flushSync&&M(new eA)},[C]),Pe.useEffect(()=>{if($&&g&&a.window){let Me=g,$e=$.promise,Ie=a.window.document.startViewTransition(async()=>{H(()=>x(Me)),await $e});Ie.finished.finally(()=>{M(void 0),ce(void 0),h(void 0),D({isTransitioning:!1})}),ce(Ie)}},[H,g,$,a.window]),Pe.useEffect(()=>{$&&g&&c.location.key===g.location.key&&$.resolve()},[$,L,c.location,g]),Pe.useEffect(()=>{!C.isTransitioning&&pe&&(h(pe.state),D({isTransitioning:!0,flushSync:!1,currentLocation:pe.currentLocation,nextLocation:pe.nextLocation}),se(void 0))},[C.isTransitioning,pe]),Pe.useEffect(()=>{},[]);let be=Pe.useMemo(()=>({createHref:a.createHref,encodeLocation:a.encodeLocation,go:Me=>a.navigate(Me),push:(Me,$e,Ie)=>a.navigate(Me,{state:$e,preventScrollReset:Ie==null?void 0:Ie.preventScrollReset}),replace:(Me,$e,Ie)=>a.navigate(Me,{replace:!0,state:$e,preventScrollReset:Ie==null?void 0:Ie.preventScrollReset})}),[a]),Ae=a.basename||"/",le=Pe.useMemo(()=>({router:a,navigator:be,static:!1,basename:Ae}),[a,be,Ae]);return Pe.createElement(Pe.Fragment,null,Pe.createElement(gd.Provider,{value:le},Pe.createElement(F_.Provider,{value:c},Pe.createElement(XI.Provider,{value:Ee.current},Pe.createElement(ES.Provider,{value:C},Pe.createElement(NI,{basename:Ae,location:c.location,navigationType:c.historyAction,navigator:be,future:{v7_relativeSplatPath:a.future.v7_relativeSplatPath}},c.initialized||a.future.v7_partialHydration?Pe.createElement(rA,{routes:a.routes,future:a.future,state:c}):t))))),null)}function rA(e){let{routes:t,future:a,state:u}=e;return kI(t,void 0,u,a)}const nA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",iA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nf=Pe.forwardRef(function(t,a){let{onClick:u,relative:c,reloadDocument:x,replace:g,state:h,target:C,to:D,preventScrollReset:$,unstable_viewTransition:M}=t,L=TS(t,HI),{basename:ce}=Pe.useContext(Ps),pe,se=!1;if(typeof D=="string"&&iA.test(D)&&(pe=D,nA))try{let ne=new URL(window.location.href),be=D.startsWith("//")?new URL(ne.protocol+D):new URL(D),Ae=Ma(be.pathname,ce);be.origin===ne.origin&&Ae!=null?D=Ae+be.search+be.hash:se=!0}catch{}let Ee=wI(D,{relative:c}),te=aA(D,{replace:g,state:h,target:C,preventScrollReset:$,relative:c,unstable_viewTransition:M});function H(ne){u&&u(ne),ne.defaultPrevented||te(ne)}return Pe.createElement("a",Xu({},L,{href:pe||Ee,onClick:se||x?u:H,ref:a,target:C}))}),sw=Pe.forwardRef(function(t,a){let{"aria-current":u="page",caseSensitive:c=!1,className:x="",end:g=!1,style:h,to:C,unstable_viewTransition:D,children:$}=t,M=TS(t,WI),L=ym(C,{relative:M.relative}),ce=oa(),pe=Pe.useContext(F_),{navigator:se,basename:Ee}=Pe.useContext(Ps),te=pe!=null&&sA(L)&&D===!0,H=se.encodeLocation?se.encodeLocation(L).pathname:L.pathname,ne=ce.pathname,be=pe&&pe.navigation&&pe.navigation.location?pe.navigation.location.pathname:null;c||(ne=ne.toLowerCase(),be=be?be.toLowerCase():null,H=H.toLowerCase()),be&&Ee&&(be=Ma(be,Ee)||be);const Ae=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let le=ne===H||!g&&ne.startsWith(H)&&ne.charAt(Ae)==="/",Me=be!=null&&(be===H||!g&&be.startsWith(H)&&be.charAt(H.length)==="/"),$e={isActive:le,isPending:Me,isTransitioning:te},Ie=le?u:void 0,ze;typeof x=="function"?ze=x($e):ze=[x,le?"active":null,Me?"pending":null,te?"transitioning":null].filter(Boolean).join(" ");let Be=typeof h=="function"?h($e):h;return Pe.createElement(Nf,Xu({},M,{"aria-current":Ie,className:ze,ref:a,style:Be,to:C,unstable_viewTransition:D}),typeof $=="function"?$($e):$)});var v0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(v0||(v0={}));var lw;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(lw||(lw={}));function oA(e){let t=Pe.useContext(gd);return t||Zt(!1),t}function aA(e,t){let{target:a,replace:u,state:c,preventScrollReset:x,relative:g,unstable_viewTransition:h}=t===void 0?{}:t,C=N_(),D=oa(),$=ym(e,{relative:g});return Pe.useCallback(M=>{if(VI(M,a)){M.preventDefault();let L=u!==void 0?u:yl(D)===yl($);C(e,{replace:L,state:c,preventScrollReset:x,relative:g,unstable_viewTransition:h})}},[D,C,$,u,c,a,e,x,g,h])}function kS(e){let t=Pe.useRef(_0(e)),a=Pe.useRef(!1),u=oa(),c=Pe.useMemo(()=>$I(u.search,a.current?null:t.current),[u.search]),x=N_(),g=Pe.useCallback((h,C)=>{const D=_0(typeof h=="function"?h(c):h);a.current=!0,x("?"+D,C)},[x,c]);return[c,g]}function sA(e,t){t===void 0&&(t={});let a=Pe.useContext(ES);a==null&&Zt(!1);let{basename:u}=oA(v0.useViewTransitionState),c=ym(e,{relative:t.relative});if(!a.isTransitioning)return!1;let x=Ma(a.currentLocation.pathname,u)||a.currentLocation.pathname,g=Ma(a.nextLocation.pathname,u)||a.nextLocation.pathname;return Of(c.pathname,g)!=null||Of(c.pathname,x)!=null}var CS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},uw=Fn.createContext&&Fn.createContext(CS),lA=["attr","size","title"];function uA(e,t){if(e==null)return{};var a=cA(e,t),u,c;if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(e);for(c=0;c<x.length;c++)u=x[c],!(t.indexOf(u)>=0)&&Object.prototype.propertyIsEnumerable.call(e,u)&&(a[u]=e[u])}return a}function cA(e,t){if(e==null)return{};var a={};for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){if(t.indexOf(u)>=0)continue;a[u]=e[u]}return a}function jf(){return jf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u])}return e},jf.apply(this,arguments)}function cw(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);t&&(u=u.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),a.push.apply(a,u)}return a}function Uf(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?cw(Object(a),!0).forEach(function(u){hA(e,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):cw(Object(a)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(a,u))})}return e}function hA(e,t,a){return t=dA(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function dA(e){var t=pA(e,"string");return typeof t=="symbol"?t:t+""}function pA(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var u=a.call(e,t||"default");if(typeof u!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PS(e){return e&&e.map((t,a)=>Fn.createElement(t.tag,Uf({key:a},t.attr),PS(t.child)))}function Fi(e){return t=>Fn.createElement(fA,jf({attr:Uf({},e.attr)},t),PS(e.child))}function fA(e){var t=a=>{var{attr:u,size:c,title:x}=e,g=uA(e,lA),h=c||a.size||"1em",C;return a.className&&(C=a.className),e.className&&(C=(C?C+" ":"")+e.className),Fn.createElement("svg",jf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,u,g,{className:C,style:Uf(Uf({color:e.color||a.color},a.style),e.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),x&&Fn.createElement("title",null,x),e.children)};return uw!==void 0?Fn.createElement(uw.Consumer,null,a=>t(a)):t(CS)}function mA(e){return Fi({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M11.03 2.59a1.501 1.501 0 0 1 1.94 0l7.5 6.363a1.5 1.5 0 0 1 .53 1.144V19.5a1.5 1.5 0 0 1-1.5 1.5h-5.75a.75.75 0 0 1-.75-.75V14h-2v6.25a.75.75 0 0 1-.75.75H4.5A1.5 1.5 0 0 1 3 19.5v-9.403c0-.44.194-.859.53-1.144ZM12 3.734l-7.5 6.363V19.5h5v-6.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v6.25h5v-9.403Z"},child:[]}]})(e)}function gA(e){return Fi({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16 1.75V3h5.25a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1 0-1.5H8V1.75C8 .784 8.784 0 9.75 0h4.5C15.216 0 16 .784 16 1.75Zm-6.5 0V3h5V1.75a.25.25 0 0 0-.25-.25h-4.5a.25.25 0 0 0-.25.25ZM4.997 6.178a.75.75 0 1 0-1.493.144L4.916 20.92a1.75 1.75 0 0 0 1.742 1.58h10.684a1.75 1.75 0 0 0 1.742-1.581l1.413-14.597a.75.75 0 0 0-1.494-.144l-1.412 14.596a.25.25 0 0 1-.249.226H6.658a.25.25 0 0 1-.249-.226L4.997 6.178Z"},child:[]},{tag:"path",attr:{d:"M9.206 7.501a.75.75 0 0 1 .793.705l.5 8.5A.75.75 0 1 1 9 16.794l-.5-8.5a.75.75 0 0 1 .705-.793Zm6.293.793A.75.75 0 1 0 14 8.206l-.5 8.5a.75.75 0 0 0 1.498.088l.5-8.5Z"},child:[]}]})(e)}function yA(e){return Fi({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"View_List"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M18.436,20.937H5.562a2.5,2.5,0,0,1-2.5-2.5V5.563a2.5,2.5,0,0,1,2.5-2.5H18.436a2.5,2.5,0,0,1,2.5,2.5V18.437A2.5,2.5,0,0,1,18.436,20.937ZM5.562,4.063a1.5,1.5,0,0,0-1.5,1.5V18.437a1.5,1.5,0,0,0,1.5,1.5H18.436a1.5,1.5,0,0,0,1.5-1.5V5.563a1.5,1.5,0,0,0-1.5-1.5Z"},child:[]},{tag:"path",attr:{d:"M6.544,8.283h0a.519.519,0,0,1-.353-.147.5.5,0,0,1,0-.707.512.512,0,0,1,.353-.146H7.55a.516.516,0,0,1,.353.146.5.5,0,0,1,.147.354.5.5,0,0,1-.5.5Z"},child:[]},{tag:"path",attr:{d:"M6.544,12.5h0a.523.523,0,0,1-.353-.146.5.5,0,0,1,0-.708.516.516,0,0,1,.353-.146H7.55a.521.521,0,0,1,.353.146.5.5,0,0,1,0,.708.516.516,0,0,1-.353.146Z"},child:[]},{tag:"path",attr:{d:"M6.544,16.72h0a.519.519,0,0,1-.353-.147.5.5,0,0,1,0-.707.516.516,0,0,1,.353-.146H7.55a.516.516,0,0,1,.353.146.5.5,0,0,1,.147.354.5.5,0,0,1-.5.5Z"},child:[]},{tag:"path",attr:{d:"M10.554,8.281h0a.5.5,0,0,1,0-1h6.9a.5.5,0,0,1,0,1Z"},child:[]},{tag:"path",attr:{d:"M10.554,12.5h0a.5.5,0,0,1,0-1h6.9a.5.5,0,0,1,0,1Z"},child:[]},{tag:"path",attr:{d:"M10.554,16.718h0a.5.5,0,0,1,0-1h6.9a.5.5,0,0,1,0,1Z"},child:[]}]}]}]})(e)}function _A(e){return Fi({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"},child:[]},{tag:"path",attr:{d:"M9 16v-8l3 5l3 -5v8"},child:[]}]})(e)}function vA(e){return Fi({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19.5 7a9 9 0 0 0 -7.5 -4a8.991 8.991 0 0 0 -7.484 4"},child:[]},{tag:"path",attr:{d:"M11.5 3a16.989 16.989 0 0 0 -1.826 4"},child:[]},{tag:"path",attr:{d:"M12.5 3a16.989 16.989 0 0 1 1.828 4"},child:[]},{tag:"path",attr:{d:"M19.5 17a9 9 0 0 1 -7.5 4a8.991 8.991 0 0 1 -7.484 -4"},child:[]},{tag:"path",attr:{d:"M11.5 21a16.989 16.989 0 0 1 -1.826 -4"},child:[]},{tag:"path",attr:{d:"M12.5 21a16.989 16.989 0 0 0 1.828 -4"},child:[]},{tag:"path",attr:{d:"M2 10l1 4l1.5 -4l1.5 4l1 -4"},child:[]},{tag:"path",attr:{d:"M17 10l1 4l1.5 -4l1.5 4l1 -4"},child:[]},{tag:"path",attr:{d:"M9.5 10l1 4l1.5 -4l1.5 4l1 -4"},child:[]}]})(e)}function xA(){const e={fontWeight:"bold",color:"#F18C18"},t=oa(),a=(t==null?void 0:t.search)||"/";return qe.jsx("footer",{className:"fixed bottom-2 w-screen flex items-center justify-center",children:qe.jsxs("nav",{className:"flex items-center justify-center bg-gradient-to-r px-6 p-2 bg-navColor text-fontColor no-underline rounded-[15rem] mt-3 gap-5",children:[qe.jsxs(sw,{className:"flex items-center w-12 flex-col hover:text-main",style:({isActive:u})=>u?e:null,to:"/",children:[qe.jsx("span",{children:qe.jsx(mA,{size:30,className:"transition-colors duration-200"})}),"Home"]}),qe.jsx(_A,{color:"F18C18",size:60}),qe.jsxs(sw,{className:"flex items-center w-12 flex-col hover:text-main",style:({isActive:u})=>u?e:null,to:"list",state:{link:a},children:[qe.jsx("span",{children:qe.jsx(yA,{size:30,className:"transition-colors duration-200"})}),"List"]})]})})}function wA(e){return Fi({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"},child:[]}]})(e)}function bA(e){return Fi({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9.37 5.51A7.35 7.35 0 0 0 9.1 7.5c0 4.08 3.32 7.4 7.4 7.4.68 0 1.35-.09 1.99-.27A7.014 7.014 0 0 1 12 19c-3.86 0-7-3.14-7-7 0-2.93 1.81-5.45 4.37-6.49zM12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"},child:[]}]})(e)}function SA(e){return Fi({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"},child:[]}]})(e)}function TA(){const[e,t]=Pe.useState(()=>{const u=localStorage.getItem("isDarkMode");return u?JSON.parse(u):!0});Pe.useEffect(()=>{e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("isDarkMode",JSON.stringify(e))},[e]);const a=()=>{t(u=>!u)};return qe.jsx("div",{className:"absolute z-10 flex rounded-full top-[4.5rem] left-4 bg-navColor text-white shadow-lg duration-200 hover:text-main hover:shadow-main hover:scale-110",children:qe.jsx("button",{type:"button",className:"p-3",onClick:a,children:qe.jsx("span",{children:e?qe.jsx(bA,{size:30}):qe.jsx(wA,{size:30})})})})}function EA(){return qe.jsxs("main",{className:"relative bg-appColor dark:bg-lightGray",children:[qe.jsx(TA,{}),qe.jsx(BI,{}),qe.jsx(xA,{})]})}var IS={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.4.1/LICENSE.txt
 */(function(e,t){(function(a,u){e.exports=u()})(kh,function(){var a={},u={};function c(g,h,C){if(u[g]=C,g==="index"){var D="var sharedModule = {}; ("+u.shared+")(sharedModule); ("+u.worker+")(sharedModule);",$={};return u.shared($),u.index(a,$),typeof window<"u"&&a.setWorkerUrl(window.URL.createObjectURL(new Blob([D],{type:"text/javascript"}))),a}}c("shared",["exports"],function(g){function h(i,r,o,l){return new(o||(o=Promise))(function(p,m){function v(k){try{S(l.next(k))}catch(P){m(P)}}function w(k){try{S(l.throw(k))}catch(P){m(P)}}function S(k){var P;k.done?p(k.value):(P=k.value,P instanceof o?P:new o(function(A){A(P)})).then(v,w)}S((l=l.apply(i,r||[])).next())})}function C(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}typeof SuppressedError=="function"&&SuppressedError;var D=$;function $(i,r){this.x=i,this.y=r}$.prototype={clone:function(){return new $(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,r){return this.clone()._rotateAround(i,r)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var r=i.x-this.x,o=i.y-this.y;return r*r+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,r){return Math.atan2(this.x*r-this.y*i,this.x*i+this.y*r)},_matMult:function(i){var r=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=r,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var r=Math.cos(i),o=Math.sin(i),l=o*this.x+r*this.y;return this.x=r*this.x-o*this.y,this.y=l,this},_rotateAround:function(i,r){var o=Math.cos(i),l=Math.sin(i),p=r.y+l*(this.x-r.x)+o*(this.y-r.y);return this.x=r.x+o*(this.x-r.x)-l*(this.y-r.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},$.convert=function(i){return i instanceof $?i:Array.isArray(i)?new $(i[0],i[1]):i};var M=C(D),L=ce;function ce(i,r,o,l){this.cx=3*i,this.bx=3*(o-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(l-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=r,this.p2x=o,this.p2y=l}ce.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,r){if(r===void 0&&(r=1e-6),i<0)return 0;if(i>1)return 1;for(var o=i,l=0;l<8;l++){var p=this.sampleCurveX(o)-i;if(Math.abs(p)<r)return o;var m=this.sampleCurveDerivativeX(o);if(Math.abs(m)<1e-6)break;o-=p/m}var v=0,w=1;for(o=i,l=0;l<20&&(p=this.sampleCurveX(o),!(Math.abs(p-i)<r));l++)i>p?v=o:w=o,o=.5*(w-v)+v;return o},solve:function(i,r){return this.sampleCurveY(this.solveCurveX(i,r))}};var pe=C(L);let se,Ee;function te(){return se==null&&(se=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),se}function H(){if(Ee==null&&(Ee=!1,te())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let l=0;l<5*5;l++){const p=4*l;r.fillStyle=`rgb(${p},${p+1},${p+2})`,r.fillRect(l%5,Math.floor(l/5),1,1)}const o=r.getImageData(0,0,5,5).data;for(let l=0;l<5*5*4;l++)if(l%4!=3&&o[l]!==l){Ee=!0;break}}}return Ee||!1}function ne(i,r,o,l){const p=new pe(i,r,o,l);return m=>p.solve(m)}const be=ne(.25,.1,.25,1);function Ae(i,r,o){return Math.min(o,Math.max(r,i))}function le(i,r,o){const l=o-r,p=((i-r)%l+l)%l+r;return p===r?o:p}function Me(i,...r){for(const o of r)for(const l in o)i[l]=o[l];return i}let $e=1;function Ie(i,r,o){const l={};for(const p in i)l[p]=r.call(this,i[p],p,i);return l}function ze(i,r,o){const l={};for(const p in i)r.call(this,i[p],p,i)&&(l[p]=i[p]);return l}function Be(i){return Array.isArray(i)?i.map(Be):typeof i=="object"&&i?Ie(i,Be):i}const ut={};function Ke(i){ut[i]||(typeof console<"u"&&console.warn(i),ut[i]=!0)}function Qe(i,r,o){return(o.y-i.y)*(r.x-i.x)>(r.y-i.y)*(o.x-i.x)}function nr(i){return typeof WorkerGlobalScope<"u"&&i!==void 0&&i instanceof WorkerGlobalScope}let Kt=null;function Ft(i){return typeof ImageBitmap<"u"&&i instanceof ImageBitmap}const et="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function yt(i,r,o,l,p){return h(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const m=new VideoFrame(i,{timestamp:0});try{const v=m==null?void 0:m.format;if(!v||!v.startsWith("BGR")&&!v.startsWith("RGB"))throw new Error(`Unrecognized format ${v}`);const w=v.startsWith("BGR"),S=new Uint8ClampedArray(l*p*4);if(yield m.copyTo(S,function(k,P,A,O,N){const V=4*Math.max(-P,0),q=(Math.max(0,A)-A)*O*4+V,ee=4*O,oe=Math.max(0,P),ve=Math.max(0,A);return{rect:{x:oe,y:ve,width:Math.min(k.width,P+O)-oe,height:Math.min(k.height,A+N)-ve},layout:[{offset:q,stride:ee}]}}(i,r,o,l,p)),w)for(let k=0;k<S.length;k+=4){const P=S[k];S[k]=S[k+2],S[k+2]=P}return S}finally{m.close()}})}let bt,Et;const jt="AbortError";function er(){return new Error(jt)}const cr={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function hr(i){return cr.REGISTERED_PROTOCOLS[i.substring(0,i.indexOf("://"))]}const gr="global-dispatcher";class en extends Error{constructor(r,o,l,p){super(`AJAXError: ${o} (${r}): ${l}`),this.status=r,this.statusText=o,this.url=l,this.body=p}}const En=()=>nr(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,ao=function(i,r){if(/:\/\//.test(i.url)&&!/^https?:|^file:/.test(i.url)){const l=hr(i.url);if(l)return l(i,r);if(nr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:i,targetMapId:gr},r)}if(!(/^file:/.test(o=i.url)||/^file:/.test(En())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(l,p){return h(this,void 0,void 0,function*(){const m=new Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,cache:l.cache,referrer:En(),signal:p.signal});l.type!=="json"||m.headers.has("Accept")||m.headers.set("Accept","application/json");const v=yield fetch(m);if(!v.ok){const k=yield v.blob();throw new en(v.status,v.statusText,l.url,k)}let w;w=l.type==="arrayBuffer"||l.type==="image"?v.arrayBuffer():l.type==="json"?v.json():v.text();const S=yield w;if(p.signal.aborted)throw er();return{data:S,cacheControl:v.headers.get("Cache-Control"),expires:v.headers.get("Expires")}})}(i,r);if(nr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:i,mustQueue:!0,targetMapId:gr},r)}var o;return function(l,p){return new Promise((m,v)=>{var w;const S=new XMLHttpRequest;S.open(l.method||"GET",l.url,!0),l.type!=="arrayBuffer"&&l.type!=="image"||(S.responseType="arraybuffer");for(const k in l.headers)S.setRequestHeader(k,l.headers[k]);l.type==="json"&&(S.responseType="text",!((w=l.headers)===null||w===void 0)&&w.Accept||S.setRequestHeader("Accept","application/json")),S.withCredentials=l.credentials==="include",S.onerror=()=>{v(new Error(S.statusText))},S.onload=()=>{if(!p.signal.aborted)if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let k=S.response;if(l.type==="json")try{k=JSON.parse(S.response)}catch(P){return void v(P)}m({data:k,cacheControl:S.getResponseHeader("Cache-Control"),expires:S.getResponseHeader("Expires")})}else{const k=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});v(new en(S.status,S.statusText,l.url,k))}},p.signal.addEventListener("abort",()=>{S.abort(),v(er())}),S.send(l.body)})}(i,r)};function Bi(i){if(!i||i.indexOf("://")<=0||i.indexOf("data:image/")===0||i.indexOf("blob:")===0)return!0;const r=new URL(i),o=window.location;return r.protocol===o.protocol&&r.host===o.host}function Uo(i,r,o){o[i]&&o[i].indexOf(r)!==-1||(o[i]=o[i]||[],o[i].push(r))}function dr(i,r,o){if(o&&o[i]){const l=o[i].indexOf(r);l!==-1&&o[i].splice(l,1)}}class vn{constructor(r,o={}){Me(this,o),this.type=r}}class yr extends vn{constructor(r,o={}){super("error",Me({error:r},o))}}class Ni{on(r,o){return this._listeners=this._listeners||{},Uo(r,o,this._listeners),this}off(r,o){return dr(r,o,this._listeners),dr(r,o,this._oneTimeListeners),this}once(r,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},Uo(r,o,this._oneTimeListeners),this):new Promise(l=>this.once(r,l))}fire(r,o){typeof r=="string"&&(r=new vn(r,o||{}));const l=r.type;if(this.listens(l)){r.target=this;const p=this._listeners&&this._listeners[l]?this._listeners[l].slice():[];for(const w of p)w.call(this,r);const m=this._oneTimeListeners&&this._oneTimeListeners[l]?this._oneTimeListeners[l].slice():[];for(const w of m)dr(l,w,this._oneTimeListeners),w.call(this,r);const v=this._eventedParent;v&&(Me(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),v.fire(r))}else r instanceof yr&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,o){return this._eventedParent=r,this._eventedParentData=o,this}}var ke={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ui=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function xn(i,r){const o={};for(const l in i)l!=="ref"&&(o[l]=i[l]);return ui.forEach(l=>{l in r&&(o[l]=r[l])}),o}function Dt(i,r){if(Array.isArray(i)){if(!Array.isArray(r)||i.length!==r.length)return!1;for(let o=0;o<i.length;o++)if(!Dt(i[o],r[o]))return!1;return!0}if(typeof i=="object"&&i!==null&&r!==null){if(typeof r!="object"||Object.keys(i).length!==Object.keys(r).length)return!1;for(const o in i)if(!Dt(i[o],r[o]))return!1;return!0}return i===r}function Xt(i,r){i.push(r)}function Xn(i,r,o){Xt(o,{command:"addSource",args:[i,r[i]]})}function ji(i,r,o){Xt(r,{command:"removeSource",args:[i]}),o[i]=!0}function qr(i,r,o,l){ji(i,o,l),Xn(i,r,o)}function dn(i,r,o){let l;for(l in i[o])if(Object.prototype.hasOwnProperty.call(i[o],l)&&l!=="data"&&!Dt(i[o][l],r[o][l]))return!1;for(l in r[o])if(Object.prototype.hasOwnProperty.call(r[o],l)&&l!=="data"&&!Dt(i[o][l],r[o][l]))return!1;return!0}function tn(i,r,o,l,p,m){i=i||{},r=r||{};for(const v in i)Object.prototype.hasOwnProperty.call(i,v)&&(Dt(i[v],r[v])||o.push({command:m,args:[l,v,r[v],p]}));for(const v in r)Object.prototype.hasOwnProperty.call(r,v)&&!Object.prototype.hasOwnProperty.call(i,v)&&(Dt(i[v],r[v])||o.push({command:m,args:[l,v,r[v],p]}))}function pn(i){return i.id}function Ti(i,r){return i[r.id]=r,i}class je{constructor(r,o,l,p){this.message=(r?`${r}: `:"")+l,p&&(this.identifier=p),o!=null&&o.__line__&&(this.line=o.__line__)}}function br(i,...r){for(const o of r)for(const l in o)i[l]=o[l];return i}class Zr extends Error{constructor(r,o){super(o),this.message=o,this.key=r}}class ci{constructor(r,o=[]){this.parent=r,this.bindings={};for(const[l,p]of o)this.bindings[l]=p}concat(r){return new ci(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const Ui={kind:"null"},Ne={kind:"number"},Rt={kind:"string"},Ct={kind:"boolean"},rn={kind:"color"},nn={kind:"object"},zt={kind:"value"},kn={kind:"collator"},Yn={kind:"formatted"},Ht={kind:"padding"},G={kind:"resolvedImage"},F={kind:"variableAnchorOffsetCollection"};function B(i,r){return{kind:"array",itemType:i,N:r}}function j(i){if(i.kind==="array"){const r=j(i.itemType);return typeof i.N=="number"?`array<${r}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${r}>`}return i.kind}const Q=[Ui,Ne,Rt,Ct,rn,Yn,nn,B(zt),Ht,G,F];function he(i,r){if(r.kind==="error")return null;if(i.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!he(i.itemType,r.itemType))&&(typeof i.N!="number"||i.N===r.N))return null}else{if(i.kind===r.kind)return null;if(i.kind==="value"){for(const o of Q)if(!he(o,r))return null}}return`Expected ${j(i)} but found ${j(r)} instead.`}function me(i,r){return r.some(o=>o.kind===i.kind)}function _e(i,r){return r.some(o=>o==="null"?i===null:o==="array"?Array.isArray(i):o==="object"?i&&!Array.isArray(i)&&typeof i=="object":o===typeof i)}function ue(i,r){return i.kind==="array"&&r.kind==="array"?i.itemType.kind===r.itemType.kind&&typeof i.N=="number":i.kind===r.kind}const Se=.96422,Z=.82521,K=4/29,Y=6/29,xe=3*Y*Y,Le=Y*Y*Y,We=Math.PI/180,He=180/Math.PI;function Oe(i){return(i%=360)<0&&(i+=360),i}function mt([i,r,o,l]){let p,m;const v=dt((.2225045*(i=ot(i))+.7168786*(r=ot(r))+.0606169*(o=ot(o)))/1);i===r&&r===o?p=m=v:(p=dt((.4360747*i+.3850649*r+.1430804*o)/Se),m=dt((.0139322*i+.0971045*r+.7141733*o)/Z));const w=116*v-16;return[w<0?0:w,500*(p-v),200*(v-m),l]}function ot(i){return i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function dt(i){return i>Le?Math.pow(i,1/3):i/xe+K}function ct([i,r,o,l]){let p=(i+16)/116,m=isNaN(r)?p:p+r/500,v=isNaN(o)?p:p-o/200;return p=1*Bt(p),m=Se*Bt(m),v=Z*Bt(v),[kt(3.1338561*m-1.6168667*p-.4906146*v),kt(-.9787684*m+1.9161415*p+.033454*v),kt(.0719453*m-.2289914*p+1.4052427*v),l]}function kt(i){return(i=i<=.00304?12.92*i:1.055*Math.pow(i,1/2.4)-.055)<0?0:i>1?1:i}function Bt(i){return i>Y?i*i*i:xe*(i-K)}function Ut(i){return parseInt(i.padEnd(2,i),16)/255}function sr(i,r){return Wt(r?i/100:i,0,1)}function Wt(i,r,o){return Math.min(Math.max(r,i),o)}function Ei(i){return!i.some(Number.isNaN)}const so={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Gt{constructor(r,o,l,p=1,m=!0){this.r=r,this.g=o,this.b=l,this.a=p,m||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[r,o,l,p]))}static parse(r){if(r instanceof Gt)return r;if(typeof r!="string")return;const o=function(l){if((l=l.toLowerCase().trim())==="transparent")return[0,0,0,0];const p=so[l];if(p){const[v,w,S]=p;return[v/255,w/255,S/255,1]}if(l.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(l)){const v=l.length<6?1:2;let w=1;return[Ut(l.slice(w,w+=v)),Ut(l.slice(w,w+=v)),Ut(l.slice(w,w+=v)),Ut(l.slice(w,w+v)||"ff")]}if(l.startsWith("rgb")){const v=l.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[w,S,k,P,A,O,N,V,q,ee,oe,ve]=v,de=[P||" ",N||" ",ee].join("");if(de==="  "||de==="  /"||de===",,"||de===",,,"){const ye=[k,O,q].join(""),Ce=ye==="%%%"?100:ye===""?255:0;if(Ce){const Fe=[Wt(+S/Ce,0,1),Wt(+A/Ce,0,1),Wt(+V/Ce,0,1),oe?sr(+oe,ve):1];if(Ei(Fe))return Fe}}return}}const m=l.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(m){const[v,w,S,k,P,A,O,N,V]=m,q=[S||" ",P||" ",O].join("");if(q==="  "||q==="  /"||q===",,"||q===",,,"){const ee=[+w,Wt(+k,0,100),Wt(+A,0,100),N?sr(+N,V):1];if(Ei(ee))return function([oe,ve,de,ye]){function Ce(Fe){const Je=(Fe+oe/30)%12,St=ve*Math.min(de,1-de);return de-St*Math.max(-1,Math.min(Je-3,9-Je,1))}return oe=Oe(oe),ve/=100,de/=100,[Ce(0),Ce(8),Ce(4),ye]}(ee)}}}(r);return o?new Gt(...o,!1):void 0}get rgb(){const{r,g:o,b:l,a:p}=this,m=p||1/0;return this.overwriteGetter("rgb",[r/m,o/m,l/m,p])}get hcl(){return this.overwriteGetter("hcl",function(r){const[o,l,p,m]=mt(r),v=Math.sqrt(l*l+p*p);return[Math.round(1e4*v)?Oe(Math.atan2(p,l)*He):NaN,v,o,m]}(this.rgb))}get lab(){return this.overwriteGetter("lab",mt(this.rgb))}overwriteGetter(r,o){return Object.defineProperty(this,r,{value:o}),o}toString(){const[r,o,l,p]=this.rgb;return`rgba(${[r,o,l].map(m=>Math.round(255*m)).join(",")},${p})`}}Gt.black=new Gt(0,0,0,1),Gt.white=new Gt(1,1,1,1),Gt.transparent=new Gt(0,0,0,0),Gt.red=new Gt(1,0,0,1);class lo{constructor(r,o,l){this.sensitivity=r?o?"variant":"case":o?"accent":"base",this.locale=l,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,o){return this.collator.compare(r,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class uo{constructor(r,o,l,p,m){this.text=r,this.image=o,this.scale=l,this.fontStack=p,this.textColor=m}}class Ar{constructor(r){this.sections=r}static fromString(r){return new Ar([new uo(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof Ar?r:Ar.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class sn{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof sn)return r;if(typeof r=="number")return new sn([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const o of r)if(typeof o!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new sn(r)}}toString(){return JSON.stringify(this.values)}}const co=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ln{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof ln)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let o=0;o<r.length;o+=2){const l=r[o],p=r[o+1];if(typeof l!="string"||!co.has(l)||!Array.isArray(p)||p.length!==2||typeof p[0]!="number"||typeof p[1]!="number")return}return new ln(r)}}toString(){return JSON.stringify(this.values)}}class At{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new At({name:r,available:!1}):null}}function Pr(i,r,o,l){return typeof i=="number"&&i>=0&&i<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof o=="number"&&o>=0&&o<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:`Invalid rgba value [${[i,r,o,l].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof l=="number"?[i,r,o,l]:[i,r,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Or(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof Gt||i instanceof lo||i instanceof Ar||i instanceof sn||i instanceof ln||i instanceof At)return!0;if(Array.isArray(i)){for(const r of i)if(!Or(r))return!1;return!0}if(typeof i=="object"){for(const r in i)if(!Or(i[r]))return!1;return!0}return!1}function Nt(i){if(i===null)return Ui;if(typeof i=="string")return Rt;if(typeof i=="boolean")return Ct;if(typeof i=="number")return Ne;if(i instanceof Gt)return rn;if(i instanceof lo)return kn;if(i instanceof Ar)return Yn;if(i instanceof sn)return Ht;if(i instanceof ln)return F;if(i instanceof At)return G;if(Array.isArray(i)){const r=i.length;let o;for(const l of i){const p=Nt(l);if(o){if(o===p)continue;o=zt;break}o=p}return B(o||zt,r)}return nn}function jn(i){const r=typeof i;return i===null?"":r==="string"||r==="number"||r==="boolean"?String(i):i instanceof Gt||i instanceof Ar||i instanceof sn||i instanceof ln||i instanceof At?i.toString():JSON.stringify(i)}class ho{constructor(r,o){this.type=r,this.value=o}static parse(r,o){if(r.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!Or(r[1]))return o.error("invalid value");const l=r[1];let p=Nt(l);const m=o.expectedType;return p.kind!=="array"||p.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(p=m),new ho(p,l)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Mr{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const aa={string:Rt,number:Ne,boolean:Ct,object:nn};class Vi{constructor(r,o){this.type=r,this.args=o}static parse(r,o){if(r.length<2)return o.error("Expected at least one argument.");let l,p=1;const m=r[0];if(m==="array"){let w,S;if(r.length>2){const k=r[1];if(typeof k!="string"||!(k in aa)||k==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);w=aa[k],p++}else w=zt;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return o.error('The length argument to "array" must be a positive integer literal',2);S=r[2],p++}l=B(w,S)}else{if(!aa[m])throw new Error(`Types doesn't contain name = ${m}`);l=aa[m]}const v=[];for(;p<r.length;p++){const w=o.parse(r[p],p,zt);if(!w)return null;v.push(w)}return new Vi(l,v)}evaluate(r){for(let o=0;o<this.args.length;o++){const l=this.args[o].evaluate(r);if(!he(this.type,Nt(l)))return l;if(o===this.args.length-1)throw new Mr(`Expected value to be of type ${j(this.type)}, but found ${j(Nt(l))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const wl={"to-boolean":Ct,"to-color":rn,"to-number":Ne,"to-string":Rt};class po{constructor(r,o){this.type=r,this.args=o}static parse(r,o){if(r.length<2)return o.error("Expected at least one argument.");const l=r[0];if(!wl[l])throw new Error(`Can't parse ${l} as it is not part of the known types`);if((l==="to-boolean"||l==="to-string")&&r.length!==2)return o.error("Expected one argument.");const p=wl[l],m=[];for(let v=1;v<r.length;v++){const w=o.parse(r[v],v,zt);if(!w)return null;m.push(w)}return new po(p,m)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let o,l;for(const p of this.args){if(o=p.evaluate(r),l=null,o instanceof Gt)return o;if(typeof o=="string"){const m=r.parseColor(o);if(m)return m}else if(Array.isArray(o)&&(l=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:Pr(o[0],o[1],o[2],o[3]),!l))return new Gt(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new Mr(l||`Could not parse color from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"padding":{let o;for(const l of this.args){o=l.evaluate(r);const p=sn.parse(o);if(p)return p}throw new Mr(`Could not parse padding from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"variableAnchorOffsetCollection":{let o;for(const l of this.args){o=l.evaluate(r);const p=ln.parse(o);if(p)return p}throw new Mr(`Could not parse variableAnchorOffsetCollection from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"number":{let o=null;for(const l of this.args){if(o=l.evaluate(r),o===null)return 0;const p=Number(o);if(!isNaN(p))return p}throw new Mr(`Could not convert ${JSON.stringify(o)} to number.`)}case"formatted":return Ar.fromString(jn(this.args[0].evaluate(r)));case"resolvedImage":return At.fromString(jn(this.args[0].evaluate(r)));default:return jn(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const sc=["Unknown","Point","LineString","Polygon"];class Ra{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?sc[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let o=this._parseColorCache[r];return o||(o=this._parseColorCache[r]=Gt.parse(r)),o}}class or{constructor(r,o,l=[],p,m=new ci,v=[]){this.registry=r,this.path=l,this.key=l.map(w=>`[${w}]`).join(""),this.scope=m,this.errors=v,this.expectedType=p,this._isConstant=o}parse(r,o,l,p,m={}){return o?this.concat(o,l,p)._parse(r,m):this._parse(r,m)}_parse(r,o){function l(p,m,v){return v==="assert"?new Vi(m,[p]):v==="coerce"?new po(m,[p]):p}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=r[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const m=this.registry[p];if(m){let v=m.parse(r,this);if(!v)return null;if(this.expectedType){const w=this.expectedType,S=v.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||S.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string")if(w.kind!=="padding"||S.kind!=="value"&&S.kind!=="number"&&S.kind!=="array")if(w.kind!=="variableAnchorOffsetCollection"||S.kind!=="value"&&S.kind!=="array"){if(this.checkSubtype(w,S))return null}else v=l(v,w,o.typeAnnotation||"coerce");else v=l(v,w,o.typeAnnotation||"coerce");else v=l(v,w,o.typeAnnotation||"coerce");else v=l(v,w,o.typeAnnotation||"assert")}if(!(v instanceof ho)&&v.type.kind!=="resolvedImage"&&this._isConstant(v)){const w=new Ra;try{v=new ho(v.type,v.evaluate(w))}catch(S){return this.error(S.message),null}}return v}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,o,l){const p=typeof r=="number"?this.path.concat(r):this.path,m=l?this.scope.concat(l):this.scope;return new or(this.registry,this._isConstant,p,o||null,m,this.errors)}error(r,...o){const l=`${this.key}${o.map(p=>`[${p}]`).join("")}`;this.errors.push(new Zr(l,r))}checkSubtype(r,o){const l=he(r,o);return l&&this.error(l),l}}class bl{constructor(r,o){this.type=o.type,this.bindings=[].concat(r),this.result=o}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const o of this.bindings)r(o[1]);r(this.result)}static parse(r,o){if(r.length<4)return o.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const l=[];for(let m=1;m<r.length-1;m+=2){const v=r[m];if(typeof v!="string")return o.error(`Expected string, but found ${typeof v} instead.`,m);if(/[^a-zA-Z0-9_]/.test(v))return o.error("Variable names must contain only alphanumeric characters or '_'.",m);const w=o.parse(r[m+1],m+1);if(!w)return null;l.push([v,w])}const p=o.parse(r[r.length-1],r.length-1,o.expectedType,l);return p?new bl(l,p):null}outputDefined(){return this.result.outputDefined()}}class Da{constructor(r,o){this.type=o.type,this.name=r,this.boundExpression=o}static parse(r,o){if(r.length!==2||typeof r[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const l=r[1];return o.scope.has(l)?new Da(l,o.scope.get(l)):o.error(`Unknown variable "${l}". Make sure "${l}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class lc{constructor(r,o,l){this.type=r,this.index=o,this.input=l}static parse(r,o){if(r.length!==3)return o.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const l=o.parse(r[1],1,Ne),p=o.parse(r[2],2,B(o.expectedType||zt));return l&&p?new lc(p.type.itemType,l,p):null}evaluate(r){const o=this.index.evaluate(r),l=this.input.evaluate(r);if(o<0)throw new Mr(`Array index out of bounds: ${o} < 0.`);if(o>=l.length)throw new Mr(`Array index out of bounds: ${o} > ${l.length-1}.`);if(o!==Math.floor(o))throw new Mr(`Array index must be an integer, but found ${o} instead.`);return l[o]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class Sl{constructor(r,o){this.type=Ct,this.needle=r,this.haystack=o}static parse(r,o){if(r.length!==3)return o.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const l=o.parse(r[1],1,zt),p=o.parse(r[2],2,zt);return l&&p?me(l.type,[Ct,Rt,Ne,Ui,zt])?new Sl(l,p):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${j(l.type)} instead`):null}evaluate(r){const o=this.needle.evaluate(r),l=this.haystack.evaluate(r);if(!l)return!1;if(!_e(o,["boolean","string","number","null"]))throw new Mr(`Expected first argument to be of type boolean, string, number or null, but found ${j(Nt(o))} instead.`);if(!_e(l,["string","array"]))throw new Mr(`Expected second argument to be of type array or string, but found ${j(Nt(l))} instead.`);return l.indexOf(o)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class Is{constructor(r,o,l){this.type=Ne,this.needle=r,this.haystack=o,this.fromIndex=l}static parse(r,o){if(r.length<=2||r.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const l=o.parse(r[1],1,zt),p=o.parse(r[2],2,zt);if(!l||!p)return null;if(!me(l.type,[Ct,Rt,Ne,Ui,zt]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${j(l.type)} instead`);if(r.length===4){const m=o.parse(r[3],3,Ne);return m?new Is(l,p,m):null}return new Is(l,p)}evaluate(r){const o=this.needle.evaluate(r),l=this.haystack.evaluate(r);if(!_e(o,["boolean","string","number","null"]))throw new Mr(`Expected first argument to be of type boolean, string, number or null, but found ${j(Nt(o))} instead.`);if(!_e(l,["string","array"]))throw new Mr(`Expected second argument to be of type array or string, but found ${j(Nt(l))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(r);return l.indexOf(o,p)}return l.indexOf(o)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class uc{constructor(r,o,l,p,m,v){this.inputType=r,this.type=o,this.input=l,this.cases=p,this.outputs=m,this.otherwise=v}static parse(r,o){if(r.length<5)return o.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return o.error("Expected an even number of arguments.");let l,p;o.expectedType&&o.expectedType.kind!=="value"&&(p=o.expectedType);const m={},v=[];for(let k=2;k<r.length-1;k+=2){let P=r[k];const A=r[k+1];Array.isArray(P)||(P=[P]);const O=o.concat(k);if(P.length===0)return O.error("Expected at least one branch label.");for(const V of P){if(typeof V!="number"&&typeof V!="string")return O.error("Branch labels must be numbers or strings.");if(typeof V=="number"&&Math.abs(V)>Number.MAX_SAFE_INTEGER)return O.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof V=="number"&&Math.floor(V)!==V)return O.error("Numeric branch labels must be integer values.");if(l){if(O.checkSubtype(l,Nt(V)))return null}else l=Nt(V);if(m[String(V)]!==void 0)return O.error("Branch labels must be unique.");m[String(V)]=v.length}const N=o.parse(A,k,p);if(!N)return null;p=p||N.type,v.push(N)}const w=o.parse(r[1],1,zt);if(!w)return null;const S=o.parse(r[r.length-1],r.length-1,p);return S?w.type.kind!=="value"&&o.concat(1).checkSubtype(l,w.type)?null:new uc(l,p,w,m,v,S):null}evaluate(r){const o=this.input.evaluate(r);return(Nt(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class Tl{constructor(r,o,l){this.type=r,this.branches=o,this.otherwise=l}static parse(r,o){if(r.length<4)return o.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return o.error("Expected an odd number of arguments.");let l;o.expectedType&&o.expectedType.kind!=="value"&&(l=o.expectedType);const p=[];for(let v=1;v<r.length-1;v+=2){const w=o.parse(r[v],v,Ct);if(!w)return null;const S=o.parse(r[v+1],v+1,l);if(!S)return null;p.push([w,S]),l=l||S.type}const m=o.parse(r[r.length-1],r.length-1,l);if(!m)return null;if(!l)throw new Error("Can't infer output type");return new Tl(l,p,m)}evaluate(r){for(const[o,l]of this.branches)if(o.evaluate(r))return l.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[o,l]of this.branches)r(o),r(l);r(this.otherwise)}outputDefined(){return this.branches.every(([r,o])=>o.outputDefined())&&this.otherwise.outputDefined()}}class As{constructor(r,o,l,p){this.type=r,this.input=o,this.beginIndex=l,this.endIndex=p}static parse(r,o){if(r.length<=2||r.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const l=o.parse(r[1],1,zt),p=o.parse(r[2],2,Ne);if(!l||!p)return null;if(!me(l.type,[B(zt),Rt,zt]))return o.error(`Expected first argument to be of type array or string, but found ${j(l.type)} instead`);if(r.length===4){const m=o.parse(r[3],3,Ne);return m?new As(l.type,l,p,m):null}return new As(l.type,l,p)}evaluate(r){const o=this.input.evaluate(r),l=this.beginIndex.evaluate(r);if(!_e(o,["string","array"]))throw new Mr(`Expected first argument to be of type array or string, but found ${j(Nt(o))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(r);return o.slice(l,p)}return o.slice(l)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function El(i,r){const o=i.length-1;let l,p,m=0,v=o,w=0;for(;m<=v;)if(w=Math.floor((m+v)/2),l=i[w],p=i[w+1],l<=r){if(w===o||r<p)return w;m=w+1}else{if(!(l>r))throw new Mr("Input is not a number.");v=w-1}return 0}class Ms{constructor(r,o,l){this.type=r,this.input=o,this.labels=[],this.outputs=[];for(const[p,m]of l)this.labels.push(p),this.outputs.push(m)}static parse(r,o){if(r.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return o.error("Expected an even number of arguments.");const l=o.parse(r[1],1,Ne);if(!l)return null;const p=[];let m=null;o.expectedType&&o.expectedType.kind!=="value"&&(m=o.expectedType);for(let v=1;v<r.length;v+=2){const w=v===1?-1/0:r[v],S=r[v+1],k=v,P=v+1;if(typeof w!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(p.length&&p[p.length-1][0]>=w)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);const A=o.parse(S,P,m);if(!A)return null;m=m||A.type,p.push([w,A])}return new Ms(m,l,p)}evaluate(r){const o=this.labels,l=this.outputs;if(o.length===1)return l[0].evaluate(r);const p=this.input.evaluate(r);if(p<=o[0])return l[0].evaluate(r);const m=o.length;return p>=o[m-1]?l[m-1].evaluate(r):l[El(o,p)].evaluate(r)}eachChild(r){r(this.input);for(const o of this.outputs)r(o)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Em(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var km=cc;function cc(i,r,o,l){this.cx=3*i,this.bx=3*(o-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(l-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=r,this.p2x=o,this.p2y=l}cc.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,r){if(r===void 0&&(r=1e-6),i<0)return 0;if(i>1)return 1;for(var o=i,l=0;l<8;l++){var p=this.sampleCurveX(o)-i;if(Math.abs(p)<r)return o;var m=this.sampleCurveDerivativeX(o);if(Math.abs(m)<1e-6)break;o-=p/m}var v=0,w=1;for(o=i,l=0;l<20&&(p=this.sampleCurveX(o),!(Math.abs(p-i)<r));l++)i>p?v=o:w=o,o=.5*(w-v)+v;return o},solve:function(i,r){return this.sampleCurveY(this.solveCurveX(i,r))}};var xd=Em(km);function sa(i,r,o){return i+o*(r-i)}function kl(i,r,o){return i.map((l,p)=>sa(l,r[p],o))}const Un={number:sa,color:function(i,r,o,l="rgb"){switch(l){case"rgb":{const[p,m,v,w]=kl(i.rgb,r.rgb,o);return new Gt(p,m,v,w,!1)}case"hcl":{const[p,m,v,w]=i.hcl,[S,k,P,A]=r.hcl;let O,N;if(isNaN(p)||isNaN(S))isNaN(p)?isNaN(S)?O=NaN:(O=S,v!==1&&v!==0||(N=k)):(O=p,P!==1&&P!==0||(N=m));else{let ve=S-p;S>p&&ve>180?ve-=360:S<p&&p-S>180&&(ve+=360),O=p+o*ve}const[V,q,ee,oe]=function([ve,de,ye,Ce]){return ve=isNaN(ve)?0:ve*We,ct([ye,Math.cos(ve)*de,Math.sin(ve)*de,Ce])}([O,N??sa(m,k,o),sa(v,P,o),sa(w,A,o)]);return new Gt(V,q,ee,oe,!1)}case"lab":{const[p,m,v,w]=ct(kl(i.lab,r.lab,o));return new Gt(p,m,v,w,!1)}}},array:kl,padding:function(i,r,o){return new sn(kl(i.values,r.values,o))},variableAnchorOffsetCollection:function(i,r,o){const l=i.values,p=r.values;if(l.length!==p.length)throw new Mr(`Cannot interpolate values of different length. from: ${i.toString()}, to: ${r.toString()}`);const m=[];for(let v=0;v<l.length;v+=2){if(l[v]!==p[v])throw new Mr(`Cannot interpolate values containing mismatched anchors. from[${v}]: ${l[v]}, to[${v}]: ${p[v]}`);m.push(l[v]);const[w,S]=l[v+1],[k,P]=p[v+1];m.push([sa(w,k,o),sa(S,P,o)])}return new ln(m)}};class hi{constructor(r,o,l,p,m){this.type=r,this.operator=o,this.interpolation=l,this.input=p,this.labels=[],this.outputs=[];for(const[v,w]of m)this.labels.push(v),this.outputs.push(w)}static interpolationFactor(r,o,l,p){let m=0;if(r.name==="exponential")m=hc(o,r.base,l,p);else if(r.name==="linear")m=hc(o,1,l,p);else if(r.name==="cubic-bezier"){const v=r.controlPoints;m=new xd(v[0],v[1],v[2],v[3]).solve(hc(o,1,l,p))}return m}static parse(r,o){let[l,p,m,...v]=r;if(!Array.isArray(p)||p.length===0)return o.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const k=p[1];if(typeof k!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:k}}else{if(p[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const k=p.slice(1);if(k.length!==4||k.some(P=>typeof P!="number"||P<0||P>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:k}}}if(r.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(m=o.parse(m,2,Ne),!m)return null;const w=[];let S=null;l==="interpolate-hcl"||l==="interpolate-lab"?S=rn:o.expectedType&&o.expectedType.kind!=="value"&&(S=o.expectedType);for(let k=0;k<v.length;k+=2){const P=v[k],A=v[k+1],O=k+3,N=k+4;if(typeof P!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(w.length&&w[w.length-1][0]>=P)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',O);const V=o.parse(A,N,S);if(!V)return null;S=S||V.type,w.push([P,V])}return ue(S,Ne)||ue(S,rn)||ue(S,Ht)||ue(S,F)||ue(S,B(Ne))?new hi(S,l,p,m,w):o.error(`Type ${j(S)} is not interpolatable.`)}evaluate(r){const o=this.labels,l=this.outputs;if(o.length===1)return l[0].evaluate(r);const p=this.input.evaluate(r);if(p<=o[0])return l[0].evaluate(r);const m=o.length;if(p>=o[m-1])return l[m-1].evaluate(r);const v=El(o,p),w=hi.interpolationFactor(this.interpolation,p,o[v],o[v+1]),S=l[v].evaluate(r),k=l[v+1].evaluate(r);switch(this.operator){case"interpolate":return Un[this.type.kind](S,k,w);case"interpolate-hcl":return Un.color(S,k,w,"hcl");case"interpolate-lab":return Un.color(S,k,w,"lab")}}eachChild(r){r(this.input);for(const o of this.outputs)r(o)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function hc(i,r,o,l){const p=l-o,m=i-o;return p===0?0:r===1?m/p:(Math.pow(r,m)-1)/(Math.pow(r,p)-1)}class Cl{constructor(r,o){this.type=r,this.args=o}static parse(r,o){if(r.length<2)return o.error("Expectected at least one argument.");let l=null;const p=o.expectedType;p&&p.kind!=="value"&&(l=p);const m=[];for(const w of r.slice(1)){const S=o.parse(w,1+m.length,l,void 0,{typeAnnotation:"omit"});if(!S)return null;l=l||S.type,m.push(S)}if(!l)throw new Error("No output type");const v=p&&m.some(w=>he(p,w.type));return new Cl(v?zt:l,m)}evaluate(r){let o,l=null,p=0;for(const m of this.args)if(p++,l=m.evaluate(r),l&&l instanceof At&&!l.available&&(o||(o=l.name),l=null,p===this.args.length&&(l=o)),l!==null)break;return l}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}function dc(i,r){return i==="=="||i==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function pc(i,r,o,l){return l.compare(r,o)===0}function Oa(i,r,o){const l=i!=="=="&&i!=="!=";return class AS{constructor(m,v,w){this.type=Ct,this.lhs=m,this.rhs=v,this.collator=w,this.hasUntypedArgument=m.type.kind==="value"||v.type.kind==="value"}static parse(m,v){if(m.length!==3&&m.length!==4)return v.error("Expected two or three arguments.");const w=m[0];let S=v.parse(m[1],1,zt);if(!S)return null;if(!dc(w,S.type))return v.concat(1).error(`"${w}" comparisons are not supported for type '${j(S.type)}'.`);let k=v.parse(m[2],2,zt);if(!k)return null;if(!dc(w,k.type))return v.concat(2).error(`"${w}" comparisons are not supported for type '${j(k.type)}'.`);if(S.type.kind!==k.type.kind&&S.type.kind!=="value"&&k.type.kind!=="value")return v.error(`Cannot compare types '${j(S.type)}' and '${j(k.type)}'.`);l&&(S.type.kind==="value"&&k.type.kind!=="value"?S=new Vi(k.type,[S]):S.type.kind!=="value"&&k.type.kind==="value"&&(k=new Vi(S.type,[k])));let P=null;if(m.length===4){if(S.type.kind!=="string"&&k.type.kind!=="string"&&S.type.kind!=="value"&&k.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(P=v.parse(m[3],3,kn),!P)return null}return new AS(S,k,P)}evaluate(m){const v=this.lhs.evaluate(m),w=this.rhs.evaluate(m);if(l&&this.hasUntypedArgument){const S=Nt(v),k=Nt(w);if(S.kind!==k.kind||S.kind!=="string"&&S.kind!=="number")throw new Mr(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${S.kind}, ${k.kind}) instead.`)}if(this.collator&&!l&&this.hasUntypedArgument){const S=Nt(v),k=Nt(w);if(S.kind!=="string"||k.kind!=="string")return r(m,v,w)}return this.collator?o(m,v,w,this.collator.evaluate(m)):r(m,v,w)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}}}const Cm=Oa("==",function(i,r,o){return r===o},pc),wd=Oa("!=",function(i,r,o){return r!==o},function(i,r,o,l){return!pc(0,r,o,l)}),bd=Oa("<",function(i,r,o){return r<o},function(i,r,o,l){return l.compare(r,o)<0}),Pm=Oa(">",function(i,r,o){return r>o},function(i,r,o,l){return l.compare(r,o)>0}),Im=Oa("<=",function(i,r,o){return r<=o},function(i,r,o,l){return l.compare(r,o)<=0}),Am=Oa(">=",function(i,r,o){return r>=o},function(i,r,o,l){return l.compare(r,o)>=0});class Pl{constructor(r,o,l){this.type=kn,this.locale=l,this.caseSensitive=r,this.diacriticSensitive=o}static parse(r,o){if(r.length!==2)return o.error("Expected one argument.");const l=r[1];if(typeof l!="object"||Array.isArray(l))return o.error("Collator options argument must be an object.");const p=o.parse(l["case-sensitive"]!==void 0&&l["case-sensitive"],1,Ct);if(!p)return null;const m=o.parse(l["diacritic-sensitive"]!==void 0&&l["diacritic-sensitive"],1,Ct);if(!m)return null;let v=null;return l.locale&&(v=o.parse(l.locale,1,Rt),!v)?null:new Pl(p,m,v)}evaluate(r){return new lo(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}class fc{constructor(r,o,l,p,m){this.type=Rt,this.number=r,this.locale=o,this.currency=l,this.minFractionDigits=p,this.maxFractionDigits=m}static parse(r,o){if(r.length!==3)return o.error("Expected two arguments.");const l=o.parse(r[1],1,Ne);if(!l)return null;const p=r[2];if(typeof p!="object"||Array.isArray(p))return o.error("NumberFormat options argument must be an object.");let m=null;if(p.locale&&(m=o.parse(p.locale,1,Rt),!m))return null;let v=null;if(p.currency&&(v=o.parse(p.currency,1,Rt),!v))return null;let w=null;if(p["min-fraction-digits"]&&(w=o.parse(p["min-fraction-digits"],1,Ne),!w))return null;let S=null;return p["max-fraction-digits"]&&(S=o.parse(p["max-fraction-digits"],1,Ne),!S)?null:new fc(l,m,v,w,S)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class Il{constructor(r){this.type=Yn,this.sections=r}static parse(r,o){if(r.length<2)return o.error("Expected at least one argument.");const l=r[1];if(!Array.isArray(l)&&typeof l=="object")return o.error("First argument must be an image or text section.");const p=[];let m=!1;for(let v=1;v<=r.length-1;++v){const w=r[v];if(m&&typeof w=="object"&&!Array.isArray(w)){m=!1;let S=null;if(w["font-scale"]&&(S=o.parse(w["font-scale"],1,Ne),!S))return null;let k=null;if(w["text-font"]&&(k=o.parse(w["text-font"],1,B(Rt)),!k))return null;let P=null;if(w["text-color"]&&(P=o.parse(w["text-color"],1,rn),!P))return null;const A=p[p.length-1];A.scale=S,A.font=k,A.textColor=P}else{const S=o.parse(r[v],1,zt);if(!S)return null;const k=S.type.kind;if(k!=="string"&&k!=="value"&&k!=="null"&&k!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,p.push({content:S,scale:null,font:null,textColor:null})}}return new Il(p)}evaluate(r){return new Ar(this.sections.map(o=>{const l=o.content.evaluate(r);return Nt(l)===G?new uo("",l,null,null,null):new uo(jn(l),null,o.scale?o.scale.evaluate(r):null,o.font?o.font.evaluate(r).join(","):null,o.textColor?o.textColor.evaluate(r):null)}))}eachChild(r){for(const o of this.sections)r(o.content),o.scale&&r(o.scale),o.font&&r(o.font),o.textColor&&r(o.textColor)}outputDefined(){return!1}}class mc{constructor(r){this.type=G,this.input=r}static parse(r,o){if(r.length!==2)return o.error("Expected two arguments.");const l=o.parse(r[1],1,Rt);return l?new mc(l):o.error("No image name provided.")}evaluate(r){const o=this.input.evaluate(r),l=At.fromString(o);return l&&r.availableImages&&(l.available=r.availableImages.indexOf(o)>-1),l}eachChild(r){r(this.input)}outputDefined(){return!1}}class zs{constructor(r){this.type=Ne,this.input=r}static parse(r,o){if(r.length!==2)return o.error(`Expected 1 argument, but found ${r.length-1} instead.`);const l=o.parse(r[1],1);return l?l.type.kind!=="array"&&l.type.kind!=="string"&&l.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${j(l.type)} instead.`):new zs(l):null}evaluate(r){const o=this.input.evaluate(r);if(typeof o=="string"||Array.isArray(o))return o.length;throw new Mr(`Expected value to be of type string or array, but found ${j(Nt(o))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const di=8192;function ar(i,r){const o=(180+i[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,p=Math.pow(2,r.z);return[Math.round(o*p*di),Math.round(l*p*di)]}function gc(i,r){const o=Math.pow(2,r.z);return[(p=(i[0]/di+r.x)/o,360*p-180),(l=(i[1]/di+r.y)/o,360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90)];var l,p}function Ls(i,r){i[0]=Math.min(i[0],r[0]),i[1]=Math.min(i[1],r[1]),i[2]=Math.max(i[2],r[0]),i[3]=Math.max(i[3],r[1])}function Rs(i,r){return!(i[0]<=r[0]||i[2]>=r[2]||i[1]<=r[1]||i[3]>=r[3])}function Mm(i,r,o){const l=i[0]-r[0],p=i[1]-r[1],m=i[0]-o[0],v=i[1]-o[1];return l*v-m*p==0&&l*m<=0&&p*v<=0}function Al(i,r,o,l){return(p=[l[0]-o[0],l[1]-o[1]])[0]*(m=[r[0]-i[0],r[1]-i[1]])[1]-p[1]*m[0]!=0&&!(!Td(i,r,o,l)||!Td(o,l,i,r));var p,m}function zm(i,r,o){for(const l of o)for(let p=0;p<l.length-1;++p)if(Al(i,r,l[p],l[p+1]))return!0;return!1}function Fa(i,r,o=!1){let l=!1;for(const w of r)for(let S=0;S<w.length-1;S++){if(Mm(i,w[S],w[S+1]))return o;(m=w[S])[1]>(p=i)[1]!=(v=w[S+1])[1]>p[1]&&p[0]<(v[0]-m[0])*(p[1]-m[1])/(v[1]-m[1])+m[0]&&(l=!l)}var p,m,v;return l}function Lm(i,r){for(const o of r)if(Fa(i,o))return!0;return!1}function Sd(i,r){for(const o of i)if(!Fa(o,r))return!1;for(let o=0;o<i.length-1;++o)if(zm(i[o],i[o+1],r))return!1;return!0}function Rm(i,r){for(const o of r)if(Sd(i,o))return!0;return!1}function Td(i,r,o,l){const p=l[0]-o[0],m=l[1]-o[1],v=(i[0]-o[0])*m-p*(i[1]-o[1]),w=(r[0]-o[0])*m-p*(r[1]-o[1]);return v>0&&w<0||v<0&&w>0}function yc(i,r,o){const l=[];for(let p=0;p<i.length;p++){const m=[];for(let v=0;v<i[p].length;v++){const w=ar(i[p][v],o);Ls(r,w),m.push(w)}l.push(m)}return l}function Ed(i,r,o){const l=[];for(let p=0;p<i.length;p++){const m=yc(i[p],r,o);l.push(m)}return l}function kd(i,r,o,l){if(i[0]<o[0]||i[0]>o[2]){const p=.5*l;let m=i[0]-o[0]>p?-l:o[0]-i[0]>p?l:0;m===0&&(m=i[0]-o[2]>p?-l:o[2]-i[0]>p?l:0),i[0]+=m}Ls(r,i)}function Cd(i,r,o,l){const p=Math.pow(2,l.z)*di,m=[l.x*di,l.y*di],v=[];for(const w of i)for(const S of w){const k=[S.x+m[0],S.y+m[1]];kd(k,r,o,p),v.push(k)}return v}function Pd(i,r,o,l){const p=Math.pow(2,l.z)*di,m=[l.x*di,l.y*di],v=[];for(const S of i){const k=[];for(const P of S){const A=[P.x+m[0],P.y+m[1]];Ls(r,A),k.push(A)}v.push(k)}if(r[2]-r[0]<=p/2){(w=r)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(const S of v)for(const k of S)kd(k,r,o,p)}var w;return v}class la{constructor(r,o){this.type=Ct,this.geojson=r,this.geometries=o}static parse(r,o){if(r.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Or(r[1])){const l=r[1];if(l.type==="FeatureCollection"){const p=[];for(const m of l.features){const{type:v,coordinates:w}=m.geometry;v==="Polygon"&&p.push(w),v==="MultiPolygon"&&p.push(...w)}if(p.length)return new la(l,{type:"MultiPolygon",coordinates:p})}else if(l.type==="Feature"){const p=l.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new la(l,l.geometry)}else if(l.type==="Polygon"||l.type==="MultiPolygon")return new la(l,l)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(o,l){const p=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],v=o.canonicalID();if(l.type==="Polygon"){const w=yc(l.coordinates,m,v),S=Cd(o.geometry(),p,m,v);if(!Rs(p,m))return!1;for(const k of S)if(!Fa(k,w))return!1}if(l.type==="MultiPolygon"){const w=Ed(l.coordinates,m,v),S=Cd(o.geometry(),p,m,v);if(!Rs(p,m))return!1;for(const k of S)if(!Lm(k,w))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(o,l){const p=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],v=o.canonicalID();if(l.type==="Polygon"){const w=yc(l.coordinates,m,v),S=Pd(o.geometry(),p,m,v);if(!Rs(p,m))return!1;for(const k of S)if(!Sd(k,w))return!1}if(l.type==="MultiPolygon"){const w=Ed(l.coordinates,m,v),S=Pd(o.geometry(),p,m,v);if(!Rs(p,m))return!1;for(const k of S)if(!Rm(k,w))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Id=class{constructor(i=[],r=Dm){if(this.data=i,this.length=this.data.length,this.compare=r,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(i){this.data.push(i),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const i=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:r,compare:o}=this,l=r[i];for(;i>0;){const p=i-1>>1,m=r[p];if(o(l,m)>=0)break;r[i]=m,i=p}r[i]=l}_down(i){const{data:r,compare:o}=this,l=this.length>>1,p=r[i];for(;i<l;){let m=1+(i<<1),v=r[m];const w=m+1;if(w<this.length&&o(r[w],v)<0&&(m=w,v=r[w]),o(v,p)>=0)break;r[i]=v,i=m}r[i]=p}};function Dm(i,r){return i<r?-1:i>r?1:0}function Om(i,r,o,l,p){Ad(i,r,o,l||i.length-1,p||Fm)}function Ad(i,r,o,l,p){for(;l>o;){if(l-o>600){var m=l-o+1,v=r-o+1,w=Math.log(m),S=.5*Math.exp(2*w/3),k=.5*Math.sqrt(w*S*(m-S)/m)*(v-m/2<0?-1:1);Ad(i,r,Math.max(o,Math.floor(r-v*S/m+k)),Math.min(l,Math.floor(r+(m-v)*S/m+k)),p)}var P=i[r],A=o,O=l;for(Ds(i,o,r),p(i[l],P)>0&&Ds(i,o,l);A<O;){for(Ds(i,A,O),A++,O--;p(i[A],P)<0;)A++;for(;p(i[O],P)>0;)O--}p(i[o],P)===0?Ds(i,o,O):Ds(i,++O,l),O<=r&&(o=O+1),r<=O&&(l=O-1)}}function Ds(i,r,o){var l=i[r];i[r]=i[o],i[o]=l}function Fm(i,r){return i<r?-1:i>r?1:0}function Ml(i,r){if(i.length<=1)return[i];const o=[];let l,p;for(const m of i){const v=Nm(m);v!==0&&(m.area=Math.abs(v),p===void 0&&(p=v<0),p===v<0?(l&&o.push(l),l=[m]):l.push(m))}if(l&&o.push(l),r>1)for(let m=0;m<o.length;m++)o[m].length<=r||(Om(o[m],r,1,o[m].length-1,Bm),o[m]=o[m].slice(0,r));return o}function Bm(i,r){return r.area-i.area}function Nm(i){let r=0;for(let o,l,p=0,m=i.length,v=m-1;p<m;v=p++)o=i[p],l=i[v],r+=(l.x-o.x)*(o.y+l.y);return r}const Md=1/298.257223563,zd=Md*(2-Md),Ld=Math.PI/180;class _c{constructor(r){const o=6378.137*Ld*1e3,l=Math.cos(r*Ld),p=1/(1-zd*(1-l*l)),m=Math.sqrt(p);this.kx=o*m*l,this.ky=o*m*p*(1-zd)}distance(r,o){const l=this.wrap(r[0]-o[0])*this.kx,p=(r[1]-o[1])*this.ky;return Math.sqrt(l*l+p*p)}pointOnLine(r,o){let l,p,m,v,w=1/0;for(let S=0;S<r.length-1;S++){let k=r[S][0],P=r[S][1],A=this.wrap(r[S+1][0]-k)*this.kx,O=(r[S+1][1]-P)*this.ky,N=0;A===0&&O===0||(N=(this.wrap(o[0]-k)*this.kx*A+(o[1]-P)*this.ky*O)/(A*A+O*O),N>1?(k=r[S+1][0],P=r[S+1][1]):N>0&&(k+=A/this.kx*N,P+=O/this.ky*N)),A=this.wrap(o[0]-k)*this.kx,O=(o[1]-P)*this.ky;const V=A*A+O*O;V<w&&(w=V,l=k,p=P,m=S,v=N)}return{point:[l,p],index:m,t:Math.max(0,Math.min(1,v))}}wrap(r){for(;r<-180;)r+=360;for(;r>180;)r-=360;return r}}function Rd(i,r){return r[0]-i[0]}function Ba(i){return i[1]-i[0]+1}function ko(i,r){return i[1]>=i[0]&&i[1]<r}function vc(i,r){if(i[0]>i[1])return[null,null];const o=Ba(i);if(r){if(o===2)return[i,null];const p=Math.floor(o/2);return[[i[0],i[0]+p],[i[0]+p,i[1]]]}if(o===1)return[i,null];const l=Math.floor(o/2)-1;return[[i[0],i[0]+l],[i[0]+l+1,i[1]]]}function xc(i,r){if(!ko(r,i.length))return[1/0,1/0,-1/0,-1/0];const o=[1/0,1/0,-1/0,-1/0];for(let l=r[0];l<=r[1];++l)Ls(o,i[l]);return o}function wc(i){const r=[1/0,1/0,-1/0,-1/0];for(const o of i)for(const l of o)Ls(r,l);return r}function Ur(i){return i[0]!==-1/0&&i[1]!==-1/0&&i[2]!==1/0&&i[3]!==1/0}function bc(i,r,o){if(!Ur(i)||!Ur(r))return NaN;let l=0,p=0;return i[2]<r[0]&&(l=r[0]-i[2]),i[0]>r[2]&&(l=i[0]-r[2]),i[1]>r[3]&&(p=i[1]-r[3]),i[3]<r[1]&&(p=r[1]-i[3]),o.distance([0,0],[l,p])}function $t(i,r,o){const l=o.pointOnLine(r,i);return o.distance(i,l.point)}function Os(i,r,o,l,p){const m=Math.min($t(i,[o,l],p),$t(r,[o,l],p)),v=Math.min($t(o,[i,r],p),$t(l,[i,r],p));return Math.min(m,v)}function zr(i,r,o,l,p){if(!ko(r,i.length)||!ko(l,o.length))return 1/0;let m=1/0;for(let v=r[0];v<r[1];++v){const w=i[v],S=i[v+1];for(let k=l[0];k<l[1];++k){const P=o[k],A=o[k+1];if(Al(w,S,P,A))return 0;m=Math.min(m,Os(w,S,P,A,p))}}return m}function Ir(i,r,o,l,p){if(!ko(r,i.length)||!ko(l,o.length))return NaN;let m=1/0;for(let v=r[0];v<=r[1];++v)for(let w=l[0];w<=l[1];++w)if(m=Math.min(m,p.distance(i[v],o[w])),m===0)return m;return m}function zl(i,r,o){if(Fa(i,r,!0))return 0;let l=1/0;for(const p of r){const m=p[0],v=p[p.length-1];if(m!==v&&(l=Math.min(l,$t(i,[v,m],o)),l===0))return l;const w=o.pointOnLine(p,i);if(l=Math.min(l,o.distance(i,w.point)),l===0)return l}return l}function Dd(i,r,o,l){if(!ko(r,i.length))return NaN;for(let m=r[0];m<=r[1];++m)if(Fa(i[m],o,!0))return 0;let p=1/0;for(let m=r[0];m<r[1];++m){const v=i[m],w=i[m+1];for(const S of o)for(let k=0,P=S.length,A=P-1;k<P;A=k++){const O=S[A],N=S[k];if(Al(v,w,O,N))return 0;p=Math.min(p,Os(v,w,O,N,l))}}return p}function Sc(i,r){for(const o of i)for(const l of o)if(Fa(l,r,!0))return!0;return!1}function jm(i,r,o,l=1/0){const p=wc(i),m=wc(r);if(l!==1/0&&bc(p,m,o)>=l)return l;if(Rs(p,m)){if(Sc(i,r))return 0}else if(Sc(r,i))return 0;let v=1/0;for(const w of i)for(let S=0,k=w.length,P=k-1;S<k;P=S++){const A=w[P],O=w[S];for(const N of r)for(let V=0,q=N.length,ee=q-1;V<q;ee=V++){const oe=N[ee],ve=N[V];if(Al(A,O,oe,ve))return 0;v=Math.min(v,Os(A,O,oe,ve,o))}}return v}function Od(i,r,o,l,p,m){if(!m)return;const v=bc(xc(l,m),p,o);v<r&&i.push([v,m,[0,0]])}function Ll(i,r,o,l,p,m,v){if(!m||!v)return;const w=bc(xc(l,m),xc(p,v),o);w<r&&i.push([w,m,v])}function Rl(i,r,o,l,p=1/0){let m=Math.min(l.distance(i[0],o[0][0]),p);if(m===0)return m;const v=new Id([[0,[0,i.length-1],[0,0]]],Rd),w=wc(o);for(;v.length>0;){const S=v.pop();if(S[0]>=m)continue;const k=S[1],P=r?50:100;if(Ba(k)<=P){if(!ko(k,i.length))return NaN;if(r){const A=Dd(i,k,o,l);if(isNaN(A)||A===0)return A;m=Math.min(m,A)}else for(let A=k[0];A<=k[1];++A){const O=zl(i[A],o,l);if(m=Math.min(m,O),m===0)return 0}}else{const A=vc(k,r);Od(v,m,l,i,w,A[0]),Od(v,m,l,i,w,A[1])}}return m}function Fs(i,r,o,l,p,m=1/0){let v=Math.min(m,p.distance(i[0],o[0]));if(v===0)return v;const w=new Id([[0,[0,i.length-1],[0,o.length-1]]],Rd);for(;w.length>0;){const S=w.pop();if(S[0]>=v)continue;const k=S[1],P=S[2],A=r?50:100,O=l?50:100;if(Ba(k)<=A&&Ba(P)<=O){if(!ko(k,i.length)&&ko(P,o.length))return NaN;let N;if(r&&l)N=zr(i,k,o,P,p),v=Math.min(v,N);else if(r&&!l){const V=i.slice(k[0],k[1]+1);for(let q=P[0];q<=P[1];++q)if(N=$t(o[q],V,p),v=Math.min(v,N),v===0)return v}else if(!r&&l){const V=o.slice(P[0],P[1]+1);for(let q=k[0];q<=k[1];++q)if(N=$t(i[q],V,p),v=Math.min(v,N),v===0)return v}else N=Ir(i,k,o,P,p),v=Math.min(v,N)}else{const N=vc(k,r),V=vc(P,l);Ll(w,v,p,i,o,N[0],V[0]),Ll(w,v,p,i,o,N[0],V[1]),Ll(w,v,p,i,o,N[1],V[0]),Ll(w,v,p,i,o,N[1],V[1])}}return v}function Dl(i){return i.type==="MultiPolygon"?i.coordinates.map(r=>({type:"Polygon",coordinates:r})):i.type==="MultiLineString"?i.coordinates.map(r=>({type:"LineString",coordinates:r})):i.type==="MultiPoint"?i.coordinates.map(r=>({type:"Point",coordinates:r})):[i]}class Vo{constructor(r,o){this.type=Ne,this.geojson=r,this.geometries=o}static parse(r,o){if(r.length!==2)return o.error(`'distance' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Or(r[1])){const l=r[1];if(l.type==="FeatureCollection")return new Vo(l,l.features.map(p=>Dl(p.geometry)).flat());if(l.type==="Feature")return new Vo(l,Dl(l.geometry));if("type"in l&&"coordinates"in l)return new Vo(l,Dl(l))}return o.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(o,l){const p=o.geometry(),m=p.flat().map(S=>gc([S.x,S.y],o.canonical));if(p.length===0)return NaN;const v=new _c(m[0][1]);let w=1/0;for(const S of l){switch(S.type){case"Point":w=Math.min(w,Fs(m,!1,[S.coordinates],!1,v,w));break;case"LineString":w=Math.min(w,Fs(m,!1,S.coordinates,!0,v,w));break;case"Polygon":w=Math.min(w,Rl(m,!1,S.coordinates,v,w))}if(w===0)return w}return w}(r,this.geometries);if(r.geometryType()==="LineString")return function(o,l){const p=o.geometry(),m=p.flat().map(S=>gc([S.x,S.y],o.canonical));if(p.length===0)return NaN;const v=new _c(m[0][1]);let w=1/0;for(const S of l){switch(S.type){case"Point":w=Math.min(w,Fs(m,!0,[S.coordinates],!1,v,w));break;case"LineString":w=Math.min(w,Fs(m,!0,S.coordinates,!0,v,w));break;case"Polygon":w=Math.min(w,Rl(m,!0,S.coordinates,v,w))}if(w===0)return w}return w}(r,this.geometries);if(r.geometryType()==="Polygon")return function(o,l){const p=o.geometry();if(p.length===0||p[0].length===0)return NaN;const m=Ml(p,0).map(S=>S.map(k=>k.map(P=>gc([P.x,P.y],o.canonical)))),v=new _c(m[0][0][0][1]);let w=1/0;for(const S of l)for(const k of m){switch(S.type){case"Point":w=Math.min(w,Rl([S.coordinates],!1,k,v,w));break;case"LineString":w=Math.min(w,Rl(S.coordinates,!0,k,v,w));break;case"Polygon":w=Math.min(w,jm(k,S.coordinates,v,w))}if(w===0)return w}return w}(r,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const ua={"==":Cm,"!=":wd,">":Pm,"<":bd,">=":Am,"<=":Im,array:Vi,at:lc,boolean:Vi,case:Tl,coalesce:Cl,collator:Pl,format:Il,image:mc,in:Sl,"index-of":Is,interpolate:hi,"interpolate-hcl":hi,"interpolate-lab":hi,length:zs,let:bl,literal:ho,match:uc,number:Vi,"number-format":fc,object:Vi,slice:As,step:Ms,string:Vi,"to-boolean":po,"to-color":po,"to-number":po,"to-string":po,var:Da,within:la,distance:Vo};class Jn{constructor(r,o,l,p){this.name=r,this.type=o,this._evaluate=l,this.args=p}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,o){const l=r[0],p=Jn.definitions[l];if(!p)return o.error(`Unknown expression "${l}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(p)?p[0]:p.type,v=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,w=v.filter(([k])=>!Array.isArray(k)||k.length===r.length-1);let S=null;for(const[k,P]of w){S=new or(o.registry,Ol,o.path,null,o.scope);const A=[];let O=!1;for(let N=1;N<r.length;N++){const V=r[N],q=Array.isArray(k)?k[N-1]:k.type,ee=S.parse(V,1+A.length,q);if(!ee){O=!0;break}A.push(ee)}if(!O)if(Array.isArray(k)&&k.length!==A.length)S.error(`Expected ${k.length} arguments, but found ${A.length} instead.`);else{for(let N=0;N<A.length;N++){const V=Array.isArray(k)?k[N]:k.type,q=A[N];S.concat(N+1).checkSubtype(V,q.type)}if(S.errors.length===0)return new Jn(l,m,P,A)}}if(w.length===1)o.errors.push(...S.errors);else{const k=(w.length?w:v).map(([A])=>{return O=A,Array.isArray(O)?`(${O.map(j).join(", ")})`:`(${j(O.type)}...)`;var O}).join(" | "),P=[];for(let A=1;A<r.length;A++){const O=o.parse(r[A],1+P.length);if(!O)return null;P.push(j(O.type))}o.error(`Expected arguments of type ${k}, but found (${P.join(", ")}) instead.`)}return null}static register(r,o){Jn.definitions=o;for(const l in o)r[l]=Jn}}function Fd(i,[r,o,l,p]){r=r.evaluate(i),o=o.evaluate(i),l=l.evaluate(i);const m=p?p.evaluate(i):1,v=Pr(r,o,l,m);if(v)throw new Mr(v);return new Gt(r/255,o/255,l/255,m,!1)}function Bd(i,r){return i in r}function Tc(i,r){const o=r[i];return o===void 0?null:o}function ca(i){return{type:i}}function Ol(i){if(i instanceof Da)return Ol(i.boundExpression);if(i instanceof Jn&&i.name==="error"||i instanceof Pl||i instanceof la||i instanceof Vo)return!1;const r=i instanceof po||i instanceof Vi;let o=!0;return i.eachChild(l=>{o=r?o&&Ol(l):o&&l instanceof ho}),!!o&&Fl(i)&&Bl(i,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Fl(i){if(i instanceof Jn&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof la||i instanceof Vo)return!1;let r=!0;return i.eachChild(o=>{r&&!Fl(o)&&(r=!1)}),r}function Bs(i){if(i instanceof Jn&&i.name==="feature-state")return!1;let r=!0;return i.eachChild(o=>{r&&!Bs(o)&&(r=!1)}),r}function Bl(i,r){if(i instanceof Jn&&r.indexOf(i.name)>=0)return!1;let o=!0;return i.eachChild(l=>{o&&!Bl(l,r)&&(o=!1)}),o}function Ec(i){return{result:"success",value:i}}function ha(i){return{result:"error",value:i}}function Co(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function Nd(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function Nl(i){return!!i.expression&&i.expression.interpolated}function tr(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function Na(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function jl(i){return i}function Ns(i,r){const o=r.type==="color",l=i.stops&&typeof i.stops[0][0]=="object",p=l||!(l||i.property!==void 0),m=i.type||(Nl(r)?"exponential":"interval");if(o||r.type==="padding"){const P=o?Gt.parse:sn.parse;(i=br({},i)).stops&&(i.stops=i.stops.map(A=>[A[0],P(A[1])])),i.default=P(i.default?i.default:r.default)}if(i.colorSpace&&(v=i.colorSpace)!=="rgb"&&v!=="hcl"&&v!=="lab")throw new Error(`Unknown color space: "${i.colorSpace}"`);var v;let w,S,k;if(m==="exponential")w=Cc;else if(m==="interval")w=jd;else if(m==="categorical"){w=kc,S=Object.create(null);for(const P of i.stops)S[P[0]]=P[1];k=typeof i.stops[0][0]}else{if(m!=="identity")throw new Error(`Unknown function type "${m}"`);w=Ul}if(l){const P={},A=[];for(let V=0;V<i.stops.length;V++){const q=i.stops[V],ee=q[0].zoom;P[ee]===void 0&&(P[ee]={zoom:ee,type:i.type,property:i.property,default:i.default,stops:[]},A.push(ee)),P[ee].stops.push([q[0].value,q[1]])}const O=[];for(const V of A)O.push([P[V].zoom,Ns(P[V],r)]);const N={name:"linear"};return{kind:"composite",interpolationType:N,interpolationFactor:hi.interpolationFactor.bind(void 0,N),zoomStops:O.map(V=>V[0]),evaluate:({zoom:V},q)=>Cc({stops:O,base:i.base},r,V).evaluate(V,q)}}if(p){const P=m==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:P,interpolationFactor:hi.interpolationFactor.bind(void 0,P),zoomStops:i.stops.map(A=>A[0]),evaluate:({zoom:A})=>w(i,r,A,S,k)}}return{kind:"source",evaluate(P,A){const O=A&&A.properties?A.properties[i.property]:void 0;return O===void 0?ja(i.default,r.default):w(i,r,O,S,k)}}}function ja(i,r,o){return i!==void 0?i:r!==void 0?r:o!==void 0?o:void 0}function kc(i,r,o,l,p){return ja(typeof o===p?l[o]:void 0,i.default,r.default)}function jd(i,r,o){if(tr(o)!=="number")return ja(i.default,r.default);const l=i.stops.length;if(l===1||o<=i.stops[0][0])return i.stops[0][1];if(o>=i.stops[l-1][0])return i.stops[l-1][1];const p=El(i.stops.map(m=>m[0]),o);return i.stops[p][1]}function Cc(i,r,o){const l=i.base!==void 0?i.base:1;if(tr(o)!=="number")return ja(i.default,r.default);const p=i.stops.length;if(p===1||o<=i.stops[0][0])return i.stops[0][1];if(o>=i.stops[p-1][0])return i.stops[p-1][1];const m=El(i.stops.map(P=>P[0]),o),v=function(P,A,O,N){const V=N-O,q=P-O;return V===0?0:A===1?q/V:(Math.pow(A,q)-1)/(Math.pow(A,V)-1)}(o,l,i.stops[m][0],i.stops[m+1][0]),w=i.stops[m][1],S=i.stops[m+1][1],k=Un[r.type]||jl;return typeof w.evaluate=="function"?{evaluate(...P){const A=w.evaluate.apply(void 0,P),O=S.evaluate.apply(void 0,P);if(A!==void 0&&O!==void 0)return k(A,O,v,i.colorSpace)}}:k(w,S,v,i.colorSpace)}function Ul(i,r,o){switch(r.type){case"color":o=Gt.parse(o);break;case"formatted":o=Ar.fromString(o.toString());break;case"resolvedImage":o=At.fromString(o.toString());break;case"padding":o=sn.parse(o);break;default:tr(o)===r.type||r.type==="enum"&&r.values[o]||(o=void 0)}return ja(o,i.default,r.default)}Jn.register(ua,{error:[{kind:"error"},[Rt],(i,[r])=>{throw new Mr(r.evaluate(i))}],typeof:[Rt,[zt],(i,[r])=>j(Nt(r.evaluate(i)))],"to-rgba":[B(Ne,4),[rn],(i,[r])=>{const[o,l,p,m]=r.evaluate(i).rgb;return[255*o,255*l,255*p,m]}],rgb:[rn,[Ne,Ne,Ne],Fd],rgba:[rn,[Ne,Ne,Ne,Ne],Fd],has:{type:Ct,overloads:[[[Rt],(i,[r])=>Bd(r.evaluate(i),i.properties())],[[Rt,nn],(i,[r,o])=>Bd(r.evaluate(i),o.evaluate(i))]]},get:{type:zt,overloads:[[[Rt],(i,[r])=>Tc(r.evaluate(i),i.properties())],[[Rt,nn],(i,[r,o])=>Tc(r.evaluate(i),o.evaluate(i))]]},"feature-state":[zt,[Rt],(i,[r])=>Tc(r.evaluate(i),i.featureState||{})],properties:[nn,[],i=>i.properties()],"geometry-type":[Rt,[],i=>i.geometryType()],id:[zt,[],i=>i.id()],zoom:[Ne,[],i=>i.globals.zoom],"heatmap-density":[Ne,[],i=>i.globals.heatmapDensity||0],"line-progress":[Ne,[],i=>i.globals.lineProgress||0],accumulated:[zt,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[Ne,ca(Ne),(i,r)=>{let o=0;for(const l of r)o+=l.evaluate(i);return o}],"*":[Ne,ca(Ne),(i,r)=>{let o=1;for(const l of r)o*=l.evaluate(i);return o}],"-":{type:Ne,overloads:[[[Ne,Ne],(i,[r,o])=>r.evaluate(i)-o.evaluate(i)],[[Ne],(i,[r])=>-r.evaluate(i)]]},"/":[Ne,[Ne,Ne],(i,[r,o])=>r.evaluate(i)/o.evaluate(i)],"%":[Ne,[Ne,Ne],(i,[r,o])=>r.evaluate(i)%o.evaluate(i)],ln2:[Ne,[],()=>Math.LN2],pi:[Ne,[],()=>Math.PI],e:[Ne,[],()=>Math.E],"^":[Ne,[Ne,Ne],(i,[r,o])=>Math.pow(r.evaluate(i),o.evaluate(i))],sqrt:[Ne,[Ne],(i,[r])=>Math.sqrt(r.evaluate(i))],log10:[Ne,[Ne],(i,[r])=>Math.log(r.evaluate(i))/Math.LN10],ln:[Ne,[Ne],(i,[r])=>Math.log(r.evaluate(i))],log2:[Ne,[Ne],(i,[r])=>Math.log(r.evaluate(i))/Math.LN2],sin:[Ne,[Ne],(i,[r])=>Math.sin(r.evaluate(i))],cos:[Ne,[Ne],(i,[r])=>Math.cos(r.evaluate(i))],tan:[Ne,[Ne],(i,[r])=>Math.tan(r.evaluate(i))],asin:[Ne,[Ne],(i,[r])=>Math.asin(r.evaluate(i))],acos:[Ne,[Ne],(i,[r])=>Math.acos(r.evaluate(i))],atan:[Ne,[Ne],(i,[r])=>Math.atan(r.evaluate(i))],min:[Ne,ca(Ne),(i,r)=>Math.min(...r.map(o=>o.evaluate(i)))],max:[Ne,ca(Ne),(i,r)=>Math.max(...r.map(o=>o.evaluate(i)))],abs:[Ne,[Ne],(i,[r])=>Math.abs(r.evaluate(i))],round:[Ne,[Ne],(i,[r])=>{const o=r.evaluate(i);return o<0?-Math.round(-o):Math.round(o)}],floor:[Ne,[Ne],(i,[r])=>Math.floor(r.evaluate(i))],ceil:[Ne,[Ne],(i,[r])=>Math.ceil(r.evaluate(i))],"filter-==":[Ct,[Rt,zt],(i,[r,o])=>i.properties()[r.value]===o.value],"filter-id-==":[Ct,[zt],(i,[r])=>i.id()===r.value],"filter-type-==":[Ct,[Rt],(i,[r])=>i.geometryType()===r.value],"filter-<":[Ct,[Rt,zt],(i,[r,o])=>{const l=i.properties()[r.value],p=o.value;return typeof l==typeof p&&l<p}],"filter-id-<":[Ct,[zt],(i,[r])=>{const o=i.id(),l=r.value;return typeof o==typeof l&&o<l}],"filter->":[Ct,[Rt,zt],(i,[r,o])=>{const l=i.properties()[r.value],p=o.value;return typeof l==typeof p&&l>p}],"filter-id->":[Ct,[zt],(i,[r])=>{const o=i.id(),l=r.value;return typeof o==typeof l&&o>l}],"filter-<=":[Ct,[Rt,zt],(i,[r,o])=>{const l=i.properties()[r.value],p=o.value;return typeof l==typeof p&&l<=p}],"filter-id-<=":[Ct,[zt],(i,[r])=>{const o=i.id(),l=r.value;return typeof o==typeof l&&o<=l}],"filter->=":[Ct,[Rt,zt],(i,[r,o])=>{const l=i.properties()[r.value],p=o.value;return typeof l==typeof p&&l>=p}],"filter-id->=":[Ct,[zt],(i,[r])=>{const o=i.id(),l=r.value;return typeof o==typeof l&&o>=l}],"filter-has":[Ct,[zt],(i,[r])=>r.value in i.properties()],"filter-has-id":[Ct,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[Ct,[B(Rt)],(i,[r])=>r.value.indexOf(i.geometryType())>=0],"filter-id-in":[Ct,[B(zt)],(i,[r])=>r.value.indexOf(i.id())>=0],"filter-in-small":[Ct,[Rt,B(zt)],(i,[r,o])=>o.value.indexOf(i.properties()[r.value])>=0],"filter-in-large":[Ct,[Rt,B(zt)],(i,[r,o])=>function(l,p,m,v){for(;m<=v;){const w=m+v>>1;if(p[w]===l)return!0;p[w]>l?v=w-1:m=w+1}return!1}(i.properties()[r.value],o.value,0,o.value.length-1)],all:{type:Ct,overloads:[[[Ct,Ct],(i,[r,o])=>r.evaluate(i)&&o.evaluate(i)],[ca(Ct),(i,r)=>{for(const o of r)if(!o.evaluate(i))return!1;return!0}]]},any:{type:Ct,overloads:[[[Ct,Ct],(i,[r,o])=>r.evaluate(i)||o.evaluate(i)],[ca(Ct),(i,r)=>{for(const o of r)if(o.evaluate(i))return!0;return!1}]]},"!":[Ct,[Ct],(i,[r])=>!r.evaluate(i)],"is-supported-script":[Ct,[Rt],(i,[r])=>{const o=i.globals&&i.globals.isSupportedScript;return!o||o(r.evaluate(i))}],upcase:[Rt,[Rt],(i,[r])=>r.evaluate(i).toUpperCase()],downcase:[Rt,[Rt],(i,[r])=>r.evaluate(i).toLowerCase()],concat:[Rt,ca(zt),(i,r)=>r.map(o=>jn(o.evaluate(i))).join("")],"resolved-locale":[Rt,[kn],(i,[r])=>r.evaluate(i).resolvedLocale()]});class Pc{constructor(r,o){var l;this.expression=r,this._warningHistory={},this._evaluator=new Ra,this._defaultValue=o?(l=o).type==="color"&&Na(l.default)?new Gt(0,0,0,0):l.type==="color"?Gt.parse(l.default)||null:l.type==="padding"?sn.parse(l.default)||null:l.type==="variableAnchorOffsetCollection"?ln.parse(l.default)||null:l.default===void 0?null:l.default:null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(r,o,l,p,m,v){return this._evaluator.globals=r,this._evaluator.feature=o,this._evaluator.featureState=l,this._evaluator.canonical=p,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=v,this.expression.evaluate(this._evaluator)}evaluate(r,o,l,p,m,v){this._evaluator.globals=r,this._evaluator.feature=o||null,this._evaluator.featureState=l||null,this._evaluator.canonical=p,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=v||null;try{const w=this.expression.evaluate(this._evaluator);if(w==null||typeof w=="number"&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new Mr(`Expected value to be one of ${Object.keys(this._enumValues).map(S=>JSON.stringify(S)).join(", ")}, but found ${JSON.stringify(w)} instead.`);return w}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console<"u"&&console.warn(w.message)),this._defaultValue}}}function Vl(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in ua}function $l(i,r){const o=new or(ua,Ol,[],r?function(p){const m={color:rn,string:Rt,number:Ne,enum:Rt,boolean:Ct,formatted:Yn,padding:Ht,resolvedImage:G,variableAnchorOffsetCollection:F};return p.type==="array"?B(m[p.value]||zt,p.length):m[p.type]}(r):void 0),l=o.parse(i,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?Ec(new Pc(l,r)):ha(o.errors)}class Ic{constructor(r,o){this.kind=r,this._styleExpression=o,this.isStateDependent=r!=="constant"&&!Bs(o.expression)}evaluateWithoutErrorHandling(r,o,l,p,m,v){return this._styleExpression.evaluateWithoutErrorHandling(r,o,l,p,m,v)}evaluate(r,o,l,p,m,v){return this._styleExpression.evaluate(r,o,l,p,m,v)}}class Ac{constructor(r,o,l,p){this.kind=r,this.zoomStops=l,this._styleExpression=o,this.isStateDependent=r!=="camera"&&!Bs(o.expression),this.interpolationType=p}evaluateWithoutErrorHandling(r,o,l,p,m,v){return this._styleExpression.evaluateWithoutErrorHandling(r,o,l,p,m,v)}evaluate(r,o,l,p,m,v){return this._styleExpression.evaluate(r,o,l,p,m,v)}interpolationFactor(r,o,l){return this.interpolationType?hi.interpolationFactor(this.interpolationType,r,o,l):0}}function js(i,r){const o=$l(i,r);if(o.result==="error")return o;const l=o.value.expression,p=Fl(l);if(!p&&!Co(r))return ha([new Zr("","data expressions not supported")]);const m=Bl(l,["zoom"]);if(!m&&!Nd(r))return ha([new Zr("","zoom expressions not supported")]);const v=Cn(l);return v||m?v instanceof Zr?ha([v]):v instanceof hi&&!Nl(r)?ha([new Zr("",'"interpolate" expressions cannot be used with this property')]):Ec(v?new Ac(p?"camera":"composite",o.value,v.labels,v instanceof hi?v.interpolation:void 0):new Ic(p?"constant":"source",o.value)):ha([new Zr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class da{constructor(r,o){this._parameters=r,this._specification=o,br(this,Ns(this._parameters,this._specification))}static deserialize(r){return new da(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function Cn(i){let r=null;if(i instanceof bl)r=Cn(i.result);else if(i instanceof Cl){for(const o of i.args)if(r=Cn(o),r)break}else(i instanceof Ms||i instanceof hi)&&i.input instanceof Jn&&i.input.name==="zoom"&&(r=i);return r instanceof Zr||i.eachChild(o=>{const l=Cn(o);l instanceof Zr?r=l:!r&&l?r=new Zr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&l&&r!==l&&(r=new Zr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function pa(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const r of i.slice(1))if(!pa(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const Ud={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Mc(i){if(i==null)return{filter:()=>!0,needGeometry:!1};pa(i)||(i=Us(i));const r=$l(i,Ud);if(r.result==="error")throw new Error(r.value.map(o=>`${o.key}: ${o.message}`).join(", "));return{filter:(o,l,p)=>r.value.evaluate(o,l,{},p),needGeometry:Ua(i)}}function Um(i,r){return i<r?-1:i>r?1:0}function Ua(i){if(!Array.isArray(i))return!1;if(i[0]==="within"||i[0]==="distance")return!0;for(let r=1;r<i.length;r++)if(Ua(i[r]))return!0;return!1}function Us(i){if(!i)return!0;const r=i[0];return i.length<=1?r!=="any":r==="=="?Vs(i[1],i[2],"=="):r==="!="?Wl(Vs(i[1],i[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Vs(i[1],i[2],r):r==="any"?(o=i.slice(1),["any"].concat(o.map(Us))):r==="all"?["all"].concat(i.slice(1).map(Us)):r==="none"?["all"].concat(i.slice(1).map(Us).map(Wl)):r==="in"?Vd(i[1],i.slice(2)):r==="!in"?Wl(Vd(i[1],i.slice(2))):r==="has"?Hl(i[1]):r!=="!has"||Wl(Hl(i[1]));var o}function Vs(i,r,o){switch(i){case"$type":return[`filter-type-${o}`,r];case"$id":return[`filter-id-${o}`,r];default:return[`filter-${o}`,i,r]}}function Vd(i,r){if(r.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(o=>typeof o!=typeof r[0])?["filter-in-large",i,["literal",r.sort(Um)]]:["filter-in-small",i,["literal",r]]}}function Hl(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function Wl(i){return["!",i]}function fa(i){const r=typeof i;if(r==="number"||r==="boolean"||r==="string"||i==null)return JSON.stringify(i);if(Array.isArray(i)){let p="[";for(const m of i)p+=`${fa(m)},`;return`${p}]`}const o=Object.keys(i).sort();let l="{";for(let p=0;p<o.length;p++)l+=`${JSON.stringify(o[p])}:${fa(i[o[p]])},`;return`${l}}`}function Vm(i){let r="";for(const o of ui)r+=`/${fa(i[o])}`;return r}function ql(i){const r=i.value;return r?[new je(i.key,r,"constants have been deprecated as of v8")]:[]}function Fr(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function Po(i){if(Array.isArray(i))return i.map(Po);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const r={};for(const o in i)r[o]=Po(i[o]);return r}return Fr(i)}function pi(i){const r=i.key,o=i.value,l=i.valueSpec||{},p=i.objectElementValidators||{},m=i.style,v=i.styleSpec,w=i.validateSpec;let S=[];const k=tr(o);if(k!=="object")return[new je(r,o,`object expected, ${k} found`)];for(const P in o){const A=P.split(".")[0],O=l[A]||l["*"];let N;if(p[A])N=p[A];else if(l[A])N=w;else if(p["*"])N=p["*"];else{if(!l["*"]){S.push(new je(r,o[P],`unknown property "${P}"`));continue}N=w}S=S.concat(N({key:(r&&`${r}.`)+P,value:o[P],valueSpec:O,style:m,styleSpec:v,object:o,objectKey:P,validateSpec:w},o))}for(const P in l)p[P]||l[P].required&&l[P].default===void 0&&o[P]===void 0&&S.push(new je(r,o,`missing required property "${P}"`));return S}function Zl(i){const r=i.value,o=i.valueSpec,l=i.style,p=i.styleSpec,m=i.key,v=i.arrayElementValidator||i.validateSpec;if(tr(r)!=="array")return[new je(m,r,`array expected, ${tr(r)} found`)];if(o.length&&r.length!==o.length)return[new je(m,r,`array length ${o.length} expected, length ${r.length} found`)];if(o["min-length"]&&r.length<o["min-length"])return[new je(m,r,`array length at least ${o["min-length"]} expected, length ${r.length} found`)];let w={type:o.value,values:o.values};p.$version<7&&(w.function=o.function),tr(o.value)==="object"&&(w=o.value);let S=[];for(let k=0;k<r.length;k++)S=S.concat(v({array:r,arrayIndex:k,value:r[k],valueSpec:w,validateSpec:i.validateSpec,style:l,styleSpec:p,key:`${m}[${k}]`}));return S}function zc(i){const r=i.key,o=i.value,l=i.valueSpec;let p=tr(o);return p==="number"&&o!=o&&(p="NaN"),p!=="number"?[new je(r,o,`number expected, ${p} found`)]:"minimum"in l&&o<l.minimum?[new je(r,o,`${o} is less than the minimum value ${l.minimum}`)]:"maximum"in l&&o>l.maximum?[new je(r,o,`${o} is greater than the maximum value ${l.maximum}`)]:[]}function Gl(i){const r=i.valueSpec,o=Fr(i.value.type);let l,p,m,v={};const w=o!=="categorical"&&i.value.property===void 0,S=!w,k=tr(i.value.stops)==="array"&&tr(i.value.stops[0])==="array"&&tr(i.value.stops[0][0])==="object",P=pi({key:i.key,value:i.value,valueSpec:i.styleSpec.function,validateSpec:i.validateSpec,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(N){if(o==="identity")return[new je(N.key,N.value,'identity function may not have a "stops" property')];let V=[];const q=N.value;return V=V.concat(Zl({key:N.key,value:q,valueSpec:N.valueSpec,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec,arrayElementValidator:A})),tr(q)==="array"&&q.length===0&&V.push(new je(N.key,q,"array must have at least one stop")),V},default:function(N){return N.validateSpec({key:N.key,value:N.value,valueSpec:r,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec})}}});return o==="identity"&&w&&P.push(new je(i.key,i.value,'missing required property "property"')),o==="identity"||i.value.stops||P.push(new je(i.key,i.value,'missing required property "stops"')),o==="exponential"&&i.valueSpec.expression&&!Nl(i.valueSpec)&&P.push(new je(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(S&&!Co(i.valueSpec)?P.push(new je(i.key,i.value,"property functions not supported")):w&&!Nd(i.valueSpec)&&P.push(new je(i.key,i.value,"zoom functions not supported"))),o!=="categorical"&&!k||i.value.property!==void 0||P.push(new je(i.key,i.value,'"property" property is required')),P;function A(N){let V=[];const q=N.value,ee=N.key;if(tr(q)!=="array")return[new je(ee,q,`array expected, ${tr(q)} found`)];if(q.length!==2)return[new je(ee,q,`array length 2 expected, length ${q.length} found`)];if(k){if(tr(q[0])!=="object")return[new je(ee,q,`object expected, ${tr(q[0])} found`)];if(q[0].zoom===void 0)return[new je(ee,q,"object stop key must have zoom")];if(q[0].value===void 0)return[new je(ee,q,"object stop key must have value")];if(m&&m>Fr(q[0].zoom))return[new je(ee,q[0].zoom,"stop zoom values must appear in ascending order")];Fr(q[0].zoom)!==m&&(m=Fr(q[0].zoom),p=void 0,v={}),V=V.concat(pi({key:`${ee}[0]`,value:q[0],valueSpec:{zoom:{}},validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec,objectElementValidators:{zoom:zc,value:O}}))}else V=V.concat(O({key:`${ee}[0]`,value:q[0],valueSpec:{},validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec},q));return Vl(Po(q[1]))?V.concat([new je(`${ee}[1]`,q[1],"expressions are not allowed in function stops.")]):V.concat(N.validateSpec({key:`${ee}[1]`,value:q[1],valueSpec:r,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec}))}function O(N,V){const q=tr(N.value),ee=Fr(N.value),oe=N.value!==null?N.value:V;if(l){if(q!==l)return[new je(N.key,oe,`${q} stop domain type must match previous stop domain type ${l}`)]}else l=q;if(q!=="number"&&q!=="string"&&q!=="boolean")return[new je(N.key,oe,"stop domain value must be a number, string, or boolean")];if(q!=="number"&&o!=="categorical"){let ve=`number expected, ${q} found`;return Co(r)&&o===void 0&&(ve+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new je(N.key,oe,ve)]}return o!=="categorical"||q!=="number"||isFinite(ee)&&Math.floor(ee)===ee?o!=="categorical"&&q==="number"&&p!==void 0&&ee<p?[new je(N.key,oe,"stop domain values must appear in ascending order")]:(p=ee,o==="categorical"&&ee in v?[new je(N.key,oe,"stop domain values must be unique")]:(v[ee]=!0,[])):[new je(N.key,oe,`integer expected, found ${ee}`)]}}function Io(i){const r=(i.expressionContext==="property"?js:$l)(Po(i.value),i.valueSpec);if(r.result==="error")return r.value.map(l=>new je(`${i.key}${l.key}`,i.value,l.message));const o=r.value.expression||r.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!o.outputDefined())return[new je(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!Bs(o))return[new je(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter"&&!Bs(o))return[new je(i.key,i.value,'"feature-state" data expressions are not supported with filters.')];if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!Bl(o,["zoom","feature-state"]))return[new je(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!Fl(o))return[new je(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Va(i){const r=i.key,o=i.value,l=i.valueSpec,p=[];return Array.isArray(l.values)?l.values.indexOf(Fr(o))===-1&&p.push(new je(r,o,`expected one of [${l.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(l.values).indexOf(Fr(o))===-1&&p.push(new je(r,o,`expected one of [${Object.keys(l.values).join(", ")}], ${JSON.stringify(o)} found`)),p}function Kl(i){return pa(Po(i.value))?Io(br({},i,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Lc(i)}function Lc(i){const r=i.value,o=i.key;if(tr(r)!=="array")return[new je(o,r,`array expected, ${tr(r)} found`)];const l=i.styleSpec;let p,m=[];if(r.length<1)return[new je(o,r,"filter array must have at least 1 element")];switch(m=m.concat(Va({key:`${o}[0]`,value:r[0],valueSpec:l.filter_operator,style:i.style,styleSpec:i.styleSpec})),Fr(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&Fr(r[1])==="$type"&&m.push(new je(o,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&m.push(new je(o,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(p=tr(r[1]),p!=="string"&&m.push(new je(`${o}[1]`,r[1],`string expected, ${p} found`)));for(let v=2;v<r.length;v++)p=tr(r[v]),Fr(r[1])==="$type"?m=m.concat(Va({key:`${o}[${v}]`,value:r[v],valueSpec:l.geometry_type,style:i.style,styleSpec:i.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&m.push(new je(`${o}[${v}]`,r[v],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let v=1;v<r.length;v++)m=m.concat(Lc({key:`${o}[${v}]`,value:r[v],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":p=tr(r[1]),r.length!==2?m.push(new je(o,r,`filter array for "${r[0]}" operator must have 2 elements`)):p!=="string"&&m.push(new je(`${o}[1]`,r[1],`string expected, ${p} found`))}return m}function Rc(i,r){const o=i.key,l=i.validateSpec,p=i.style,m=i.styleSpec,v=i.value,w=i.objectKey,S=m[`${r}_${i.layerType}`];if(!S)return[];const k=w.match(/^(.*)-transition$/);if(r==="paint"&&k&&S[k[1]]&&S[k[1]].transition)return l({key:o,value:v,valueSpec:m.transition,style:p,styleSpec:m});const P=i.valueSpec||S[w];if(!P)return[new je(o,v,`unknown property "${w}"`)];let A;if(tr(v)==="string"&&Co(P)&&!P.tokens&&(A=/^{([^}]+)}$/.exec(v)))return[new je(o,v,`"${w}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(A[1])} }\`.`)];const O=[];return i.layerType==="symbol"&&(w==="text-field"&&p&&!p.glyphs&&O.push(new je(o,v,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&Na(Po(v))&&Fr(v.type)==="identity"&&O.push(new je(o,v,'"text-font" does not support identity functions'))),O.concat(l({key:i.key,value:v,valueSpec:P,style:p,styleSpec:m,expressionContext:"property",propertyType:r,propertyKey:w}))}function Xl(i){return Rc(i,"paint")}function Dc(i){return Rc(i,"layout")}function $d(i){let r=[];const o=i.value,l=i.key,p=i.style,m=i.styleSpec;o.type||o.ref||r.push(new je(l,o,'either "type" or "ref" is required'));let v=Fr(o.type);const w=Fr(o.ref);if(o.id){const S=Fr(o.id);for(let k=0;k<i.arrayIndex;k++){const P=p.layers[k];Fr(P.id)===S&&r.push(new je(l,o.id,`duplicate layer id "${o.id}", previously used at line ${P.id.__line__}`))}}if("ref"in o){let S;["type","source","source-layer","filter","layout"].forEach(k=>{k in o&&r.push(new je(l,o[k],`"${k}" is prohibited for ref layers`))}),p.layers.forEach(k=>{Fr(k.id)===w&&(S=k)}),S?S.ref?r.push(new je(l,o.ref,"ref cannot reference another ref layer")):v=Fr(S.type):r.push(new je(l,o.ref,`ref layer "${w}" not found`))}else if(v!=="background")if(o.source){const S=p.sources&&p.sources[o.source],k=S&&Fr(S.type);S?k==="vector"&&v==="raster"?r.push(new je(l,o.source,`layer "${o.id}" requires a raster source`)):k!=="raster-dem"&&v==="hillshade"?r.push(new je(l,o.source,`layer "${o.id}" requires a raster-dem source`)):k==="raster"&&v!=="raster"?r.push(new je(l,o.source,`layer "${o.id}" requires a vector source`)):k!=="vector"||o["source-layer"]?k==="raster-dem"&&v!=="hillshade"?r.push(new je(l,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):v!=="line"||!o.paint||!o.paint["line-gradient"]||k==="geojson"&&S.lineMetrics||r.push(new je(l,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new je(l,o,`layer "${o.id}" must specify a "source-layer"`)):r.push(new je(l,o.source,`source "${o.source}" not found`))}else r.push(new je(l,o,'missing required property "source"'));return r=r.concat(pi({key:l,value:o,valueSpec:m.layer,style:i.style,styleSpec:i.styleSpec,validateSpec:i.validateSpec,objectElementValidators:{"*":()=>[],type:()=>i.validateSpec({key:`${l}.type`,value:o.type,valueSpec:m.layer.type,style:i.style,styleSpec:i.styleSpec,validateSpec:i.validateSpec,object:o,objectKey:"type"}),filter:Kl,layout:S=>pi({layer:o,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":k=>Dc(br({layerType:v},k))}}),paint:S=>pi({layer:o,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":k=>Xl(br({layerType:v},k))}})}})),r}function $o(i){const r=i.value,o=i.key,l=tr(r);return l!=="string"?[new je(o,r,`string expected, ${l} found`)]:[]}const Hd={promoteId:function({key:i,value:r}){if(tr(r)==="string")return $o({key:i,value:r});{const o=[];for(const l in r)o.push(...$o({key:`${i}.${l}`,value:r[l]}));return o}}};function Oc(i){const r=i.value,o=i.key,l=i.styleSpec,p=i.style,m=i.validateSpec;if(!r.type)return[new je(o,r,'"type" is required')];const v=Fr(r.type);let w;switch(v){case"vector":case"raster":return w=pi({key:o,value:r,valueSpec:l[`source_${v.replace("-","_")}`],style:i.style,styleSpec:l,objectElementValidators:Hd,validateSpec:m}),w;case"raster-dem":return w=function(S){var k;const P=(k=S.sourceName)!==null&&k!==void 0?k:"",A=S.value,O=S.styleSpec,N=O.source_raster_dem,V=S.style;let q=[];const ee=tr(A);if(A===void 0)return q;if(ee!=="object")return q.push(new je("source_raster_dem",A,`object expected, ${ee} found`)),q;const oe=Fr(A.encoding)==="custom",ve=["redFactor","greenFactor","blueFactor","baseShift"],de=S.value.encoding?`"${S.value.encoding}"`:"Default";for(const ye in A)!oe&&ve.includes(ye)?q.push(new je(ye,A[ye],`In "${P}": "${ye}" is only valid when "encoding" is set to "custom". ${de} encoding found`)):N[ye]?q=q.concat(S.validateSpec({key:ye,value:A[ye],valueSpec:N[ye],validateSpec:S.validateSpec,style:V,styleSpec:O})):q.push(new je(ye,A[ye],`unknown property "${ye}"`));return q}({sourceName:o,value:r,style:i.style,styleSpec:l,validateSpec:m}),w;case"geojson":if(w=pi({key:o,value:r,valueSpec:l.source_geojson,style:p,styleSpec:l,validateSpec:m,objectElementValidators:Hd}),r.cluster)for(const S in r.clusterProperties){const[k,P]=r.clusterProperties[S],A=typeof k=="string"?[k,["accumulated"],["get",S]]:k;w.push(...Io({key:`${o}.${S}.map`,value:P,validateSpec:m,expressionContext:"cluster-map"})),w.push(...Io({key:`${o}.${S}.reduce`,value:A,validateSpec:m,expressionContext:"cluster-reduce"}))}return w;case"video":return pi({key:o,value:r,valueSpec:l.source_video,style:p,validateSpec:m,styleSpec:l});case"image":return pi({key:o,value:r,valueSpec:l.source_image,style:p,validateSpec:m,styleSpec:l});case"canvas":return[new je(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Va({key:`${o}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,validateSpec:m,styleSpec:l})}}function Fc(i){const r=i.value,o=i.styleSpec,l=o.light,p=i.style;let m=[];const v=tr(r);if(r===void 0)return m;if(v!=="object")return m=m.concat([new je("light",r,`object expected, ${v} found`)]),m;for(const w in r){const S=w.match(/^(.*)-transition$/);m=m.concat(S&&l[S[1]]&&l[S[1]].transition?i.validateSpec({key:w,value:r[w],valueSpec:o.transition,validateSpec:i.validateSpec,style:p,styleSpec:o}):l[w]?i.validateSpec({key:w,value:r[w],valueSpec:l[w],validateSpec:i.validateSpec,style:p,styleSpec:o}):[new je(w,r[w],`unknown property "${w}"`)])}return m}function Bc(i){const r=i.value,o=i.styleSpec,l=o.sky,p=i.style,m=tr(r);if(r===void 0)return[];if(m!=="object")return[new je("sky",r,`object expected, ${m} found`)];let v=[];for(const w in r)v=v.concat(l[w]?i.validateSpec({key:w,value:r[w],valueSpec:l[w],style:p,styleSpec:o}):[new je(w,r[w],`unknown property "${w}"`)]);return v}function Wd(i){const r=i.value,o=i.styleSpec,l=o.terrain,p=i.style;let m=[];const v=tr(r);if(r===void 0)return m;if(v!=="object")return m=m.concat([new je("terrain",r,`object expected, ${v} found`)]),m;for(const w in r)m=m.concat(l[w]?i.validateSpec({key:w,value:r[w],valueSpec:l[w],validateSpec:i.validateSpec,style:p,styleSpec:o}):[new je(w,r[w],`unknown property "${w}"`)]);return m}function qd(i){let r=[];const o=i.value,l=i.key;if(Array.isArray(o)){const p=[],m=[];for(const v in o)o[v].id&&p.includes(o[v].id)&&r.push(new je(l,o,`all the sprites' ids must be unique, but ${o[v].id} is duplicated`)),p.push(o[v].id),o[v].url&&m.includes(o[v].url)&&r.push(new je(l,o,`all the sprites' URLs must be unique, but ${o[v].url} is duplicated`)),m.push(o[v].url),r=r.concat(pi({key:`${l}[${v}]`,value:o[v],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:i.validateSpec}));return r}return $o({key:l,value:o})}const Nc={"*":()=>[],array:Zl,boolean:function(i){const r=i.value,o=i.key,l=tr(r);return l!=="boolean"?[new je(o,r,`boolean expected, ${l} found`)]:[]},number:zc,color:function(i){const r=i.key,o=i.value,l=tr(o);return l!=="string"?[new je(r,o,`color expected, ${l} found`)]:Gt.parse(String(o))?[]:[new je(r,o,`color expected, "${o}" found`)]},constants:ql,enum:Va,filter:Kl,function:Gl,layer:$d,object:pi,source:Oc,light:Fc,sky:Bc,terrain:Wd,projection:function(i){const r=i.value,o=i.styleSpec,l=o.projection,p=i.style,m=tr(r);if(r===void 0)return[];if(m!=="object")return[new je("projection",r,`object expected, ${m} found`)];let v=[];for(const w in r)v=v.concat(l[w]?i.validateSpec({key:w,value:r[w],valueSpec:l[w],style:p,styleSpec:o}):[new je(w,r[w],`unknown property "${w}"`)]);return v},string:$o,formatted:function(i){return $o(i).length===0?[]:Io(i)},resolvedImage:function(i){return $o(i).length===0?[]:Io(i)},padding:function(i){const r=i.key,o=i.value;if(tr(o)==="array"){if(o.length<1||o.length>4)return[new je(r,o,`padding requires 1 to 4 values; ${o.length} values found`)];const l={type:"number"};let p=[];for(let m=0;m<o.length;m++)p=p.concat(i.validateSpec({key:`${r}[${m}]`,value:o[m],validateSpec:i.validateSpec,valueSpec:l}));return p}return zc({key:r,value:o,valueSpec:{}})},variableAnchorOffsetCollection:function(i){const r=i.key,o=i.value,l=tr(o),p=i.styleSpec;if(l!=="array"||o.length<1||o.length%2!=0)return[new je(r,o,"variableAnchorOffsetCollection requires a non-empty array of even length")];let m=[];for(let v=0;v<o.length;v+=2)m=m.concat(Va({key:`${r}[${v}]`,value:o[v],valueSpec:p.layout_symbol["text-anchor"]})),m=m.concat(Zl({key:`${r}[${v+1}]`,value:o[v+1],valueSpec:{length:2,value:"number"},validateSpec:i.validateSpec,style:i.style,styleSpec:p}));return m},sprite:qd};function $a(i){const r=i.value,o=i.valueSpec,l=i.styleSpec;return i.validateSpec=$a,o.expression&&Na(Fr(r))?Gl(i):o.expression&&Vl(Po(r))?Io(i):o.type&&Nc[o.type]?Nc[o.type](i):pi(br({},i,{valueSpec:o.type?l[o.type]:o}))}function jc(i){const r=i.value,o=i.key,l=$o(i);return l.length||(r.indexOf("{fontstack}")===-1&&l.push(new je(o,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&l.push(new je(o,r,'"glyphs" url must include a "{range}" token'))),l}function ki(i,r=ke){let o=[];return o=o.concat($a({key:"",value:i,valueSpec:r.$root,styleSpec:r,style:i,validateSpec:$a,objectElementValidators:{glyphs:jc,"*":()=>[]}})),i.constants&&(o=o.concat(ql({key:"constants",value:i.constants,style:i,styleSpec:r,validateSpec:$a}))),Zd(o)}function fi(i){return function(r){return i({...r,validateSpec:$a})}}function Zd(i){return[].concat(i).sort((r,o)=>r.line-o.line)}function Ci(i){return function(...r){return Zd(i.apply(this,r))}}ki.source=Ci(fi(Oc)),ki.sprite=Ci(fi(qd)),ki.glyphs=Ci(fi(jc)),ki.light=Ci(fi(Fc)),ki.sky=Ci(fi(Bc)),ki.terrain=Ci(fi(Wd)),ki.layer=Ci(fi($d)),ki.filter=Ci(fi(Kl)),ki.paintProperty=Ci(fi(Xl)),ki.layoutProperty=Ci(fi(Dc));const $s=ki,$m=$s.light,Gd=$s.paintProperty,Kd=$s.layoutProperty;function Uc(i,r){let o=!1;if(r&&r.length)for(const l of r)i.fire(new yr(new Error(l.message))),o=!0;return o}class Hs{constructor(r,o,l){const p=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const v=new Int32Array(this.arrayBuffer);r=v[0],this.d=(o=v[1])+2*(l=v[2]);for(let S=0;S<this.d*this.d;S++){const k=v[3+S],P=v[3+S+1];p.push(k===P?null:v.subarray(k,P))}const w=v[3+p.length+1];this.keys=v.subarray(v[3+p.length],w),this.bboxes=v.subarray(w),this.insert=this._insertReadonly}else{this.d=o+2*l;for(let v=0;v<this.d*this.d;v++)p.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=r,this.padding=l,this.scale=o/r,this.uid=0;const m=l/o*r;this.min=-m,this.max=r+m}insert(r,o,l,p,m){this._forEachCell(o,l,p,m,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(o),this.bboxes.push(l),this.bboxes.push(p),this.bboxes.push(m)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,o,l,p,m,v){this.cells[m].push(v)}query(r,o,l,p,m){const v=this.min,w=this.max;if(r<=v&&o<=v&&w<=l&&w<=p&&!m)return Array.prototype.slice.call(this.keys);{const S=[];return this._forEachCell(r,o,l,p,this._queryCell,S,{},m),S}}_queryCell(r,o,l,p,m,v,w,S){const k=this.cells[m];if(k!==null){const P=this.keys,A=this.bboxes;for(let O=0;O<k.length;O++){const N=k[O];if(w[N]===void 0){const V=4*N;(S?S(A[V+0],A[V+1],A[V+2],A[V+3]):r<=A[V+2]&&o<=A[V+3]&&l>=A[V+0]&&p>=A[V+1])?(w[N]=!0,v.push(P[N])):w[N]=!1}}}}_forEachCell(r,o,l,p,m,v,w,S){const k=this._convertToCellCoord(r),P=this._convertToCellCoord(o),A=this._convertToCellCoord(l),O=this._convertToCellCoord(p);for(let N=k;N<=A;N++)for(let V=P;V<=O;V++){const q=this.d*V+N;if((!S||S(this._convertFromCellCoord(N),this._convertFromCellCoord(V),this._convertFromCellCoord(N+1),this._convertFromCellCoord(V+1)))&&m.call(this,r,o,l,p,q,v,w,S))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,o=3+this.cells.length+1+1;let l=0;for(let v=0;v<this.cells.length;v++)l+=this.cells[v].length;const p=new Int32Array(o+l+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let m=o;for(let v=0;v<r.length;v++){const w=r[v];p[3+v]=m,p.set(w,m),m+=w.length}return p[3+r.length]=m,p.set(this.keys,m),m+=this.keys.length,p[3+r.length+1]=m,p.set(this.bboxes,m),m+=this.bboxes.length,p.buffer}static serialize(r,o){const l=r.toArrayBuffer();return o&&o.push(l),{buffer:l}}static deserialize(r){return new Hs(r.buffer)}}const Ho={};function lt(i,r,o={}){if(Ho[i])throw new Error(`${i} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:i,writeable:!1}),Ho[i]={klass:r,omit:o.omit||[],shallow:o.shallow||[]}}lt("Object",Object),lt("TransferableGridIndex",Hs),lt("Color",Gt),lt("Error",Error),lt("AJAXError",en),lt("ResolvedImage",At),lt("StylePropertyFunction",da),lt("StyleExpression",Pc,{omit:["_evaluator"]}),lt("ZoomDependentExpression",Ac),lt("ZoomConstantExpression",Ic),lt("CompoundExpression",Jn,{omit:["_evaluate"]});for(const i in ua)ua[i]._classRegistryKey||lt(`Expression_${i}`,ua[i]);function Xd(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function Ws(i,r){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob||i instanceof Error)return i;if(Xd(i)||Ft(i))return r&&r.push(i),i;if(ArrayBuffer.isView(i)){const o=i;return r&&r.push(o.buffer),o}if(i instanceof ImageData)return r&&r.push(i.data.buffer),i;if(Array.isArray(i)){const o=[];for(const l of i)o.push(Ws(l,r));return o}if(typeof i=="object"){const o=i.constructor,l=o._classRegistryKey;if(!l)throw new Error(`can't serialize object of unregistered class ${o.name}`);if(!Ho[l])throw new Error(`${l} is not registered.`);const p=o.serialize?o.serialize(i,r):{};if(o.serialize){if(r&&p===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const m in i){if(!i.hasOwnProperty(m)||Ho[l].omit.indexOf(m)>=0)continue;const v=i[m];p[m]=Ho[l].shallow.indexOf(m)>=0?v:Ws(v,r)}i instanceof Error&&(p.message=i.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(p.$name=l),p}throw new Error("can't serialize object of type "+typeof i)}function fo(i){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob||i instanceof Error||Xd(i)||Ft(i)||ArrayBuffer.isView(i)||i instanceof ImageData)return i;if(Array.isArray(i))return i.map(fo);if(typeof i=="object"){const r=i.$name||"Object";if(!Ho[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:o}=Ho[r];if(!o)throw new Error(`can't deserialize unregistered class ${r}`);if(o.deserialize)return o.deserialize(i);const l=Object.create(o.prototype);for(const p of Object.keys(i)){if(p==="$name")continue;const m=i[p];l[p]=Ho[r].shallow.indexOf(p)>=0?m:fo(m)}return l}throw new Error("can't deserialize object of type "+typeof i)}class Yd{constructor(){this.first=!0}update(r,o){const l=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=l,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=l,!0):(this.lastFloorZoom>l?(this.lastIntegerZoom=l+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<l&&(this.lastIntegerZoom=l,this.lastIntegerZoomTime=o),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=l,!0))}}const nt={"Latin-1 Supplement":i=>i>=128&&i<=255,Arabic:i=>i>=1536&&i<=1791,"Arabic Supplement":i=>i>=1872&&i<=1919,"Arabic Extended-A":i=>i>=2208&&i<=2303,"Hangul Jamo":i=>i>=4352&&i<=4607,"Unified Canadian Aboriginal Syllabics":i=>i>=5120&&i<=5759,Khmer:i=>i>=6016&&i<=6143,"Unified Canadian Aboriginal Syllabics Extended":i=>i>=6320&&i<=6399,"General Punctuation":i=>i>=8192&&i<=8303,"Letterlike Symbols":i=>i>=8448&&i<=8527,"Number Forms":i=>i>=8528&&i<=8591,"Miscellaneous Technical":i=>i>=8960&&i<=9215,"Control Pictures":i=>i>=9216&&i<=9279,"Optical Character Recognition":i=>i>=9280&&i<=9311,"Enclosed Alphanumerics":i=>i>=9312&&i<=9471,"Geometric Shapes":i=>i>=9632&&i<=9727,"Miscellaneous Symbols":i=>i>=9728&&i<=9983,"Miscellaneous Symbols and Arrows":i=>i>=11008&&i<=11263,"CJK Radicals Supplement":i=>i>=11904&&i<=12031,"Kangxi Radicals":i=>i>=12032&&i<=12255,"Ideographic Description Characters":i=>i>=12272&&i<=12287,"CJK Symbols and Punctuation":i=>i>=12288&&i<=12351,Hiragana:i=>i>=12352&&i<=12447,Katakana:i=>i>=12448&&i<=12543,Bopomofo:i=>i>=12544&&i<=12591,"Hangul Compatibility Jamo":i=>i>=12592&&i<=12687,Kanbun:i=>i>=12688&&i<=12703,"Bopomofo Extended":i=>i>=12704&&i<=12735,"CJK Strokes":i=>i>=12736&&i<=12783,"Katakana Phonetic Extensions":i=>i>=12784&&i<=12799,"Enclosed CJK Letters and Months":i=>i>=12800&&i<=13055,"CJK Compatibility":i=>i>=13056&&i<=13311,"CJK Unified Ideographs Extension A":i=>i>=13312&&i<=19903,"Yijing Hexagram Symbols":i=>i>=19904&&i<=19967,"CJK Unified Ideographs":i=>i>=19968&&i<=40959,"Yi Syllables":i=>i>=40960&&i<=42127,"Yi Radicals":i=>i>=42128&&i<=42191,"Hangul Jamo Extended-A":i=>i>=43360&&i<=43391,"Hangul Syllables":i=>i>=44032&&i<=55215,"Hangul Jamo Extended-B":i=>i>=55216&&i<=55295,"Private Use Area":i=>i>=57344&&i<=63743,"CJK Compatibility Ideographs":i=>i>=63744&&i<=64255,"Arabic Presentation Forms-A":i=>i>=64336&&i<=65023,"Vertical Forms":i=>i>=65040&&i<=65055,"CJK Compatibility Forms":i=>i>=65072&&i<=65103,"Small Form Variants":i=>i>=65104&&i<=65135,"Arabic Presentation Forms-B":i=>i>=65136&&i<=65279,"Halfwidth and Fullwidth Forms":i=>i>=65280&&i<=65519};function Vc(i){for(const r of i)if($c(r.charCodeAt(0)))return!0;return!1}function Hm(i){for(const r of i)if(!Jd(r.charCodeAt(0)))return!1;return!0}function Jd(i){return!(nt.Arabic(i)||nt["Arabic Supplement"](i)||nt["Arabic Extended-A"](i)||nt["Arabic Presentation Forms-A"](i)||nt["Arabic Presentation Forms-B"](i))}function $c(i){return!(i!==746&&i!==747&&(i<4352||!(nt["Bopomofo Extended"](i)||nt.Bopomofo(i)||nt["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||nt["CJK Compatibility Ideographs"](i)||nt["CJK Compatibility"](i)||nt["CJK Radicals Supplement"](i)||nt["CJK Strokes"](i)||!(!nt["CJK Symbols and Punctuation"](i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||nt["CJK Unified Ideographs Extension A"](i)||nt["CJK Unified Ideographs"](i)||nt["Enclosed CJK Letters and Months"](i)||nt["Hangul Compatibility Jamo"](i)||nt["Hangul Jamo Extended-A"](i)||nt["Hangul Jamo Extended-B"](i)||nt["Hangul Jamo"](i)||nt["Hangul Syllables"](i)||nt.Hiragana(i)||nt["Ideographic Description Characters"](i)||nt.Kanbun(i)||nt["Kangxi Radicals"](i)||nt["Katakana Phonetic Extensions"](i)||nt.Katakana(i)&&i!==12540||!(!nt["Halfwidth and Fullwidth Forms"](i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!nt["Small Form Variants"](i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||nt["Unified Canadian Aboriginal Syllabics"](i)||nt["Unified Canadian Aboriginal Syllabics Extended"](i)||nt["Vertical Forms"](i)||nt["Yijing Hexagram Symbols"](i)||nt["Yi Syllables"](i)||nt["Yi Radicals"](i))))}function Qd(i){return!($c(i)||function(r){return!!(nt["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||nt["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||nt["Letterlike Symbols"](r)||nt["Number Forms"](r)||nt["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||nt["Control Pictures"](r)&&r!==9251||nt["Optical Character Recognition"](r)||nt["Enclosed Alphanumerics"](r)||nt["Geometric Shapes"](r)||nt["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||nt["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||nt["CJK Symbols and Punctuation"](r)||nt.Katakana(r)||nt["Private Use Area"](r)||nt["CJK Compatibility Forms"](r)||nt["Small Form Variants"](r)||nt["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(i))}function Wo(i){return i>=1424&&i<=2303||nt["Arabic Presentation Forms-A"](i)||nt["Arabic Presentation Forms-B"](i)}function ep(i,r){return!(!r&&Wo(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||nt.Khmer(i))}function Hc(i){for(const r of i)if(Wo(r.charCodeAt(0)))return!0;return!1}const qo=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(i){this.pluginStatus=i.pluginStatus,this.pluginURL=i.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(i){this.applyArabicShaping=i.applyArabicShaping,this.processBidirectionalText=i.processBidirectionalText,this.processStyledBidirectionalText=i.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class vr{constructor(r,o){this.zoom=r,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Yd,this.transition={})}isSupportedScript(r){return function(o,l){for(const p of o)if(!ep(p.charCodeAt(0),l))return!1;return!0}(r,qo.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,o=r-Math.floor(r),l=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*l}:{fromScale:.5,toScale:1,t:1-(1-l)*o}}}class Yl{constructor(r,o){this.property=r,this.value=o,this.expression=function(l,p){if(Na(l))return new da(l,p);if(Vl(l)){const m=js(l,p);if(m.result==="error")throw new Error(m.value.map(v=>`${v.key}: ${v.message}`).join(", "));return m.value}{let m=l;return p.type==="color"&&typeof l=="string"?m=Gt.parse(l):p.type!=="padding"||typeof l!="number"&&!Array.isArray(l)?p.type==="variableAnchorOffsetCollection"&&Array.isArray(l)&&(m=ln.parse(l)):m=sn.parse(l),{kind:"constant",evaluate:()=>m}}}(o===void 0?r.specification.default:o,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,o,l){return this.property.possiblyEvaluate(this,r,o,l)}}class Ha{constructor(r){this.property=r,this.value=new Yl(r,void 0)}transitioned(r,o){return new tp(this.property,this.value,o,Me({},r.transition,this.transition),r.now)}untransitioned(){return new tp(this.property,this.value,null,{},0)}}class Wa{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return Be(this._values[r].value.value)}setValue(r,o){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Ha(this._values[r].property)),this._values[r].value=new Yl(this._values[r].property,o===null?void 0:Be(o))}getTransition(r){return Be(this._values[r].transition)}setTransition(r,o){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Ha(this._values[r].property)),this._values[r].transition=Be(o)||void 0}serialize(){const r={};for(const o of Object.keys(this._values)){const l=this.getValue(o);l!==void 0&&(r[o]=l);const p=this.getTransition(o);p!==void 0&&(r[`${o}-transition`]=p)}return r}transitioned(r,o){const l=new Wc(this._properties);for(const p of Object.keys(this._values))l._values[p]=this._values[p].transitioned(r,o._values[p]);return l}untransitioned(){const r=new Wc(this._properties);for(const o of Object.keys(this._values))r._values[o]=this._values[o].untransitioned();return r}}class tp{constructor(r,o,l,p,m){this.property=r,this.value=o,this.begin=m+p.delay||0,this.end=this.begin+p.duration||0,r.specification.transition&&(p.delay||p.duration)&&(this.prior=l)}possiblyEvaluate(r,o,l){const p=r.now||0,m=this.value.possiblyEvaluate(r,o,l),v=this.prior;if(v){if(p>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(p<this.begin)return v.possiblyEvaluate(r,o,l);{const w=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(v.possiblyEvaluate(r,o,l),m,function(S){if(S<=0)return 0;if(S>=1)return 1;const k=S*S,P=k*S;return 4*(S<.5?P:3*(S-k)+P-.75)}(w))}}return m}}class Wc{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,o,l){const p=new Jl(this._properties);for(const m of Object.keys(this._values))p._values[m]=this._values[m].possiblyEvaluate(r,o,l);return p}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class qs{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return Be(this._values[r].value)}setValue(r,o){this._values[r]=new Yl(this._values[r].property,o===null?void 0:Be(o))}serialize(){const r={};for(const o of Object.keys(this._values)){const l=this.getValue(o);l!==void 0&&(r[o]=l)}return r}possiblyEvaluate(r,o,l){const p=new Jl(this._properties);for(const m of Object.keys(this._values))p._values[m]=this._values[m].possiblyEvaluate(r,o,l);return p}}class mo{constructor(r,o,l){this.property=r,this.value=o,this.parameters=l}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,o,l,p){return this.property.evaluate(this.value,this.parameters,r,o,l,p)}}class Jl{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class vt{constructor(r){this.specification=r}possiblyEvaluate(r,o){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(o)}interpolate(r,o,l){const p=Un[this.specification.type];return p?p(r,o,l):r}}class Tt{constructor(r,o){this.specification=r,this.overrides=o}possiblyEvaluate(r,o,l,p){return new mo(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(o,null,{},l,p)}:r.expression,o)}interpolate(r,o,l){if(r.value.kind!=="constant"||o.value.kind!=="constant")return r;if(r.value.value===void 0||o.value.value===void 0)return new mo(this,{kind:"constant",value:void 0},r.parameters);const p=Un[this.specification.type];if(p){const m=p(r.value.value,o.value.value,l);return new mo(this,{kind:"constant",value:m},r.parameters)}return r}evaluate(r,o,l,p,m,v){return r.kind==="constant"?r.value:r.evaluate(o,l,p,m,v)}}class y extends Tt{possiblyEvaluate(r,o,l,p){if(r.value===void 0)return new mo(this,{kind:"constant",value:void 0},o);if(r.expression.kind==="constant"){const m=r.expression.evaluate(o,null,{},l,p),v=r.property.specification.type==="resolvedImage"&&typeof m!="string"?m.name:m,w=this._calculate(v,v,v,o);return new mo(this,{kind:"constant",value:w},o)}if(r.expression.kind==="camera"){const m=this._calculate(r.expression.evaluate({zoom:o.zoom-1}),r.expression.evaluate({zoom:o.zoom}),r.expression.evaluate({zoom:o.zoom+1}),o);return new mo(this,{kind:"constant",value:m},o)}return new mo(this,r.expression,o)}evaluate(r,o,l,p,m,v){if(r.kind==="source"){const w=r.evaluate(o,l,p,m,v);return this._calculate(w,w,w,o)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(o.zoom)-1},l,p),r.evaluate({zoom:Math.floor(o.zoom)},l,p),r.evaluate({zoom:Math.floor(o.zoom)+1},l,p),o):r.value}_calculate(r,o,l,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:r,to:o}:{from:l,to:o}}interpolate(r){return r}}class n{constructor(r){this.specification=r}possiblyEvaluate(r,o,l,p){if(r.value!==void 0){if(r.expression.kind==="constant"){const m=r.expression.evaluate(o,null,{},l,p);return this._calculate(m,m,m,o)}return this._calculate(r.expression.evaluate(new vr(Math.floor(o.zoom-1),o)),r.expression.evaluate(new vr(Math.floor(o.zoom),o)),r.expression.evaluate(new vr(Math.floor(o.zoom+1),o)),o)}}_calculate(r,o,l,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:r,to:o}:{from:l,to:o}}interpolate(r){return r}}class s{constructor(r){this.specification=r}possiblyEvaluate(r,o,l,p){return!!r.expression.evaluate(o,null,{},l,p)}interpolate(){return!1}}class d{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in r){const l=r[o];l.specification.overridable&&this.overridableProperties.push(o);const p=this.defaultPropertyValues[o]=new Yl(l,void 0),m=this.defaultTransitionablePropertyValues[o]=new Ha(l);this.defaultTransitioningPropertyValues[o]=m.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=p.possiblyEvaluate({})}}}lt("DataDrivenProperty",Tt),lt("DataConstantProperty",vt),lt("CrossFadedDataDrivenProperty",y),lt("CrossFadedProperty",n),lt("ColorRampProperty",s);const f="-transition";class _ extends Ni{constructor(r,o){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),o.layout&&(this._unevaluatedLayout=new qs(o.layout)),o.paint)){this._transitionablePaint=new Wa(o.paint);for(const l in r.paint)this.setPaintProperty(l,r.paint[l],{validate:!1});for(const l in r.layout)this.setLayoutProperty(l,r.layout[l],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Jl(o.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,o,l={}){o!=null&&this._validate(Kd,`layers.${this.id}.layout.${r}`,r,o,l)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,o):this.visibility=o)}getPaintProperty(r){return r.endsWith(f)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,o,l={}){if(o!=null&&this._validate(Gd,`layers.${this.id}.paint.${r}`,r,o,l))return!1;if(r.endsWith(f))return this._transitionablePaint.setTransition(r.slice(0,-11),o||void 0),!1;{const p=this._transitionablePaint._values[r],m=p.property.specification["property-type"]==="cross-faded-data-driven",v=p.value.isDataDriven(),w=p.value;this._transitionablePaint.setValue(r,o),this._handleSpecialPaintPropertyUpdate(r);const S=this._transitionablePaint._values[r].value;return S.isDataDriven()||v||m||this._handleOverridablePaintPropertyUpdate(r,w,S)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,o,l){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,o){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,o)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),ze(r,(o,l)=>!(o===void 0||l==="layout"&&!Object.keys(o).length||l==="paint"&&!Object.keys(o).length))}_validate(r,o,l,p,m={}){return(!m||m.validate!==!1)&&Uc(this,r.call($s,{key:o,layerType:this.type,objectKey:l,value:p,styleSpec:ke,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const o=this.paint.get(r);if(o instanceof mo&&Co(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}const b={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class T{constructor(r,o){this._structArray=r,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class E{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,o){return r._trim(),o&&(r.isTransferred=!0,o.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const o=Object.create(this.prototype);return o.arrayBuffer=r.arrayBuffer,o.length=r.length,o.capacity=r.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function I(i,r=1){let o=0,l=0;return{members:i.map(p=>{const m=b[p.type].BYTES_PER_ELEMENT,v=o=R(o,Math.max(r,m)),w=p.components||1;return l=Math.max(l,m),o+=m*w,{name:p.name,type:p.type,components:w,offset:v}}),size:R(o,Math.max(l,r)),alignment:r}}function R(i,r){return Math.ceil(i/r)*r}class z extends E{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o){const l=this.length;return this.resize(l+1),this.emplace(l,r,o)}emplace(r,o,l){const p=2*r;return this.int16[p+0]=o,this.int16[p+1]=l,r}}z.prototype.bytesPerElement=4,lt("StructArrayLayout2i4",z);class U extends E{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,l){const p=this.length;return this.resize(p+1),this.emplace(p,r,o,l)}emplace(r,o,l,p){const m=3*r;return this.int16[m+0]=o,this.int16[m+1]=l,this.int16[m+2]=p,r}}U.prototype.bytesPerElement=6,lt("StructArrayLayout3i6",U);class W extends E{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,l,p){const m=this.length;return this.resize(m+1),this.emplace(m,r,o,l,p)}emplace(r,o,l,p,m){const v=4*r;return this.int16[v+0]=o,this.int16[v+1]=l,this.int16[v+2]=p,this.int16[v+3]=m,r}}W.prototype.bytesPerElement=8,lt("StructArrayLayout4i8",W);class X extends E{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,l,p,m,v){const w=this.length;return this.resize(w+1),this.emplace(w,r,o,l,p,m,v)}emplace(r,o,l,p,m,v,w){const S=6*r;return this.int16[S+0]=o,this.int16[S+1]=l,this.int16[S+2]=p,this.int16[S+3]=m,this.int16[S+4]=v,this.int16[S+5]=w,r}}X.prototype.bytesPerElement=12,lt("StructArrayLayout2i4i12",X);class ie extends E{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,l,p,m,v){const w=this.length;return this.resize(w+1),this.emplace(w,r,o,l,p,m,v)}emplace(r,o,l,p,m,v,w){const S=4*r,k=8*r;return this.int16[S+0]=o,this.int16[S+1]=l,this.uint8[k+4]=p,this.uint8[k+5]=m,this.uint8[k+6]=v,this.uint8[k+7]=w,r}}ie.prototype.bytesPerElement=8,lt("StructArrayLayout2i4ub8",ie);class J extends E{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o){const l=this.length;return this.resize(l+1),this.emplace(l,r,o)}emplace(r,o,l){const p=2*r;return this.float32[p+0]=o,this.float32[p+1]=l,r}}J.prototype.bytesPerElement=8,lt("StructArrayLayout2f8",J);class ae extends E{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,l,p,m,v,w,S,k,P){const A=this.length;return this.resize(A+1),this.emplace(A,r,o,l,p,m,v,w,S,k,P)}emplace(r,o,l,p,m,v,w,S,k,P,A){const O=10*r;return this.uint16[O+0]=o,this.uint16[O+1]=l,this.uint16[O+2]=p,this.uint16[O+3]=m,this.uint16[O+4]=v,this.uint16[O+5]=w,this.uint16[O+6]=S,this.uint16[O+7]=k,this.uint16[O+8]=P,this.uint16[O+9]=A,r}}ae.prototype.bytesPerElement=20,lt("StructArrayLayout10ui20",ae);class fe extends E{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,l,p,m,v,w,S,k,P,A,O){const N=this.length;return this.resize(N+1),this.emplace(N,r,o,l,p,m,v,w,S,k,P,A,O)}emplace(r,o,l,p,m,v,w,S,k,P,A,O,N){const V=12*r;return this.int16[V+0]=o,this.int16[V+1]=l,this.int16[V+2]=p,this.int16[V+3]=m,this.uint16[V+4]=v,this.uint16[V+5]=w,this.uint16[V+6]=S,this.uint16[V+7]=k,this.int16[V+8]=P,this.int16[V+9]=A,this.int16[V+10]=O,this.int16[V+11]=N,r}}fe.prototype.bytesPerElement=24,lt("StructArrayLayout4i4ui4i24",fe);class re extends E{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,l){const p=this.length;return this.resize(p+1),this.emplace(p,r,o,l)}emplace(r,o,l,p){const m=3*r;return this.float32[m+0]=o,this.float32[m+1]=l,this.float32[m+2]=p,r}}re.prototype.bytesPerElement=12,lt("StructArrayLayout3f12",re);class ge extends E{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const o=this.length;return this.resize(o+1),this.emplace(o,r)}emplace(r,o){return this.uint32[1*r+0]=o,r}}ge.prototype.bytesPerElement=4,lt("StructArrayLayout1ul4",ge);class we extends E{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,l,p,m,v,w,S,k){const P=this.length;return this.resize(P+1),this.emplace(P,r,o,l,p,m,v,w,S,k)}emplace(r,o,l,p,m,v,w,S,k,P){const A=10*r,O=5*r;return this.int16[A+0]=o,this.int16[A+1]=l,this.int16[A+2]=p,this.int16[A+3]=m,this.int16[A+4]=v,this.int16[A+5]=w,this.uint32[O+3]=S,this.uint16[A+8]=k,this.uint16[A+9]=P,r}}we.prototype.bytesPerElement=20,lt("StructArrayLayout6i1ul2ui20",we);class Te extends E{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,l,p,m,v){const w=this.length;return this.resize(w+1),this.emplace(w,r,o,l,p,m,v)}emplace(r,o,l,p,m,v,w){const S=6*r;return this.int16[S+0]=o,this.int16[S+1]=l,this.int16[S+2]=p,this.int16[S+3]=m,this.int16[S+4]=v,this.int16[S+5]=w,r}}Te.prototype.bytesPerElement=12,lt("StructArrayLayout2i2i2i12",Te);class De extends E{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,l,p,m){const v=this.length;return this.resize(v+1),this.emplace(v,r,o,l,p,m)}emplace(r,o,l,p,m,v){const w=4*r,S=8*r;return this.float32[w+0]=o,this.float32[w+1]=l,this.float32[w+2]=p,this.int16[S+6]=m,this.int16[S+7]=v,r}}De.prototype.bytesPerElement=16,lt("StructArrayLayout2f1f2i16",De);class Ue extends E{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,l,p,m,v){const w=this.length;return this.resize(w+1),this.emplace(w,r,o,l,p,m,v)}emplace(r,o,l,p,m,v,w){const S=16*r,k=4*r,P=8*r;return this.uint8[S+0]=o,this.uint8[S+1]=l,this.float32[k+1]=p,this.float32[k+2]=m,this.int16[P+6]=v,this.int16[P+7]=w,r}}Ue.prototype.bytesPerElement=16,lt("StructArrayLayout2ub2f2i16",Ue);class it extends E{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,l){const p=this.length;return this.resize(p+1),this.emplace(p,r,o,l)}emplace(r,o,l,p){const m=3*r;return this.uint16[m+0]=o,this.uint16[m+1]=l,this.uint16[m+2]=p,r}}it.prototype.bytesPerElement=6,lt("StructArrayLayout3ui6",it);class at extends E{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,l,p,m,v,w,S,k,P,A,O,N,V,q,ee,oe){const ve=this.length;return this.resize(ve+1),this.emplace(ve,r,o,l,p,m,v,w,S,k,P,A,O,N,V,q,ee,oe)}emplace(r,o,l,p,m,v,w,S,k,P,A,O,N,V,q,ee,oe,ve){const de=24*r,ye=12*r,Ce=48*r;return this.int16[de+0]=o,this.int16[de+1]=l,this.uint16[de+2]=p,this.uint16[de+3]=m,this.uint32[ye+2]=v,this.uint32[ye+3]=w,this.uint32[ye+4]=S,this.uint16[de+10]=k,this.uint16[de+11]=P,this.uint16[de+12]=A,this.float32[ye+7]=O,this.float32[ye+8]=N,this.uint8[Ce+36]=V,this.uint8[Ce+37]=q,this.uint8[Ce+38]=ee,this.uint32[ye+10]=oe,this.int16[de+22]=ve,r}}at.prototype.bytesPerElement=48,lt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",at);class Ve extends E{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,l,p,m,v,w,S,k,P,A,O,N,V,q,ee,oe,ve,de,ye,Ce,Fe,Je,St,rt,Ye,_t,pt){const st=this.length;return this.resize(st+1),this.emplace(st,r,o,l,p,m,v,w,S,k,P,A,O,N,V,q,ee,oe,ve,de,ye,Ce,Fe,Je,St,rt,Ye,_t,pt)}emplace(r,o,l,p,m,v,w,S,k,P,A,O,N,V,q,ee,oe,ve,de,ye,Ce,Fe,Je,St,rt,Ye,_t,pt,st){const Re=32*r,xt=16*r;return this.int16[Re+0]=o,this.int16[Re+1]=l,this.int16[Re+2]=p,this.int16[Re+3]=m,this.int16[Re+4]=v,this.int16[Re+5]=w,this.int16[Re+6]=S,this.int16[Re+7]=k,this.uint16[Re+8]=P,this.uint16[Re+9]=A,this.uint16[Re+10]=O,this.uint16[Re+11]=N,this.uint16[Re+12]=V,this.uint16[Re+13]=q,this.uint16[Re+14]=ee,this.uint16[Re+15]=oe,this.uint16[Re+16]=ve,this.uint16[Re+17]=de,this.uint16[Re+18]=ye,this.uint16[Re+19]=Ce,this.uint16[Re+20]=Fe,this.uint16[Re+21]=Je,this.uint16[Re+22]=St,this.uint32[xt+12]=rt,this.float32[xt+13]=Ye,this.float32[xt+14]=_t,this.uint16[Re+30]=pt,this.uint16[Re+31]=st,r}}Ve.prototype.bytesPerElement=64,lt("StructArrayLayout8i15ui1ul2f2ui64",Ve);class Ze extends E{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const o=this.length;return this.resize(o+1),this.emplace(o,r)}emplace(r,o){return this.float32[1*r+0]=o,r}}Ze.prototype.bytesPerElement=4,lt("StructArrayLayout1f4",Ze);class ft extends E{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,l){const p=this.length;return this.resize(p+1),this.emplace(p,r,o,l)}emplace(r,o,l,p){const m=3*r;return this.uint16[6*r+0]=o,this.float32[m+1]=l,this.float32[m+2]=p,r}}ft.prototype.bytesPerElement=12,lt("StructArrayLayout1ui2f12",ft);class Lt extends E{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,l){const p=this.length;return this.resize(p+1),this.emplace(p,r,o,l)}emplace(r,o,l,p){const m=4*r;return this.uint32[2*r+0]=o,this.uint16[m+2]=l,this.uint16[m+3]=p,r}}Lt.prototype.bytesPerElement=8,lt("StructArrayLayout1ul2ui8",Lt);class Xe extends E{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o){const l=this.length;return this.resize(l+1),this.emplace(l,r,o)}emplace(r,o,l){const p=2*r;return this.uint16[p+0]=o,this.uint16[p+1]=l,r}}Xe.prototype.bytesPerElement=4,lt("StructArrayLayout2ui4",Xe);class tt extends E{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const o=this.length;return this.resize(o+1),this.emplace(o,r)}emplace(r,o){return this.uint16[1*r+0]=o,r}}tt.prototype.bytesPerElement=2,lt("StructArrayLayout1ui2",tt);class Pt extends E{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,l,p){const m=this.length;return this.resize(m+1),this.emplace(m,r,o,l,p)}emplace(r,o,l,p,m){const v=4*r;return this.float32[v+0]=o,this.float32[v+1]=l,this.float32[v+2]=p,this.float32[v+3]=m,r}}Pt.prototype.bytesPerElement=16,lt("StructArrayLayout4f16",Pt);class Sr extends T{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new M(this.anchorPointX,this.anchorPointY)}}Sr.prototype.size=20;class Vt extends we{get(r){return new Sr(this,r)}}lt("CollisionBoxArray",Vt);class qt extends T{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}qt.prototype.size=48;class Tr extends at{get(r){return new qt(this,r)}}lt("PlacedSymbolArray",Tr);class Pn extends T{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Pn.prototype.size=64;class $i extends Ve{get(r){return new Pn(this,r)}}lt("SymbolInstanceArray",$i);class Er extends Ze{getoffsetX(r){return this.float32[1*r+0]}}lt("GlyphOffsetArray",Er);class Qn extends U{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}lt("SymbolLineVertexArray",Qn);class Vn extends T{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Vn.prototype.size=12;class In extends ft{get(r){return new Vn(this,r)}}lt("TextAnchorOffsetArray",In);class An extends T{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}An.prototype.size=8;class Hi extends Lt{get(r){return new An(this,r)}}lt("FeatureIndexArray",Hi);class ma extends z{}class Ql extends z{}class qa extends z{}class ga extends X{}class eu extends ie{}class qc extends J{}class wn extends ae{}class Wi extends fe{}class Zo extends re{}class Za extends ge{}class Mn extends Te{}class zn extends Ue{}class fn extends it{}class Lr extends Xe{}const Ga=I([{name:"a_pos",components:2,type:"Int16"}],4),{members:Zc}=Ga;class un{constructor(r=[]){this.segments=r}prepareSegment(r,o,l,p){let m=this.segments[this.segments.length-1];return r>un.MAX_VERTEX_ARRAY_LENGTH&&Ke(`Max vertices per segment is ${un.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!m||m.vertexLength+r>un.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==p)&&(m={vertexOffset:o.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0},p!==void 0&&(m.sortKey=p),this.segments.push(m)),m}get(){return this.segments}destroy(){for(const r of this.segments)for(const o in r.vaos)r.vaos[o].destroy()}static simpleSegment(r,o,l,p){return new un([{vertexOffset:r,primitiveOffset:o,vertexLength:l,primitiveLength:p,vaos:{},sortKey:0}])}}function rp(i,r){return 256*(i=Ae(Math.floor(i),0,255))+Ae(Math.floor(r),0,255)}un.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,lt("SegmentVector",un);const tu=I([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ru={exports:{}},Go={exports:{}};Go.exports=function(i,r){var o,l,p,m,v,w,S,k;for(l=i.length-(o=3&i.length),p=r,v=3432918353,w=461845907,k=0;k<l;)S=255&i.charCodeAt(k)|(255&i.charCodeAt(++k))<<8|(255&i.charCodeAt(++k))<<16|(255&i.charCodeAt(++k))<<24,++k,p=27492+(65535&(m=5*(65535&(p=(p^=S=(65535&(S=(S=(65535&S)*v+(((S>>>16)*v&65535)<<16)&4294967295)<<15|S>>>17))*w+(((S>>>16)*w&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(m>>>16)&65535)<<16);switch(S=0,o){case 3:S^=(255&i.charCodeAt(k+2))<<16;case 2:S^=(255&i.charCodeAt(k+1))<<8;case 1:p^=S=(65535&(S=(S=(65535&(S^=255&i.charCodeAt(k)))*v+(((S>>>16)*v&65535)<<16)&4294967295)<<15|S>>>17))*w+(((S>>>16)*w&65535)<<16)&4294967295}return p^=i.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var np=Go.exports,Gc={exports:{}};Gc.exports=function(i,r){for(var o,l=i.length,p=r^l,m=0;l>=4;)o=1540483477*(65535&(o=255&i.charCodeAt(m)|(255&i.charCodeAt(++m))<<8|(255&i.charCodeAt(++m))<<16|(255&i.charCodeAt(++m))<<24))+((1540483477*(o>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),l-=4,++m;switch(l){case 3:p^=(255&i.charCodeAt(m+2))<<16;case 2:p^=(255&i.charCodeAt(m+1))<<8;case 1:p=1540483477*(65535&(p^=255&i.charCodeAt(m)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var Kc=np,Xc=Gc.exports;ru.exports=Kc,ru.exports.murmur3=Kc,ru.exports.murmur2=Xc;var nu=C(ru.exports);class Ka{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,o,l,p){this.ids.push(K_(r)),this.positions.push(o,l,p)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const o=K_(r);let l=0,p=this.ids.length-1;for(;l<p;){const v=l+p>>1;this.ids[v]>=o?p=v:l=v+1}const m=[];for(;this.ids[l]===o;)m.push({index:this.positions[3*l],start:this.positions[3*l+1],end:this.positions[3*l+2]}),l++;return m}static serialize(r,o){const l=new Float64Array(r.ids),p=new Uint32Array(r.positions);return Wm(l,p,0,l.length-1),o&&o.push(l.buffer,p.buffer),{ids:l,positions:p}}static deserialize(r){const o=new Ka;return o.ids=r.ids,o.positions=r.positions,o.indexed=!0,o}}function K_(i){const r=+i;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:nu(String(i))}function Wm(i,r,o,l){for(;o<l;){const p=i[o+l>>1];let m=o-1,v=l+1;for(;;){do m++;while(i[m]<p);do v--;while(i[v]>p);if(m>=v)break;ip(i,m,v),ip(r,3*m,3*v),ip(r,3*m+1,3*v+1),ip(r,3*m+2,3*v+2)}v-o<l-v?(Wm(i,r,o,v),o=v+1):(Wm(i,r,v+1,l),l=v)}}function ip(i,r,o){const l=i[r];i[r]=i[o],i[o]=l}lt("FeaturePositionMap",Ka);class Zs{constructor(r,o){this.gl=r.gl,this.location=o}}class op extends Zs{constructor(r,o){super(r,o),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class X_ extends Zs{constructor(r,o){super(r,o),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class Y_ extends Zs{constructor(r,o){super(r,o),this.current=Gt.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const iE=new Float32Array(16);function qm(i){return[rp(255*i.r,255*i.g),rp(255*i.b,255*i.a)]}class Yc{constructor(r,o,l){this.value=r,this.uniformNames=o.map(p=>`u_${p}`),this.type=l}setUniform(r,o,l){r.set(l.constantOr(this.value))}getBinding(r,o,l){return this.type==="color"?new Y_(r,o):new op(r,o)}}class iu{constructor(r,o){this.uniformNames=o.map(l=>`u_${l}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=r.tlbr}setUniform(r,o,l,p){const m=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;m&&r.set(m)}getBinding(r,o,l){return l.substr(0,9)==="u_pattern"?new X_(r,o):new op(r,o)}}class ya{constructor(r,o,l,p){this.expression=r,this.type=l,this.maxValue=0,this.paintVertexAttributes=o.map(m=>({name:`a_${m}`,type:"Float32",components:l==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(r,o,l,p,m){const v=this.paintVertexArray.length,w=this.expression.evaluate(new vr(0),o,{},p,[],m);this.paintVertexArray.resize(r),this._setPaintValue(v,r,w)}updatePaintArray(r,o,l,p){const m=this.expression.evaluate({zoom:0},l,p);this._setPaintValue(r,o,m)}_setPaintValue(r,o,l){if(this.type==="color"){const p=qm(l);for(let m=r;m<o;m++)this.paintVertexArray.emplace(m,p[0],p[1])}else{for(let p=r;p<o;p++)this.paintVertexArray.emplace(p,l);this.maxValue=Math.max(this.maxValue,Math.abs(l))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ao{constructor(r,o,l,p,m,v){this.expression=r,this.uniformNames=o.map(w=>`u_${w}_t`),this.type=l,this.useIntegerZoom=p,this.zoom=m,this.maxValue=0,this.paintVertexAttributes=o.map(w=>({name:`a_${w}`,type:"Float32",components:l==="color"?4:2,offset:0})),this.paintVertexArray=new v}populatePaintArray(r,o,l,p,m){const v=this.expression.evaluate(new vr(this.zoom),o,{},p,[],m),w=this.expression.evaluate(new vr(this.zoom+1),o,{},p,[],m),S=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(S,r,v,w)}updatePaintArray(r,o,l,p){const m=this.expression.evaluate({zoom:this.zoom},l,p),v=this.expression.evaluate({zoom:this.zoom+1},l,p);this._setPaintValue(r,o,m,v)}_setPaintValue(r,o,l,p){if(this.type==="color"){const m=qm(l),v=qm(p);for(let w=r;w<o;w++)this.paintVertexArray.emplace(w,m[0],m[1],v[0],v[1])}else{for(let m=r;m<o;m++)this.paintVertexArray.emplace(m,l,p);this.maxValue=Math.max(this.maxValue,Math.abs(l),Math.abs(p))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,o){const l=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,p=Ae(this.expression.interpolationFactor(l,this.zoom,this.zoom+1),0,1);r.set(p)}getBinding(r,o,l){return new op(r,o)}}class Xa{constructor(r,o,l,p,m,v){this.expression=r,this.type=o,this.useIntegerZoom=l,this.zoom=p,this.layerId=v,this.zoomInPaintVertexArray=new m,this.zoomOutPaintVertexArray=new m}populatePaintArray(r,o,l){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(p,r,o.patterns&&o.patterns[this.layerId],l)}updatePaintArray(r,o,l,p,m){this._setPaintValues(r,o,l.patterns&&l.patterns[this.layerId],m)}_setPaintValues(r,o,l,p){if(!p||!l)return;const{min:m,mid:v,max:w}=l,S=p[m],k=p[v],P=p[w];if(S&&k&&P)for(let A=r;A<o;A++)this.zoomInPaintVertexArray.emplace(A,k.tl[0],k.tl[1],k.br[0],k.br[1],S.tl[0],S.tl[1],S.br[0],S.br[1],k.pixelRatio,S.pixelRatio),this.zoomOutPaintVertexArray.emplace(A,k.tl[0],k.tl[1],k.br[0],k.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],k.pixelRatio,P.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,tu.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,tu.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class J_{constructor(r,o,l){this.binders={},this._buffers=[];const p=[];for(const m in r.paint._values){if(!l(m))continue;const v=r.paint.get(m);if(!(v instanceof mo&&Co(v.property.specification)))continue;const w=oE(m,r.type),S=v.value,k=v.property.specification.type,P=v.property.useIntegerZoom,A=v.property.specification["property-type"],O=A==="cross-faded"||A==="cross-faded-data-driven";if(S.kind==="constant")this.binders[m]=O?new iu(S.value,w):new Yc(S.value,w,k),p.push(`/u_${m}`);else if(S.kind==="source"||O){const N=Q_(m,k,"source");this.binders[m]=O?new Xa(S,k,P,o,N,r.id):new ya(S,w,k,N),p.push(`/a_${m}`)}else{const N=Q_(m,k,"composite");this.binders[m]=new Ao(S,w,k,P,o,N),p.push(`/z_${m}`)}}this.cacheKey=p.sort().join("")}getMaxValue(r){const o=this.binders[r];return o instanceof ya||o instanceof Ao?o.maxValue:0}populatePaintArrays(r,o,l,p,m){for(const v in this.binders){const w=this.binders[v];(w instanceof ya||w instanceof Ao||w instanceof Xa)&&w.populatePaintArray(r,o,l,p,m)}}setConstantPatternPositions(r,o){for(const l in this.binders){const p=this.binders[l];p instanceof iu&&p.setConstantPatternPositions(r,o)}}updatePaintArrays(r,o,l,p,m){let v=!1;for(const w in r){const S=o.getPositions(w);for(const k of S){const P=l.feature(k.index);for(const A in this.binders){const O=this.binders[A];if((O instanceof ya||O instanceof Ao||O instanceof Xa)&&O.expression.isStateDependent===!0){const N=p.paint.get(A);O.expression=N.value,O.updatePaintArray(k.start,k.end,P,r[w],m),v=!0}}}}return v}defines(){const r=[];for(const o in this.binders){const l=this.binders[o];(l instanceof Yc||l instanceof iu)&&r.push(...l.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return r}getBinderAttributes(){const r=[];for(const o in this.binders){const l=this.binders[o];if(l instanceof ya||l instanceof Ao)for(let p=0;p<l.paintVertexAttributes.length;p++)r.push(l.paintVertexAttributes[p].name);else if(l instanceof Xa)for(let p=0;p<tu.members.length;p++)r.push(tu.members[p].name)}return r}getBinderUniforms(){const r=[];for(const o in this.binders){const l=this.binders[o];if(l instanceof Yc||l instanceof iu||l instanceof Ao)for(const p of l.uniformNames)r.push(p)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,o){const l=[];for(const p in this.binders){const m=this.binders[p];if(m instanceof Yc||m instanceof iu||m instanceof Ao){for(const v of m.uniformNames)if(o[v]){const w=m.getBinding(r,o[v],v);l.push({name:v,property:p,binding:w})}}}return l}setUniforms(r,o,l,p){for(const{name:m,property:v,binding:w}of o)this.binders[v].setUniform(w,p,l.get(v),m)}updatePaintBuffers(r){this._buffers=[];for(const o in this.binders){const l=this.binders[o];if(r&&l instanceof Xa){const p=r.fromScale===2?l.zoomInPaintVertexBuffer:l.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(l instanceof ya||l instanceof Ao)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(r){for(const o in this.binders){const l=this.binders[o];(l instanceof ya||l instanceof Ao||l instanceof Xa)&&l.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const o=this.binders[r];(o instanceof ya||o instanceof Ao||o instanceof Xa)&&o.destroy()}}}class Gs{constructor(r,o,l=()=>!0){this.programConfigurations={};for(const p of r)this.programConfigurations[p.id]=new J_(p,o,l);this.needsUpload=!1,this._featureMap=new Ka,this._bufferOffset=0}populatePaintArrays(r,o,l,p,m,v){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(r,o,p,m,v);o.id!==void 0&&this._featureMap.add(o.id,l,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,o,l,p){for(const m of l)this.needsUpload=this.programConfigurations[m.id].updatePaintArrays(r,this._featureMap,o,m,p)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function oE(i,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[i]||[i.replace(`${r}-`,"").replace(/-/g,"_")]}function Q_(i,r,o){const l={color:{source:J,composite:Pt},number:{source:Ze,composite:J}},p=function(m){return{"line-pattern":{source:wn,composite:wn},"fill-pattern":{source:wn,composite:wn},"fill-extrusion-pattern":{source:wn,composite:wn}}[m]}(i);return p&&p[o]||l[r][o]}lt("ConstantBinder",Yc),lt("CrossFadedConstantBinder",iu),lt("SourceExpressionBinder",ya),lt("CrossFadedCompositeBinder",Xa),lt("CompositeExpressionBinder",Ao),lt("ProgramConfiguration",J_,{omit:["_buffers"]}),lt("ProgramConfigurationSet",Gs);const on=8192,Zm=Math.pow(2,14)-1,ev=-Zm-1;function Ks(i){const r=on/i.extent,o=i.loadGeometry();for(let l=0;l<o.length;l++){const p=o[l];for(let m=0;m<p.length;m++){const v=p[m],w=Math.round(v.x*r),S=Math.round(v.y*r);v.x=Ae(w,ev,Zm),v.y=Ae(S,ev,Zm),(w<v.x||w>v.x+1||S<v.y||S>v.y+1)&&Ke("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function Xs(i,r){return{type:i.type,id:i.id,properties:i.properties,geometry:r?Ks(i):[]}}function ap(i,r,o,l,p){i.emplaceBack(2*r+(l+1)/2,2*o+(p+1)/2)}class Gm{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(o=>o.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Ql,this.indexArray=new fn,this.segments=new un,this.programConfigurations=new Gs(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(r,o,l){const p=this.layers[0],m=[];let v=null,w=!1;p.type==="circle"&&(v=p.layout.get("circle-sort-key"),w=!v.isConstant());for(const{feature:S,id:k,index:P,sourceLayerIndex:A}of r){const O=this.layers[0]._featureFilter.needGeometry,N=Xs(S,O);if(!this.layers[0]._featureFilter.filter(new vr(this.zoom),N,l))continue;const V=w?v.evaluate(N,{},l):void 0,q={id:k,properties:S.properties,type:S.type,sourceLayerIndex:A,index:P,geometry:O?N.geometry:Ks(S),patterns:{},sortKey:V};m.push(q)}w&&m.sort((S,k)=>S.sortKey-k.sortKey);for(const S of m){const{geometry:k,index:P,sourceLayerIndex:A}=S,O=r[P].feature;this.addFeature(S,k,P,l),o.featureIndex.insert(O,k,P,A,this.index)}}update(r,o,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Zc),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,o,l,p){for(const m of o)for(const v of m){const w=v.x,S=v.y;if(w<0||w>=on||S<0||S>=on)continue;const k=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),P=k.vertexLength;ap(this.layoutVertexArray,w,S,-1,-1),ap(this.layoutVertexArray,w,S,1,-1),ap(this.layoutVertexArray,w,S,1,1),ap(this.layoutVertexArray,w,S,-1,1),this.indexArray.emplaceBack(P,P+1,P+2),this.indexArray.emplaceBack(P,P+3,P+2),k.vertexLength+=4,k.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,l,{},p)}}function tv(i,r){for(let o=0;o<i.length;o++)if(ou(r,i[o]))return!0;for(let o=0;o<r.length;o++)if(ou(i,r[o]))return!0;return!!Km(i,r)}function aE(i,r,o){return!!ou(i,r)||!!Xm(r,i,o)}function rv(i,r){if(i.length===1)return iv(r,i[0]);for(let o=0;o<r.length;o++){const l=r[o];for(let p=0;p<l.length;p++)if(ou(i,l[p]))return!0}for(let o=0;o<i.length;o++)if(iv(r,i[o]))return!0;for(let o=0;o<r.length;o++)if(Km(i,r[o]))return!0;return!1}function sE(i,r,o){if(i.length>1){if(Km(i,r))return!0;for(let l=0;l<r.length;l++)if(Xm(r[l],i,o))return!0}for(let l=0;l<i.length;l++)if(Xm(i[l],r,o))return!0;return!1}function Km(i,r){if(i.length===0||r.length===0)return!1;for(let o=0;o<i.length-1;o++){const l=i[o],p=i[o+1];for(let m=0;m<r.length-1;m++)if(lE(l,p,r[m],r[m+1]))return!0}return!1}function lE(i,r,o,l){return Qe(i,o,l)!==Qe(r,o,l)&&Qe(i,r,o)!==Qe(i,r,l)}function Xm(i,r,o){const l=o*o;if(r.length===1)return i.distSqr(r[0])<l;for(let p=1;p<r.length;p++)if(nv(i,r[p-1],r[p])<l)return!0;return!1}function nv(i,r,o){const l=r.distSqr(o);if(l===0)return i.distSqr(r);const p=((i.x-r.x)*(o.x-r.x)+(i.y-r.y)*(o.y-r.y))/l;return i.distSqr(p<0?r:p>1?o:o.sub(r)._mult(p)._add(r))}function iv(i,r){let o,l,p,m=!1;for(let v=0;v<i.length;v++){o=i[v];for(let w=0,S=o.length-1;w<o.length;S=w++)l=o[w],p=o[S],l.y>r.y!=p.y>r.y&&r.x<(p.x-l.x)*(r.y-l.y)/(p.y-l.y)+l.x&&(m=!m)}return m}function ou(i,r){let o=!1;for(let l=0,p=i.length-1;l<i.length;p=l++){const m=i[l],v=i[p];m.y>r.y!=v.y>r.y&&r.x<(v.x-m.x)*(r.y-m.y)/(v.y-m.y)+m.x&&(o=!o)}return o}function uE(i,r,o){const l=o[0],p=o[2];if(i.x<l.x&&r.x<l.x||i.x>p.x&&r.x>p.x||i.y<l.y&&r.y<l.y||i.y>p.y&&r.y>p.y)return!1;const m=Qe(i,r,o[0]);return m!==Qe(i,r,o[1])||m!==Qe(i,r,o[2])||m!==Qe(i,r,o[3])}function Jc(i,r,o){const l=r.paint.get(i).value;return l.kind==="constant"?l.value:o.programConfigurations.get(r.id).getMaxValue(i)}function sp(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function lp(i,r,o,l,p){if(!r[0]&&!r[1])return i;const m=M.convert(r)._mult(p);o==="viewport"&&m._rotate(-l);const v=[];for(let w=0;w<i.length;w++)v.push(i[w].sub(m));return v}let ov,av;lt("CircleBucket",Gm,{omit:["layers"]});var cE={get paint(){return av=av||new d({"circle-radius":new Tt(ke.paint_circle["circle-radius"]),"circle-color":new Tt(ke.paint_circle["circle-color"]),"circle-blur":new Tt(ke.paint_circle["circle-blur"]),"circle-opacity":new Tt(ke.paint_circle["circle-opacity"]),"circle-translate":new vt(ke.paint_circle["circle-translate"]),"circle-translate-anchor":new vt(ke.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new vt(ke.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new vt(ke.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Tt(ke.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Tt(ke.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Tt(ke.paint_circle["circle-stroke-opacity"])})},get layout(){return ov=ov||new d({"circle-sort-key":new Tt(ke.layout_circle["circle-sort-key"])})}},ei=1e-6,au=typeof Float32Array<"u"?Float32Array:Array;function Ym(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function sv(i,r,o){var l=r[0],p=r[1],m=r[2],v=r[3],w=r[4],S=r[5],k=r[6],P=r[7],A=r[8],O=r[9],N=r[10],V=r[11],q=r[12],ee=r[13],oe=r[14],ve=r[15],de=o[0],ye=o[1],Ce=o[2],Fe=o[3];return i[0]=de*l+ye*w+Ce*A+Fe*q,i[1]=de*p+ye*S+Ce*O+Fe*ee,i[2]=de*m+ye*k+Ce*N+Fe*oe,i[3]=de*v+ye*P+Ce*V+Fe*ve,i[4]=(de=o[4])*l+(ye=o[5])*w+(Ce=o[6])*A+(Fe=o[7])*q,i[5]=de*p+ye*S+Ce*O+Fe*ee,i[6]=de*m+ye*k+Ce*N+Fe*oe,i[7]=de*v+ye*P+Ce*V+Fe*ve,i[8]=(de=o[8])*l+(ye=o[9])*w+(Ce=o[10])*A+(Fe=o[11])*q,i[9]=de*p+ye*S+Ce*O+Fe*ee,i[10]=de*m+ye*k+Ce*N+Fe*oe,i[11]=de*v+ye*P+Ce*V+Fe*ve,i[12]=(de=o[12])*l+(ye=o[13])*w+(Ce=o[14])*A+(Fe=o[15])*q,i[13]=de*p+ye*S+Ce*O+Fe*ee,i[14]=de*m+ye*k+Ce*N+Fe*oe,i[15]=de*v+ye*P+Ce*V+Fe*ve,i}Math.hypot||(Math.hypot=function(){for(var i=0,r=arguments.length;r--;)i+=arguments[r]*arguments[r];return Math.sqrt(i)});var Qc,hE=sv;function up(i,r,o){var l=r[0],p=r[1],m=r[2],v=r[3];return i[0]=o[0]*l+o[4]*p+o[8]*m+o[12]*v,i[1]=o[1]*l+o[5]*p+o[9]*m+o[13]*v,i[2]=o[2]*l+o[6]*p+o[10]*m+o[14]*v,i[3]=o[3]*l+o[7]*p+o[11]*m+o[15]*v,i}Qc=new au(4),au!=Float32Array&&(Qc[0]=0,Qc[1]=0,Qc[2]=0,Qc[3]=0);class dE extends _{constructor(r){super(r,cE)}createBucket(r){return new Gm(r)}queryRadius(r){const o=r;return Jc("circle-radius",this,o)+Jc("circle-stroke-width",this,o)+sp(this.paint.get("circle-translate"))}queryIntersectsFeature(r,o,l,p,m,v,w,S){const k=lp(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),v.angle,w),P=this.paint.get("circle-radius").evaluate(o,l)+this.paint.get("circle-stroke-width").evaluate(o,l),A=this.paint.get("circle-pitch-alignment")==="map",O=A?k:function(V,q){return V.map(ee=>lv(ee,q))}(k,S),N=A?P*w:P;for(const V of p)for(const q of V){const ee=A?q:lv(q,S);let oe=N;const ve=up([],[q.x,q.y,0,1],S);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?oe*=ve[3]/v.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(oe*=v.cameraToCenterDistance/ve[3]),aE(O,ee,oe))return!0}return!1}}function lv(i,r){const o=up([],[i.x,i.y,0,1],r);return new M(o[0]/o[3],o[1]/o[3])}class uv extends Gm{}let cv;lt("HeatmapBucket",uv,{omit:["layers"]});var pE={get paint(){return cv=cv||new d({"heatmap-radius":new Tt(ke.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Tt(ke.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new vt(ke.paint_heatmap["heatmap-intensity"]),"heatmap-color":new s(ke.paint_heatmap["heatmap-color"]),"heatmap-opacity":new vt(ke.paint_heatmap["heatmap-opacity"])})}};function Jm(i,{width:r,height:o},l,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==r*o*l)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${r*o*l}`)}else p=new Uint8Array(r*o*l);return i.width=r,i.height=o,i.data=p,i}function hv(i,{width:r,height:o},l){if(r===i.width&&o===i.height)return;const p=Jm({},{width:r,height:o},l);Qm(i,p,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,r),height:Math.min(i.height,o)},l),i.width=r,i.height=o,i.data=p.data}function Qm(i,r,o,l,p,m){if(p.width===0||p.height===0)return r;if(p.width>i.width||p.height>i.height||o.x>i.width-p.width||o.y>i.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>r.width||p.height>r.height||l.x>r.width-p.width||l.y>r.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const v=i.data,w=r.data;if(v===w)throw new Error("srcData equals dstData, so image is already copied");for(let S=0;S<p.height;S++){const k=((o.y+S)*i.width+o.x)*m,P=((l.y+S)*r.width+l.x)*m;for(let A=0;A<p.width*m;A++)w[P+A]=v[k+A]}return r}class eh{constructor(r,o){Jm(this,r,1,o)}resize(r){hv(this,r,1)}clone(){return new eh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,o,l,p,m){Qm(r,o,l,p,m,1)}}class qi{constructor(r,o){Jm(this,r,4,o)}resize(r){hv(this,r,4)}replace(r,o){o?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new qi({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,o,l,p,m){Qm(r,o,l,p,m,4)}}function dv(i){const r={},o=i.resolution||256,l=i.clips?i.clips.length:1,p=i.image||new qi({width:o,height:l});if(Math.log(o)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${o}`);const m=(v,w,S)=>{r[i.evaluationKey]=S;const k=i.expression.evaluate(r);p.data[v+w+0]=Math.floor(255*k.r/k.a),p.data[v+w+1]=Math.floor(255*k.g/k.a),p.data[v+w+2]=Math.floor(255*k.b/k.a),p.data[v+w+3]=Math.floor(255*k.a)};if(i.clips)for(let v=0,w=0;v<l;++v,w+=4*o)for(let S=0,k=0;S<o;S++,k+=4){const P=S/(o-1),{start:A,end:O}=i.clips[v];m(w,k,A*(1-P)+O*P)}else for(let v=0,w=0;v<o;v++,w+=4)m(0,w,v/(o-1));return p}lt("AlphaImage",eh),lt("RGBAImage",qi);class fE extends _{createBucket(r){return new uv(r)}constructor(r){super(r,pE),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=dv({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let pv;var mE={get paint(){return pv=pv||new d({"hillshade-illumination-direction":new vt(ke.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new vt(ke.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new vt(ke.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new vt(ke.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new vt(ke.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new vt(ke.paint_hillshade["hillshade-accent-color"])})}};class gE extends _{constructor(r){super(r,mE)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const yE=I([{name:"a_pos",components:2,type:"Int16"}],4),{members:_E}=yE;var eg={exports:{}};function cp(i,r,o){o=o||2;var l,p,m,v,w,S,k,P=r&&r.length,A=P?r[0]*o:i.length,O=fv(i,0,A,o,!0),N=[];if(!O||O.next===O.prev)return N;if(P&&(O=function(q,ee,oe,ve){var de,ye,Ce,Fe=[];for(de=0,ye=ee.length;de<ye;de++)(Ce=fv(q,ee[de]*ve,de<ye-1?ee[de+1]*ve:q.length,ve,!1))===Ce.next&&(Ce.steiner=!0),Fe.push(kE(Ce));for(Fe.sort(SE),de=0;de<Fe.length;de++)oe=TE(Fe[de],oe);return oe}(i,r,O,o)),i.length>80*o){l=m=i[0],p=v=i[1];for(var V=o;V<A;V+=o)(w=i[V])<l&&(l=w),(S=i[V+1])<p&&(p=S),w>m&&(m=w),S>v&&(v=S);k=(k=Math.max(m-l,v-p))!==0?32767/k:0}return th(O,N,o,l,p,k,0),N}function fv(i,r,o,l,p){var m,v;if(p===ng(i,r,o,l)>0)for(m=r;m<o;m+=l)v=yv(m,i[m],i[m+1],v);else for(m=o-l;m>=r;m-=l)v=yv(m,i[m],i[m+1],v);return v&&hp(v,v.next)&&(nh(v),v=v.next),v}function Ys(i,r){if(!i)return i;r||(r=i);var o,l=i;do if(o=!1,l.steiner||!hp(l,l.next)&&Gr(l.prev,l,l.next)!==0)l=l.next;else{if(nh(l),(l=r=l.prev)===l.next)break;o=!0}while(o||l!==r);return r}function th(i,r,o,l,p,m,v){if(i){!v&&m&&function(P,A,O,N){var V=P;do V.z===0&&(V.z=tg(V.x,V.y,A,O,N)),V.prevZ=V.prev,V.nextZ=V.next,V=V.next;while(V!==P);V.prevZ.nextZ=null,V.prevZ=null,function(q){var ee,oe,ve,de,ye,Ce,Fe,Je,St=1;do{for(oe=q,q=null,ye=null,Ce=0;oe;){for(Ce++,ve=oe,Fe=0,ee=0;ee<St&&(Fe++,ve=ve.nextZ);ee++);for(Je=St;Fe>0||Je>0&&ve;)Fe!==0&&(Je===0||!ve||oe.z<=ve.z)?(de=oe,oe=oe.nextZ,Fe--):(de=ve,ve=ve.nextZ,Je--),ye?ye.nextZ=de:q=de,de.prevZ=ye,ye=de;oe=ve}ye.nextZ=null,St*=2}while(Ce>1)}(V)}(i,l,p,m);for(var w,S,k=i;i.prev!==i.next;)if(w=i.prev,S=i.next,m?xE(i,l,p,m):vE(i))r.push(w.i/o|0),r.push(i.i/o|0),r.push(S.i/o|0),nh(i),i=S.next,k=S.next;else if((i=S)===k){v?v===1?th(i=wE(Ys(i),r,o),r,o,l,p,m,2):v===2&&bE(i,r,o,l,p,m):th(Ys(i),r,o,l,p,m,1);break}}}function vE(i){var r=i.prev,o=i,l=i.next;if(Gr(r,o,l)>=0)return!1;for(var p=r.x,m=o.x,v=l.x,w=r.y,S=o.y,k=l.y,P=p<m?p<v?p:v:m<v?m:v,A=w<S?w<k?w:k:S<k?S:k,O=p>m?p>v?p:v:m>v?m:v,N=w>S?w>k?w:k:S>k?S:k,V=l.next;V!==r;){if(V.x>=P&&V.x<=O&&V.y>=A&&V.y<=N&&su(p,w,m,S,v,k,V.x,V.y)&&Gr(V.prev,V,V.next)>=0)return!1;V=V.next}return!0}function xE(i,r,o,l){var p=i.prev,m=i,v=i.next;if(Gr(p,m,v)>=0)return!1;for(var w=p.x,S=m.x,k=v.x,P=p.y,A=m.y,O=v.y,N=w<S?w<k?w:k:S<k?S:k,V=P<A?P<O?P:O:A<O?A:O,q=w>S?w>k?w:k:S>k?S:k,ee=P>A?P>O?P:O:A>O?A:O,oe=tg(N,V,r,o,l),ve=tg(q,ee,r,o,l),de=i.prevZ,ye=i.nextZ;de&&de.z>=oe&&ye&&ye.z<=ve;){if(de.x>=N&&de.x<=q&&de.y>=V&&de.y<=ee&&de!==p&&de!==v&&su(w,P,S,A,k,O,de.x,de.y)&&Gr(de.prev,de,de.next)>=0||(de=de.prevZ,ye.x>=N&&ye.x<=q&&ye.y>=V&&ye.y<=ee&&ye!==p&&ye!==v&&su(w,P,S,A,k,O,ye.x,ye.y)&&Gr(ye.prev,ye,ye.next)>=0))return!1;ye=ye.nextZ}for(;de&&de.z>=oe;){if(de.x>=N&&de.x<=q&&de.y>=V&&de.y<=ee&&de!==p&&de!==v&&su(w,P,S,A,k,O,de.x,de.y)&&Gr(de.prev,de,de.next)>=0)return!1;de=de.prevZ}for(;ye&&ye.z<=ve;){if(ye.x>=N&&ye.x<=q&&ye.y>=V&&ye.y<=ee&&ye!==p&&ye!==v&&su(w,P,S,A,k,O,ye.x,ye.y)&&Gr(ye.prev,ye,ye.next)>=0)return!1;ye=ye.nextZ}return!0}function wE(i,r,o){var l=i;do{var p=l.prev,m=l.next.next;!hp(p,m)&&mv(p,l,l.next,m)&&rh(p,m)&&rh(m,p)&&(r.push(p.i/o|0),r.push(l.i/o|0),r.push(m.i/o|0),nh(l),nh(l.next),l=i=m),l=l.next}while(l!==i);return Ys(l)}function bE(i,r,o,l,p,m){var v=i;do{for(var w=v.next.next;w!==v.prev;){if(v.i!==w.i&&CE(v,w)){var S=gv(v,w);return v=Ys(v,v.next),S=Ys(S,S.next),th(v,r,o,l,p,m,0),void th(S,r,o,l,p,m,0)}w=w.next}v=v.next}while(v!==i)}function SE(i,r){return i.x-r.x}function TE(i,r){var o=function(p,m){var v,w=m,S=p.x,k=p.y,P=-1/0;do{if(k<=w.y&&k>=w.next.y&&w.next.y!==w.y){var A=w.x+(k-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(A<=S&&A>P&&(P=A,v=w.x<w.next.x?w:w.next,A===S))return v}w=w.next}while(w!==m);if(!v)return null;var O,N=v,V=v.x,q=v.y,ee=1/0;w=v;do S>=w.x&&w.x>=V&&S!==w.x&&su(k<q?S:P,k,V,q,k<q?P:S,k,w.x,w.y)&&(O=Math.abs(k-w.y)/(S-w.x),rh(w,p)&&(O<ee||O===ee&&(w.x>v.x||w.x===v.x&&EE(v,w)))&&(v=w,ee=O)),w=w.next;while(w!==N);return v}(i,r);if(!o)return r;var l=gv(o,i);return Ys(l,l.next),Ys(o,o.next)}function EE(i,r){return Gr(i.prev,i,r.prev)<0&&Gr(r.next,i,i.next)<0}function tg(i,r,o,l,p){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-o)*p|0)|i<<8))|i<<4))|i<<2))|i<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-l)*p|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function kE(i){var r=i,o=i;do(r.x<o.x||r.x===o.x&&r.y<o.y)&&(o=r),r=r.next;while(r!==i);return o}function su(i,r,o,l,p,m,v,w){return(p-v)*(r-w)>=(i-v)*(m-w)&&(i-v)*(l-w)>=(o-v)*(r-w)&&(o-v)*(m-w)>=(p-v)*(l-w)}function CE(i,r){return i.next.i!==r.i&&i.prev.i!==r.i&&!function(o,l){var p=o;do{if(p.i!==o.i&&p.next.i!==o.i&&p.i!==l.i&&p.next.i!==l.i&&mv(p,p.next,o,l))return!0;p=p.next}while(p!==o);return!1}(i,r)&&(rh(i,r)&&rh(r,i)&&function(o,l){var p=o,m=!1,v=(o.x+l.x)/2,w=(o.y+l.y)/2;do p.y>w!=p.next.y>w&&p.next.y!==p.y&&v<(p.next.x-p.x)*(w-p.y)/(p.next.y-p.y)+p.x&&(m=!m),p=p.next;while(p!==o);return m}(i,r)&&(Gr(i.prev,i,r.prev)||Gr(i,r.prev,r))||hp(i,r)&&Gr(i.prev,i,i.next)>0&&Gr(r.prev,r,r.next)>0)}function Gr(i,r,o){return(r.y-i.y)*(o.x-r.x)-(r.x-i.x)*(o.y-r.y)}function hp(i,r){return i.x===r.x&&i.y===r.y}function mv(i,r,o,l){var p=pp(Gr(i,r,o)),m=pp(Gr(i,r,l)),v=pp(Gr(o,l,i)),w=pp(Gr(o,l,r));return p!==m&&v!==w||!(p!==0||!dp(i,o,r))||!(m!==0||!dp(i,l,r))||!(v!==0||!dp(o,i,l))||!(w!==0||!dp(o,r,l))}function dp(i,r,o){return r.x<=Math.max(i.x,o.x)&&r.x>=Math.min(i.x,o.x)&&r.y<=Math.max(i.y,o.y)&&r.y>=Math.min(i.y,o.y)}function pp(i){return i>0?1:i<0?-1:0}function rh(i,r){return Gr(i.prev,i,i.next)<0?Gr(i,r,i.next)>=0&&Gr(i,i.prev,r)>=0:Gr(i,r,i.prev)<0||Gr(i,i.next,r)<0}function gv(i,r){var o=new rg(i.i,i.x,i.y),l=new rg(r.i,r.x,r.y),p=i.next,m=r.prev;return i.next=r,r.prev=i,o.next=p,p.prev=o,l.next=o,o.prev=l,m.next=l,l.prev=m,l}function yv(i,r,o,l){var p=new rg(i,r,o);return l?(p.next=l.next,p.prev=l,l.next.prev=p,l.next=p):(p.prev=p,p.next=p),p}function nh(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function rg(i,r,o){this.i=i,this.x=r,this.y=o,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ng(i,r,o,l){for(var p=0,m=r,v=o-l;m<o;m+=l)p+=(i[v]-i[m])*(i[m+1]+i[v+1]),v=m;return p}eg.exports=cp,eg.exports.default=cp,cp.deviation=function(i,r,o,l){var p=r&&r.length,m=Math.abs(ng(i,0,p?r[0]*o:i.length,o));if(p)for(var v=0,w=r.length;v<w;v++)m-=Math.abs(ng(i,r[v]*o,v<w-1?r[v+1]*o:i.length,o));var S=0;for(v=0;v<l.length;v+=3){var k=l[v]*o,P=l[v+1]*o,A=l[v+2]*o;S+=Math.abs((i[k]-i[A])*(i[P+1]-i[k+1])-(i[k]-i[P])*(i[A+1]-i[k+1]))}return m===0&&S===0?0:Math.abs((S-m)/m)},cp.flatten=function(i){for(var r=i[0][0].length,o={vertices:[],holes:[],dimensions:r},l=0,p=0;p<i.length;p++){for(var m=0;m<i[p].length;m++)for(var v=0;v<r;v++)o.vertices.push(i[p][m][v]);p>0&&o.holes.push(l+=i[p-1].length)}return o};var _v=C(eg.exports);function ig(i,r,o){const l=o.patternDependencies;let p=!1;for(const m of r){const v=m.paint.get(`${i}-pattern`);v.isConstant()||(p=!0);const w=v.constantOr(null);w&&(p=!0,l[w.to]=!0,l[w.from]=!0)}return p}function og(i,r,o,l,p){const m=p.patternDependencies;for(const v of r){const w=v.paint.get(`${i}-pattern`).value;if(w.kind!=="constant"){let S=w.evaluate({zoom:l-1},o,{},p.availableImages),k=w.evaluate({zoom:l},o,{},p.availableImages),P=w.evaluate({zoom:l+1},o,{},p.availableImages);S=S&&S.name?S.name:S,k=k&&k.name?k.name:k,P=P&&P.name?P.name:P,m[S]=!0,m[k]=!0,m[P]=!0,o.patterns[v.id]={min:S,mid:k,max:P}}}return o}class ag{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(o=>o.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new qa,this.indexArray=new fn,this.indexArray2=new Lr,this.programConfigurations=new Gs(r.layers,r.zoom),this.segments=new un,this.segments2=new un,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(r,o,l){this.hasPattern=ig("fill",this.layers,o);const p=this.layers[0].layout.get("fill-sort-key"),m=!p.isConstant(),v=[];for(const{feature:w,id:S,index:k,sourceLayerIndex:P}of r){const A=this.layers[0]._featureFilter.needGeometry,O=Xs(w,A);if(!this.layers[0]._featureFilter.filter(new vr(this.zoom),O,l))continue;const N=m?p.evaluate(O,{},l,o.availableImages):void 0,V={id:S,properties:w.properties,type:w.type,sourceLayerIndex:P,index:k,geometry:A?O.geometry:Ks(w),patterns:{},sortKey:N};v.push(V)}m&&v.sort((w,S)=>w.sortKey-S.sortKey);for(const w of v){const{geometry:S,index:k,sourceLayerIndex:P}=w;if(this.hasPattern){const A=og("fill",this.layers,w,this.zoom,o);this.patternFeatures.push(A)}else this.addFeature(w,S,k,l,{});o.featureIndex.insert(r[k].feature,S,k,P,this.index)}}update(r,o,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,l)}addFeatures(r,o,l){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,o,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,_E),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,o,l,p,m){for(const v of Ml(o,500)){let w=0;for(const N of v)w+=N.length;const S=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray),k=S.vertexLength,P=[],A=[];for(const N of v){if(N.length===0)continue;N!==v[0]&&A.push(P.length/2);const V=this.segments2.prepareSegment(N.length,this.layoutVertexArray,this.indexArray2),q=V.vertexLength;this.layoutVertexArray.emplaceBack(N[0].x,N[0].y),this.indexArray2.emplaceBack(q+N.length-1,q),P.push(N[0].x),P.push(N[0].y);for(let ee=1;ee<N.length;ee++)this.layoutVertexArray.emplaceBack(N[ee].x,N[ee].y),this.indexArray2.emplaceBack(q+ee-1,q+ee),P.push(N[ee].x),P.push(N[ee].y);V.vertexLength+=N.length,V.primitiveLength+=N.length}const O=_v(P,A);for(let N=0;N<O.length;N+=3)this.indexArray.emplaceBack(k+O[N],k+O[N+1],k+O[N+2]);S.vertexLength+=w,S.primitiveLength+=O.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,l,m,p)}}let vv,xv;lt("FillBucket",ag,{omit:["layers","patternFeatures"]});var PE={get paint(){return xv=xv||new d({"fill-antialias":new vt(ke.paint_fill["fill-antialias"]),"fill-opacity":new Tt(ke.paint_fill["fill-opacity"]),"fill-color":new Tt(ke.paint_fill["fill-color"]),"fill-outline-color":new Tt(ke.paint_fill["fill-outline-color"]),"fill-translate":new vt(ke.paint_fill["fill-translate"]),"fill-translate-anchor":new vt(ke.paint_fill["fill-translate-anchor"]),"fill-pattern":new y(ke.paint_fill["fill-pattern"])})},get layout(){return vv=vv||new d({"fill-sort-key":new Tt(ke.layout_fill["fill-sort-key"])})}};class IE extends _{constructor(r){super(r,PE)}recalculate(r,o){super.recalculate(r,o);const l=this.paint._values["fill-outline-color"];l.value.kind==="constant"&&l.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new ag(r)}queryRadius(){return sp(this.paint.get("fill-translate"))}queryIntersectsFeature(r,o,l,p,m,v,w){return rv(lp(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),v.angle,w),p)}isTileClipped(){return!0}}const AE=I([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),ME=I([{name:"a_centroid",components:2,type:"Int16"}],4),{members:zE}=AE;var Ya={},LE=D,wv=lu;function lu(i,r,o,l,p){this.properties={},this.extent=o,this.type=0,this._pbf=i,this._geometry=-1,this._keys=l,this._values=p,i.readFields(RE,this,r)}function RE(i,r,o){i==1?r.id=o.readVarint():i==2?function(l,p){for(var m=l.readVarint()+l.pos;l.pos<m;){var v=p._keys[l.readVarint()],w=p._values[l.readVarint()];p.properties[v]=w}}(o,r):i==3?r.type=o.readVarint():i==4&&(r._geometry=o.pos)}function DE(i){for(var r,o,l=0,p=0,m=i.length,v=m-1;p<m;v=p++)l+=((o=i[v]).x-(r=i[p]).x)*(r.y+o.y);return l}lu.types=["Unknown","Point","LineString","Polygon"],lu.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var r,o=i.readVarint()+i.pos,l=1,p=0,m=0,v=0,w=[];i.pos<o;){if(p<=0){var S=i.readVarint();l=7&S,p=S>>3}if(p--,l===1||l===2)m+=i.readSVarint(),v+=i.readSVarint(),l===1&&(r&&w.push(r),r=[]),r.push(new LE(m,v));else{if(l!==7)throw new Error("unknown command "+l);r&&r.push(r[0].clone())}}return r&&w.push(r),w},lu.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var r=i.readVarint()+i.pos,o=1,l=0,p=0,m=0,v=1/0,w=-1/0,S=1/0,k=-1/0;i.pos<r;){if(l<=0){var P=i.readVarint();o=7&P,l=P>>3}if(l--,o===1||o===2)(p+=i.readSVarint())<v&&(v=p),p>w&&(w=p),(m+=i.readSVarint())<S&&(S=m),m>k&&(k=m);else if(o!==7)throw new Error("unknown command "+o)}return[v,S,w,k]},lu.prototype.toGeoJSON=function(i,r,o){var l,p,m=this.extent*Math.pow(2,o),v=this.extent*i,w=this.extent*r,S=this.loadGeometry(),k=lu.types[this.type];function P(N){for(var V=0;V<N.length;V++){var q=N[V];N[V]=[360*(q.x+v)/m-180,360/Math.PI*Math.atan(Math.exp((180-360*(q.y+w)/m)*Math.PI/180))-90]}}switch(this.type){case 1:var A=[];for(l=0;l<S.length;l++)A[l]=S[l][0];P(S=A);break;case 2:for(l=0;l<S.length;l++)P(S[l]);break;case 3:for(S=function(N){var V=N.length;if(V<=1)return[N];for(var q,ee,oe=[],ve=0;ve<V;ve++){var de=DE(N[ve]);de!==0&&(ee===void 0&&(ee=de<0),ee===de<0?(q&&oe.push(q),q=[N[ve]]):q.push(N[ve]))}return q&&oe.push(q),oe}(S),l=0;l<S.length;l++)for(p=0;p<S[l].length;p++)P(S[l][p])}S.length===1?S=S[0]:k="Multi"+k;var O={type:"Feature",geometry:{type:k,coordinates:S},properties:this.properties};return"id"in this&&(O.id=this.id),O};var OE=wv,bv=Sv;function Sv(i,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(FE,this,r),this.length=this._features.length}function FE(i,r,o){i===15?r.version=o.readVarint():i===1?r.name=o.readString():i===5?r.extent=o.readVarint():i===2?r._features.push(o.pos):i===3?r._keys.push(o.readString()):i===4&&r._values.push(function(l){for(var p=null,m=l.readVarint()+l.pos;l.pos<m;){var v=l.readVarint()>>3;p=v===1?l.readString():v===2?l.readFloat():v===3?l.readDouble():v===4?l.readVarint64():v===5?l.readVarint():v===6?l.readSVarint():v===7?l.readBoolean():null}return p}(o))}Sv.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var r=this._pbf.readVarint()+this._pbf.pos;return new OE(this._pbf,r,this.extent,this._keys,this._values)};var BE=bv;function NE(i,r,o){if(i===3){var l=new BE(o,o.readVarint()+o.pos);l.length&&(r[l.name]=l)}}Ya.VectorTile=function(i,r){this.layers=i.readFields(NE,{},r)},Ya.VectorTileFeature=wv,Ya.VectorTileLayer=bv;const jE=Ya.VectorTileFeature.types,sg=Math.pow(2,13);function ih(i,r,o,l,p,m,v,w){i.emplaceBack(r,o,2*Math.floor(l*sg)+v,p*sg*2,m*sg*2,Math.round(w))}class lg{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(o=>o.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new ga,this.centroidVertexArray=new ma,this.indexArray=new fn,this.programConfigurations=new Gs(r.layers,r.zoom),this.segments=new un,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(r,o,l){this.features=[],this.hasPattern=ig("fill-extrusion",this.layers,o);for(const{feature:p,id:m,index:v,sourceLayerIndex:w}of r){const S=this.layers[0]._featureFilter.needGeometry,k=Xs(p,S);if(!this.layers[0]._featureFilter.filter(new vr(this.zoom),k,l))continue;const P={id:m,sourceLayerIndex:w,index:v,geometry:S?k.geometry:Ks(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push(og("fill-extrusion",this.layers,P,this.zoom,o)):this.addFeature(P,P.geometry,v,l,{}),o.featureIndex.insert(p,P.geometry,v,w,this.index,!0)}}addFeatures(r,o,l){for(const p of this.features){const{geometry:m}=p;this.addFeature(p,m,p.index,o,l)}}update(r,o,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,l)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,zE),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,ME.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,o,l,p,m){for(const v of Ml(o,500)){const w={x:0,y:0,vertexCount:0};let S=0;for(const V of v)S+=V.length;let k=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const V of v){if(V.length===0||VE(V))continue;let q=0;for(let ee=0;ee<V.length;ee++){const oe=V[ee];if(ee>=1){const ve=V[ee-1];if(!UE(oe,ve)){k.vertexLength+4>un.MAX_VERTEX_ARRAY_LENGTH&&(k=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const de=oe.sub(ve)._perp()._unit(),ye=ve.dist(oe);q+ye>32768&&(q=0),ih(this.layoutVertexArray,oe.x,oe.y,de.x,de.y,0,0,q),ih(this.layoutVertexArray,oe.x,oe.y,de.x,de.y,0,1,q),w.x+=2*oe.x,w.y+=2*oe.y,w.vertexCount+=2,q+=ye,ih(this.layoutVertexArray,ve.x,ve.y,de.x,de.y,0,0,q),ih(this.layoutVertexArray,ve.x,ve.y,de.x,de.y,0,1,q),w.x+=2*ve.x,w.y+=2*ve.y,w.vertexCount+=2;const Ce=k.vertexLength;this.indexArray.emplaceBack(Ce,Ce+2,Ce+1),this.indexArray.emplaceBack(Ce+1,Ce+2,Ce+3),k.vertexLength+=4,k.primitiveLength+=2}}}}if(k.vertexLength+S>un.MAX_VERTEX_ARRAY_LENGTH&&(k=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray)),jE[r.type]!=="Polygon")continue;const P=[],A=[],O=k.vertexLength;for(const V of v)if(V.length!==0){V!==v[0]&&A.push(P.length/2);for(let q=0;q<V.length;q++){const ee=V[q];ih(this.layoutVertexArray,ee.x,ee.y,0,0,1,1,0),w.x+=ee.x,w.y+=ee.y,w.vertexCount+=1,P.push(ee.x),P.push(ee.y)}}const N=_v(P,A);for(let V=0;V<N.length;V+=3)this.indexArray.emplaceBack(O+N[V],O+N[V+2],O+N[V+1]);k.primitiveLength+=N.length/3,k.vertexLength+=S;for(let V=0;V<w.vertexCount;V++){const q=Math.floor(w.x/w.vertexCount),ee=Math.floor(w.y/w.vertexCount);this.centroidVertexArray.emplaceBack(q,ee)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,l,m,p)}}function UE(i,r){return i.x===r.x&&(i.x<0||i.x>on)||i.y===r.y&&(i.y<0||i.y>on)}function VE(i){return i.every(r=>r.x<0)||i.every(r=>r.x>on)||i.every(r=>r.y<0)||i.every(r=>r.y>on)}let Tv;lt("FillExtrusionBucket",lg,{omit:["layers","features"]});var $E={get paint(){return Tv=Tv||new d({"fill-extrusion-opacity":new vt(ke["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Tt(ke["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new vt(ke["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new vt(ke["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new y(ke["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Tt(ke["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Tt(ke["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new vt(ke["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class HE extends _{constructor(r){super(r,$E)}createBucket(r){return new lg(r)}queryRadius(){return sp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,o,l,p,m,v,w,S){const k=lp(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),v.angle,w),P=this.paint.get("fill-extrusion-height").evaluate(o,l),A=this.paint.get("fill-extrusion-base").evaluate(o,l),O=function(V,q,ee,oe){const ve=[];for(const de of V){const ye=[de.x,de.y,0,1];up(ye,ye,q),ve.push(new M(ye[0]/ye[3],ye[1]/ye[3]))}return ve}(k,S),N=function(V,q,ee,oe){const ve=[],de=[],ye=oe[8]*q,Ce=oe[9]*q,Fe=oe[10]*q,Je=oe[11]*q,St=oe[8]*ee,rt=oe[9]*ee,Ye=oe[10]*ee,_t=oe[11]*ee;for(const pt of V){const st=[],Re=[];for(const xt of pt){const gt=xt.x,Mt=xt.y,_r=oe[0]*gt+oe[4]*Mt+oe[12],fr=oe[1]*gt+oe[5]*Mt+oe[13],mn=oe[2]*gt+oe[6]*Mt+oe[14],go=oe[3]*gt+oe[7]*Mt+oe[15],Rn=mn+Fe,Vr=go+Je,ti=_r+St,ri=fr+rt,ni=mn+Ye,$r=go+_t,gn=new M((_r+ye)/Vr,(fr+Ce)/Vr);gn.z=Rn/Vr,st.push(gn);const $n=new M(ti/$r,ri/$r);$n.z=ni/$r,Re.push($n)}ve.push(st),de.push(Re)}return[ve,de]}(p,A,P,S);return function(V,q,ee){let oe=1/0;rv(ee,q)&&(oe=Ev(ee,q[0]));for(let ve=0;ve<q.length;ve++){const de=q[ve],ye=V[ve];for(let Ce=0;Ce<de.length-1;Ce++){const Fe=de[Ce],Je=[Fe,de[Ce+1],ye[Ce+1],ye[Ce],Fe];tv(ee,Je)&&(oe=Math.min(oe,Ev(ee,Je)))}}return oe!==1/0&&oe}(N[0],N[1],O)}}function oh(i,r){return i.x*r.x+i.y*r.y}function Ev(i,r){if(i.length===1){let o=0;const l=r[o++];let p;for(;!p||l.equals(p);)if(p=r[o++],!p)return 1/0;for(;o<r.length;o++){const m=r[o],v=i[0],w=p.sub(l),S=m.sub(l),k=v.sub(l),P=oh(w,w),A=oh(w,S),O=oh(S,S),N=oh(k,w),V=oh(k,S),q=P*O-A*A,ee=(O*N-A*V)/q,oe=(P*V-A*N)/q,ve=l.z*(1-ee-oe)+p.z*ee+m.z*oe;if(isFinite(ve))return ve}return 1/0}{let o=1/0;for(const l of r)o=Math.min(o,l.z);return o}}const WE=I([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:qE}=WE,ZE=I([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:GE}=ZE,KE=Ya.VectorTileFeature.types,XE=Math.cos(Math.PI/180*37.5),kv=Math.pow(2,14)/.5;class ug{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(o=>o.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new eu,this.layoutVertexArray2=new qc,this.indexArray=new fn,this.programConfigurations=new Gs(r.layers,r.zoom),this.segments=new un,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(r,o,l){this.hasPattern=ig("line",this.layers,o);const p=this.layers[0].layout.get("line-sort-key"),m=!p.isConstant(),v=[];for(const{feature:w,id:S,index:k,sourceLayerIndex:P}of r){const A=this.layers[0]._featureFilter.needGeometry,O=Xs(w,A);if(!this.layers[0]._featureFilter.filter(new vr(this.zoom),O,l))continue;const N=m?p.evaluate(O,{},l):void 0,V={id:S,properties:w.properties,type:w.type,sourceLayerIndex:P,index:k,geometry:A?O.geometry:Ks(w),patterns:{},sortKey:N};v.push(V)}m&&v.sort((w,S)=>w.sortKey-S.sortKey);for(const w of v){const{geometry:S,index:k,sourceLayerIndex:P}=w;if(this.hasPattern){const A=og("line",this.layers,w,this.zoom,o);this.patternFeatures.push(A)}else this.addFeature(w,S,k,l,{});o.featureIndex.insert(r[k].feature,S,k,P,this.index)}}update(r,o,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,l)}addFeatures(r,o,l){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,o,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,GE)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,qE),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,o,l,p,m){const v=this.layers[0].layout,w=v.get("line-join").evaluate(r,{}),S=v.get("line-cap"),k=v.get("line-miter-limit"),P=v.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const A of o)this.addLine(A,r,w,S,k,P);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,l,m,p)}addLine(r,o,l,p,m,v){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let oe=0;oe<r.length-1;oe++)this.totalDistance+=r[oe].dist(r[oe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const w=KE[o.type]==="Polygon";let S=r.length;for(;S>=2&&r[S-1].equals(r[S-2]);)S--;let k=0;for(;k<S-1&&r[k].equals(r[k+1]);)k++;if(S<(w?3:2))return;l==="bevel"&&(m=1.05);const P=this.overscaling<=16?15*on/(512*this.overscaling):0,A=this.segments.prepareSegment(10*S,this.layoutVertexArray,this.indexArray);let O,N,V,q,ee;this.e1=this.e2=-1,w&&(O=r[S-2],ee=r[k].sub(O)._unit()._perp());for(let oe=k;oe<S;oe++){if(V=oe===S-1?w?r[k+1]:void 0:r[oe+1],V&&r[oe].equals(V))continue;ee&&(q=ee),O&&(N=O),O=r[oe],ee=V?V.sub(O)._unit()._perp():q,q=q||ee;let ve=q.add(ee);ve.x===0&&ve.y===0||ve._unit();const de=q.x*ee.x+q.y*ee.y,ye=ve.x*ee.x+ve.y*ee.y,Ce=ye!==0?1/ye:1/0,Fe=2*Math.sqrt(2-2*ye),Je=ye<XE&&N&&V,St=q.x*ee.y-q.y*ee.x>0;if(Je&&oe>k){const _t=O.dist(N);if(_t>2*P){const pt=O.sub(O.sub(N)._mult(P/_t)._round());this.updateDistance(N,pt),this.addCurrentVertex(pt,q,0,0,A),N=pt}}const rt=N&&V;let Ye=rt?l:w?"butt":p;if(rt&&Ye==="round"&&(Ce<v?Ye="miter":Ce<=2&&(Ye="fakeround")),Ye==="miter"&&Ce>m&&(Ye="bevel"),Ye==="bevel"&&(Ce>2&&(Ye="flipbevel"),Ce<m&&(Ye="miter")),N&&this.updateDistance(N,O),Ye==="miter")ve._mult(Ce),this.addCurrentVertex(O,ve,0,0,A);else if(Ye==="flipbevel"){if(Ce>100)ve=ee.mult(-1);else{const _t=Ce*q.add(ee).mag()/q.sub(ee).mag();ve._perp()._mult(_t*(St?-1:1))}this.addCurrentVertex(O,ve,0,0,A),this.addCurrentVertex(O,ve.mult(-1),0,0,A)}else if(Ye==="bevel"||Ye==="fakeround"){const _t=-Math.sqrt(Ce*Ce-1),pt=St?_t:0,st=St?0:_t;if(N&&this.addCurrentVertex(O,q,pt,st,A),Ye==="fakeround"){const Re=Math.round(180*Fe/Math.PI/20);for(let xt=1;xt<Re;xt++){let gt=xt/Re;if(gt!==.5){const _r=gt-.5;gt+=gt*_r*(gt-1)*((1.0904+de*(de*(3.55645-1.43519*de)-3.2452))*_r*_r+(.848013+de*(.215638*de-1.06021)))}const Mt=ee.sub(q)._mult(gt)._add(q)._unit()._mult(St?-1:1);this.addHalfVertex(O,Mt.x,Mt.y,!1,St,0,A)}}V&&this.addCurrentVertex(O,ee,-pt,-st,A)}else if(Ye==="butt")this.addCurrentVertex(O,ve,0,0,A);else if(Ye==="square"){const _t=N?1:-1;this.addCurrentVertex(O,ve,_t,_t,A)}else Ye==="round"&&(N&&(this.addCurrentVertex(O,q,0,0,A),this.addCurrentVertex(O,q,1,1,A,!0)),V&&(this.addCurrentVertex(O,ee,-1,-1,A,!0),this.addCurrentVertex(O,ee,0,0,A)));if(Je&&oe<S-1){const _t=O.dist(V);if(_t>2*P){const pt=O.add(V.sub(O)._mult(P/_t)._round());this.updateDistance(O,pt),this.addCurrentVertex(pt,ee,0,0,A),O=pt}}}}addCurrentVertex(r,o,l,p,m,v=!1){const w=o.y*p-o.x,S=-o.y-o.x*p;this.addHalfVertex(r,o.x+o.y*l,o.y-o.x*l,v,!1,l,m),this.addHalfVertex(r,w,S,v,!0,-p,m),this.distance>kv/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,o,l,p,m,v))}addHalfVertex({x:r,y:o},l,p,m,v,w,S){const k=.5*(this.lineClips?this.scaledDistance*(kv-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(m?1:0),(o<<1)+(v?1:0),Math.round(63*l)+128,Math.round(63*p)+128,1+(w===0?0:w<0?-1:1)|(63&k)<<2,k>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const P=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,P),S.primitiveLength++),v?this.e2=P:this.e1=P}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,o){this.distance+=r.dist(o),this.updateScaledDistance()}}let Cv,Pv;lt("LineBucket",ug,{omit:["layers","patternFeatures"]});var Iv={get paint(){return Pv=Pv||new d({"line-opacity":new Tt(ke.paint_line["line-opacity"]),"line-color":new Tt(ke.paint_line["line-color"]),"line-translate":new vt(ke.paint_line["line-translate"]),"line-translate-anchor":new vt(ke.paint_line["line-translate-anchor"]),"line-width":new Tt(ke.paint_line["line-width"]),"line-gap-width":new Tt(ke.paint_line["line-gap-width"]),"line-offset":new Tt(ke.paint_line["line-offset"]),"line-blur":new Tt(ke.paint_line["line-blur"]),"line-dasharray":new n(ke.paint_line["line-dasharray"]),"line-pattern":new y(ke.paint_line["line-pattern"]),"line-gradient":new s(ke.paint_line["line-gradient"])})},get layout(){return Cv=Cv||new d({"line-cap":new vt(ke.layout_line["line-cap"]),"line-join":new Tt(ke.layout_line["line-join"]),"line-miter-limit":new vt(ke.layout_line["line-miter-limit"]),"line-round-limit":new vt(ke.layout_line["line-round-limit"]),"line-sort-key":new Tt(ke.layout_line["line-sort-key"])})}};class YE extends Tt{possiblyEvaluate(r,o){return o=new vr(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,zoomHistory:o.zoomHistory,transition:o.transition}),super.possiblyEvaluate(r,o)}evaluate(r,o,l,p){return o=Me({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(r,o,l,p)}}let fp;class JE extends _{constructor(r){super(r,Iv),this.gradientVersion=0,fp||(fp=new YE(Iv.paint.properties["line-width"].specification),fp.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const o=this.gradientExpression();this.stepInterpolant=!!function(l){return l._styleExpression!==void 0}(o)&&o._styleExpression.expression instanceof Ms,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,o){super.recalculate(r,o),this.paint._values["line-floorwidth"]=fp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new ug(r)}queryRadius(r){const o=r,l=Av(Jc("line-width",this,o),Jc("line-gap-width",this,o)),p=Jc("line-offset",this,o);return l/2+Math.abs(p)+sp(this.paint.get("line-translate"))}queryIntersectsFeature(r,o,l,p,m,v,w){const S=lp(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),v.angle,w),k=w/2*Av(this.paint.get("line-width").evaluate(o,l),this.paint.get("line-gap-width").evaluate(o,l)),P=this.paint.get("line-offset").evaluate(o,l);return P&&(p=function(A,O){const N=[];for(let V=0;V<A.length;V++){const q=A[V],ee=[];for(let oe=0;oe<q.length;oe++){const ve=q[oe-1],de=q[oe],ye=q[oe+1],Ce=oe===0?new M(0,0):de.sub(ve)._unit()._perp(),Fe=oe===q.length-1?new M(0,0):ye.sub(de)._unit()._perp(),Je=Ce._add(Fe)._unit(),St=Je.x*Fe.x+Je.y*Fe.y;St!==0&&Je._mult(1/St),ee.push(Je._mult(O)._add(de))}N.push(ee)}return N}(p,P*w)),function(A,O,N){for(let V=0;V<O.length;V++){const q=O[V];if(A.length>=3){for(let ee=0;ee<q.length;ee++)if(ou(A,q[ee]))return!0}if(sE(A,q,N))return!0}return!1}(S,p,k)}isTileClipped(){return!0}}function Av(i,r){return r>0?r+2*i:i}const QE=I([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ek=I([{name:"a_projected_pos",components:3,type:"Float32"}],4);I([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const tk=I([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);I([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Mv=I([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),rk=I([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function nk(i,r,o){return i.sections.forEach(l=>{l.text=function(p,m,v){const w=m.layout.get("text-transform").evaluate(v,{});return w==="uppercase"?p=p.toLocaleUpperCase():w==="lowercase"&&(p=p.toLocaleLowerCase()),qo.applyArabicShaping&&(p=qo.applyArabicShaping(p)),p}(l.text,r,o)}),i}I([{name:"triangle",components:3,type:"Uint16"}]),I([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),I([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),I([{type:"Float32",name:"offsetX"}]),I([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),I([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const ah={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var cn=24,zv=pr,Lv=function(i,r,o,l,p){var m,v,w=8*p-l-1,S=(1<<w)-1,k=S>>1,P=-7,A=p-1,O=-1,N=i[r+A];for(A+=O,m=N&(1<<-P)-1,N>>=-P,P+=w;P>0;m=256*m+i[r+A],A+=O,P-=8);for(v=m&(1<<-P)-1,m>>=-P,P+=l;P>0;v=256*v+i[r+A],A+=O,P-=8);if(m===0)m=1-k;else{if(m===S)return v?NaN:1/0*(N?-1:1);v+=Math.pow(2,l),m-=k}return(N?-1:1)*v*Math.pow(2,m-l)},Rv=function(i,r,o,l,p,m){var v,w,S,k=8*m-p-1,P=(1<<k)-1,A=P>>1,O=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,N=0,V=1,q=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(w=isNaN(r)?1:0,v=P):(v=Math.floor(Math.log(r)/Math.LN2),r*(S=Math.pow(2,-v))<1&&(v--,S*=2),(r+=v+A>=1?O/S:O*Math.pow(2,1-A))*S>=2&&(v++,S/=2),v+A>=P?(w=0,v=P):v+A>=1?(w=(r*S-1)*Math.pow(2,p),v+=A):(w=r*Math.pow(2,A-1)*Math.pow(2,p),v=0));p>=8;i[o+N]=255&w,N+=V,w/=256,p-=8);for(v=v<<p|w,k+=p;k>0;i[o+N]=255&v,N+=V,v/=256,k-=8);i[o+N-V]|=128*q};function pr(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}pr.Varint=0,pr.Fixed64=1,pr.Bytes=2,pr.Fixed32=5;var cg=4294967296,Dv=1/cg,Ov=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function _a(i){return i.type===pr.Bytes?i.readVarint()+i.pos:i.pos+1}function uu(i,r,o){return o?4294967296*r+(i>>>0):4294967296*(r>>>0)+(i>>>0)}function Fv(i,r,o){var l=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));o.realloc(l);for(var p=o.pos-1;p>=i;p--)o.buf[p+l]=o.buf[p]}function ik(i,r){for(var o=0;o<i.length;o++)r.writeVarint(i[o])}function ok(i,r){for(var o=0;o<i.length;o++)r.writeSVarint(i[o])}function ak(i,r){for(var o=0;o<i.length;o++)r.writeFloat(i[o])}function sk(i,r){for(var o=0;o<i.length;o++)r.writeDouble(i[o])}function lk(i,r){for(var o=0;o<i.length;o++)r.writeBoolean(i[o])}function uk(i,r){for(var o=0;o<i.length;o++)r.writeFixed32(i[o])}function ck(i,r){for(var o=0;o<i.length;o++)r.writeSFixed32(i[o])}function hk(i,r){for(var o=0;o<i.length;o++)r.writeFixed64(i[o])}function dk(i,r){for(var o=0;o<i.length;o++)r.writeSFixed64(i[o])}function mp(i,r){return(i[r]|i[r+1]<<8|i[r+2]<<16)+16777216*i[r+3]}function cu(i,r,o){i[o]=r,i[o+1]=r>>>8,i[o+2]=r>>>16,i[o+3]=r>>>24}function Bv(i,r){return(i[r]|i[r+1]<<8|i[r+2]<<16)+(i[r+3]<<24)}pr.prototype={destroy:function(){this.buf=null},readFields:function(i,r,o){for(o=o||this.length;this.pos<o;){var l=this.readVarint(),p=l>>3,m=this.pos;this.type=7&l,i(p,r,this),this.pos===m&&this.skip(l)}return r},readMessage:function(i,r){return this.readFields(i,r,this.readVarint()+this.pos)},readFixed32:function(){var i=mp(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=Bv(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=mp(this.buf,this.pos)+mp(this.buf,this.pos+4)*cg;return this.pos+=8,i},readSFixed64:function(){var i=mp(this.buf,this.pos)+Bv(this.buf,this.pos+4)*cg;return this.pos+=8,i},readFloat:function(){var i=Lv(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=Lv(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var r,o,l=this.buf;return r=127&(o=l[this.pos++]),o<128?r:(r|=(127&(o=l[this.pos++]))<<7,o<128?r:(r|=(127&(o=l[this.pos++]))<<14,o<128?r:(r|=(127&(o=l[this.pos++]))<<21,o<128?r:function(p,m,v){var w,S,k=v.buf;if(w=(112&(S=k[v.pos++]))>>4,S<128||(w|=(127&(S=k[v.pos++]))<<3,S<128)||(w|=(127&(S=k[v.pos++]))<<10,S<128)||(w|=(127&(S=k[v.pos++]))<<17,S<128)||(w|=(127&(S=k[v.pos++]))<<24,S<128)||(w|=(1&(S=k[v.pos++]))<<31,S<128))return uu(p,w,m);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(o=l[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var i=this.readVarint()+this.pos,r=this.pos;return this.pos=i,i-r>=12&&Ov?function(o,l,p){return Ov.decode(o.subarray(l,p))}(this.buf,r,i):function(o,l,p){for(var m="",v=l;v<p;){var w,S,k,P=o[v],A=null,O=P>239?4:P>223?3:P>191?2:1;if(v+O>p)break;O===1?P<128&&(A=P):O===2?(192&(w=o[v+1]))==128&&(A=(31&P)<<6|63&w)<=127&&(A=null):O===3?(S=o[v+2],(192&(w=o[v+1]))==128&&(192&S)==128&&((A=(15&P)<<12|(63&w)<<6|63&S)<=2047||A>=55296&&A<=57343)&&(A=null)):O===4&&(S=o[v+2],k=o[v+3],(192&(w=o[v+1]))==128&&(192&S)==128&&(192&k)==128&&((A=(15&P)<<18|(63&w)<<12|(63&S)<<6|63&k)<=65535||A>=1114112)&&(A=null)),A===null?(A=65533,O=1):A>65535&&(A-=65536,m+=String.fromCharCode(A>>>10&1023|55296),A=56320|1023&A),m+=String.fromCharCode(A),v+=O}return m}(this.buf,r,i)},readBytes:function(){var i=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,i);return this.pos=i,r},readPackedVarint:function(i,r){if(this.type!==pr.Bytes)return i.push(this.readVarint(r));var o=_a(this);for(i=i||[];this.pos<o;)i.push(this.readVarint(r));return i},readPackedSVarint:function(i){if(this.type!==pr.Bytes)return i.push(this.readSVarint());var r=_a(this);for(i=i||[];this.pos<r;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==pr.Bytes)return i.push(this.readBoolean());var r=_a(this);for(i=i||[];this.pos<r;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==pr.Bytes)return i.push(this.readFloat());var r=_a(this);for(i=i||[];this.pos<r;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==pr.Bytes)return i.push(this.readDouble());var r=_a(this);for(i=i||[];this.pos<r;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==pr.Bytes)return i.push(this.readFixed32());var r=_a(this);for(i=i||[];this.pos<r;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==pr.Bytes)return i.push(this.readSFixed32());var r=_a(this);for(i=i||[];this.pos<r;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==pr.Bytes)return i.push(this.readFixed64());var r=_a(this);for(i=i||[];this.pos<r;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==pr.Bytes)return i.push(this.readSFixed64());var r=_a(this);for(i=i||[];this.pos<r;)i.push(this.readSFixed64());return i},skip:function(i){var r=7&i;if(r===pr.Varint)for(;this.buf[this.pos++]>127;);else if(r===pr.Bytes)this.pos=this.readVarint()+this.pos;else if(r===pr.Fixed32)this.pos+=4;else{if(r!==pr.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(i,r){this.writeVarint(i<<3|r)},realloc:function(i){for(var r=this.length||16;r<this.pos+i;)r*=2;if(r!==this.length){var o=new Uint8Array(r);o.set(this.buf),this.buf=o,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),cu(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),cu(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),cu(this.buf,-1&i,this.pos),cu(this.buf,Math.floor(i*Dv),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),cu(this.buf,-1&i,this.pos),cu(this.buf,Math.floor(i*Dv),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?function(r,o){var l,p;if(r>=0?(l=r%4294967296|0,p=r/4294967296|0):(p=~(-r/4294967296),4294967295^(l=~(-r%4294967296))?l=l+1|0:(l=0,p=p+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),function(m,v,w){w.buf[w.pos++]=127&m|128,m>>>=7,w.buf[w.pos++]=127&m|128,m>>>=7,w.buf[w.pos++]=127&m|128,m>>>=7,w.buf[w.pos++]=127&m|128,w.buf[w.pos]=127&(m>>>=7)}(l,0,o),function(m,v){var w=(7&m)<<4;v.buf[v.pos++]|=w|((m>>>=3)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m)))))}(p,o)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(!!i)},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var r=this.pos;this.pos=function(l,p,m){for(var v,w,S=0;S<p.length;S++){if((v=p.charCodeAt(S))>55295&&v<57344){if(!w){v>56319||S+1===p.length?(l[m++]=239,l[m++]=191,l[m++]=189):w=v;continue}if(v<56320){l[m++]=239,l[m++]=191,l[m++]=189,w=v;continue}v=w-55296<<10|v-56320|65536,w=null}else w&&(l[m++]=239,l[m++]=191,l[m++]=189,w=null);v<128?l[m++]=v:(v<2048?l[m++]=v>>6|192:(v<65536?l[m++]=v>>12|224:(l[m++]=v>>18|240,l[m++]=v>>12&63|128),l[m++]=v>>6&63|128),l[m++]=63&v|128)}return m}(this.buf,i,this.pos);var o=this.pos-r;o>=128&&Fv(r,o,this),this.pos=r-1,this.writeVarint(o),this.pos+=o},writeFloat:function(i){this.realloc(4),Rv(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),Rv(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var r=i.length;this.writeVarint(r),this.realloc(r);for(var o=0;o<r;o++)this.buf[this.pos++]=i[o]},writeRawMessage:function(i,r){this.pos++;var o=this.pos;i(r,this);var l=this.pos-o;l>=128&&Fv(o,l,this),this.pos=o-1,this.writeVarint(l),this.pos+=l},writeMessage:function(i,r,o){this.writeTag(i,pr.Bytes),this.writeRawMessage(r,o)},writePackedVarint:function(i,r){r.length&&this.writeMessage(i,ik,r)},writePackedSVarint:function(i,r){r.length&&this.writeMessage(i,ok,r)},writePackedBoolean:function(i,r){r.length&&this.writeMessage(i,lk,r)},writePackedFloat:function(i,r){r.length&&this.writeMessage(i,ak,r)},writePackedDouble:function(i,r){r.length&&this.writeMessage(i,sk,r)},writePackedFixed32:function(i,r){r.length&&this.writeMessage(i,uk,r)},writePackedSFixed32:function(i,r){r.length&&this.writeMessage(i,ck,r)},writePackedFixed64:function(i,r){r.length&&this.writeMessage(i,hk,r)},writePackedSFixed64:function(i,r){r.length&&this.writeMessage(i,dk,r)},writeBytesField:function(i,r){this.writeTag(i,pr.Bytes),this.writeBytes(r)},writeFixed32Field:function(i,r){this.writeTag(i,pr.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(i,r){this.writeTag(i,pr.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(i,r){this.writeTag(i,pr.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(i,r){this.writeTag(i,pr.Fixed64),this.writeSFixed64(r)},writeVarintField:function(i,r){this.writeTag(i,pr.Varint),this.writeVarint(r)},writeSVarintField:function(i,r){this.writeTag(i,pr.Varint),this.writeSVarint(r)},writeStringField:function(i,r){this.writeTag(i,pr.Bytes),this.writeString(r)},writeFloatField:function(i,r){this.writeTag(i,pr.Fixed32),this.writeFloat(r)},writeDoubleField:function(i,r){this.writeTag(i,pr.Fixed64),this.writeDouble(r)},writeBooleanField:function(i,r){this.writeVarintField(i,!!r)}};var hg=C(zv);const dg=3;function pk(i,r,o){i===1&&o.readMessage(fk,r)}function fk(i,r,o){if(i===3){const{id:l,bitmap:p,width:m,height:v,left:w,top:S,advance:k}=o.readMessage(mk,{});r.push({id:l,bitmap:new eh({width:m+2*dg,height:v+2*dg},p),metrics:{width:m,height:v,left:w,top:S,advance:k}})}}function mk(i,r,o){i===1?r.id=o.readVarint():i===2?r.bitmap=o.readBytes():i===3?r.width=o.readVarint():i===4?r.height=o.readVarint():i===5?r.left=o.readSVarint():i===6?r.top=o.readSVarint():i===7&&(r.advance=o.readVarint())}const Nv=dg;function jv(i){let r=0,o=0;for(const v of i)r+=v.w*v.h,o=Math.max(o,v.w);i.sort((v,w)=>w.h-v.h);const l=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),o),h:1/0}];let p=0,m=0;for(const v of i)for(let w=l.length-1;w>=0;w--){const S=l[w];if(!(v.w>S.w||v.h>S.h)){if(v.x=S.x,v.y=S.y,m=Math.max(m,v.y+v.h),p=Math.max(p,v.x+v.w),v.w===S.w&&v.h===S.h){const k=l.pop();w<l.length&&(l[w]=k)}else v.h===S.h?(S.x+=v.w,S.w-=v.w):v.w===S.w?(S.y+=v.h,S.h-=v.h):(l.push({x:S.x+v.w,y:S.y,w:S.w-v.w,h:v.h}),S.y+=v.h,S.h-=v.h);break}}return{w:p,h:m,fill:r/(p*m)||0}}const mi=1;class pg{constructor(r,{pixelRatio:o,version:l,stretchX:p,stretchY:m,content:v,textFitWidth:w,textFitHeight:S}){this.paddedRect=r,this.pixelRatio=o,this.stretchX=p,this.stretchY=m,this.content=v,this.version=l,this.textFitWidth=w,this.textFitHeight=S}get tl(){return[this.paddedRect.x+mi,this.paddedRect.y+mi]}get br(){return[this.paddedRect.x+this.paddedRect.w-mi,this.paddedRect.y+this.paddedRect.h-mi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*mi)/this.pixelRatio,(this.paddedRect.h-2*mi)/this.pixelRatio]}}class Uv{constructor(r,o){const l={},p={};this.haveRenderCallbacks=[];const m=[];this.addImages(r,l,m),this.addImages(o,p,m);const{w:v,h:w}=jv(m),S=new qi({width:v||1,height:w||1});for(const k in r){const P=r[k],A=l[k].paddedRect;qi.copy(P.data,S,{x:0,y:0},{x:A.x+mi,y:A.y+mi},P.data)}for(const k in o){const P=o[k],A=p[k].paddedRect,O=A.x+mi,N=A.y+mi,V=P.data.width,q=P.data.height;qi.copy(P.data,S,{x:0,y:0},{x:O,y:N},P.data),qi.copy(P.data,S,{x:0,y:q-1},{x:O,y:N-1},{width:V,height:1}),qi.copy(P.data,S,{x:0,y:0},{x:O,y:N+q},{width:V,height:1}),qi.copy(P.data,S,{x:V-1,y:0},{x:O-1,y:N},{width:1,height:q}),qi.copy(P.data,S,{x:0,y:0},{x:O+V,y:N},{width:1,height:q})}this.image=S,this.iconPositions=l,this.patternPositions=p}addImages(r,o,l){for(const p in r){const m=r[p],v={x:0,y:0,w:m.data.width+2*mi,h:m.data.height+2*mi};l.push(v),o[p]=new pg(v,m),m.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(r,o){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const l in r.updatedImages)this.patchUpdatedImage(this.iconPositions[l],r.getImage(l),o),this.patchUpdatedImage(this.patternPositions[l],r.getImage(l),o)}patchUpdatedImage(r,o,l){if(!r||!o||r.version===o.version)return;r.version=o.version;const[p,m]=r.tl;l.update(o.data,void 0,{x:p,y:m})}}var Ja;lt("ImagePosition",pg),lt("ImageAtlas",Uv),g.ah=void 0,(Ja=g.ah||(g.ah={}))[Ja.none=0]="none",Ja[Ja.horizontal=1]="horizontal",Ja[Ja.vertical=2]="vertical",Ja[Ja.horizontalOnly=3]="horizontalOnly";const sh=-17;class lh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,o){const l=new lh;return l.scale=r||1,l.fontStack=o,l}static forImage(r){const o=new lh;return o.imageName=r,o}}class hu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,o){const l=new hu;for(let p=0;p<r.sections.length;p++){const m=r.sections[p];m.image?l.addImageSection(m):l.addTextSection(m,o)}return l}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let o="";for(let l=0;l<r.length;l++){const p=r.charCodeAt(l+1)||null,m=r.charCodeAt(l-1)||null;o+=p&&Qd(p)&&!ah[r[l+1]]||m&&Qd(m)&&!ah[r[l-1]]||!ah[r[l]]?r[l]:ah[r[l]]}return o}(this.text)}trim(){let r=0;for(let l=0;l<this.text.length&&yp[this.text.charCodeAt(l)];l++)r++;let o=this.text.length;for(let l=this.text.length-1;l>=0&&l>=r&&yp[this.text.charCodeAt(l)];l--)o--;this.text=this.text.substring(r,o),this.sectionIndex=this.sectionIndex.slice(r,o)}substring(r,o){const l=new hu;return l.text=this.text.substring(r,o),l.sectionIndex=this.sectionIndex.slice(r,o),l.sections=this.sections,l}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,o)=>Math.max(r,this.sections[o].scale),0)}addTextSection(r,o){this.text+=r.text,this.sections.push(lh.forText(r.scale,r.fontStack||o));const l=this.sections.length-1;for(let p=0;p<r.text.length;++p)this.sectionIndex.push(l)}addImageSection(r){const o=r.image?r.image.name:"";if(o.length===0)return void Ke("Can't add FormattedSection with an empty image.");const l=this.getNextImageSectionCharCode();l?(this.text+=String.fromCharCode(l),this.sections.push(lh.forImage(o)),this.sectionIndex.push(this.sections.length-1)):Ke("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function gp(i,r,o,l,p,m,v,w,S,k,P,A,O,N,V){const q=hu.fromFeature(i,p);let ee;A===g.ah.vertical&&q.verticalizePunctuation();const{processBidirectionalText:oe,processStyledBidirectionalText:ve}=qo;if(oe&&q.sections.length===1){ee=[];const Ce=oe(q.toString(),fg(q,k,m,r,l,N));for(const Fe of Ce){const Je=new hu;Je.text=Fe,Je.sections=q.sections;for(let St=0;St<Fe.length;St++)Je.sectionIndex.push(0);ee.push(Je)}}else if(ve){ee=[];const Ce=ve(q.text,q.sectionIndex,fg(q,k,m,r,l,N));for(const Fe of Ce){const Je=new hu;Je.text=Fe[0],Je.sectionIndex=Fe[1],Je.sections=q.sections,ee.push(Je)}}else ee=function(Ce,Fe){const Je=[],St=Ce.text;let rt=0;for(const Ye of Fe)Je.push(Ce.substring(rt,Ye)),rt=Ye;return rt<St.length&&Je.push(Ce.substring(rt,St.length)),Je}(q,fg(q,k,m,r,l,N));const de=[],ye={positionedLines:de,text:q.toString(),top:P[1],bottom:P[1],left:P[0],right:P[0],writingMode:A,iconsInText:!1,verticalizable:!1};return function(Ce,Fe,Je,St,rt,Ye,_t,pt,st,Re,xt,gt){let Mt=0,_r=sh,fr=0,mn=0;const go=pt==="right"?1:pt==="left"?0:.5;let Rn=0;for(const $r of rt){$r.trim();const gn=$r.getMaxScale(),$n=(gn-1)*cn,Dn={positionedGlyphs:[],lineOffset:0};Ce.positionedLines[Rn]=Dn;const ii=Dn.positionedGlyphs;let On=0;if(!$r.length()){_r+=Ye,++Rn;continue}for(let gi=0;gi<$r.length();gi++){const rr=$r.getSection(gi),xr=$r.getSectionIndex(gi),kr=$r.getCharCode(gi);let Pi=0,Br=null,mu=null,Xo=null,Yo=cn;const yo=!(st===g.ah.horizontal||!xt&&!$c(kr)||xt&&(yp[kr]||(Vr=kr,nt.Arabic(Vr)||nt["Arabic Supplement"](Vr)||nt["Arabic Extended-A"](Vr)||nt["Arabic Presentation Forms-A"](Vr)||nt["Arabic Presentation Forms-B"](Vr))));if(rr.imageName){const Ki=St[rr.imageName];if(!Ki)continue;Xo=rr.imageName,Ce.iconsInText=Ce.iconsInText||!0,mu=Ki.paddedRect;const bn=Ki.displaySize;rr.scale=rr.scale*cn/gt,Br={width:bn[0],height:bn[1],left:mi,top:-Nv,advance:yo?bn[1]:bn[0]},Pi=$n+(cn-bn[1]*rr.scale),Yo=Br.advance;const va=yo?bn[0]*rr.scale-cn*gn:bn[1]*rr.scale-cn*gn;va>0&&va>On&&(On=va)}else{const Ki=Je[rr.fontStack],bn=Ki&&Ki[kr];if(bn&&bn.rect)mu=bn.rect,Br=bn.metrics;else{const va=Fe[rr.fontStack],ph=va&&va[kr];if(!ph)continue;Br=ph.metrics}Pi=(gn-rr.scale)*cn}yo?(Ce.verticalizable=!0,ii.push({glyph:kr,imageName:Xo,x:Mt,y:_r+Pi,vertical:yo,scale:rr.scale,fontStack:rr.fontStack,sectionIndex:xr,metrics:Br,rect:mu}),Mt+=Yo*rr.scale+Re):(ii.push({glyph:kr,imageName:Xo,x:Mt,y:_r+Pi,vertical:yo,scale:rr.scale,fontStack:rr.fontStack,sectionIndex:xr,metrics:Br,rect:mu}),Mt+=Br.advance*rr.scale+Re)}ii.length!==0&&(fr=Math.max(Mt-Re,fr),vk(ii,0,ii.length-1,go,On)),Mt=0;const Gi=Ye*gn+On;Dn.lineOffset=Math.max(On,$n),_r+=Gi,mn=Math.max(Gi,mn),++Rn}var Vr;const ti=_r-sh,{horizontalAlign:ri,verticalAlign:ni}=mg(_t);(function($r,gn,$n,Dn,ii,On,Gi,gi,rr){const xr=(gn-$n)*ii;let kr=0;kr=On!==Gi?-gi*Dn-sh:(-Dn*rr+.5)*Gi;for(const Pi of $r)for(const Br of Pi.positionedGlyphs)Br.x+=xr,Br.y+=kr})(Ce.positionedLines,go,ri,ni,fr,mn,Ye,ti,rt.length),Ce.top+=-ni*ti,Ce.bottom=Ce.top+ti,Ce.left+=-ri*fr,Ce.right=Ce.left+fr}(ye,r,o,l,ee,v,w,S,A,k,O,V),!function(Ce){for(const Fe of Ce)if(Fe.positionedGlyphs.length!==0)return!1;return!0}(de)&&ye}const yp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},gk={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},yk={40:!0};function Vv(i,r,o,l,p,m){if(r.imageName){const v=l[r.imageName];return v?v.displaySize[0]*r.scale*cn/m+p:0}{const v=o[r.fontStack],w=v&&v[i];return w?w.metrics.advance*r.scale+p:0}}function $v(i,r,o,l){const p=Math.pow(i-r,2);return l?i<r?p/2:2*p:p+Math.abs(o)*o}function _k(i,r,o){let l=0;return i===10&&(l-=1e4),o&&(l+=150),i!==40&&i!==65288||(l+=50),r!==41&&r!==65289||(l+=50),l}function Hv(i,r,o,l,p,m){let v=null,w=$v(r,o,p,m);for(const S of l){const k=$v(r-S.x,o,p,m)+S.badness;k<=w&&(v=S,w=k)}return{index:i,x:r,priorBreak:v,badness:w}}function Wv(i){return i?Wv(i.priorBreak).concat(i.index):[]}function fg(i,r,o,l,p,m){if(!i)return[];const v=[],w=function(A,O,N,V,q,ee){let oe=0;for(let ve=0;ve<A.length();ve++){const de=A.getSection(ve);oe+=Vv(A.getCharCode(ve),de,V,q,O,ee)}return oe/Math.max(1,Math.ceil(oe/N))}(i,r,o,l,p,m),S=i.text.indexOf("​")>=0;let k=0;for(let A=0;A<i.length();A++){const O=i.getSection(A),N=i.getCharCode(A);if(yp[N]||(k+=Vv(N,O,l,p,r,m)),A<i.length()-1){const V=!((P=N)<11904||!(nt["Bopomofo Extended"](P)||nt.Bopomofo(P)||nt["CJK Compatibility Forms"](P)||nt["CJK Compatibility Ideographs"](P)||nt["CJK Compatibility"](P)||nt["CJK Radicals Supplement"](P)||nt["CJK Strokes"](P)||nt["CJK Symbols and Punctuation"](P)||nt["CJK Unified Ideographs Extension A"](P)||nt["CJK Unified Ideographs"](P)||nt["Enclosed CJK Letters and Months"](P)||nt["Halfwidth and Fullwidth Forms"](P)||nt.Hiragana(P)||nt["Ideographic Description Characters"](P)||nt["Kangxi Radicals"](P)||nt["Katakana Phonetic Extensions"](P)||nt.Katakana(P)||nt["Vertical Forms"](P)||nt["Yi Radicals"](P)||nt["Yi Syllables"](P)));(gk[N]||V||O.imageName||A!==i.length()-2&&yk[i.getCharCode(A+1)])&&v.push(Hv(A+1,k,w,v,_k(N,i.getCharCode(A+1),V&&S),!1))}}var P;return Wv(Hv(i.length(),k,w,v,0,!0))}function mg(i){let r=.5,o=.5;switch(i){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:r,verticalAlign:o}}function vk(i,r,o,l,p){if(!l&&!p)return;const m=i[o],v=(i[o].x+m.metrics.advance*m.scale)*l;for(let w=r;w<=o;w++)i[w].x-=v,i[w].y+=p}function xk(i,r,o){const{horizontalAlign:l,verticalAlign:p}=mg(o),m=r[0]-i.displaySize[0]*l,v=r[1]-i.displaySize[1]*p;return{image:i,top:v,bottom:v+i.displaySize[1],left:m,right:m+i.displaySize[0]}}function qv(i){var r,o;let l=i.left,p=i.top,m=i.right-l,v=i.bottom-p;const w=(r=i.image.textFitWidth)!==null&&r!==void 0?r:"stretchOrShrink",S=(o=i.image.textFitHeight)!==null&&o!==void 0?o:"stretchOrShrink",k=(i.image.content[2]-i.image.content[0])/(i.image.content[3]-i.image.content[1]);if(S==="proportional"){if(w==="stretchOnly"&&m/v<k||w==="proportional"){const P=Math.ceil(v*k);l*=P/m,m=P}}else if(w==="proportional"&&S==="stretchOnly"&&k!==0&&m/v>k){const P=Math.ceil(m/k);p*=P/v,v=P}return{x1:l,y1:p,x2:l+m,y2:p+v}}function Zv(i,r,o,l,p,m){const v=i.image;let w;if(v.content){const ee=v.content,oe=v.pixelRatio||1;w=[ee[0]/oe,ee[1]/oe,v.displaySize[0]-ee[2]/oe,v.displaySize[1]-ee[3]/oe]}const S=r.left*m,k=r.right*m;let P,A,O,N;o==="width"||o==="both"?(N=p[0]+S-l[3],A=p[0]+k+l[1]):(N=p[0]+(S+k-v.displaySize[0])/2,A=N+v.displaySize[0]);const V=r.top*m,q=r.bottom*m;return o==="height"||o==="both"?(P=p[1]+V-l[0],O=p[1]+q+l[2]):(P=p[1]+(V+q-v.displaySize[1])/2,O=P+v.displaySize[1]),{image:v,top:P,right:A,bottom:O,left:N,collisionPadding:w}}const uh=255,Ko=128,Qa=uh*Ko;function Gv(i,r){const{expression:o}=r;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new vr(i+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:l,interpolationType:p}=o;let m=0;for(;m<l.length&&l[m]<=i;)m++;m=Math.max(0,m-1);let v=m;for(;v<l.length&&l[v]<i+1;)v++;v=Math.min(l.length-1,v);const w=l[m],S=l[v];return o.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:S,interpolationType:p}:{kind:"camera",minZoom:w,maxZoom:S,minSize:o.evaluate(new vr(w)),maxSize:o.evaluate(new vr(S)),interpolationType:p}}}function gg(i,r,o){let l="never";const p=i.get(r);return p?l=p:i.get(o)&&(l="always"),l}const wk=Ya.VectorTileFeature.types,bk=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function _p(i,r,o,l,p,m,v,w,S,k,P,A,O){const N=w?Math.min(Qa,Math.round(w[0])):0,V=w?Math.min(Qa,Math.round(w[1])):0;i.emplaceBack(r,o,Math.round(32*l),Math.round(32*p),m,v,(N<<1)+(S?1:0),V,16*k,16*P,256*A,256*O)}function yg(i,r,o){i.emplaceBack(r.x,r.y,o),i.emplaceBack(r.x,r.y,o),i.emplaceBack(r.x,r.y,o),i.emplaceBack(r.x,r.y,o)}function Sk(i){for(const r of i.sections)if(Hc(r.text))return!0;return!1}class _g{constructor(r){this.layoutVertexArray=new Wi,this.indexArray=new fn,this.programConfigurations=r,this.segments=new un,this.dynamicLayoutVertexArray=new Zo,this.opacityVertexArray=new Za,this.hasVisibleVertices=!1,this.placedSymbolArray=new Tr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,o,l,p){this.isEmpty()||(l&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,QE.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,ek.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,bk,!0),this.opacityVertexBuffer.itemSize=1),(l||p)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}lt("SymbolBuffers",_g);class vg{constructor(r,o,l){this.layoutVertexArray=new r,this.layoutAttributes=o,this.indexArray=new l,this.segments=new un,this.collisionVertexArray=new zn}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,tk.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}lt("CollisionBuffers",vg);class du{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(v=>v.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ym([]),this.placementViewportMatrix=Ym([]);const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Gv(this.zoom,o["text-size"]),this.iconSizeData=Gv(this.zoom,o["icon-size"]);const l=this.layers[0].layout,p=l.get("symbol-sort-key"),m=l.get("symbol-z-order");this.canOverlap=gg(l,"text-overlap","text-allow-overlap")!=="never"||gg(l,"icon-overlap","icon-allow-overlap")!=="never"||l.get("text-ignore-placement")||l.get("icon-ignore-placement"),this.sortFeaturesByKey=m!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,l.get("symbol-placement")==="point"&&(this.writingModes=l.get("text-writing-mode").map(v=>g.ah[v])),this.stateDependentLayerIds=this.layers.filter(v=>v.isStateDependent()).map(v=>v.id),this.sourceID=r.sourceID}createArrays(){this.text=new _g(new Gs(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new _g(new Gs(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new Er,this.lineVertexArray=new Qn,this.symbolInstances=new $i,this.textAnchorOffsets=new In}calculateGlyphDependencies(r,o,l,p,m){for(let v=0;v<r.length;v++)if(o[r.charCodeAt(v)]=!0,(l||p)&&m){const w=ah[r.charAt(v)];w&&(o[w.charCodeAt(0)]=!0)}}populate(r,o,l){const p=this.layers[0],m=p.layout,v=m.get("text-font"),w=m.get("text-field"),S=m.get("icon-image"),k=(w.value.kind!=="constant"||w.value.value instanceof Ar&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&(v.value.kind!=="constant"||v.value.value.length>0),P=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,A=m.get("symbol-sort-key");if(this.features=[],!k&&!P)return;const O=o.iconDependencies,N=o.glyphDependencies,V=o.availableImages,q=new vr(this.zoom);for(const{feature:ee,id:oe,index:ve,sourceLayerIndex:de}of r){const ye=p._featureFilter.needGeometry,Ce=Xs(ee,ye);if(!p._featureFilter.filter(q,Ce,l))continue;let Fe,Je;if(ye||(Ce.geometry=Ks(ee)),k){const rt=p.getValueAndResolveTokens("text-field",Ce,l,V),Ye=Ar.factory(rt),_t=this.hasRTLText=this.hasRTLText||Sk(Ye);(!_t||qo.getRTLTextPluginStatus()==="unavailable"||_t&&qo.isParsed())&&(Fe=nk(Ye,p,Ce))}if(P){const rt=p.getValueAndResolveTokens("icon-image",Ce,l,V);Je=rt instanceof At?rt:At.fromString(rt)}if(!Fe&&!Je)continue;const St=this.sortFeaturesByKey?A.evaluate(Ce,{},l):void 0;if(this.features.push({id:oe,text:Fe,icon:Je,index:ve,sourceLayerIndex:de,geometry:Ce.geometry,properties:ee.properties,type:wk[ee.type],sortKey:St}),Je&&(O[Je.name]=!0),Fe){const rt=v.evaluate(Ce,{},l).join(","),Ye=m.get("text-rotation-alignment")!=="viewport"&&m.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(g.ah.vertical)>=0;for(const _t of Fe.sections)if(_t.image)O[_t.image.name]=!0;else{const pt=Vc(Fe.toString()),st=_t.fontStack||rt,Re=N[st]=N[st]||{};this.calculateGlyphDependencies(_t.text,Re,Ye,this.allowVerticalPlacement,pt)}}}m.get("symbol-placement")==="line"&&(this.features=function(ee){const oe={},ve={},de=[];let ye=0;function Ce(rt){de.push(ee[rt]),ye++}function Fe(rt,Ye,_t){const pt=ve[rt];return delete ve[rt],ve[Ye]=pt,de[pt].geometry[0].pop(),de[pt].geometry[0]=de[pt].geometry[0].concat(_t[0]),pt}function Je(rt,Ye,_t){const pt=oe[Ye];return delete oe[Ye],oe[rt]=pt,de[pt].geometry[0].shift(),de[pt].geometry[0]=_t[0].concat(de[pt].geometry[0]),pt}function St(rt,Ye,_t){const pt=_t?Ye[0][Ye[0].length-1]:Ye[0][0];return`${rt}:${pt.x}:${pt.y}`}for(let rt=0;rt<ee.length;rt++){const Ye=ee[rt],_t=Ye.geometry,pt=Ye.text?Ye.text.toString():null;if(!pt){Ce(rt);continue}const st=St(pt,_t),Re=St(pt,_t,!0);if(st in ve&&Re in oe&&ve[st]!==oe[Re]){const xt=Je(st,Re,_t),gt=Fe(st,Re,de[xt].geometry);delete oe[st],delete ve[Re],ve[St(pt,de[gt].geometry,!0)]=gt,de[xt].geometry=null}else st in ve?Fe(st,Re,_t):Re in oe?Je(st,Re,_t):(Ce(rt),oe[st]=ye-1,ve[Re]=ye-1)}return de.filter(rt=>rt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ee,oe)=>ee.sortKey-oe.sortKey)}update(r,o,l){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,o,this.layers,l),this.icon.programConfigurations.updatePaintArrays(r,o,this.layers,l))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,o){const l=this.lineVertexArray.length;if(r.segment!==void 0){let p=r.dist(o[r.segment+1]),m=r.dist(o[r.segment]);const v={};for(let w=r.segment+1;w<o.length;w++)v[w]={x:o[w].x,y:o[w].y,tileUnitDistanceFromAnchor:p},w<o.length-1&&(p+=o[w+1].dist(o[w]));for(let w=r.segment||0;w>=0;w--)v[w]={x:o[w].x,y:o[w].y,tileUnitDistanceFromAnchor:m},w>0&&(m+=o[w-1].dist(o[w]));for(let w=0;w<o.length;w++){const S=v[w];this.lineVertexArray.emplaceBack(S.x,S.y,S.tileUnitDistanceFromAnchor)}}return{lineStartIndex:l,lineLength:this.lineVertexArray.length-l}}addSymbols(r,o,l,p,m,v,w,S,k,P,A,O){const N=r.indexArray,V=r.layoutVertexArray,q=r.segments.prepareSegment(4*o.length,V,N,this.canOverlap?v.sortKey:void 0),ee=this.glyphOffsetArray.length,oe=q.vertexLength,ve=this.allowVerticalPlacement&&w===g.ah.vertical?Math.PI/2:0,de=v.text&&v.text.sections;for(let ye=0;ye<o.length;ye++){const{tl:Ce,tr:Fe,bl:Je,br:St,tex:rt,pixelOffsetTL:Ye,pixelOffsetBR:_t,minFontScaleX:pt,minFontScaleY:st,glyphOffset:Re,isSDF:xt,sectionIndex:gt}=o[ye],Mt=q.vertexLength,_r=Re[1];_p(V,S.x,S.y,Ce.x,_r+Ce.y,rt.x,rt.y,l,xt,Ye.x,Ye.y,pt,st),_p(V,S.x,S.y,Fe.x,_r+Fe.y,rt.x+rt.w,rt.y,l,xt,_t.x,Ye.y,pt,st),_p(V,S.x,S.y,Je.x,_r+Je.y,rt.x,rt.y+rt.h,l,xt,Ye.x,_t.y,pt,st),_p(V,S.x,S.y,St.x,_r+St.y,rt.x+rt.w,rt.y+rt.h,l,xt,_t.x,_t.y,pt,st),yg(r.dynamicLayoutVertexArray,S,ve),N.emplaceBack(Mt,Mt+1,Mt+2),N.emplaceBack(Mt+1,Mt+2,Mt+3),q.vertexLength+=4,q.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Re[0]),ye!==o.length-1&&gt===o[ye+1].sectionIndex||r.programConfigurations.populatePaintArrays(V.length,v,v.index,{},O,de&&de[gt])}r.placedSymbolArray.emplaceBack(S.x,S.y,ee,this.glyphOffsetArray.length-ee,oe,k,P,S.segment,l?l[0]:0,l?l[1]:0,p[0],p[1],w,0,!1,0,A)}_addCollisionDebugVertex(r,o,l,p,m,v){return o.emplaceBack(0,0),r.emplaceBack(l.x,l.y,p,m,Math.round(v.x),Math.round(v.y))}addCollisionDebugVertices(r,o,l,p,m,v,w){const S=m.segments.prepareSegment(4,m.layoutVertexArray,m.indexArray),k=S.vertexLength,P=m.layoutVertexArray,A=m.collisionVertexArray,O=w.anchorX,N=w.anchorY;this._addCollisionDebugVertex(P,A,v,O,N,new M(r,o)),this._addCollisionDebugVertex(P,A,v,O,N,new M(l,o)),this._addCollisionDebugVertex(P,A,v,O,N,new M(l,p)),this._addCollisionDebugVertex(P,A,v,O,N,new M(r,p)),S.vertexLength+=4;const V=m.indexArray;V.emplaceBack(k,k+1),V.emplaceBack(k+1,k+2),V.emplaceBack(k+2,k+3),V.emplaceBack(k+3,k),S.primitiveLength+=4}addDebugCollisionBoxes(r,o,l,p){for(let m=r;m<o;m++){const v=this.collisionBoxArray.get(m);this.addCollisionDebugVertices(v.x1,v.y1,v.x2,v.y2,p?this.textCollisionBox:this.iconCollisionBox,v.anchorPoint,l)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new vg(Mn,Mv.members,Lr),this.iconCollisionBox=new vg(Mn,Mv.members,Lr);for(let r=0;r<this.symbolInstances.length;r++){const o=this.symbolInstances.get(r);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(r,o,l,p,m,v,w,S,k){const P={};for(let A=o;A<l;A++){const O=r.get(A);P.textBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},P.textFeatureIndex=O.featureIndex;break}for(let A=p;A<m;A++){const O=r.get(A);P.verticalTextBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},P.verticalTextFeatureIndex=O.featureIndex;break}for(let A=v;A<w;A++){const O=r.get(A);P.iconBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},P.iconFeatureIndex=O.featureIndex;break}for(let A=S;A<k;A++){const O=r.get(A);P.verticalIconBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},P.verticalIconFeatureIndex=O.featureIndex;break}return P}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const l=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,l.textBoxStartIndex,l.textBoxEndIndex,l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l.iconBoxStartIndex,l.iconBoxEndIndex,l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,o){const l=r.placedSymbolArray.get(o),p=l.vertexStartIndex+4*l.numGlyphs;for(let m=l.vertexStartIndex;m<p;m+=4)r.indexArray.emplaceBack(m,m+1,m+2),r.indexArray.emplaceBack(m+1,m+2,m+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(r),l=Math.cos(r),p=[],m=[],v=[];for(let w=0;w<this.symbolInstances.length;++w){v.push(w);const S=this.symbolInstances.get(w);p.push(0|Math.round(o*S.anchorX+l*S.anchorY)),m.push(S.featureIndex)}return v.sort((w,S)=>p[w]-p[S]||m[S]-m[w]),v}addToSortKeyRanges(r,o){const l=this.sortKeyRanges[this.sortKeyRanges.length-1];l&&l.sortKey===o?l.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const l=this.symbolInstances.get(o);this.featureSortOrder.push(l.featureIndex),[l.rightJustifiedTextSymbolIndex,l.centerJustifiedTextSymbolIndex,l.leftJustifiedTextSymbolIndex].forEach((p,m,v)=>{p>=0&&v.indexOf(p)===m&&this.addIndicesForPlacedSymbol(this.text,p)}),l.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,l.verticalPlacedTextSymbolIndex),l.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.placedIconSymbolIndex),l.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Kv,Xv;lt("SymbolBucket",du,{omit:["layers","collisionBoxArray","features","compareText"]}),du.MAX_GLYPHS=65535,du.addDynamicAttributes=yg;var xg={get paint(){return Xv=Xv||new d({"icon-opacity":new Tt(ke.paint_symbol["icon-opacity"]),"icon-color":new Tt(ke.paint_symbol["icon-color"]),"icon-halo-color":new Tt(ke.paint_symbol["icon-halo-color"]),"icon-halo-width":new Tt(ke.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Tt(ke.paint_symbol["icon-halo-blur"]),"icon-translate":new vt(ke.paint_symbol["icon-translate"]),"icon-translate-anchor":new vt(ke.paint_symbol["icon-translate-anchor"]),"text-opacity":new Tt(ke.paint_symbol["text-opacity"]),"text-color":new Tt(ke.paint_symbol["text-color"],{runtimeType:rn,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new Tt(ke.paint_symbol["text-halo-color"]),"text-halo-width":new Tt(ke.paint_symbol["text-halo-width"]),"text-halo-blur":new Tt(ke.paint_symbol["text-halo-blur"]),"text-translate":new vt(ke.paint_symbol["text-translate"]),"text-translate-anchor":new vt(ke.paint_symbol["text-translate-anchor"])})},get layout(){return Kv=Kv||new d({"symbol-placement":new vt(ke.layout_symbol["symbol-placement"]),"symbol-spacing":new vt(ke.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new vt(ke.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Tt(ke.layout_symbol["symbol-sort-key"]),"symbol-z-order":new vt(ke.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new vt(ke.layout_symbol["icon-allow-overlap"]),"icon-overlap":new vt(ke.layout_symbol["icon-overlap"]),"icon-ignore-placement":new vt(ke.layout_symbol["icon-ignore-placement"]),"icon-optional":new vt(ke.layout_symbol["icon-optional"]),"icon-rotation-alignment":new vt(ke.layout_symbol["icon-rotation-alignment"]),"icon-size":new Tt(ke.layout_symbol["icon-size"]),"icon-text-fit":new vt(ke.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new vt(ke.layout_symbol["icon-text-fit-padding"]),"icon-image":new Tt(ke.layout_symbol["icon-image"]),"icon-rotate":new Tt(ke.layout_symbol["icon-rotate"]),"icon-padding":new Tt(ke.layout_symbol["icon-padding"]),"icon-keep-upright":new vt(ke.layout_symbol["icon-keep-upright"]),"icon-offset":new Tt(ke.layout_symbol["icon-offset"]),"icon-anchor":new Tt(ke.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new vt(ke.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new vt(ke.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new vt(ke.layout_symbol["text-rotation-alignment"]),"text-field":new Tt(ke.layout_symbol["text-field"]),"text-font":new Tt(ke.layout_symbol["text-font"]),"text-size":new Tt(ke.layout_symbol["text-size"]),"text-max-width":new Tt(ke.layout_symbol["text-max-width"]),"text-line-height":new vt(ke.layout_symbol["text-line-height"]),"text-letter-spacing":new Tt(ke.layout_symbol["text-letter-spacing"]),"text-justify":new Tt(ke.layout_symbol["text-justify"]),"text-radial-offset":new Tt(ke.layout_symbol["text-radial-offset"]),"text-variable-anchor":new vt(ke.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Tt(ke.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Tt(ke.layout_symbol["text-anchor"]),"text-max-angle":new vt(ke.layout_symbol["text-max-angle"]),"text-writing-mode":new vt(ke.layout_symbol["text-writing-mode"]),"text-rotate":new Tt(ke.layout_symbol["text-rotate"]),"text-padding":new vt(ke.layout_symbol["text-padding"]),"text-keep-upright":new vt(ke.layout_symbol["text-keep-upright"]),"text-transform":new Tt(ke.layout_symbol["text-transform"]),"text-offset":new Tt(ke.layout_symbol["text-offset"]),"text-allow-overlap":new vt(ke.layout_symbol["text-allow-overlap"]),"text-overlap":new vt(ke.layout_symbol["text-overlap"]),"text-ignore-placement":new vt(ke.layout_symbol["text-ignore-placement"]),"text-optional":new vt(ke.layout_symbol["text-optional"])})}};class Yv{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:Ui,this.defaultValue=r}evaluate(r){if(r.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(r.formattedSection))return o.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}lt("FormatSectionOverride",Yv,{omit:["defaultValue"]});class vp extends _{constructor(r){super(r,xg)}recalculate(r,o){if(super.recalculate(r,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const l=this.layout.get("text-writing-mode");if(l){const p=[];for(const m of l)p.indexOf(m)<0&&p.push(m);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,o,l,p){const m=this.layout.get(r).evaluate(o,{},l,p),v=this._unevaluatedLayout._values[r];return v.isDataDriven()||Vl(v.value)||!m?m:function(w,S){return S.replace(/{([^{}]+)}/g,(k,P)=>w&&P in w?String(w[P]):"")}(o.properties,m)}createBucket(r){return new du(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of xg.paint.overridableProperties){if(!vp.hasPaintOverride(this.layout,r))continue;const o=this.paint.get(r),l=new Yv(o),p=new Pc(l,o.property.specification);let m=null;m=o.value.kind==="constant"||o.value.kind==="source"?new Ic("source",p):new Ac("composite",p,o.value.zoomStops),this.paint._values[r]=new mo(o.property,m,o.parameters)}}_handleOverridablePaintPropertyUpdate(r,o,l){return!(!this.layout||o.isDataDriven()||l.isDataDriven())&&vp.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,o){const l=r.get("text-field"),p=xg.paint.properties[o];let m=!1;const v=w=>{for(const S of w)if(p.overrides&&p.overrides.hasOverride(S))return void(m=!0)};if(l.value.kind==="constant"&&l.value.value instanceof Ar)v(l.value.value.sections);else if(l.value.kind==="source"){const w=k=>{m||(k instanceof ho&&Nt(k.value)===Yn?v(k.value.sections):k instanceof Il?v(k.sections):k.eachChild(w))},S=l.value;S._styleExpression&&w(S._styleExpression.expression)}return m}}let Jv;var Tk={get paint(){return Jv=Jv||new d({"background-color":new vt(ke.paint_background["background-color"]),"background-pattern":new n(ke.paint_background["background-pattern"]),"background-opacity":new vt(ke.paint_background["background-opacity"])})}};class Ek extends _{constructor(r){super(r,Tk)}}let Qv;var kk={get paint(){return Qv=Qv||new d({"raster-opacity":new vt(ke.paint_raster["raster-opacity"]),"raster-hue-rotate":new vt(ke.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new vt(ke.paint_raster["raster-brightness-min"]),"raster-brightness-max":new vt(ke.paint_raster["raster-brightness-max"]),"raster-saturation":new vt(ke.paint_raster["raster-saturation"]),"raster-contrast":new vt(ke.paint_raster["raster-contrast"]),"raster-resampling":new vt(ke.paint_raster["raster-resampling"]),"raster-fade-duration":new vt(ke.paint_raster["raster-fade-duration"])})}};class Ck extends _{constructor(r){super(r,kk)}}class Pk extends _{constructor(r){super(r,{}),this.onAdd=o=>{this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)},this.onRemove=o=>{this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Ik{constructor(r){this._methodToThrottle=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const wg=63710088e-1;class es{constructor(r,o){if(isNaN(r)||isNaN(o))throw new Error(`Invalid LngLat object: (${r}, ${o})`);if(this.lng=+r,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new es(le(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const o=Math.PI/180,l=this.lat*o,p=r.lat*o,m=Math.sin(l)*Math.sin(p)+Math.cos(l)*Math.cos(p)*Math.cos((r.lng-this.lng)*o);return wg*Math.acos(Math.min(m,1))}static convert(r){if(r instanceof es)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new es(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new es(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const e1=2*Math.PI*wg;function t1(i){return e1*Math.cos(i*Math.PI/180)}function r1(i){return(180+i)/360}function n1(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function i1(i,r){return i/t1(r)}function bg(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}class xp{constructor(r,o,l=0){this.x=+r,this.y=+o,this.z=+l}static fromLngLat(r,o=0){const l=es.convert(r);return new xp(r1(l.lng),n1(l.lat),i1(o,l.lat))}toLngLat(){return new es(360*this.x-180,bg(this.y))}toAltitude(){return this.z*t1(bg(this.y))}meterInMercatorCoordinateUnits(){return 1/e1*(r=bg(this.y),1/Math.cos(r*Math.PI/180));var r}}function o1(i,r,o){var l=2*Math.PI*6378137/256/Math.pow(2,o);return[i*l-2*Math.PI*6378137/2,r*l-2*Math.PI*6378137/2]}class Sg{constructor(r,o,l){if(r<0||r>25||l<0||l>=Math.pow(2,r)||o<0||o>=Math.pow(2,r))throw new Error(`x=${o}, y=${l}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=o,this.y=l,this.key=ch(0,r,r,o,l)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,o,l){const p=(v=this.y,w=this.z,S=o1(256*(m=this.x),256*(v=Math.pow(2,w)-v-1),w),k=o1(256*(m+1),256*(v+1),w),S[0]+","+S[1]+","+k[0]+","+k[1]);var m,v,w,S,k;const P=function(A,O,N){let V,q="";for(let ee=A;ee>0;ee--)V=1<<ee-1,q+=(O&V?1:0)+(N&V?2:0);return q}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(l==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,P).replace(/{bbox-epsg-3857}/g,p)}isChildOf(r){const o=this.z-r.z;return o>0&&r.x===this.x>>o&&r.y===this.y>>o}getTilePoint(r){const o=Math.pow(2,this.z);return new M((r.x*o-this.x)*on,(r.y*o-this.y)*on)}toString(){return`${this.z}/${this.x}/${this.y}`}}class a1{constructor(r,o){this.wrap=r,this.canonical=o,this.key=ch(r,o.z,o.z,o.x,o.y)}}class Zi{constructor(r,o,l,p,m){if(r<l)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${l}`);this.overscaledZ=r,this.wrap=o,this.canonical=new Sg(l,+p,+m),this.key=ch(o,r,l,p,m)}clone(){return new Zi(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const o=this.canonical.z-r;return r>this.canonical.z?new Zi(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Zi(r,this.wrap,r,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(r,o){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-r;return r>this.canonical.z?ch(this.wrap*+o,r,this.canonical.z,this.canonical.x,this.canonical.y):ch(this.wrap*+o,r,r,this.canonical.x>>l,this.canonical.y>>l)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const o=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>o&&r.canonical.y===this.canonical.y>>o}children(r){if(this.overscaledZ>=r)return[new Zi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,l=2*this.canonical.x,p=2*this.canonical.y;return[new Zi(o,this.wrap,o,l,p),new Zi(o,this.wrap,o,l+1,p),new Zi(o,this.wrap,o,l,p+1),new Zi(o,this.wrap,o,l+1,p+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new Zi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new Zi(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new a1(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new xp(r.x-this.wrap,r.y))}}function ch(i,r,o,l,p){(i*=2)<0&&(i=-1*i-1);const m=1<<o;return(m*m*i+m*p+l).toString(36)+o.toString(36)+r.toString(36)}lt("CanonicalTileID",Sg),lt("OverscaledTileID",Zi,{omit:["posMatrix"]});class s1{constructor(r,o,l,p=1,m=1,v=1,w=0){if(this.uid=r,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(l&&!["mapbox","terrarium","custom"].includes(l))return void Ke(`"${l}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=o.height;const S=this.dim=o.height-2;switch(this.data=new Uint32Array(o.data.buffer),l){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=p,this.greenFactor=m,this.blueFactor=v,this.baseShift=w;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let k=0;k<S;k++)this.data[this._idx(-1,k)]=this.data[this._idx(0,k)],this.data[this._idx(S,k)]=this.data[this._idx(S-1,k)],this.data[this._idx(k,-1)]=this.data[this._idx(k,0)],this.data[this._idx(k,S)]=this.data[this._idx(k,S-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(S,-1)]=this.data[this._idx(S-1,0)],this.data[this._idx(-1,S)]=this.data[this._idx(0,S-1)],this.data[this._idx(S,S)]=this.data[this._idx(S-1,S-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let k=0;k<S;k++)for(let P=0;P<S;P++){const A=this.get(k,P);A>this.max&&(this.max=A),A<this.min&&(this.min=A)}}get(r,o){const l=new Uint8Array(this.data.buffer),p=4*this._idx(r,o);return this.unpack(l[p],l[p+1],l[p+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,o){if(r<-1||r>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(r+1)}unpack(r,o,l){return r*this.redFactor+o*this.greenFactor+l*this.blueFactor-this.baseShift}getPixels(){return new qi({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,o,l){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let p=o*this.dim,m=o*this.dim+this.dim,v=l*this.dim,w=l*this.dim+this.dim;switch(o){case-1:p=m-1;break;case 1:m=p+1}switch(l){case-1:v=w-1;break;case 1:w=v+1}const S=-o*this.dim,k=-l*this.dim;for(let P=v;P<w;P++)for(let A=p;A<m;A++)this.data[this._idx(A,P)]=r.data[this._idx(A+S,P+k)]}}lt("DEMData",s1);class l1{constructor(r){this._stringToNumber={},this._numberToString=[];for(let o=0;o<r.length;o++){const l=r[o];this._stringToNumber[l]=o,this._numberToString[o]=l}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class u1{constructor(r,o,l,p,m){this.type="Feature",this._vectorTileFeature=r,r._z=o,r._x=l,r._y=p,this.properties=r.properties,this.id=m}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&(r[o]=this[o]);return r}}class c1{constructor(r,o){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new Hs(on,16,0),this.grid3D=new Hs(on,16,0),this.featureIndexArray=new Hi,this.promoteId=o}insert(r,o,l,p,m,v){const w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(l,p,m);const S=v?this.grid3D:this.grid;for(let k=0;k<o.length;k++){const P=o[k],A=[1/0,1/0,-1/0,-1/0];for(let O=0;O<P.length;O++){const N=P[O];A[0]=Math.min(A[0],N.x),A[1]=Math.min(A[1],N.y),A[2]=Math.max(A[2],N.x),A[3]=Math.max(A[3],N.y)}A[0]<on&&A[1]<on&&A[2]>=0&&A[3]>=0&&S.insert(w,A[0],A[1],A[2],A[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Ya.VectorTile(new hg(this.rawTileData)).layers,this.sourceLayerCoder=new l1(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,o,l,p){this.loadVTLayers();const m=r.params||{},v=on/r.tileSize/r.scale,w=Mc(m.filter),S=r.queryGeometry,k=r.queryPadding*v,P=d1(S),A=this.grid.query(P.minX-k,P.minY-k,P.maxX+k,P.maxY+k),O=d1(r.cameraQueryGeometry),N=this.grid3D.query(O.minX-k,O.minY-k,O.maxX+k,O.maxY+k,(ee,oe,ve,de)=>function(ye,Ce,Fe,Je,St){for(const Ye of ye)if(Ce<=Ye.x&&Fe<=Ye.y&&Je>=Ye.x&&St>=Ye.y)return!0;const rt=[new M(Ce,Fe),new M(Ce,St),new M(Je,St),new M(Je,Fe)];if(ye.length>2){for(const Ye of rt)if(ou(ye,Ye))return!0}for(let Ye=0;Ye<ye.length-1;Ye++)if(uE(ye[Ye],ye[Ye+1],rt))return!0;return!1}(r.cameraQueryGeometry,ee-k,oe-k,ve+k,de+k));for(const ee of N)A.push(ee);A.sort(Ak);const V={};let q;for(let ee=0;ee<A.length;ee++){const oe=A[ee];if(oe===q)continue;q=oe;const ve=this.featureIndexArray.get(oe);let de=null;this.loadMatchingFeature(V,ve.bucketIndex,ve.sourceLayerIndex,ve.featureIndex,w,m.layers,m.availableImages,o,l,p,(ye,Ce,Fe)=>(de||(de=Ks(ye)),Ce.queryIntersectsFeature(S,ye,Fe,de,this.z,r.transform,v,r.pixelPosMatrix)))}return V}loadMatchingFeature(r,o,l,p,m,v,w,S,k,P,A){const O=this.bucketLayerIDs[o];if(v&&!function(ee,oe){for(let ve=0;ve<ee.length;ve++)if(oe.indexOf(ee[ve])>=0)return!0;return!1}(v,O))return;const N=this.sourceLayerCoder.decode(l),V=this.vtLayers[N].feature(p);if(m.needGeometry){const ee=Xs(V,!0);if(!m.filter(new vr(this.tileID.overscaledZ),ee,this.tileID.canonical))return}else if(!m.filter(new vr(this.tileID.overscaledZ),V))return;const q=this.getId(V,N);for(let ee=0;ee<O.length;ee++){const oe=O[ee];if(v&&v.indexOf(oe)<0)continue;const ve=S[oe];if(!ve)continue;let de={};q&&P&&(de=P.getState(ve.sourceLayer||"_geojsonTileLayer",q));const ye=Me({},k[oe]);ye.paint=h1(ye.paint,ve.paint,V,de,w),ye.layout=h1(ye.layout,ve.layout,V,de,w);const Ce=!A||A(V,ve,de);if(!Ce)continue;const Fe=new u1(V,this.z,this.x,this.y,q);Fe.layer=ye;let Je=r[oe];Je===void 0&&(Je=r[oe]=[]),Je.push({featureIndex:p,feature:Fe,intersectionZ:Ce})}}lookupSymbolFeatures(r,o,l,p,m,v,w,S){const k={};this.loadVTLayers();const P=Mc(m);for(const A of r)this.loadMatchingFeature(k,l,p,A,P,v,w,S,o);return k}hasLayer(r){for(const o of this.bucketLayerIDs)for(const l of o)if(r===l)return!0;return!1}getId(r,o){let l=r.id;return this.promoteId&&(l=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof l=="boolean"&&(l=Number(l))),l}}function h1(i,r,o,l,p){return Ie(i,(m,v)=>{const w=r instanceof Jl?r.get(v):null;return w&&w.evaluate?w.evaluate(o,l,p):w})}function d1(i){let r=1/0,o=1/0,l=-1/0,p=-1/0;for(const m of i)r=Math.min(r,m.x),o=Math.min(o,m.y),l=Math.max(l,m.x),p=Math.max(p,m.y);return{minX:r,minY:o,maxX:l,maxY:p}}function Ak(i,r){return r-i}function p1(i,r,o,l,p){const m=[];for(let v=0;v<i.length;v++){const w=i[v];let S;for(let k=0;k<w.length-1;k++){let P=w[k],A=w[k+1];P.x<r&&A.x<r||(P.x<r?P=new M(r,P.y+(r-P.x)/(A.x-P.x)*(A.y-P.y))._round():A.x<r&&(A=new M(r,P.y+(r-P.x)/(A.x-P.x)*(A.y-P.y))._round()),P.y<o&&A.y<o||(P.y<o?P=new M(P.x+(o-P.y)/(A.y-P.y)*(A.x-P.x),o)._round():A.y<o&&(A=new M(P.x+(o-P.y)/(A.y-P.y)*(A.x-P.x),o)._round()),P.x>=l&&A.x>=l||(P.x>=l?P=new M(l,P.y+(l-P.x)/(A.x-P.x)*(A.y-P.y))._round():A.x>=l&&(A=new M(l,P.y+(l-P.x)/(A.x-P.x)*(A.y-P.y))._round()),P.y>=p&&A.y>=p||(P.y>=p?P=new M(P.x+(p-P.y)/(A.y-P.y)*(A.x-P.x),p)._round():A.y>=p&&(A=new M(P.x+(p-P.y)/(A.y-P.y)*(A.x-P.x),p)._round()),S&&P.equals(S[S.length-1])||(S=[P],m.push(S)),S.push(A)))))}}return m}lt("FeatureIndex",c1,{omit:["rawTileData","sourceLayerCoder"]});class ts extends M{constructor(r,o,l,p){super(r,o),this.angle=l,p!==void 0&&(this.segment=p)}clone(){return new ts(this.x,this.y,this.angle,this.segment)}}function f1(i,r,o,l,p){if(r.segment===void 0||o===0)return!0;let m=r,v=r.segment+1,w=0;for(;w>-o/2;){if(v--,v<0)return!1;w-=i[v].dist(m),m=i[v]}w+=i[v].dist(i[v+1]),v++;const S=[];let k=0;for(;w<o/2;){const P=i[v],A=i[v+1];if(!A)return!1;let O=i[v-1].angleTo(P)-P.angleTo(A);for(O=Math.abs((O+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:w,angleDelta:O}),k+=O;w-S[0].distance>l;)k-=S.shift().angleDelta;if(k>p)return!1;v++,w+=P.dist(A)}return!0}function m1(i){let r=0;for(let o=0;o<i.length-1;o++)r+=i[o].dist(i[o+1]);return r}function g1(i,r,o){return i?.6*r*o:0}function y1(i,r){return Math.max(i?i.right-i.left:0,r?r.right-r.left:0)}function Mk(i,r,o,l,p,m){const v=g1(o,p,m),w=y1(o,l)*m;let S=0;const k=m1(i)/2;for(let P=0;P<i.length-1;P++){const A=i[P],O=i[P+1],N=A.dist(O);if(S+N>k){const V=(k-S)/N,q=Un.number(A.x,O.x,V),ee=Un.number(A.y,O.y,V),oe=new ts(q,ee,O.angleTo(A),P);return oe._round(),!v||f1(i,oe,w,v,r)?oe:void 0}S+=N}}function zk(i,r,o,l,p,m,v,w,S){const k=g1(l,m,v),P=y1(l,p),A=P*v,O=i[0].x===0||i[0].x===S||i[0].y===0||i[0].y===S;return r-A<r/4&&(r=A+r/4),_1(i,O?r/2*w%r:(P/2+2*m)*v*w%r,r,k,o,A,O,!1,S)}function _1(i,r,o,l,p,m,v,w,S){const k=m/2,P=m1(i);let A=0,O=r-o,N=[];for(let V=0;V<i.length-1;V++){const q=i[V],ee=i[V+1],oe=q.dist(ee),ve=ee.angleTo(q);for(;O+o<A+oe;){O+=o;const de=(O-A)/oe,ye=Un.number(q.x,ee.x,de),Ce=Un.number(q.y,ee.y,de);if(ye>=0&&ye<S&&Ce>=0&&Ce<S&&O-k>=0&&O+k<=P){const Fe=new ts(ye,Ce,ve,V);Fe._round(),l&&!f1(i,Fe,m,l,p)||N.push(Fe)}}A+=oe}return w||N.length||v||(N=_1(i,A/2,o,l,p,m,v,!0,S)),N}lt("Anchor",ts);const pu=mi;function v1(i,r,o,l){const p=[],m=i.image,v=m.pixelRatio,w=m.paddedRect.w-2*pu,S=m.paddedRect.h-2*pu;let k={x1:i.left,y1:i.top,x2:i.right,y2:i.bottom};const P=m.stretchX||[[0,w]],A=m.stretchY||[[0,S]],O=(Re,xt)=>Re+xt[1]-xt[0],N=P.reduce(O,0),V=A.reduce(O,0),q=w-N,ee=S-V;let oe=0,ve=N,de=0,ye=V,Ce=0,Fe=q,Je=0,St=ee;if(m.content&&l){const Re=m.content,xt=Re[2]-Re[0],gt=Re[3]-Re[1];(m.textFitWidth||m.textFitHeight)&&(k=qv(i)),oe=wp(P,0,Re[0]),de=wp(A,0,Re[1]),ve=wp(P,Re[0],Re[2]),ye=wp(A,Re[1],Re[3]),Ce=Re[0]-oe,Je=Re[1]-de,Fe=xt-ve,St=gt-ye}const rt=k.x1,Ye=k.y1,_t=k.x2-rt,pt=k.y2-Ye,st=(Re,xt,gt,Mt)=>{const _r=bp(Re.stretch-oe,ve,_t,rt),fr=Sp(Re.fixed-Ce,Fe,Re.stretch,N),mn=bp(xt.stretch-de,ye,pt,Ye),go=Sp(xt.fixed-Je,St,xt.stretch,V),Rn=bp(gt.stretch-oe,ve,_t,rt),Vr=Sp(gt.fixed-Ce,Fe,gt.stretch,N),ti=bp(Mt.stretch-de,ye,pt,Ye),ri=Sp(Mt.fixed-Je,St,Mt.stretch,V),ni=new M(_r,mn),$r=new M(Rn,mn),gn=new M(Rn,ti),$n=new M(_r,ti),Dn=new M(fr/v,go/v),ii=new M(Vr/v,ri/v),On=r*Math.PI/180;if(On){const rr=Math.sin(On),xr=Math.cos(On),kr=[xr,-rr,rr,xr];ni._matMult(kr),$r._matMult(kr),$n._matMult(kr),gn._matMult(kr)}const Gi=Re.stretch+Re.fixed,gi=xt.stretch+xt.fixed;return{tl:ni,tr:$r,bl:$n,br:gn,tex:{x:m.paddedRect.x+pu+Gi,y:m.paddedRect.y+pu+gi,w:gt.stretch+gt.fixed-Gi,h:Mt.stretch+Mt.fixed-gi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Dn,pixelOffsetBR:ii,minFontScaleX:Fe/v/_t,minFontScaleY:St/v/pt,isSDF:o}};if(l&&(m.stretchX||m.stretchY)){const Re=x1(P,q,N),xt=x1(A,ee,V);for(let gt=0;gt<Re.length-1;gt++){const Mt=Re[gt],_r=Re[gt+1];for(let fr=0;fr<xt.length-1;fr++)p.push(st(Mt,xt[fr],_r,xt[fr+1]))}}else p.push(st({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:S+1}));return p}function wp(i,r,o){let l=0;for(const p of i)l+=Math.max(r,Math.min(o,p[1]))-Math.max(r,Math.min(o,p[0]));return l}function x1(i,r,o){const l=[{fixed:-pu,stretch:0}];for(const[p,m]of i){const v=l[l.length-1];l.push({fixed:p-v.stretch,stretch:v.stretch}),l.push({fixed:p-v.stretch,stretch:v.stretch+(m-p)})}return l.push({fixed:r+pu,stretch:o}),l}function bp(i,r,o,l){return i/r*o+l}function Sp(i,r,o,l){return i-r*o/l}class Tp{constructor(r,o,l,p,m,v,w,S,k,P){var A;if(this.boxStartIndex=r.length,k){let O=v.top,N=v.bottom;const V=v.collisionPadding;V&&(O-=V[1],N+=V[3]);let q=N-O;q>0&&(q=Math.max(10,q),this.circleDiameter=q)}else{const O=!((A=v.image)===null||A===void 0)&&A.content&&(v.image.textFitWidth||v.image.textFitHeight)?qv(v):{x1:v.left,y1:v.top,x2:v.right,y2:v.bottom};O.y1=O.y1*w-S[0],O.y2=O.y2*w+S[2],O.x1=O.x1*w-S[3],O.x2=O.x2*w+S[1];const N=v.collisionPadding;if(N&&(O.x1-=N[0]*w,O.y1-=N[1]*w,O.x2+=N[2]*w,O.y2+=N[3]*w),P){const V=new M(O.x1,O.y1),q=new M(O.x2,O.y1),ee=new M(O.x1,O.y2),oe=new M(O.x2,O.y2),ve=P*Math.PI/180;V._rotate(ve),q._rotate(ve),ee._rotate(ve),oe._rotate(ve),O.x1=Math.min(V.x,q.x,ee.x,oe.x),O.x2=Math.max(V.x,q.x,ee.x,oe.x),O.y1=Math.min(V.y,q.y,ee.y,oe.y),O.y2=Math.max(V.y,q.y,ee.y,oe.y)}r.emplaceBack(o.x,o.y,O.x1,O.y1,O.x2,O.y2,l,p,m)}this.boxEndIndex=r.length}}class Lk{constructor(r=[],o=Rk){if(this.data=r,this.length=this.data.length,this.compare=o,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:o,compare:l}=this,p=o[r];for(;r>0;){const m=r-1>>1,v=o[m];if(l(p,v)>=0)break;o[r]=v,r=m}o[r]=p}_down(r){const{data:o,compare:l}=this,p=this.length>>1,m=o[r];for(;r<p;){let v=1+(r<<1),w=o[v];const S=v+1;if(S<this.length&&l(o[S],w)<0&&(v=S,w=o[S]),l(w,m)>=0)break;o[r]=w,r=v}o[r]=m}}function Rk(i,r){return i<r?-1:i>r?1:0}function Dk(i,r=1,o=!1){let l=1/0,p=1/0,m=-1/0,v=-1/0;const w=i[0];for(let N=0;N<w.length;N++){const V=w[N];(!N||V.x<l)&&(l=V.x),(!N||V.y<p)&&(p=V.y),(!N||V.x>m)&&(m=V.x),(!N||V.y>v)&&(v=V.y)}const S=Math.min(m-l,v-p);let k=S/2;const P=new Lk([],Ok);if(S===0)return new M(l,p);for(let N=l;N<m;N+=S)for(let V=p;V<v;V+=S)P.push(new fu(N+k,V+k,k,i));let A=function(N){let V=0,q=0,ee=0;const oe=N[0];for(let ve=0,de=oe.length,ye=de-1;ve<de;ye=ve++){const Ce=oe[ve],Fe=oe[ye],Je=Ce.x*Fe.y-Fe.x*Ce.y;q+=(Ce.x+Fe.x)*Je,ee+=(Ce.y+Fe.y)*Je,V+=3*Je}return new fu(q/V,ee/V,0,N)}(i),O=P.length;for(;P.length;){const N=P.pop();(N.d>A.d||!A.d)&&(A=N,o&&console.log("found best %d after %d probes",Math.round(1e4*N.d)/1e4,O)),N.max-A.d<=r||(k=N.h/2,P.push(new fu(N.p.x-k,N.p.y-k,k,i)),P.push(new fu(N.p.x+k,N.p.y-k,k,i)),P.push(new fu(N.p.x-k,N.p.y+k,k,i)),P.push(new fu(N.p.x+k,N.p.y+k,k,i)),O+=4)}return o&&(console.log(`num probes: ${O}`),console.log(`best distance: ${A.d}`)),A.p}function Ok(i,r){return r.max-i.max}function fu(i,r,o,l){this.p=new M(i,r),this.h=o,this.d=function(p,m){let v=!1,w=1/0;for(let S=0;S<m.length;S++){const k=m[S];for(let P=0,A=k.length,O=A-1;P<A;O=P++){const N=k[P],V=k[O];N.y>p.y!=V.y>p.y&&p.x<(V.x-N.x)*(p.y-N.y)/(V.y-N.y)+N.x&&(v=!v),w=Math.min(w,nv(p,N,V))}}return(v?1:-1)*Math.sqrt(w)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}var Ln;g.aq=void 0,(Ln=g.aq||(g.aq={}))[Ln.center=1]="center",Ln[Ln.left=2]="left",Ln[Ln.right=3]="right",Ln[Ln.top=4]="top",Ln[Ln.bottom=5]="bottom",Ln[Ln["top-left"]=6]="top-left",Ln[Ln["top-right"]=7]="top-right",Ln[Ln["bottom-left"]=8]="bottom-left",Ln[Ln["bottom-right"]=9]="bottom-right";const rs=7,Tg=Number.POSITIVE_INFINITY;function w1(i,r){return r[1]!==Tg?function(o,l,p){let m=0,v=0;switch(l=Math.abs(l),p=Math.abs(p),o){case"top-right":case"top-left":case"top":v=p-rs;break;case"bottom-right":case"bottom-left":case"bottom":v=-p+rs}switch(o){case"top-right":case"bottom-right":case"right":m=-l;break;case"top-left":case"bottom-left":case"left":m=l}return[m,v]}(i,r[0],r[1]):function(o,l){let p=0,m=0;l<0&&(l=0);const v=l/Math.SQRT2;switch(o){case"top-right":case"top-left":m=v-rs;break;case"bottom-right":case"bottom-left":m=-v+rs;break;case"bottom":m=-l+rs;break;case"top":m=l-rs}switch(o){case"top-right":case"bottom-right":p=-v;break;case"top-left":case"bottom-left":p=v;break;case"left":p=l;break;case"right":p=-l}return[p,m]}(i,r[0])}function b1(i,r,o){var l;const p=i.layout,m=(l=p.get("text-variable-anchor-offset"))===null||l===void 0?void 0:l.evaluate(r,{},o);if(m){const w=m.values,S=[];for(let k=0;k<w.length;k+=2){const P=S[k]=w[k],A=w[k+1].map(O=>O*cn);P.startsWith("top")?A[1]-=rs:P.startsWith("bottom")&&(A[1]+=rs),S[k+1]=A}return new ln(S)}const v=p.get("text-variable-anchor");if(v){let w;w=i._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[p.get("text-radial-offset").evaluate(r,{},o)*cn,Tg]:p.get("text-offset").evaluate(r,{},o).map(k=>k*cn);const S=[];for(const k of v)S.push(k,w1(k,w));return new ln(S)}return null}function Eg(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Fk(i,r,o,l,p,m,v,w,S,k,P){let A=m.textMaxSize.evaluate(r,{});A===void 0&&(A=v);const O=i.layers[0].layout,N=O.get("icon-offset").evaluate(r,{},P),V=T1(o.horizontal),q=v/24,ee=i.tilePixelRatio*q,oe=i.tilePixelRatio*A/24,ve=i.tilePixelRatio*w,de=i.tilePixelRatio*O.get("symbol-spacing"),ye=O.get("text-padding")*i.tilePixelRatio,Ce=function(Re,xt,gt,Mt=1){const _r=Re.get("icon-padding").evaluate(xt,{},gt),fr=_r&&_r.values;return[fr[0]*Mt,fr[1]*Mt,fr[2]*Mt,fr[3]*Mt]}(O,r,P,i.tilePixelRatio),Fe=O.get("text-max-angle")/180*Math.PI,Je=O.get("text-rotation-alignment")!=="viewport"&&O.get("symbol-placement")!=="point",St=O.get("icon-rotation-alignment")==="map"&&O.get("symbol-placement")!=="point",rt=O.get("symbol-placement"),Ye=de/2,_t=O.get("icon-text-fit");let pt;l&&_t!=="none"&&(i.allowVerticalPlacement&&o.vertical&&(pt=Zv(l,o.vertical,_t,O.get("icon-text-fit-padding"),N,q)),V&&(l=Zv(l,V,_t,O.get("icon-text-fit-padding"),N,q)));const st=(Re,xt)=>{xt.x<0||xt.x>=on||xt.y<0||xt.y>=on||function(gt,Mt,_r,fr,mn,go,Rn,Vr,ti,ri,ni,$r,gn,$n,Dn,ii,On,Gi,gi,rr,xr,kr,Pi,Br,mu){const Xo=gt.addToLineVertexArray(Mt,_r);let Yo,yo,Ki,bn,va=0,ph=0,P1=0,I1=0,Lg=-1,Rg=-1;const xa={};let A1=nu("");if(gt.allowVerticalPlacement&&fr.vertical){const Hn=Vr.layout.get("text-rotate").evaluate(xr,{},Br)+90;Ki=new Tp(ti,Mt,ri,ni,$r,fr.vertical,gn,$n,Dn,Hn),Rn&&(bn=new Tp(ti,Mt,ri,ni,$r,Rn,On,Gi,Dn,Hn))}if(mn){const Hn=Vr.layout.get("icon-rotate").evaluate(xr,{}),Xi=Vr.layout.get("icon-text-fit")!=="none",Js=v1(mn,Hn,Pi,Xi),zo=Rn?v1(Rn,Hn,Pi,Xi):void 0;yo=new Tp(ti,Mt,ri,ni,$r,mn,On,Gi,!1,Hn),va=4*Js.length;const Qs=gt.iconSizeData;let Jo=null;Qs.kind==="source"?(Jo=[Ko*Vr.layout.get("icon-size").evaluate(xr,{})],Jo[0]>Qa&&Ke(`${gt.layerIds[0]}: Value for "icon-size" is >= ${uh}. Reduce your "icon-size".`)):Qs.kind==="composite"&&(Jo=[Ko*kr.compositeIconSizes[0].evaluate(xr,{},Br),Ko*kr.compositeIconSizes[1].evaluate(xr,{},Br)],(Jo[0]>Qa||Jo[1]>Qa)&&Ke(`${gt.layerIds[0]}: Value for "icon-size" is >= ${uh}. Reduce your "icon-size".`)),gt.addSymbols(gt.icon,Js,Jo,rr,gi,xr,g.ah.none,Mt,Xo.lineStartIndex,Xo.lineLength,-1,Br),Lg=gt.icon.placedSymbolArray.length-1,zo&&(ph=4*zo.length,gt.addSymbols(gt.icon,zo,Jo,rr,gi,xr,g.ah.vertical,Mt,Xo.lineStartIndex,Xo.lineLength,-1,Br),Rg=gt.icon.placedSymbolArray.length-1)}const M1=Object.keys(fr.horizontal);for(const Hn of M1){const Xi=fr.horizontal[Hn];if(!Yo){A1=nu(Xi.text);const zo=Vr.layout.get("text-rotate").evaluate(xr,{},Br);Yo=new Tp(ti,Mt,ri,ni,$r,Xi,gn,$n,Dn,zo)}const Js=Xi.positionedLines.length===1;if(P1+=S1(gt,Mt,Xi,go,Vr,Dn,xr,ii,Xo,fr.vertical?g.ah.horizontal:g.ah.horizontalOnly,Js?M1:[Hn],xa,Lg,kr,Br),Js)break}fr.vertical&&(I1+=S1(gt,Mt,fr.vertical,go,Vr,Dn,xr,ii,Xo,g.ah.vertical,["vertical"],xa,Rg,kr,Br));const jk=Yo?Yo.boxStartIndex:gt.collisionBoxArray.length,Uk=Yo?Yo.boxEndIndex:gt.collisionBoxArray.length,Vk=Ki?Ki.boxStartIndex:gt.collisionBoxArray.length,$k=Ki?Ki.boxEndIndex:gt.collisionBoxArray.length,Hk=yo?yo.boxStartIndex:gt.collisionBoxArray.length,Wk=yo?yo.boxEndIndex:gt.collisionBoxArray.length,qk=bn?bn.boxStartIndex:gt.collisionBoxArray.length,Zk=bn?bn.boxEndIndex:gt.collisionBoxArray.length;let Mo=-1;const kp=(Hn,Xi)=>Hn&&Hn.circleDiameter?Math.max(Hn.circleDiameter,Xi):Xi;Mo=kp(Yo,Mo),Mo=kp(Ki,Mo),Mo=kp(yo,Mo),Mo=kp(bn,Mo);const z1=Mo>-1?1:0;z1&&(Mo*=mu/cn),gt.glyphOffsetArray.length>=du.MAX_GLYPHS&&Ke("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),xr.sortKey!==void 0&&gt.addToSortKeyRanges(gt.symbolInstances.length,xr.sortKey);const Gk=b1(Vr,xr,Br),[Kk,Xk]=function(Hn,Xi){const Js=Hn.length,zo=Xi==null?void 0:Xi.values;if((zo==null?void 0:zo.length)>0)for(let Qs=0;Qs<zo.length;Qs+=2){const Jo=zo[Qs+1];Hn.emplaceBack(g.aq[zo[Qs]],Jo[0],Jo[1])}return[Js,Hn.length]}(gt.textAnchorOffsets,Gk);gt.symbolInstances.emplaceBack(Mt.x,Mt.y,xa.right>=0?xa.right:-1,xa.center>=0?xa.center:-1,xa.left>=0?xa.left:-1,xa.vertical||-1,Lg,Rg,A1,jk,Uk,Vk,$k,Hk,Wk,qk,Zk,ri,P1,I1,va,ph,z1,0,gn,Mo,Kk,Xk)}(i,xt,Re,o,l,p,pt,i.layers[0],i.collisionBoxArray,r.index,r.sourceLayerIndex,i.index,ee,[ye,ye,ye,ye],Je,S,ve,Ce,St,N,r,m,k,P,v)};if(rt==="line")for(const Re of p1(r.geometry,0,0,on,on)){const xt=zk(Re,de,Fe,o.vertical||V,l,24,oe,i.overscaling,on);for(const gt of xt)V&&Bk(i,V.text,Ye,gt)||st(Re,gt)}else if(rt==="line-center"){for(const Re of r.geometry)if(Re.length>1){const xt=Mk(Re,Fe,o.vertical||V,l,24,oe);xt&&st(Re,xt)}}else if(r.type==="Polygon")for(const Re of Ml(r.geometry,0)){const xt=Dk(Re,16);st(Re[0],new ts(xt.x,xt.y,0))}else if(r.type==="LineString")for(const Re of r.geometry)st(Re,new ts(Re[0].x,Re[0].y,0));else if(r.type==="Point")for(const Re of r.geometry)for(const xt of Re)st([xt],new ts(xt.x,xt.y,0))}function S1(i,r,o,l,p,m,v,w,S,k,P,A,O,N,V){const q=function(ve,de,ye,Ce,Fe,Je,St,rt){const Ye=Ce.layout.get("text-rotate").evaluate(Je,{})*Math.PI/180,_t=[];for(const pt of de.positionedLines)for(const st of pt.positionedGlyphs){if(!st.rect)continue;const Re=st.rect||{};let xt=Nv+1,gt=!0,Mt=1,_r=0;const fr=(Fe||rt)&&st.vertical,mn=st.metrics.advance*st.scale/2;if(rt&&de.verticalizable&&(_r=pt.lineOffset/2-(st.imageName?-(cn-st.metrics.width*st.scale)/2:(st.scale-1)*cn)),st.imageName){const rr=St[st.imageName];gt=rr.sdf,Mt=rr.pixelRatio,xt=mi/Mt}const go=Fe?[st.x+mn,st.y]:[0,0];let Rn=Fe?[0,0]:[st.x+mn+ye[0],st.y+ye[1]-_r],Vr=[0,0];fr&&(Vr=Rn,Rn=[0,0]);const ti=st.metrics.isDoubleResolution?2:1,ri=(st.metrics.left-xt)*st.scale-mn+Rn[0],ni=(-st.metrics.top-xt)*st.scale+Rn[1],$r=ri+Re.w/ti*st.scale/Mt,gn=ni+Re.h/ti*st.scale/Mt,$n=new M(ri,ni),Dn=new M($r,ni),ii=new M(ri,gn),On=new M($r,gn);if(fr){const rr=new M(-mn,mn-sh),xr=-Math.PI/2,kr=cn/2-mn,Pi=new M(5-sh-kr,-(st.imageName?kr:0)),Br=new M(...Vr);$n._rotateAround(xr,rr)._add(Pi)._add(Br),Dn._rotateAround(xr,rr)._add(Pi)._add(Br),ii._rotateAround(xr,rr)._add(Pi)._add(Br),On._rotateAround(xr,rr)._add(Pi)._add(Br)}if(Ye){const rr=Math.sin(Ye),xr=Math.cos(Ye),kr=[xr,-rr,rr,xr];$n._matMult(kr),Dn._matMult(kr),ii._matMult(kr),On._matMult(kr)}const Gi=new M(0,0),gi=new M(0,0);_t.push({tl:$n,tr:Dn,bl:ii,br:On,tex:Re,writingMode:de.writingMode,glyphOffset:go,sectionIndex:st.sectionIndex,isSDF:gt,pixelOffsetTL:Gi,pixelOffsetBR:gi,minFontScaleX:0,minFontScaleY:0})}return _t}(0,o,w,p,m,v,l,i.allowVerticalPlacement),ee=i.textSizeData;let oe=null;ee.kind==="source"?(oe=[Ko*p.layout.get("text-size").evaluate(v,{})],oe[0]>Qa&&Ke(`${i.layerIds[0]}: Value for "text-size" is >= ${uh}. Reduce your "text-size".`)):ee.kind==="composite"&&(oe=[Ko*N.compositeTextSizes[0].evaluate(v,{},V),Ko*N.compositeTextSizes[1].evaluate(v,{},V)],(oe[0]>Qa||oe[1]>Qa)&&Ke(`${i.layerIds[0]}: Value for "text-size" is >= ${uh}. Reduce your "text-size".`)),i.addSymbols(i.text,q,oe,w,m,v,k,r,S.lineStartIndex,S.lineLength,O,V);for(const ve of P)A[ve]=i.text.placedSymbolArray.length-1;return 4*q.length}function T1(i){for(const r in i)return i[r];return null}function Bk(i,r,o,l){const p=i.compareText;if(r in p){const m=p[r];for(let v=m.length-1;v>=0;v--)if(l.dist(m[v])<o)return!0}else p[r]=[];return p[r].push(l),!1}const E1=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class kg{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[o,l]=new Uint8Array(r,0,2);if(o!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=l>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const m=E1[15&l];if(!m)throw new Error("Unrecognized array type.");const[v]=new Uint16Array(r,2,1),[w]=new Uint32Array(r,4,1);return new kg(w,v,m,r)}constructor(r,o=64,l=Float64Array,p){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+o,2),65535),this.ArrayType=l,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const m=E1.indexOf(this.ArrayType),v=2*r*this.ArrayType.BYTES_PER_ELEMENT,w=r*this.IndexArrayType.BYTES_PER_ELEMENT,S=(8-w%8)%8;if(m<0)throw new Error(`Unexpected typed array class: ${l}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+w+S,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+v+w+S),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+w+S,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+m]),new Uint16Array(this.data,2,1)[0]=o,new Uint32Array(this.data,4,1)[0]=r)}add(r,o){const l=this._pos>>1;return this.ids[l]=l,this.coords[this._pos++]=r,this.coords[this._pos++]=o,l}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return Cg(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,o,l,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:v,nodeSize:w}=this,S=[0,m.length-1,0],k=[];for(;S.length;){const P=S.pop()||0,A=S.pop()||0,O=S.pop()||0;if(A-O<=w){for(let ee=O;ee<=A;ee++){const oe=v[2*ee],ve=v[2*ee+1];oe>=r&&oe<=l&&ve>=o&&ve<=p&&k.push(m[ee])}continue}const N=O+A>>1,V=v[2*N],q=v[2*N+1];V>=r&&V<=l&&q>=o&&q<=p&&k.push(m[N]),(P===0?r<=V:o<=q)&&(S.push(O),S.push(N-1),S.push(1-P)),(P===0?l>=V:p>=q)&&(S.push(N+1),S.push(A),S.push(1-P))}return k}within(r,o,l){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:m,nodeSize:v}=this,w=[0,p.length-1,0],S=[],k=l*l;for(;w.length;){const P=w.pop()||0,A=w.pop()||0,O=w.pop()||0;if(A-O<=v){for(let ee=O;ee<=A;ee++)C1(m[2*ee],m[2*ee+1],r,o)<=k&&S.push(p[ee]);continue}const N=O+A>>1,V=m[2*N],q=m[2*N+1];C1(V,q,r,o)<=k&&S.push(p[N]),(P===0?r-l<=V:o-l<=q)&&(w.push(O),w.push(N-1),w.push(1-P)),(P===0?r+l>=V:o+l>=q)&&(w.push(N+1),w.push(A),w.push(1-P))}return S}}function Cg(i,r,o,l,p,m){if(p-l<=o)return;const v=l+p>>1;k1(i,r,v,l,p,m),Cg(i,r,o,l,v-1,1-m),Cg(i,r,o,v+1,p,1-m)}function k1(i,r,o,l,p,m){for(;p>l;){if(p-l>600){const k=p-l+1,P=o-l+1,A=Math.log(k),O=.5*Math.exp(2*A/3),N=.5*Math.sqrt(A*O*(k-O)/k)*(P-k/2<0?-1:1);k1(i,r,o,Math.max(l,Math.floor(o-P*O/k+N)),Math.min(p,Math.floor(o+(k-P)*O/k+N)),m)}const v=r[2*o+m];let w=l,S=p;for(hh(i,r,l,o),r[2*p+m]>v&&hh(i,r,l,p);w<S;){for(hh(i,r,w,S),w++,S--;r[2*w+m]<v;)w++;for(;r[2*S+m]>v;)S--}r[2*l+m]===v?hh(i,r,l,S):(S++,hh(i,r,S,p)),S<=o&&(l=S+1),o<=S&&(p=S-1)}}function hh(i,r,o,l){Pg(i,o,l),Pg(r,2*o,2*l),Pg(r,2*o+1,2*l+1)}function Pg(i,r,o){const l=i[r];i[r]=i[o],i[o]=l}function C1(i,r,o,l){const p=i-o,m=r-l;return p*p+m*m}var Ig;g.be=void 0,(Ig=g.be||(g.be={})).create="create",Ig.load="load",Ig.fullLoad="fullLoad";let Ep=null,dh=[];const Ag=1e3/60,Mg="loadTime",zg="fullLoadTime",Nk={mark(i){performance.mark(i)},frame(i){const r=i;Ep!=null&&dh.push(r-Ep),Ep=r},clearMetrics(){Ep=null,dh=[],performance.clearMeasures(Mg),performance.clearMeasures(zg);for(const i in g.be)performance.clearMarks(g.be[i])},getPerformanceMetrics(){performance.measure(Mg,g.be.create,g.be.load),performance.measure(zg,g.be.create,g.be.fullLoad);const i=performance.getEntriesByName(Mg)[0].duration,r=performance.getEntriesByName(zg)[0].duration,o=dh.length,l=1/(dh.reduce((m,v)=>m+v,0)/o/1e3),p=dh.filter(m=>m>Ag).reduce((m,v)=>m+(v-Ag)/Ag,0);return{loadTime:i,fullLoadTime:r,fps:l,percentDroppedFrames:p/(o+p)*100,totalFrames:o}}};g.$=un,g.A=au,g.B=function(i){if(Kt==null){const r=i.navigator?i.navigator.userAgent:null;Kt=!!i.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Kt},g.C=class{constructor(i,r){this.target=i,this.mapId=r,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Ik(()=>this.process()),this.subscription=function(o,l,p,m){return o.addEventListener(l,p,!1),{unsubscribe:()=>{o.removeEventListener(l,p,!1)}}}(this.target,"message",o=>this.receive(o)),this.globalScope=nr(self)?i:window}registerMessageHandler(i,r){this.messageHandlers[i]=r}sendAsync(i,r){return new Promise((o,l)=>{const p=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[p]={resolve:o,reject:l},r&&r.signal.addEventListener("abort",()=>{delete this.resolveRejects[p];const w={id:p,type:"<cancel>",origin:location.origin,targetMapId:i.targetMapId,sourceMapId:this.mapId};this.target.postMessage(w)},{once:!0});const m=[],v=Object.assign(Object.assign({},i),{id:p,sourceMapId:this.mapId,origin:location.origin,data:Ws(i.data,m)});this.target.postMessage(v,{transfer:m})})}receive(i){const r=i.data,o=r.id;if(!(r.origin!=="file://"&&location.origin!=="file://"&&r.origin!==location.origin||r.targetMapId&&this.mapId!==r.targetMapId)){if(r.type==="<cancel>"){delete this.tasks[o];const l=this.abortControllers[o];return delete this.abortControllers[o],void(l&&l.abort())}if(nr(self)||r.mustQueue)return this.tasks[o]=r,this.taskQueue.push(o),void this.invoker.trigger();this.processTask(o,r)}}process(){if(this.taskQueue.length===0)return;const i=this.taskQueue.shift(),r=this.tasks[i];delete this.tasks[i],this.taskQueue.length>0&&this.invoker.trigger(),r&&this.processTask(i,r)}processTask(i,r){return h(this,void 0,void 0,function*(){if(r.type==="<response>"){const p=this.resolveRejects[i];return delete this.resolveRejects[i],p?void(r.error?p.reject(fo(r.error)):p.resolve(fo(r.data))):void 0}if(!this.messageHandlers[r.type])return void this.completeTask(i,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const o=fo(r.data),l=new AbortController;this.abortControllers[i]=l;try{const p=yield this.messageHandlers[r.type](r.sourceMapId,o,l);this.completeTask(i,null,p)}catch(p){this.completeTask(i,p)}})}completeTask(i,r,o){const l=[];delete this.abortControllers[i];const p={id:i,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:r?Ws(r):null,data:Ws(o,l)};this.target.postMessage(p,{transfer:l})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},g.D=vt,g.E=Ni,g.F=function(){var i=new au(16);return au!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},g.G=gr,g.H=function(i,r,o){var l,p,m,v,w,S,k,P,A,O,N,V,q=o[0],ee=o[1],oe=o[2];return r===i?(i[12]=r[0]*q+r[4]*ee+r[8]*oe+r[12],i[13]=r[1]*q+r[5]*ee+r[9]*oe+r[13],i[14]=r[2]*q+r[6]*ee+r[10]*oe+r[14],i[15]=r[3]*q+r[7]*ee+r[11]*oe+r[15]):(p=r[1],m=r[2],v=r[3],w=r[4],S=r[5],k=r[6],P=r[7],A=r[8],O=r[9],N=r[10],V=r[11],i[0]=l=r[0],i[1]=p,i[2]=m,i[3]=v,i[4]=w,i[5]=S,i[6]=k,i[7]=P,i[8]=A,i[9]=O,i[10]=N,i[11]=V,i[12]=l*q+w*ee+A*oe+r[12],i[13]=p*q+S*ee+O*oe+r[13],i[14]=m*q+k*ee+N*oe+r[14],i[15]=v*q+P*ee+V*oe+r[15]),i},g.I=pg,g.J=function(i,r,o){var l=o[0],p=o[1],m=o[2];return i[0]=r[0]*l,i[1]=r[1]*l,i[2]=r[2]*l,i[3]=r[3]*l,i[4]=r[4]*p,i[5]=r[5]*p,i[6]=r[6]*p,i[7]=r[7]*p,i[8]=r[8]*m,i[9]=r[9]*m,i[10]=r[10]*m,i[11]=r[11]*m,i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],i},g.K=sv,g.L=function(i,r){const o={};for(let l=0;l<r.length;l++){const p=r[l];p in i&&(o[p]=i[p])}return o},g.M=es,g.N=r1,g.O=n1,g.P=M,g.Q=Zi,g.R=qi,g.S=te,g.T=Wa,g.U=H,g.V=yt,g.W=on,g.X=I,g.Y=xp,g.Z=class extends W{},g._=h,g.a=cr,g.a$=function(i,r){return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],i},g.a0=Sg,g.a1=je,g.a2=i=>{const r=window.document.createElement("video");return r.muted=!0,new Promise(o=>{r.onloadstart=()=>{o(r)};for(const l of i){const p=window.document.createElement("source");Bi(l)||(r.crossOrigin="Anonymous"),p.src=l,r.appendChild(p)}})},g.a3=function(){return $e++},g.a4=Vt,g.a5=du,g.a6=Mc,g.a7=Xs,g.a8=vr,g.a9=u1,g.aA=function(i){if(i.type==="custom")return new Pk(i);switch(i.type){case"background":return new Ek(i);case"circle":return new dE(i);case"fill":return new IE(i);case"fill-extrusion":return new HE(i);case"heatmap":return new fE(i);case"hillshade":return new gE(i);case"line":return new JE(i);case"raster":return new Ck(i);case"symbol":return new vp(i)}},g.aB=Be,g.aC=function(i,r){if(!i)return[{command:"setStyle",args:[r]}];let o=[];try{if(!Dt(i.version,r.version))return[{command:"setStyle",args:[r]}];Dt(i.center,r.center)||o.push({command:"setCenter",args:[r.center]}),Dt(i.zoom,r.zoom)||o.push({command:"setZoom",args:[r.zoom]}),Dt(i.bearing,r.bearing)||o.push({command:"setBearing",args:[r.bearing]}),Dt(i.pitch,r.pitch)||o.push({command:"setPitch",args:[r.pitch]}),Dt(i.sprite,r.sprite)||o.push({command:"setSprite",args:[r.sprite]}),Dt(i.glyphs,r.glyphs)||o.push({command:"setGlyphs",args:[r.glyphs]}),Dt(i.transition,r.transition)||o.push({command:"setTransition",args:[r.transition]}),Dt(i.light,r.light)||o.push({command:"setLight",args:[r.light]}),Dt(i.terrain,r.terrain)||o.push({command:"setTerrain",args:[r.terrain]}),Dt(i.sky,r.sky)||o.push({command:"setSky",args:[r.sky]}),Dt(i.projection,r.projection)||o.push({command:"setProjection",args:[r.projection]});const l={},p=[];(function(v,w,S,k){let P;for(P in w=w||{},v=v||{})Object.prototype.hasOwnProperty.call(v,P)&&(Object.prototype.hasOwnProperty.call(w,P)||ji(P,S,k));for(P in w)Object.prototype.hasOwnProperty.call(w,P)&&(Object.prototype.hasOwnProperty.call(v,P)?Dt(v[P],w[P])||(v[P].type==="geojson"&&w[P].type==="geojson"&&dn(v,w,P)?Xt(S,{command:"setGeoJSONSourceData",args:[P,w[P].data]}):qr(P,w,S,k)):Xn(P,w,S))})(i.sources,r.sources,p,l);const m=[];i.layers&&i.layers.forEach(v=>{"source"in v&&l[v.source]?o.push({command:"removeLayer",args:[v.id]}):m.push(v)}),o=o.concat(p),function(v,w,S){w=w||[];const k=(v=v||[]).map(pn),P=w.map(pn),A=v.reduce(Ti,{}),O=w.reduce(Ti,{}),N=k.slice(),V=Object.create(null);let q,ee,oe,ve,de;for(let ye=0,Ce=0;ye<k.length;ye++)q=k[ye],Object.prototype.hasOwnProperty.call(O,q)?Ce++:(Xt(S,{command:"removeLayer",args:[q]}),N.splice(N.indexOf(q,Ce),1));for(let ye=0,Ce=0;ye<P.length;ye++)q=P[P.length-1-ye],N[N.length-1-ye]!==q&&(Object.prototype.hasOwnProperty.call(A,q)?(Xt(S,{command:"removeLayer",args:[q]}),N.splice(N.lastIndexOf(q,N.length-Ce),1)):Ce++,ve=N[N.length-ye],Xt(S,{command:"addLayer",args:[O[q],ve]}),N.splice(N.length-ye,0,q),V[q]=!0);for(let ye=0;ye<P.length;ye++)if(q=P[ye],ee=A[q],oe=O[q],!V[q]&&!Dt(ee,oe))if(Dt(ee.source,oe.source)&&Dt(ee["source-layer"],oe["source-layer"])&&Dt(ee.type,oe.type)){for(de in tn(ee.layout,oe.layout,S,q,null,"setLayoutProperty"),tn(ee.paint,oe.paint,S,q,null,"setPaintProperty"),Dt(ee.filter,oe.filter)||Xt(S,{command:"setFilter",args:[q,oe.filter]}),Dt(ee.minzoom,oe.minzoom)&&Dt(ee.maxzoom,oe.maxzoom)||Xt(S,{command:"setLayerZoomRange",args:[q,oe.minzoom,oe.maxzoom]}),ee)Object.prototype.hasOwnProperty.call(ee,de)&&de!=="layout"&&de!=="paint"&&de!=="filter"&&de!=="metadata"&&de!=="minzoom"&&de!=="maxzoom"&&(de.indexOf("paint.")===0?tn(ee[de],oe[de],S,q,de.slice(6),"setPaintProperty"):Dt(ee[de],oe[de])||Xt(S,{command:"setLayerProperty",args:[q,de,oe[de]]}));for(de in oe)Object.prototype.hasOwnProperty.call(oe,de)&&!Object.prototype.hasOwnProperty.call(ee,de)&&de!=="layout"&&de!=="paint"&&de!=="filter"&&de!=="metadata"&&de!=="minzoom"&&de!=="maxzoom"&&(de.indexOf("paint.")===0?tn(ee[de],oe[de],S,q,de.slice(6),"setPaintProperty"):Dt(ee[de],oe[de])||Xt(S,{command:"setLayerProperty",args:[q,de,oe[de]]}))}else Xt(S,{command:"removeLayer",args:[q]}),ve=N[N.lastIndexOf(q)+1],Xt(S,{command:"addLayer",args:[oe,ve]})}(m,r.layers,o)}catch(l){console.warn("Unable to compute style diff:",l),o=[{command:"setStyle",args:[r]}]}return o},g.aD=function(i){const r=[],o=i.id;return o===void 0&&r.push({message:`layers.${o}: missing required property "id"`}),i.render===void 0&&r.push({message:`layers.${o}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&r.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),r},g.aE=function i(r,o){if(Array.isArray(r)){if(!Array.isArray(o)||r.length!==o.length)return!1;for(let l=0;l<r.length;l++)if(!i(r[l],o[l]))return!1;return!0}if(typeof r=="object"&&r!==null&&o!==null){if(typeof o!="object"||Object.keys(r).length!==Object.keys(o).length)return!1;for(const l in r)if(!i(r[l],o[l]))return!1;return!0}return r===o},g.aF=Ie,g.aG=ze,g.aH=class extends Zs{constructor(i,r){super(i,r),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}},g.aI=op,g.aJ=class extends Zs{constructor(i,r){super(i,r),this.current=iE}set(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let r=1;r<16;r++)if(i[r]!==this.current[r]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}},g.aK=X_,g.aL=class extends Zs{constructor(i,r){super(i,r),this.current=[0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))}},g.aM=class extends Zs{constructor(i,r){super(i,r),this.current=[0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))}},g.aN=Y_,g.aO=function(i,r,o,l,p,m,v){var w=1/(r-o),S=1/(l-p),k=1/(m-v);return i[0]=-2*w,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*S,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*k,i[11]=0,i[12]=(r+o)*w,i[13]=(p+l)*S,i[14]=(v+m)*k,i[15]=1,i},g.aP=Gt,g.aQ=hE,g.aR=class extends De{},g.aS=rk,g.aT=class extends it{},g.aU=function(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))},g.aV=dv,g.aW=ma,g.aX=class extends tt{},g.aY=fn,g.aZ=function(i,r){return i[0]===r[0]&&i[1]===r[1]&&i[2]===r[2]&&i[3]===r[3]&&i[4]===r[4]&&i[5]===r[5]&&i[6]===r[6]&&i[7]===r[7]&&i[8]===r[8]&&i[9]===r[9]&&i[10]===r[10]&&i[11]===r[11]&&i[12]===r[12]&&i[13]===r[13]&&i[14]===r[14]&&i[15]===r[15]},g.a_=function(i,r){var o=i[0],l=i[1],p=i[2],m=i[3],v=i[4],w=i[5],S=i[6],k=i[7],P=i[8],A=i[9],O=i[10],N=i[11],V=i[12],q=i[13],ee=i[14],oe=i[15],ve=r[0],de=r[1],ye=r[2],Ce=r[3],Fe=r[4],Je=r[5],St=r[6],rt=r[7],Ye=r[8],_t=r[9],pt=r[10],st=r[11],Re=r[12],xt=r[13],gt=r[14],Mt=r[15];return Math.abs(o-ve)<=ei*Math.max(1,Math.abs(o),Math.abs(ve))&&Math.abs(l-de)<=ei*Math.max(1,Math.abs(l),Math.abs(de))&&Math.abs(p-ye)<=ei*Math.max(1,Math.abs(p),Math.abs(ye))&&Math.abs(m-Ce)<=ei*Math.max(1,Math.abs(m),Math.abs(Ce))&&Math.abs(v-Fe)<=ei*Math.max(1,Math.abs(v),Math.abs(Fe))&&Math.abs(w-Je)<=ei*Math.max(1,Math.abs(w),Math.abs(Je))&&Math.abs(S-St)<=ei*Math.max(1,Math.abs(S),Math.abs(St))&&Math.abs(k-rt)<=ei*Math.max(1,Math.abs(k),Math.abs(rt))&&Math.abs(P-Ye)<=ei*Math.max(1,Math.abs(P),Math.abs(Ye))&&Math.abs(A-_t)<=ei*Math.max(1,Math.abs(A),Math.abs(_t))&&Math.abs(O-pt)<=ei*Math.max(1,Math.abs(O),Math.abs(pt))&&Math.abs(N-st)<=ei*Math.max(1,Math.abs(N),Math.abs(st))&&Math.abs(V-Re)<=ei*Math.max(1,Math.abs(V),Math.abs(Re))&&Math.abs(q-xt)<=ei*Math.max(1,Math.abs(q),Math.abs(xt))&&Math.abs(ee-gt)<=ei*Math.max(1,Math.abs(ee),Math.abs(gt))&&Math.abs(oe-Mt)<=ei*Math.max(1,Math.abs(oe),Math.abs(Mt))},g.aa=function(i){const r={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,l,p,m)=>{const v=p||m;return r[l]=!v||v.toLowerCase(),""}),r["max-age"]){const o=parseInt(r["max-age"],10);isNaN(o)?delete r["max-age"]:r["max-age"]=o}return r},g.ab=function(i,r){const o=[];for(const l in i)l in r||o.push(l);return o},g.ac=Ae,g.ad=function(i,r,o){var l=Math.sin(o),p=Math.cos(o),m=r[0],v=r[1],w=r[2],S=r[3],k=r[4],P=r[5],A=r[6],O=r[7];return r!==i&&(i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15]),i[0]=m*p+k*l,i[1]=v*p+P*l,i[2]=w*p+A*l,i[3]=S*p+O*l,i[4]=k*p-m*l,i[5]=P*p-v*l,i[6]=A*p-w*l,i[7]=O*p-S*l,i},g.ae=function(i){var r=new au(16);return r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[8]=i[8],r[9]=i[9],r[10]=i[10],r[11]=i[11],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15],r},g.af=up,g.ag=function(i,r){let o=0,l=0;if(i.kind==="constant")l=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:p,minZoom:m,maxZoom:v}=i,w=p?Ae(hi.interpolationFactor(p,r,m,v),0,1):0;i.kind==="camera"?l=Un.number(i.minSize,i.maxSize,w):o=w}return{uSizeT:o,uSize:l}},g.ai=function(i,{uSize:r,uSizeT:o},{lowerSize:l,upperSize:p}){return i.kind==="source"?l/Ko:i.kind==="composite"?Un.number(l/Ko,p/Ko,o):r},g.aj=yg,g.ak=function(i,r,o,l){const p=r.y-i.y,m=r.x-i.x,v=l.y-o.y,w=l.x-o.x,S=v*m-w*p;if(S===0)return null;const k=(w*(i.y-o.y)-v*(i.x-o.x))/S;return new M(i.x+k*m,i.y+k*p)},g.al=p1,g.am=tv,g.an=Ym,g.ao=function(i){let r=1/0,o=1/0,l=-1/0,p=-1/0;for(const m of i)r=Math.min(r,m.x),o=Math.min(o,m.y),l=Math.max(l,m.x),p=Math.max(p,m.y);return[r,o,l,p]},g.ap=cn,g.ar=gg,g.as=function(i,r){var o=r[0],l=r[1],p=r[2],m=r[3],v=r[4],w=r[5],S=r[6],k=r[7],P=r[8],A=r[9],O=r[10],N=r[11],V=r[12],q=r[13],ee=r[14],oe=r[15],ve=o*w-l*v,de=o*S-p*v,ye=o*k-m*v,Ce=l*S-p*w,Fe=l*k-m*w,Je=p*k-m*S,St=P*q-A*V,rt=P*ee-O*V,Ye=P*oe-N*V,_t=A*ee-O*q,pt=A*oe-N*q,st=O*oe-N*ee,Re=ve*st-de*pt+ye*_t+Ce*Ye-Fe*rt+Je*St;return Re?(i[0]=(w*st-S*pt+k*_t)*(Re=1/Re),i[1]=(p*pt-l*st-m*_t)*Re,i[2]=(q*Je-ee*Fe+oe*Ce)*Re,i[3]=(O*Fe-A*Je-N*Ce)*Re,i[4]=(S*Ye-v*st-k*rt)*Re,i[5]=(o*st-p*Ye+m*rt)*Re,i[6]=(ee*ye-V*Je-oe*de)*Re,i[7]=(P*Je-O*ye+N*de)*Re,i[8]=(v*pt-w*Ye+k*St)*Re,i[9]=(l*Ye-o*pt-m*St)*Re,i[10]=(V*Fe-q*ye+oe*ve)*Re,i[11]=(A*ye-P*Fe-N*ve)*Re,i[12]=(w*rt-v*_t-S*St)*Re,i[13]=(o*_t-l*rt+p*St)*Re,i[14]=(q*de-V*Ce-ee*ve)*Re,i[15]=(P*Ce-A*de+O*ve)*Re,i):null},g.at=Eg,g.au=mg,g.av=kg,g.aw=function(){const i={},r=ke.$version;for(const o in ke.$root){const l=ke.$root[o];if(l.required){let p=null;p=o==="version"?r:l.type==="array"?[]:{},p!=null&&(i[o]=p)}}return i},g.ax=Yd,g.ay=En,g.az=function(i){i=i.slice();const r=Object.create(null);for(let o=0;o<i.length;o++)r[i[o].id]=i[o];for(let o=0;o<i.length;o++)"ref"in i[o]&&(i[o]=xn(i[o],r[i[o].ref]));return i},g.b=Ft,g.b0=function(i,r,o){return i[0]=r[0]*o[0],i[1]=r[1]*o[1],i[2]=r[2]*o[2],i[3]=r[3]*o[3],i},g.b1=function(i,r){return i[0]*r[0]+i[1]*r[1]+i[2]*r[2]+i[3]*r[3]},g.b2=le,g.b3=a1,g.b4=i1,g.b5=function(i,r,o,l,p){var m,v=1/Math.tan(r/2);return i[0]=v/o,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=v,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,p!=null&&p!==1/0?(i[10]=(p+l)*(m=1/(l-p)),i[14]=2*p*l*m):(i[10]=-1,i[14]=-2*l),i},g.b6=function(i,r,o){var l=Math.sin(o),p=Math.cos(o),m=r[4],v=r[5],w=r[6],S=r[7],k=r[8],P=r[9],A=r[10],O=r[11];return r!==i&&(i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15]),i[4]=m*p+k*l,i[5]=v*p+P*l,i[6]=w*p+A*l,i[7]=S*p+O*l,i[8]=k*p-m*l,i[9]=P*p-v*l,i[10]=A*p-w*l,i[11]=O*p-S*l,i},g.b7=ne,g.b8=be,g.b9=function(i){return i*Math.PI/180},g.bA=$l,g.bB=qo,g.ba=function(i,r){return i[0]=r[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=r[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=r[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},g.bb=class extends U{},g.bc=wg,g.bd=Nk,g.bf=en,g.bg=function(i,r){cr.REGISTERED_PROTOCOLS[i]=r},g.bh=function(i){delete cr.REGISTERED_PROTOCOLS[i]},g.bi=function(i,r){const o={};for(let p=0;p<i.length;p++){const m=r&&r[i[p].id]||Vm(i[p]);r&&(r[i[p].id]=m);let v=o[m];v||(v=o[m]=[]),v.push(i[p])}const l=[];for(const p in o)l.push(o[p]);return l},g.bj=lt,g.bk=l1,g.bl=c1,g.bm=Uv,g.bn=function(i){i.bucket.createArrays(),i.bucket.tilePixelRatio=on/(512*i.bucket.overscaling),i.bucket.compareText={},i.bucket.iconsNeedLinear=!1;const r=i.bucket.layers[0],o=r.layout,l=r._unevaluatedLayout._values,p={layoutIconSize:l["icon-size"].possiblyEvaluate(new vr(i.bucket.zoom+1),i.canonical),layoutTextSize:l["text-size"].possiblyEvaluate(new vr(i.bucket.zoom+1),i.canonical),textMaxSize:l["text-size"].possiblyEvaluate(new vr(18))};if(i.bucket.textSizeData.kind==="composite"){const{minZoom:k,maxZoom:P}=i.bucket.textSizeData;p.compositeTextSizes=[l["text-size"].possiblyEvaluate(new vr(k),i.canonical),l["text-size"].possiblyEvaluate(new vr(P),i.canonical)]}if(i.bucket.iconSizeData.kind==="composite"){const{minZoom:k,maxZoom:P}=i.bucket.iconSizeData;p.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new vr(k),i.canonical),l["icon-size"].possiblyEvaluate(new vr(P),i.canonical)]}const m=o.get("text-line-height")*cn,v=o.get("text-rotation-alignment")!=="viewport"&&o.get("symbol-placement")!=="point",w=o.get("text-keep-upright"),S=o.get("text-size");for(const k of i.bucket.features){const P=o.get("text-font").evaluate(k,{},i.canonical).join(","),A=S.evaluate(k,{},i.canonical),O=p.layoutTextSize.evaluate(k,{},i.canonical),N=p.layoutIconSize.evaluate(k,{},i.canonical),V={horizontal:{},vertical:void 0},q=k.text;let ee,oe=[0,0];if(q){const ye=q.toString(),Ce=o.get("text-letter-spacing").evaluate(k,{},i.canonical)*cn,Fe=Hm(ye)?Ce:0,Je=o.get("text-anchor").evaluate(k,{},i.canonical),St=b1(r,k,i.canonical);if(!St){const pt=o.get("text-radial-offset").evaluate(k,{},i.canonical);oe=pt?w1(Je,[pt*cn,Tg]):o.get("text-offset").evaluate(k,{},i.canonical).map(st=>st*cn)}let rt=v?"center":o.get("text-justify").evaluate(k,{},i.canonical);const Ye=o.get("symbol-placement")==="point"?o.get("text-max-width").evaluate(k,{},i.canonical)*cn:1/0,_t=()=>{i.bucket.allowVerticalPlacement&&Vc(ye)&&(V.vertical=gp(q,i.glyphMap,i.glyphPositions,i.imagePositions,P,Ye,m,Je,"left",Fe,oe,g.ah.vertical,!0,O,A))};if(!v&&St){const pt=new Set;if(rt==="auto")for(let Re=0;Re<St.values.length;Re+=2)pt.add(Eg(St.values[Re]));else pt.add(rt);let st=!1;for(const Re of pt)if(!V.horizontal[Re])if(st)V.horizontal[Re]=V.horizontal[0];else{const xt=gp(q,i.glyphMap,i.glyphPositions,i.imagePositions,P,Ye,m,"center",Re,Fe,oe,g.ah.horizontal,!1,O,A);xt&&(V.horizontal[Re]=xt,st=xt.positionedLines.length===1)}_t()}else{rt==="auto"&&(rt=Eg(Je));const pt=gp(q,i.glyphMap,i.glyphPositions,i.imagePositions,P,Ye,m,Je,rt,Fe,oe,g.ah.horizontal,!1,O,A);pt&&(V.horizontal[rt]=pt),_t(),Vc(ye)&&v&&w&&(V.vertical=gp(q,i.glyphMap,i.glyphPositions,i.imagePositions,P,Ye,m,Je,rt,Fe,oe,g.ah.vertical,!1,O,A))}}let ve=!1;if(k.icon&&k.icon.name){const ye=i.imageMap[k.icon.name];ye&&(ee=xk(i.imagePositions[k.icon.name],o.get("icon-offset").evaluate(k,{},i.canonical),o.get("icon-anchor").evaluate(k,{},i.canonical)),ve=!!ye.sdf,i.bucket.sdfIcons===void 0?i.bucket.sdfIcons=ve:i.bucket.sdfIcons!==ve&&Ke("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ye.pixelRatio!==i.bucket.pixelRatio||o.get("icon-rotate").constantOr(1)!==0)&&(i.bucket.iconsNeedLinear=!0))}const de=T1(V.horizontal)||V.vertical;i.bucket.iconsInText=!!de&&de.iconsInText,(de||ee)&&Fk(i.bucket,k,V,ee,i.imageMap,p,O,N,oe,ve,i.canonical)}i.showCollisionBoxes&&i.bucket.generateCollisionDebugBuffers()},g.bo=ug,g.bp=ag,g.bq=lg,g.br=Ya,g.bs=hg,g.bt=class{constructor(i){this._marks={start:[i.url,"start"].join("#"),end:[i.url,"end"].join("#"),measure:i.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let i=performance.getEntriesByName(this._marks.measure);return i.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),i=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),i}},g.bu=function(i,r,o,l,p){return h(this,void 0,void 0,function*(){if(H())try{return yield yt(i,r,o,l,p)}catch{}return function(m,v,w,S,k){const P=m.width,A=m.height;bt&&Et||(bt=new OffscreenCanvas(P,A),Et=bt.getContext("2d",{willReadFrequently:!0})),bt.width=P,bt.height=A,Et.drawImage(m,0,0,P,A);const O=Et.getImageData(v,w,S,k);return Et.clearRect(0,0,P,A),O.data}(i,r,o,l,p)})},g.bv=s1,g.bw=C,g.bx=D,g.by=zv,g.bz=function(i){return i.message===jt},g.c=er,g.d=i=>h(void 0,void 0,void 0,function*(){if(i.byteLength===0)return createImageBitmap(new ImageData(1,1));const r=new Blob([new Uint8Array(i)],{type:"image/png"});try{return createImageBitmap(r)}catch(o){throw new Error(`Could not load image because of ${o.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),g.e=Me,g.f=i=>new Promise((r,o)=>{const l=new Image;l.onload=()=>{r(l),URL.revokeObjectURL(l.src),l.onload=null,window.requestAnimationFrame(()=>{l.src=et})},l.onerror=()=>o(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const p=new Blob([new Uint8Array(i)],{type:"image/png"});l.src=i.byteLength?URL.createObjectURL(p):et}),g.g=hr,g.h=(i,r)=>ao(Me(i,{type:"json"}),r),g.i=nr,g.j=yr,g.k=vn,g.l=(i,r)=>ao(Me(i,{type:"arrayBuffer"}),r),g.m=ao,g.n=function(i){return new hg(i).readFields(pk,[])},g.o=eh,g.p=jv,g.q=d,g.r=$m,g.s=Bi,g.t=Uc,g.u=nt,g.v=ke,g.w=Ke,g.x=$s,g.y=function([i,r,o]){return r+=90,r*=Math.PI/180,o*=Math.PI/180,{x:i*Math.cos(r)*Math.sin(o),y:i*Math.sin(r)*Math.sin(o),z:i*Math.cos(o)}},g.z=Un}),c("worker",["./shared"],function(g){class h{constructor(F){this.keyCache={},F&&this.replace(F)}replace(F){this._layerConfigs={},this._layers={},this.update(F,[])}update(F,B){for(const Q of F){this._layerConfigs[Q.id]=Q;const he=this._layers[Q.id]=g.aA(Q);he._featureFilter=g.a6(he.filter),this.keyCache[Q.id]&&delete this.keyCache[Q.id]}for(const Q of B)delete this.keyCache[Q],delete this._layerConfigs[Q],delete this._layers[Q];this.familiesBySource={};const j=g.bi(Object.values(this._layerConfigs),this.keyCache);for(const Q of j){const he=Q.map(K=>this._layers[K.id]),me=he[0];if(me.visibility==="none")continue;const _e=me.source||"";let ue=this.familiesBySource[_e];ue||(ue=this.familiesBySource[_e]={});const Se=me.sourceLayer||"_geojsonTileLayer";let Z=ue[Se];Z||(Z=ue[Se]=[]),Z.push(he)}}}class C{constructor(F){const B={},j=[];for(const _e in F){const ue=F[_e],Se=B[_e]={};for(const Z in ue){const K=ue[+Z];if(!K||K.bitmap.width===0||K.bitmap.height===0)continue;const Y={x:0,y:0,w:K.bitmap.width+2,h:K.bitmap.height+2};j.push(Y),Se[Z]={rect:Y,metrics:K.metrics}}}const{w:Q,h:he}=g.p(j),me=new g.o({width:Q||1,height:he||1});for(const _e in F){const ue=F[_e];for(const Se in ue){const Z=ue[+Se];if(!Z||Z.bitmap.width===0||Z.bitmap.height===0)continue;const K=B[_e][Se].rect;g.o.copy(Z.bitmap,me,{x:0,y:0},{x:K.x+1,y:K.y+1},Z.bitmap)}}this.image=me,this.positions=B}}g.bj("GlyphAtlas",C);class D{constructor(F){this.tileID=new g.Q(F.tileID.overscaledZ,F.tileID.wrap,F.tileID.canonical.z,F.tileID.canonical.x,F.tileID.canonical.y),this.uid=F.uid,this.zoom=F.zoom,this.pixelRatio=F.pixelRatio,this.tileSize=F.tileSize,this.source=F.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=F.showCollisionBoxes,this.collectResourceTiming=!!F.collectResourceTiming,this.returnDependencies=!!F.returnDependencies,this.promoteId=F.promoteId,this.inFlightDependencies=[]}parse(F,B,j,Q){return g._(this,void 0,void 0,function*(){this.status="parsing",this.data=F,this.collisionBoxArray=new g.a4;const he=new g.bk(Object.keys(F.layers).sort()),me=new g.bl(this.tileID,this.promoteId);me.bucketLayerIDs=[];const _e={},ue={featureIndex:me,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:j},Se=B.familiesBySource[this.source];for(const ct in Se){const kt=F.layers[ct];if(!kt)continue;kt.version===1&&g.w(`Vector tile source "${this.source}" layer "${ct}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Bt=he.encode(ct),Ut=[];for(let sr=0;sr<kt.length;sr++){const Wt=kt.feature(sr),Ei=me.getId(Wt,ct);Ut.push({feature:Wt,id:Ei,index:sr,sourceLayerIndex:Bt})}for(const sr of Se[ct]){const Wt=sr[0];Wt.source!==this.source&&g.w(`layer.source = ${Wt.source} does not equal this.source = ${this.source}`),Wt.minzoom&&this.zoom<Math.floor(Wt.minzoom)||Wt.maxzoom&&this.zoom>=Wt.maxzoom||Wt.visibility!=="none"&&($(sr,this.zoom,j),(_e[Wt.id]=Wt.createBucket({index:me.bucketLayerIDs.length,layers:sr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Bt,sourceID:this.source})).populate(Ut,ue,this.tileID.canonical),me.bucketLayerIDs.push(sr.map(Ei=>Ei.id)))}}const Z=g.aF(ue.glyphDependencies,ct=>Object.keys(ct).map(Number));this.inFlightDependencies.forEach(ct=>ct==null?void 0:ct.abort()),this.inFlightDependencies=[];let K=Promise.resolve({});if(Object.keys(Z).length){const ct=new AbortController;this.inFlightDependencies.push(ct),K=Q.sendAsync({type:"GG",data:{stacks:Z,source:this.source,tileID:this.tileID,type:"glyphs"}},ct)}const Y=Object.keys(ue.iconDependencies);let xe=Promise.resolve({});if(Y.length){const ct=new AbortController;this.inFlightDependencies.push(ct),xe=Q.sendAsync({type:"GI",data:{icons:Y,source:this.source,tileID:this.tileID,type:"icons"}},ct)}const Le=Object.keys(ue.patternDependencies);let We=Promise.resolve({});if(Le.length){const ct=new AbortController;this.inFlightDependencies.push(ct),We=Q.sendAsync({type:"GI",data:{icons:Le,source:this.source,tileID:this.tileID,type:"patterns"}},ct)}const[He,Oe,mt]=yield Promise.all([K,xe,We]),ot=new C(He),dt=new g.bm(Oe,mt);for(const ct in _e){const kt=_e[ct];kt instanceof g.a5?($(kt.layers,this.zoom,j),g.bn({bucket:kt,glyphMap:He,glyphPositions:ot.positions,imageMap:Oe,imagePositions:dt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):kt.hasPattern&&(kt instanceof g.bo||kt instanceof g.bp||kt instanceof g.bq)&&($(kt.layers,this.zoom,j),kt.addFeatures(ue,this.tileID.canonical,dt.patternPositions))}return this.status="done",{buckets:Object.values(_e).filter(ct=>!ct.isEmpty()),featureIndex:me,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ot.image,imageAtlas:dt,glyphMap:this.returnDependencies?He:null,iconMap:this.returnDependencies?Oe:null,glyphPositions:this.returnDependencies?ot.positions:null}})}}function $(G,F,B){const j=new g.a8(F);for(const Q of G)Q.recalculate(j,B)}class M{constructor(F,B,j){this.actor=F,this.layerIndex=B,this.availableImages=j,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(F,B){return g._(this,void 0,void 0,function*(){const j=yield g.l(F.request,B);try{return{vectorTile:new g.br.VectorTile(new g.bs(j.data)),rawData:j.data,cacheControl:j.cacheControl,expires:j.expires}}catch(Q){const he=new Uint8Array(j.data);let me=`Unable to parse the tile at ${F.request.url}, `;throw me+=he[0]===31&&he[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Q.message}`,new Error(me)}})}loadTile(F){return g._(this,void 0,void 0,function*(){const B=F.uid,j=!!(F&&F.request&&F.request.collectResourceTiming)&&new g.bt(F.request),Q=new D(F);this.loading[B]=Q;const he=new AbortController;Q.abort=he;try{const me=yield this.loadVectorTile(F,he);if(delete this.loading[B],!me)return null;const _e=me.rawData,ue={};me.expires&&(ue.expires=me.expires),me.cacheControl&&(ue.cacheControl=me.cacheControl);const Se={};if(j){const K=j.finish();K&&(Se.resourceTiming=JSON.parse(JSON.stringify(K)))}Q.vectorTile=me.vectorTile;const Z=Q.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[B]=Q,this.fetching[B]={rawTileData:_e,cacheControl:ue,resourceTiming:Se};try{const K=yield Z;return g.e({rawTileData:_e.slice(0)},K,ue,Se)}finally{delete this.fetching[B]}}catch(me){throw delete this.loading[B],Q.status="done",this.loaded[B]=Q,me}})}reloadTile(F){return g._(this,void 0,void 0,function*(){const B=F.uid;if(!this.loaded||!this.loaded[B])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const j=this.loaded[B];if(j.showCollisionBoxes=F.showCollisionBoxes,j.status==="parsing"){const Q=yield j.parse(j.vectorTile,this.layerIndex,this.availableImages,this.actor);let he;if(this.fetching[B]){const{rawTileData:me,cacheControl:_e,resourceTiming:ue}=this.fetching[B];delete this.fetching[B],he=g.e({rawTileData:me.slice(0)},Q,_e,ue)}else he=Q;return he}if(j.status==="done"&&j.vectorTile)return j.parse(j.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(F){return g._(this,void 0,void 0,function*(){const B=this.loading,j=F.uid;B&&B[j]&&B[j].abort&&(B[j].abort.abort(),delete B[j])})}removeTile(F){return g._(this,void 0,void 0,function*(){this.loaded&&this.loaded[F.uid]&&delete this.loaded[F.uid]})}}class L{constructor(){this.loaded={}}loadTile(F){return g._(this,void 0,void 0,function*(){const{uid:B,encoding:j,rawImageData:Q,redFactor:he,greenFactor:me,blueFactor:_e,baseShift:ue}=F,Se=Q.width+2,Z=Q.height+2,K=g.b(Q)?new g.R({width:Se,height:Z},yield g.bu(Q,-1,-1,Se,Z)):Q,Y=new g.bv(B,K,j,he,me,_e,ue);return this.loaded=this.loaded||{},this.loaded[B]=Y,Y})}removeTile(F){const B=this.loaded,j=F.uid;B&&B[j]&&delete B[j]}}function ce(G,F){if(G.length!==0){pe(G[0],F);for(var B=1;B<G.length;B++)pe(G[B],!F)}}function pe(G,F){for(var B=0,j=0,Q=0,he=G.length,me=he-1;Q<he;me=Q++){var _e=(G[Q][0]-G[me][0])*(G[me][1]+G[Q][1]),ue=B+_e;j+=Math.abs(B)>=Math.abs(_e)?B-ue+_e:_e-ue+B,B=ue}B+j>=0!=!!F&&G.reverse()}var se=g.bw(function G(F,B){var j,Q=F&&F.type;if(Q==="FeatureCollection")for(j=0;j<F.features.length;j++)G(F.features[j],B);else if(Q==="GeometryCollection")for(j=0;j<F.geometries.length;j++)G(F.geometries[j],B);else if(Q==="Feature")G(F.geometry,B);else if(Q==="Polygon")ce(F.coordinates,B);else if(Q==="MultiPolygon")for(j=0;j<F.coordinates.length;j++)ce(F.coordinates[j],B);return F});const Ee=g.br.VectorTileFeature.prototype.toGeoJSON;var te={exports:{}},H=g.bx,ne=g.br.VectorTileFeature,be=Ae;function Ae(G,F){this.options=F||{},this.features=G,this.length=G.length}function le(G,F){this.id=typeof G.id=="number"?G.id:void 0,this.type=G.type,this.rawGeometry=G.type===1?[G.geometry]:G.geometry,this.properties=G.tags,this.extent=F||4096}Ae.prototype.feature=function(G){return new le(this.features[G],this.options.extent)},le.prototype.loadGeometry=function(){var G=this.rawGeometry;this.geometry=[];for(var F=0;F<G.length;F++){for(var B=G[F],j=[],Q=0;Q<B.length;Q++)j.push(new H(B[Q][0],B[Q][1]));this.geometry.push(j)}return this.geometry},le.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var G=this.geometry,F=1/0,B=-1/0,j=1/0,Q=-1/0,he=0;he<G.length;he++)for(var me=G[he],_e=0;_e<me.length;_e++){var ue=me[_e];F=Math.min(F,ue.x),B=Math.max(B,ue.x),j=Math.min(j,ue.y),Q=Math.max(Q,ue.y)}return[F,j,B,Q]},le.prototype.toGeoJSON=ne.prototype.toGeoJSON;var Me=g.by,$e=be;function Ie(G){var F=new Me;return function(B,j){for(var Q in B.layers)j.writeMessage(3,ze,B.layers[Q])}(G,F),F.finish()}function ze(G,F){var B;F.writeVarintField(15,G.version||1),F.writeStringField(1,G.name||""),F.writeVarintField(5,G.extent||4096);var j={keys:[],values:[],keycache:{},valuecache:{}};for(B=0;B<G.length;B++)j.feature=G.feature(B),F.writeMessage(2,Be,j);var Q=j.keys;for(B=0;B<Q.length;B++)F.writeStringField(3,Q[B]);var he=j.values;for(B=0;B<he.length;B++)F.writeMessage(4,Kt,he[B])}function Be(G,F){var B=G.feature;B.id!==void 0&&F.writeVarintField(1,B.id),F.writeMessage(2,ut,G),F.writeVarintField(3,B.type),F.writeMessage(4,nr,B)}function ut(G,F){var B=G.feature,j=G.keys,Q=G.values,he=G.keycache,me=G.valuecache;for(var _e in B.properties){var ue=B.properties[_e],Se=he[_e];if(ue!==null){Se===void 0&&(j.push(_e),he[_e]=Se=j.length-1),F.writeVarint(Se);var Z=typeof ue;Z!=="string"&&Z!=="boolean"&&Z!=="number"&&(ue=JSON.stringify(ue));var K=Z+":"+ue,Y=me[K];Y===void 0&&(Q.push(ue),me[K]=Y=Q.length-1),F.writeVarint(Y)}}}function Ke(G,F){return(F<<3)+(7&G)}function Qe(G){return G<<1^G>>31}function nr(G,F){for(var B=G.loadGeometry(),j=G.type,Q=0,he=0,me=B.length,_e=0;_e<me;_e++){var ue=B[_e],Se=1;j===1&&(Se=ue.length),F.writeVarint(Ke(1,Se));for(var Z=j===3?ue.length-1:ue.length,K=0;K<Z;K++){K===1&&j!==1&&F.writeVarint(Ke(2,Z-1));var Y=ue[K].x-Q,xe=ue[K].y-he;F.writeVarint(Qe(Y)),F.writeVarint(Qe(xe)),Q+=Y,he+=xe}j===3&&F.writeVarint(Ke(7,1))}}function Kt(G,F){var B=typeof G;B==="string"?F.writeStringField(1,G):B==="boolean"?F.writeBooleanField(7,G):B==="number"&&(G%1!=0?F.writeDoubleField(3,G):G<0?F.writeSVarintField(6,G):F.writeVarintField(5,G))}te.exports=Ie,te.exports.fromVectorTileJs=Ie,te.exports.fromGeojsonVt=function(G,F){F=F||{};var B={};for(var j in G)B[j]=new $e(G[j].features,F),B[j].name=j,B[j].version=F.version,B[j].extent=F.extent;return Ie({layers:B})},te.exports.GeoJSONWrapper=$e;var Ft=g.bw(te.exports);const et={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:G=>G},yt=Math.fround||(bt=new Float32Array(1),G=>(bt[0]=+G,bt[0]));var bt;const Et=3,jt=5,er=6;class cr{constructor(F){this.options=Object.assign(Object.create(et),F),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(F){const{log:B,minZoom:j,maxZoom:Q}=this.options;B&&console.time("total time");const he=`prepare ${F.length} points`;B&&console.time(he),this.points=F;const me=[];for(let ue=0;ue<F.length;ue++){const Se=F[ue];if(!Se.geometry)continue;const[Z,K]=Se.geometry.coordinates,Y=yt(en(Z)),xe=yt(En(K));me.push(Y,xe,1/0,ue,-1,1),this.options.reduce&&me.push(0)}let _e=this.trees[Q+1]=this._createTree(me);B&&console.timeEnd(he);for(let ue=Q;ue>=j;ue--){const Se=+Date.now();_e=this.trees[ue]=this._createTree(this._cluster(_e,ue)),B&&console.log("z%d: %d clusters in %dms",ue,_e.numItems,+Date.now()-Se)}return B&&console.timeEnd("total time"),this}getClusters(F,B){let j=((F[0]+180)%360+360)%360-180;const Q=Math.max(-90,Math.min(90,F[1]));let he=F[2]===180?180:((F[2]+180)%360+360)%360-180;const me=Math.max(-90,Math.min(90,F[3]));if(F[2]-F[0]>=360)j=-180,he=180;else if(j>he){const K=this.getClusters([j,Q,180,me],B),Y=this.getClusters([-180,Q,he,me],B);return K.concat(Y)}const _e=this.trees[this._limitZoom(B)],ue=_e.range(en(j),En(me),en(he),En(Q)),Se=_e.data,Z=[];for(const K of ue){const Y=this.stride*K;Z.push(Se[Y+jt]>1?hr(Se,Y,this.clusterProps):this.points[Se[Y+Et]])}return Z}getChildren(F){const B=this._getOriginId(F),j=this._getOriginZoom(F),Q="No cluster with the specified id.",he=this.trees[j];if(!he)throw new Error(Q);const me=he.data;if(B*this.stride>=me.length)throw new Error(Q);const _e=this.options.radius/(this.options.extent*Math.pow(2,j-1)),ue=he.within(me[B*this.stride],me[B*this.stride+1],_e),Se=[];for(const Z of ue){const K=Z*this.stride;me[K+4]===F&&Se.push(me[K+jt]>1?hr(me,K,this.clusterProps):this.points[me[K+Et]])}if(Se.length===0)throw new Error(Q);return Se}getLeaves(F,B,j){const Q=[];return this._appendLeaves(Q,F,B=B||10,j=j||0,0),Q}getTile(F,B,j){const Q=this.trees[this._limitZoom(F)],he=Math.pow(2,F),{extent:me,radius:_e}=this.options,ue=_e/me,Se=(j-ue)/he,Z=(j+1+ue)/he,K={features:[]};return this._addTileFeatures(Q.range((B-ue)/he,Se,(B+1+ue)/he,Z),Q.data,B,j,he,K),B===0&&this._addTileFeatures(Q.range(1-ue/he,Se,1,Z),Q.data,he,j,he,K),B===he-1&&this._addTileFeatures(Q.range(0,Se,ue/he,Z),Q.data,-1,j,he,K),K.features.length?K:null}getClusterExpansionZoom(F){let B=this._getOriginZoom(F)-1;for(;B<=this.options.maxZoom;){const j=this.getChildren(F);if(B++,j.length!==1)break;F=j[0].properties.cluster_id}return B}_appendLeaves(F,B,j,Q,he){const me=this.getChildren(B);for(const _e of me){const ue=_e.properties;if(ue&&ue.cluster?he+ue.point_count<=Q?he+=ue.point_count:he=this._appendLeaves(F,ue.cluster_id,j,Q,he):he<Q?he++:F.push(_e),F.length===j)break}return he}_createTree(F){const B=new g.av(F.length/this.stride|0,this.options.nodeSize,Float32Array);for(let j=0;j<F.length;j+=this.stride)B.add(F[j],F[j+1]);return B.finish(),B.data=F,B}_addTileFeatures(F,B,j,Q,he,me){for(const _e of F){const ue=_e*this.stride,Se=B[ue+jt]>1;let Z,K,Y;if(Se)Z=gr(B,ue,this.clusterProps),K=B[ue],Y=B[ue+1];else{const We=this.points[B[ue+Et]];Z=We.properties;const[He,Oe]=We.geometry.coordinates;K=en(He),Y=En(Oe)}const xe={type:1,geometry:[[Math.round(this.options.extent*(K*he-j)),Math.round(this.options.extent*(Y*he-Q))]],tags:Z};let Le;Le=Se||this.options.generateId?B[ue+Et]:this.points[B[ue+Et]].id,Le!==void 0&&(xe.id=Le),me.features.push(xe)}}_limitZoom(F){return Math.max(this.options.minZoom,Math.min(Math.floor(+F),this.options.maxZoom+1))}_cluster(F,B){const{radius:j,extent:Q,reduce:he,minPoints:me}=this.options,_e=j/(Q*Math.pow(2,B)),ue=F.data,Se=[],Z=this.stride;for(let K=0;K<ue.length;K+=Z){if(ue[K+2]<=B)continue;ue[K+2]=B;const Y=ue[K],xe=ue[K+1],Le=F.within(ue[K],ue[K+1],_e),We=ue[K+jt];let He=We;for(const Oe of Le){const mt=Oe*Z;ue[mt+2]>B&&(He+=ue[mt+jt])}if(He>We&&He>=me){let Oe,mt=Y*We,ot=xe*We,dt=-1;const ct=((K/Z|0)<<5)+(B+1)+this.points.length;for(const kt of Le){const Bt=kt*Z;if(ue[Bt+2]<=B)continue;ue[Bt+2]=B;const Ut=ue[Bt+jt];mt+=ue[Bt]*Ut,ot+=ue[Bt+1]*Ut,ue[Bt+4]=ct,he&&(Oe||(Oe=this._map(ue,K,!0),dt=this.clusterProps.length,this.clusterProps.push(Oe)),he(Oe,this._map(ue,Bt)))}ue[K+4]=ct,Se.push(mt/He,ot/He,1/0,ct,-1,He),he&&Se.push(dt)}else{for(let Oe=0;Oe<Z;Oe++)Se.push(ue[K+Oe]);if(He>1)for(const Oe of Le){const mt=Oe*Z;if(!(ue[mt+2]<=B)){ue[mt+2]=B;for(let ot=0;ot<Z;ot++)Se.push(ue[mt+ot])}}}}return Se}_getOriginId(F){return F-this.points.length>>5}_getOriginZoom(F){return(F-this.points.length)%32}_map(F,B,j){if(F[B+jt]>1){const me=this.clusterProps[F[B+er]];return j?Object.assign({},me):me}const Q=this.points[F[B+Et]].properties,he=this.options.map(Q);return j&&he===Q?Object.assign({},he):he}}function hr(G,F,B){return{type:"Feature",id:G[F+Et],properties:gr(G,F,B),geometry:{type:"Point",coordinates:[(j=G[F],360*(j-.5)),ao(G[F+1])]}};var j}function gr(G,F,B){const j=G[F+jt],Q=j>=1e4?`${Math.round(j/1e3)}k`:j>=1e3?Math.round(j/100)/10+"k":j,he=G[F+er],me=he===-1?{}:Object.assign({},B[he]);return Object.assign(me,{cluster:!0,cluster_id:G[F+Et],point_count:j,point_count_abbreviated:Q})}function en(G){return G/360+.5}function En(G){const F=Math.sin(G*Math.PI/180),B=.5-.25*Math.log((1+F)/(1-F))/Math.PI;return B<0?0:B>1?1:B}function ao(G){const F=(180-360*G)*Math.PI/180;return 360*Math.atan(Math.exp(F))/Math.PI-90}function Bi(G,F,B,j){for(var Q,he=j,me=B-F>>1,_e=B-F,ue=G[F],Se=G[F+1],Z=G[B],K=G[B+1],Y=F+3;Y<B;Y+=3){var xe=Uo(G[Y],G[Y+1],ue,Se,Z,K);if(xe>he)Q=Y,he=xe;else if(xe===he){var Le=Math.abs(Y-me);Le<_e&&(Q=Y,_e=Le)}}he>j&&(Q-F>3&&Bi(G,F,Q,j),G[Q+2]=he,B-Q>3&&Bi(G,Q,B,j))}function Uo(G,F,B,j,Q,he){var me=Q-B,_e=he-j;if(me!==0||_e!==0){var ue=((G-B)*me+(F-j)*_e)/(me*me+_e*_e);ue>1?(B=Q,j=he):ue>0&&(B+=me*ue,j+=_e*ue)}return(me=G-B)*me+(_e=F-j)*_e}function dr(G,F,B,j){var Q={id:G===void 0?null:G,type:F,geometry:B,tags:j,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(he){var me=he.geometry,_e=he.type;if(_e==="Point"||_e==="MultiPoint"||_e==="LineString")vn(he,me);else if(_e==="Polygon"||_e==="MultiLineString")for(var ue=0;ue<me.length;ue++)vn(he,me[ue]);else if(_e==="MultiPolygon")for(ue=0;ue<me.length;ue++)for(var Se=0;Se<me[ue].length;Se++)vn(he,me[ue][Se])}(Q),Q}function vn(G,F){for(var B=0;B<F.length;B+=3)G.minX=Math.min(G.minX,F[B]),G.minY=Math.min(G.minY,F[B+1]),G.maxX=Math.max(G.maxX,F[B]),G.maxY=Math.max(G.maxY,F[B+1])}function yr(G,F,B,j){if(F.geometry){var Q=F.geometry.coordinates,he=F.geometry.type,me=Math.pow(B.tolerance/((1<<B.maxZoom)*B.extent),2),_e=[],ue=F.id;if(B.promoteId?ue=F.properties[B.promoteId]:B.generateId&&(ue=j||0),he==="Point")Ni(Q,_e);else if(he==="MultiPoint")for(var Se=0;Se<Q.length;Se++)Ni(Q[Se],_e);else if(he==="LineString")ke(Q,_e,me,!1);else if(he==="MultiLineString"){if(B.lineMetrics){for(Se=0;Se<Q.length;Se++)ke(Q[Se],_e=[],me,!1),G.push(dr(ue,"LineString",_e,F.properties));return}ui(Q,_e,me,!1)}else if(he==="Polygon")ui(Q,_e,me,!0);else{if(he!=="MultiPolygon"){if(he==="GeometryCollection"){for(Se=0;Se<F.geometry.geometries.length;Se++)yr(G,{id:ue,geometry:F.geometry.geometries[Se],properties:F.properties},B,j);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Se=0;Se<Q.length;Se++){var Z=[];ui(Q[Se],Z,me,!0),_e.push(Z)}}G.push(dr(ue,he,_e,F.properties))}}function Ni(G,F){F.push(xn(G[0])),F.push(Dt(G[1])),F.push(0)}function ke(G,F,B,j){for(var Q,he,me=0,_e=0;_e<G.length;_e++){var ue=xn(G[_e][0]),Se=Dt(G[_e][1]);F.push(ue),F.push(Se),F.push(0),_e>0&&(me+=j?(Q*Se-ue*he)/2:Math.sqrt(Math.pow(ue-Q,2)+Math.pow(Se-he,2))),Q=ue,he=Se}var Z=F.length-3;F[2]=1,Bi(F,0,Z,B),F[Z+2]=1,F.size=Math.abs(me),F.start=0,F.end=F.size}function ui(G,F,B,j){for(var Q=0;Q<G.length;Q++){var he=[];ke(G[Q],he,B,j),F.push(he)}}function xn(G){return G/360+.5}function Dt(G){var F=Math.sin(G*Math.PI/180),B=.5-.25*Math.log((1+F)/(1-F))/Math.PI;return B<0?0:B>1?1:B}function Xt(G,F,B,j,Q,he,me,_e){if(j/=F,he>=(B/=F)&&me<j)return G;if(me<B||he>=j)return null;for(var ue=[],Se=0;Se<G.length;Se++){var Z=G[Se],K=Z.geometry,Y=Z.type,xe=Q===0?Z.minX:Z.minY,Le=Q===0?Z.maxX:Z.maxY;if(xe>=B&&Le<j)ue.push(Z);else if(!(Le<B||xe>=j)){var We=[];if(Y==="Point"||Y==="MultiPoint")Xn(K,We,B,j,Q);else if(Y==="LineString")ji(K,We,B,j,Q,!1,_e.lineMetrics);else if(Y==="MultiLineString")dn(K,We,B,j,Q,!1);else if(Y==="Polygon")dn(K,We,B,j,Q,!0);else if(Y==="MultiPolygon")for(var He=0;He<K.length;He++){var Oe=[];dn(K[He],Oe,B,j,Q,!0),Oe.length&&We.push(Oe)}if(We.length){if(_e.lineMetrics&&Y==="LineString"){for(He=0;He<We.length;He++)ue.push(dr(Z.id,Y,We[He],Z.tags));continue}Y!=="LineString"&&Y!=="MultiLineString"||(We.length===1?(Y="LineString",We=We[0]):Y="MultiLineString"),Y!=="Point"&&Y!=="MultiPoint"||(Y=We.length===3?"Point":"MultiPoint"),ue.push(dr(Z.id,Y,We,Z.tags))}}}return ue.length?ue:null}function Xn(G,F,B,j,Q){for(var he=0;he<G.length;he+=3){var me=G[he+Q];me>=B&&me<=j&&(F.push(G[he]),F.push(G[he+1]),F.push(G[he+2]))}}function ji(G,F,B,j,Q,he,me){for(var _e,ue,Se=qr(G),Z=Q===0?pn:Ti,K=G.start,Y=0;Y<G.length-3;Y+=3){var xe=G[Y],Le=G[Y+1],We=G[Y+2],He=G[Y+3],Oe=G[Y+4],mt=Q===0?xe:Le,ot=Q===0?He:Oe,dt=!1;me&&(_e=Math.sqrt(Math.pow(xe-He,2)+Math.pow(Le-Oe,2))),mt<B?ot>B&&(ue=Z(Se,xe,Le,He,Oe,B),me&&(Se.start=K+_e*ue)):mt>j?ot<j&&(ue=Z(Se,xe,Le,He,Oe,j),me&&(Se.start=K+_e*ue)):tn(Se,xe,Le,We),ot<B&&mt>=B&&(ue=Z(Se,xe,Le,He,Oe,B),dt=!0),ot>j&&mt<=j&&(ue=Z(Se,xe,Le,He,Oe,j),dt=!0),!he&&dt&&(me&&(Se.end=K+_e*ue),F.push(Se),Se=qr(G)),me&&(K+=_e)}var ct=G.length-3;xe=G[ct],Le=G[ct+1],We=G[ct+2],(mt=Q===0?xe:Le)>=B&&mt<=j&&tn(Se,xe,Le,We),ct=Se.length-3,he&&ct>=3&&(Se[ct]!==Se[0]||Se[ct+1]!==Se[1])&&tn(Se,Se[0],Se[1],Se[2]),Se.length&&F.push(Se)}function qr(G){var F=[];return F.size=G.size,F.start=G.start,F.end=G.end,F}function dn(G,F,B,j,Q,he){for(var me=0;me<G.length;me++)ji(G[me],F,B,j,Q,he,!1)}function tn(G,F,B,j){G.push(F),G.push(B),G.push(j)}function pn(G,F,B,j,Q,he){var me=(he-F)/(j-F);return G.push(he),G.push(B+(Q-B)*me),G.push(1),me}function Ti(G,F,B,j,Q,he){var me=(he-B)/(Q-B);return G.push(F+(j-F)*me),G.push(he),G.push(1),me}function je(G,F){for(var B=[],j=0;j<G.length;j++){var Q,he=G[j],me=he.type;if(me==="Point"||me==="MultiPoint"||me==="LineString")Q=br(he.geometry,F);else if(me==="MultiLineString"||me==="Polygon"){Q=[];for(var _e=0;_e<he.geometry.length;_e++)Q.push(br(he.geometry[_e],F))}else if(me==="MultiPolygon")for(Q=[],_e=0;_e<he.geometry.length;_e++){for(var ue=[],Se=0;Se<he.geometry[_e].length;Se++)ue.push(br(he.geometry[_e][Se],F));Q.push(ue)}B.push(dr(he.id,me,Q,he.tags))}return B}function br(G,F){var B=[];B.size=G.size,G.start!==void 0&&(B.start=G.start,B.end=G.end);for(var j=0;j<G.length;j+=3)B.push(G[j]+F,G[j+1],G[j+2]);return B}function Zr(G,F){if(G.transformed)return G;var B,j,Q,he=1<<G.z,me=G.x,_e=G.y;for(B=0;B<G.features.length;B++){var ue=G.features[B],Se=ue.geometry,Z=ue.type;if(ue.geometry=[],Z===1)for(j=0;j<Se.length;j+=2)ue.geometry.push(ci(Se[j],Se[j+1],F,he,me,_e));else for(j=0;j<Se.length;j++){var K=[];for(Q=0;Q<Se[j].length;Q+=2)K.push(ci(Se[j][Q],Se[j][Q+1],F,he,me,_e));ue.geometry.push(K)}}return G.transformed=!0,G}function ci(G,F,B,j,Q,he){return[Math.round(B*(G*j-Q)),Math.round(B*(F*j-he))]}function Ui(G,F,B,j,Q){for(var he=F===Q.maxZoom?0:Q.tolerance/((1<<F)*Q.extent),me={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:B,y:j,z:F,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},_e=0;_e<G.length;_e++){me.numFeatures++,Ne(me,G[_e],he,Q);var ue=G[_e].minX,Se=G[_e].minY,Z=G[_e].maxX,K=G[_e].maxY;ue<me.minX&&(me.minX=ue),Se<me.minY&&(me.minY=Se),Z>me.maxX&&(me.maxX=Z),K>me.maxY&&(me.maxY=K)}return me}function Ne(G,F,B,j){var Q=F.geometry,he=F.type,me=[];if(he==="Point"||he==="MultiPoint")for(var _e=0;_e<Q.length;_e+=3)me.push(Q[_e]),me.push(Q[_e+1]),G.numPoints++,G.numSimplified++;else if(he==="LineString")Rt(me,Q,G,B,!1,!1);else if(he==="MultiLineString"||he==="Polygon")for(_e=0;_e<Q.length;_e++)Rt(me,Q[_e],G,B,he==="Polygon",_e===0);else if(he==="MultiPolygon")for(var ue=0;ue<Q.length;ue++){var Se=Q[ue];for(_e=0;_e<Se.length;_e++)Rt(me,Se[_e],G,B,!0,_e===0)}if(me.length){var Z=F.tags||null;if(he==="LineString"&&j.lineMetrics){for(var K in Z={},F.tags)Z[K]=F.tags[K];Z.mapbox_clip_start=Q.start/Q.size,Z.mapbox_clip_end=Q.end/Q.size}var Y={geometry:me,type:he==="Polygon"||he==="MultiPolygon"?3:he==="LineString"||he==="MultiLineString"?2:1,tags:Z};F.id!==null&&(Y.id=F.id),G.features.push(Y)}}function Rt(G,F,B,j,Q,he){var me=j*j;if(j>0&&F.size<(Q?me:j))B.numPoints+=F.length/3;else{for(var _e=[],ue=0;ue<F.length;ue+=3)(j===0||F[ue+2]>me)&&(B.numSimplified++,_e.push(F[ue]),_e.push(F[ue+1])),B.numPoints++;Q&&function(Se,Z){for(var K=0,Y=0,xe=Se.length,Le=xe-2;Y<xe;Le=Y,Y+=2)K+=(Se[Y]-Se[Le])*(Se[Y+1]+Se[Le+1]);if(K>0===Z)for(Y=0,xe=Se.length;Y<xe/2;Y+=2){var We=Se[Y],He=Se[Y+1];Se[Y]=Se[xe-2-Y],Se[Y+1]=Se[xe-1-Y],Se[xe-2-Y]=We,Se[xe-1-Y]=He}}(_e,he),G.push(_e)}}function Ct(G,F){var B=(F=this.options=function(Q,he){for(var me in he)Q[me]=he[me];return Q}(Object.create(this.options),F)).debug;if(B&&console.time("preprocess data"),F.maxZoom<0||F.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(F.promoteId&&F.generateId)throw new Error("promoteId and generateId cannot be used together.");var j=function(Q,he){var me=[];if(Q.type==="FeatureCollection")for(var _e=0;_e<Q.features.length;_e++)yr(me,Q.features[_e],he,_e);else yr(me,Q.type==="Feature"?Q:{geometry:Q},he);return me}(G,F);this.tiles={},this.tileCoords=[],B&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",F.indexMaxZoom,F.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),j=function(Q,he){var me=he.buffer/he.extent,_e=Q,ue=Xt(Q,1,-1-me,me,0,-1,2,he),Se=Xt(Q,1,1-me,2+me,0,-1,2,he);return(ue||Se)&&(_e=Xt(Q,1,-me,1+me,0,-1,2,he)||[],ue&&(_e=je(ue,1).concat(_e)),Se&&(_e=_e.concat(je(Se,-1)))),_e}(j,F),j.length&&this.splitTile(j,0,0,0),B&&(j.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function rn(G,F,B){return 32*((1<<G)*B+F)+G}function nn(G,F){return F?G.properties[F]:G.id}function zt(G,F){if(G==null)return!0;if(G.type==="Feature")return nn(G,F)!=null;if(G.type==="FeatureCollection"){const B=new Set;for(const j of G.features){const Q=nn(j,F);if(Q==null||B.has(Q))return!1;B.add(Q)}return!0}return!1}function kn(G,F){const B=new Map;if(G!=null)if(G.type==="Feature")B.set(nn(G,F),G);else for(const j of G.features)B.set(nn(j,F),j);return B}Ct.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ct.prototype.splitTile=function(G,F,B,j,Q,he,me){for(var _e=[G,F,B,j],ue=this.options,Se=ue.debug;_e.length;){j=_e.pop(),B=_e.pop(),F=_e.pop(),G=_e.pop();var Z=1<<F,K=rn(F,B,j),Y=this.tiles[K];if(!Y&&(Se>1&&console.time("creation"),Y=this.tiles[K]=Ui(G,F,B,j,ue),this.tileCoords.push({z:F,x:B,y:j}),Se)){Se>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",F,B,j,Y.numFeatures,Y.numPoints,Y.numSimplified),console.timeEnd("creation"));var xe="z"+F;this.stats[xe]=(this.stats[xe]||0)+1,this.total++}if(Y.source=G,Q){if(F===ue.maxZoom||F===Q)continue;var Le=1<<Q-F;if(B!==Math.floor(he/Le)||j!==Math.floor(me/Le))continue}else if(F===ue.indexMaxZoom||Y.numPoints<=ue.indexMaxPoints)continue;if(Y.source=null,G.length!==0){Se>1&&console.time("clipping");var We,He,Oe,mt,ot,dt,ct=.5*ue.buffer/ue.extent,kt=.5-ct,Bt=.5+ct,Ut=1+ct;We=He=Oe=mt=null,ot=Xt(G,Z,B-ct,B+Bt,0,Y.minX,Y.maxX,ue),dt=Xt(G,Z,B+kt,B+Ut,0,Y.minX,Y.maxX,ue),G=null,ot&&(We=Xt(ot,Z,j-ct,j+Bt,1,Y.minY,Y.maxY,ue),He=Xt(ot,Z,j+kt,j+Ut,1,Y.minY,Y.maxY,ue),ot=null),dt&&(Oe=Xt(dt,Z,j-ct,j+Bt,1,Y.minY,Y.maxY,ue),mt=Xt(dt,Z,j+kt,j+Ut,1,Y.minY,Y.maxY,ue),dt=null),Se>1&&console.timeEnd("clipping"),_e.push(We||[],F+1,2*B,2*j),_e.push(He||[],F+1,2*B,2*j+1),_e.push(Oe||[],F+1,2*B+1,2*j),_e.push(mt||[],F+1,2*B+1,2*j+1)}}},Ct.prototype.getTile=function(G,F,B){var j=this.options,Q=j.extent,he=j.debug;if(G<0||G>24)return null;var me=1<<G,_e=rn(G,F=(F%me+me)%me,B);if(this.tiles[_e])return Zr(this.tiles[_e],Q);he>1&&console.log("drilling down to z%d-%d-%d",G,F,B);for(var ue,Se=G,Z=F,K=B;!ue&&Se>0;)Se--,Z=Math.floor(Z/2),K=Math.floor(K/2),ue=this.tiles[rn(Se,Z,K)];return ue&&ue.source?(he>1&&console.log("found parent tile z%d-%d-%d",Se,Z,K),he>1&&console.time("drilling down"),this.splitTile(ue.source,Se,Z,K,G,F,B),he>1&&console.timeEnd("drilling down"),this.tiles[_e]?Zr(this.tiles[_e],Q):null):null};class Yn extends M{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(F,B){return g._(this,void 0,void 0,function*(){const j=F.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Q=this._geoJSONIndex.getTile(j.z,j.x,j.y);if(!Q)return null;const he=new class{constructor(_e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=g.W,this.length=_e.length,this._features=_e}feature(_e){return new class{constructor(ue){this._feature=ue,this.extent=g.W,this.type=ue.type,this.properties=ue.tags,"id"in ue&&!isNaN(ue.id)&&(this.id=parseInt(ue.id,10))}loadGeometry(){if(this._feature.type===1){const ue=[];for(const Se of this._feature.geometry)ue.push([new g.P(Se[0],Se[1])]);return ue}{const ue=[];for(const Se of this._feature.geometry){const Z=[];for(const K of Se)Z.push(new g.P(K[0],K[1]));ue.push(Z)}return ue}}toGeoJSON(ue,Se,Z){return Ee.call(this,ue,Se,Z)}}(this._features[_e])}}(Q.features);let me=Ft(he);return me.byteOffset===0&&me.byteLength===me.buffer.byteLength||(me=new Uint8Array(me)),{vectorTile:he,rawData:me.buffer}})}loadData(F){return g._(this,void 0,void 0,function*(){var B;(B=this._pendingRequest)===null||B===void 0||B.abort();const j=!!(F&&F.request&&F.request.collectResourceTiming)&&new g.bt(F.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(F,this._pendingRequest),this._geoJSONIndex=F.cluster?new cr(function({superclusterOptions:he,clusterProperties:me}){if(!me||!he)return he;const _e={},ue={},Se={accumulated:null,zoom:0},Z={properties:null},K=Object.keys(me);for(const Y of K){const[xe,Le]=me[Y],We=g.bA(Le),He=g.bA(typeof xe=="string"?[xe,["accumulated"],["get",Y]]:xe);_e[Y]=We.value,ue[Y]=He.value}return he.map=Y=>{Z.properties=Y;const xe={};for(const Le of K)xe[Le]=_e[Le].evaluate(Se,Z);return xe},he.reduce=(Y,xe)=>{Z.properties=xe;for(const Le of K)Se.accumulated=Y[Le],Y[Le]=ue[Le].evaluate(Se,Z)},he}(F)).load((yield this._pendingData).features):new Ct(yield this._pendingData,F.geojsonVtOptions),this.loaded={};const Q={};if(j){const he=j.finish();he&&(Q.resourceTiming={},Q.resourceTiming[F.source]=JSON.parse(JSON.stringify(he)))}return Q}catch(Q){if(delete this._pendingRequest,g.bz(Q))return{abandoned:!0};throw Q}})}getData(){return g._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(F){const B=this.loaded;return B&&B[F.uid]?super.reloadTile(F):this.loadTile(F)}loadAndProcessGeoJSON(F,B){return g._(this,void 0,void 0,function*(){let j=yield this.loadGeoJSON(F,B);if(delete this._pendingRequest,typeof j!="object")throw new Error(`Input data given to '${F.source}' is not a valid GeoJSON object.`);if(se(j,!0),F.filter){const Q=g.bA(F.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Q.result==="error")throw new Error(Q.value.map(me=>`${me.key}: ${me.message}`).join(", "));j={type:"FeatureCollection",features:j.features.filter(me=>Q.value.evaluate({zoom:0},me))}}return j})}loadGeoJSON(F,B){return g._(this,void 0,void 0,function*(){const{promoteId:j}=F;if(F.request){const Q=yield g.h(F.request,B);return this._dataUpdateable=zt(Q.data,j)?kn(Q.data,j):void 0,Q.data}if(typeof F.data=="string")try{const Q=JSON.parse(F.data);return this._dataUpdateable=zt(Q,j)?kn(Q,j):void 0,Q}catch{throw new Error(`Input data given to '${F.source}' is not a valid GeoJSON object.`)}if(!F.dataDiff)throw new Error(`Input data given to '${F.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${F.source}`);return function(Q,he,me){var _e,ue,Se,Z;if(he.removeAll&&Q.clear(),he.remove)for(const K of he.remove)Q.delete(K);if(he.add)for(const K of he.add){const Y=nn(K,me);Y!=null&&Q.set(Y,K)}if(he.update)for(const K of he.update){let Y=Q.get(K.id);if(Y==null)continue;const xe=!K.removeAllProperties&&(((_e=K.removeProperties)===null||_e===void 0?void 0:_e.length)>0||((ue=K.addOrUpdateProperties)===null||ue===void 0?void 0:ue.length)>0);if((K.newGeometry||K.removeAllProperties||xe)&&(Y=Object.assign({},Y),Q.set(K.id,Y),xe&&(Y.properties=Object.assign({},Y.properties))),K.newGeometry&&(Y.geometry=K.newGeometry),K.removeAllProperties)Y.properties={};else if(((Se=K.removeProperties)===null||Se===void 0?void 0:Se.length)>0)for(const Le of K.removeProperties)Object.prototype.hasOwnProperty.call(Y.properties,Le)&&delete Y.properties[Le];if(((Z=K.addOrUpdateProperties)===null||Z===void 0?void 0:Z.length)>0)for(const{key:Le,value:We}of K.addOrUpdateProperties)Y.properties[Le]=We}}(this._dataUpdateable,F.dataDiff,j),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(F){return g._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(F){return this._geoJSONIndex.getClusterExpansionZoom(F.clusterId)}getClusterChildren(F){return this._geoJSONIndex.getChildren(F.clusterId)}getClusterLeaves(F){return this._geoJSONIndex.getLeaves(F.clusterId,F.limit,F.offset)}}class Ht{constructor(F){this.self=F,this.actor=new g.C(F),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(B,j)=>{if(this.externalWorkerSourceTypes[B])throw new Error(`Worker source with name "${B}" already registered.`);this.externalWorkerSourceTypes[B]=j},this.self.addProtocol=g.bg,this.self.removeProtocol=g.bh,this.self.registerRTLTextPlugin=B=>{if(g.bB.isParsed())throw new Error("RTL text plugin already registered.");g.bB.setMethods(B)},this.actor.registerMessageHandler("LDT",(B,j)=>this._getDEMWorkerSource(B,j.source).loadTile(j)),this.actor.registerMessageHandler("RDT",(B,j)=>g._(this,void 0,void 0,function*(){this._getDEMWorkerSource(B,j.source).removeTile(j)})),this.actor.registerMessageHandler("GCEZ",(B,j)=>g._(this,void 0,void 0,function*(){return this._getWorkerSource(B,j.type,j.source).getClusterExpansionZoom(j)})),this.actor.registerMessageHandler("GCC",(B,j)=>g._(this,void 0,void 0,function*(){return this._getWorkerSource(B,j.type,j.source).getClusterChildren(j)})),this.actor.registerMessageHandler("GCL",(B,j)=>g._(this,void 0,void 0,function*(){return this._getWorkerSource(B,j.type,j.source).getClusterLeaves(j)})),this.actor.registerMessageHandler("LD",(B,j)=>this._getWorkerSource(B,j.type,j.source).loadData(j)),this.actor.registerMessageHandler("GD",(B,j)=>this._getWorkerSource(B,j.type,j.source).getData()),this.actor.registerMessageHandler("LT",(B,j)=>this._getWorkerSource(B,j.type,j.source).loadTile(j)),this.actor.registerMessageHandler("RT",(B,j)=>this._getWorkerSource(B,j.type,j.source).reloadTile(j)),this.actor.registerMessageHandler("AT",(B,j)=>this._getWorkerSource(B,j.type,j.source).abortTile(j)),this.actor.registerMessageHandler("RMT",(B,j)=>this._getWorkerSource(B,j.type,j.source).removeTile(j)),this.actor.registerMessageHandler("RS",(B,j)=>g._(this,void 0,void 0,function*(){if(!this.workerSources[B]||!this.workerSources[B][j.type]||!this.workerSources[B][j.type][j.source])return;const Q=this.workerSources[B][j.type][j.source];delete this.workerSources[B][j.type][j.source],Q.removeSource!==void 0&&Q.removeSource(j)})),this.actor.registerMessageHandler("RM",B=>g._(this,void 0,void 0,function*(){delete this.layerIndexes[B],delete this.availableImages[B],delete this.workerSources[B],delete this.demWorkerSources[B]})),this.actor.registerMessageHandler("SR",(B,j)=>g._(this,void 0,void 0,function*(){this.referrer=j})),this.actor.registerMessageHandler("SRPS",(B,j)=>this._syncRTLPluginState(B,j)),this.actor.registerMessageHandler("IS",(B,j)=>g._(this,void 0,void 0,function*(){this.self.importScripts(j)})),this.actor.registerMessageHandler("SI",(B,j)=>this._setImages(B,j)),this.actor.registerMessageHandler("UL",(B,j)=>g._(this,void 0,void 0,function*(){this._getLayerIndex(B).update(j.layers,j.removedIds)})),this.actor.registerMessageHandler("SL",(B,j)=>g._(this,void 0,void 0,function*(){this._getLayerIndex(B).replace(j)}))}_setImages(F,B){return g._(this,void 0,void 0,function*(){this.availableImages[F]=B;for(const j in this.workerSources[F]){const Q=this.workerSources[F][j];for(const he in Q)Q[he].availableImages=B}})}_syncRTLPluginState(F,B){return g._(this,void 0,void 0,function*(){if(g.bB.isParsed())return g.bB.getState();if(B.pluginStatus!=="loading")return g.bB.setState(B),B;const j=B.pluginURL;if(this.self.importScripts(j),g.bB.isParsed()){const Q={pluginStatus:"loaded",pluginURL:j};return g.bB.setState(Q),Q}throw g.bB.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${j}`)})}_getAvailableImages(F){let B=this.availableImages[F];return B||(B=[]),B}_getLayerIndex(F){let B=this.layerIndexes[F];return B||(B=this.layerIndexes[F]=new h),B}_getWorkerSource(F,B,j){if(this.workerSources[F]||(this.workerSources[F]={}),this.workerSources[F][B]||(this.workerSources[F][B]={}),!this.workerSources[F][B][j]){const Q={sendAsync:(he,me)=>(he.targetMapId=F,this.actor.sendAsync(he,me))};switch(B){case"vector":this.workerSources[F][B][j]=new M(Q,this._getLayerIndex(F),this._getAvailableImages(F));break;case"geojson":this.workerSources[F][B][j]=new Yn(Q,this._getLayerIndex(F),this._getAvailableImages(F));break;default:this.workerSources[F][B][j]=new this.externalWorkerSourceTypes[B](Q,this._getLayerIndex(F),this._getAvailableImages(F))}}return this.workerSources[F][B][j]}_getDEMWorkerSource(F,B){return this.demWorkerSources[F]||(this.demWorkerSources[F]={}),this.demWorkerSources[F][B]||(this.demWorkerSources[F][B]=new L),this.demWorkerSources[F][B]}}return g.i(self)&&(self.worker=new Ht(self)),Ht}),c("index",["exports","./shared"],function(g,h){var C="4.4.1";let D,$;const M={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:y=>new Promise((n,s)=>{const d=requestAnimationFrame(n);y.signal.addEventListener("abort",()=>{cancelAnimationFrame(d),s(h.c())})}),getImageData(y,n=0){return this.getImageCanvasContext(y).getImageData(-n,-n,y.width+2*n,y.height+2*n)},getImageCanvasContext(y){const n=window.document.createElement("canvas"),s=n.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return n.width=y.width,n.height=y.height,s.drawImage(y,0,0,y.width,y.height),s},resolveURL:y=>(D||(D=document.createElement("a")),D.href=y,D.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&($==null&&($=matchMedia("(prefers-reduced-motion: reduce)")),$.matches)}};class L{static testProp(n){if(!L.docStyle)return n[0];for(let s=0;s<n.length;s++)if(n[s]in L.docStyle)return n[s];return n[0]}static create(n,s,d){const f=window.document.createElement(n);return s!==void 0&&(f.className=s),d&&d.appendChild(f),f}static createNS(n,s){return window.document.createElementNS(n,s)}static disableDrag(){L.docStyle&&L.selectProp&&(L.userSelect=L.docStyle[L.selectProp],L.docStyle[L.selectProp]="none")}static enableDrag(){L.docStyle&&L.selectProp&&(L.docStyle[L.selectProp]=L.userSelect)}static setTransform(n,s){n.style[L.transformProp]=s}static addEventListener(n,s,d,f={}){n.addEventListener(s,d,"passive"in f?f:f.capture)}static removeEventListener(n,s,d,f={}){n.removeEventListener(s,d,"passive"in f?f:f.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",L.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",L.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",L.suppressClickInternal,!0)},0)}static getScale(n){const s=n.getBoundingClientRect();return{x:s.width/n.offsetWidth||1,y:s.height/n.offsetHeight||1,boundingClientRect:s}}static getPoint(n,s,d){const f=s.boundingClientRect;return new h.P((d.clientX-f.left)/s.x-n.clientLeft,(d.clientY-f.top)/s.y-n.clientTop)}static mousePos(n,s){const d=L.getScale(n);return L.getPoint(n,d,s)}static touchPos(n,s){const d=[],f=L.getScale(n);for(let _=0;_<s.length;_++)d.push(L.getPoint(n,f,s[_]));return d}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}}L.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,L.selectProp=L.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),L.transformProp=L.testProp(["transform","WebkitTransform"]);const ce={supported:!1,testSupport:function(y){!Ee&&se&&(te?H(y):pe=y)}};let pe,se,Ee=!1,te=!1;function H(y){const n=y.createTexture();y.bindTexture(y.TEXTURE_2D,n);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,se),y.isContextLost())return;ce.supported=!0}catch{}y.deleteTexture(n),Ee=!0}var ne;typeof document<"u"&&(se=document.createElement("img"),se.onload=()=>{pe&&H(pe),pe=null,te=!0},se.onerror=()=>{Ee=!0,pe=null},se.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let n,s,d,f;y.resetRequestQueue=()=>{n=[],s=0,d=0,f={}},y.addThrottleControl=E=>{const I=d++;return f[I]=E,I},y.removeThrottleControl=E=>{delete f[E],b()},y.getImage=(E,I,R=!0)=>new Promise((z,U)=>{ce.supported&&(E.headers||(E.headers={}),E.headers.accept="image/webp,*/*"),h.e(E,{type:"image"}),n.push({abortController:I,requestParameters:E,supportImageRefresh:R,state:"queued",onError:W=>{U(W)},onSuccess:W=>{z(W)}}),b()});const _=E=>h._(this,void 0,void 0,function*(){E.state="running";const{requestParameters:I,supportImageRefresh:R,onError:z,onSuccess:U,abortController:W}=E,X=R===!1&&!h.i(self)&&!h.g(I.url)&&(!I.headers||Object.keys(I.headers).reduce((ae,fe)=>ae&&fe==="accept",!0));s++;const ie=X?T(I,W):h.m(I,W);try{const ae=yield ie;delete E.abortController,E.state="completed",ae.data instanceof HTMLImageElement||h.b(ae.data)?U(ae):ae.data&&U({data:yield(J=ae.data,typeof createImageBitmap=="function"?h.d(J):h.f(J)),cacheControl:ae.cacheControl,expires:ae.expires})}catch(ae){delete E.abortController,z(ae)}finally{s--,b()}var J}),b=()=>{const E=(()=>{for(const I of Object.keys(f))if(f[I]())return!0;return!1})()?h.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:h.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let I=s;I<E&&n.length>0;I++){const R=n.shift();R.abortController.signal.aborted?I--:_(R)}},T=(E,I)=>new Promise((R,z)=>{const U=new Image,W=E.url,X=E.credentials;X&&X==="include"?U.crossOrigin="use-credentials":(X&&X==="same-origin"||!h.s(W))&&(U.crossOrigin="anonymous"),I.signal.addEventListener("abort",()=>{U.src="",z(h.c())}),U.fetchPriority="high",U.onload=()=>{U.onerror=U.onload=null,R({data:U})},U.onerror=()=>{U.onerror=U.onload=null,I.signal.aborted||z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},U.src=W})}(ne||(ne={})),ne.resetRequestQueue();class be{constructor(n){this._transformRequestFn=n}transformRequest(n,s){return this._transformRequestFn&&this._transformRequestFn(n,s)||{url:n}}setTransformRequest(n){this._transformRequestFn=n}}function Ae(y){var n=new h.A(3);return n[0]=y[0],n[1]=y[1],n[2]=y[2],n}var le,Me=function(y,n,s){return y[0]=n[0]-s[0],y[1]=n[1]-s[1],y[2]=n[2]-s[2],y};le=new h.A(3),h.A!=Float32Array&&(le[0]=0,le[1]=0,le[2]=0);var $e=function(y){var n=y[0],s=y[1];return n*n+s*s};function Ie(y){const n=[];if(typeof y=="string")n.push({id:"default",url:y});else if(y&&y.length>0){const s=[];for(const{id:d,url:f}of y){const _=`${d}${f}`;s.indexOf(_)===-1&&(s.push(_),n.push({id:d,url:f}))}}return n}function ze(y,n,s){const d=y.split("?");return d[0]+=`${n}${s}`,d.join("?")}(function(){var y=new h.A(2);h.A!=Float32Array&&(y[0]=0,y[1]=0)})();class Be{constructor(n,s,d,f){this.context=n,this.format=d,this.texture=n.gl.createTexture(),this.update(s,f)}update(n,s,d){const{width:f,height:_}=n,b=!(this.size&&this.size[0]===f&&this.size[1]===_||d),{context:T}=this,{gl:E}=T;if(this.useMipmap=!!(s&&s.useMipmap),E.bindTexture(E.TEXTURE_2D,this.texture),T.pixelStoreUnpackFlipY.set(!1),T.pixelStoreUnpack.set(1),T.pixelStoreUnpackPremultiplyAlpha.set(this.format===E.RGBA&&(!s||s.premultiply!==!1)),b)this.size=[f,_],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||h.b(n)?E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,E.UNSIGNED_BYTE,n):E.texImage2D(E.TEXTURE_2D,0,this.format,f,_,0,this.format,E.UNSIGNED_BYTE,n.data);else{const{x:I,y:R}=d||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||h.b(n)?E.texSubImage2D(E.TEXTURE_2D,0,I,R,E.RGBA,E.UNSIGNED_BYTE,n):E.texSubImage2D(E.TEXTURE_2D,0,I,R,f,_,E.RGBA,E.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&E.generateMipmap(E.TEXTURE_2D)}bind(n,s,d){const{context:f}=this,{gl:_}=f;_.bindTexture(_.TEXTURE_2D,this.texture),d!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=_.LINEAR),n!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,n),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,d||n),this.filter=n),s!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,s),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}function ut(y){const{userImage:n}=y;return!!(n&&n.render&&n.render())&&(y.data.replace(new Uint8Array(n.data.buffer)),!0)}class Ke extends h.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new h.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:s,promiseResolve:d}of this.requestors)d(this._getImagesForIds(s));this.requestors=[]}}getImage(n){const s=this.images[n];if(s&&!s.data&&s.spriteData){const d=s.spriteData;s.data=new h.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),s.spriteData=null}return s}addImage(n,s){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,s)&&(this.images[n]=s)}_validate(n,s){let d=!0;const f=s.data||s.spriteData;return this._validateStretch(s.stretchX,f&&f.width)||(this.fire(new h.j(new Error(`Image "${n}" has invalid "stretchX" value`))),d=!1),this._validateStretch(s.stretchY,f&&f.height)||(this.fire(new h.j(new Error(`Image "${n}" has invalid "stretchY" value`))),d=!1),this._validateContent(s.content,s)||(this.fire(new h.j(new Error(`Image "${n}" has invalid "content" value`))),d=!1),d}_validateStretch(n,s){if(!n)return!0;let d=0;for(const f of n){if(f[0]<d||f[1]<f[0]||s<f[1])return!1;d=f[1]}return!0}_validateContent(n,s){if(!n)return!0;if(n.length!==4)return!1;const d=s.spriteData,f=d&&d.width||s.data.width,_=d&&d.height||s.data.height;return!(n[0]<0||f<n[0]||n[1]<0||_<n[1]||n[2]<0||f<n[2]||n[3]<0||_<n[3]||n[2]<n[0]||n[3]<n[1])}updateImage(n,s,d=!0){const f=this.getImage(n);if(d&&(f.data.width!==s.data.width||f.data.height!==s.data.height))throw new Error(`size mismatch between old image (${f.data.width}x${f.data.height}) and new image (${s.data.width}x${s.data.height}).`);s.version=f.version+1,this.images[n]=s,this.updatedImages[n]=!0}removeImage(n){const s=this.images[n];delete this.images[n],delete this.patterns[n],s.userImage&&s.userImage.onRemove&&s.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n){return new Promise((s,d)=>{let f=!0;if(!this.isLoaded())for(const _ of n)this.images[_]||(f=!1);this.isLoaded()||f?s(this._getImagesForIds(n)):this.requestors.push({ids:n,promiseResolve:s})})}_getImagesForIds(n){const s={};for(const d of n){let f=this.getImage(d);f||(this.fire(new h.k("styleimagemissing",{id:d})),f=this.getImage(d)),f?s[d]={data:f.data.clone(),pixelRatio:f.pixelRatio,sdf:f.sdf,version:f.version,stretchX:f.stretchX,stretchY:f.stretchY,content:f.content,textFitWidth:f.textFitWidth,textFitHeight:f.textFitHeight,hasRenderCallback:!!(f.userImage&&f.userImage.render)}:h.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return s}getPixelSize(){const{width:n,height:s}=this.atlasImage;return{width:n,height:s}}getPattern(n){const s=this.patterns[n],d=this.getImage(n);if(!d)return null;if(s&&s.position.version===d.version)return s.position;if(s)s.position.version=d.version;else{const f={w:d.data.width+2,h:d.data.height+2,x:0,y:0},_=new h.I(f,d);this.patterns[n]={bin:f,position:_}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const s=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Be(n,this.atlasImage,s.RGBA),this.atlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const _ in this.patterns)n.push(this.patterns[_].bin);const{w:s,h:d}=h.p(n),f=this.atlasImage;f.resize({width:s||1,height:d||1});for(const _ in this.patterns){const{bin:b}=this.patterns[_],T=b.x+1,E=b.y+1,I=this.getImage(_).data,R=I.width,z=I.height;h.R.copy(I,f,{x:0,y:0},{x:T,y:E},{width:R,height:z}),h.R.copy(I,f,{x:0,y:z-1},{x:T,y:E-1},{width:R,height:1}),h.R.copy(I,f,{x:0,y:0},{x:T,y:E+z},{width:R,height:1}),h.R.copy(I,f,{x:R-1,y:0},{x:T-1,y:E},{width:1,height:z}),h.R.copy(I,f,{x:0,y:0},{x:T+R,y:E},{width:1,height:z})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const s of n){if(this.callbackDispatchedThisFrame[s])continue;this.callbackDispatchedThisFrame[s]=!0;const d=this.getImage(s);d||h.w(`Image with ID: "${s}" was not found`),ut(d)&&this.updateImage(s,d)}}}const Qe=1e20;function nr(y,n,s,d,f,_,b,T,E){for(let I=n;I<n+d;I++)Kt(y,s*_+I,_,f,b,T,E);for(let I=s;I<s+f;I++)Kt(y,I*_+n,1,d,b,T,E)}function Kt(y,n,s,d,f,_,b){_[0]=0,b[0]=-Qe,b[1]=Qe,f[0]=y[n];for(let T=1,E=0,I=0;T<d;T++){f[T]=y[n+T*s];const R=T*T;do{const z=_[E];I=(f[T]-f[z]+R-z*z)/(T-z)/2}while(I<=b[E]&&--E>-1);E++,_[E]=T,b[E]=I,b[E+1]=Qe}for(let T=0,E=0;T<d;T++){for(;b[E+1]<T;)E++;const I=_[E],R=T-I;y[n+T*s]=f[I]+R*R}}class Ft{constructor(n,s){this.requestManager=n,this.localIdeographFontFamily=s,this.entries={}}setURL(n){this.url=n}getGlyphs(n){return h._(this,void 0,void 0,function*(){const s=[];for(const _ in n)for(const b of n[_])s.push(this._getAndCacheGlyphsPromise(_,b));const d=yield Promise.all(s),f={};for(const{stack:_,id:b,glyph:T}of d)f[_]||(f[_]={}),f[_][b]=T&&{id:T.id,bitmap:T.bitmap.clone(),metrics:T.metrics};return f})}_getAndCacheGlyphsPromise(n,s){return h._(this,void 0,void 0,function*(){let d=this.entries[n];d||(d=this.entries[n]={glyphs:{},requests:{},ranges:{}});let f=d.glyphs[s];if(f!==void 0)return{stack:n,id:s,glyph:f};if(f=this._tinySDF(d,n,s),f)return d.glyphs[s]=f,{stack:n,id:s,glyph:f};const _=Math.floor(s/256);if(256*_>65535)throw new Error("glyphs > 65535 not supported");if(d.ranges[_])return{stack:n,id:s,glyph:f};if(!this.url)throw new Error("glyphsUrl is not set");if(!d.requests[_]){const T=Ft.loadGlyphRange(n,_,this.url,this.requestManager);d.requests[_]=T}const b=yield d.requests[_];for(const T in b)this._doesCharSupportLocalGlyph(+T)||(d.glyphs[+T]=b[+T]);return d.ranges[_]=!0,{stack:n,id:s,glyph:b[s]||null}})}_doesCharSupportLocalGlyph(n){return!!this.localIdeographFontFamily&&(h.u["CJK Unified Ideographs"](n)||h.u["Hangul Syllables"](n)||h.u.Hiragana(n)||h.u.Katakana(n))}_tinySDF(n,s,d){const f=this.localIdeographFontFamily;if(!f||!this._doesCharSupportLocalGlyph(d))return;let _=n.tinySDF;if(!_){let T="400";/bold/i.test(s)?T="900":/medium/i.test(s)?T="500":/light/i.test(s)&&(T="200"),_=n.tinySDF=new Ft.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:f,fontWeight:T})}const b=_.draw(String.fromCharCode(d));return{id:d,bitmap:new h.o({width:b.width||60,height:b.height||60},b.data),metrics:{width:b.glyphWidth/2||24,height:b.glyphHeight/2||24,left:b.glyphLeft/2+.5||0,top:b.glyphTop/2-27.5||-8,advance:b.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ft.loadGlyphRange=function(y,n,s,d){return h._(this,void 0,void 0,function*(){const f=256*n,_=f+255,b=d.transformRequest(s.replace("{fontstack}",y).replace("{range}",`${f}-${_}`),"Glyphs"),T=yield h.l(b,new AbortController);if(!T||!T.data)throw new Error(`Could not load glyph range. range: ${n}, ${f}-${_}`);const E={};for(const I of h.n(T.data))E[I.id]=I;return E})},Ft.TinySDF=class{constructor({fontSize:y=24,buffer:n=3,radius:s=8,cutoff:d=.25,fontFamily:f="sans-serif",fontWeight:_="normal",fontStyle:b="normal"}={}){this.buffer=n,this.cutoff=d,this.radius=s;const T=this.size=y+4*n,E=this._createCanvas(T),I=this.ctx=E.getContext("2d",{willReadFrequently:!0});I.font=`${b} ${_} ${y}px ${f}`,I.textBaseline="alphabetic",I.textAlign="left",I.fillStyle="black",this.gridOuter=new Float64Array(T*T),this.gridInner=new Float64Array(T*T),this.f=new Float64Array(T),this.z=new Float64Array(T+1),this.v=new Uint16Array(T)}_createCanvas(y){const n=document.createElement("canvas");return n.width=n.height=y,n}draw(y){const{width:n,actualBoundingBoxAscent:s,actualBoundingBoxDescent:d,actualBoundingBoxLeft:f,actualBoundingBoxRight:_}=this.ctx.measureText(y),b=Math.ceil(s),T=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-f))),E=Math.min(this.size-this.buffer,b+Math.ceil(d)),I=T+2*this.buffer,R=E+2*this.buffer,z=Math.max(I*R,0),U=new Uint8ClampedArray(z),W={data:U,width:I,height:R,glyphWidth:T,glyphHeight:E,glyphTop:b,glyphLeft:0,glyphAdvance:n};if(T===0||E===0)return W;const{ctx:X,buffer:ie,gridInner:J,gridOuter:ae}=this;X.clearRect(ie,ie,T,E),X.fillText(y,ie,ie+b);const fe=X.getImageData(ie,ie,T,E);ae.fill(Qe,0,z),J.fill(0,0,z);for(let re=0;re<E;re++)for(let ge=0;ge<T;ge++){const we=fe.data[4*(re*T+ge)+3]/255;if(we===0)continue;const Te=(re+ie)*I+ge+ie;if(we===1)ae[Te]=0,J[Te]=Qe;else{const De=.5-we;ae[Te]=De>0?De*De:0,J[Te]=De<0?De*De:0}}nr(ae,0,0,I,R,I,this.f,this.v,this.z),nr(J,ie,ie,T,E,I,this.f,this.v,this.z);for(let re=0;re<z;re++){const ge=Math.sqrt(ae[re])-Math.sqrt(J[re]);U[re]=Math.round(255-255*(ge/this.radius+this.cutoff))}return W}};class et{constructor(){this.specification=h.v.light.position}possiblyEvaluate(n,s){return h.y(n.expression.evaluate(s))}interpolate(n,s,d){return{x:h.z.number(n.x,s.x,d),y:h.z.number(n.y,s.y,d),z:h.z.number(n.z,s.z,d)}}}let yt;class bt extends h.E{constructor(n){super(),yt=yt||new h.q({anchor:new h.D(h.v.light.anchor),position:new et,color:new h.D(h.v.light.color),intensity:new h.D(h.v.light.intensity)}),this._transitionable=new h.T(yt),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,s={}){if(!this._validate(h.r,n,s))for(const d in n){const f=n[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),f):this._transitionable.setValue(d,f)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,s,d){return(!d||d.validate!==!1)&&h.t(this,n.call(h.x,{value:s,style:{glyphs:!0,sprite:!0},styleSpec:h.v}))}}class Et{constructor(n,s){this.width=n,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,s){const d=n.join(",")+String(s);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(n,s)),this.dashEntry[d]}getDashRanges(n,s,d){const f=[];let _=n.length%2==1?-n[n.length-1]*d:0,b=n[0]*d,T=!0;f.push({left:_,right:b,isDash:T,zeroLength:n[0]===0});let E=n[0];for(let I=1;I<n.length;I++){T=!T;const R=n[I];_=E*d,E+=R,b=E*d,f.push({left:_,right:b,isDash:T,zeroLength:R===0})}return f}addRoundDash(n,s,d){const f=s/2;for(let _=-d;_<=d;_++){const b=this.width*(this.nextRow+d+_);let T=0,E=n[T];for(let I=0;I<this.width;I++){I/E.right>1&&(E=n[++T]);const R=Math.abs(I-E.left),z=Math.abs(I-E.right),U=Math.min(R,z);let W;const X=_/d*(f+1);if(E.isDash){const ie=f-Math.abs(X);W=Math.sqrt(U*U+ie*ie)}else W=f-Math.sqrt(U*U+X*X);this.data[b+I]=Math.max(0,Math.min(255,W+128))}}}addRegularDash(n){for(let T=n.length-1;T>=0;--T){const E=n[T],I=n[T+1];E.zeroLength?n.splice(T,1):I&&I.isDash===E.isDash&&(I.left=E.left,n.splice(T,1))}const s=n[0],d=n[n.length-1];s.isDash===d.isDash&&(s.left=d.left-this.width,d.right=s.right+this.width);const f=this.width*this.nextRow;let _=0,b=n[_];for(let T=0;T<this.width;T++){T/b.right>1&&(b=n[++_]);const E=Math.abs(T-b.left),I=Math.abs(T-b.right),R=Math.min(E,I);this.data[f+T]=Math.max(0,Math.min(255,(b.isDash?R:-R)+128))}}addDash(n,s){const d=s?7:0,f=2*d+1;if(this.nextRow+f>this.height)return h.w("LineAtlas out of space"),null;let _=0;for(let T=0;T<n.length;T++)_+=n[T];if(_!==0){const T=this.width/_,E=this.getDashRanges(n,this.width,T);s?this.addRoundDash(E,T,d):this.addRegularDash(E)}const b={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:_};return this.nextRow+=f,this.dirty=!0,b}bind(n){const s=n.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))}}const jt="maplibre_preloaded_worker_pool";class er{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<er.workerCount;)this.workers.push(new Worker(h.a.WORKER_URL));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(s=>{s.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[jt]}numActive(){return Object.keys(this.active).length}}const cr=Math.floor(M.hardwareConcurrency/2);let hr,gr;function en(){return hr||(hr=new er),hr}er.workerCount=h.B(globalThis)?Math.max(Math.min(cr,3),1):1;class En{constructor(n,s){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=s;const d=this.workerPool.acquire(s);for(let f=0;f<d.length;f++){const _=new h.C(d[f],s);_.name=`Worker ${f}`,this.actors.push(_)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,s){const d=[];for(const f of this.actors)d.push(f.sendAsync({type:n,data:s}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(n=!0){this.actors.forEach(s=>{s.remove()}),this.actors=[],n&&this.workerPool.release(this.id)}registerMessageHandler(n,s){for(const d of this.actors)d.registerMessageHandler(n,s)}}function ao(){return gr||(gr=new En(en(),h.G),gr.registerMessageHandler("GR",(y,n,s)=>h.m(n,s))),gr}function Bi(y,n){const s=h.F();return h.H(s,s,[1,1,0]),h.J(s,s,[.5*y.width,.5*y.height,1]),h.K(s,s,y.calculatePosMatrix(n.toUnwrapped()))}function Uo(y,n,s,d,f,_){const b=function(z,U,W){if(z)for(const X of z){const ie=U[X];if(ie&&ie.source===W&&ie.type==="fill-extrusion")return!0}else for(const X in U){const ie=U[X];if(ie.source===W&&ie.type==="fill-extrusion")return!0}return!1}(f&&f.layers,n,y.id),T=_.maxPitchScaleFactor(),E=y.tilesIn(d,T,b);E.sort(dr);const I=[];for(const z of E)I.push({wrappedTileID:z.tileID.wrapped().key,queryResults:z.tile.queryRenderedFeatures(n,s,y._state,z.queryGeometry,z.cameraQueryGeometry,z.scale,f,_,T,Bi(y.transform,z.tileID))});const R=function(z){const U={},W={};for(const X of z){const ie=X.queryResults,J=X.wrappedTileID,ae=W[J]=W[J]||{};for(const fe in ie){const re=ie[fe],ge=ae[fe]=ae[fe]||{},we=U[fe]=U[fe]||[];for(const Te of re)ge[Te.featureIndex]||(ge[Te.featureIndex]=!0,we.push(Te))}}return U}(I);for(const z in R)R[z].forEach(U=>{const W=U.feature,X=y.getFeatureState(W.layer["source-layer"],W.id);W.source=W.layer.source,W.layer["source-layer"]&&(W.sourceLayer=W.layer["source-layer"]),W.state=X});return R}function dr(y,n){const s=y.tileID,d=n.tileID;return s.overscaledZ-d.overscaledZ||s.canonical.y-d.canonical.y||s.wrap-d.wrap||s.canonical.x-d.canonical.x}function vn(y,n,s){return h._(this,void 0,void 0,function*(){let d=y;if(y.url?d=(yield h.h(n.transformRequest(y.url,"Source"),s)).data:yield M.frameAsync(s),!d)return null;const f=h.L(h.e(d,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in d&&d.vector_layers&&(f.vectorLayerIds=d.vector_layers.map(_=>_.id)),f})}class yr{constructor(n,s){n&&(s?this.setSouthWest(n).setNorthEast(s):Array.isArray(n)&&(n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1])))}setNorthEast(n){return this._ne=n instanceof h.M?new h.M(n.lng,n.lat):h.M.convert(n),this}setSouthWest(n){return this._sw=n instanceof h.M?new h.M(n.lng,n.lat):h.M.convert(n),this}extend(n){const s=this._sw,d=this._ne;let f,_;if(n instanceof h.M)f=n,_=n;else{if(!(n instanceof yr))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(yr.convert(n)):this.extend(h.M.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(h.M.convert(n)):this;if(f=n._sw,_=n._ne,!f||!_)return this}return s||d?(s.lng=Math.min(f.lng,s.lng),s.lat=Math.min(f.lat,s.lat),d.lng=Math.max(_.lng,d.lng),d.lat=Math.max(_.lat,d.lat)):(this._sw=new h.M(f.lng,f.lat),this._ne=new h.M(_.lng,_.lat)),this}getCenter(){return new h.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new h.M(this.getWest(),this.getNorth())}getSouthEast(){return new h.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:s,lat:d}=h.M.convert(n);let f=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(f=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&f}static convert(n){return n instanceof yr?n:n&&new yr(n)}static fromLngLat(n,s=0){const d=360*s/40075017,f=d/Math.cos(Math.PI/180*n.lat);return new yr(new h.M(n.lng-f,n.lat-d),new h.M(n.lng+f,n.lat+d))}}class Ni{constructor(n,s,d){this.bounds=yr.convert(this.validateBounds(n)),this.minzoom=s||0,this.maxzoom=d||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const s=Math.pow(2,n.z),d=Math.floor(h.N(this.bounds.getWest())*s),f=Math.floor(h.O(this.bounds.getNorth())*s),_=Math.ceil(h.N(this.bounds.getEast())*s),b=Math.ceil(h.O(this.bounds.getSouth())*s);return n.x>=d&&n.x<_&&n.y>=f&&n.y<b}}class ke extends h.E{constructor(n,s,d,f){if(super(),this.id=n,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,h.e(this,h.L(s,["url","scheme","tileSize","promoteId"])),this._options=h.e({type:"vector"},s),this._collectResourceTiming=s.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(f)}load(){return h._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new h.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield vn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),n&&(h.e(this,n),n.bounds&&(this.tileBounds=new Ni(n.bounds,this.minzoom,this.maxzoom)),this.fire(new h.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new h.k("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this.fire(new h.j(n))}})}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.abort(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return h.e({},this._options)}loadTile(n){return h._(this,void 0,void 0,function*(){const s=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(s,"Tile"),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};d.request.collectResourceTiming=this._collectResourceTiming;let f="RT";if(n.actor&&n.state!=="expired"){if(n.state==="loading")return new Promise((_,b)=>{n.reloadPromise={resolve:_,reject:b}})}else n.actor=this.dispatcher.getActor(),f="LT";n.abortController=new AbortController;try{const _=yield n.actor.sendAsync({type:f,data:d},n.abortController);if(delete n.abortController,n.aborted)return;this._afterTileLoadWorkerResponse(n,_)}catch(_){if(delete n.abortController,n.aborted)return;if(_&&_.status!==404)throw _;this._afterTileLoadWorkerResponse(n,null)}})}_afterTileLoadWorkerResponse(n,s){if(s&&s.resourceTiming&&(n.resourceTiming=s.resourceTiming),s&&this.map._refreshExpiredTiles&&n.setExpiryData(s),n.loadVectorData(s,this.map.painter),n.reloadPromise){const d=n.reloadPromise;n.reloadPromise=null,this.loadTile(n).then(d.resolve).catch(d.reject)}}abortTile(n){return h._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.actor&&(yield n.actor.sendAsync({type:"AT",data:{uid:n.uid,type:this.type,source:this.id}}))})}unloadTile(n){return h._(this,void 0,void 0,function*(){n.unloadVectorData(),n.actor&&(yield n.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class ui extends h.E{constructor(n,s,d,f){super(),this.id=n,this.dispatcher=d,this.setEventedParent(f),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=h.e({type:"raster"},s),h.e(this,h.L(s,["url","scheme","tileSize"]))}load(){return h._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new h.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield vn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,n&&(h.e(this,n),n.bounds&&(this.tileBounds=new Ni(n.bounds,this.minzoom,this.maxzoom)),this.fire(new h.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new h.k("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this.fire(new h.j(n))}})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(n){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}serialize(){return h.e({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n){return h._(this,void 0,void 0,function*(){const s=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.abortController=new AbortController;try{const d=yield ne.getImage(this.map._requestManager.transformRequest(s,"Tile"),n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&n.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const f=this.map.painter.context,_=f.gl,b=d.data;n.texture=this.map.painter.getTileTexture(b.width),n.texture?n.texture.update(b,{useMipmap:!0}):(n.texture=new Be(f,b,_.RGBA,{useMipmap:!0}),n.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST),f.extTextureFilterAnisotropic&&_.texParameterf(_.TEXTURE_2D,f.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,f.extTextureFilterAnisotropicMax)),n.state="loaded"}}catch(d){if(delete n.abortController,n.aborted)n.state="unloaded";else if(d)throw n.state="errored",d}})}abortTile(n){return h._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController)})}unloadTile(n){return h._(this,void 0,void 0,function*(){n.texture&&this.map.painter.saveTileTexture(n.texture)})}hasTransition(){return!1}}class xn extends ui{constructor(n,s,d,f){super(n,s,d,f),this.type="raster-dem",this.maxzoom=22,this._options=h.e({type:"raster-dem"},s),this.encoding=s.encoding||"mapbox",this.redFactor=s.redFactor,this.greenFactor=s.greenFactor,this.blueFactor=s.blueFactor,this.baseShift=s.baseShift}loadTile(n){return h._(this,void 0,void 0,function*(){const s=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(s,"Tile");n.neighboringTiles=this._getNeighboringTiles(n.tileID),n.abortController=new AbortController;try{const f=yield ne.getImage(d,n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(f&&f.data){const _=f.data;this.map._refreshExpiredTiles&&f.cacheControl&&f.expires&&n.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});const b=h.b(_)&&h.S()?_:yield this.readImageNow(_),T={type:this.type,uid:n.uid,source:this.id,rawImageData:b,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!n.actor||n.state==="expired"){n.actor=this.dispatcher.getActor();const E=yield n.actor.sendAsync({type:"LDT",data:T});n.dem=E,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded"}}}catch(f){if(delete n.abortController,n.aborted)n.state="unloaded";else if(f)throw n.state="errored",f}})}readImageNow(n){return h._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&h.U()){const s=n.width+2,d=n.height+2;try{return new h.R({width:s,height:d},yield h.V(n,-1,-1,s,d))}catch{}}return M.getImageData(n,1)})}_getNeighboringTiles(n){const s=n.canonical,d=Math.pow(2,s.z),f=(s.x-1+d)%d,_=s.x===0?n.wrap-1:n.wrap,b=(s.x+1+d)%d,T=s.x+1===d?n.wrap+1:n.wrap,E={};return E[new h.Q(n.overscaledZ,_,s.z,f,s.y).key]={backfilled:!1},E[new h.Q(n.overscaledZ,T,s.z,b,s.y).key]={backfilled:!1},s.y>0&&(E[new h.Q(n.overscaledZ,_,s.z,f,s.y-1).key]={backfilled:!1},E[new h.Q(n.overscaledZ,n.wrap,s.z,s.x,s.y-1).key]={backfilled:!1},E[new h.Q(n.overscaledZ,T,s.z,b,s.y-1).key]={backfilled:!1}),s.y+1<d&&(E[new h.Q(n.overscaledZ,_,s.z,f,s.y+1).key]={backfilled:!1},E[new h.Q(n.overscaledZ,n.wrap,s.z,s.x,s.y+1).key]={backfilled:!1},E[new h.Q(n.overscaledZ,T,s.z,b,s.y+1).key]={backfilled:!1}),E}unloadTile(n){return h._(this,void 0,void 0,function*(){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&(yield n.actor.sendAsync({type:"RDT",data:{type:this.type,uid:n.uid,source:this.id}}))})}}class Dt extends h.E{constructor(n,s,d,f){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(f),this._data=s.data,this._options=h.e({},s),this._collectResourceTiming=s.collectResourceTiming,s.maxzoom!==void 0&&(this.maxzoom=s.maxzoom),s.type&&(this.type=s.type),s.attribution&&(this.attribution=s.attribution),this.promoteId=s.promoteId;const _=h.W/this.tileSize;this.workerOptions=h.e({source:this.id,cluster:s.cluster||!1,geojsonVtOptions:{buffer:(s.buffer!==void 0?s.buffer:128)*_,tolerance:(s.tolerance!==void 0?s.tolerance:.375)*_,extent:h.W,maxZoom:this.maxzoom,lineMetrics:s.lineMetrics||!1,generateId:s.generateId||!1},superclusterOptions:{maxZoom:s.clusterMaxZoom!==void 0?s.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,s.clusterMinPoints||2),extent:h.W,radius:(s.clusterRadius||50)*_,log:!1,generateId:s.generateId||!1},clusterProperties:s.clusterProperties,filter:s.filter},s.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return h._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(n){this.map=n,this.load()}setData(n){return this._data=n,this._updateWorkerData(),this}updateData(n){return this._updateWorkerData(n),this}getData(){return h._(this,void 0,void 0,function*(){const n=h.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:n})})}setClusterOptions(n){return this.workerOptions.cluster=n.cluster,n&&(n.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=n.clusterRadius),n.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=n.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(n){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:n,source:this.id}})}getClusterChildren(n){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:n,source:this.id}})}getClusterLeaves(n,s,d){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:n,limit:s,offset:d}})}_updateWorkerData(n){return h._(this,void 0,void 0,function*(){const s=h.e({type:this.type},this.workerOptions);n?s.dataDiff=n:typeof this._data=="string"?(s.request=this.map._requestManager.transformRequest(M.resolveURL(this._data),"Source"),s.request.collectResourceTiming=this._collectResourceTiming):s.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new h.k("dataloading",{dataType:"source"}));try{const d=yield this.actor.sendAsync({type:"LD",data:s});if(this._pendingLoads--,this._removed||d.abandoned)return void this.fire(new h.k("dataabort",{dataType:"source"}));let f=null;d.resourceTiming&&d.resourceTiming[this.id]&&(f=d.resourceTiming[this.id].slice(0));const _={dataType:"source"};this._collectResourceTiming&&f&&f.length>0&&h.e(_,{resourceTiming:f}),this.fire(new h.k("data",Object.assign(Object.assign({},_),{sourceDataType:"metadata"}))),this.fire(new h.k("data",Object.assign(Object.assign({},_),{sourceDataType:"content"})))}catch(d){if(this._pendingLoads--,this._removed)return void this.fire(new h.k("dataabort",{dataType:"source"}));this.fire(new h.j(d))}})}loaded(){return this._pendingLoads===0}loadTile(n){return h._(this,void 0,void 0,function*(){const s=n.actor?"RT":"LT";n.actor=this.actor;const d={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};n.abortController=new AbortController;const f=yield this.actor.sendAsync({type:s,data:d},n.abortController);delete n.abortController,n.unloadVectorData(),n.aborted||n.loadVectorData(f,this.map.painter,s==="RT")})}abortTile(n){return h._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.aborted=!0})}unloadTile(n){return h._(this,void 0,void 0,function*(){n.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return h.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Xt=h.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Xn extends h.E{constructor(n,s,d,f){super(),this.id=n,this.dispatcher=d,this.coordinates=s.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(f),this.options=s}load(n){return h._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new h.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const s=yield ne.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,s&&s.data&&(this.image=s.data,n&&(this.coordinates=n),this._finishLoading())}catch(s){this._request=null,this._loaded=!0,this.fire(new h.j(s))}})}loaded(){return this._loaded}updateImage(n){return n.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=n.url,this.load(n.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new h.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(n){this.coordinates=n;const s=n.map(h.Y.fromLngLat);this.tileID=function(f){let _=1/0,b=1/0,T=-1/0,E=-1/0;for(const U of f)_=Math.min(_,U.x),b=Math.min(b,U.y),T=Math.max(T,U.x),E=Math.max(E,U.y);const I=Math.max(T-_,E-b),R=Math.max(0,Math.floor(-Math.log(I)/Math.LN2)),z=Math.pow(2,R);return new h.a0(R,Math.floor((_+T)/2*z),Math.floor((b+E)/2*z))}(s),this.minzoom=this.maxzoom=this.tileID.z;const d=s.map(f=>this.tileID.getTilePoint(f)._round());return this._boundsArray=new h.Z,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,h.W,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,h.W),this._boundsArray.emplaceBack(d[2].x,d[2].y,h.W,h.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new h.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,s=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,Xt.members)),this.boundsSegments||(this.boundsSegments=h.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Be(n,this.image,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE));let d=!1;for(const f in this.tiles){const _=this.tiles[f];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,d=!0)}d&&this.fire(new h.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(n){return h._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={}):n.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class ji extends Xn{constructor(n,s,d,f){super(n,s,d,f),this.roundZoom=!0,this.type="video",this.options=s}load(){return h._(this,void 0,void 0,function*(){this._loaded=!1;const n=this.options;this.urls=[];for(const s of n.urls)this.urls.push(this.map._requestManager.transformRequest(s,"Source").url);try{const s=yield h.a2(this.urls);if(this._loaded=!0,!s)return;this.video=s,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(s){this.fire(new h.j(s))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const s=this.video.seekable;n<s.start(0)||n>s.end(0)?this.fire(new h.j(new h.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${s.start(0)} and ${s.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,s=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,Xt.members)),this.boundsSegments||(this.boundsSegments=h.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),s.texSubImage2D(s.TEXTURE_2D,0,0,0,s.RGBA,s.UNSIGNED_BYTE,this.video)):(this.texture=new Be(n,this.video,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE));let d=!1;for(const f in this.tiles){const _=this.tiles[f];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,d=!0)}d&&this.fire(new h.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class qr extends Xn{constructor(n,s,d,f){super(n,s,d,f),s.coordinates?Array.isArray(s.coordinates)&&s.coordinates.length===4&&!s.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(b=>typeof b!="number"))||this.fire(new h.j(new h.a1(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new h.j(new h.a1(`sources.${n}`,null,'missing required property "coordinates"'))),s.animate&&typeof s.animate!="boolean"&&this.fire(new h.j(new h.a1(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),s.canvas?typeof s.canvas=="string"||s.canvas instanceof HTMLCanvasElement||this.fire(new h.j(new h.a1(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new h.j(new h.a1(`sources.${n}`,null,'missing required property "canvas"'))),this.options=s,this.animate=s.animate===void 0||s.animate}load(){return h._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new h.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const s=this.map.painter.context,d=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,Xt.members)),this.boundsSegments||(this.boundsSegments=h.$.simpleSegment(0,0,4,2)),this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Be(s,this.canvas,d.RGBA,{premultiply:!0});let f=!1;for(const _ in this.tiles){const b=this.tiles[_];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,f=!0)}f&&this.fire(new h.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const dn={},tn=y=>{switch(y){case"geojson":return Dt;case"image":return Xn;case"raster":return ui;case"raster-dem":return xn;case"vector":return ke;case"video":return ji;case"canvas":return qr}return dn[y]},pn="RTLPluginLoaded";class Ti extends h.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=ao()}_syncState(n){return this.status=n,this.dispatcher.broadcast("SRPS",{pluginStatus:n,pluginURL:this.url}).catch(s=>{throw this.status="error",s})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(n){return h._(this,arguments,void 0,function*(s,d=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=M.resolveURL(s),!this.url)throw new Error(`requested url ${s} is invalid`);if(this.status==="unavailable"){if(!d)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return h._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new h.k(pn))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let je=null;function br(){return je||(je=new Ti),je}class Zr{constructor(n,s){this.timeAdded=0,this.fadeEndTime=0,this.tileID=n,this.uid=h.a3(),this.uses=0,this.tileSize=s,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(n){const s=n+this.timeAdded;s<this.fadeEndTime||(this.fadeEndTime=s)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(n,s,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(f,_){const b={};if(!_)return b;for(const T of f){const E=T.layerIds.map(I=>_.getLayer(I)).filter(Boolean);if(E.length!==0){T.layers=E,T.stateDependentLayerIds&&(T.stateDependentLayers=T.stateDependentLayerIds.map(I=>E.filter(R=>R.id===I)[0]));for(const I of E)b[I.id]=T}}return b}(n.buckets,s.style),this.hasSymbolBuckets=!1;for(const f in this.buckets){const _=this.buckets[f];if(_ instanceof h.a5){if(this.hasSymbolBuckets=!0,!d)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const f in this.buckets){const _=this.buckets[f];if(_ instanceof h.a5&&_.hasRTLText){this.hasRTLText=!0,br().lazyLoad();break}}this.queryPadding=0;for(const f in this.buckets){const _=this.buckets[f];this.queryPadding=Math.max(this.queryPadding,s.style.getLayer(f).queryRadius(_))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage)}else this.collisionBoxArray=new h.a4}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const d in this.buckets){const f=this.buckets[d];f.uploadPending()&&f.upload(n)}const s=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Be(n,this.imageAtlas.image,s.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Be(n,this.glyphAtlasImage,s.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,s,d,f,_,b,T,E,I,R){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:f,cameraQueryGeometry:_,scale:b,tileSize:this.tileSize,pixelPosMatrix:R,transform:E,params:T,queryPadding:this.queryPadding*I},n,s,d):{}}querySourceFeatures(n,s){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const f=d.loadVTLayers(),_=s&&s.sourceLayer?s.sourceLayer:"",b=f._geojsonTileLayer||f[_];if(!b)return;const T=h.a6(s&&s.filter),{z:E,x:I,y:R}=this.tileID.canonical,z={z:E,x:I,y:R};for(let U=0;U<b.length;U++){const W=b.feature(U);if(T.needGeometry){const J=h.a7(W,!0);if(!T.filter(new h.a8(this.tileID.overscaledZ),J,this.tileID.canonical))continue}else if(!T.filter(new h.a8(this.tileID.overscaledZ),W))continue;const X=d.getId(W,_),ie=new h.a9(W,E,I,R,X);ie.tile=z,n.push(ie)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const s=this.expirationTime;if(n.cacheControl){const d=h.aa(n.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const d=Date.now();let f=!1;if(this.expirationTime>d)f=!1;else if(s)if(this.expirationTime<s)f=!0;else{const _=this.expirationTime-s;_?this.expirationTime=d+Math.max(_,3e4):f=!0}else f=!0;f?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,s){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const f in this.buckets){if(!s.style.hasLayer(f))continue;const _=this.buckets[f],b=_.layers[0].sourceLayer||"_geojsonTileLayer",T=d[b],E=n[b];if(!T||!E||Object.keys(E).length===0)continue;_.update(E,T,this.imageAtlas&&this.imageAtlas.patternPositions||{});const I=s&&s.style&&s.style.getLayer(f);I&&(this.queryPadding=Math.max(this.queryPadding,I.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<M.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=M.now()+n}setDependencies(n,s){const d={};for(const f of s)d[f]=!0;this.dependencies[n]=d}hasDependency(n,s){for(const d of n){const f=this.dependencies[d];if(f){for(const _ of s)if(f[_])return!0}}return!1}}class ci{constructor(n,s){this.max=n,this.onRemove=s,this.reset()}reset(){for(const n in this.data)for(const s of this.data[n])s.timeout&&clearTimeout(s.timeout),this.onRemove(s.value);return this.data={},this.order=[],this}add(n,s,d){const f=n.wrapped().key;this.data[f]===void 0&&(this.data[f]=[]);const _={value:s,timeout:void 0};if(d!==void 0&&(_.timeout=setTimeout(()=>{this.remove(n,_)},d)),this.data[f].push(_),this.order.push(f),this.order.length>this.max){const b=this._getAndRemoveByKey(this.order[0]);b&&this.onRemove(b)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const s=this.data[n].shift();return s.timeout&&clearTimeout(s.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),s.value}getByKey(n){const s=this.data[n];return s?s[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,s){if(!this.has(n))return this;const d=n.wrapped().key,f=s===void 0?0:this.data[d].indexOf(s),_=this.data[d][f];return this.data[d].splice(f,1),_.timeout&&clearTimeout(_.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(_.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this}filter(n){const s=[];for(const d in this.data)for(const f of this.data[d])n(f.value)||s.push(f);for(const d of s)this.remove(d.value.tileID,d)}}class Ui{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,s,d){const f=String(s);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][f]=this.stateChanges[n][f]||{},h.e(this.stateChanges[n][f],d),this.deletedStates[n]===null){this.deletedStates[n]={};for(const _ in this.state[n])_!==f&&(this.deletedStates[n][_]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][f]===null){this.deletedStates[n][f]={};for(const _ in this.state[n][f])d[_]||(this.deletedStates[n][f][_]=null)}else for(const _ in d)this.deletedStates[n]&&this.deletedStates[n][f]&&this.deletedStates[n][f][_]===null&&delete this.deletedStates[n][f][_]}removeFeatureState(n,s,d){if(this.deletedStates[n]===null)return;const f=String(s);if(this.deletedStates[n]=this.deletedStates[n]||{},d&&s!==void 0)this.deletedStates[n][f]!==null&&(this.deletedStates[n][f]=this.deletedStates[n][f]||{},this.deletedStates[n][f][d]=null);else if(s!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][f])for(d in this.deletedStates[n][f]={},this.stateChanges[n][f])this.deletedStates[n][f][d]=null;else this.deletedStates[n][f]=null;else this.deletedStates[n]=null}getState(n,s){const d=String(s),f=h.e({},(this.state[n]||{})[d],(this.stateChanges[n]||{})[d]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const _=this.deletedStates[n][s];if(_===null)return{};for(const b in _)delete f[b]}return f}initializeTileState(n,s){n.setFeatureState(this.state,s)}coalesceChanges(n,s){const d={};for(const f in this.stateChanges){this.state[f]=this.state[f]||{};const _={};for(const b in this.stateChanges[f])this.state[f][b]||(this.state[f][b]={}),h.e(this.state[f][b],this.stateChanges[f][b]),_[b]=this.state[f][b];d[f]=_}for(const f in this.deletedStates){this.state[f]=this.state[f]||{};const _={};if(this.deletedStates[f]===null)for(const b in this.state[f])_[b]={},this.state[f][b]={};else for(const b in this.deletedStates[f]){if(this.deletedStates[f][b]===null)this.state[f][b]={};else for(const T of Object.keys(this.deletedStates[f][b]))delete this.state[f][b][T];_[b]=this.state[f][b]}d[f]=d[f]||{},h.e(d[f],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const f in n)n[f].setFeatureState(d,s)}}class Ne extends h.E{constructor(n,s,d){super(),this.id=n,this.dispatcher=d,this.on("data",f=>this._dataHandler(f)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((f,_,b,T)=>{const E=new(tn(_.type))(f,_,b,T);if(E.id!==f)throw new Error(`Expected Source id to be ${f} instead of ${E.id}`);return E})(n,s,d,this),this._tiles={},this._cache=new ci(0,f=>this._unloadTile(f)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ui,this._didEmitContent=!1,this._updated=!1}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._maxTileCacheZoomLevels=n?n._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const n in this._tiles){const s=this._tiles[n];if(s.state!=="loaded"&&s.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,s,d){return h._(this,void 0,void 0,function*(){try{yield this._source.loadTile(n),this._tileLoaded(n,s,d)}catch(f){n.state="errored",f.status!==404?this._source.fire(new h.j(f,{tile:n})):this.update(this.transform,this.terrain)}})}_unloadTile(n){this._source.unloadTile&&this._source.unloadTile(n)}_abortTile(n){this._source.abortTile&&this._source.abortTile(n),this._source.fire(new h.k("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const s in this._tiles){const d=this._tiles[s];d.upload(n),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(n=>n.tileID).sort(Rt).map(n=>n.key)}getRenderableIds(n){const s=[];for(const d in this._tiles)this._isIdRenderable(d,n)&&s.push(this._tiles[d]);return n?s.sort((d,f)=>{const _=d.tileID,b=f.tileID,T=new h.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),E=new h.P(b.canonical.x,b.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-b.overscaledZ||E.y-T.y||E.x-T.x}).map(d=>d.tileID.key):s.map(d=>d.tileID).sort(Rt).map(d=>d.key)}hasRenderableParent(n){const s=this.findLoadedParent(n,0);return!!s&&this._isIdRenderable(s.tileID.key)}_isIdRenderable(n,s){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(s||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(n,"reloading")}}_reloadTile(n,s){return h._(this,void 0,void 0,function*(){const d=this._tiles[n];d&&(d.state!=="loading"&&(d.state=s),yield this._loadTile(d,n,s))})}_tileLoaded(n,s,d){n.timeAdded=M.now(),d==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(s,n),this.getSource().type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new h.k("data",{dataType:"source",tile:n,coord:n.tileID}))}_backfillDEM(n){const s=this.getRenderableIds();for(let f=0;f<s.length;f++){const _=s[f];if(n.neighboringTiles&&n.neighboringTiles[_]){const b=this.getTileByID(_);d(n,b),d(b,n)}}function d(f,_){f.needsHillshadePrepare=!0,f.needsTerrainPrepare=!0;let b=_.tileID.canonical.x-f.tileID.canonical.x;const T=_.tileID.canonical.y-f.tileID.canonical.y,E=Math.pow(2,f.tileID.canonical.z),I=_.tileID.key;b===0&&T===0||Math.abs(T)>1||(Math.abs(b)>1&&(Math.abs(b+E)===1?b+=E:Math.abs(b-E)===1&&(b-=E)),_.dem&&f.dem&&(f.dem.backfillBorder(_.dem,b,T),f.neighboringTiles&&f.neighboringTiles[I]&&(f.neighboringTiles[I].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,s,d,f){for(const _ in this._tiles){let b=this._tiles[_];if(f[_]||!b.hasData()||b.tileID.overscaledZ<=s||b.tileID.overscaledZ>d)continue;let T=b.tileID;for(;b&&b.tileID.overscaledZ>s+1;){const I=b.tileID.scaledTo(b.tileID.overscaledZ-1);b=this._tiles[I.key],b&&b.hasData()&&(T=I)}let E=T;for(;E.overscaledZ>s;)if(E=E.scaledTo(E.overscaledZ-1),n[E.key]){f[T.key]=T;break}}}findLoadedParent(n,s){if(n.key in this._loadedParentTiles){const d=this._loadedParentTiles[n.key];return d&&d.tileID.overscaledZ>=s?d:null}for(let d=n.overscaledZ-1;d>=s;d--){const f=n.scaledTo(d),_=this._getLoadedTile(f);if(_)return _}}findLoadedSibling(n){return this._getLoadedTile(n)}_getLoadedTile(n){const s=this._tiles[n.key];return s&&s.hasData()?s:this._cache.getByKey(n.wrapped().key)}updateCacheSize(n){const s=Math.ceil(n.width/this._source.tileSize)+1,d=Math.ceil(n.height/this._source.tileSize)+1,f=Math.floor(s*d*(this._maxTileCacheZoomLevels===null?h.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,f):f;this._cache.setMaxSize(_)}handleWrapJump(n){const s=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,s){const d={};for(const f in this._tiles){const _=this._tiles[f];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+s),d[_.tileID.key]=_}this._tiles=d;for(const f in this._timers)clearTimeout(this._timers[f]),delete this._timers[f];for(const f in this._tiles)this._setTileReloadTimer(f,this._tiles[f])}}_updateCoveredAndRetainedTiles(n,s,d,f,_,b){const T={},E={},I=Object.keys(n),R=M.now();for(const z of I){const U=n[z],W=this._tiles[z];if(!W||W.fadeEndTime!==0&&W.fadeEndTime<=R)continue;const X=this.findLoadedParent(U,s),ie=this.findLoadedSibling(U),J=X||ie||null;J&&(this._addTile(J.tileID),T[J.tileID.key]=J.tileID),E[z]=U}this._retainLoadedChildren(E,f,d,n);for(const z in T)n[z]||(this._coveredTiles[z]=!0,n[z]=T[z]);if(b){const z={},U={};for(const W of _)this._tiles[W.key].hasData()?z[W.key]=W:U[W.key]=W;for(const W in U){const X=U[W].children(this._source.maxzoom);this._tiles[X[0].key]&&this._tiles[X[1].key]&&this._tiles[X[2].key]&&this._tiles[X[3].key]&&(z[X[0].key]=n[X[0].key]=X[0],z[X[1].key]=n[X[1].key]=X[1],z[X[2].key]=n[X[2].key]=X[2],z[X[3].key]=n[X[3].key]=X[3],delete U[W])}for(const W in U){const X=U[W],ie=this.findLoadedParent(X,this._source.minzoom),J=this.findLoadedSibling(X),ae=ie||J||null;if(ae){z[ae.tileID.key]=n[ae.tileID.key]=ae.tileID;for(const fe in z)z[fe].isChildOf(ae.tileID)&&delete z[fe]}}for(const W in this._tiles)z[W]||(this._coveredTiles[W]=!0)}}update(n,s){if(!this._sourceLoaded||this._paused)return;let d;this.transform=n,this.terrain=s,this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(R=>new h.Q(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y)):(d=n.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:s}),this._source.hasTile&&(d=d.filter(R=>this._source.hasTile(R)))):d=[];const f=n.coveringZoomLevel(this._source),_=Math.max(f-Ne.maxOverzooming,this._source.minzoom),b=Math.max(f+Ne.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const R={};for(const z of d)if(z.canonical.z>this._source.minzoom){const U=z.scaledTo(z.canonical.z-1);R[U.key]=U;const W=z.scaledTo(Math.max(this._source.minzoom,Math.min(z.canonical.z,5)));R[W.key]=W}d=d.concat(Object.values(R))}const T=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,T&&this.fire(new h.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const E=this._updateRetainedTiles(d,f);Ct(this._source.type)&&this._updateCoveredAndRetainedTiles(E,_,b,f,d,s);for(const R in E)this._tiles[R].clearFadeHold();const I=h.ab(this._tiles,E);for(const R of I){const z=this._tiles[R];z.hasSymbolBuckets&&!z.holdingForFade()?z.setHoldDuration(this.map._fadeDuration):z.hasSymbolBuckets&&!z.symbolFadeFinished()||this._removeTile(R)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(n)}_updateRetainedTiles(n,s){var d;const f={},_={},b=Math.max(s-Ne.maxOverzooming,this._source.minzoom),T=Math.max(s+Ne.maxUnderzooming,this._source.minzoom),E={};for(const I of n){const R=this._addTile(I);f[I.key]=I,R.hasData()||s<this._source.maxzoom&&(E[I.key]=I)}this._retainLoadedChildren(E,s,T,f);for(const I of n){let R=this._tiles[I.key];if(R.hasData())continue;if(s+1>this._source.maxzoom){const U=I.children(this._source.maxzoom)[0],W=this.getTile(U);if(W&&W.hasData()){f[U.key]=U;continue}}else{const U=I.children(this._source.maxzoom);if(f[U[0].key]&&f[U[1].key]&&f[U[2].key]&&f[U[3].key])continue}let z=R.wasRequested();for(let U=I.overscaledZ-1;U>=b;--U){const W=I.scaledTo(U);if(_[W.key])break;if(_[W.key]=!0,R=this.getTile(W),!R&&z&&(R=this._addTile(W)),R){const X=R.hasData();if((X||!(!((d=this.map)===null||d===void 0)&&d.cancelPendingTileRequestsWhileZooming)||z)&&(f[W.key]=W),z=R.wasRequested(),X)break}}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const s=[];let d,f=this._tiles[n].tileID;for(;f.overscaledZ>0;){if(f.key in this._loadedParentTiles){d=this._loadedParentTiles[f.key];break}s.push(f.key);const _=f.scaledTo(f.overscaledZ-1);if(d=this._getLoadedTile(_),d)break;f=_}for(const _ of s)this._loadedParentTiles[_]=d}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const n in this._tiles){const s=this._tiles[n].tileID,d=this._getLoadedTile(s);this._loadedSiblingTiles[s.key]=d}}_addTile(n){let s=this._tiles[n.key];if(s)return s;s=this._cache.getAndRemove(n),s&&(this._setTileReloadTimer(n.key,s),s.tileID=n,this._state.initializeTileState(s,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,s)));const d=s;return s||(s=new Zr(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(s,n.key,s.state)),s.uses++,this._tiles[n.key]=s,d||this._source.fire(new h.k("dataloading",{tile:s,coord:s.tileID,dataType:"source"})),s}_setTileReloadTimer(n,s){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const d=s.getExpiryTimeout();d&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},d))}_removeTile(n){const s=this._tiles[n];s&&(s.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),s.uses>0||(s.hasData()&&s.state!=="reloading"?this._cache.add(s.tileID,s,s.getExpiryTimeout()):(s.aborted=!0,this._abortTile(s),this._unloadTile(s))))}_dataHandler(n){const s=n.sourceDataType;n.dataType==="source"&&s==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&n.dataType==="source"&&s==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(n);this._cache.reset()}tilesIn(n,s,d){const f=[],_=this.transform;if(!_)return f;const b=d?_.getCameraQueryGeometry(n):n,T=n.map(X=>_.pointCoordinate(X,this.terrain)),E=b.map(X=>_.pointCoordinate(X,this.terrain)),I=this.getIds();let R=1/0,z=1/0,U=-1/0,W=-1/0;for(const X of E)R=Math.min(R,X.x),z=Math.min(z,X.y),U=Math.max(U,X.x),W=Math.max(W,X.y);for(let X=0;X<I.length;X++){const ie=this._tiles[I[X]];if(ie.holdingForFade())continue;const J=ie.tileID,ae=Math.pow(2,_.zoom-ie.tileID.overscaledZ),fe=s*ie.queryPadding*h.W/ie.tileSize/ae,re=[J.getTilePoint(new h.Y(R,z)),J.getTilePoint(new h.Y(U,W))];if(re[0].x-fe<h.W&&re[0].y-fe<h.W&&re[1].x+fe>=0&&re[1].y+fe>=0){const ge=T.map(Te=>J.getTilePoint(Te)),we=E.map(Te=>J.getTilePoint(Te));f.push({tile:ie,tileID:J,queryGeometry:ge,cameraQueryGeometry:we,scale:ae})}}return f}getVisibleCoordinates(n){const s=this.getRenderableIds(n).map(d=>this._tiles[d].tileID);for(const d of s)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return s}hasTransition(){if(this._source.hasTransition())return!0;if(Ct(this._source.type)){const n=M.now();for(const s in this._tiles)if(this._tiles[s].fadeEndTime>=n)return!0}return!1}setFeatureState(n,s,d){this._state.updateState(n=n||"_geojsonTileLayer",s,d)}removeFeatureState(n,s,d){this._state.removeFeatureState(n=n||"_geojsonTileLayer",s,d)}getFeatureState(n,s){return this._state.getState(n=n||"_geojsonTileLayer",s)}setDependencies(n,s,d){const f=this._tiles[n];f&&f.setDependencies(s,d)}reloadTilesForDependencies(n,s){for(const d in this._tiles)this._tiles[d].hasDependency(n,s)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(n,s))}}function Rt(y,n){const s=Math.abs(2*y.wrap)-+(y.wrap<0),d=Math.abs(2*n.wrap)-+(n.wrap<0);return y.overscaledZ-n.overscaledZ||d-s||n.canonical.y-y.canonical.y||n.canonical.x-y.canonical.x}function Ct(y){return y==="raster"||y==="image"||y==="video"}Ne.maxOverzooming=10,Ne.maxUnderzooming=3;class rn{constructor(n,s){this.reset(n,s)}reset(n,s){this.points=n||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=h.ac(n,0,1);let s=1,d=this._distances[s];const f=n*this.paddedLength+this.padding;for(;d<f&&s<this._distances.length;)d=this._distances[++s];const _=s-1,b=this._distances[_],T=d-b,E=T>0?(f-b)/T:0;return this.points[_].mult(1-E).add(this.points[s].mult(E))}}function nn(y,n){let s=!0;return y==="always"||y!=="never"&&n!=="never"||(s=!1),s}class zt{constructor(n,s,d){const f=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(n/d),this.yCellCount=Math.ceil(s/d);for(let b=0;b<this.xCellCount*this.yCellCount;b++)f.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=s,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,s,d,f,_){this._forEachCell(s,d,f,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(s),this.bboxes.push(d),this.bboxes.push(f),this.bboxes.push(_)}insertCircle(n,s,d,f){this._forEachCell(s-f,d-f,s+f,d+f,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(s),this.circles.push(d),this.circles.push(f)}_insertBoxCell(n,s,d,f,_,b){this.boxCells[_].push(b)}_insertCircleCell(n,s,d,f,_,b){this.circleCells[_].push(b)}_query(n,s,d,f,_,b,T){if(d<0||n>this.width||f<0||s>this.height)return[];const E=[];if(n<=0&&s<=0&&this.width<=d&&this.height<=f){if(_)return[{key:null,x1:n,y1:s,x2:d,y2:f}];for(let I=0;I<this.boxKeys.length;I++)E.push({key:this.boxKeys[I],x1:this.bboxes[4*I],y1:this.bboxes[4*I+1],x2:this.bboxes[4*I+2],y2:this.bboxes[4*I+3]});for(let I=0;I<this.circleKeys.length;I++){const R=this.circles[3*I],z=this.circles[3*I+1],U=this.circles[3*I+2];E.push({key:this.circleKeys[I],x1:R-U,y1:z-U,x2:R+U,y2:z+U})}}else this._forEachCell(n,s,d,f,this._queryCell,E,{hitTest:_,overlapMode:b,seenUids:{box:{},circle:{}}},T);return E}query(n,s,d,f){return this._query(n,s,d,f,!1,null)}hitTest(n,s,d,f,_,b){return this._query(n,s,d,f,!0,_,b).length>0}hitTestCircle(n,s,d,f,_){const b=n-d,T=n+d,E=s-d,I=s+d;if(T<0||b>this.width||I<0||E>this.height)return!1;const R=[];return this._forEachCell(b,E,T,I,this._queryCellCircle,R,{hitTest:!0,overlapMode:f,circle:{x:n,y:s,radius:d},seenUids:{box:{},circle:{}}},_),R.length>0}_queryCell(n,s,d,f,_,b,T,E){const{seenUids:I,hitTest:R,overlapMode:z}=T,U=this.boxCells[_];if(U!==null){const X=this.bboxes;for(const ie of U)if(!I.box[ie]){I.box[ie]=!0;const J=4*ie,ae=this.boxKeys[ie];if(n<=X[J+2]&&s<=X[J+3]&&d>=X[J+0]&&f>=X[J+1]&&(!E||E(ae))&&(!R||!nn(z,ae.overlapMode))&&(b.push({key:ae,x1:X[J],y1:X[J+1],x2:X[J+2],y2:X[J+3]}),R))return!0}}const W=this.circleCells[_];if(W!==null){const X=this.circles;for(const ie of W)if(!I.circle[ie]){I.circle[ie]=!0;const J=3*ie,ae=this.circleKeys[ie];if(this._circleAndRectCollide(X[J],X[J+1],X[J+2],n,s,d,f)&&(!E||E(ae))&&(!R||!nn(z,ae.overlapMode))){const fe=X[J],re=X[J+1],ge=X[J+2];if(b.push({key:ae,x1:fe-ge,y1:re-ge,x2:fe+ge,y2:re+ge}),R)return!0}}}return!1}_queryCellCircle(n,s,d,f,_,b,T,E){const{circle:I,seenUids:R,overlapMode:z}=T,U=this.boxCells[_];if(U!==null){const X=this.bboxes;for(const ie of U)if(!R.box[ie]){R.box[ie]=!0;const J=4*ie,ae=this.boxKeys[ie];if(this._circleAndRectCollide(I.x,I.y,I.radius,X[J+0],X[J+1],X[J+2],X[J+3])&&(!E||E(ae))&&!nn(z,ae.overlapMode))return b.push(!0),!0}}const W=this.circleCells[_];if(W!==null){const X=this.circles;for(const ie of W)if(!R.circle[ie]){R.circle[ie]=!0;const J=3*ie,ae=this.circleKeys[ie];if(this._circlesCollide(X[J],X[J+1],X[J+2],I.x,I.y,I.radius)&&(!E||E(ae))&&!nn(z,ae.overlapMode))return b.push(!0),!0}}}_forEachCell(n,s,d,f,_,b,T,E){const I=this._convertToXCellCoord(n),R=this._convertToYCellCoord(s),z=this._convertToXCellCoord(d),U=this._convertToYCellCoord(f);for(let W=I;W<=z;W++)for(let X=R;X<=U;X++)if(_.call(this,n,s,d,f,this.xCellCount*X+W,b,T,E))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,s,d,f,_,b){const T=f-n,E=_-s,I=d+b;return I*I>T*T+E*E}_circleAndRectCollide(n,s,d,f,_,b,T){const E=(b-f)/2,I=Math.abs(n-(f+E));if(I>E+d)return!1;const R=(T-_)/2,z=Math.abs(s-(_+R));if(z>R+d)return!1;if(I<=E||z<=R)return!0;const U=I-E,W=z-R;return U*U+W*W<=d*d}}function kn(y,n,s,d,f){const _=h.F();return n?(h.J(_,_,[1/f,1/f,1]),s||h.ad(_,_,d.angle)):h.K(_,d.labelPlaneMatrix,y),_}function Yn(y,n,s,d,f){if(n){const _=h.ae(y);return h.J(_,_,[f,f,1]),s||h.ad(_,_,-d.angle),_}return d.glCoordMatrix}function Ht(y,n,s){let d;s?(d=[y.x,y.y,s(y.x,y.y),1],h.af(d,d,n)):(d=[y.x,y.y,0,1],function(_,b,T){const E=b[0],I=b[1];_[0]=T[0]*E+T[4]*I+T[12],_[1]=T[1]*E+T[5]*I+T[13],_[3]=T[3]*E+T[7]*I+T[15]}(d,d,n));const f=d[3];return{point:new h.P(d[0]/f,d[1]/f),signedDistanceFromCamera:f,isOccluded:!1}}function G(y,n){return .5+y/n*.5}function F(y,n){return y.x>=-n[0]&&y.x<=n[0]&&y.y>=-n[1]&&y.y<=n[1]}function B(y,n,s,d,f,_,b,T,E,I,R,z,U,W,X){const ie=d?y.textSizeData:y.iconSizeData,J=h.ag(ie,s.transform.zoom),ae=[256/s.width*2+1,256/s.height*2+1],fe=d?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;fe.clear();const re=y.lineVertexArray,ge=d?y.text.placedSymbolArray:y.icon.placedSymbolArray,we=s.transform.width/s.transform.height;let Te=!1;for(let De=0;De<ge.length;De++){const Ue=ge.get(De);if(Ue.hidden||Ue.writingMode===h.ah.vertical&&!Te){xe(Ue.numGlyphs,fe);continue}Te=!1;const it=Ht(new h.P(Ue.anchorX,Ue.anchorY),n,X);if(!F(it.point,ae)){xe(Ue.numGlyphs,fe);continue}const at=G(s.transform.cameraToCenterDistance,it.signedDistanceFromCamera),Ve=h.ai(ie,J,Ue),Ze=b?Ve/at:Ve*at,ft={getElevation:X,labelPlaneMatrix:f,lineVertexArray:re,pitchWithMap:b,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:I,tileAnchorPoint:new h.P(Ue.anchorX,Ue.anchorY),unwrappedTileID:R,width:z,height:U,translation:W},Lt=he(ft,Ue,Ze,!1,T,n,_,y.glyphOffsetArray,fe,we,E);Te=Lt.useVertical,(Lt.notEnoughRoom||Te||Lt.needsFlipping&&he(ft,Ue,Ze,!0,T,n,_,y.glyphOffsetArray,fe,we,E).notEnoughRoom)&&xe(Ue.numGlyphs,fe)}d?y.text.dynamicLayoutVertexBuffer.updateData(fe):y.icon.dynamicLayoutVertexBuffer.updateData(fe)}function j(y,n,s,d,f,_,b,T){const E=_.glyphStartIndex+_.numGlyphs,I=_.lineStartIndex,R=_.lineStartIndex+_.lineLength,z=n.getoffsetX(_.glyphStartIndex),U=n.getoffsetX(E-1),W=K(y*z,s,d,f,_.segment,I,R,T,b);if(!W)return null;const X=K(y*U,s,d,f,_.segment,I,R,T,b);return X?T.projectionCache.anyProjectionOccluded?null:{first:W,last:X}:null}function Q(y,n,s,d){return y===h.ah.horizontal&&Math.abs(s.y-n.y)>Math.abs(s.x-n.x)*d?{useVertical:!0}:(y===h.ah.vertical?n.y<s.y:n.x>s.x)?{needsFlipping:!0}:null}function he(y,n,s,d,f,_,b,T,E,I,R){const z=s/24,U=n.lineOffsetX*z,W=n.lineOffsetY*z;let X;if(n.numGlyphs>1){const ie=n.glyphStartIndex+n.numGlyphs,J=n.lineStartIndex,ae=n.lineStartIndex+n.lineLength,fe=j(z,T,U,W,d,n,R,y);if(!fe)return{notEnoughRoom:!0};const re=Ht(fe.first.point,b,y.getElevation).point,ge=Ht(fe.last.point,b,y.getElevation).point;if(f&&!d){const we=Q(n.writingMode,re,ge,I);if(we)return we}X=[fe.first];for(let we=n.glyphStartIndex+1;we<ie-1;we++)X.push(K(z*T.getoffsetX(we),U,W,d,n.segment,J,ae,y,R));X.push(fe.last)}else{if(f&&!d){const J=Ht(y.tileAnchorPoint,_,y.getElevation).point,ae=n.lineStartIndex+n.segment+1,fe=new h.P(y.lineVertexArray.getx(ae),y.lineVertexArray.gety(ae)),re=Ht(fe,_,y.getElevation),ge=re.signedDistanceFromCamera>0?re.point:function(Te,De,Ue,it,at,Ve){return me(Te,De,Ue,1,at,Ve)}(y.tileAnchorPoint,fe,J,0,_,y),we=Q(n.writingMode,J,ge,I);if(we)return we}const ie=K(z*T.getoffsetX(n.glyphStartIndex),U,W,d,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,y,R);if(!ie||y.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};X=[ie]}for(const ie of X)h.aj(E,ie.point,ie.angle);return{}}function me(y,n,s,d,f,_){const b=y.add(y.sub(n)._unit()),T=f!==void 0?Ht(b,f,_.getElevation).point:ue(b.x,b.y,_).point,E=s.sub(T);return s.add(E._mult(d/E.mag()))}function _e(y,n,s){const d=n.projectionCache;if(d.projections[y])return d.projections[y];const f=new h.P(n.lineVertexArray.getx(y),n.lineVertexArray.gety(y)),_=ue(f.x,f.y,n);if(_.signedDistanceFromCamera>0)return d.projections[y]=_.point,d.anyProjectionOccluded=d.anyProjectionOccluded||_.isOccluded,_.point;const b=y-s.direction;return function(T,E,I,R,z){return me(T,E,I,R,void 0,z)}(s.distanceFromAnchor===0?n.tileAnchorPoint:new h.P(n.lineVertexArray.getx(b),n.lineVertexArray.gety(b)),f,s.previousVertex,s.absOffsetX-s.distanceFromAnchor+1,n)}function ue(y,n,s){const d=y+s.translation[0],f=n+s.translation[1];let _;return!s.pitchWithMap&&s.projection.useSpecialProjectionForSymbols?(_=s.projection.projectTileCoordinates(d,f,s.unwrappedTileID,s.getElevation),_.point.x=(.5*_.point.x+.5)*s.width,_.point.y=(.5*-_.point.y+.5)*s.height):(_=Ht(new h.P(d,f),s.labelPlaneMatrix,s.getElevation),_.isOccluded=!1),_}function Se(y,n,s){return y._unit()._perp()._mult(n*s)}function Z(y,n,s,d,f,_,b,T,E){if(T.projectionCache.offsets[y])return T.projectionCache.offsets[y];const I=s.add(n);if(y+E.direction<d||y+E.direction>=f)return T.projectionCache.offsets[y]=I,I;const R=_e(y+E.direction,T,E),z=Se(R.sub(s),b,E.direction),U=s.add(z),W=R.add(z);return T.projectionCache.offsets[y]=h.ak(_,I,U,W)||I,T.projectionCache.offsets[y]}function K(y,n,s,d,f,_,b,T,E){const I=d?y-n:y+n;let R=I>0?1:-1,z=0;d&&(R*=-1,z=Math.PI),R<0&&(z+=Math.PI);let U,W=R>0?_+f:_+f+1;T.projectionCache.cachedAnchorPoint?U=T.projectionCache.cachedAnchorPoint:(U=ue(T.tileAnchorPoint.x,T.tileAnchorPoint.y,T).point,T.projectionCache.cachedAnchorPoint=U);let X,ie,J=U,ae=U,fe=0,re=0;const ge=Math.abs(I),we=[];let Te;for(;fe+re<=ge;){if(W+=R,W<_||W>=b)return null;fe+=re,ae=J,ie=X;const it={absOffsetX:ge,direction:R,distanceFromAnchor:fe,previousVertex:ae};if(J=_e(W,T,it),s===0)we.push(ae),Te=J.sub(ae);else{let at;const Ve=J.sub(ae);at=Ve.mag()===0?Se(_e(W+R,T,it).sub(J),s,R):Se(Ve,s,R),ie||(ie=ae.add(at)),X=Z(W,at,J,_,b,ie,s,T,it),we.push(ie),Te=X.sub(ie)}re=Te.mag()}const De=Te._mult((ge-fe)/re)._add(ie||ae),Ue=z+Math.atan2(J.y-ae.y,J.x-ae.x);return we.push(De),{point:De,angle:E?Ue:0,path:we}}const Y=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function xe(y,n){for(let s=0;s<y;s++){const d=n.length;n.resize(d+4),n.float32.set(Y,3*d)}}const Le=100;class We{constructor(n,s,d=new zt(n.width+200,n.height+200,25),f=new zt(n.width+200,n.height+200,25)){this.transform=n,this.mapProjection=s,this.grid=d,this.ignoredGrid=f,this.pitchFactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+Le,this.screenBottomBoundary=n.height+Le,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,s,d,f,_,b,T,E,I,R,z){const U=n.anchorPointX+E[0],W=n.anchorPointY+E[1],X=this.projectAndGetPerspectiveRatio(f,U,W,_,R),ie=this._projectCollisionBox(n,d,f,_,b,T,E,X,R,z),[J,ae,fe,re]=ie.box;return this.mapProjection.useSpecialProjectionForSymbols&&(b?ie.allPointsOccluded:this.mapProjection.isOccluded(U,W,_))||X.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(J,ae,fe,re)||s!=="always"&&this.grid.hitTest(J,ae,fe,re,s,I)?{box:[J,ae,fe,re],placeable:!1,offscreen:!1}:{box:[J,ae,fe,re],placeable:!0,offscreen:this.isOffscreen(J,ae,fe,re)}}placeCollisionCircles(n,s,d,f,_,b,T,E,I,R,z,U,W,X,ie,J){const ae=[],fe=new h.P(s.anchorX,s.anchorY),re=this.getPerspectiveRatio(b,fe.x,fe.y,T,J),ge=(z?_/re:_*re)/h.ap,we={getElevation:J,labelPlaneMatrix:E,lineVertexArray:d,pitchWithMap:z,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:fe,unwrappedTileID:T,width:this.transform.width,height:this.transform.height,translation:ie},Te=j(ge,f,s.lineOffsetX*ge,s.lineOffsetY*ge,!1,s,!1,we);let De=!1,Ue=!1,it=!0;if(Te){const at=.5*W*re+X,Ve=new h.P(-100,-100),Ze=new h.P(this.screenRightBoundary,this.screenBottomBoundary),ft=new rn,Lt=Te.first,Xe=Te.last;let tt=[];for(let Vt=Lt.path.length-1;Vt>=1;Vt--)tt.push(Lt.path[Vt]);for(let Vt=1;Vt<Xe.path.length;Vt++)tt.push(Xe.path[Vt]);const Pt=2.5*at;if(I){const Vt=this.projectPathToScreenSpace(tt,we,I);tt=Vt.some(qt=>qt.signedDistanceFromCamera<=0)?[]:Vt.map(qt=>qt.point)}let Sr=[];if(tt.length>0){const Vt=tt[0].clone(),qt=tt[0].clone();for(let Tr=1;Tr<tt.length;Tr++)Vt.x=Math.min(Vt.x,tt[Tr].x),Vt.y=Math.min(Vt.y,tt[Tr].y),qt.x=Math.max(qt.x,tt[Tr].x),qt.y=Math.max(qt.y,tt[Tr].y);Sr=Vt.x>=Ve.x&&qt.x<=Ze.x&&Vt.y>=Ve.y&&qt.y<=Ze.y?[tt]:qt.x<Ve.x||Vt.x>Ze.x||qt.y<Ve.y||Vt.y>Ze.y?[]:h.al([tt],Ve.x,Ve.y,Ze.x,Ze.y)}for(const Vt of Sr){ft.reset(Vt,.25*at);let qt=0;qt=ft.length<=.5*at?1:Math.ceil(ft.paddedLength/Pt)+1;for(let Tr=0;Tr<qt;Tr++){const Pn=Tr/Math.max(qt-1,1),$i=ft.lerp(Pn),Er=$i.x+Le,Qn=$i.y+Le;ae.push(Er,Qn,at,0);const Vn=Er-at,In=Qn-at,An=Er+at,Hi=Qn+at;if(it=it&&this.isOffscreen(Vn,In,An,Hi),Ue=Ue||this.isInsideGrid(Vn,In,An,Hi),n!=="always"&&this.grid.hitTestCircle(Er,Qn,at,n,U)&&(De=!0,!R))return{circles:[],offscreen:!1,collisionDetected:De}}}}return{circles:!R&&De||!Ue||re<this.perspectiveRatioCutoff?[]:ae,offscreen:it,collisionDetected:De}}projectPathToScreenSpace(n,s,d){return n.map(f=>Ht(f,d,s.getElevation))}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const s=[];let d=1/0,f=1/0,_=-1/0,b=-1/0;for(const R of n){const z=new h.P(R.x+Le,R.y+Le);d=Math.min(d,z.x),f=Math.min(f,z.y),_=Math.max(_,z.x),b=Math.max(b,z.y),s.push(z)}const T=this.grid.query(d,f,_,b).concat(this.ignoredGrid.query(d,f,_,b)),E={},I={};for(const R of T){const z=R.key;if(E[z.bucketInstanceId]===void 0&&(E[z.bucketInstanceId]={}),E[z.bucketInstanceId][z.featureIndex])continue;const U=[new h.P(R.x1,R.y1),new h.P(R.x2,R.y1),new h.P(R.x2,R.y2),new h.P(R.x1,R.y2)];h.am(s,U)&&(E[z.bucketInstanceId][z.featureIndex]=!0,I[z.bucketInstanceId]===void 0&&(I[z.bucketInstanceId]=[]),I[z.bucketInstanceId].push(z.featureIndex))}return I}insertCollisionBox(n,s,d,f,_,b){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:f,featureIndex:_,collisionGroupID:b,overlapMode:s},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,s,d,f,_,b){const T=d?this.ignoredGrid:this.grid,E={bucketInstanceId:f,featureIndex:_,collisionGroupID:b,overlapMode:s};for(let I=0;I<n.length;I+=4)T.insertCircle(E,n[I],n[I+1],n[I+2])}projectAndGetPerspectiveRatio(n,s,d,f,_){const b=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(s,d,f,_):Ht(new h.P(s,d),n,_);return{point:new h.P((b.point.x+1)/2*this.transform.width+Le,(1-b.point.y)/2*this.transform.height+Le),perspectiveRatio:.5+this.transform.cameraToCenterDistance/b.signedDistanceFromCamera*.5,isOccluded:b.isOccluded,signedDistanceFromCamera:b.signedDistanceFromCamera}}getPerspectiveRatio(n,s,d,f,_){const b=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(s,d,f,_):Ht(new h.P(s,d),n,_);return .5+this.transform.cameraToCenterDistance/b.signedDistanceFromCamera*.5}isOffscreen(n,s,d,f){return d<Le||n>=this.screenRightBoundary||f<Le||s>this.screenBottomBoundary}isInsideGrid(n,s,d,f){return d>=0&&n<this.gridRightBoundary&&f>=0&&s<this.gridBottomBoundary}getViewportMatrix(){const n=h.an([]);return h.H(n,n,[-100,-100,0]),n}_projectCollisionBox(n,s,d,f,_,b,T,E,I,R){const z=s*E.perspectiveRatio;let U=new h.P(1,0),W=new h.P(0,1);const X=new h.P(n.anchorPointX+T[0],n.anchorPointY+T[1]);if(b&&!_){const at=this.projectAndGetPerspectiveRatio(d,X.x+1,X.y,f,I).point.sub(E.point).unit(),Ve=Math.atan(at.y/at.x)+(at.x<0?Math.PI:0),Ze=Math.sin(Ve),ft=Math.cos(Ve);U=new h.P(ft,Ze),W=new h.P(-Ze,ft)}else if(!b&&_){const at=-this.transform.angle,Ve=Math.sin(at),Ze=Math.cos(at);U=new h.P(Ze,Ve),W=new h.P(-Ve,Ze)}let ie=E.point,J=z;if(_){ie=X;const at=this.transform.zoom-Math.floor(this.transform.zoom);J=Math.pow(2,-at),J*=this.mapProjection.getPitchedTextCorrection(this.transform,X,f),R||(J*=h.ac(.5+E.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}R&&(ie=ie.add(U.mult(R.x*J)).add(W.mult(R.y*J)));const ae=n.x1*J,fe=n.x2*J,re=(ae+fe)/2,ge=n.y1*J,we=n.y2*J,Te=(ge+we)/2,De=[{offsetX:ae,offsetY:ge},{offsetX:re,offsetY:ge},{offsetX:fe,offsetY:ge},{offsetX:fe,offsetY:Te},{offsetX:fe,offsetY:we},{offsetX:re,offsetY:we},{offsetX:ae,offsetY:we},{offsetX:ae,offsetY:Te}];let Ue=[];for(const{offsetX:at,offsetY:Ve}of De)Ue.push(new h.P(ie.x+U.x*at+W.x*Ve,ie.y+U.y*at+W.y*Ve));let it=!1;if(_){const at=Ue.map(Ve=>this.projectAndGetPerspectiveRatio(d,Ve.x,Ve.y,f,I));it=at.some(Ve=>!Ve.isOccluded),Ue=at.map(Ve=>Ve.point)}else it=!0;return{box:h.ao(Ue),allPointsOccluded:!it}}}function He(y,n,s){return n*(h.W/(y.tileSize*Math.pow(2,s-y.tileID.overscaledZ)))}class Oe{constructor(n,s,d,f){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?s:-s))):f&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class mt{constructor(n,s,d,f,_){this.text=new Oe(n?n.text:null,s,d,_),this.icon=new Oe(n?n.icon:null,s,f,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ot{constructor(n,s,d){this.text=n,this.icon=s,this.skipFade=d}}class dt{constructor(){this.invProjMatrix=h.F(),this.viewportMatrix=h.F(),this.circles=[]}}class ct{constructor(n,s,d,f,_){this.bucketInstanceId=n,this.featureIndex=s,this.sourceLayerIndex=d,this.bucketIndex=f,this.tileID=_}}class kt{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const s=++this.maxGroupID;this.collisionGroups[n]={ID:s,predicate:d=>d.collisionGroupID===s}}return this.collisionGroups[n]}}function Bt(y,n,s,d,f){const{horizontalAlign:_,verticalAlign:b}=h.au(y);return new h.P(-(_-.5)*n+d[0]*f,-(b-.5)*s+d[1]*f)}class Ut{constructor(n,s,d,f,_,b){this.transform=n.clone(),this.terrain=d,this.collisionIndex=new We(this.transform,s),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new kt(_),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(n){const s=this.terrain;return s?(d,f)=>s.getElevation(n,d,f):null}getBucketParts(n,s,d,f){const _=d.getBucket(s),b=d.latestFeatureIndex;if(!_||!b||s.id!==_.layerIds[0])return;const T=d.collisionBoxArray,E=_.layers[0].layout,I=_.layers[0].paint,R=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),z=d.tileSize/h.W,U=d.tileID.toUnwrapped(),W=this.transform.calculatePosMatrix(U),X=E.get("text-pitch-alignment")==="map",ie=E.get("text-rotation-alignment")==="map",J=He(d,1,this.transform.zoom),ae=this.collisionIndex.mapProjection.translatePosition(this.transform,d,I.get("text-translate"),I.get("text-translate-anchor")),fe=this.collisionIndex.mapProjection.translatePosition(this.transform,d,I.get("icon-translate"),I.get("icon-translate-anchor")),re=kn(W,X,ie,this.transform,J);let ge=null;if(X){const Te=Yn(W,X,ie,this.transform,J);ge=h.K([],this.transform.labelPlaneMatrix,Te)}this.retainedQueryData[_.bucketInstanceId]=new ct(_.bucketInstanceId,b,_.sourceLayerIndex,_.index,d.tileID);const we={bucket:_,layout:E,translationText:ae,translationIcon:fe,posMatrix:W,unwrappedTileID:U,textLabelPlaneMatrix:re,labelToScreenMatrix:ge,scale:R,textPixelRatio:z,holdingForFade:d.holdingForFade(),collisionBoxArray:T,partiallyEvaluatedTextSize:h.ag(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(f)for(const Te of _.sortKeyRanges){const{sortKey:De,symbolInstanceStart:Ue,symbolInstanceEnd:it}=Te;n.push({sortKey:De,symbolInstanceStart:Ue,symbolInstanceEnd:it,parameters:we})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:we})}attemptAnchorPlacement(n,s,d,f,_,b,T,E,I,R,z,U,W,X,ie,J,ae,fe,re){const ge=h.aq[n.textAnchor],we=[n.textOffset0,n.textOffset1],Te=Bt(ge,d,f,we,_),De=this.collisionIndex.placeCollisionBox(s,U,E,I,R,T,b,J,z.predicate,re,Te);if((!fe||this.collisionIndex.placeCollisionBox(fe,U,E,I,R,T,b,ae,z.predicate,re,Te).placeable)&&De.placeable){let Ue;if(this.prevPlacement&&this.prevPlacement.variableOffsets[W.crossTileID]&&this.prevPlacement.placements[W.crossTileID]&&this.prevPlacement.placements[W.crossTileID].text&&(Ue=this.prevPlacement.variableOffsets[W.crossTileID].anchor),W.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[W.crossTileID]={textOffset:we,width:d,height:f,anchor:ge,textBoxScale:_,prevAnchor:Ue},this.markUsedJustification(X,ge,W,ie),X.allowVerticalPlacement&&(this.markUsedOrientation(X,ie,W),this.placedOrientations[W.crossTileID]=ie),{shift:Te,placedGlyphBoxes:De}}}placeLayerBucketPart(n,s,d){const{bucket:f,layout:_,translationText:b,translationIcon:T,posMatrix:E,unwrappedTileID:I,textLabelPlaneMatrix:R,labelToScreenMatrix:z,textPixelRatio:U,holdingForFade:W,collisionBoxArray:X,partiallyEvaluatedTextSize:ie,collisionGroup:J}=n.parameters,ae=_.get("text-optional"),fe=_.get("icon-optional"),re=h.ar(_,"text-overlap","text-allow-overlap"),ge=re==="always",we=h.ar(_,"icon-overlap","icon-allow-overlap"),Te=we==="always",De=_.get("text-rotation-alignment")==="map",Ue=_.get("text-pitch-alignment")==="map",it=_.get("icon-text-fit")!=="none",at=_.get("symbol-z-order")==="viewport-y",Ve=ge&&(Te||!f.hasIconData()||fe),Ze=Te&&(ge||!f.hasTextData()||ae);!f.collisionArrays&&X&&f.deserializeCollisionBoxes(X);const ft=this._getTerrainElevationFunc(this.retainedQueryData[f.bucketInstanceId].tileID),Lt=(Xe,tt,Pt)=>{var Sr,Vt;if(s[Xe.crossTileID])return;if(W)return void(this.placements[Xe.crossTileID]=new ot(!1,!1,!1));let qt=!1,Tr=!1,Pn=!0,$i=null,Er={box:null,placeable:!1,offscreen:null},Qn={box:null,placeable:!1,offscreen:null},Vn=null,In=null,An=null,Hi=0,ma=0,Ql=0;tt.textFeatureIndex?Hi=tt.textFeatureIndex:Xe.useRuntimeCollisionCircles&&(Hi=Xe.featureIndex),tt.verticalTextFeatureIndex&&(ma=tt.verticalTextFeatureIndex);const qa=tt.textBox;if(qa){const wn=Mn=>{let zn=h.ah.horizontal;if(f.allowVerticalPlacement&&!Mn&&this.prevPlacement){const fn=this.prevPlacement.placedOrientations[Xe.crossTileID];fn&&(this.placedOrientations[Xe.crossTileID]=fn,zn=fn,this.markUsedOrientation(f,zn,Xe))}return zn},Wi=(Mn,zn)=>{if(f.allowVerticalPlacement&&Xe.numVerticalGlyphVertices>0&&tt.verticalTextBox){for(const fn of f.writingModes)if(fn===h.ah.vertical?(Er=zn(),Qn=Er):Er=Mn(),Er&&Er.placeable)break}else Er=Mn()},Zo=Xe.textAnchorOffsetStartIndex,Za=Xe.textAnchorOffsetEndIndex;if(Za===Zo){const Mn=(zn,fn)=>{const Lr=this.collisionIndex.placeCollisionBox(zn,re,U,E,I,Ue,De,b,J.predicate,ft);return Lr&&Lr.placeable&&(this.markUsedOrientation(f,fn,Xe),this.placedOrientations[Xe.crossTileID]=fn),Lr};Wi(()=>Mn(qa,h.ah.horizontal),()=>{const zn=tt.verticalTextBox;return f.allowVerticalPlacement&&Xe.numVerticalGlyphVertices>0&&zn?Mn(zn,h.ah.vertical):{box:null,offscreen:null}}),wn(Er&&Er.placeable)}else{let Mn=h.aq[(Vt=(Sr=this.prevPlacement)===null||Sr===void 0?void 0:Sr.variableOffsets[Xe.crossTileID])===null||Vt===void 0?void 0:Vt.anchor];const zn=(Lr,Ga,Zc)=>{const un=Lr.x2-Lr.x1,rp=Lr.y2-Lr.y1,tu=Xe.textBoxScale,ru=it&&we==="never"?Ga:null;let Go=null,np=re==="never"?1:2,Gc="never";Mn&&np++;for(let Kc=0;Kc<np;Kc++){for(let Xc=Zo;Xc<Za;Xc++){const nu=f.textAnchorOffsets.get(Xc);if(Mn&&nu.textAnchor!==Mn)continue;const Ka=this.attemptAnchorPlacement(nu,Lr,un,rp,tu,De,Ue,U,E,I,J,Gc,Xe,f,Zc,b,T,ru,ft);if(Ka&&(Go=Ka.placedGlyphBoxes,Go&&Go.placeable))return qt=!0,$i=Ka.shift,Go}Mn?Mn=null:Gc=re}return d&&!Go&&(Go={box:this.collisionIndex.placeCollisionBox(qa,"always",U,E,I,Ue,De,b,J.predicate,ft,new h.P(0,0)).box,offscreen:!1,placeable:!1}),Go};Wi(()=>zn(qa,tt.iconBox,h.ah.horizontal),()=>{const Lr=tt.verticalTextBox;return f.allowVerticalPlacement&&(!Er||!Er.placeable)&&Xe.numVerticalGlyphVertices>0&&Lr?zn(Lr,tt.verticalIconBox,h.ah.vertical):{box:null,occluded:!0,offscreen:null}}),Er&&(qt=Er.placeable,Pn=Er.offscreen);const fn=wn(Er&&Er.placeable);if(!qt&&this.prevPlacement){const Lr=this.prevPlacement.variableOffsets[Xe.crossTileID];Lr&&(this.variableOffsets[Xe.crossTileID]=Lr,this.markUsedJustification(f,Lr.anchor,Xe,fn))}}}if(Vn=Er,qt=Vn&&Vn.placeable,Pn=Vn&&Vn.offscreen,Xe.useRuntimeCollisionCircles){const wn=f.text.placedSymbolArray.get(Xe.centerJustifiedTextSymbolIndex),Wi=h.ai(f.textSizeData,ie,wn),Zo=_.get("text-padding");In=this.collisionIndex.placeCollisionCircles(re,wn,f.lineVertexArray,f.glyphOffsetArray,Wi,E,I,R,z,d,Ue,J.predicate,Xe.collisionCircleDiameter,Zo,b,ft),In.circles.length&&In.collisionDetected&&!d&&h.w("Collisions detected, but collision boxes are not shown"),qt=ge||In.circles.length>0&&!In.collisionDetected,Pn=Pn&&In.offscreen}if(tt.iconFeatureIndex&&(Ql=tt.iconFeatureIndex),tt.iconBox){const wn=Wi=>this.collisionIndex.placeCollisionBox(Wi,we,U,E,I,Ue,De,T,J.predicate,ft,it&&$i?$i:void 0);Qn&&Qn.placeable&&tt.verticalIconBox?(An=wn(tt.verticalIconBox),Tr=An.placeable):(An=wn(tt.iconBox),Tr=An.placeable),Pn=Pn&&An.offscreen}const ga=ae||Xe.numHorizontalGlyphVertices===0&&Xe.numVerticalGlyphVertices===0,eu=fe||Xe.numIconVertices===0;ga||eu?eu?ga||(Tr=Tr&&qt):qt=Tr&&qt:Tr=qt=Tr&&qt;const qc=Tr&&An.placeable;if(qt&&Vn.placeable&&this.collisionIndex.insertCollisionBox(Vn.box,re,_.get("text-ignore-placement"),f.bucketInstanceId,Qn&&Qn.placeable&&ma?ma:Hi,J.ID),qc&&this.collisionIndex.insertCollisionBox(An.box,we,_.get("icon-ignore-placement"),f.bucketInstanceId,Ql,J.ID),In&&qt&&this.collisionIndex.insertCollisionCircles(In.circles,re,_.get("text-ignore-placement"),f.bucketInstanceId,Hi,J.ID),d&&this.storeCollisionData(f.bucketInstanceId,Pt,tt,Vn,An,In),Xe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(f.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Xe.crossTileID]=new ot(qt||Ve,Tr||Ze,Pn||f.justReloaded),s[Xe.crossTileID]=!0};if(at){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Xe=f.getSortedSymbolIndexes(this.transform.angle);for(let tt=Xe.length-1;tt>=0;--tt){const Pt=Xe[tt];Lt(f.symbolInstances.get(Pt),f.collisionArrays[Pt],Pt)}}else for(let Xe=n.symbolInstanceStart;Xe<n.symbolInstanceEnd;Xe++)Lt(f.symbolInstances.get(Xe),f.collisionArrays[Xe],Xe);if(d&&f.bucketInstanceId in this.collisionCircleArrays){const Xe=this.collisionCircleArrays[f.bucketInstanceId];h.as(Xe.invProjMatrix,E),Xe.viewportMatrix=this.collisionIndex.getViewportMatrix()}f.justReloaded=!1}storeCollisionData(n,s,d,f,_,b){if(d.textBox||d.iconBox){let T,E;this.collisionBoxArrays.has(n)?T=this.collisionBoxArrays.get(n):(T=new Map,this.collisionBoxArrays.set(n,T)),T.has(s)?E=T.get(s):(E={text:null,icon:null},T.set(s,E)),d.textBox&&(E.text=f.box),d.iconBox&&(E.icon=_.box)}if(b){let T=this.collisionCircleArrays[n];T===void 0&&(T=this.collisionCircleArrays[n]=new dt);for(let E=0;E<b.circles.length;E+=4)T.circles.push(b.circles[E+0]),T.circles.push(b.circles[E+1]),T.circles.push(b.circles[E+2]),T.circles.push(b.collisionDetected?1:0)}}markUsedJustification(n,s,d,f){let _;_=f===h.ah.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[h.at(s)];const b=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const T of b)T>=0&&(n.text.placedSymbolArray.get(T).crossTileID=_>=0&&T!==_?0:d.crossTileID)}markUsedOrientation(n,s,d){const f=s===h.ah.horizontal||s===h.ah.horizontalOnly?s:0,_=s===h.ah.vertical?s:0,b=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const T of b)n.text.placedSymbolArray.get(T).placedOrientation=f;d.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const s=this.prevPlacement;let d=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;const f=s?s.symbolFadeChange(n):1,_=s?s.opacities:{},b=s?s.variableOffsets:{},T=s?s.placedOrientations:{};for(const E in this.placements){const I=this.placements[E],R=_[E];R?(this.opacities[E]=new mt(R,f,I.text,I.icon),d=d||I.text!==R.text.placed||I.icon!==R.icon.placed):(this.opacities[E]=new mt(null,f,I.text,I.icon,I.skipFade),d=d||I.text||I.icon)}for(const E in _){const I=_[E];if(!this.opacities[E]){const R=new mt(I,f,!1,!1);R.isHidden()||(this.opacities[E]=R,d=d||I.text.placed||I.icon.placed)}}for(const E in b)this.variableOffsets[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.variableOffsets[E]=b[E]);for(const E in T)this.placedOrientations[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.placedOrientations[E]=T[E]);if(s&&s.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:n)}updateLayerOpacities(n,s){const d={};for(const f of s){const _=f.getBucket(n);_&&f.latestFeatureIndex&&n.id===_.layerIds[0]&&this.updateBucketOpacities(_,f.tileID,d,f.collisionBoxArray)}}updateBucketOpacities(n,s,d,f){n.hasTextData()&&(n.text.opacityVertexArray.clear(),n.text.hasVisibleVertices=!1),n.hasIconData()&&(n.icon.opacityVertexArray.clear(),n.icon.hasVisibleVertices=!1),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const _=n.layers[0],b=_.layout,T=new mt(null,0,!1,!1,!0),E=b.get("text-allow-overlap"),I=b.get("icon-allow-overlap"),R=_._unevaluatedLayout.hasValue("text-variable-anchor")||_._unevaluatedLayout.hasValue("text-variable-anchor-offset"),z=b.get("text-rotation-alignment")==="map",U=b.get("text-pitch-alignment")==="map",W=b.get("icon-text-fit")!=="none",X=new mt(null,0,E&&(I||!n.hasIconData()||b.get("icon-optional")),I&&(E||!n.hasTextData()||b.get("text-optional")),!0);!n.collisionArrays&&f&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(f);const ie=(ae,fe,re)=>{for(let ge=0;ge<fe/4;ge++)ae.opacityVertexArray.emplaceBack(re);ae.hasVisibleVertices=ae.hasVisibleVertices||re!==co},J=this.collisionBoxArrays.get(n.bucketInstanceId);for(let ae=0;ae<n.symbolInstances.length;ae++){const fe=n.symbolInstances.get(ae),{numHorizontalGlyphVertices:re,numVerticalGlyphVertices:ge,crossTileID:we}=fe;let Te=this.opacities[we];d[we]?Te=T:Te||(Te=X,this.opacities[we]=Te),d[we]=!0;const De=fe.numIconVertices>0,Ue=this.placedOrientations[fe.crossTileID],it=Ue===h.ah.vertical,at=Ue===h.ah.horizontal||Ue===h.ah.horizontalOnly;if(re>0||ge>0){const Ze=sn(Te.text);ie(n.text,re,it?co:Ze),ie(n.text,ge,at?co:Ze);const ft=Te.text.isHidden();[fe.rightJustifiedTextSymbolIndex,fe.centerJustifiedTextSymbolIndex,fe.leftJustifiedTextSymbolIndex].forEach(tt=>{tt>=0&&(n.text.placedSymbolArray.get(tt).hidden=ft||it?1:0)}),fe.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(fe.verticalPlacedTextSymbolIndex).hidden=ft||at?1:0);const Lt=this.variableOffsets[fe.crossTileID];Lt&&this.markUsedJustification(n,Lt.anchor,fe,Ue);const Xe=this.placedOrientations[fe.crossTileID];Xe&&(this.markUsedJustification(n,"left",fe,Xe),this.markUsedOrientation(n,Xe,fe))}if(De){const Ze=sn(Te.icon),ft=!(W&&fe.verticalPlacedIconSymbolIndex&&it);fe.placedIconSymbolIndex>=0&&(ie(n.icon,fe.numIconVertices,ft?Ze:co),n.icon.placedSymbolArray.get(fe.placedIconSymbolIndex).hidden=Te.icon.isHidden()),fe.verticalPlacedIconSymbolIndex>=0&&(ie(n.icon,fe.numVerticalIconVertices,ft?co:Ze),n.icon.placedSymbolArray.get(fe.verticalPlacedIconSymbolIndex).hidden=Te.icon.isHidden())}const Ve=J&&J.has(ae)?J.get(ae):{text:null,icon:null};if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const Ze=n.collisionArrays[ae];if(Ze){let ft=new h.P(0,0);if(Ze.textBox||Ze.verticalTextBox){let Lt=!0;if(R){const Xe=this.variableOffsets[we];Xe?(ft=Bt(Xe.anchor,Xe.width,Xe.height,Xe.textOffset,Xe.textBoxScale),z&&ft._rotate(U?this.transform.angle:-this.transform.angle)):Lt=!1}if(Ze.textBox||Ze.verticalTextBox){let Xe;Ze.textBox&&(Xe=it),Ze.verticalTextBox&&(Xe=at),sr(n.textCollisionBox.collisionVertexArray,Te.text.placed,!Lt||Xe,Ve.text,ft.x,ft.y)}}if(Ze.iconBox||Ze.verticalIconBox){const Lt=!!(!at&&Ze.verticalIconBox);let Xe;Ze.iconBox&&(Xe=Lt),Ze.verticalIconBox&&(Xe=!Lt),sr(n.iconCollisionBox.collisionVertexArray,Te.icon.placed,Xe,Ve.icon,W?ft.x:0,W?ft.y:0)}}}}if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);if(n.bucketInstanceId in this.collisionCircleArrays){const ae=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=ae.invProjMatrix,n.placementViewportMatrix=ae.viewportMatrix,n.collisionCircleArray=ae.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,s){const d=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*d>n}setStale(){this.stale=!0}}function sr(y,n,s,d,f,_){d&&d.length!==0||(d=[0,0,0,0]);const b=d[0]-Le,T=d[1]-Le,E=d[2]-Le,I=d[3]-Le;y.emplaceBack(n?1:0,s?1:0,f||0,_||0,b,T),y.emplaceBack(n?1:0,s?1:0,f||0,_||0,E,T),y.emplaceBack(n?1:0,s?1:0,f||0,_||0,E,I),y.emplaceBack(n?1:0,s?1:0,f||0,_||0,b,I)}const Wt=Math.pow(2,25),Ei=Math.pow(2,24),so=Math.pow(2,17),Gt=Math.pow(2,16),lo=Math.pow(2,9),uo=Math.pow(2,8),Ar=Math.pow(2,1);function sn(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const n=y.placed?1:0,s=Math.floor(127*y.opacity);return s*Wt+n*Ei+s*so+n*Gt+s*lo+n*uo+s*Ar+n}const co=0;function ln(){return{isOccluded:(y,n,s)=>!1,getPitchedTextCorrection:(y,n,s)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(y,n,s,d){throw new Error("Not implemented.")},translatePosition:(y,n,s,d)=>function(f,_,b,T,E=!1){if(!b[0]&&!b[1])return[0,0];const I=E?T==="map"?f.angle:0:T==="viewport"?-f.angle:0;if(I){const R=Math.sin(I),z=Math.cos(I);b=[b[0]*z-b[1]*R,b[0]*R+b[1]*z]}return[E?b[0]:He(_,b[0],f.zoom),E?b[1]:He(_,b[1],f.zoom)]}(y,n,s,d),getCircleRadiusCorrection:y=>1}}class At{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,s,d,f,_){const b=this._bucketParts;for(;this._currentTileIndex<n.length;)if(s.getBucketParts(b,f,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,b.sort((T,E)=>T.sortKey-E.sortKey));this._currentPartIndex<b.length;)if(s.placeLayerBucketPart(b[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,_())return!0;return!1}}class Pr{constructor(n,s,d,f,_,b,T,E){this.placement=new Ut(n,ln(),s,b,T,E),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=f,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(n,s,d){const f=M.now(),_=()=>!this._forceFullPlacement&&M.now()-f>2;for(;this._currentPlacementIndex>=0;){const b=s[n[this._currentPlacementIndex]],T=this.placement.collisionIndex.transform.zoom;if(b.type==="symbol"&&(!b.minzoom||b.minzoom<=T)&&(!b.maxzoom||b.maxzoom>T)){if(this._inProgressLayer||(this._inProgressLayer=new At(b)),this._inProgressLayer.continuePlacement(d[b.source],this.placement,this._showCollisionBoxes,b,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const Or=512/h.W/2;class Nt{constructor(n,s,d){this.tileID=n,this.bucketInstanceId=d,this._symbolsByKey={};const f=new Map;for(let _=0;_<s.length;_++){const b=s.get(_),T=b.key,E=f.get(T);E?E.push(b):f.set(T,[b])}for(const[_,b]of f){const T={positions:b.map(E=>({x:Math.floor(E.anchorX*Or),y:Math.floor(E.anchorY*Or)})),crossTileIDs:b.map(E=>E.crossTileID)};if(T.positions.length>128){const E=new h.av(T.positions.length,16,Uint16Array);for(const{x:I,y:R}of T.positions)E.add(I,R);E.finish(),delete T.positions,T.index=E}this._symbolsByKey[_]=T}}getScaledCoordinates(n,s){const{x:d,y:f,z:_}=this.tileID.canonical,{x:b,y:T,z:E}=s.canonical,I=Or/Math.pow(2,E-_),R=(T*h.W+n.anchorY)*I,z=f*h.W*Or;return{x:Math.floor((b*h.W+n.anchorX)*I-d*h.W*Or),y:Math.floor(R-z)}}findMatches(n,s,d){const f=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z);for(let _=0;_<n.length;_++){const b=n.get(_);if(b.crossTileID)continue;const T=this._symbolsByKey[b.key];if(!T)continue;const E=this.getScaledCoordinates(b,s);if(T.index){const I=T.index.range(E.x-f,E.y-f,E.x+f,E.y+f).sort();for(const R of I){const z=T.crossTileIDs[R];if(!d[z]){d[z]=!0,b.crossTileID=z;break}}}else if(T.positions)for(let I=0;I<T.positions.length;I++){const R=T.positions[I],z=T.crossTileIDs[I];if(Math.abs(R.x-E.x)<=f&&Math.abs(R.y-E.y)<=f&&!d[z]){d[z]=!0,b.crossTileID=z;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:n})=>n)}}class jn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ho{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const s=Math.round((n-this.lng)/360);if(s!==0)for(const d in this.indexes){const f=this.indexes[d],_={};for(const b in f){const T=f[b];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+s),_[T.tileID.key]=T}this.indexes[d]=_}this.lng=n}addBucket(n,s,d){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let _=0;_<s.symbolInstances.length;_++)s.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const f=this.usedCrossTileIDs[n.overscaledZ];for(const _ in this.indexes){const b=this.indexes[_];if(Number(_)>n.overscaledZ)for(const T in b){const E=b[T];E.tileID.isChildOf(n)&&E.findMatches(s.symbolInstances,n,f)}else{const T=b[n.scaledTo(Number(_)).key];T&&T.findMatches(s.symbolInstances,n,f)}}for(let _=0;_<s.symbolInstances.length;_++){const b=s.symbolInstances.get(_);b.crossTileID||(b.crossTileID=d.generate(),f[b.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new Nt(n,s.symbolInstances,s.bucketInstanceId),!0}removeBucketCrossTileIDs(n,s){for(const d of s.getCrossTileIDsLists())for(const f of d)delete this.usedCrossTileIDs[n][f]}removeStaleBuckets(n){let s=!1;for(const d in this.indexes){const f=this.indexes[d];for(const _ in f)n[f[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,f[_]),delete f[_],s=!0)}return s}}class Mr{constructor(){this.layerIndexes={},this.crossTileIDs=new jn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,s,d){let f=this.layerIndexes[n.id];f===void 0&&(f=this.layerIndexes[n.id]=new ho);let _=!1;const b={};f.handleWrapJump(d);for(const T of s){const E=T.getBucket(n);E&&n.id===E.layerIds[0]&&(E.bucketInstanceId||(E.bucketInstanceId=++this.maxBucketInstanceId),f.addBucket(T.tileID,E,this.crossTileIDs)&&(_=!0),b[E.bucketInstanceId]=!0)}return f.removeStaleBuckets(b)&&(_=!0),_}pruneUnusedLayers(n){const s={};n.forEach(d=>{s[d]=!0});for(const d in this.layerIndexes)s[d]||delete this.layerIndexes[d]}}const aa=(y,n)=>h.t(y,n&&n.filter(s=>s.identifier!=="source.canvas")),Vi=h.aw();class wl extends h.E{constructor(n,s={}){super(),this._rtlPluginLoaded=()=>{for(const d in this.sourceCaches){const f=this.sourceCaches[d].getSource().type;f!=="vector"&&f!=="geojson"||this.sourceCaches[d].reload()}},this.map=n,this.dispatcher=new En(en(),n._getMapId()),this.dispatcher.registerMessageHandler("GG",(d,f)=>this.getGlyphs(d,f)),this.dispatcher.registerMessageHandler("GI",(d,f)=>this.getImages(d,f)),this.imageManager=new Ke,this.imageManager.setEventedParent(this),this.glyphManager=new Ft(n._requestManager,s.localIdeographFontFamily),this.lineAtlas=new Et(256,512),this.crossTileSymbolIndex=new Mr,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new h.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",h.ay()),br().on(pn,this._rtlPluginLoaded),this.on("data",d=>{if(d.dataType!=="source"||d.sourceDataType!=="metadata")return;const f=this.sourceCaches[d.sourceId];if(!f)return;const _=f.getSource();if(_&&_.vectorLayerIds)for(const b in this._layers){const T=this._layers[b];T.source===_.id&&this._validateLayer(T)}})}loadURL(n,s={},d){this.fire(new h.k("dataloading",{dataType:"style"})),s.validate=typeof s.validate!="boolean"||s.validate;const f=this.map._requestManager.transformRequest(n,"Style");this._loadStyleRequest=new AbortController,h.h(f,this._loadStyleRequest).then(_=>{this._loadStyleRequest=null,this._load(_.data,s,d)}).catch(_=>{this._loadStyleRequest=null,_&&this.fire(new h.j(_))})}loadJSON(n,s={},d){this.fire(new h.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,M.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,s.validate=s.validate!==!1,this._load(n,s,d)}).catch(()=>{})}loadEmpty(){this.fire(new h.k("dataloading",{dataType:"style"})),this._load(Vi,{validate:!1})}_load(n,s,d){var f;const _=s.transformStyle?s.transformStyle(d,n):n;if(!s.validate||!aa(this,h.x(_))){this._loaded=!0,this.stylesheet=_;for(const b in _.sources)this.addSource(b,_.sources[b],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new bt(this.stylesheet.light),this.map.setTerrain((f=this.stylesheet.terrain)!==null&&f!==void 0?f:null),this.fire(new h.k("data",{dataType:"style"})),this.fire(new h.k("style.load"))}}_createLayers(){const n=h.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",n),this._order=n.map(s=>s.id),this._layers={},this._serializedLayers=null;for(const s of n){const d=h.aA(s);d.setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=d}}_loadSprite(n,s=!1,d=void 0){let f;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(_,b,T,E){return h._(this,void 0,void 0,function*(){const I=Ie(_),R=T>1?"@2x":"",z={},U={};for(const{id:W,url:X}of I){const ie=b.transformRequest(ze(X,R,".json"),"SpriteJSON");z[W]=h.h(ie,E);const J=b.transformRequest(ze(X,R,".png"),"SpriteImage");U[W]=ne.getImage(J,E)}return yield Promise.all([...Object.values(z),...Object.values(U)]),function(W,X){return h._(this,void 0,void 0,function*(){const ie={};for(const J in W){ie[J]={};const ae=M.getImageCanvasContext((yield X[J]).data),fe=(yield W[J]).data;for(const re in fe){const{width:ge,height:we,x:Te,y:De,sdf:Ue,pixelRatio:it,stretchX:at,stretchY:Ve,content:Ze,textFitWidth:ft,textFitHeight:Lt}=fe[re];ie[J][re]={data:null,pixelRatio:it,sdf:Ue,stretchX:at,stretchY:Ve,content:Ze,textFitWidth:ft,textFitHeight:Lt,spriteData:{width:ge,height:we,x:Te,y:De,context:ae}}}}return ie})}(z,U)})}(n,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(_=>{if(this._spriteRequest=null,_)for(const b in _){this._spritesImagesIds[b]=[];const T=this._spritesImagesIds[b]?this._spritesImagesIds[b].filter(E=>!(E in _)):[];for(const E of T)this.imageManager.removeImage(E),this._changedImages[E]=!0;for(const E in _[b]){const I=b==="default"?E:`${b}:${E}`;this._spritesImagesIds[b].push(I),I in this.imageManager.images?this.imageManager.updateImage(I,_[b][E],!1):this.imageManager.addImage(I,_[b][E]),s&&(this._changedImages[I]=!0)}}}).catch(_=>{this._spriteRequest=null,f=_,this.fire(new h.j(f))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),s&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new h.k("data",{dataType:"style"})),d&&d(f)})}_unloadSprite(){for(const n of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(n),this._changedImages[n]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new h.k("data",{dataType:"style"}))}_validateLayer(n){const s=this.sourceCaches[n.source];if(!s)return;const d=n.sourceLayer;if(!d)return;const f=s.getSource();(f.type==="geojson"||f.vectorLayerIds&&f.vectorLayerIds.indexOf(d)===-1)&&this.fire(new h.j(new Error(`Source layer "${d}" does not exist on source "${f.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(n){const s=this._serializedAllLayers();if(!n||n.length===0)return Object.values(s);const d=[];for(const f of n)s[f]&&d.push(s[f]);return d}_serializedAllLayers(){let n=this._serializedLayers;if(n)return n;n=this._serializedLayers={};const s=Object.keys(this._layers);for(const d of s){const f=this._layers[d];f.type!=="custom"&&(n[d]=f.serialize())}return n}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const n in this.sourceCaches)if(this.sourceCaches[n].hasTransition())return!0;for(const n in this._layers)if(this._layers[n].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const s=this._changed;if(s){const f=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(f.length||_.length)&&this._updateWorkerLayers(f,_);for(const b in this._updatedSources){const T=this._updatedSources[b];if(T==="reload")this._reloadSource(b);else{if(T!=="clear")throw new Error(`Invalid action ${T}`);this._clearSource(b)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const b in this._updatedPaintProps)this._layers[b].updateTransitions(n);this.light.updateTransitions(n),this._resetUpdates()}const d={};for(const f in this.sourceCaches){const _=this.sourceCaches[f];d[f]=_.used,_.used=!1}for(const f of this._order){const _=this._layers[f];_.recalculate(n,this._availableImages),!_.isHidden(n.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const f in d){const _=this.sourceCaches[f];!!d[f]!=!!_.used&&_.fire(new h.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:f}))}this.light.recalculate(n),this.z=n.zoom,s&&this.fire(new h.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const n in this.sourceCaches)this.sourceCaches[n].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(n,s){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(n),removedIds:s})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(n,s={}){var d;this._checkLoaded();const f=this.serialize();if(n=s.transformStyle?s.transformStyle(f,n):n,((d=s.validate)===null||d===void 0||d)&&aa(this,h.x(n)))return!1;(n=h.aB(n)).layers=h.az(n.layers);const _=h.aC(f,n),b=this._getOperationsToPerform(_);if(b.unimplemented.length>0)throw new Error(`Unimplemented: ${b.unimplemented.join(", ")}.`);if(b.operations.length===0)return!1;for(const T of b.operations)T();return this.stylesheet=n,this._serializedLayers=null,!0}_getOperationsToPerform(n){const s=[],d=[];for(const f of n)switch(f.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":s.push(()=>this.addLayer.apply(this,f.args));break;case"removeLayer":s.push(()=>this.removeLayer.apply(this,f.args));break;case"setPaintProperty":s.push(()=>this.setPaintProperty.apply(this,f.args));break;case"setLayoutProperty":s.push(()=>this.setLayoutProperty.apply(this,f.args));break;case"setFilter":s.push(()=>this.setFilter.apply(this,f.args));break;case"addSource":s.push(()=>this.addSource.apply(this,f.args));break;case"removeSource":s.push(()=>this.removeSource.apply(this,f.args));break;case"setLayerZoomRange":s.push(()=>this.setLayerZoomRange.apply(this,f.args));break;case"setLight":s.push(()=>this.setLight.apply(this,f.args));break;case"setGeoJSONSourceData":s.push(()=>this.setGeoJSONSourceData.apply(this,f.args));break;case"setGlyphs":s.push(()=>this.setGlyphs.apply(this,f.args));break;case"setSprite":s.push(()=>this.setSprite.apply(this,f.args));break;case"setTerrain":s.push(()=>this.map.setTerrain.apply(this,f.args));break;case"setTransition":s.push(()=>{});break;default:d.push(f.command)}return{operations:s,unimplemented:d}}addImage(n,s){if(this.getImage(n))return this.fire(new h.j(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,s),this._afterImageUpdated(n)}updateImage(n,s){this.imageManager.updateImage(n,s)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new h.j(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new h.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,s,d={}){if(this._checkLoaded(),this.sourceCaches[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!s.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(s).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(s.type)>=0&&this._validate(h.x.source,`sources.${n}`,s,null,d))return;this.map&&this.map._collectResourceTiming&&(s.collectResourceTiming=!0);const f=this.sourceCaches[n]=new Ne(n,s,this.dispatcher);f.style=this,f.setEventedParent(this,()=>({isSourceLoaded:f.loaded(),source:f.serialize(),sourceId:n})),f.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===n)return this.fire(new h.j(new Error(`Source "${n}" cannot be removed while layer "${d}" is using it.`)));const s=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],s.fire(new h.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),s.setEventedParent(null),s.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,s){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const d=this.sourceCaches[n].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(s),this._changed=!0}getSource(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()}addLayer(n,s,d={}){this._checkLoaded();const f=n.id;if(this.getLayer(f))return void this.fire(new h.j(new Error(`Layer "${f}" already exists on this map.`)));let _;if(n.type==="custom"){if(aa(this,h.aD(n)))return;_=h.aA(n)}else{if("source"in n&&typeof n.source=="object"&&(this.addSource(f,n.source),n=h.aB(n),n=h.e(n,{source:f})),this._validate(h.x.layer,`layers.${f}`,n,{arrayIndex:-1},d))return;_=h.aA(n),this._validateLayer(_),_.setEventedParent(this,{layer:{id:f}})}const b=s?this._order.indexOf(s):this._order.length;if(s&&b===-1)this.fire(new h.j(new Error(`Cannot add layer "${f}" before non-existing layer "${s}".`)));else{if(this._order.splice(b,0,f),this._layerOrderChanged=!0,this._layers[f]=_,this._removedLayers[f]&&_.source&&_.type!=="custom"){const T=this._removedLayers[f];delete this._removedLayers[f],T.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(n,s){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new h.j(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===s)return;const d=this._order.indexOf(n);this._order.splice(d,1);const f=s?this._order.indexOf(s):this._order.length;s&&f===-1?this.fire(new h.j(new Error(`Cannot move layer "${n}" before non-existing layer "${s}".`))):(this._order.splice(f,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const s=this._layers[n];if(!s)return void this.fire(new h.j(new Error(`Cannot remove non-existing layer "${n}".`)));s.setEventedParent(null);const d=this._order.indexOf(n);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=s,delete this._layers[n],this._serializedLayers&&delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],s.onRemove&&s.onRemove(this.map)}getLayer(n){return this._layers[n]}getLayersOrder(){return[...this._order]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,s,d){this._checkLoaded();const f=this.getLayer(n);f?f.minzoom===s&&f.maxzoom===d||(s!=null&&(f.minzoom=s),d!=null&&(f.maxzoom=d),this._updateLayer(f)):this.fire(new h.j(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,s,d={}){this._checkLoaded();const f=this.getLayer(n);if(f){if(!h.aE(f.filter,s))return s==null?(f.filter=void 0,void this._updateLayer(f)):void(this._validate(h.x.filter,`layers.${f.id}.filter`,s,null,d)||(f.filter=h.aB(s),this._updateLayer(f)))}else this.fire(new h.j(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return h.aB(this.getLayer(n).filter)}setLayoutProperty(n,s,d,f={}){this._checkLoaded();const _=this.getLayer(n);_?h.aE(_.getLayoutProperty(s),d)||(_.setLayoutProperty(s,d,f),this._updateLayer(_)):this.fire(new h.j(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,s){const d=this.getLayer(n);if(d)return d.getLayoutProperty(s);this.fire(new h.j(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,s,d,f={}){this._checkLoaded();const _=this.getLayer(n);_?h.aE(_.getPaintProperty(s),d)||(_.setPaintProperty(s,d,f)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[n]=!0,this._serializedLayers=null):this.fire(new h.j(new Error(`Cannot style non-existing layer "${n}".`)))}getPaintProperty(n,s){return this.getLayer(n).getPaintProperty(s)}setFeatureState(n,s){this._checkLoaded();const d=n.source,f=n.sourceLayer,_=this.sourceCaches[d];if(_===void 0)return void this.fire(new h.j(new Error(`The source '${d}' does not exist in the map's style.`)));const b=_.getSource().type;b==="geojson"&&f?this.fire(new h.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):b!=="vector"||f?(n.id===void 0&&this.fire(new h.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(f,n.id,s)):this.fire(new h.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,s){this._checkLoaded();const d=n.source,f=this.sourceCaches[d];if(f===void 0)return void this.fire(new h.j(new Error(`The source '${d}' does not exist in the map's style.`)));const _=f.getSource().type,b=_==="vector"?n.sourceLayer:void 0;_!=="vector"||b?s&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new h.j(new Error("A feature id is required to remove its specific state property."))):f.removeFeatureState(b,n.id,s):this.fire(new h.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const s=n.source,d=n.sourceLayer,f=this.sourceCaches[s];if(f!==void 0)return f.getSource().type!=="vector"||d?(n.id===void 0&&this.fire(new h.j(new Error("The feature id parameter must be provided."))),f.getFeatureState(d,n.id)):void this.fire(new h.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new h.j(new Error(`The source '${s}' does not exist in the map's style.`)))}getTransition(){return h.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const n=h.aF(this.sourceCaches,_=>_.serialize()),s=this._serializeByIds(this._order),d=this.map.getTerrain()||void 0,f=this.stylesheet;return h.aG({version:f.version,name:f.name,metadata:f.metadata,light:f.light,center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,sprite:f.sprite,glyphs:f.glyphs,transition:f.transition,sources:n,layers:s,terrain:d},_=>_!==void 0)}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.sourceCaches[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(n){const s=b=>this._layers[b].type==="fill-extrusion",d={},f=[];for(let b=this._order.length-1;b>=0;b--){const T=this._order[b];if(s(T)){d[T]=b;for(const E of n){const I=E[T];if(I)for(const R of I)f.push(R)}}}f.sort((b,T)=>T.intersectionZ-b.intersectionZ);const _=[];for(let b=this._order.length-1;b>=0;b--){const T=this._order[b];if(s(T))for(let E=f.length-1;E>=0;E--){const I=f[E].feature;if(d[I.layer.id]<b)break;_.push(I),f.pop()}else for(const E of n){const I=E[T];if(I)for(const R of I)_.push(R.feature)}}return _}queryRenderedFeatures(n,s,d){s&&s.filter&&this._validate(h.x.filter,"queryRenderedFeatures.filter",s.filter,null,s);const f={};if(s&&s.layers){if(!Array.isArray(s.layers))return this.fire(new h.j(new Error("parameters.layers must be an Array."))),[];for(const T of s.layers){const E=this._layers[T];if(!E)return this.fire(new h.j(new Error(`The layer '${T}' does not exist in the map's style and cannot be queried for features.`))),[];f[E.source]=!0}}const _=[];s.availableImages=this._availableImages;const b=this._serializedAllLayers();for(const T in this.sourceCaches)s.layers&&!f[T]||_.push(Uo(this.sourceCaches[T],this._layers,b,n,s,d));return this.placement&&_.push(function(T,E,I,R,z,U,W){const X={},ie=U.queryRenderedSymbols(R),J=[];for(const ae of Object.keys(ie).map(Number))J.push(W[ae]);J.sort(dr);for(const ae of J){const fe=ae.featureIndex.lookupSymbolFeatures(ie[ae.bucketInstanceId],E,ae.bucketIndex,ae.sourceLayerIndex,z.filter,z.layers,z.availableImages,T);for(const re in fe){const ge=X[re]=X[re]||[],we=fe[re];we.sort((Te,De)=>{const Ue=ae.featureSortOrder;if(Ue){const it=Ue.indexOf(Te.featureIndex);return Ue.indexOf(De.featureIndex)-it}return De.featureIndex-Te.featureIndex});for(const Te of we)ge.push(Te)}}for(const ae in X)X[ae].forEach(fe=>{const re=fe.feature,ge=I[T[ae].source].getFeatureState(re.layer["source-layer"],re.id);re.source=re.layer.source,re.layer["source-layer"]&&(re.sourceLayer=re.layer["source-layer"]),re.state=ge});return X}(this._layers,b,this.sourceCaches,n,s,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(n,s){s&&s.filter&&this._validate(h.x.filter,"querySourceFeatures.filter",s.filter,null,s);const d=this.sourceCaches[n];return d?function(f,_){const b=f.getRenderableIds().map(I=>f.getTileByID(I)),T=[],E={};for(let I=0;I<b.length;I++){const R=b[I],z=R.tileID.canonical.key;E[z]||(E[z]=!0,R.querySourceFeatures(T,_))}return T}(d,s):[]}getLight(){return this.light.getLight()}setLight(n,s={}){this._checkLoaded();const d=this.light.getLight();let f=!1;for(const b in n)if(!h.aE(n[b],d[b])){f=!0;break}if(!f)return;const _={now:M.now(),transition:h.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,s),this.light.updateTransitions(_)}_validate(n,s,d,f,_={}){return(!_||_.validate!==!1)&&aa(this,n.call(h.x,h.e({key:s,style:this.serialize(),value:d,styleSpec:h.v},f)))}_remove(n=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),br().off(pn,this._rtlPluginLoaded);for(const s in this._layers)this._layers[s].setEventedParent(null);for(const s in this.sourceCaches){const d=this.sourceCaches[s];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),n&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(n)}_clearSource(n){this.sourceCaches[n].clearTiles()}_reloadSource(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload()}_updateSources(n){for(const s in this.sourceCaches)this.sourceCaches[s].update(n,this.map.terrain)}_generateCollisionBoxes(){for(const n in this.sourceCaches)this._reloadSource(n)}_updatePlacement(n,s,d,f,_=!1){let b=!1,T=!1;const E={};for(const I of this._order){const R=this._layers[I];if(R.type!=="symbol")continue;if(!E[R.source]){const U=this.sourceCaches[R.source];E[R.source]=U.getRenderableIds(!0).map(W=>U.getTileByID(W)).sort((W,X)=>X.tileID.overscaledZ-W.tileID.overscaledZ||(W.tileID.isLessThan(X.tileID)?-1:1))}const z=this.crossTileSymbolIndex.addLayer(R,E[R.source],n.center.lng);b=b||z}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(M.now(),n.zoom))&&(this.pauseablePlacement=new Pr(n,this.map.terrain,this._order,_,s,d,f,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,E),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(M.now()),T=!0),b&&this.pauseablePlacement.placement.setStale()),T||b)for(const I of this._order){const R=this._layers[I];R.type==="symbol"&&this.placement.updateLayerOpacities(R,E[R.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(M.now())}_releaseSymbolFadeTiles(){for(const n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles()}getImages(n,s){return h._(this,void 0,void 0,function*(){const d=yield this.imageManager.getImages(s.icons);this._updateTilesForChangedImages();const f=this.sourceCaches[s.source];return f&&f.setDependencies(s.tileID.key,s.type,s.icons),d})}getGlyphs(n,s){return h._(this,void 0,void 0,function*(){const d=yield this.glyphManager.getGlyphs(s.stacks),f=this.sourceCaches[s.source];return f&&f.setDependencies(s.tileID.key,s.type,[""]),d})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(n,s={}){this._checkLoaded(),n&&this._validate(h.x.glyphs,"glyphs",n,null,s)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=n,this.glyphManager.entries={},this.glyphManager.setURL(n))}addSprite(n,s,d={},f){this._checkLoaded();const _=[{id:n,url:s}],b=[...Ie(this.stylesheet.sprite),..._];this._validate(h.x.sprite,"sprite",b,null,d)||(this.stylesheet.sprite=b,this._loadSprite(_,!0,f))}removeSprite(n){this._checkLoaded();const s=Ie(this.stylesheet.sprite);if(s.find(d=>d.id===n)){if(this._spritesImagesIds[n])for(const d of this._spritesImagesIds[n])this.imageManager.removeImage(d),this._changedImages[d]=!0;s.splice(s.findIndex(d=>d.id===n),1),this.stylesheet.sprite=s.length>0?s:void 0,delete this._spritesImagesIds[n],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new h.k("data",{dataType:"style"}))}else this.fire(new h.j(new Error(`Sprite "${n}" doesn't exists on this map.`)))}getSprite(){return Ie(this.stylesheet.sprite)}setSprite(n,s={},d){this._checkLoaded(),n&&this._validate(h.x.sprite,"sprite",n,null,s)||(this.stylesheet.sprite=n,n?this._loadSprite(n,!0,d):(this._unloadSprite(),d&&d(null)))}}var po=h.X([{name:"a_pos",type:"Int16",components:2}]),sc="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Ra={prelude:or(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:or(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:or(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:or(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:or("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:or(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:or(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:or("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:or("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:or("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:or(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:or(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:or(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:or(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:or(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:or(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:or(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:or(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:or(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:or(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:or(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:or(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:or(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:or(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:or(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:or(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:or("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",sc),terrainDepth:or("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",sc),terrainCoords:or("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",sc)};function or(y,n){const s=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=n.match(/attribute ([\w]+) ([\w]+)/g),f=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=_?_.concat(f):f,T={};return{fragmentSource:y=y.replace(s,(E,I,R,z,U)=>(T[U]=!0,I==="define"?`
#ifndef HAS_UNIFORM_u_${U}
varying ${R} ${z} ${U};
#else
uniform ${R} ${z} u_${U};
#endif
`:`
#ifdef HAS_UNIFORM_u_${U}
    ${R} ${z} ${U} = u_${U};
#endif
`)),vertexSource:n=n.replace(s,(E,I,R,z,U)=>{const W=z==="float"?"vec2":"vec4",X=U.match(/color/)?"color":W;return T[U]?I==="define"?`
#ifndef HAS_UNIFORM_u_${U}
uniform lowp float u_${U}_t;
attribute ${R} ${W} a_${U};
varying ${R} ${z} ${U};
#else
uniform ${R} ${z} u_${U};
#endif
`:X==="vec4"?`
#ifndef HAS_UNIFORM_u_${U}
    ${U} = a_${U};
#else
    ${R} ${z} ${U} = u_${U};
#endif
`:`
#ifndef HAS_UNIFORM_u_${U}
    ${U} = unpack_mix_${X}(a_${U}, u_${U}_t);
#else
    ${R} ${z} ${U} = u_${U};
#endif
`:I==="define"?`
#ifndef HAS_UNIFORM_u_${U}
uniform lowp float u_${U}_t;
attribute ${R} ${W} a_${U};
#else
uniform ${R} ${z} u_${U};
#endif
`:X==="vec4"?`
#ifndef HAS_UNIFORM_u_${U}
    ${R} ${z} ${U} = a_${U};
#else
    ${R} ${z} ${U} = u_${U};
#endif
`:`
#ifndef HAS_UNIFORM_u_${U}
    ${R} ${z} ${U} = unpack_mix_${X}(a_${U}, u_${U}_t);
#else
    ${R} ${z} ${U} = u_${U};
#endif
`}),staticAttributes:d,staticUniforms:b}}class bl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,s,d,f,_,b,T,E,I){this.context=n;let R=this.boundPaintVertexBuffers.length!==f.length;for(let z=0;!R&&z<f.length;z++)this.boundPaintVertexBuffers[z]!==f[z]&&(R=!0);!this.vao||this.boundProgram!==s||this.boundLayoutVertexBuffer!==d||R||this.boundIndexBuffer!==_||this.boundVertexOffset!==b||this.boundDynamicVertexBuffer!==T||this.boundDynamicVertexBuffer2!==E||this.boundDynamicVertexBuffer3!==I?this.freshBind(s,d,f,_,b,T,E,I):(n.bindVertexArray.set(this.vao),T&&T.bind(),_&&_.dynamicDraw&&_.bind(),E&&E.bind(),I&&I.bind())}freshBind(n,s,d,f,_,b,T,E){const I=n.numAttributes,R=this.context,z=R.gl;this.vao&&this.destroy(),this.vao=R.createVertexArray(),R.bindVertexArray.set(this.vao),this.boundProgram=n,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=f,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=b,this.boundDynamicVertexBuffer2=T,this.boundDynamicVertexBuffer3=E,s.enableAttributes(z,n);for(const U of d)U.enableAttributes(z,n);b&&b.enableAttributes(z,n),T&&T.enableAttributes(z,n),E&&E.enableAttributes(z,n),s.bind(),s.setVertexAttribPointers(z,n,_);for(const U of d)U.bind(),U.setVertexAttribPointers(z,n,_);b&&(b.bind(),b.setVertexAttribPointers(z,n,_)),f&&f.bind(),T&&(T.bind(),T.setVertexAttribPointers(z,n,_)),E&&(E.bind(),E.setVertexAttribPointers(z,n,_)),R.currentNumAttributes=I}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Da(y){const n=[];for(let s=0;s<y.length;s++){if(y[s]===null)continue;const d=y[s].split(" ");n.push(d.pop())}return n}class lc{constructor(n,s,d,f,_,b){const T=n.gl;this.program=T.createProgram();const E=Da(s.staticAttributes),I=d?d.getBinderAttributes():[],R=E.concat(I),z=Ra.prelude.staticUniforms?Da(Ra.prelude.staticUniforms):[],U=s.staticUniforms?Da(s.staticUniforms):[],W=d?d.getBinderUniforms():[],X=z.concat(U).concat(W),ie=[];for(const Te of X)ie.indexOf(Te)<0&&ie.push(Te);const J=d?d.defines():[];_&&J.push("#define OVERDRAW_INSPECTOR;"),b&&J.push("#define TERRAIN3D;");const ae=J.concat(Ra.prelude.fragmentSource,s.fragmentSource).join(`
`),fe=J.concat(Ra.prelude.vertexSource,s.vertexSource).join(`
`),re=T.createShader(T.FRAGMENT_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);if(T.shaderSource(re,ae),T.compileShader(re),!T.getShaderParameter(re,T.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${T.getShaderInfoLog(re)}`);T.attachShader(this.program,re);const ge=T.createShader(T.VERTEX_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);if(T.shaderSource(ge,fe),T.compileShader(ge),!T.getShaderParameter(ge,T.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${T.getShaderInfoLog(ge)}`);T.attachShader(this.program,ge),this.attributes={};const we={};this.numAttributes=R.length;for(let Te=0;Te<this.numAttributes;Te++)R[Te]&&(T.bindAttribLocation(this.program,Te,R[Te]),this.attributes[R[Te]]=Te);if(T.linkProgram(this.program),!T.getProgramParameter(this.program,T.LINK_STATUS))throw new Error(`Program failed to link: ${T.getProgramInfoLog(this.program)}`);T.deleteShader(ge),T.deleteShader(re);for(let Te=0;Te<ie.length;Te++){const De=ie[Te];if(De&&!we[De]){const Ue=T.getUniformLocation(this.program,De);Ue&&(we[De]=Ue)}}this.fixedUniforms=f(n,we),this.terrainUniforms=((Te,De)=>({u_depth:new h.aH(Te,De.u_depth),u_terrain:new h.aH(Te,De.u_terrain),u_terrain_dim:new h.aI(Te,De.u_terrain_dim),u_terrain_matrix:new h.aJ(Te,De.u_terrain_matrix),u_terrain_unpack:new h.aK(Te,De.u_terrain_unpack),u_terrain_exaggeration:new h.aI(Te,De.u_terrain_exaggeration)}))(n,we),this.binderUniforms=d?d.getUniforms(n,we):[]}draw(n,s,d,f,_,b,T,E,I,R,z,U,W,X,ie,J,ae,fe){const re=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(d),n.setStencilMode(f),n.setColorMode(_),n.setCullFace(b),E){n.activeTexture.set(re.TEXTURE2),re.bindTexture(re.TEXTURE_2D,E.depthTexture),n.activeTexture.set(re.TEXTURE3),re.bindTexture(re.TEXTURE_2D,E.texture);for(const we in this.terrainUniforms)this.terrainUniforms[we].set(E[we])}for(const we in this.fixedUniforms)this.fixedUniforms[we].set(T[we]);ie&&ie.setUniforms(n,this.binderUniforms,W,{zoom:X});let ge=0;switch(s){case re.LINES:ge=2;break;case re.TRIANGLES:ge=3;break;case re.LINE_STRIP:ge=1}for(const we of U.get()){const Te=we.vaos||(we.vaos={});(Te[I]||(Te[I]=new bl)).bind(n,this,R,ie?ie.getPaintVertexBuffers():[],z,we.vertexOffset,J,ae,fe),re.drawElements(s,we.primitiveLength*ge,re.UNSIGNED_SHORT,we.primitiveOffset*ge*2)}}}function Sl(y,n,s){const d=1/He(s,1,n.transform.tileZoom),f=Math.pow(2,s.tileID.overscaledZ),_=s.tileSize*Math.pow(2,n.transform.tileZoom)/f,b=_*(s.tileID.canonical.x+s.tileID.wrap*f),T=_*s.tileID.canonical.y;return{u_image:0,u_texsize:s.imageAtlasTexture.size,u_scale:[d,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[b>>16,T>>16],u_pixel_coord_lower:[65535&b,65535&T]}}const Is=(y,n,s,d)=>{const f=n.style.light,_=f.properties.get("position"),b=[_.x,_.y,_.z],T=function(){var I=new h.A(9);return h.A!=Float32Array&&(I[1]=0,I[2]=0,I[3]=0,I[5]=0,I[6]=0,I[7]=0),I[0]=1,I[4]=1,I[8]=1,I}();f.properties.get("anchor")==="viewport"&&function(I,R){var z=Math.sin(R),U=Math.cos(R);I[0]=U,I[1]=z,I[2]=0,I[3]=-z,I[4]=U,I[5]=0,I[6]=0,I[7]=0,I[8]=1}(T,-n.transform.angle),function(I,R,z){var U=R[0],W=R[1],X=R[2];I[0]=U*z[0]+W*z[3]+X*z[6],I[1]=U*z[1]+W*z[4]+X*z[7],I[2]=U*z[2]+W*z[5]+X*z[8]}(b,b,T);const E=f.properties.get("color");return{u_matrix:y,u_lightpos:b,u_lightintensity:f.properties.get("intensity"),u_lightcolor:[E.r,E.g,E.b],u_vertical_gradient:+s,u_opacity:d}},uc=(y,n,s,d,f,_,b)=>h.e(Is(y,n,s,d),Sl(_,n,b),{u_height_factor:-Math.pow(2,f.overscaledZ)/b.tileSize/8}),Tl=y=>({u_matrix:y}),As=(y,n,s,d)=>h.e(Tl(y),Sl(s,n,d)),El=(y,n)=>({u_matrix:y,u_world:n}),Ms=(y,n,s,d,f)=>h.e(As(y,n,s,d),{u_world:f}),Em=(y,n,s,d)=>{const f=y.transform;let _,b;if(d.paint.get("circle-pitch-alignment")==="map"){const T=He(s,1,f.zoom);_=!0,b=[T,T]}else _=!1,b=f.pixelsToGLUnits;return{u_camera_to_center_distance:f.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(n.posMatrix,s,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:b}},km=(y,n,s)=>({u_matrix:y,u_inv_matrix:n,u_camera_to_center_distance:s.cameraToCenterDistance,u_viewport_size:[s.width,s.height]}),cc=(y,n,s=1)=>({u_matrix:y,u_color:n,u_overlay:0,u_overlay_scale:s}),xd=y=>({u_matrix:y}),sa=(y,n,s,d)=>({u_matrix:y,u_extrude_scale:He(n,1,s),u_intensity:d});function kl(y,n){const s=Math.pow(2,n.canonical.z),d=n.canonical.y;return[new h.Y(0,d/s).toLngLat().lat,new h.Y(0,(d+1)/s).toLngLat().lat]}const Un=(y,n,s,d)=>{const f=y.transform;return{u_matrix:pc(y,n,s,d),u_ratio:1/He(n,1,f.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/f.pixelsToGLUnits[0],1/f.pixelsToGLUnits[1]]}},hi=(y,n,s,d,f)=>h.e(Un(y,n,s,f),{u_image:0,u_image_height:d}),hc=(y,n,s,d,f)=>{const _=y.transform,b=dc(n,_);return{u_matrix:pc(y,n,s,f),u_texsize:n.imageAtlasTexture.size,u_ratio:1/He(n,1,_.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[b,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Cl=(y,n,s,d,f,_)=>{const b=y.lineAtlas,T=dc(n,y.transform),E=s.layout.get("line-cap")==="round",I=b.getDash(d.from,E),R=b.getDash(d.to,E),z=I.width*f.fromScale,U=R.width*f.toScale;return h.e(Un(y,n,s,_),{u_patternscale_a:[T/z,-I.height/2],u_patternscale_b:[T/U,-R.height/2],u_sdfgamma:b.width/(256*Math.min(z,U)*y.pixelRatio)/2,u_image:0,u_tex_y_a:I.y,u_tex_y_b:R.y,u_mix:f.t})};function dc(y,n){return 1/He(y,1,n.tileZoom)}function pc(y,n,s,d){return y.translatePosMatrix(d?d.posMatrix:n.tileID.posMatrix,n,s.paint.get("line-translate"),s.paint.get("line-translate-anchor"))}const Oa=(y,n,s,d,f)=>{return{u_matrix:y,u_tl_parent:n,u_scale_parent:s,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*f.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:f.paint.get("raster-brightness-min"),u_brightness_high:f.paint.get("raster-brightness-max"),u_saturation_factor:(b=f.paint.get("raster-saturation"),b>0?1-1/(1.001-b):-b),u_contrast_factor:(_=f.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:Cm(f.paint.get("raster-hue-rotate"))};var _,b};function Cm(y){y*=Math.PI/180;const n=Math.sin(y),s=Math.cos(y);return[(2*s+1)/3,(-Math.sqrt(3)*n-s+1)/3,(Math.sqrt(3)*n-s+1)/3]}const wd=(y,n,s,d,f,_,b,T,E,I,R,z,U,W)=>{const X=b.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:X.cameraToCenterDistance,u_pitch:X.pitch/360*2*Math.PI,u_rotate_symbol:+s,u_aspect_ratio:X.width/X.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_matrix:T,u_label_plane_matrix:E,u_coord_matrix:I,u_is_text:+z,u_pitch_with_map:+d,u_is_along_line:f,u_is_variable_anchor:_,u_texsize:U,u_texture:0,u_translation:R,u_pitched_scale:W}},bd=(y,n,s,d,f,_,b,T,E,I,R,z,U,W,X)=>{const ie=b.transform;return h.e(wd(y,n,s,d,f,_,b,T,E,I,R,z,U,X),{u_gamma_scale:d?Math.cos(ie._pitch)*ie.cameraToCenterDistance:1,u_device_pixel_ratio:b.pixelRatio,u_is_halo:+W})},Pm=(y,n,s,d,f,_,b,T,E,I,R,z,U,W)=>h.e(bd(y,n,s,d,f,_,b,T,E,I,R,!0,z,!0,W),{u_texsize_icon:U,u_texture_icon:1}),Im=(y,n,s)=>({u_matrix:y,u_opacity:n,u_color:s}),Am=(y,n,s,d,f,_)=>h.e(function(b,T,E,I){const R=E.imageManager.getPattern(b.from.toString()),z=E.imageManager.getPattern(b.to.toString()),{width:U,height:W}=E.imageManager.getPixelSize(),X=Math.pow(2,I.tileID.overscaledZ),ie=I.tileSize*Math.pow(2,E.transform.tileZoom)/X,J=ie*(I.tileID.canonical.x+I.tileID.wrap*X),ae=ie*I.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:R.tl,u_pattern_br_a:R.br,u_pattern_tl_b:z.tl,u_pattern_br_b:z.br,u_texsize:[U,W],u_mix:T.t,u_pattern_size_a:R.displaySize,u_pattern_size_b:z.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/He(I,1,E.transform.tileZoom),u_pixel_coord_upper:[J>>16,ae>>16],u_pixel_coord_lower:[65535&J,65535&ae]}}(d,_,s,f),{u_matrix:y,u_opacity:n}),Pl={fillExtrusion:(y,n)=>({u_matrix:new h.aJ(y,n.u_matrix),u_lightpos:new h.aL(y,n.u_lightpos),u_lightintensity:new h.aI(y,n.u_lightintensity),u_lightcolor:new h.aL(y,n.u_lightcolor),u_vertical_gradient:new h.aI(y,n.u_vertical_gradient),u_opacity:new h.aI(y,n.u_opacity)}),fillExtrusionPattern:(y,n)=>({u_matrix:new h.aJ(y,n.u_matrix),u_lightpos:new h.aL(y,n.u_lightpos),u_lightintensity:new h.aI(y,n.u_lightintensity),u_lightcolor:new h.aL(y,n.u_lightcolor),u_vertical_gradient:new h.aI(y,n.u_vertical_gradient),u_height_factor:new h.aI(y,n.u_height_factor),u_image:new h.aH(y,n.u_image),u_texsize:new h.aM(y,n.u_texsize),u_pixel_coord_upper:new h.aM(y,n.u_pixel_coord_upper),u_pixel_coord_lower:new h.aM(y,n.u_pixel_coord_lower),u_scale:new h.aL(y,n.u_scale),u_fade:new h.aI(y,n.u_fade),u_opacity:new h.aI(y,n.u_opacity)}),fill:(y,n)=>({u_matrix:new h.aJ(y,n.u_matrix)}),fillPattern:(y,n)=>({u_matrix:new h.aJ(y,n.u_matrix),u_image:new h.aH(y,n.u_image),u_texsize:new h.aM(y,n.u_texsize),u_pixel_coord_upper:new h.aM(y,n.u_pixel_coord_upper),u_pixel_coord_lower:new h.aM(y,n.u_pixel_coord_lower),u_scale:new h.aL(y,n.u_scale),u_fade:new h.aI(y,n.u_fade)}),fillOutline:(y,n)=>({u_matrix:new h.aJ(y,n.u_matrix),u_world:new h.aM(y,n.u_world)}),fillOutlinePattern:(y,n)=>({u_matrix:new h.aJ(y,n.u_matrix),u_world:new h.aM(y,n.u_world),u_image:new h.aH(y,n.u_image),u_texsize:new h.aM(y,n.u_texsize),u_pixel_coord_upper:new h.aM(y,n.u_pixel_coord_upper),u_pixel_coord_lower:new h.aM(y,n.u_pixel_coord_lower),u_scale:new h.aL(y,n.u_scale),u_fade:new h.aI(y,n.u_fade)}),circle:(y,n)=>({u_camera_to_center_distance:new h.aI(y,n.u_camera_to_center_distance),u_scale_with_map:new h.aH(y,n.u_scale_with_map),u_pitch_with_map:new h.aH(y,n.u_pitch_with_map),u_extrude_scale:new h.aM(y,n.u_extrude_scale),u_device_pixel_ratio:new h.aI(y,n.u_device_pixel_ratio),u_matrix:new h.aJ(y,n.u_matrix)}),collisionBox:(y,n)=>({u_matrix:new h.aJ(y,n.u_matrix),u_pixel_extrude_scale:new h.aM(y,n.u_pixel_extrude_scale)}),collisionCircle:(y,n)=>({u_matrix:new h.aJ(y,n.u_matrix),u_inv_matrix:new h.aJ(y,n.u_inv_matrix),u_camera_to_center_distance:new h.aI(y,n.u_camera_to_center_distance),u_viewport_size:new h.aM(y,n.u_viewport_size)}),debug:(y,n)=>({u_color:new h.aN(y,n.u_color),u_matrix:new h.aJ(y,n.u_matrix),u_overlay:new h.aH(y,n.u_overlay),u_overlay_scale:new h.aI(y,n.u_overlay_scale)}),clippingMask:(y,n)=>({u_matrix:new h.aJ(y,n.u_matrix)}),heatmap:(y,n)=>({u_extrude_scale:new h.aI(y,n.u_extrude_scale),u_intensity:new h.aI(y,n.u_intensity),u_matrix:new h.aJ(y,n.u_matrix)}),heatmapTexture:(y,n)=>({u_matrix:new h.aJ(y,n.u_matrix),u_world:new h.aM(y,n.u_world),u_image:new h.aH(y,n.u_image),u_color_ramp:new h.aH(y,n.u_color_ramp),u_opacity:new h.aI(y,n.u_opacity)}),hillshade:(y,n)=>({u_matrix:new h.aJ(y,n.u_matrix),u_image:new h.aH(y,n.u_image),u_latrange:new h.aM(y,n.u_latrange),u_light:new h.aM(y,n.u_light),u_shadow:new h.aN(y,n.u_shadow),u_highlight:new h.aN(y,n.u_highlight),u_accent:new h.aN(y,n.u_accent)}),hillshadePrepare:(y,n)=>({u_matrix:new h.aJ(y,n.u_matrix),u_image:new h.aH(y,n.u_image),u_dimension:new h.aM(y,n.u_dimension),u_zoom:new h.aI(y,n.u_zoom),u_unpack:new h.aK(y,n.u_unpack)}),line:(y,n)=>({u_matrix:new h.aJ(y,n.u_matrix),u_ratio:new h.aI(y,n.u_ratio),u_device_pixel_ratio:new h.aI(y,n.u_device_pixel_ratio),u_units_to_pixels:new h.aM(y,n.u_units_to_pixels)}),lineGradient:(y,n)=>({u_matrix:new h.aJ(y,n.u_matrix),u_ratio:new h.aI(y,n.u_ratio),u_device_pixel_ratio:new h.aI(y,n.u_device_pixel_ratio),u_units_to_pixels:new h.aM(y,n.u_units_to_pixels),u_image:new h.aH(y,n.u_image),u_image_height:new h.aI(y,n.u_image_height)}),linePattern:(y,n)=>({u_matrix:new h.aJ(y,n.u_matrix),u_texsize:new h.aM(y,n.u_texsize),u_ratio:new h.aI(y,n.u_ratio),u_device_pixel_ratio:new h.aI(y,n.u_device_pixel_ratio),u_image:new h.aH(y,n.u_image),u_units_to_pixels:new h.aM(y,n.u_units_to_pixels),u_scale:new h.aL(y,n.u_scale),u_fade:new h.aI(y,n.u_fade)}),lineSDF:(y,n)=>({u_matrix:new h.aJ(y,n.u_matrix),u_ratio:new h.aI(y,n.u_ratio),u_device_pixel_ratio:new h.aI(y,n.u_device_pixel_ratio),u_units_to_pixels:new h.aM(y,n.u_units_to_pixels),u_patternscale_a:new h.aM(y,n.u_patternscale_a),u_patternscale_b:new h.aM(y,n.u_patternscale_b),u_sdfgamma:new h.aI(y,n.u_sdfgamma),u_image:new h.aH(y,n.u_image),u_tex_y_a:new h.aI(y,n.u_tex_y_a),u_tex_y_b:new h.aI(y,n.u_tex_y_b),u_mix:new h.aI(y,n.u_mix)}),raster:(y,n)=>({u_matrix:new h.aJ(y,n.u_matrix),u_tl_parent:new h.aM(y,n.u_tl_parent),u_scale_parent:new h.aI(y,n.u_scale_parent),u_buffer_scale:new h.aI(y,n.u_buffer_scale),u_fade_t:new h.aI(y,n.u_fade_t),u_opacity:new h.aI(y,n.u_opacity),u_image0:new h.aH(y,n.u_image0),u_image1:new h.aH(y,n.u_image1),u_brightness_low:new h.aI(y,n.u_brightness_low),u_brightness_high:new h.aI(y,n.u_brightness_high),u_saturation_factor:new h.aI(y,n.u_saturation_factor),u_contrast_factor:new h.aI(y,n.u_contrast_factor),u_spin_weights:new h.aL(y,n.u_spin_weights)}),symbolIcon:(y,n)=>({u_is_size_zoom_constant:new h.aH(y,n.u_is_size_zoom_constant),u_is_size_feature_constant:new h.aH(y,n.u_is_size_feature_constant),u_size_t:new h.aI(y,n.u_size_t),u_size:new h.aI(y,n.u_size),u_camera_to_center_distance:new h.aI(y,n.u_camera_to_center_distance),u_pitch:new h.aI(y,n.u_pitch),u_rotate_symbol:new h.aH(y,n.u_rotate_symbol),u_aspect_ratio:new h.aI(y,n.u_aspect_ratio),u_fade_change:new h.aI(y,n.u_fade_change),u_matrix:new h.aJ(y,n.u_matrix),u_label_plane_matrix:new h.aJ(y,n.u_label_plane_matrix),u_coord_matrix:new h.aJ(y,n.u_coord_matrix),u_is_text:new h.aH(y,n.u_is_text),u_pitch_with_map:new h.aH(y,n.u_pitch_with_map),u_is_along_line:new h.aH(y,n.u_is_along_line),u_is_variable_anchor:new h.aH(y,n.u_is_variable_anchor),u_texsize:new h.aM(y,n.u_texsize),u_texture:new h.aH(y,n.u_texture),u_translation:new h.aM(y,n.u_translation),u_pitched_scale:new h.aI(y,n.u_pitched_scale)}),symbolSDF:(y,n)=>({u_is_size_zoom_constant:new h.aH(y,n.u_is_size_zoom_constant),u_is_size_feature_constant:new h.aH(y,n.u_is_size_feature_constant),u_size_t:new h.aI(y,n.u_size_t),u_size:new h.aI(y,n.u_size),u_camera_to_center_distance:new h.aI(y,n.u_camera_to_center_distance),u_pitch:new h.aI(y,n.u_pitch),u_rotate_symbol:new h.aH(y,n.u_rotate_symbol),u_aspect_ratio:new h.aI(y,n.u_aspect_ratio),u_fade_change:new h.aI(y,n.u_fade_change),u_matrix:new h.aJ(y,n.u_matrix),u_label_plane_matrix:new h.aJ(y,n.u_label_plane_matrix),u_coord_matrix:new h.aJ(y,n.u_coord_matrix),u_is_text:new h.aH(y,n.u_is_text),u_pitch_with_map:new h.aH(y,n.u_pitch_with_map),u_is_along_line:new h.aH(y,n.u_is_along_line),u_is_variable_anchor:new h.aH(y,n.u_is_variable_anchor),u_texsize:new h.aM(y,n.u_texsize),u_texture:new h.aH(y,n.u_texture),u_gamma_scale:new h.aI(y,n.u_gamma_scale),u_device_pixel_ratio:new h.aI(y,n.u_device_pixel_ratio),u_is_halo:new h.aH(y,n.u_is_halo),u_translation:new h.aM(y,n.u_translation),u_pitched_scale:new h.aI(y,n.u_pitched_scale)}),symbolTextAndIcon:(y,n)=>({u_is_size_zoom_constant:new h.aH(y,n.u_is_size_zoom_constant),u_is_size_feature_constant:new h.aH(y,n.u_is_size_feature_constant),u_size_t:new h.aI(y,n.u_size_t),u_size:new h.aI(y,n.u_size),u_camera_to_center_distance:new h.aI(y,n.u_camera_to_center_distance),u_pitch:new h.aI(y,n.u_pitch),u_rotate_symbol:new h.aH(y,n.u_rotate_symbol),u_aspect_ratio:new h.aI(y,n.u_aspect_ratio),u_fade_change:new h.aI(y,n.u_fade_change),u_matrix:new h.aJ(y,n.u_matrix),u_label_plane_matrix:new h.aJ(y,n.u_label_plane_matrix),u_coord_matrix:new h.aJ(y,n.u_coord_matrix),u_is_text:new h.aH(y,n.u_is_text),u_pitch_with_map:new h.aH(y,n.u_pitch_with_map),u_is_along_line:new h.aH(y,n.u_is_along_line),u_is_variable_anchor:new h.aH(y,n.u_is_variable_anchor),u_texsize:new h.aM(y,n.u_texsize),u_texsize_icon:new h.aM(y,n.u_texsize_icon),u_texture:new h.aH(y,n.u_texture),u_texture_icon:new h.aH(y,n.u_texture_icon),u_gamma_scale:new h.aI(y,n.u_gamma_scale),u_device_pixel_ratio:new h.aI(y,n.u_device_pixel_ratio),u_is_halo:new h.aH(y,n.u_is_halo),u_translation:new h.aM(y,n.u_translation),u_pitched_scale:new h.aI(y,n.u_pitched_scale)}),background:(y,n)=>({u_matrix:new h.aJ(y,n.u_matrix),u_opacity:new h.aI(y,n.u_opacity),u_color:new h.aN(y,n.u_color)}),backgroundPattern:(y,n)=>({u_matrix:new h.aJ(y,n.u_matrix),u_opacity:new h.aI(y,n.u_opacity),u_image:new h.aH(y,n.u_image),u_pattern_tl_a:new h.aM(y,n.u_pattern_tl_a),u_pattern_br_a:new h.aM(y,n.u_pattern_br_a),u_pattern_tl_b:new h.aM(y,n.u_pattern_tl_b),u_pattern_br_b:new h.aM(y,n.u_pattern_br_b),u_texsize:new h.aM(y,n.u_texsize),u_mix:new h.aI(y,n.u_mix),u_pattern_size_a:new h.aM(y,n.u_pattern_size_a),u_pattern_size_b:new h.aM(y,n.u_pattern_size_b),u_scale_a:new h.aI(y,n.u_scale_a),u_scale_b:new h.aI(y,n.u_scale_b),u_pixel_coord_upper:new h.aM(y,n.u_pixel_coord_upper),u_pixel_coord_lower:new h.aM(y,n.u_pixel_coord_lower),u_tile_units_to_pixels:new h.aI(y,n.u_tile_units_to_pixels)}),terrain:(y,n)=>({u_matrix:new h.aJ(y,n.u_matrix),u_texture:new h.aH(y,n.u_texture),u_ele_delta:new h.aI(y,n.u_ele_delta)}),terrainDepth:(y,n)=>({u_matrix:new h.aJ(y,n.u_matrix),u_ele_delta:new h.aI(y,n.u_ele_delta)}),terrainCoords:(y,n)=>({u_matrix:new h.aJ(y,n.u_matrix),u_texture:new h.aH(y,n.u_texture),u_terrain_coords_id:new h.aI(y,n.u_terrain_coords_id),u_ele_delta:new h.aI(y,n.u_ele_delta)})};class fc{constructor(n,s,d){this.context=n;const f=n.gl;this.buffer=f.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),f.bufferData(f.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?f.DYNAMIC_DRAW:f.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const s=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Il={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class mc{constructor(n,s,d,f){this.length=s.length,this.attributes=d,this.itemSize=s.bytesPerElement,this.dynamicDraw=f,this.context=n;const _=n.gl;this.buffer=_.createBuffer(),n.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,s){for(let d=0;d<this.attributes.length;d++){const f=s.attributes[this.attributes[d].name];f!==void 0&&n.enableVertexAttribArray(f)}}setVertexAttribPointers(n,s,d){for(let f=0;f<this.attributes.length;f++){const _=this.attributes[f],b=s.attributes[_.name];b!==void 0&&n.vertexAttribPointer(b,_.components,n[Il[_.type]],!1,this.itemSize,_.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const zs=new WeakMap;function di(y){var n;if(zs.has(y))return zs.get(y);{const s=(n=y.getParameter(y.VERSION))===null||n===void 0?void 0:n.startsWith("WebGL 2.0");return zs.set(y,s),s}}class ar{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class gc extends ar{getDefault(){return h.aP.transparent}set(n){const s=this.current;(n.r!==s.r||n.g!==s.g||n.b!==s.b||n.a!==s.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Ls extends ar{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class Rs extends ar{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class Mm extends ar{getDefault(){return[!0,!0,!0,!0]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||n[3]!==s[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Al extends ar{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class zm extends ar{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class Fa extends ar{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const s=this.current;(n.func!==s.func||n.ref!==s.ref||n.mask!==s.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class Lm extends ar{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class Sd extends ar{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.STENCIL_TEST):s.disable(s.STENCIL_TEST),this.current=n,this.dirty=!1}}class Rm extends ar{getDefault(){return[0,1]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class Td extends ar{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.DEPTH_TEST):s.disable(s.DEPTH_TEST),this.current=n,this.dirty=!1}}class yc extends ar{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class Ed extends ar{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.BLEND):s.disable(s.BLEND),this.current=n,this.dirty=!1}}class kd extends ar{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class Cd extends ar{getDefault(){return h.aP.transparent}set(n){const s=this.current;(n.r!==s.r||n.g!==s.g||n.b!==s.b||n.a!==s.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Pd extends ar{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class la extends ar{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.CULL_FACE):s.disable(s.CULL_FACE),this.current=n,this.dirty=!1}}class Id extends ar{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class Dm extends ar{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class Om extends ar{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class Ad extends ar{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class Ds extends ar{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||n[3]!==s[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Fm extends ar{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindFramebuffer(s.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class Ml extends ar{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindRenderbuffer(s.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Bm extends ar{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindTexture(s.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class Nm extends ar{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindBuffer(s.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Md extends ar{getDefault(){return null}set(n){const s=this.gl;s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class zd extends ar{getDefault(){return null}set(n){var s;if(n===this.current&&!this.dirty)return;const d=this.gl;di(d)?d.bindVertexArray(n):(s=d.getExtension("OES_vertex_array_object"))===null||s===void 0||s.bindVertexArrayOES(n),this.current=n,this.dirty=!1}}class Ld extends ar{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class _c extends ar{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class Rd extends ar{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class Ba extends ar{constructor(n,s){super(n),this.context=n,this.parent=s}getDefault(){return null}}class ko extends Ba{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class vc extends Ba{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class xc extends Ba{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class wc{constructor(n,s,d,f,_){this.context=n,this.width=s,this.height=d;const b=n.gl,T=this.framebuffer=b.createFramebuffer();if(this.colorAttachment=new ko(n,T),f)this.depthAttachment=_?new xc(n,T):new vc(n,T);else if(_)throw new Error("Stencil cannot be set without depth");if(b.checkFramebufferStatus(b.FRAMEBUFFER)!==b.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const n=this.context.gl,s=this.colorAttachment.get();if(s&&n.deleteTexture(s),this.depthAttachment){const d=this.depthAttachment.get();d&&n.deleteRenderbuffer(d)}n.deleteFramebuffer(this.framebuffer)}}class Ur{constructor(n,s,d){this.blendFunction=n,this.blendColor=s,this.mask=d}}Ur.Replace=[1,0],Ur.disabled=new Ur(Ur.Replace,h.aP.transparent,[!1,!1,!1,!1]),Ur.unblended=new Ur(Ur.Replace,h.aP.transparent,[!0,!0,!0,!0]),Ur.alphaBlended=new Ur([1,771],h.aP.transparent,[!0,!0,!0,!0]);class bc{constructor(n){var s,d;if(this.gl=n,this.clearColor=new gc(this),this.clearDepth=new Ls(this),this.clearStencil=new Rs(this),this.colorMask=new Mm(this),this.depthMask=new Al(this),this.stencilMask=new zm(this),this.stencilFunc=new Fa(this),this.stencilOp=new Lm(this),this.stencilTest=new Sd(this),this.depthRange=new Rm(this),this.depthTest=new Td(this),this.depthFunc=new yc(this),this.blend=new Ed(this),this.blendFunc=new kd(this),this.blendColor=new Cd(this),this.blendEquation=new Pd(this),this.cullFace=new la(this),this.cullFaceSide=new Id(this),this.frontFace=new Dm(this),this.program=new Om(this),this.activeTexture=new Ad(this),this.viewport=new Ds(this),this.bindFramebuffer=new Fm(this),this.bindRenderbuffer=new Ml(this),this.bindTexture=new Bm(this),this.bindVertexBuffer=new Nm(this),this.bindElementBuffer=new Md(this),this.bindVertexArray=new zd(this),this.pixelStoreUnpack=new Ld(this),this.pixelStoreUnpackPremultiplyAlpha=new _c(this),this.pixelStoreUnpackFlipY=new Rd(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),di(n)){this.HALF_FLOAT=n.HALF_FLOAT;const f=n.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(s=n.RGBA16F)!==null&&s!==void 0?s:f==null?void 0:f.RGBA16F_EXT,this.RGB16F=(d=n.RGB16F)!==null&&d!==void 0?d:f==null?void 0:f.RGB16F_EXT,n.getExtension("EXT_color_buffer_float")}else{n.getExtension("EXT_color_buffer_half_float"),n.getExtension("OES_texture_half_float_linear");const f=n.getExtension("OES_texture_half_float");this.HALF_FLOAT=f==null?void 0:f.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,s){return new fc(this,n,s)}createVertexBuffer(n,s,d){return new mc(this,n,s,d)}createRenderbuffer(n,s,d){const f=this.gl,_=f.createRenderbuffer();return this.bindRenderbuffer.set(_),f.renderbufferStorage(f.RENDERBUFFER,n,s,d),this.bindRenderbuffer.set(null),_}createFramebuffer(n,s,d,f){return new wc(this,n,s,d,f)}clear({color:n,depth:s,stencil:d}){const f=this.gl;let _=0;n&&(_|=f.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),s!==void 0&&(_|=f.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(s),this.depthMask.set(!0)),d!==void 0&&(_|=f.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),f.clear(_)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){h.aE(n.blendFunction,Ur.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}createVertexArray(){var n;return di(this.gl)?this.gl.createVertexArray():(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.createVertexArrayOES()}deleteVertexArray(n){var s;return di(this.gl)?this.gl.deleteVertexArray(n):(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.deleteVertexArrayOES(n)}unbindVAO(){this.bindVertexArray.set(null)}}class $t{constructor(n,s,d){this.func=n,this.mask=s,this.range=d}}$t.ReadOnly=!1,$t.ReadWrite=!0,$t.disabled=new $t(519,$t.ReadOnly,[0,1]);const Os=7680;class zr{constructor(n,s,d,f,_,b){this.test=n,this.ref=s,this.mask=d,this.fail=f,this.depthFail=_,this.pass=b}}zr.disabled=new zr({func:519,mask:0},0,0,Os,Os,Os);class Ir{constructor(n,s,d){this.enable=n,this.mode=s,this.frontFace=d}}let zl;function Dd(y,n,s,d,f){const _=y.context,b=_.gl,T=y.useProgram("collisionBox"),E=[];let I=0,R=0;for(let ae=0;ae<d.length;ae++){const fe=d[ae],re=n.getTile(fe).getBucket(s);if(!re)continue;const ge=f?re.textCollisionBox:re.iconCollisionBox,we=re.collisionCircleArray;if(we.length>0){const Te=h.F();h.aQ(Te,re.placementInvProjMatrix,y.transform.glCoordMatrix),h.aQ(Te,Te,re.placementViewportMatrix),E.push({circleArray:we,circleOffset:R,transform:fe.posMatrix,invTransform:Te,coord:fe}),I+=we.length/4,R=I}ge&&T.draw(_,b.LINES,$t.disabled,zr.disabled,y.colorModeForRenderPass(),Ir.disabled,{u_matrix:fe.posMatrix,u_pixel_extrude_scale:[1/(z=y.transform).width,1/z.height]},y.style.map.terrain&&y.style.map.terrain.getTerrainData(fe),s.id,ge.layoutVertexBuffer,ge.indexBuffer,ge.segments,null,y.transform.zoom,null,null,ge.collisionVertexBuffer)}var z;if(!f||!E.length)return;const U=y.useProgram("collisionCircle"),W=new h.aR;W.resize(4*I),W._trim();let X=0;for(const ae of E)for(let fe=0;fe<ae.circleArray.length/4;fe++){const re=4*fe,ge=ae.circleArray[re+0],we=ae.circleArray[re+1],Te=ae.circleArray[re+2],De=ae.circleArray[re+3];W.emplace(X++,ge,we,Te,De,0),W.emplace(X++,ge,we,Te,De,1),W.emplace(X++,ge,we,Te,De,2),W.emplace(X++,ge,we,Te,De,3)}(!zl||zl.length<2*I)&&(zl=function(ae){const fe=2*ae,re=new h.aT;re.resize(fe),re._trim();for(let ge=0;ge<fe;ge++){const we=6*ge;re.uint16[we+0]=4*ge+0,re.uint16[we+1]=4*ge+1,re.uint16[we+2]=4*ge+2,re.uint16[we+3]=4*ge+2,re.uint16[we+4]=4*ge+3,re.uint16[we+5]=4*ge+0}return re}(I));const ie=_.createIndexBuffer(zl,!0),J=_.createVertexBuffer(W,h.aS.members,!0);for(const ae of E){const fe=km(ae.transform,ae.invTransform,y.transform);U.draw(_,b.TRIANGLES,$t.disabled,zr.disabled,y.colorModeForRenderPass(),Ir.disabled,fe,y.style.map.terrain&&y.style.map.terrain.getTerrainData(ae.coord),s.id,J,ie,h.$.simpleSegment(0,2*ae.circleOffset,ae.circleArray.length,ae.circleArray.length/2),null,y.transform.zoom,null,null,null)}J.destroy(),ie.destroy()}Ir.disabled=new Ir(!1,1029,2305),Ir.backCCW=new Ir(!0,1029,2305);const Sc=h.an(new Float32Array(16));function jm(y,n,s,d,f,_){const{horizontalAlign:b,verticalAlign:T}=h.au(y);return new h.P((-(b-.5)*n/f+d[0])*_,(-(T-.5)*s/f+d[1])*_)}function Od(y,n,s,d,f,_){const b=n.tileAnchorPoint.add(new h.P(n.translation[0],n.translation[1]));if(n.pitchWithMap){let T=d.mult(_);return s||(T=T.rotate(-f)),Ht(b.add(T),n.labelPlaneMatrix,n.getElevation).point}if(s){const T=ue(n.tileAnchorPoint.x+1,n.tileAnchorPoint.y,n).point.sub(y),E=Math.atan(T.y/T.x)+(T.x<0?Math.PI:0);return y.add(d.rotate(E))}return y.add(d)}function Ll(y,n,s,d,f,_,b,T,E,I,R,z,U,W){const X=y.text.placedSymbolArray,ie=y.text.dynamicLayoutVertexArray,J=y.icon.dynamicLayoutVertexArray,ae={};ie.clear();for(let fe=0;fe<X.length;fe++){const re=X.get(fe),ge=re.hidden||!re.crossTileID||y.allowVerticalPlacement&&!re.placedOrientation?null:d[re.crossTileID];if(ge){const we=new h.P(re.anchorX,re.anchorY),Te={getElevation:W,width:f.width,height:f.height,labelPlaneMatrix:_,lineVertexArray:null,pitchWithMap:s,projection:R,projectionCache:null,tileAnchorPoint:we,translation:z,unwrappedTileID:U},De=s?Ht(we,b,W):ue(we.x,we.y,Te),Ue=G(f.cameraToCenterDistance,De.signedDistanceFromCamera);let it=h.ai(y.textSizeData,E,re)*Ue/h.ap;s&&(it*=y.tilePixelRatio/T);const{width:at,height:Ve,anchor:Ze,textOffset:ft,textBoxScale:Lt}=ge,Xe=jm(Ze,at,Ve,ft,Lt,it),tt=R.getPitchedTextCorrection(f,we.add(new h.P(z[0],z[1])),U),Pt=Od(De.point,Te,n,Xe,f.angle,tt),Sr=y.allowVerticalPlacement&&re.placedOrientation===h.ah.vertical?Math.PI/2:0;for(let Vt=0;Vt<re.numGlyphs;Vt++)h.aj(ie,Pt,Sr);I&&re.associatedIconIndex>=0&&(ae[re.associatedIconIndex]={shiftedAnchor:Pt,angle:Sr})}else xe(re.numGlyphs,ie)}if(I){J.clear();const fe=y.icon.placedSymbolArray;for(let re=0;re<fe.length;re++){const ge=fe.get(re);if(ge.hidden)xe(ge.numGlyphs,J);else{const we=ae[re];if(we)for(let Te=0;Te<ge.numGlyphs;Te++)h.aj(J,we.shiftedAnchor,we.angle);else xe(ge.numGlyphs,J)}}y.icon.dynamicLayoutVertexBuffer.updateData(J)}y.text.dynamicLayoutVertexBuffer.updateData(ie)}function Rl(y,n,s){return s.iconsInText&&n?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Fs(y,n,s,d,f,_,b,T,E,I,R,z){const U=y.context,W=U.gl,X=y.transform,ie=ln(),J=T==="map",ae=E==="map",fe=T!=="viewport"&&s.layout.get("symbol-placement")!=="point",re=J&&!ae&&!fe,ge=!ae&&fe,we=!s.layout.get("symbol-sort-key").isConstant();let Te=!1;const De=y.depthModeForSublayer(0,$t.ReadOnly),Ue=s._unevaluatedLayout.hasValue("text-variable-anchor")||s._unevaluatedLayout.hasValue("text-variable-anchor-offset"),it=[],at=ie.getCircleRadiusCorrection(X);for(const Ve of d){const Ze=n.getTile(Ve),ft=Ze.getBucket(s);if(!ft)continue;const Lt=f?ft.text:ft.icon;if(!Lt||!Lt.segments.get().length||!Lt.hasVisibleVertices)continue;const Xe=Lt.programConfigurations.get(s.id),tt=f||ft.sdfIcons,Pt=f?ft.textSizeData:ft.iconSizeData,Sr=ae||X.pitch!==0,Vt=y.useProgram(Rl(tt,f,ft),Xe),qt=h.ag(Pt,X.zoom),Tr=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ve);let Pn,$i,Er,Qn,Vn=[0,0],In=null;if(f)$i=Ze.glyphAtlasTexture,Er=W.LINEAR,Pn=Ze.glyphAtlasTexture.size,ft.iconsInText&&(Vn=Ze.imageAtlasTexture.size,In=Ze.imageAtlasTexture,Qn=Sr||y.options.rotating||y.options.zooming||Pt.kind==="composite"||Pt.kind==="camera"?W.LINEAR:W.NEAREST);else{const Lr=s.layout.get("icon-size").constantOr(0)!==1||ft.iconsNeedLinear;$i=Ze.imageAtlasTexture,Er=tt||y.options.rotating||y.options.zooming||Lr||Sr?W.LINEAR:W.NEAREST,Pn=Ze.imageAtlasTexture.size}const An=He(Ze,1,y.transform.zoom),Hi=ge?Ve.posMatrix:Sc,ma=kn(Hi,ae,J,y.transform,An),Ql=Yn(Hi,ae,J,y.transform,An),qa=Yn(Ve.posMatrix,ae,J,y.transform,An),ga=ie.translatePosition(y.transform,Ze,_,b),eu=Ue&&ft.hasTextData(),qc=s.layout.get("icon-text-fit")!=="none"&&eu&&ft.hasIconData();if(fe){const Lr=y.style.map.terrain?(Zc,un)=>y.style.map.terrain.getElevation(Ve,Zc,un):null,Ga=s.layout.get("text-rotation-alignment")==="map";B(ft,Ve.posMatrix,y,f,ma,qa,ae,I,Ga,ie,Ve.toUnwrapped(),X.width,X.height,ga,Lr)}const wn=Ve.posMatrix,Wi=f&&Ue||qc,Zo=fe||Wi?Sc:ma,Za=Ql,Mn=tt&&s.paint.get(f?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let zn;zn=tt?ft.iconsInText?Pm(Pt.kind,qt,re,ae,fe,Wi,y,wn,Zo,Za,ga,Pn,Vn,at):bd(Pt.kind,qt,re,ae,fe,Wi,y,wn,Zo,Za,ga,f,Pn,!0,at):wd(Pt.kind,qt,re,ae,fe,Wi,y,wn,Zo,Za,ga,f,Pn,at);const fn={program:Vt,buffers:Lt,uniformValues:zn,atlasTexture:$i,atlasTextureIcon:In,atlasInterpolation:Er,atlasInterpolationIcon:Qn,isSDF:tt,hasHalo:Mn};if(we&&ft.canOverlap){Te=!0;const Lr=Lt.segments.get();for(const Ga of Lr)it.push({segments:new h.$([Ga]),sortKey:Ga.sortKey,state:fn,terrainData:Tr})}else it.push({segments:Lt.segments,sortKey:0,state:fn,terrainData:Tr})}Te&&it.sort((Ve,Ze)=>Ve.sortKey-Ze.sortKey);for(const Ve of it){const Ze=Ve.state;if(U.activeTexture.set(W.TEXTURE0),Ze.atlasTexture.bind(Ze.atlasInterpolation,W.CLAMP_TO_EDGE),Ze.atlasTextureIcon&&(U.activeTexture.set(W.TEXTURE1),Ze.atlasTextureIcon&&Ze.atlasTextureIcon.bind(Ze.atlasInterpolationIcon,W.CLAMP_TO_EDGE)),Ze.isSDF){const ft=Ze.uniformValues;Ze.hasHalo&&(ft.u_is_halo=1,Dl(Ze.buffers,Ve.segments,s,y,Ze.program,De,R,z,ft,Ve.terrainData)),ft.u_is_halo=0}Dl(Ze.buffers,Ve.segments,s,y,Ze.program,De,R,z,Ze.uniformValues,Ve.terrainData)}}function Dl(y,n,s,d,f,_,b,T,E,I){const R=d.context;f.draw(R,R.gl.TRIANGLES,_,b,T,Ir.disabled,E,I,s.id,y.layoutVertexBuffer,y.indexBuffer,n,s.paint,d.transform.zoom,y.programConfigurations.get(s.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function Vo(y,n,s,d,f){if(!s||!d||!d.imageAtlas)return;const _=d.imageAtlas.patternPositions;let b=_[s.to.toString()],T=_[s.from.toString()];if(!b&&T&&(b=T),!T&&b&&(T=b),!b||!T){const E=f.getPaintProperty(n);b=_[E],T=_[E]}b&&T&&y.setConstantPatternPositions(b,T)}function ua(y,n,s,d,f,_,b){const T=y.context.gl,E="fill-pattern",I=s.paint.get(E),R=I&&I.constantOr(1),z=s.getCrossfadeParameters();let U,W,X,ie,J;b?(W=R&&!s.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",U=T.LINES):(W=R?"fillPattern":"fill",U=T.TRIANGLES);const ae=I.constantOr(null);for(const fe of d){const re=n.getTile(fe);if(R&&!re.patternsLoaded())continue;const ge=re.getBucket(s);if(!ge)continue;const we=ge.programConfigurations.get(s.id),Te=y.useProgram(W,we),De=y.style.map.terrain&&y.style.map.terrain.getTerrainData(fe);R&&(y.context.activeTexture.set(T.TEXTURE0),re.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),we.updatePaintBuffers(z)),Vo(we,E,ae,re,s);const Ue=De?fe:null,it=y.translatePosMatrix(Ue?Ue.posMatrix:fe.posMatrix,re,s.paint.get("fill-translate"),s.paint.get("fill-translate-anchor"));if(b){ie=ge.indexBuffer2,J=ge.segments2;const at=[T.drawingBufferWidth,T.drawingBufferHeight];X=W==="fillOutlinePattern"&&R?Ms(it,y,z,re,at):El(it,at)}else ie=ge.indexBuffer,J=ge.segments,X=R?As(it,y,z,re):Tl(it);Te.draw(y.context,U,f,y.stencilModeForClipping(fe),_,Ir.disabled,X,De,s.id,ge.layoutVertexBuffer,ie,J,s.paint,y.transform.zoom,we)}}function Jn(y,n,s,d,f,_,b){const T=y.context,E=T.gl,I="fill-extrusion-pattern",R=s.paint.get(I),z=R.constantOr(1),U=s.getCrossfadeParameters(),W=s.paint.get("fill-extrusion-opacity"),X=R.constantOr(null);for(const ie of d){const J=n.getTile(ie),ae=J.getBucket(s);if(!ae)continue;const fe=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ie),re=ae.programConfigurations.get(s.id),ge=y.useProgram(z?"fillExtrusionPattern":"fillExtrusion",re);z&&(y.context.activeTexture.set(E.TEXTURE0),J.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),re.updatePaintBuffers(U)),Vo(re,I,X,J,s);const we=y.translatePosMatrix(ie.posMatrix,J,s.paint.get("fill-extrusion-translate"),s.paint.get("fill-extrusion-translate-anchor")),Te=s.paint.get("fill-extrusion-vertical-gradient"),De=z?uc(we,y,Te,W,ie,U,J):Is(we,y,Te,W);ge.draw(T,T.gl.TRIANGLES,f,_,b,Ir.backCCW,De,fe,s.id,ae.layoutVertexBuffer,ae.indexBuffer,ae.segments,s.paint,y.transform.zoom,re,y.style.map.terrain&&ae.centroidVertexBuffer)}}function Fd(y,n,s,d,f,_,b){const T=y.context,E=T.gl,I=s.fbo;if(!I)return;const R=y.useProgram("hillshade"),z=y.style.map.terrain&&y.style.map.terrain.getTerrainData(n);T.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,I.colorAttachment.get()),R.draw(T,E.TRIANGLES,f,_,b,Ir.disabled,((U,W,X,ie)=>{const J=X.paint.get("hillshade-shadow-color"),ae=X.paint.get("hillshade-highlight-color"),fe=X.paint.get("hillshade-accent-color");let re=X.paint.get("hillshade-illumination-direction")*(Math.PI/180);X.paint.get("hillshade-illumination-anchor")==="viewport"&&(re-=U.transform.angle);const ge=!U.options.moving;return{u_matrix:ie?ie.posMatrix:U.transform.calculatePosMatrix(W.tileID.toUnwrapped(),ge),u_image:0,u_latrange:kl(0,W.tileID),u_light:[X.paint.get("hillshade-exaggeration"),re],u_shadow:J,u_highlight:ae,u_accent:fe}})(y,s,d,z?n:null),z,d.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function Bd(y,n,s,d,f,_){const b=y.context,T=b.gl,E=n.dem;if(E&&E.data){const I=E.dim,R=E.stride,z=E.getPixels();if(b.activeTexture.set(T.TEXTURE1),b.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||y.getTileTexture(R),n.demTexture){const W=n.demTexture;W.update(z,{premultiply:!1}),W.bind(T.NEAREST,T.CLAMP_TO_EDGE)}else n.demTexture=new Be(b,z,T.RGBA,{premultiply:!1}),n.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE);b.activeTexture.set(T.TEXTURE0);let U=n.fbo;if(!U){const W=new Be(b,{width:I,height:I,data:null},T.RGBA);W.bind(T.LINEAR,T.CLAMP_TO_EDGE),U=n.fbo=b.createFramebuffer(I,I,!0,!1),U.colorAttachment.set(W.texture)}b.bindFramebuffer.set(U.framebuffer),b.viewport.set([0,0,I,I]),y.useProgram("hillshadePrepare").draw(b,T.TRIANGLES,d,f,_,Ir.disabled,((W,X)=>{const ie=X.stride,J=h.F();return h.aO(J,0,h.W,-h.W,0,0,1),h.H(J,J,[0,-h.W,0]),{u_matrix:J,u_image:1,u_dimension:[ie,ie],u_zoom:W.overscaledZ,u_unpack:X.getUnpackVector()}})(n.tileID,E),null,s.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function Tc(y,n,s,d,f,_){const b=d.paint.get("raster-fade-duration");if(!_&&b>0){const T=M.now(),E=(T-y.timeAdded)/b,I=n?(T-n.timeAdded)/b:-1,R=s.getSource(),z=f.coveringZoomLevel({tileSize:R.tileSize,roundZoom:R.roundZoom}),U=!n||Math.abs(n.tileID.overscaledZ-z)>Math.abs(y.tileID.overscaledZ-z),W=U&&y.refreshedUponExpiration?1:h.ac(U?E:1-I,0,1);return y.refreshedUponExpiration&&E>=1&&(y.refreshedUponExpiration=!1),n?{opacity:1,mix:1-W}:{opacity:W,mix:0}}return{opacity:1,mix:0}}const ca=new h.aP(1,0,0,1),Ol=new h.aP(0,1,0,1),Fl=new h.aP(0,0,1,1),Bs=new h.aP(1,0,1,1),Bl=new h.aP(0,1,1,1);function Ec(y,n,s,d){Co(y,0,n+s/2,y.transform.width,s,d)}function ha(y,n,s,d){Co(y,n-s/2,0,s,y.transform.height,d)}function Co(y,n,s,d,f,_){const b=y.context,T=b.gl;T.enable(T.SCISSOR_TEST),T.scissor(n*y.pixelRatio,s*y.pixelRatio,d*y.pixelRatio,f*y.pixelRatio),b.clear({color:_}),T.disable(T.SCISSOR_TEST)}function Nd(y,n,s){const d=y.context,f=d.gl,_=s.posMatrix,b=y.useProgram("debug"),T=$t.disabled,E=zr.disabled,I=y.colorModeForRenderPass(),R="$debug",z=y.style.map.terrain&&y.style.map.terrain.getTerrainData(s);d.activeTexture.set(f.TEXTURE0);const U=n.getTileByID(s.key).latestRawTileData,W=Math.floor((U&&U.byteLength||0)/1024),X=n.getTile(s).tileSize,ie=512/Math.min(X,512)*(s.overscaledZ/y.transform.zoom)*.5;let J=s.canonical.toString();s.overscaledZ!==s.canonical.z&&(J+=` => ${s.overscaledZ}`),function(ae,fe){ae.initDebugOverlayCanvas();const re=ae.debugOverlayCanvas,ge=ae.context.gl,we=ae.debugOverlayCanvas.getContext("2d");we.clearRect(0,0,re.width,re.height),we.shadowColor="white",we.shadowBlur=2,we.lineWidth=1.5,we.strokeStyle="white",we.textBaseline="top",we.font="bold 36px Open Sans, sans-serif",we.fillText(fe,5,5),we.strokeText(fe,5,5),ae.debugOverlayTexture.update(re),ae.debugOverlayTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE)}(y,`${J} ${W}kB`),b.draw(d,f.TRIANGLES,T,E,Ur.alphaBlended,Ir.disabled,cc(_,h.aP.transparent,ie),null,R,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),b.draw(d,f.LINE_STRIP,T,E,I,Ir.disabled,cc(_,h.aP.red),z,R,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function Nl(y,n,s){const d=y.context,f=d.gl,_=y.colorModeForRenderPass(),b=new $t(f.LEQUAL,$t.ReadWrite,y.depthRangeFor3D),T=y.useProgram("terrain"),E=n.getTerrainMesh();d.bindFramebuffer.set(null),d.viewport.set([0,0,y.width,y.height]);for(const I of s){const R=y.renderToTexture.getTexture(I),z=n.getTerrainData(I.tileID);d.activeTexture.set(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,R.texture);const U={u_matrix:y.transform.calculatePosMatrix(I.tileID.toUnwrapped()),u_texture:0,u_ele_delta:n.getMeshFrameDelta(y.transform.zoom)};T.draw(d,f.TRIANGLES,b,zr.disabled,_,Ir.backCCW,U,z,"terrain",E.vertexBuffer,E.indexBuffer,E.segments)}}class tr{constructor(n,s){this.context=new bc(n),this.transform=s,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:h.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ne.maxUnderzooming+Ne.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Mr}resize(n,s,d){if(this.width=Math.floor(n*d),this.height=Math.floor(s*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const f of this.style._order)this.style._layers[f].resize()}setup(){const n=this.context,s=new h.aW;s.emplaceBack(0,0),s.emplaceBack(h.W,0),s.emplaceBack(0,h.W),s.emplaceBack(h.W,h.W),this.tileExtentBuffer=n.createVertexBuffer(s,po.members),this.tileExtentSegments=h.$.simpleSegment(0,0,4,2);const d=new h.aW;d.emplaceBack(0,0),d.emplaceBack(h.W,0),d.emplaceBack(0,h.W),d.emplaceBack(h.W,h.W),this.debugBuffer=n.createVertexBuffer(d,po.members),this.debugSegments=h.$.simpleSegment(0,0,4,5);const f=new h.Z;f.emplaceBack(0,0,0,0),f.emplaceBack(h.W,0,h.W,0),f.emplaceBack(0,h.W,0,h.W),f.emplaceBack(h.W,h.W,h.W,h.W),this.rasterBoundsBuffer=n.createVertexBuffer(f,Xt.members),this.rasterBoundsSegments=h.$.simpleSegment(0,0,4,2);const _=new h.aW;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(_,po.members),this.viewportSegments=h.$.simpleSegment(0,0,4,2);const b=new h.aX;b.emplaceBack(0),b.emplaceBack(1),b.emplaceBack(3),b.emplaceBack(2),b.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(b);const T=new h.aY;T.emplaceBack(0,1,2),T.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(T);const E=this.context.gl;this.stencilClearMode=new zr({func:E.ALWAYS,mask:0},0,255,E.ZERO,E.ZERO,E.ZERO)}clearStencil(){const n=this.context,s=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=h.F();h.aO(d,0,this.width,this.height,0,0,1),h.J(d,d,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,s.TRIANGLES,$t.disabled,this.stencilClearMode,Ur.disabled,Ir.disabled,xd(d),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,s){if(this.currentStencilSource===n.source||!n.isTileClipped()||!s||!s.length)return;this.currentStencilSource=n.source;const d=this.context,f=d.gl;this.nextStencilID+s.length>256&&this.clearStencil(),d.setColorMode(Ur.disabled),d.setDepthMode($t.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const b of s){const T=this._tileClippingMaskIDs[b.key]=this.nextStencilID++,E=this.style.map.terrain&&this.style.map.terrain.getTerrainData(b);_.draw(d,f.TRIANGLES,$t.disabled,new zr({func:f.ALWAYS,mask:0},T,255,f.KEEP,f.KEEP,f.REPLACE),Ur.disabled,Ir.disabled,xd(b.posMatrix),E,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,s=this.context.gl;return new zr({func:s.NOTEQUAL,mask:255},n,255,s.KEEP,s.KEEP,s.REPLACE)}stencilModeForClipping(n){const s=this.context.gl;return new zr({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,s.KEEP,s.KEEP,s.REPLACE)}stencilConfigForOverlap(n){const s=this.context.gl,d=n.sort((b,T)=>T.overscaledZ-b.overscaledZ),f=d[d.length-1].overscaledZ,_=d[0].overscaledZ-f+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const b={};for(let T=0;T<_;T++)b[T+f]=new zr({func:s.GEQUAL,mask:255},T+this.nextStencilID,255,s.KEEP,s.KEEP,s.REPLACE);return this.nextStencilID+=_,[b,d]}return[{[f]:zr.disabled},d]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new Ur([n.CONSTANT_COLOR,n.ONE],new h.aP(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ur.unblended:Ur.alphaBlended}depthModeForSublayer(n,s,d){if(!this.opaquePassEnabledForLayer())return $t.disabled;const f=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new $t(d||this.context.gl.LEQUAL,s,[f,f])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,s){this.style=n,this.options=s,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(M.now()),this.imageManager.beginFrame();const d=this.style._order,f=this.style.sourceCaches,_={},b={},T={};for(const E in f){const I=f[E];I.used&&I.prepare(this.context),_[E]=I.getVisibleCoordinates(),b[E]=_[E].slice().reverse(),T[E]=I.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let E=0;E<d.length;E++)if(this.style._layers[d[E]].is3D()){this.opaquePassCutoff=E;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const E of d){const I=this.style._layers[E];if(!I.hasOffscreenPass()||I.isHidden(this.transform.zoom))continue;const R=b[I.source];(I.type==="custom"||R.length)&&this.renderLayer(this,f[I.source],I,R)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?h.aP.black:h.aP.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){const E=this.style._layers[d[this.currentLayer]],I=f[E.source],R=_[E.source];this._renderTileClippingMasks(E,R),this.renderLayer(this,I,E,R)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){const E=this.style._layers[d[this.currentLayer]],I=f[E.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(E))continue;const R=(E.type==="symbol"?T:b)[E.source];this._renderTileClippingMasks(E,_[E.source]),this.renderLayer(this,I,E,R)}if(this.options.showTileBoundaries){const E=function(I,R){let z=null;const U=Object.values(I._layers).flatMap(J=>J.source&&!J.isHidden(R)?[I.sourceCaches[J.source]]:[]),W=U.filter(J=>J.getSource().type==="vector"),X=U.filter(J=>J.getSource().type!=="vector"),ie=J=>{(!z||z.getSource().maxzoom<J.getSource().maxzoom)&&(z=J)};return W.forEach(J=>ie(J)),z||X.forEach(J=>ie(J)),z}(this.style,this.transform.zoom);E&&function(I,R,z){for(let U=0;U<z.length;U++)Nd(I,R,z[U])}(this,E,E.getVisibleCoordinates())}this.options.showPadding&&function(E){const I=E.transform.padding;Ec(E,E.transform.height-(I.top||0),3,ca),Ec(E,I.bottom||0,3,Ol),ha(E,I.left||0,3,Fl),ha(E,E.transform.width-(I.right||0),3,Bs);const R=E.transform.centerPoint;(function(z,U,W,X){Co(z,U-1,W-10,2,20,X),Co(z,U-10,W-1,20,2,X)})(E,R.x,E.transform.height-R.y,Bl)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(n){if(!this.style||!this.style.map||!this.style.map.terrain)return;const s=this.terrainFacilitator.matrix,d=this.transform.modelViewProjectionMatrix;let f=this.terrainFacilitator.dirty;f||(f=n?!h.aZ(s,d):!h.a_(s,d)),f||(f=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),f&&(h.a$(s,d),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(_,b){const T=_.context,E=T.gl,I=Ur.unblended,R=new $t(E.LEQUAL,$t.ReadWrite,[0,1]),z=b.getTerrainMesh(),U=b.sourceCache.getRenderableTiles(),W=_.useProgram("terrainDepth");T.bindFramebuffer.set(b.getFramebuffer("depth").framebuffer),T.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),T.clear({color:h.aP.transparent,depth:1});for(const X of U){const ie=b.getTerrainData(X.tileID),J={u_matrix:_.transform.calculatePosMatrix(X.tileID.toUnwrapped()),u_ele_delta:b.getMeshFrameDelta(_.transform.zoom)};W.draw(T,E.TRIANGLES,R,zr.disabled,I,Ir.backCCW,J,ie,"terrain",z.vertexBuffer,z.indexBuffer,z.segments)}T.bindFramebuffer.set(null),T.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain),function(_,b){const T=_.context,E=T.gl,I=Ur.unblended,R=new $t(E.LEQUAL,$t.ReadWrite,[0,1]),z=b.getTerrainMesh(),U=b.getCoordsTexture(),W=b.sourceCache.getRenderableTiles(),X=_.useProgram("terrainCoords");T.bindFramebuffer.set(b.getFramebuffer("coords").framebuffer),T.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),T.clear({color:h.aP.transparent,depth:1}),b.coordsIndex=[];for(const ie of W){const J=b.getTerrainData(ie.tileID);T.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,U.texture);const ae={u_matrix:_.transform.calculatePosMatrix(ie.tileID.toUnwrapped()),u_terrain_coords_id:(255-b.coordsIndex.length)/255,u_texture:0,u_ele_delta:b.getMeshFrameDelta(_.transform.zoom)};X.draw(T,E.TRIANGLES,R,zr.disabled,I,Ir.backCCW,ae,J,"terrain",z.vertexBuffer,z.indexBuffer,z.segments),b.coordsIndex.push(ie.tileID.key)}T.bindFramebuffer.set(null),T.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain))}renderLayer(n,s,d,f){if(!d.isHidden(this.transform.zoom)&&(d.type==="background"||d.type==="custom"||(f||[]).length))switch(this.id=d.id,d.type){case"symbol":(function(_,b,T,E,I){if(_.renderPass!=="translucent")return;const R=zr.disabled,z=_.colorModeForRenderPass();(T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(U,W,X,ie,J,ae,fe,re,ge){const we=W.transform,Te=ln(),De=J==="map",Ue=ae==="map";for(const it of U){const at=ie.getTile(it),Ve=at.getBucket(X);if(!Ve||!Ve.text||!Ve.text.segments.get().length)continue;const Ze=h.ag(Ve.textSizeData,we.zoom),ft=He(at,1,W.transform.zoom),Lt=kn(it.posMatrix,Ue,De,W.transform,ft),Xe=X.layout.get("icon-text-fit")!=="none"&&Ve.hasIconData();if(Ze){const tt=Math.pow(2,we.zoom-at.tileID.overscaledZ),Pt=W.style.map.terrain?(Vt,qt)=>W.style.map.terrain.getElevation(it,Vt,qt):null,Sr=Te.translatePosition(we,at,fe,re);Ll(Ve,De,Ue,ge,we,Lt,it.posMatrix,tt,Ze,Xe,Te,Sr,it.toUnwrapped(),Pt)}}}(E,_,T,b,T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),I),T.paint.get("icon-opacity").constantOr(1)!==0&&Fs(_,b,T,E,!1,T.paint.get("icon-translate"),T.paint.get("icon-translate-anchor"),T.layout.get("icon-rotation-alignment"),T.layout.get("icon-pitch-alignment"),T.layout.get("icon-keep-upright"),R,z),T.paint.get("text-opacity").constantOr(1)!==0&&Fs(_,b,T,E,!0,T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.layout.get("text-keep-upright"),R,z),b.map.showCollisionBoxes&&(Dd(_,b,T,E,!0),Dd(_,b,T,E,!1))})(n,s,d,f,this.style.placement.variableOffsets);break;case"circle":(function(_,b,T,E){if(_.renderPass!=="translucent")return;const I=T.paint.get("circle-opacity"),R=T.paint.get("circle-stroke-width"),z=T.paint.get("circle-stroke-opacity"),U=!T.layout.get("circle-sort-key").isConstant();if(I.constantOr(1)===0&&(R.constantOr(1)===0||z.constantOr(1)===0))return;const W=_.context,X=W.gl,ie=_.depthModeForSublayer(0,$t.ReadOnly),J=zr.disabled,ae=_.colorModeForRenderPass(),fe=[];for(let re=0;re<E.length;re++){const ge=E[re],we=b.getTile(ge),Te=we.getBucket(T);if(!Te)continue;const De=Te.programConfigurations.get(T.id),Ue=_.useProgram("circle",De),it=Te.layoutVertexBuffer,at=Te.indexBuffer,Ve=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ge),Ze={programConfiguration:De,program:Ue,layoutVertexBuffer:it,indexBuffer:at,uniformValues:Em(_,ge,we,T),terrainData:Ve};if(U){const ft=Te.segments.get();for(const Lt of ft)fe.push({segments:new h.$([Lt]),sortKey:Lt.sortKey,state:Ze})}else fe.push({segments:Te.segments,sortKey:0,state:Ze})}U&&fe.sort((re,ge)=>re.sortKey-ge.sortKey);for(const re of fe){const{programConfiguration:ge,program:we,layoutVertexBuffer:Te,indexBuffer:De,uniformValues:Ue,terrainData:it}=re.state;we.draw(W,X.TRIANGLES,ie,J,ae,Ir.disabled,Ue,it,T.id,Te,De,re.segments,T.paint,_.transform.zoom,ge)}})(n,s,d,f);break;case"heatmap":(function(_,b,T,E){if(T.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const I=_.context,R=I.gl,z=zr.disabled,U=new Ur([R.ONE,R.ONE],h.aP.transparent,[!0,!0,!0,!0]);(function(W,X,ie){const J=W.gl;W.activeTexture.set(J.TEXTURE1),W.viewport.set([0,0,X.width/4,X.height/4]);let ae=ie.heatmapFbo;if(ae)J.bindTexture(J.TEXTURE_2D,ae.colorAttachment.get()),W.bindFramebuffer.set(ae.framebuffer);else{const fe=J.createTexture();J.bindTexture(J.TEXTURE_2D,fe),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.LINEAR),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.LINEAR),ae=ie.heatmapFbo=W.createFramebuffer(X.width/4,X.height/4,!1,!1),function(re,ge,we,Te){var De,Ue;const it=re.gl,at=(De=re.HALF_FLOAT)!==null&&De!==void 0?De:it.UNSIGNED_BYTE,Ve=(Ue=re.RGBA16F)!==null&&Ue!==void 0?Ue:it.RGBA;it.texImage2D(it.TEXTURE_2D,0,Ve,ge.width/4,ge.height/4,0,it.RGBA,at,null),Te.colorAttachment.set(we)}(W,X,fe,ae)}})(I,_,T),I.clear({color:h.aP.transparent});for(let W=0;W<E.length;W++){const X=E[W];if(b.hasRenderableParent(X))continue;const ie=b.getTile(X),J=ie.getBucket(T);if(!J)continue;const ae=J.programConfigurations.get(T.id),fe=_.useProgram("heatmap",ae),{zoom:re}=_.transform;fe.draw(I,R.TRIANGLES,$t.disabled,z,U,Ir.disabled,sa(X.posMatrix,ie,re,T.paint.get("heatmap-intensity")),null,T.id,J.layoutVertexBuffer,J.indexBuffer,J.segments,T.paint,_.transform.zoom,ae)}I.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(I,R){const z=I.context,U=z.gl,W=R.heatmapFbo;if(!W)return;z.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,W.colorAttachment.get()),z.activeTexture.set(U.TEXTURE1);let X=R.colorRampTexture;X||(X=R.colorRampTexture=new Be(z,R.colorRamp,U.RGBA)),X.bind(U.LINEAR,U.CLAMP_TO_EDGE),I.useProgram("heatmapTexture").draw(z,U.TRIANGLES,$t.disabled,zr.disabled,I.colorModeForRenderPass(),Ir.disabled,((ie,J,ae,fe)=>{const re=h.F();h.aO(re,0,ie.width,ie.height,0,0,1);const ge=ie.context.gl;return{u_matrix:re,u_world:[ge.drawingBufferWidth,ge.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:J.paint.get("heatmap-opacity")}})(I,R),null,R.id,I.viewportBuffer,I.quadTriangleIndexBuffer,I.viewportSegments,R.paint,I.transform.zoom)}(_,T))})(n,s,d,f);break;case"line":(function(_,b,T,E){if(_.renderPass!=="translucent")return;const I=T.paint.get("line-opacity"),R=T.paint.get("line-width");if(I.constantOr(1)===0||R.constantOr(1)===0)return;const z=_.depthModeForSublayer(0,$t.ReadOnly),U=_.colorModeForRenderPass(),W=T.paint.get("line-dasharray"),X=T.paint.get("line-pattern"),ie=X.constantOr(1),J=T.paint.get("line-gradient"),ae=T.getCrossfadeParameters(),fe=ie?"linePattern":W?"lineSDF":J?"lineGradient":"line",re=_.context,ge=re.gl;let we=!0;for(const Te of E){const De=b.getTile(Te);if(ie&&!De.patternsLoaded())continue;const Ue=De.getBucket(T);if(!Ue)continue;const it=Ue.programConfigurations.get(T.id),at=_.context.program.get(),Ve=_.useProgram(fe,it),Ze=we||Ve.program!==at,ft=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Te),Lt=X.constantOr(null);if(Lt&&De.imageAtlas){const Pt=De.imageAtlas,Sr=Pt.patternPositions[Lt.to.toString()],Vt=Pt.patternPositions[Lt.from.toString()];Sr&&Vt&&it.setConstantPatternPositions(Sr,Vt)}const Xe=ft?Te:null,tt=ie?hc(_,De,T,ae,Xe):W?Cl(_,De,T,W,ae,Xe):J?hi(_,De,T,Ue.lineClipsArray.length,Xe):Un(_,De,T,Xe);if(ie)re.activeTexture.set(ge.TEXTURE0),De.imageAtlasTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),it.updatePaintBuffers(ae);else if(W&&(Ze||_.lineAtlas.dirty))re.activeTexture.set(ge.TEXTURE0),_.lineAtlas.bind(re);else if(J){const Pt=Ue.gradients[T.id];let Sr=Pt.texture;if(T.gradientVersion!==Pt.version){let Vt=256;if(T.stepInterpolant){const qt=b.getSource().maxzoom,Tr=Te.canonical.z===qt?Math.ceil(1<<_.transform.maxZoom-Te.canonical.z):1;Vt=h.ac(h.aU(Ue.maxLineLength/h.W*1024*Tr),256,re.maxTextureSize)}Pt.gradient=h.aV({expression:T.gradientExpression(),evaluationKey:"lineProgress",resolution:Vt,image:Pt.gradient||void 0,clips:Ue.lineClipsArray}),Pt.texture?Pt.texture.update(Pt.gradient):Pt.texture=new Be(re,Pt.gradient,ge.RGBA),Pt.version=T.gradientVersion,Sr=Pt.texture}re.activeTexture.set(ge.TEXTURE0),Sr.bind(T.stepInterpolant?ge.NEAREST:ge.LINEAR,ge.CLAMP_TO_EDGE)}Ve.draw(re,ge.TRIANGLES,z,_.stencilModeForClipping(Te),U,Ir.disabled,tt,ft,T.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,T.paint,_.transform.zoom,it,Ue.layoutVertexBuffer2),we=!1}})(n,s,d,f);break;case"fill":(function(_,b,T,E){const I=T.paint.get("fill-color"),R=T.paint.get("fill-opacity");if(R.constantOr(1)===0)return;const z=_.colorModeForRenderPass(),U=T.paint.get("fill-pattern"),W=_.opaquePassEnabledForLayer()&&!U.constantOr(1)&&I.constantOr(h.aP.transparent).a===1&&R.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===W){const X=_.depthModeForSublayer(1,_.renderPass==="opaque"?$t.ReadWrite:$t.ReadOnly);ua(_,b,T,E,X,z,!1)}if(_.renderPass==="translucent"&&T.paint.get("fill-antialias")){const X=_.depthModeForSublayer(T.getPaintProperty("fill-outline-color")?2:0,$t.ReadOnly);ua(_,b,T,E,X,z,!0)}})(n,s,d,f);break;case"fill-extrusion":(function(_,b,T,E){const I=T.paint.get("fill-extrusion-opacity");if(I!==0&&_.renderPass==="translucent"){const R=new $t(_.context.gl.LEQUAL,$t.ReadWrite,_.depthRangeFor3D);if(I!==1||T.paint.get("fill-extrusion-pattern").constantOr(1))Jn(_,b,T,E,R,zr.disabled,Ur.disabled),Jn(_,b,T,E,R,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const z=_.colorModeForRenderPass();Jn(_,b,T,E,R,zr.disabled,z)}}})(n,s,d,f);break;case"hillshade":(function(_,b,T,E){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const I=_.context,R=_.depthModeForSublayer(0,$t.ReadOnly),z=_.colorModeForRenderPass(),[U,W]=_.renderPass==="translucent"?_.stencilConfigForOverlap(E):[{},E];for(const X of W){const ie=b.getTile(X);ie.needsHillshadePrepare!==void 0&&ie.needsHillshadePrepare&&_.renderPass==="offscreen"?Bd(_,ie,T,R,zr.disabled,z):_.renderPass==="translucent"&&Fd(_,X,ie,T,R,U[X.overscaledZ],z)}I.viewport.set([0,0,_.width,_.height])})(n,s,d,f);break;case"raster":(function(_,b,T,E){if(_.renderPass!=="translucent"||T.paint.get("raster-opacity")===0||!E.length)return;const I=_.context,R=I.gl,z=b.getSource(),U=_.useProgram("raster"),W=_.colorModeForRenderPass(),[X,ie]=z instanceof Xn?[{},E]:_.stencilConfigForOverlap(E),J=ie[ie.length-1].overscaledZ,ae=!_.options.moving;for(const fe of ie){const re=_.depthModeForSublayer(fe.overscaledZ-J,T.paint.get("raster-opacity")===1?$t.ReadWrite:$t.ReadOnly,R.LESS),ge=b.getTile(fe);ge.registerFadeDuration(T.paint.get("raster-fade-duration"));const we=b.findLoadedParent(fe,0),Te=b.findLoadedSibling(fe),De=Tc(ge,we||Te||null,b,T,_.transform,_.style.map.terrain);let Ue,it;const at=T.paint.get("raster-resampling")==="nearest"?R.NEAREST:R.LINEAR;I.activeTexture.set(R.TEXTURE0),ge.texture.bind(at,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),I.activeTexture.set(R.TEXTURE1),we?(we.texture.bind(at,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),Ue=Math.pow(2,we.tileID.overscaledZ-ge.tileID.overscaledZ),it=[ge.tileID.canonical.x*Ue%1,ge.tileID.canonical.y*Ue%1]):ge.texture.bind(at,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST);const Ve=_.style.map.terrain&&_.style.map.terrain.getTerrainData(fe),Ze=Ve?fe:null,ft=Ze?Ze.posMatrix:_.transform.calculatePosMatrix(fe.toUnwrapped(),ae),Lt=Oa(ft,it||[0,0],Ue||1,De,T);z instanceof Xn?U.draw(I,R.TRIANGLES,re,zr.disabled,W,Ir.disabled,Lt,Ve,T.id,z.boundsBuffer,_.quadTriangleIndexBuffer,z.boundsSegments):U.draw(I,R.TRIANGLES,re,X[fe.overscaledZ],W,Ir.disabled,Lt,Ve,T.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(n,s,d,f);break;case"background":(function(_,b,T,E){const I=T.paint.get("background-color"),R=T.paint.get("background-opacity");if(R===0)return;const z=_.context,U=z.gl,W=_.transform,X=W.tileSize,ie=T.paint.get("background-pattern");if(_.isPatternMissing(ie))return;const J=!ie&&I.a===1&&R===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==J)return;const ae=zr.disabled,fe=_.depthModeForSublayer(0,J==="opaque"?$t.ReadWrite:$t.ReadOnly),re=_.colorModeForRenderPass(),ge=_.useProgram(ie?"backgroundPattern":"background"),we=E||W.coveringTiles({tileSize:X,terrain:_.style.map.terrain});ie&&(z.activeTexture.set(U.TEXTURE0),_.imageManager.bind(_.context));const Te=T.getCrossfadeParameters();for(const De of we){const Ue=E?De.posMatrix:_.transform.calculatePosMatrix(De.toUnwrapped()),it=ie?Am(Ue,R,_,ie,{tileID:De,tileSize:X},Te):Im(Ue,R,I),at=_.style.map.terrain&&_.style.map.terrain.getTerrainData(De);ge.draw(z,U.TRIANGLES,fe,ae,re,Ir.disabled,it,at,T.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(n,0,d,f);break;case"custom":(function(_,b,T){const E=_.context,I=T.implementation;if(_.renderPass==="offscreen"){const R=I.prerender;R&&(_.setCustomLayerDefaults(),E.setColorMode(_.colorModeForRenderPass()),R.call(I,E.gl,_.transform.customLayerMatrix()),E.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),E.setColorMode(_.colorModeForRenderPass()),E.setStencilMode(zr.disabled);const R=I.renderingMode==="3d"?new $t(_.context.gl.LEQUAL,$t.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,$t.ReadOnly);E.setDepthMode(R),I.render(E.gl,_.transform.customLayerMatrix()),E.setDirty(),_.setBaseState(),E.bindFramebuffer.set(null)}})(n,0,d)}}translatePosMatrix(n,s,d,f,_){if(!d[0]&&!d[1])return n;const b=_?f==="map"?this.transform.angle:0:f==="viewport"?-this.transform.angle:0;if(b){const I=Math.sin(b),R=Math.cos(b);d=[d[0]*R-d[1]*I,d[0]*I+d[1]*R]}const T=[_?d[0]:He(s,d[0],this.transform.zoom),_?d[1]:He(s,d[1],this.transform.zoom),0],E=new Float32Array(16);return h.H(E,n,T),E}saveTileTexture(n){const s=this._tileTextures[n.size[0]];s?s.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const s=this._tileTextures[n];return s&&s.length>0?s.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const s=this.imageManager.getPattern(n.from.toString()),d=this.imageManager.getPattern(n.to.toString());return!s||!d}useProgram(n,s){this.cache=this.cache||{};const d=n+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[d]||(this.cache[d]=new lc(this.context,Ra[n],s,Pl[n],this._showOverdrawInspector,this.style.map.terrain)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Be(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:n,drawingBufferHeight:s}=this.context.gl;return this.width!==n||this.height!==s}}class Na{constructor(n,s){this.points=n,this.planes=s}static fromInvProjectionMatrix(n,s,d){const f=Math.pow(2,d),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(T=>{const E=1/(T=h.af([],T,n))[3]/s*f;return h.b0(T,T,[E,E,1/T[3],E])}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(T=>{const E=function(U,W){var X=W[0],ie=W[1],J=W[2],ae=X*X+ie*ie+J*J;return ae>0&&(ae=1/Math.sqrt(ae)),U[0]=W[0]*ae,U[1]=W[1]*ae,U[2]=W[2]*ae,U}([],function(U,W,X){var ie=W[0],J=W[1],ae=W[2],fe=X[0],re=X[1],ge=X[2];return U[0]=J*ge-ae*re,U[1]=ae*fe-ie*ge,U[2]=ie*re-J*fe,U}([],Me([],_[T[0]],_[T[1]]),Me([],_[T[2]],_[T[1]]))),I=-((R=E)[0]*(z=_[T[1]])[0]+R[1]*z[1]+R[2]*z[2]);var R,z;return E.concat(I)});return new Na(_,b)}}class jl{constructor(n,s){this.min=n,this.max=s,this.center=function(d,f,_){return d[0]=.5*f[0],d[1]=.5*f[1],d[2]=.5*f[2],d}([],function(d,f,_){return d[0]=f[0]+_[0],d[1]=f[1]+_[1],d[2]=f[2]+_[2],d}([],this.min,this.max))}quadrant(n){const s=[n%2==0,n<2],d=Ae(this.min),f=Ae(this.max);for(let _=0;_<s.length;_++)d[_]=s[_]?this.min[_]:this.center[_],f[_]=s[_]?this.center[_]:this.max[_];return f[2]=this.max[2],new jl(d,f)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersects(n){const s=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let d=!0;for(let f=0;f<n.planes.length;f++){const _=n.planes[f];let b=0;for(let T=0;T<s.length;T++)h.b1(_,s[T])>=0&&b++;if(b===0)return 0;b!==s.length&&(d=!1)}if(d)return 2;for(let f=0;f<3;f++){let _=Number.MAX_VALUE,b=-Number.MAX_VALUE;for(let T=0;T<n.points.length;T++){const E=n.points[T][f]-this.min[f];_=Math.min(_,E),b=Math.max(b,E)}if(b<0||_>this.max[f]-this.min[f])return 0}return 1}}class Ns{constructor(n=0,s=0,d=0,f=0){if(isNaN(n)||n<0||isNaN(s)||s<0||isNaN(d)||d<0||isNaN(f)||f<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=s,this.left=d,this.right=f}interpolate(n,s,d){return s.top!=null&&n.top!=null&&(this.top=h.z.number(n.top,s.top,d)),s.bottom!=null&&n.bottom!=null&&(this.bottom=h.z.number(n.bottom,s.bottom,d)),s.left!=null&&n.left!=null&&(this.left=h.z.number(n.left,s.left,d)),s.right!=null&&n.right!=null&&(this.right=h.z.number(n.right,s.right,d)),this}getCenter(n,s){const d=h.ac((this.left+n-this.right)/2,0,n),f=h.ac((this.top+s-this.bottom)/2,0,s);return new h.P(d,f)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new Ns(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const ja=85.051129;class kc{constructor(n,s,d,f,_){this.tileSize=512,this._renderWorldCopies=_===void 0||!!_,this._minZoom=n||0,this._maxZoom=s||22,this._minPitch=d??0,this._maxPitch=f??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new h.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ns,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const n=new kc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.apply(this),n}apply(n){this.tileSize=n.tileSize,this.latRange=n.latRange,this.width=n.width,this.height=n.height,this._center=n._center,this._elevation=n._elevation,this.minElevationForCurrentTile=n.minElevationForCurrentTile,this.zoom=n.zoom,this.angle=n.angle,this._fov=n._fov,this._pitch=n._pitch,this._unmodified=n._unmodified,this._edgeInsets=n._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))}get maxZoom(){return this._maxZoom}set maxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))}get minPitch(){return this._minPitch}set minPitch(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))}get maxPitch(){return this._maxPitch}set maxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new h.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(n){const s=-h.b2(n,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=function(){var d=new h.A(4);return h.A!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}(),function(d,f,_){var b=f[0],T=f[1],E=f[2],I=f[3],R=Math.sin(_),z=Math.cos(_);d[0]=b*z+E*R,d[1]=T*z+I*R,d[2]=b*-R+E*z,d[3]=T*-R+I*z}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(n){const s=h.ac(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(n){const s=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.tileZoom=Math.max(0,Math.floor(s)),this.scale=this.zoomScale(s),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(n){n!==this._elevation&&(this._elevation=n,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,s,d){this._unmodified=!1,this._edgeInsets.interpolate(n,s,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(n){const s=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,s)}getVisibleUnwrappedCoordinates(n){const s=[new h.b3(0,n)];if(this._renderWorldCopies){const d=this.pointCoordinate(new h.P(0,0)),f=this.pointCoordinate(new h.P(this.width,0)),_=this.pointCoordinate(new h.P(this.width,this.height)),b=this.pointCoordinate(new h.P(0,this.height)),T=Math.floor(Math.min(d.x,f.x,_.x,b.x)),E=Math.floor(Math.max(d.x,f.x,_.x,b.x)),I=1;for(let R=T-I;R<=E+I;R++)R!==0&&s.push(new h.b3(R,n))}return s}coveringTiles(n){var s,d;let f=this.coveringZoomLevel(n);const _=f;if(n.minzoom!==void 0&&f<n.minzoom)return[];n.maxzoom!==void 0&&f>n.maxzoom&&(f=n.maxzoom);const b=this.pointCoordinate(this.getCameraPoint()),T=h.Y.fromLngLat(this.center),E=Math.pow(2,f),I=[E*b.x,E*b.y,0],R=[E*T.x,E*T.y,0],z=Na.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,f);let U=n.minzoom||0;!n.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(U=f);const W=n.terrain?2/Math.min(this.tileSize,n.tileSize)*this.tileSize:3,X=re=>({aabb:new jl([re*E,0,0],[(re+1)*E,E,0]),zoom:0,x:0,y:0,wrap:re,fullyVisible:!1}),ie=[],J=[],ae=f,fe=n.reparseOverscaled?_:f;if(this._renderWorldCopies)for(let re=1;re<=3;re++)ie.push(X(-re)),ie.push(X(re));for(ie.push(X(0));ie.length>0;){const re=ie.pop(),ge=re.x,we=re.y;let Te=re.fullyVisible;if(!Te){const Ve=re.aabb.intersects(z);if(Ve===0)continue;Te=Ve===2}const De=n.terrain?I:R,Ue=re.aabb.distanceX(De),it=re.aabb.distanceY(De),at=Math.max(Math.abs(Ue),Math.abs(it));if(re.zoom===ae||at>W+(1<<ae-re.zoom)-2&&re.zoom>=U){const Ve=ae-re.zoom,Ze=I[0]-.5-(ge<<Ve),ft=I[1]-.5-(we<<Ve);J.push({tileID:new h.Q(re.zoom===ae?fe:re.zoom,re.wrap,re.zoom,ge,we),distanceSq:$e([R[0]-.5-ge,R[1]-.5-we]),tileDistanceToCamera:Math.sqrt(Ze*Ze+ft*ft)})}else for(let Ve=0;Ve<4;Ve++){const Ze=(ge<<1)+Ve%2,ft=(we<<1)+(Ve>>1),Lt=re.zoom+1;let Xe=re.aabb.quadrant(Ve);if(n.terrain){const tt=new h.Q(Lt,re.wrap,Lt,Ze,ft),Pt=n.terrain.getMinMaxElevation(tt),Sr=(s=Pt.minElevation)!==null&&s!==void 0?s:this.elevation,Vt=(d=Pt.maxElevation)!==null&&d!==void 0?d:this.elevation;Xe=new jl([Xe.min[0],Xe.min[1],Sr],[Xe.max[0],Xe.max[1],Vt])}ie.push({aabb:Xe,zoom:Lt,x:Ze,y:ft,wrap:re.wrap,fullyVisible:Te})}}return J.sort((re,ge)=>re.distanceSq-ge.distanceSq).map(re=>re.tileID)}resize(n,s){this.width=n,this.height=s,this.pixelsToGLUnits=[2/n,-2/s],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(n){return Math.pow(2,n)}scaleZoom(n){return Math.log(n)/Math.LN2}project(n){const s=h.ac(n.lat,-85.051129,ja);return new h.P(h.N(n.lng)*this.worldSize,h.O(s)*this.worldSize)}unproject(n){return new h.Y(n.x/this.worldSize,n.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(n){const s=this.elevation,d=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,f=this.pointLocation(this.centerPoint,n),_=n.getElevationForLngLatZoom(f,this.tileZoom);if(!(this.elevation-_))return;const b=d+s-_,T=Math.cos(this._pitch)*this.cameraToCenterDistance/b/h.b4(1,f.lat),E=this.scaleZoom(T/this.tileSize);this._elevation=_,this._center=f,this.zoom=E}setLocationAtPoint(n,s){const d=this.pointCoordinate(s),f=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(n),b=new h.Y(_.x-(d.x-f.x),_.y-(d.y-f.y));this.center=this.coordinateLocation(b),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(n,s){return s?this.coordinatePoint(this.locationCoordinate(n),s.getElevationForLngLatZoom(n,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(n))}pointLocation(n,s){return this.coordinateLocation(this.pointCoordinate(n,s))}locationCoordinate(n){return h.Y.fromLngLat(n)}coordinateLocation(n){return n&&n.toLngLat()}pointCoordinate(n,s){if(s){const U=s.pointCoordinate(n);if(U!=null)return U}const d=[n.x,n.y,0,1],f=[n.x,n.y,1,1];h.af(d,d,this.pixelMatrixInverse),h.af(f,f,this.pixelMatrixInverse);const _=d[3],b=f[3],T=d[1]/_,E=f[1]/b,I=d[2]/_,R=f[2]/b,z=I===R?0:(0-I)/(R-I);return new h.Y(h.z.number(d[0]/_,f[0]/b,z)/this.worldSize,h.z.number(T,E,z)/this.worldSize)}coordinatePoint(n,s=0,d=this.pixelMatrix){const f=[n.x*this.worldSize,n.y*this.worldSize,s,1];return h.af(f,f,d),new h.P(f[0]/f[3],f[1]/f[3])}getBounds(){const n=Math.max(0,this.height/2-this.getHorizon());return new yr().extend(this.pointLocation(new h.P(0,n))).extend(this.pointLocation(new h.P(this.width,n))).extend(this.pointLocation(new h.P(this.width,this.height))).extend(this.pointLocation(new h.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new yr([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,ja])}calculatePosMatrix(n,s=!1){const d=n.key,f=s?this._alignedPosMatrixCache:this._posMatrixCache;if(f[d])return f[d];const _=n.canonical,b=this.worldSize/this.zoomScale(_.z),T=_.x+Math.pow(2,_.z)*n.wrap,E=h.an(new Float64Array(16));return h.H(E,E,[T*b,_.y*b,0]),h.J(E,E,[b/h.W,b/h.W,1]),h.K(E,s?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,E),f[d]=new Float32Array(E),f[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(n,s){s=h.ac(+s,this.minZoom,this.maxZoom);const d={center:new h.M(n.lng,n.lat),zoom:s};let f=this.lngRange;if(!this._renderWorldCopies&&f===null){const re=179.9999999999;f=[-re,re]}const _=this.tileSize*this.zoomScale(d.zoom);let b=0,T=_,E=0,I=_,R=0,z=0;const{x:U,y:W}=this.size;if(this.latRange){const re=this.latRange;b=h.O(re[1])*_,T=h.O(re[0])*_,T-b<W&&(R=W/(T-b))}f&&(E=h.b2(h.N(f[0])*_,0,_),I=h.b2(h.N(f[1])*_,0,_),I<E&&(I+=_),I-E<U&&(z=U/(I-E)));const{x:X,y:ie}=this.project.call({worldSize:_},n);let J,ae;const fe=Math.max(z||0,R||0);if(fe){const re=new h.P(z?(I+E)/2:X,R?(T+b)/2:ie);return d.center=this.unproject.call({worldSize:_},re).wrap(),d.zoom+=this.scaleZoom(fe),d}if(this.latRange){const re=W/2;ie-re<b&&(ae=b+re),ie+re>T&&(ae=T-re)}if(f){const re=(E+I)/2;let ge=X;this._renderWorldCopies&&(ge=h.b2(X,re-_/2,re+_/2));const we=U/2;ge-we<E&&(J=E+we),ge+we>I&&(J=I-we)}if(J!==void 0||ae!==void 0){const re=new h.P(J??X,ae??ie);d.center=this.unproject.call({worldSize:_},re).wrap()}return d}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const n=this._unmodified,{center:s,zoom:d}=this.getConstrained(this.center,this.zoom);this.center=s,this.zoom=d,this._unmodified=n,this._constraining=!1}_calcMatrices(){if(!this.height)return;const n=this.centerOffset,s=this.point.x,d=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=h.b4(1,this.center.lat)*this.worldSize;let f=h.an(new Float64Array(16));h.J(f,f,[this.width/2,-this.height/2,1]),h.H(f,f,[1,-1,0]),this.labelPlaneMatrix=f,f=h.an(new Float64Array(16)),h.J(f,f,[1,-1,1]),h.H(f,f,[-1,-1,0]),h.J(f,f,[2/this.width,2/this.height,1]),this.glCoordMatrix=f;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),b=Math.min(this.elevation,this.minElevationForCurrentTile),T=_-b*this._pixelPerMeter/Math.cos(this._pitch),E=b<0?T:_,I=Math.PI/2+this._pitch,R=this._fov*(.5+n.y/this.height),z=Math.sin(R)*E/Math.sin(h.ac(Math.PI-I-R,.01,Math.PI-.01)),U=this.getHorizon(),W=2*Math.atan(U/this.cameraToCenterDistance)*(.5+n.y/(2*U)),X=Math.sin(W)*E/Math.sin(h.ac(Math.PI-I-W,.01,Math.PI-.01)),ie=Math.min(z,X),J=1.01*(Math.cos(Math.PI/2-this._pitch)*ie+E),ae=this.height/50;f=new Float64Array(16),h.b5(f,this._fov,this.width/this.height,ae,J),f[8]=2*-n.x/this.width,f[9]=2*n.y/this.height,h.J(f,f,[1,-1,1]),h.H(f,f,[0,0,-this.cameraToCenterDistance]),h.b6(f,f,this._pitch),h.ad(f,f,this.angle),h.H(f,f,[-s,-d,0]),this.mercatorMatrix=h.J([],f,[this.worldSize,this.worldSize,this.worldSize]),h.J(f,f,[1,1,this._pixelPerMeter]),this.pixelMatrix=h.K(new Float64Array(16),this.labelPlaneMatrix,f),h.H(f,f,[0,0,-this.elevation]),this.modelViewProjectionMatrix=f,this.invModelViewProjectionMatrix=h.as([],f),this.pixelMatrix3D=h.K(new Float64Array(16),this.labelPlaneMatrix,f);const fe=this.width%2/2,re=this.height%2/2,ge=Math.cos(this.angle),we=Math.sin(this.angle),Te=s-Math.round(s)+ge*fe+we*re,De=d-Math.round(d)+ge*re+we*fe,Ue=new Float64Array(f);if(h.H(Ue,Ue,[Te>.5?Te-1:Te,De>.5?De-1:De,0]),this.alignedModelViewProjectionMatrix=Ue,f=h.as(new Float64Array(16),this.pixelMatrix),!f)throw new Error("failed to invert matrix");this.pixelMatrixInverse=f,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const n=this.pointCoordinate(new h.P(0,0)),s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return h.af(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new h.P(0,n))}getCameraQueryGeometry(n){const s=this.getCameraPoint();if(n.length===1)return[n[0],s];{let d=s.x,f=s.y,_=s.x,b=s.y;for(const T of n)d=Math.min(d,T.x),f=Math.min(f,T.y),_=Math.max(_,T.x),b=Math.max(b,T.y);return[new h.P(d,f),new h.P(_,f),new h.P(_,b),new h.P(d,b),new h.P(d,f)]}}lngLatToCameraDepth(n,s){const d=this.locationCoordinate(n),f=[d.x*this.worldSize,d.y*this.worldSize,s,1];return h.af(f,f,this.modelViewProjectionMatrix),f[2]/f[3]}}function jd(y,n){let s,d=!1,f=null,_=null;const b=()=>{f=null,d&&(y.apply(_,s),f=setTimeout(b,n),d=!1)};return(...T)=>(d=!0,_=this,s=T,f||b(),f)}class Cc{constructor(n){this._getCurrentHash=()=>{const s=window.location.hash.replace("#","");if(this._hashName){let d;return s.split("&").map(f=>f.split("=")).forEach(f=>{f[0]===this._hashName&&(d=f)}),(d&&d[1]||"").split("/")}return s.split("/")},this._onHashChange=()=>{const s=this._getCurrentHash();if(s.length>=3&&!s.some(d=>isNaN(d))){const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(s[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+s[2],+s[1]],zoom:+s[0],bearing:d,pitch:+(s[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const s=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,s)}catch{}},this._updateHash=jd(this._updateHashUnthrottled,300),this._hashName=n&&encodeURIComponent(n)}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(n){const s=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,f=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,f),b=Math.round(s.lng*_)/_,T=Math.round(s.lat*_)/_,E=this._map.getBearing(),I=this._map.getPitch();let R="";if(R+=n?`/${b}/${T}/${d}`:`${d}/${T}/${b}`,(E||I)&&(R+="/"+Math.round(10*E)/10),I&&(R+=`/${Math.round(I)}`),this._hashName){const z=this._hashName;let U=!1;const W=window.location.hash.slice(1).split("&").map(X=>{const ie=X.split("=")[0];return ie===z?(U=!0,`${ie}=${R}`):X}).filter(X=>X);return U||W.push(`${z}=${R}`),`#${W.join("&")}`}return`#${R}`}}const Ul={linearity:.3,easing:h.b7(0,0,.3,1)},Pc=h.e({deceleration:2500,maxSpeed:1400},Ul),Vl=h.e({deceleration:20,maxSpeed:1400},Ul),$l=h.e({deceleration:1e3,maxSpeed:360},Ul),Ic=h.e({deceleration:1e3,maxSpeed:90},Ul);class Ac{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:M.now(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,s=M.now();for(;n.length>0&&s-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const s={zoom:0,bearing:0,pitch:0,pan:new h.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)s.zoom+=_.zoomDelta||0,s.bearing+=_.bearingDelta||0,s.pitch+=_.pitchDelta||0,_.panDelta&&s.pan._add(_.panDelta),_.around&&(s.around=_.around),_.pinchAround&&(s.pinchAround=_.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,f={};if(s.pan.mag()){const _=da(s.pan.mag(),d,h.e({},Pc,n||{}));f.offset=s.pan.mult(_.amount/s.pan.mag()),f.center=this._map.transform.center,js(f,_)}if(s.zoom){const _=da(s.zoom,d,Vl);f.zoom=this._map.transform.zoom+_.amount,js(f,_)}if(s.bearing){const _=da(s.bearing,d,$l);f.bearing=this._map.transform.bearing+h.ac(_.amount,-179,179),js(f,_)}if(s.pitch){const _=da(s.pitch,d,Ic);f.pitch=this._map.transform.pitch+_.amount,js(f,_)}if(f.zoom||f.bearing){const _=s.pinchAround===void 0?s.around:s.pinchAround;f.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),h.e(f,{noMoveStart:!0})}}function js(y,n){(!y.duration||y.duration<n.duration)&&(y.duration=n.duration,y.easing=n.easing)}function da(y,n,s){const{maxSpeed:d,linearity:f,deceleration:_}=s,b=h.ac(y*f/(n/1e3),-d,d),T=Math.abs(b)/(_*f);return{easing:s.easing,duration:1e3*T,amount:b*(T/2)}}class Cn extends h.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,s,d,f={}){const _=L.mousePos(s.getCanvas(),d),b=s.unproject(_);super(n,h.e({point:_,lngLat:b,originalEvent:d},f)),this._defaultPrevented=!1,this.target=s}}class pa extends h.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,s,d){const f=n==="touchend"?d.changedTouches:d.touches,_=L.touchPos(s.getCanvasContainer(),f),b=_.map(E=>s.unproject(E)),T=_.reduce((E,I,R,z)=>E.add(I.div(z.length)),new h.P(0,0));super(n,{points:_,point:T,lngLats:b,lngLat:s.unproject(T),originalEvent:d}),this._defaultPrevented=!1}}class Ud extends h.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,s,d){super(n,{originalEvent:d}),this._defaultPrevented=!1}}class Mc{constructor(n,s){this._map=n,this._clickTolerance=s.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new Ud(n.type,this._map,n))}mousedown(n,s){return this._mousedownPos=s,this._firePreventable(new Cn(n.type,this._map,n))}mouseup(n){this._map.fire(new Cn(n.type,this._map,n))}click(n,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new Cn(n.type,this._map,n))}dblclick(n){return this._firePreventable(new Cn(n.type,this._map,n))}mouseover(n){this._map.fire(new Cn(n.type,this._map,n))}mouseout(n){this._map.fire(new Cn(n.type,this._map,n))}touchstart(n){return this._firePreventable(new pa(n.type,this._map,n))}touchmove(n){this._map.fire(new pa(n.type,this._map,n))}touchend(n){this._map.fire(new pa(n.type,this._map,n))}touchcancel(n){this._map.fire(new pa(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Um{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new Cn(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Cn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new Cn(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ua{constructor(n){this._map=n}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(n){return this.transform.pointLocation(h.P.convert(n),this._map.terrain)}}class Us{constructor(n,s){this._map=n,this._tr=new Ua(n),this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=s.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,s){this.isEnabled()&&n.shiftKey&&n.button===0&&(L.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)}mousemoveWindow(n,s){if(!this._active)return;const d=s;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const f=this._startPos;this._lastPos=d,this._box||(this._box=L.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",n));const _=Math.min(f.x,d.x),b=Math.max(f.x,d.x),T=Math.min(f.y,d.y),E=Math.max(f.y,d.y);L.setTransform(this._box,`translate(${_}px,${T}px)`),this._box.style.width=b-_+"px",this._box.style.height=E-T+"px"}mouseupWindow(n,s){if(!this._active||n.button!==0)return;const d=this._startPos,f=s;if(this.reset(),L.suppressClick(),d.x!==f.x||d.y!==f.y)return this._map.fire(new h.k("boxzoomend",{originalEvent:n})),{cameraAnimation:_=>_.fitScreenCoordinates(d,f,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(L.remove(this._box),this._box=null),L.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,s){return this._map.fire(new h.k(n,{originalEvent:s}))}}function Vs(y,n){if(y.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${n.length}`);const s={};for(let d=0;d<y.length;d++)s[y[d].identifier]=n[d];return s}class Vd{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,s,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),d.length===this.numTouches&&(this.centroid=function(f){const _=new h.P(0,0);for(const b of f)_._add(b);return _.div(f.length)}(s),this.touches=Vs(d,s)))}touchmove(n,s,d){if(this.aborted||!this.centroid)return;const f=Vs(d,s);for(const _ in this.touches){const b=f[_];(!b||b.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(n,s,d){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const f=!this.aborted&&this.centroid;if(this.reset(),f)return f}}}class Hl{constructor(n){this.singleTap=new Vd(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,s,d){this.singleTap.touchstart(n,s,d)}touchmove(n,s,d){this.singleTap.touchmove(n,s,d)}touchend(n,s,d){const f=this.singleTap.touchend(n,s,d);if(f){const _=n.timeStamp-this.lastTime<500,b=!this.lastTap||this.lastTap.dist(f)<30;if(_&&b||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=f,this.count===this.numTaps)return this.reset(),f}}}class Wl{constructor(n){this._tr=new Ua(n),this._zoomIn=new Hl({numTouches:1,numTaps:2}),this._zoomOut=new Hl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,s,d){this._zoomIn.touchstart(n,s,d),this._zoomOut.touchstart(n,s,d)}touchmove(n,s,d){this._zoomIn.touchmove(n,s,d),this._zoomOut.touchmove(n,s,d)}touchend(n,s,d){const f=this._zoomIn.touchend(n,s,d),_=this._zoomOut.touchend(n,s,d),b=this._tr;return f?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:b.zoom+1,around:b.unproject(f)},{originalEvent:n})}):_?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:b.zoom-1,around:b.unproject(_)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fa{constructor(n){this._enabled=!!n.enable,this._moveStateManager=n.moveStateManager,this._clickTolerance=n.clickTolerance||1,this._moveFunction=n.move,this._activateOnStart=!!n.activateOnStart,n.assignEvents(this),this.reset()}reset(n){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(n)}_move(...n){const s=this._moveFunction(...n);if(s.bearingDelta||s.pitchDelta||s.around||s.panDelta)return this._active=!0,s}dragStart(n,s){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(n)&&(this._moveStateManager.startMove(n),this._lastPoint=s.length?s[0]:s,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(n,s){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(n.preventDefault(),!this._moveStateManager.isValidMoveEvent(n))return void this.reset(n);const f=s.length?s[0]:s;return!this._moved&&f.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=f,this._move(d,f))}dragEnd(n){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(n)&&(this._moved&&L.suppressClick(),this.reset(n))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Vm={0:1,2:2};class ql{constructor(n){this._correctEvent=n.checkCorrectEvent}startMove(n){const s=L.mouseButton(n);this._eventButton=s}endMove(n){delete this._eventButton}isValidStartEvent(n){return this._correctEvent(n)}isValidMoveEvent(n){return!function(s,d){const f=Vm[d];return s.buttons===void 0||(s.buttons&f)!==f}(n,this._eventButton)}isValidEndEvent(n){return L.mouseButton(n)===this._eventButton}}class Fr{constructor(){this._firstTouch=void 0}_isOneFingerTouch(n){return n.targetTouches.length===1}_isSameTouchEvent(n){return n.targetTouches[0].identifier===this._firstTouch}startMove(n){this._firstTouch=n.targetTouches[0].identifier}endMove(n){delete this._firstTouch}isValidStartEvent(n){return this._isOneFingerTouch(n)}isValidMoveEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}isValidEndEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}}const Po=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=n=>{n.preventDefault()}},pi=({enable:y,clickTolerance:n,bearingDegreesPerPixelMoved:s=.8})=>{const d=new ql({checkCorrectEvent:f=>L.mouseButton(f)===0&&f.ctrlKey||L.mouseButton(f)===2});return new fa({clickTolerance:n,move:(f,_)=>({bearingDelta:(_.x-f.x)*s}),moveStateManager:d,enable:y,assignEvents:Po})},Zl=({enable:y,clickTolerance:n,pitchDegreesPerPixelMoved:s=-.5})=>{const d=new ql({checkCorrectEvent:f=>L.mouseButton(f)===0&&f.ctrlKey||L.mouseButton(f)===2});return new fa({clickTolerance:n,move:(f,_)=>({pitchDelta:(_.y-f.y)*s}),moveStateManager:d,enable:y,assignEvents:Po})};class zc{constructor(n,s){this._clickTolerance=n.clickTolerance||1,this._map=s,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new h.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(n,s,d){return this._calculateTransform(n,s,d)}touchmove(n,s,d){if(this._active&&!(d.length<this.minTouchs()))return n.preventDefault(),this._calculateTransform(n,s,d)}touchend(n,s,d){this._calculateTransform(n,s,d),this._active&&d.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,s,d){d.length>0&&(this._active=!0);const f=Vs(d,s),_=new h.P(0,0),b=new h.P(0,0);let T=0;for(const I in f){const R=f[I],z=this._touches[I];z&&(_._add(R),b._add(R.sub(z)),T++,f[I]=R)}if(this._touches=f,T<this.minTouchs()||!b.mag())return;const E=b.div(T);return this._sum._add(E),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(T),panDelta:E}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gl{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(n,s,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([s[0],s[1]]))}touchmove(n,s,d){if(!this._firstTwoTouches)return;n.preventDefault();const[f,_]=this._firstTwoTouches,b=Io(d,s,f),T=Io(d,s,_);if(!b||!T)return;const E=this._aroundCenter?null:b.add(T).div(2);return this._move([b,T],E,n)}touchend(n,s,d){if(!this._firstTwoTouches)return;const[f,_]=this._firstTwoTouches,b=Io(d,s,f),T=Io(d,s,_);b&&T||(this._active&&L.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Io(y,n,s){for(let d=0;d<y.length;d++)if(y[d].identifier===s)return n[d]}function Va(y,n){return Math.log(y/n)/Math.LN2}class Kl extends Gl{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,s){const d=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(Va(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Va(this._distance,d),pinchAround:s}}}function Lc(y,n){return 180*y.angleWith(n)/Math.PI}class Rc extends Gl{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,s,d){const f=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Lc(this._vector,f),pinchAround:s}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const s=25/(Math.PI*this._minDiameter)*360,d=Lc(n,this._startVector);return Math.abs(d)<s}}function Xl(y){return Math.abs(y.y)>Math.abs(y.x)}class Dc extends Gl{constructor(n){super(),this._currentTouchCount=0,this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,s,d){super.touchstart(n,s,d),this._currentTouchCount=d.length}_start(n){this._lastPoints=n,Xl(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,s,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const f=n[0].sub(this._lastPoints[0]),_=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(f,_,d.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(f.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(n,s,d){if(this._valid!==void 0)return this._valid;const f=n.mag()>=2,_=s.mag()>=2;if(!f&&!_)return;if(!f||!_)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const b=n.y>0==s.y>0;return Xl(n)&&Xl(s)&&b}}const $d={panStep:100,bearingStep:15,pitchStep:10};class $o{constructor(n){this._tr=new Ua(n);const s=$d;this._panStep=s.panStep,this._bearingStep=s.bearingStep,this._pitchStep=s.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let s=0,d=0,f=0,_=0,b=0;switch(n.keyCode){case 61:case 107:case 171:case 187:s=1;break;case 189:case 109:case 173:s=-1;break;case 37:n.shiftKey?d=-1:(n.preventDefault(),_=-1);break;case 39:n.shiftKey?d=1:(n.preventDefault(),_=1);break;case 38:n.shiftKey?f=1:(n.preventDefault(),b=-1);break;case 40:n.shiftKey?f=-1:(n.preventDefault(),b=1);break;default:return}return this._rotationDisabled&&(d=0,f=0),{cameraAnimation:T=>{const E=this._tr;T.easeTo({duration:300,easeId:"keyboardHandler",easing:Hd,zoom:s?Math.round(E.zoom)+s*(n.shiftKey?2:1):E.zoom,bearing:E.bearing+d*this._bearingStep,pitch:E.pitch+f*this._pitchStep,offset:[-_*this._panStep,-b*this._panStep],center:E.center},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Hd(y){return y*(2-y)}const Oc=4.000244140625;class Fc{constructor(n,s){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=n,this._tr=new Ua(n),this._triggerRenderFrame=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(n){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!n[this._map.cooperativeGestures._bypassKey])return;let s=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const d=M.now(),f=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,s!==0&&s%Oc==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":f>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(f*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),n.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=n,this._delta-=s,this._active||this._start(n)),n.preventDefault()}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const s=L.mousePos(this._map.getCanvas(),n),d=this._tr;this._around=s.y>d.transform.height/2-d.transform.getHorizon()?h.M.convert(this._aroundCenter?d.center:d.unproject(s)):h.M.convert(d.center),this._aroundPoint=d.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._tr.transform;if(this._delta!==0){const T=this._type==="wheel"&&Math.abs(this._delta)>Oc?this._wheelZoomRate:this._defaultZoomRate;let E=2/(1+Math.exp(-Math.abs(this._delta*T)));this._delta<0&&E!==0&&(E=1/E);const I=typeof this._targetZoom=="number"?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(I*E))),this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const s=typeof this._targetZoom=="number"?this._targetZoom:n.zoom,d=this._startZoom,f=this._easing;let _,b=!1;if(this._type==="wheel"&&d&&f){const T=Math.min((M.now()-this._lastWheelEventTime)/200,1),E=f(T);_=h.z.number(d,s,E),T<1?this._frameId||(this._frameId=!0):b=!0}else _=s,b=!0;return this._active=!0,b&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!b,zoomDelta:_-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let s=h.b8;if(this._prevEase){const d=this._prevEase,f=(M.now()-d.start)/d.duration,_=d.easing(f+.01)-d.easing(f),b=.27/Math.sqrt(_*_+1e-4)*.01,T=Math.sqrt(.0729-b*b);s=h.b7(b,T,.25,1)}return this._prevEase={start:M.now(),duration:n,easing:s},s}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Bc{constructor(n,s){this._clickZoom=n,this._tapZoom=s}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Wd{constructor(n){this._tr=new Ua(n),this.reset()}reset(){this._active=!1}dblclick(n,s){return n.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(n.shiftKey?-1:1),around:this._tr.unproject(s)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qd{constructor(){this._tap=new Hl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(n,s,d){if(!this._swipePoint)if(this._tapTime){const f=s[0],_=n.timeStamp-this._tapTime<500,b=this._tapPoint.dist(f)<30;_&&b?d.length>0&&(this._swipePoint=f,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(n,s,d)}touchmove(n,s,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const f=s[0],_=f.y-this._swipePoint.y;return this._swipePoint=f,n.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(n,s,d)}touchend(n,s,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const f=this._tap.touchend(n,s,d);f&&(this._tapTime=n.timeStamp,this._tapPoint=f)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Nc{constructor(n,s,d){this._el=n,this._mousePan=s,this._touchPan=d}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class $a{constructor(n,s,d){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=s,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class jc{constructor(n,s,d,f){this._el=n,this._touchZoom=s,this._touchRotate=d,this._tapDragZoom=f,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class ki{constructor(n,s){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=n,this._options=s,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const n=this._map.getCanvasContainer();n.classList.add("maplibregl-cooperative-gestures"),this._container=L.create("div","maplibregl-cooperative-gesture-screen",n);let s=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(s=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),f=document.createElement("div");f.className="maplibregl-desktop-message",f.textContent=s,this._container.appendChild(f);const _=document.createElement("div");_.className="maplibregl-mobile-message",_.textContent=d,this._container.appendChild(_),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(L.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(n){this._onCooperativeGesture(n.touches.length===1)}wheel(n){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!n[this._bypassKey])}_onCooperativeGesture(n){this._enabled&&n&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const fi=y=>y.zoom||y.drag||y.pitch||y.rotate;class Zd extends h.k{}function Ci(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class $s{constructor(n,s){this.handleWindowEvent=f=>{this.handleEvent(f,`${f.type}Window`)},this.handleEvent=(f,_)=>{if(f.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const b=f.type==="renderFrame"?void 0:f,T={needsRenderFrame:!1},E={},I={},R=f.touches,z=R?this._getMapTouches(R):void 0,U=z?L.touchPos(this._map.getCanvas(),z):L.mousePos(this._map.getCanvas(),f);for(const{handlerName:ie,handler:J,allowed:ae}of this._handlers){if(!J.isEnabled())continue;let fe;this._blockedByActive(I,ae,ie)?J.reset():J[_||f.type]&&(fe=J[_||f.type](f,U,z),this.mergeHandlerResult(T,E,fe,ie,b),fe&&fe.needsRenderFrame&&this._triggerRenderFrame()),(fe||J.isActive())&&(I[ie]=J)}const W={};for(const ie in this._previousActiveHandlers)I[ie]||(W[ie]=b);this._previousActiveHandlers=I,(Object.keys(W).length||Ci(T))&&(this._changes.push([T,E,W]),this._triggerRenderFrame()),(Object.keys(I).length||Ci(T))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:X}=T;X&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],X(this._map))},this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ac(n),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[f,_,b]of this._listeners)L.addEventListener(f,_,f===document?this.handleWindowEvent:this.handleEvent,b)}destroy(){for(const[n,s,d]of this._listeners)L.removeEventListener(n,s,n===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(n){const s=this._map,d=s.getCanvasContainer();this._add("mapEvent",new Mc(s,n));const f=s.boxZoom=new Us(s,n);this._add("boxZoom",f),n.interactive&&n.boxZoom&&f.enable();const _=s.cooperativeGestures=new ki(s,n.cooperativeGestures);this._add("cooperativeGestures",_),n.cooperativeGestures&&_.enable();const b=new Wl(s),T=new Wd(s);s.doubleClickZoom=new Bc(T,b),this._add("tapZoom",b),this._add("clickZoom",T),n.interactive&&n.doubleClickZoom&&s.doubleClickZoom.enable();const E=new qd;this._add("tapDragZoom",E);const I=s.touchPitch=new Dc(s);this._add("touchPitch",I),n.interactive&&n.touchPitch&&s.touchPitch.enable(n.touchPitch);const R=pi(n),z=Zl(n);s.dragRotate=new $a(n,R,z),this._add("mouseRotate",R,["mousePitch"]),this._add("mousePitch",z,["mouseRotate"]),n.interactive&&n.dragRotate&&s.dragRotate.enable();const U=(({enable:fe,clickTolerance:re})=>{const ge=new ql({checkCorrectEvent:we=>L.mouseButton(we)===0&&!we.ctrlKey});return new fa({clickTolerance:re,move:(we,Te)=>({around:Te,panDelta:Te.sub(we)}),activateOnStart:!0,moveStateManager:ge,enable:fe,assignEvents:Po})})(n),W=new zc(n,s);s.dragPan=new Nc(d,U,W),this._add("mousePan",U),this._add("touchPan",W,["touchZoom","touchRotate"]),n.interactive&&n.dragPan&&s.dragPan.enable(n.dragPan);const X=new Rc,ie=new Kl;s.touchZoomRotate=new jc(d,ie,X,E),this._add("touchRotate",X,["touchPan","touchZoom"]),this._add("touchZoom",ie,["touchPan","touchRotate"]),n.interactive&&n.touchZoomRotate&&s.touchZoomRotate.enable(n.touchZoomRotate);const J=s.scrollZoom=new Fc(s,()=>this._triggerRenderFrame());this._add("scrollZoom",J,["mousePan"]),n.interactive&&n.scrollZoom&&s.scrollZoom.enable(n.scrollZoom);const ae=s.keyboard=new $o(s);this._add("keyboard",ae),n.interactive&&n.keyboard&&s.keyboard.enable(),this._add("blockableMapEvent",new Um(s))}_add(n,s,d){this._handlers.push({handlerName:n,handler:s,allowed:d}),this._handlersById[n]=s}stop(n){if(!this._updatingCamera){for(const{handler:s}of this._handlers)s.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!fi(this._eventsInProgress)||this.isZooming()}_blockedByActive(n,s,d){for(const f in n)if(f!==d&&(!s||s.indexOf(f)<0))return!0;return!1}_getMapTouches(n){const s=[];for(const d of n)this._el.contains(d.target)&&s.push(d);return s}mergeHandlerResult(n,s,d,f,_){if(!d)return;h.e(n,d);const b={handlerName:f,originalEvent:d.originalEvent||_};d.zoomDelta!==void 0&&(s.zoom=b),d.panDelta!==void 0&&(s.drag=b),d.pitchDelta!==void 0&&(s.pitch=b),d.bearingDelta!==void 0&&(s.rotate=b)}_applyChanges(){const n={},s={},d={};for(const[f,_,b]of this._changes)f.panDelta&&(n.panDelta=(n.panDelta||new h.P(0,0))._add(f.panDelta)),f.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+f.zoomDelta),f.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+f.bearingDelta),f.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+f.pitchDelta),f.around!==void 0&&(n.around=f.around),f.pinchAround!==void 0&&(n.pinchAround=f.pinchAround),f.noInertia&&(n.noInertia=f.noInertia),h.e(s,_),h.e(d,b);this._updateMapTransform(n,s,d),this._changes=[]}_updateMapTransform(n,s,d){const f=this._map,_=f._getTransformForUpdate(),b=f.terrain;if(!(Ci(n)||b&&this._terrainMovement))return this._fireEvents(s,d,!0);let{panDelta:T,zoomDelta:E,bearingDelta:I,pitchDelta:R,around:z,pinchAround:U}=n;U!==void 0&&(z=U),f._stop(!0),z=z||f.transform.centerPoint;const W=_.pointLocation(T?z.sub(T):z);I&&(_.bearing+=I),R&&(_.pitch+=R),E&&(_.zoom+=E),b?this._terrainMovement||!s.drag&&!s.zoom?s.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(T)):_.setLocationAtPoint(W,z):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(W,z)):_.setLocationAtPoint(W,z),f._applyUpdatedTransform(_),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(s,d,!0)}_fireEvents(n,s,d){const f=fi(this._eventsInProgress),_=fi(n),b={};for(const z in n){const{originalEvent:U}=n[z];this._eventsInProgress[z]||(b[`${z}start`]=U),this._eventsInProgress[z]=n[z]}!f&&_&&this._fireEvent("movestart",_.originalEvent);for(const z in b)this._fireEvent(z,b[z]);_&&this._fireEvent("move",_.originalEvent);for(const z in n){const{originalEvent:U}=n[z];this._fireEvent(z,U)}const T={};let E;for(const z in this._eventsInProgress){const{handlerName:U,originalEvent:W}=this._eventsInProgress[z];this._handlersById[U].isActive()||(delete this._eventsInProgress[z],E=s[U]||W,T[`${z}end`]=E)}for(const z in T)this._fireEvent(z,T[z]);const I=fi(this._eventsInProgress),R=(f||_)&&!I;if(R&&this._terrainMovement&&(this._map._elevationFreeze=!1,this._terrainMovement=!1,this._map.transform.recalculateZoom(this._map.terrain)),d&&R){this._updatingCamera=!0;const z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),U=W=>W!==0&&-this._bearingSnap<W&&W<this._bearingSnap;!z||!z.essential&&M.prefersReducedMotion?(this._map.fire(new h.k("moveend",{originalEvent:E})),U(this._map.getBearing())&&this._map.resetNorth()):(U(z.bearing||this._map.getBearing())&&(z.bearing=0),z.freezeElevation=!0,this._map.easeTo(z,{originalEvent:E})),this._updatingCamera=!1}}_fireEvent(n,s){this._map.fire(new h.k(n,s?{originalEvent:s}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{delete this._frameId,this.handleEvent(new Zd("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class $m extends h.E{constructor(n,s){super(),this._renderFrameCallback=()=>{const d=Math.min((M.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=s.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new h.M(this.transform.center.lng,this.transform.center.lat)}setCenter(n,s){return this.jumpTo({center:n},s)}panBy(n,s,d){return n=h.P.convert(n).mult(-1),this.panTo(this.transform.center,h.e({offset:n},s),d)}panTo(n,s,d){return this.easeTo(h.e({center:n},s),d)}getZoom(){return this.transform.zoom}setZoom(n,s){return this.jumpTo({zoom:n},s),this}zoomTo(n,s,d){return this.easeTo(h.e({zoom:n},s),d)}zoomIn(n,s){return this.zoomTo(this.getZoom()+1,n,s),this}zoomOut(n,s){return this.zoomTo(this.getZoom()-1,n,s),this}getBearing(){return this.transform.bearing}setBearing(n,s){return this.jumpTo({bearing:n},s),this}getPadding(){return this.transform.padding}setPadding(n,s){return this.jumpTo({padding:n},s),this}rotateTo(n,s,d){return this.easeTo(h.e({bearing:n},s),d)}resetNorth(n,s){return this.rotateTo(0,h.e({duration:1e3},n),s),this}resetNorthPitch(n,s){return this.easeTo(h.e({bearing:0,pitch:0,duration:1e3},n),s),this}snapToNorth(n,s){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,s):this}getPitch(){return this.transform.pitch}setPitch(n,s){return this.jumpTo({pitch:n},s),this}cameraForBounds(n,s){n=yr.convert(n);const d=s&&s.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),d,s)}_cameraForBoxAndBearing(n,s,d,f){const _={top:0,bottom:0,right:0,left:0};if(typeof(f=h.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},f)).padding=="number"){const Ve=f.padding;f.padding={top:Ve,bottom:Ve,right:Ve,left:Ve}}f.padding=h.e(_,f.padding);const b=this.transform,T=b.padding,E=new yr(n,s),I=b.project(E.getNorthWest()),R=b.project(E.getNorthEast()),z=b.project(E.getSouthEast()),U=b.project(E.getSouthWest()),W=h.b9(-d),X=I.rotate(W),ie=R.rotate(W),J=z.rotate(W),ae=U.rotate(W),fe=new h.P(Math.max(X.x,ie.x,ae.x,J.x),Math.max(X.y,ie.y,ae.y,J.y)),re=new h.P(Math.min(X.x,ie.x,ae.x,J.x),Math.min(X.y,ie.y,ae.y,J.y)),ge=fe.sub(re),we=(b.width-(T.left+T.right+f.padding.left+f.padding.right))/ge.x,Te=(b.height-(T.top+T.bottom+f.padding.top+f.padding.bottom))/ge.y;if(Te<0||we<0)return void h.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const De=Math.min(b.scaleZoom(b.scale*Math.min(we,Te)),f.maxZoom),Ue=h.P.convert(f.offset),it=new h.P((f.padding.left-f.padding.right)/2,(f.padding.top-f.padding.bottom)/2).rotate(h.b9(d)),at=Ue.add(it).mult(b.scale/b.zoomScale(De));return{center:b.unproject(I.add(z).div(2).sub(at)),zoom:De,bearing:d}}fitBounds(n,s,d){return this._fitInternal(this.cameraForBounds(n,s),s,d)}fitScreenCoordinates(n,s,d,f,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(h.P.convert(n)),this.transform.pointLocation(h.P.convert(s)),d,f),f,_)}_fitInternal(n,s,d){return n?(delete(s=h.e(n,s)).padding,s.linear?this.easeTo(s,d):this.flyTo(s,d)):this}jumpTo(n,s){this.stop();const d=this._getTransformForUpdate();let f=!1,_=!1,b=!1;return"zoom"in n&&d.zoom!==+n.zoom&&(f=!0,d.zoom=+n.zoom),n.center!==void 0&&(d.center=h.M.convert(n.center)),"bearing"in n&&d.bearing!==+n.bearing&&(_=!0,d.bearing=+n.bearing),"pitch"in n&&d.pitch!==+n.pitch&&(b=!0,d.pitch=+n.pitch),n.padding==null||d.isPaddingEqual(n.padding)||(d.padding=n.padding),this._applyUpdatedTransform(d),this.fire(new h.k("movestart",s)).fire(new h.k("move",s)),f&&this.fire(new h.k("zoomstart",s)).fire(new h.k("zoom",s)).fire(new h.k("zoomend",s)),_&&this.fire(new h.k("rotatestart",s)).fire(new h.k("rotate",s)).fire(new h.k("rotateend",s)),b&&this.fire(new h.k("pitchstart",s)).fire(new h.k("pitch",s)).fire(new h.k("pitchend",s)),this.fire(new h.k("moveend",s))}calculateCameraOptionsFromTo(n,s,d,f=0){const _=h.Y.fromLngLat(n,s),b=h.Y.fromLngLat(d,f),T=b.x-_.x,E=b.y-_.y,I=b.z-_.z,R=Math.hypot(T,E,I);if(R===0)throw new Error("Can't calculate camera options with same From and To");const z=Math.hypot(T,E),U=this.transform.scaleZoom(this.transform.cameraToCenterDistance/R/this.transform.tileSize),W=180*Math.atan2(T,-E)/Math.PI;let X=180*Math.acos(z/R)/Math.PI;return X=I<0?90-X:90+X,{center:b.toLngLat(),zoom:U,pitch:X,bearing:W}}easeTo(n,s){var d;this._stop(!1,n.easeId),((n=h.e({offset:[0,0],duration:500,easing:h.b8},n)).animate===!1||!n.essential&&M.prefersReducedMotion)&&(n.duration=0);const f=this._getTransformForUpdate(),_=this.getZoom(),b=this.getBearing(),T=this.getPitch(),E=this.getPadding(),I="bearing"in n?this._normalizeBearing(n.bearing,b):b,R="pitch"in n?+n.pitch:T,z="padding"in n?n.padding:f.padding,U=h.P.convert(n.offset);let W=f.centerPoint.add(U);const X=f.pointLocation(W),{center:ie,zoom:J}=f.getConstrained(h.M.convert(n.center||X),(d=n.zoom)!==null&&d!==void 0?d:_);this._normalizeCenter(ie);const ae=f.project(X),fe=f.project(ie).sub(ae),re=f.zoomScale(J-_);let ge,we;n.around&&(ge=h.M.convert(n.around),we=f.locationPoint(ge));const Te={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||J!==_,this._rotating=this._rotating||b!==I,this._pitching=this._pitching||R!==T,this._padding=!f.isPaddingEqual(z),this._easeId=n.easeId,this._prepareEase(s,n.noMoveStart,Te),this.terrain&&this._prepareElevation(ie),this._ease(De=>{if(this._zooming&&(f.zoom=h.z.number(_,J,De)),this._rotating&&(f.bearing=h.z.number(b,I,De)),this._pitching&&(f.pitch=h.z.number(T,R,De)),this._padding&&(f.interpolatePadding(E,z,De),W=f.centerPoint.add(U)),this.terrain&&!n.freezeElevation&&this._updateElevation(De),ge)f.setLocationAtPoint(ge,we);else{const Ue=f.zoomScale(f.zoom-_),it=J>_?Math.min(2,re):Math.max(.5,re),at=Math.pow(it,1-De),Ve=f.unproject(ae.add(fe.mult(De*at)).mult(Ue));f.setLocationAtPoint(f.renderWorldCopies?Ve.wrap():Ve,W)}this._applyUpdatedTransform(f),this._fireMoveEvents(s)},De=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(s,De)},n),this}_prepareEase(n,s,d={}){this._moving=!0,s||d.moving||this.fire(new h.k("movestart",n)),this._zooming&&!d.zooming&&this.fire(new h.k("zoomstart",n)),this._rotating&&!d.rotating&&this.fire(new h.k("rotatestart",n)),this._pitching&&!d.pitching&&this.fire(new h.k("pitchstart",n))}_prepareElevation(n){this._elevationCenter=n,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(n){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const s=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(n<1&&s!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=n*(d-(s-(d*n+this._elevationStart))/(1-n)),this._elevationTarget=s}this.transform.elevation=h.z.number(this._elevationStart,this._elevationTarget,n)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(n){if(!this.transformCameraUpdate)return;const s=n.clone(),{center:d,zoom:f,pitch:_,bearing:b,elevation:T}=this.transformCameraUpdate(s);d&&(s.center=d),f!==void 0&&(s.zoom=f),_!==void 0&&(s.pitch=_),b!==void 0&&(s.bearing=b),T!==void 0&&(s.elevation=T),this.transform.apply(s)}_fireMoveEvents(n){this.fire(new h.k("move",n)),this._zooming&&this.fire(new h.k("zoom",n)),this._rotating&&this.fire(new h.k("rotate",n)),this._pitching&&this.fire(new h.k("pitch",n))}_afterEase(n,s){if(this._easeId&&s&&this._easeId===s)return;delete this._easeId;const d=this._zooming,f=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new h.k("zoomend",n)),f&&this.fire(new h.k("rotateend",n)),_&&this.fire(new h.k("pitchend",n)),this.fire(new h.k("moveend",n))}flyTo(n,s){var d;if(!n.essential&&M.prefersReducedMotion){const tt=h.L(n,["center","zoom","bearing","pitch","around"]);return this.jumpTo(tt,s)}this.stop(),n=h.e({offset:[0,0],speed:1.2,curve:1.42,easing:h.b8},n);const f=this._getTransformForUpdate(),_=this.getZoom(),b=this.getBearing(),T=this.getPitch(),E=this.getPadding(),I="bearing"in n?this._normalizeBearing(n.bearing,b):b,R="pitch"in n?+n.pitch:T,z="padding"in n?n.padding:f.padding,U=h.P.convert(n.offset);let W=f.centerPoint.add(U);const X=f.pointLocation(W),{center:ie,zoom:J}=f.getConstrained(h.M.convert(n.center||X),(d=n.zoom)!==null&&d!==void 0?d:_);this._normalizeCenter(ie);const ae=f.zoomScale(J-_),fe=f.project(X),re=f.project(ie).sub(fe);let ge=n.curve;const we=Math.max(f.width,f.height),Te=we/ae,De=re.mag();if("minZoom"in n){const tt=h.ac(Math.min(n.minZoom,_,J),f.minZoom,f.maxZoom),Pt=we/f.zoomScale(tt-_);ge=Math.sqrt(Pt/De*2)}const Ue=ge*ge;function it(tt){const Pt=(Te*Te-we*we+(tt?-1:1)*Ue*Ue*De*De)/(2*(tt?Te:we)*Ue*De);return Math.log(Math.sqrt(Pt*Pt+1)-Pt)}function at(tt){return(Math.exp(tt)-Math.exp(-tt))/2}function Ve(tt){return(Math.exp(tt)+Math.exp(-tt))/2}const Ze=it(!1);let ft=function(tt){return Ve(Ze)/Ve(Ze+ge*tt)},Lt=function(tt){return we*((Ve(Ze)*(at(Pt=Ze+ge*tt)/Ve(Pt))-at(Ze))/Ue)/De;var Pt},Xe=(it(!0)-Ze)/ge;if(Math.abs(De)<1e-6||!isFinite(Xe)){if(Math.abs(we-Te)<1e-6)return this.easeTo(n,s);const tt=Te<we?-1:1;Xe=Math.abs(Math.log(Te/we))/ge,Lt=()=>0,ft=Pt=>Math.exp(tt*ge*Pt)}return n.duration="duration"in n?+n.duration:1e3*Xe/("screenSpeed"in n?+n.screenSpeed/ge:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=b!==I,this._pitching=R!==T,this._padding=!f.isPaddingEqual(z),this._prepareEase(s,!1),this.terrain&&this._prepareElevation(ie),this._ease(tt=>{const Pt=tt*Xe,Sr=1/ft(Pt);f.zoom=tt===1?J:_+f.scaleZoom(Sr),this._rotating&&(f.bearing=h.z.number(b,I,tt)),this._pitching&&(f.pitch=h.z.number(T,R,tt)),this._padding&&(f.interpolatePadding(E,z,tt),W=f.centerPoint.add(U)),this.terrain&&!n.freezeElevation&&this._updateElevation(tt);const Vt=tt===1?ie:f.unproject(fe.add(re.mult(Lt(Pt))).mult(Sr));f.setLocationAtPoint(f.renderWorldCopies?Vt.wrap():Vt,W),this._applyUpdatedTransform(f),this._fireMoveEvents(s)},()=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(s)},n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,s){var d;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,s)}return n||(d=this.handlers)===null||d===void 0||d.stop(!1),this}_ease(n,s,d){d.animate===!1||d.duration===0?(n(1),s()):(this._easeStart=M.now(),this._easeOptions=d,this._onEaseFrame=n,this._onEaseEnd=s,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(n,s){n=h.b2(n,-180,180);const d=Math.abs(n-s);return Math.abs(n-360-s)<d&&(n-=360),Math.abs(n+360-s)<d&&(n+=360),n}_normalizeCenter(n){const s=this.transform;if(!s.renderWorldCopies||s.lngRange)return;const d=n.lng-s.center.lng;n.lng+=d>180?-360:d<-180?360:0}queryTerrainElevation(n){return this.terrain?this.terrain.getElevationForLngLatZoom(h.M.convert(n),this.transform.tileZoom)-this.transform.elevation:null}}const Gd={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Kd{constructor(n=Gd){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=s=>{!s||s.sourceDataType!=="metadata"&&s.sourceDataType!=="visibility"&&s.dataType!=="style"&&s.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=n}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options.compact,this._container=L.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=L.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=L.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){L.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,s){const d=this._map._getUIString(`AttributionControl.${s}`);n.title=d,n.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(f=>typeof f!="string"?"":f)):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const f=this._map.style.stylesheet;this.styleOwner=f.owner,this.styleId=f.id}const s=this._map.style.sourceCaches;for(const f in s){const _=s[f];if(_.used||_.usedForTerrain){const b=_.getSource();b.attribution&&n.indexOf(b.attribution)<0&&n.push(b.attribution)}}n=n.filter(f=>String(f).trim()),n.sort((f,_)=>f.length-_.length),n=n.filter((f,_)=>{for(let b=_+1;b<n.length;b++)if(n[b].indexOf(f)>=0)return!1;return!0});const d=n.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,n.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Uc{constructor(n={}){this._updateCompact=()=>{const s=this._container.children;if(s.length){const d=s[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=n}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=L.create("div","maplibregl-ctrl");const s=L.create("a","maplibregl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://maplibre.org/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){L.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Hs{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const s=++this._id;return this._queue.push({callback:n,id:s,cancelled:!1}),s}remove(n){const s=this._currentlyRunning,d=s?this._queue.concat(s):this._queue;for(const f of d)if(f.id===n)return void(f.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const s=this._currentlyRunning=this._queue;this._queue=[];for(const d of s)if(!d.cancelled&&(d.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Ho=h.X([{name:"a_pos3d",type:"Int16",components:3}]);class lt extends h.E{constructor(n){super(),this.sourceCache=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,n.usedForTerrain=!0,n.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(n,s){this.sourceCache.update(n,s),this._renderableTilesKeys=[];const d={};for(const f of n.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:s}))d[f.key]=!0,this._renderableTilesKeys.push(f.key),this._tiles[f.key]||(f.posMatrix=new Float64Array(16),h.aO(f.posMatrix,0,h.W,0,h.W,0,1),this._tiles[f.key]=new Zr(f,this.tileSize));for(const f in this._tiles)d[f]||delete this._tiles[f]}freeRtt(n){for(const s in this._tiles){const d=this._tiles[s];(!n||d.tileID.equals(n)||d.tileID.isChildOf(n)||n.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(n=>this.getTileByID(n))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n){const s={};for(const d of this._renderableTilesKeys){const f=this._tiles[d].tileID;if(f.canonical.equals(n.canonical)){const _=n.clone();_.posMatrix=new Float64Array(16),h.aO(_.posMatrix,0,h.W,0,h.W,0,1),s[d]=_}else if(f.canonical.isChildOf(n.canonical)){const _=n.clone();_.posMatrix=new Float64Array(16);const b=f.canonical.z-n.canonical.z,T=f.canonical.x-(f.canonical.x>>b<<b),E=f.canonical.y-(f.canonical.y>>b<<b),I=h.W>>b;h.aO(_.posMatrix,0,I,0,I,0,1),h.H(_.posMatrix,_.posMatrix,[-T*I,-E*I,0]),s[d]=_}else if(n.canonical.isChildOf(f.canonical)){const _=n.clone();_.posMatrix=new Float64Array(16);const b=n.canonical.z-f.canonical.z,T=n.canonical.x-(n.canonical.x>>b<<b),E=n.canonical.y-(n.canonical.y>>b<<b),I=h.W>>b;h.aO(_.posMatrix,0,h.W,0,h.W,0,1),h.H(_.posMatrix,_.posMatrix,[T*I,E*I,0]),h.J(_.posMatrix,_.posMatrix,[1/2**b,1/2**b,0]),s[d]=_}}return s}getSourceTile(n,s){const d=this.sourceCache._source;let f=n.overscaledZ-this.deltaZoom;if(f>d.maxzoom&&(f=d.maxzoom),f<d.minzoom)return null;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(f).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[n.key]);if((!_||!_.dem)&&s)for(;f>=d.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(n.scaledTo(f--).key);return _}tilesAfterTime(n=Date.now()){return Object.values(this._tiles).filter(s=>s.timeAdded>=n)}}class Xd{constructor(n,s,d){this.painter=n,this.sourceCache=new lt(s),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(n,s,d,f=h.W){var _;if(!(s>=0&&s<f&&d>=0&&d<f))return 0;const b=this.getTerrainData(n),T=(_=b.tile)===null||_===void 0?void 0:_.dem;if(!T)return 0;const E=function(X,ie,J){var ae=ie[0],fe=ie[1];return X[0]=J[0]*ae+J[4]*fe+J[12],X[1]=J[1]*ae+J[5]*fe+J[13],X}([],[s/f*h.W,d/f*h.W],b.u_terrain_matrix),I=[E[0]*T.dim,E[1]*T.dim],R=Math.floor(I[0]),z=Math.floor(I[1]),U=I[0]-R,W=I[1]-z;return T.get(R,z)*(1-U)*(1-W)+T.get(R+1,z)*U*(1-W)+T.get(R,z+1)*(1-U)*W+T.get(R+1,z+1)*U*W}getElevationForLngLatZoom(n,s){const{tileID:d,mercatorX:f,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(n,s);return this.getElevation(d,f%h.W,_%h.W,h.W)}getElevation(n,s,d,f=h.W){return this.getDEMElevation(n,s,d,f)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const f=this.painter.context,_=new h.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Be(f,_,f.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Be(f,new h.R({width:1,height:1}),f.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(f.gl.NEAREST,f.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=h.an([])}const s=this.sourceCache.getSourceTile(n,!0);if(s&&s.dem&&(!s.demTexture||s.needsTerrainPrepare)){const f=this.painter.context;s.demTexture=this.painter.getTileTexture(s.dem.stride),s.demTexture?s.demTexture.update(s.dem.getPixels(),{premultiply:!1}):s.demTexture=new Be(f,s.dem.getPixels(),f.gl.RGBA,{premultiply:!1}),s.demTexture.bind(f.gl.NEAREST,f.gl.CLAMP_TO_EDGE),s.needsTerrainPrepare=!1}const d=s&&s+s.tileID.key+n.key;if(d&&!this._demMatrixCache[d]){const f=this.sourceCache.sourceCache._source.maxzoom;let _=n.canonical.z-s.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=f?_=n.canonical.z-f:h.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const b=n.canonical.x-(n.canonical.x>>_<<_),T=n.canonical.y-(n.canonical.y>>_<<_),E=h.ba(new Float64Array(16),[1/(h.W<<_),1/(h.W<<_),0]);h.H(E,E,[b*h.W,T*h.W,0]),this._demMatrixCache[n.key]={matrix:E,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:s&&s.dem&&s.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:s&&s.dem&&s.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(s&&s.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:s}}getFramebuffer(n){const s=this.painter,d=s.width/devicePixelRatio,f=s.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===f||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Be(s.context,{width:d,height:f,data:null},s.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(s.context.gl.NEAREST,s.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Be(s.context,{width:d,height:f,data:null},s.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(s.context.gl.NEAREST,s.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=s.context.createFramebuffer(d,f,!0,!1),this._fbo.depthAttachment.set(s.context.createRenderbuffer(s.context.gl.DEPTH_COMPONENT16,d,f))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const s=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,b=0;_<this._coordsTextureSize;_++)for(let T=0;T<this._coordsTextureSize;T++,b+=4)s[b+0]=255&T,s[b+1]=255&_,s[b+2]=T>>8<<4|_>>8,s[b+3]=0;const d=new h.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(s.buffer)),f=new Be(n,d,n.gl.RGBA,{premultiply:!1});return f.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=f,f}pointCoordinate(n){this.painter.maybeDrawDepthAndCoords(!0);const s=new Uint8Array(4),d=this.painter.context,f=d.gl,_=Math.round(n.x*this.painter.pixelRatio/devicePixelRatio),b=Math.round(n.y*this.painter.pixelRatio/devicePixelRatio),T=Math.round(this.painter.height/devicePixelRatio);d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),f.readPixels(_,T-b-1,1,1,f.RGBA,f.UNSIGNED_BYTE,s),d.bindFramebuffer.set(null);const E=s[0]+(s[2]>>4<<8),I=s[1]+((15&s[2])<<8),R=this.coordsIndex[255-s[3]],z=R&&this.sourceCache.getTileByID(R);if(!z)return null;const U=this._coordsTextureSize,W=(1<<z.tileID.canonical.z)*U;return new h.Y((z.tileID.canonical.x*U+E)/W+z.tileID.wrap,(z.tileID.canonical.y*U+I)/W,this.getElevation(z.tileID,E,I,U))}depthAtPoint(n){const s=new Uint8Array(4),d=this.painter.context,f=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),f.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,f.RGBA,f.UNSIGNED_BYTE,s),d.bindFramebuffer.set(null),(s[0]/16777216+s[1]/65536+s[2]/256+s[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const n=this.painter.context,s=new h.bb,d=new h.aY,f=this.meshSize,_=h.W/f,b=f*f;for(let z=0;z<=f;z++)for(let U=0;U<=f;U++)s.emplaceBack(U*_,z*_,0);for(let z=0;z<b;z+=f+1)for(let U=0;U<f;U++)d.emplaceBack(U+z,f+U+z+1,f+U+z+2),d.emplaceBack(U+z,f+U+z+2,U+z+1);const T=s.length,E=T+2*(f+1);for(const z of[0,1])for(let U=0;U<=f;U++)for(const W of[0,1])s.emplaceBack(U*_,z*h.W,W);for(let z=0;z<2*f;z+=2)d.emplaceBack(E+z,E+z+1,E+z+3),d.emplaceBack(E+z,E+z+3,E+z+2),d.emplaceBack(T+z,T+z+3,T+z+1),d.emplaceBack(T+z,T+z+2,T+z+3);const I=s.length,R=I+2*(f+1);for(const z of[0,1])for(let U=0;U<=f;U++)for(const W of[0,1])s.emplaceBack(z*h.W,U*_,W);for(let z=0;z<2*f;z+=2)d.emplaceBack(I+z,I+z+1,I+z+3),d.emplaceBack(I+z,I+z+3,I+z+2),d.emplaceBack(R+z,R+z+3,R+z+1),d.emplaceBack(R+z,R+z+2,R+z+3);return this._mesh={indexBuffer:n.createIndexBuffer(d),vertexBuffer:n.createVertexBuffer(s,Ho.members),segments:h.$.simpleSegment(0,0,s.length,d.length)},this._mesh}getMeshFrameDelta(n){return 2*Math.PI*h.bc/Math.pow(2,n)/5}getMinTileElevationForLngLatZoom(n,s){var d;const{tileID:f}=this._getOverscaledTileIDFromLngLatZoom(n,s);return(d=this.getMinMaxElevation(f).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(n){const s=this.getTerrainData(n).tile,d={minElevation:null,maxElevation:null};return s&&s.dem&&(d.minElevation=s.dem.min*this.exaggeration,d.maxElevation=s.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(n,s){const d=h.Y.fromLngLat(n.wrap()),f=(1<<s)*h.W,_=d.x*f,b=d.y*f,T=Math.floor(_/h.W),E=Math.floor(b/h.W);return{tileID:new h.Q(s,0,s,T,E),mercatorX:_,mercatorY:b}}}class Ws{constructor(n,s,d){this._context=n,this._size=s,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const n of this._objects)n.texture.destroy(),n.fbo.destroy()}_createObject(n){const s=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new Be(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),s.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),s.colorAttachment.set(d.texture),{id:n,fbo:s,texture:d,stamp:-1,inUse:!1}}getObjectForId(n){return this._objects[n]}useObject(n){n.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(s=>n.id!==s),this._recentlyUsed.push(n.id)}stampObject(n){n.stamp=++this._stamp}getOrCreateFreeObject(){for(const s of this._recentlyUsed)if(!this._objects[s].inUse)return this._objects[s];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const n=this._createObject(this._objects.length);return this._objects.push(n),n}freeObject(n){n.inUse=!1}freeAllObjects(){for(const n of this._objects)this.freeObject(n)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(n=>!n.inUse)===!1}}const fo={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Yd{constructor(n,s){this.painter=n,this.terrain=s,this.pool=new Ws(n.context,30,s.sourceCache.tileSize*s.qualityFactor)}destruct(){this.pool.destruct()}getTexture(n){return this.pool.getObjectForId(n.rtt[this._stacks.length-1].id).texture}prepareForRender(n,s){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=n._order.filter(d=>!n._layers[d].isHidden(s)),this._coordsDescendingInv={};for(const d in n.sourceCaches){this._coordsDescendingInv[d]={};const f=n.sourceCaches[d].getVisibleCoordinates();for(const _ of f){const b=this.terrain.sourceCache.getTerrainCoords(_);for(const T in b)this._coordsDescendingInv[d][T]||(this._coordsDescendingInv[d][T]=[]),this._coordsDescendingInv[d][T].push(b[T])}}this._coordsDescendingInvStr={};for(const d of n._order){const f=n._layers[d],_=f.source;if(fo[f.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const b in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][b]=this._coordsDescendingInv[_][b].map(T=>T.key).sort().join()}}for(const d of this._renderableTiles)for(const f in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[f][d.tileID.key];_&&_!==d.rttCoords[f]&&(d.rtt=[])}}renderLayer(n){if(n.isHidden(this.painter.transform.zoom))return!1;const s=n.type,d=this.painter,f=this._renderableLayerIds[this._renderableLayerIds.length-1]===n.id;if(fo[s]&&(this._prevType&&fo[this._prevType]||this._stacks.push([]),this._prevType=s,this._stacks[this._stacks.length-1].push(n.id),!f))return!0;if(fo[this._prevType]||fo[s]&&f){this._prevType=s;const _=this._stacks.length-1,b=this._stacks[_]||[];for(const T of this._renderableTiles){if(this.pool.isFull()&&(Nl(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(T),T.rtt[_]){const I=this.pool.getObjectForId(T.rtt[_].id);if(I.stamp===T.rtt[_].stamp){this.pool.useObject(I);continue}}const E=this.pool.getOrCreateFreeObject();this.pool.useObject(E),this.pool.stampObject(E),T.rtt[_]={id:E.id,stamp:E.stamp},d.context.bindFramebuffer.set(E.fbo.framebuffer),d.context.clear({color:h.aP.transparent,stencil:0}),d.currentStencilSource=void 0;for(let I=0;I<b.length;I++){const R=d.style._layers[b[I]],z=R.source?this._coordsDescendingInv[R.source][T.tileID.key]:[T.tileID];d.context.viewport.set([0,0,E.fbo.width,E.fbo.height]),d._renderTileClippingMasks(R,z),d.renderLayer(d,d.style.sourceCaches[R.source],R,z),R.source&&(T.rttCoords[R.source]=this._coordsDescendingInvStr[R.source][T.tileID.key])}}return Nl(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),fo[s]}return!1}}const nt={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Vc=C,Hm={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Gd,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:h.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Jd=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},$c={showCompass:!0,showZoom:!0,visualizePitch:!1};class Qd{constructor(n,s,d=!1){this.mousedown=b=>{this.startMouse(h.e({},b,{ctrlKey:!0,preventDefault:()=>b.preventDefault()}),L.mousePos(this.element,b)),L.addEventListener(window,"mousemove",this.mousemove),L.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=b=>{this.moveMouse(b,L.mousePos(this.element,b))},this.mouseup=b=>{this.mouseRotate.dragEnd(b),this.mousePitch&&this.mousePitch.dragEnd(b),this.offTemp()},this.touchstart=b=>{b.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=L.touchPos(this.element,b.targetTouches)[0],this.startTouch(b,this._startPos),L.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),L.addEventListener(window,"touchend",this.touchend))},this.touchmove=b=>{b.targetTouches.length!==1?this.reset():(this._lastPos=L.touchPos(this.element,b.targetTouches)[0],this.moveTouch(b,this._lastPos))},this.touchend=b=>{b.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const f=n.dragRotate._mouseRotate.getClickTolerance(),_=n.dragRotate._mousePitch.getClickTolerance();this.element=s,this.mouseRotate=pi({clickTolerance:f,enable:!0}),this.touchRotate=(({enable:b,clickTolerance:T,bearingDegreesPerPixelMoved:E=.8})=>{const I=new Fr;return new fa({clickTolerance:T,move:(R,z)=>({bearingDelta:(z.x-R.x)*E}),moveStateManager:I,enable:b,assignEvents:Jd})})({clickTolerance:f,enable:!0}),this.map=n,d&&(this.mousePitch=Zl({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:b,clickTolerance:T,pitchDegreesPerPixelMoved:E=-.5})=>{const I=new Fr;return new fa({clickTolerance:T,move:(R,z)=>({pitchDelta:(z.y-R.y)*E}),moveStateManager:I,enable:b,assignEvents:Jd})})({clickTolerance:_,enable:!0})),L.addEventListener(s,"mousedown",this.mousedown),L.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),L.addEventListener(s,"touchcancel",this.reset)}startMouse(n,s){this.mouseRotate.dragStart(n,s),this.mousePitch&&this.mousePitch.dragStart(n,s),L.disableDrag()}startTouch(n,s){this.touchRotate.dragStart(n,s),this.touchPitch&&this.touchPitch.dragStart(n,s),L.disableDrag()}moveMouse(n,s){const d=this.map,{bearingDelta:f}=this.mouseRotate.dragMove(n,s)||{};if(f&&d.setBearing(d.getBearing()+f),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(n,s)||{};_&&d.setPitch(d.getPitch()+_)}}moveTouch(n,s){const d=this.map,{bearingDelta:f}=this.touchRotate.dragMove(n,s)||{};if(f&&d.setBearing(d.getBearing()+f),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(n,s)||{};_&&d.setPitch(d.getPitch()+_)}}off(){const n=this.element;L.removeEventListener(n,"mousedown",this.mousedown),L.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),L.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),L.removeEventListener(window,"touchend",this.touchend),L.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){L.enableDrag(),L.removeEventListener(window,"mousemove",this.mousemove),L.removeEventListener(window,"mouseup",this.mouseup),L.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),L.removeEventListener(window,"touchend",this.touchend)}}let Wo;function ep(y,n,s){const d=new h.M(y.lng,y.lat);if(y=new h.M(y.lng,y.lat),n){const f=new h.M(y.lng-360,y.lat),_=new h.M(y.lng+360,y.lat),b=s.locationPoint(y).distSqr(n);s.locationPoint(f).distSqr(n)<b?y=f:s.locationPoint(_).distSqr(n)<b&&(y=_)}for(;Math.abs(y.lng-s.center.lng)>180;){const f=s.locationPoint(y);if(f.x>=0&&f.y>=0&&f.x<=s.width&&f.y<=s.height)break;y.lng>s.center.lng?y.lng-=360:y.lng+=360}return y.lng!==d.lng&&s.locationPoint(y).y>s.height/2-s.getHorizon()?y:d}const Hc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function qo(y,n,s){const d=y.classList;for(const f in Hc)d.remove(`maplibregl-${s}-anchor-${f}`);d.add(`maplibregl-${s}-anchor-${n}`)}class vr extends h.E{constructor(n){if(super(),this._onKeyPress=s=>{const d=s.code,f=s.charCode||s.keyCode;d!=="Space"&&d!=="Enter"&&f!==32&&f!==13||this.togglePopup()},this._onMapClick=s=>{const d=s.originalEvent.target,f=this._element;this._popup&&(d===f||f.contains(d))&&this.togglePopup()},this._update=s=>{var d;if(!this._map)return;const f=this._map.loaded()&&!this._map.isMoving();((s==null?void 0:s.type)==="terrain"||(s==null?void 0:s.type)==="render"&&!f)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?ep(this._lngLat,this._flatPos,this._map.transform):(d=this._lngLat)===null||d===void 0?void 0:d.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b=`rotateX(${this._map.getPitch()}deg)`),s&&s.type!=="moveend"||(this._pos=this._pos.round()),L.setTransform(this._element,`${Hc[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${b} ${_}`),M.frameAsync(new AbortController).then(()=>{this._updateOpacity(s&&s.type==="moveend")}).catch(()=>{})},this._onMove=s=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=s.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=s.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new h.k("dragstart"))),this.fire(new h.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new h.k("dragend")),this._state="inactive"},this._addDragHandler=s=>{this._element.contains(s.originalEvent.target)&&(s.preventDefault(),this._positionDelta=s.point.sub(this._pos).add(this._offset),this._pointerdownPos=s.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(n==null?void 0:n.opacity,n==null?void 0:n.opacityWhenCovered),n&&n.element)this._element=n.element,this._offset=h.P.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=L.create("div");const s=L.createNS("http://www.w3.org/2000/svg","svg"),d=41,f=27;s.setAttributeNS(null,"display","block"),s.setAttributeNS(null,"height",`${d}px`),s.setAttributeNS(null,"width",`${f}px`),s.setAttributeNS(null,"viewBox",`0 0 ${f} ${d}`);const _=L.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const b=L.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"fill-rule","nonzero");const T=L.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"transform","translate(3.0, 29.0)"),T.setAttributeNS(null,"fill","#000000");const E=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ae of E){const fe=L.createNS("http://www.w3.org/2000/svg","ellipse");fe.setAttributeNS(null,"opacity","0.04"),fe.setAttributeNS(null,"cx","10.5"),fe.setAttributeNS(null,"cy","5.80029008"),fe.setAttributeNS(null,"rx",ae.rx),fe.setAttributeNS(null,"ry",ae.ry),T.appendChild(fe)}const I=L.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"fill",this._color);const R=L.createNS("http://www.w3.org/2000/svg","path");R.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),I.appendChild(R);const z=L.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"opacity","0.25"),z.setAttributeNS(null,"fill","#000000");const U=L.createNS("http://www.w3.org/2000/svg","path");U.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),z.appendChild(U);const W=L.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"transform","translate(6.0, 7.0)"),W.setAttributeNS(null,"fill","#FFFFFF");const X=L.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ie=L.createNS("http://www.w3.org/2000/svg","circle");ie.setAttributeNS(null,"fill","#000000"),ie.setAttributeNS(null,"opacity","0.25"),ie.setAttributeNS(null,"cx","5.5"),ie.setAttributeNS(null,"cy","5.5"),ie.setAttributeNS(null,"r","5.4999962");const J=L.createNS("http://www.w3.org/2000/svg","circle");J.setAttributeNS(null,"fill","#FFFFFF"),J.setAttributeNS(null,"cx","5.5"),J.setAttributeNS(null,"cy","5.5"),J.setAttributeNS(null,"r","5.4999962"),X.appendChild(ie),X.appendChild(J),b.appendChild(T),b.appendChild(I),b.appendChild(z),b.appendChild(W),b.appendChild(X),s.appendChild(b),s.setAttributeNS(null,"height",d*this._scale+"px"),s.setAttributeNS(null,"width",f*this._scale+"px"),this._element.appendChild(s),this._offset=h.P.convert(n&&n.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",s=>{s.preventDefault()}),this._element.addEventListener("mousedown",s=>{s.preventDefault()}),qo(this._element,this._anchor,"marker"),n&&n.className)for(const s of n.className.split(" "))this._element.classList.add(s);this._popup=null}addTo(n){return this.remove(),this._map=n,this._element.setAttribute("aria-label",n._getUIString("Marker.Title")),n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),n.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),L.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=h.M.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const f=Math.abs(13.5)/Math.SQRT2;n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[f,-1*(38.1-13.5+f)],"bottom-right":[-f,-1*(38.1-13.5+f)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const n=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:n?(n.isOpen()?n.remove():(n.setLngLat(this._lngLat),n.addTo(this._map)),this):this}_updateOpacity(n=!1){var s,d;if(!(!((s=this._map)===null||s===void 0)&&s.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(n)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const f=this._map,_=f.terrain.depthAtPoint(this._pos),b=f.terrain.getElevationForLngLatZoom(this._lngLat,f.transform.tileZoom);if(f.transform.lngLatToCameraDepth(this._lngLat,b)-_<.006)return void(this._element.style.opacity=this._opacity);const T=-this._offset.y/f.transform._pixelPerMeter,E=Math.sin(f.getPitch()*Math.PI/180)*T,I=f.terrain.depthAtPoint(new h.P(this._pos.x,this._pos.y-this._offset.y)),R=f.transform.lngLatToCameraDepth(this._lngLat,b+E)-I>.006;!((d=this._popup)===null||d===void 0)&&d.isOpen()&&R&&this._popup.remove(),this._element.style.opacity=R?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(n){return this._offset=h.P.convert(n),this._update(),this}addClassName(n){this._element.classList.add(n)}removeClassName(n){this._element.classList.remove(n)}toggleClassName(n){return this._element.classList.toggle(n)}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(n,s){return n===void 0&&s===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),n!==void 0&&(this._opacity=n),s!==void 0&&(this._opacityWhenCovered=s),this._map&&this._updateOpacity(!0),this}}const Yl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ha=0,Wa=!1;const tp={maxWidth:100,unit:"metric"};function Wc(y,n,s){const d=s&&s.maxWidth||100,f=y._container.clientHeight/2,_=y.unproject([0,f]),b=y.unproject([d,f]),T=_.distanceTo(b);if(s&&s.unit==="imperial"){const E=3.2808*T;E>5280?qs(n,d,E/5280,y._getUIString("ScaleControl.Miles")):qs(n,d,E,y._getUIString("ScaleControl.Feet"))}else s&&s.unit==="nautical"?qs(n,d,T/1852,y._getUIString("ScaleControl.NauticalMiles")):T>=1e3?qs(n,d,T/1e3,y._getUIString("ScaleControl.Kilometers")):qs(n,d,T,y._getUIString("ScaleControl.Meters"))}function qs(y,n,s,d){const f=function(_){const b=Math.pow(10,`${Math.floor(_)}`.length-1);let T=_/b;return T=T>=10?10:T>=5?5:T>=3?3:T>=2?2:T>=1?1:function(E){const I=Math.pow(10,Math.ceil(-Math.log(E)/Math.LN10));return Math.round(E*I)/I}(T),b*T}(s);y.style.width=n*(f/s)+"px",y.innerHTML=`${f}&nbsp;${d}`}const mo={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Jl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function vt(y){if(y){if(typeof y=="number"){const n=Math.round(Math.abs(y)/Math.SQRT2);return{center:new h.P(0,0),top:new h.P(0,y),"top-left":new h.P(n,n),"top-right":new h.P(-n,n),bottom:new h.P(0,-y),"bottom-left":new h.P(n,-n),"bottom-right":new h.P(-n,-n),left:new h.P(y,0),right:new h.P(-y,0)}}if(y instanceof h.P||Array.isArray(y)){const n=h.P.convert(y);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:h.P.convert(y.center||[0,0]),top:h.P.convert(y.top||[0,0]),"top-left":h.P.convert(y["top-left"]||[0,0]),"top-right":h.P.convert(y["top-right"]||[0,0]),bottom:h.P.convert(y.bottom||[0,0]),"bottom-left":h.P.convert(y["bottom-left"]||[0,0]),"bottom-right":h.P.convert(y["bottom-right"]||[0,0]),left:h.P.convert(y.left||[0,0]),right:h.P.convert(y.right||[0,0])}}return vt(new h.P(0,0))}const Tt=C;g.AJAXError=h.bf,g.Evented=h.E,g.LngLat=h.M,g.MercatorCoordinate=h.Y,g.Point=h.P,g.addProtocol=h.bg,g.config=h.a,g.removeProtocol=h.bh,g.AttributionControl=Kd,g.BoxZoomHandler=Us,g.CanvasSource=qr,g.CooperativeGesturesHandler=ki,g.DoubleClickZoomHandler=Bc,g.DragPanHandler=Nc,g.DragRotateHandler=$a,g.EdgeInsets=Ns,g.FullscreenControl=class extends h.E{constructor(y={}){super(),this._onFullscreenChange=()=>{var n;let s=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((n=s==null?void 0:s.shadowRoot)===null||n===void 0)&&n.fullscreenElement;)s=s.shadowRoot.fullscreenElement;s===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:h.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=L.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){L.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=L.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);L.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new h.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new h.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},g.GeoJSONSource=Dt,g.GeolocateControl=class extends h.E{constructor(y){super(),this._onSuccess=n=>{if(this._map){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new h.k("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(n),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new h.k("geolocate",n)),this._finish()}},this._updateCamera=n=>{const s=new h.M(n.coords.longitude,n.coords.latitude),d=n.coords.accuracy,f=this._map.getBearing(),_=h.e({bearing:f},this.options.fitBoundsOptions),b=yr.fromLngLat(s,d);this._map.fitBounds(b,_,{geolocateSource:!0})},this._updateMarker=n=>{if(n){const s=new h.M(n.coords.longitude,n.coords.latitude);this._accuracyCircleMarker.setLngLat(s).addTo(this._map),this._userLocationDotMarker.setLngLat(s).addTo(this._map),this._accuracy=n.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=n=>{if(this._map){if(this.options.trackUserLocation)if(n.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(n.code===3&&Wa)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new h.k("error",n)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=n=>{if(this._map){if(this._container.addEventListener("contextmenu",s=>s.preventDefault()),this._geolocateButton=L.create("button","maplibregl-ctrl-geolocate",this._container),L.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",n===!1){h.w("Geolocation support is not available so the GeolocateControl will be disabled.");const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s)}else{const s=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=L.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new vr({element:this._dotElement}),this._circleElement=L.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new vr({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",s=>{s.geolocateSource||this._watchState!=="ACTIVE_LOCK"||s.originalEvent&&s.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new h.k("trackuserlocationend")),this.fire(new h.k("userlocationlostfocus")))})}},this.options=h.e({},Yl,y)}onAdd(y){return this._map=y,this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return h._(this,arguments,void 0,function*(n=!1){if(Wo!==void 0&&!n)return Wo;if(window.navigator.permissions===void 0)return Wo=!!window.navigator.geolocation,Wo;try{Wo=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Wo=!!window.navigator.geolocation}return Wo})}().then(n=>this._setupUI(n)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),L.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ha=0,Wa=!1}_isOutOfMapMaxBounds(y){const n=this._map.getMaxBounds(),s=y.coords;return n&&(s.longitude<n.getWest()||s.longitude>n.getEast()||s.latitude<n.getSouth()||s.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),n=y.getSouthEast(),s=y.getNorthEast(),d=n.distanceTo(s),f=Math.ceil(this._accuracy/(d/this._map._container.clientHeight)*2);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}trigger(){if(!this._setup)return h.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new h.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ha--,Wa=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new h.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new h.k("trackuserlocationstart")),this.fire(new h.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ha++,Ha>1?(y={maximumAge:6e5,timeout:0},Wa=!0):(y=this.options.positionOptions,Wa=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},g.Hash=Cc,g.ImageSource=Xn,g.KeyboardHandler=$o,g.LngLatBounds=yr,g.LogoControl=Uc,g.Map=class extends $m{constructor(y){h.bd.mark(h.be.create);const n=Object.assign(Object.assign({},Hm),y);if(n.minZoom!=null&&n.maxZoom!=null&&n.minZoom>n.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(n.minPitch!=null&&n.maxPitch!=null&&n.minPitch>n.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(n.minPitch!=null&&n.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(n.maxPitch!=null&&n.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new kc(n.minZoom,n.maxZoom,n.minPitch,n.maxPitch,n.renderWorldCopies),{bearingSnap:n.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Hs,this._controls=[],this._mapId=h.a3(),this._contextLost=s=>{s.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new h.k("webglcontextlost",{originalEvent:s}))},this._contextRestored=s=>{this._setupPainter(),this.resize(),this._update(),this.fire(new h.k("webglcontextrestored",{originalEvent:s}))},this._onMapScroll=s=>{if(s.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=n.interactive,this._maxTileCacheSize=n.maxTileCacheSize,this._maxTileCacheZoomLevels=n.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=n.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=n.preserveDrawingBuffer===!0,this._antialias=n.antialias===!0,this._trackResize=n.trackResize===!0,this._bearingSnap=n.bearingSnap,this._refreshExpiredTiles=n.refreshExpiredTiles===!0,this._fadeDuration=n.fadeDuration,this._crossSourceCollisions=n.crossSourceCollisions===!0,this._collectResourceTiming=n.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},nt),n.locale),this._clickTolerance=n.clickTolerance,this._overridePixelRatio=n.pixelRatio,this._maxCanvasSize=n.maxCanvasSize,this.transformCameraUpdate=n.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=n.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ne.addThrottleControl(()=>this.isMoving()),this._requestManager=new be(n.transformRequest),typeof n.container=="string"){if(this._container=document.getElementById(n.container),!this._container)throw new Error(`Container '${n.container}' not found.`)}else{if(!(n.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=n.container}if(n.maxBounds&&this.setMaxBounds(n.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let s=!1;const d=jd(f=>{this._trackResize&&!this._removed&&this.resize(f)._update()},50);this._resizeObserver=new ResizeObserver(f=>{s?d(f):s=!0}),this._resizeObserver.observe(this._container)}this.handlers=new $s(this,n),this._hash=n.hash&&new Cc(typeof n.hash=="string"&&n.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}),n.bounds&&(this.resize(),this.fitBounds(n.bounds,h.e({},n.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=n.localIdeographFontFamily,this._validateStyle=n.validateStyle,n.style&&this.setStyle(n.style,{localIdeographFontFamily:n.localIdeographFontFamily}),n.attributionControl&&this.addControl(new Kd(typeof n.attributionControl=="boolean"?void 0:n.attributionControl)),n.maplibreLogo&&this.addControl(new Uc,n.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",s=>{this._update(s.dataType==="style"),this.fire(new h.k(`${s.dataType}data`,s))}),this.on("dataloading",s=>{this.fire(new h.k(`${s.dataType}dataloading`,s))}),this.on("dataabort",s=>{this.fire(new h.k("sourcedataabort",s))})}_getMapId(){return this._mapId}addControl(y,n){if(n===void 0&&(n=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new h.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const s=y.onAdd(this);this._controls.push(y);const d=this._controlPositions[n];return n.indexOf("bottom")!==-1?d.insertBefore(s,d.firstChild):d.appendChild(s),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new h.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(y);return n>-1&&this._controls.splice(n,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,n,s,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,n,s,d)}resize(y){var n;const s=this._containerDimensions(),d=s[0],f=s[1],_=this._getClampedPixelRatio(d,f);if(this._resizeCanvas(d,f,_),this.painter.resize(d,f,_),this.painter.overLimit()){const T=this.painter.context.gl;this._maxCanvasSize=[T.drawingBufferWidth,T.drawingBufferHeight];const E=this._getClampedPixelRatio(d,f);this._resizeCanvas(d,f,E),this.painter.resize(d,f,E)}this.transform.resize(d,f),(n=this._requestedCameraState)===null||n===void 0||n.resize(d,f);const b=!this._moving;return b&&(this.stop(),this.fire(new h.k("movestart",y)).fire(new h.k("move",y))),this.fire(new h.k("resize",y)),b&&this.fire(new h.k("moveend",y)),this}_getClampedPixelRatio(y,n){const{0:s,1:d}=this._maxCanvasSize,f=this.getPixelRatio(),_=y*f,b=n*f;return Math.min(_>s?s/_:1,b>d?d/b:1)*f}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(yr.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}project(y){return this.transform.locationPoint(h.M.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(h.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,n,s){if(y==="mouseenter"||y==="mouseover"){let d=!1;return{layer:n,listener:s,delegates:{mousemove:_=>{const b=this.getLayer(n)?this.queryRenderedFeatures(_.point,{layers:[n]}):[];b.length?d||(d=!0,s.call(this,new Cn(y,this,_.originalEvent,{features:b}))):d=!1},mouseout:()=>{d=!1}}}}if(y==="mouseleave"||y==="mouseout"){let d=!1;return{layer:n,listener:s,delegates:{mousemove:b=>{(this.getLayer(n)?this.queryRenderedFeatures(b.point,{layers:[n]}):[]).length?d=!0:d&&(d=!1,s.call(this,new Cn(y,this,b.originalEvent)))},mouseout:b=>{d&&(d=!1,s.call(this,new Cn(y,this,b.originalEvent)))}}}}{const d=f=>{const _=this.getLayer(n)?this.queryRenderedFeatures(f.point,{layers:[n]}):[];_.length&&(f.features=_,s.call(this,f),delete f.features)};return{layer:n,listener:s,delegates:{[y]:d}}}}on(y,n,s){if(s===void 0)return super.on(y,n);const d=this._createDelegatedListener(y,n,s);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(d);for(const f in d.delegates)this.on(f,d.delegates[f]);return this}once(y,n,s){if(s===void 0)return super.once(y,n);const d=this._createDelegatedListener(y,n,s);for(const f in d.delegates)this.once(f,d.delegates[f]);return this}off(y,n,s){return s===void 0?super.off(y,n):(this._delegatedListeners&&this._delegatedListeners[y]&&(d=>{const f=this._delegatedListeners[y];for(let _=0;_<f.length;_++){const b=f[_];if(b.layer===n&&b.listener===s){for(const T in b.delegates)this.off(T,b.delegates[T]);return f.splice(_,1),this}}})(),this)}queryRenderedFeatures(y,n){if(!this.style)return[];let s;const d=y instanceof h.P||Array.isArray(y),f=d?y:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(d?{}:y)||{},f instanceof h.P||typeof f[0]=="number")s=[h.P.convert(f)];else{const _=h.P.convert(f[0]),b=h.P.convert(f[1]);s=[_,new h.P(b.x,_.y),b,new h.P(_.x,b.y),_]}return this.style.queryRenderedFeatures(s,n,this.transform)}querySourceFeatures(y,n){return this.style.querySourceFeatures(y,n)}setStyle(y,n){return(n=h.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(y,n))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const n=this._locale[y];if(n==null)throw new Error(`Missing UI string '${y}'`);return n}_updateStyle(y,n){if(n.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,n));const s=this.style&&n.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new wl(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,n,s):this.style.loadJSON(y,n,s),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new wl(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,n){if(typeof y=="string"){const s=this._requestManager.transformRequest(y,"Style");h.h(s,new AbortController).then(d=>{this._updateDiff(d.data,n)}).catch(d=>{d&&this.fire(new h.j(d))})}else typeof y=="object"&&this._updateDiff(y,n)}_updateDiff(y,n){try{this.style.setState(y,n)&&this._update(!0)}catch(s){h.w(`Unable to perform style diff: ${s.message||s.error||s}.  Rebuilding the style from scratch.`),this._updateStyle(y,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():h.w("There is no style added to the map.")}addSource(y,n){return this._lazyInitEmptyStyle(),this.style.addSource(y,n),this._update(!0)}isSourceLoaded(y){const n=this.style&&this.style.sourceCaches[y];if(n!==void 0)return n.loaded();this.fire(new h.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const n=this.style.sourceCaches[y.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);this.terrain===null&&n.reload();for(const s in this.style._layers){const d=this.style._layers[s];d.type==="hillshade"&&d.source===y.source&&h.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Xd(this.painter,n,y),this.painter.renderToTexture=new Yd(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=s=>{s.dataType==="style"?this.terrain.sourceCache.freeRtt():s.dataType==="source"&&s.tile&&(s.sourceId!==y.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(s.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new h.k("terrain",{terrain:y})),this}getTerrain(){var y,n;return(n=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&n!==void 0?n:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const n in y){const s=y[n]._tiles;for(const d in s){const f=s[d];if(f.state!=="loaded"&&f.state!=="errored")return!1}}return!0}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,n,s={}){const{pixelRatio:d=1,sdf:f=!1,stretchX:_,stretchY:b,content:T,textFitWidth:E,textFitHeight:I}=s;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||h.b(n))){if(n.width===void 0||n.height===void 0)return this.fire(new h.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:R,height:z,data:U}=n,W=n;return this.style.addImage(y,{data:new h.R({width:R,height:z},new Uint8Array(U)),pixelRatio:d,stretchX:_,stretchY:b,content:T,textFitWidth:E,textFitHeight:I,sdf:f,version:0,userImage:W}),W.onAdd&&W.onAdd(this,y),this}}{const{width:R,height:z,data:U}=M.getImageData(n);this.style.addImage(y,{data:new h.R({width:R,height:z},U),pixelRatio:d,stretchX:_,stretchY:b,content:T,textFitWidth:E,textFitHeight:I,sdf:f,version:0})}}updateImage(y,n){const s=this.style.getImage(y);if(!s)return this.fire(new h.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=n instanceof HTMLImageElement||h.b(n)?M.getImageData(n):n,{width:f,height:_,data:b}=d;if(f===void 0||_===void 0)return this.fire(new h.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(f!==s.data.width||_!==s.data.height)return this.fire(new h.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const T=!(n instanceof HTMLImageElement||h.b(n));return s.data.replace(b,T),this.style.updateImage(y,s),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new h.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y){return ne.getImage(this._requestManager.transformRequest(y,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(y,n){return this._lazyInitEmptyStyle(),this.style.addLayer(y,n),this._update(!0)}moveLayer(y,n){return this.style.moveLayer(y,n),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,n,s){return this.style.setLayerZoomRange(y,n,s),this._update(!0)}setFilter(y,n,s={}){return this.style.setFilter(y,n,s),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,n,s,d={}){return this.style.setPaintProperty(y,n,s,d),this._update(!0)}getPaintProperty(y,n){return this.style.getPaintProperty(y,n)}setLayoutProperty(y,n,s,d={}){return this.style.setLayoutProperty(y,n,s,d),this._update(!0)}getLayoutProperty(y,n){return this.style.getLayoutProperty(y,n)}setGlyphs(y,n={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,n),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,n,s={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,n,s,d=>{d||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,n={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,n,s=>{s||this._update(!0)}),this}setLight(y,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,n),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,n){return this.style.setFeatureState(y,n),this._update()}removeFeatureState(y,n){return this.style.removeFeatureState(y,n),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,n=0;return this._container&&(y=this._container.clientWidth||400,n=this._container.clientHeight||300),[y,n]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const n=this._canvasContainer=L.create("div","maplibregl-canvas-container",y);this._interactive&&n.classList.add("maplibregl-interactive"),this._canvas=L.create("canvas","maplibregl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const s=this._containerDimensions(),d=this._getClampedPixelRatio(s[0],s[1]);this._resizeCanvas(s[0],s[1],d);const f=this._controlContainer=L.create("div","maplibregl-control-container",y),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(b=>{_[b]=L.create("div",`maplibregl-ctrl-${b} `,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,n,s){this._canvas.width=Math.floor(s*y),this._canvas.height=Math.floor(s*n),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let n=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{n={requestedAttributes:y},d&&(n.statusMessage=d.statusMessage,n.type=d.type)},{once:!0});const s=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!s){const d="Failed to initialize WebGL";throw n?(n.message=d,new Error(JSON.stringify(n))):new Error(d)}this.painter=new tr(s,this.transform),ce.testSupport(s)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const n=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let s=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const f=this.transform.zoom,_=M.now();this.style.zoomHistory.update(f,_);const b=new h.a8(f,{now:_,fadeDuration:n,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),T=b.crossFadingFactor();T===1&&T===this._crossFadingFactor||(s=!0,this._crossFadingFactor=T),this.style.update(b)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,n,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:n,showPadding:this.showPadding}),this.fire(new h.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,h.bd.mark(h.be.load),this.fire(new h.k("load"))),this.style&&(this.style.hasTransitions()||s)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new h.k("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,h.bd.mark(h.be.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const s of this._controls)s.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ne.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");n!=null&&n.loseContext&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),L.remove(this._canvasContainer),L.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),h.bd.clearMetrics(),this._removed=!0,this.fire(new h.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,M.frameAsync(this._frameRequest).then(y=>{h.bd.frame(y),this._frameRequest=null,this._render(y)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return Vc}getCameraTargetElevation(){return this.transform.elevation}},g.MapMouseEvent=Cn,g.MapTouchEvent=pa,g.MapWheelEvent=Ud,g.Marker=vr,g.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const n=this._map.getZoom(),s=n===this._map.getMaxZoom(),d=n===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{const n=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=n},this._setButtonTitle=(n,s)=>{const d=this._map._getUIString(`NavigationControl.${s}`);n.title=d,n.setAttribute("aria-label",d)},this.options=h.e({},$c,y),this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",n=>this._map.zoomIn({},{originalEvent:n})),L.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",n=>this._map.zoomOut({},{originalEvent:n})),L.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}),this._compassIcon=L.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Qd(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){L.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,n){const s=L.create("button",y,this._container);return s.type="button",s.addEventListener("click",n),s}},g.Popup=class extends h.E{constructor(y){super(),this.remove=()=>(this._content&&L.remove(this._content),this._container&&(L.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new h.k("close"))),this),this._onMouseUp=n=>{this._update(n.point)},this._onMouseMove=n=>{this._update(n.point)},this._onDrag=n=>{this._update(n.point)},this._update=n=>{var s;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=L.create("div","maplibregl-popup",this._map.getContainer()),this._tip=L.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?ep(this._lngLat,this._flatPos,this._map.transform):(s=this._lngLat)===null||s===void 0?void 0:s.wrap(),this._trackPointer&&!n)return;const d=this._flatPos=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&n?n:this._map.transform.locationPoint(this._lngLat));let f=this.options.anchor;const _=vt(this.options.offset);if(!f){const T=this._container.offsetWidth,E=this._container.offsetHeight;let I;I=d.y+_.bottom.y<E?["top"]:d.y>this._map.transform.height-E?["bottom"]:[],d.x<T/2?I.push("left"):d.x>this._map.transform.width-T/2&&I.push("right"),f=I.length===0?"bottom":I.join("-")}let b=d.add(_[f]);this.options.subpixelPositioning||(b=b.round()),L.setTransform(this._container,`${Hc[f]} translate(${b.x}px,${b.y}px)`),qo(this._container,f,"popup")},this._onClose=()=>{this.remove()},this.options=h.e(Object.create(mo),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new h.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=h.M.convert(y),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const n=document.createDocumentFragment(),s=document.createElement("body");let d;for(s.innerHTML=y;d=s.firstChild,d;)n.appendChild(d);return this.setDOMContent(n)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=L.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){return this._container&&this._container.classList.add(y),this}removeClassName(y){return this._container&&this._container.classList.remove(y),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}setSubpixelPositioning(y){this.options.subpixelPositioning=y}_createCloseButton(){this.options.closeButton&&(this._closeButton=L.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(Jl);y&&y.focus()}},g.RasterDEMTileSource=xn,g.RasterTileSource=ui,g.ScaleControl=class{constructor(y){this._onMove=()=>{Wc(this._map,this._container,this.options)},this.setUnit=n=>{this.options.unit=n,Wc(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},tp),y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){L.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},g.ScrollZoomHandler=Fc,g.Style=wl,g.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=y}onAdd(y){return this._map=y,this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=L.create("button","maplibregl-ctrl-terrain",this._container),L.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){L.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},g.TwoFingersTouchPitchHandler=Dc,g.TwoFingersTouchRotateHandler=Rc,g.TwoFingersTouchZoomHandler=Kl,g.TwoFingersTouchZoomRotateHandler=jc,g.VectorTileSource=ke,g.VideoSource=ji,g.addSourceType=(y,n)=>h._(void 0,void 0,void 0,function*(){if(tn(y))throw new Error(`A source type called "${y}" already exists.`);((s,d)=>{dn[s]=d})(y,n)}),g.clearPrewarmedResources=function(){const y=hr;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(jt),hr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},g.getMaxParallelImageRequests=function(){return h.a.MAX_PARALLEL_IMAGE_REQUESTS},g.getRTLTextPluginStatus=function(){return br().getRTLTextPluginStatus()},g.getVersion=function(){return Tt},g.getWorkerCount=function(){return er.workerCount},g.getWorkerUrl=function(){return h.a.WORKER_URL},g.importScriptInWorkers=function(y){return ao().broadcast("IS",y)},g.prewarm=function(){en().acquire(jt)},g.setMaxParallelImageRequests=function(y){h.a.MAX_PARALLEL_IMAGE_REQUESTS=y},g.setRTLTextPlugin=function(y,n){return br().setRTLTextPlugin(y,n)},g.setWorkerCount=function(y){er.workerCount=y},g.setWorkerUrl=function(y){h.a.WORKER_URL=y}});var x=a;return x})})(IS);var x0=IS.exports;const mr=rc(x0);var j_={exports:{}},Fu=typeof Reflect=="object"?Reflect:null,hw=Fu&&typeof Fu.apply=="function"?Fu.apply:function(t,a,u){return Function.prototype.apply.call(t,a,u)},lf;Fu&&typeof Fu.ownKeys=="function"?lf=Fu.ownKeys:Object.getOwnPropertySymbols?lf=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:lf=function(t){return Object.getOwnPropertyNames(t)};function kA(e){console&&console.warn&&console.warn(e)}var MS=Number.isNaN||function(t){return t!==t};function Cr(){Cr.init.call(this)}j_.exports=Cr;j_.exports.once=AA;Cr.EventEmitter=Cr;Cr.prototype._events=void 0;Cr.prototype._eventsCount=0;Cr.prototype._maxListeners=void 0;var dw=10;function _m(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Cr,"defaultMaxListeners",{enumerable:!0,get:function(){return dw},set:function(e){if(typeof e!="number"||e<0||MS(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");dw=e}});Cr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Cr.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||MS(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function zS(e){return e._maxListeners===void 0?Cr.defaultMaxListeners:e._maxListeners}Cr.prototype.getMaxListeners=function(){return zS(this)};Cr.prototype.emit=function(t){for(var a=[],u=1;u<arguments.length;u++)a.push(arguments[u]);var c=t==="error",x=this._events;if(x!==void 0)c=c&&x.error===void 0;else if(!c)return!1;if(c){var g;if(a.length>0&&(g=a[0]),g instanceof Error)throw g;var h=new Error("Unhandled error."+(g?" ("+g.message+")":""));throw h.context=g,h}var C=x[t];if(C===void 0)return!1;if(typeof C=="function")hw(C,this,a);else for(var D=C.length,$=FS(C,D),u=0;u<D;++u)hw($[u],this,a);return!0};function LS(e,t,a,u){var c,x,g;if(_m(a),x=e._events,x===void 0?(x=e._events=Object.create(null),e._eventsCount=0):(x.newListener!==void 0&&(e.emit("newListener",t,a.listener?a.listener:a),x=e._events),g=x[t]),g===void 0)g=x[t]=a,++e._eventsCount;else if(typeof g=="function"?g=x[t]=u?[a,g]:[g,a]:u?g.unshift(a):g.push(a),c=zS(e),c>0&&g.length>c&&!g.warned){g.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+g.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=e,h.type=t,h.count=g.length,kA(h)}return e}Cr.prototype.addListener=function(t,a){return LS(this,t,a,!1)};Cr.prototype.on=Cr.prototype.addListener;Cr.prototype.prependListener=function(t,a){return LS(this,t,a,!0)};function CA(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function RS(e,t,a){var u={fired:!1,wrapFn:void 0,target:e,type:t,listener:a},c=CA.bind(u);return c.listener=a,u.wrapFn=c,c}Cr.prototype.once=function(t,a){return _m(a),this.on(t,RS(this,t,a)),this};Cr.prototype.prependOnceListener=function(t,a){return _m(a),this.prependListener(t,RS(this,t,a)),this};Cr.prototype.removeListener=function(t,a){var u,c,x,g,h;if(_m(a),c=this._events,c===void 0)return this;if(u=c[t],u===void 0)return this;if(u===a||u.listener===a)--this._eventsCount===0?this._events=Object.create(null):(delete c[t],c.removeListener&&this.emit("removeListener",t,u.listener||a));else if(typeof u!="function"){for(x=-1,g=u.length-1;g>=0;g--)if(u[g]===a||u[g].listener===a){h=u[g].listener,x=g;break}if(x<0)return this;x===0?u.shift():PA(u,x),u.length===1&&(c[t]=u[0]),c.removeListener!==void 0&&this.emit("removeListener",t,h||a)}return this};Cr.prototype.off=Cr.prototype.removeListener;Cr.prototype.removeAllListeners=function(t){var a,u,c;if(u=this._events,u===void 0)return this;if(u.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):u[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete u[t]),this;if(arguments.length===0){var x=Object.keys(u),g;for(c=0;c<x.length;++c)g=x[c],g!=="removeListener"&&this.removeAllListeners(g);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(a=u[t],typeof a=="function")this.removeListener(t,a);else if(a!==void 0)for(c=a.length-1;c>=0;c--)this.removeListener(t,a[c]);return this};function DS(e,t,a){var u=e._events;if(u===void 0)return[];var c=u[t];return c===void 0?[]:typeof c=="function"?a?[c.listener||c]:[c]:a?IA(c):FS(c,c.length)}Cr.prototype.listeners=function(t){return DS(this,t,!0)};Cr.prototype.rawListeners=function(t){return DS(this,t,!1)};Cr.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):OS.call(e,t)};Cr.prototype.listenerCount=OS;function OS(e){var t=this._events;if(t!==void 0){var a=t[e];if(typeof a=="function")return 1;if(a!==void 0)return a.length}return 0}Cr.prototype.eventNames=function(){return this._eventsCount>0?lf(this._events):[]};function FS(e,t){for(var a=new Array(t),u=0;u<t;++u)a[u]=e[u];return a}function PA(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function IA(e){for(var t=new Array(e.length),a=0;a<t.length;++a)t[a]=e[a].listener||e[a];return t}function AA(e,t){return new Promise(function(a,u){function c(g){e.removeListener(t,x),u(g)}function x(){typeof e.removeListener=="function"&&e.removeListener("error",c),a([].slice.call(arguments))}BS(e,t,x,{once:!0}),t!=="error"&&MA(e,c,{once:!0})})}function MA(e,t,a){typeof e.on=="function"&&BS(e,"error",t,a)}function BS(e,t,a,u){if(typeof e.on=="function")u.once?e.once(t,a):e.on(t,a);else if(typeof e.addEventListener=="function")e.addEventListener(t,function c(x){u.once&&e.removeEventListener(t,c),a(x)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var zA=j_.exports;const LA=rc(zA);function RA(){return typeof self<"u"?fetch.bind(self):typeof global<"u"&&global.fetch?global.fetch:null}class DA{constructor(){this._apiKey="",this._fetch=RA(),this.tileCacheSize=200}set apiKey(t){this._apiKey=t}get apiKey(){return this._apiKey}set fetch(t){this._fetch=t}get fetch(){return this._fetch}}const Bu=new DA,OA={AUTO:"auto",ALBANIAN:"sq",ARABIC:"ar",ARMENIAN:"hy",AZERBAIJANI:"az",BELORUSSIAN:"be",BOSNIAN:"bs",BRETON:"br",BULGARIAN:"bg",CATALAN:"ca",CHINESE:"zh",CROATIAN:"hr",CZECH:"cs",DANISH:"da",DUTCH:"nl",ENGLISH:"en",ESPERANTO:"eo",ESTONIAN:"et",FINNISH:"fi",FRENCH:"fr",FRISIAN:"fy",GEORGIAN:"ka",GERMAN:"de",GREEK:"el",HEBREW:"he",HUNGARIAN:"hu",ICELANDIC:"is",IRISH:"ga",ITALIAN:"it",JAPANESE:"ja",KANNADA:"kn",KAZAKH:"kk",KOREAN:"ko",ROMAN_LATIN:"la",LATVIAN:"lv",LITHUANIAN:"lt",LUXEMBOURGISH:"lb",MACEDONIAN:"mk",MALTESE:"mt",NORWEGIAN:"no",POLISH:"pl",PORTUGUESE:"pt",ROMANIAN:"ro",ROMANSH:"rm",RUSSIAN:"ru",SCOTTISH_GAELIC:"gd",SERBIAN_CYRILLIC:"sr",SLOVAK:"sk",SLOVENE:"sl",SPANISH:"es",SWEDISH:"sv",THAI:"th",TURKISH:"tr",UKRAINIAN:"uk",WELSH:"cy"};new Set(Object.values(OA));async function FA(e,t={}){if(Bu.fetch===null)throw new Error("The fetch function was not found. If on NodeJS < 18 please specify the fetch function with config.fetch");if(new URL(e).searchParams.get("key").trim()==="")throw new Error("The MapTiler Cloud API key is missing. Set it in `config.apiKey` or get one for free at https://maptiler.com");return Bu.fetch(e,t)}const NS={maptilerApiURL:"https://api.maptiler.com/",mapStyle:"streets-v2"};Object.freeze(NS);class BA extends Error{constructor(t,a=""){super(`Call to enpoint ${t.url} failed with the status code ${t.status}. ${a}`),this.res=t}}const pw={403:"Key is missing, invalid or restricted"};async function NA(e={}){const t=new URL("geolocation/ip.json",NS.maptilerApiURL);t.searchParams.set("key",e.apiKey??Bu.apiKey);const a=t.toString(),u=await FA(a);if(!u.ok)throw new BA(u,u.status in pw?pw[u.status]:"");return await u.json()}const fw={info:NA};function jS(e){const t=/^maptiler:\/\/(.*)/;let a;const u=e.trim();let c;return u.startsWith("http://")||u.startsWith("https://")?c=u:(a=t.exec(u))!==null?c=`https://api.maptiler.com/maps/${a[1]}/style.json`:c=`https://api.maptiler.com/maps/${u}/style.json`,c}class US{constructor(t,a,u,c,x,g){this.name=t,this.variantType=a,this.id=u,this.referenceStyle=c,this.description=x,this.imageURL=g}getName(){return this.name}getFullName(){return`${this.referenceStyle.getName()} ${this.name}`}getType(){return this.variantType}getId(){return this.id}getDescription(){return this.description}getReferenceStyle(){return this.referenceStyle}hasVariant(t){return this.referenceStyle.hasVariant(t)}getVariant(t){return this.referenceStyle.getVariant(t)}getVariants(){return this.referenceStyle.getVariants().filter(t=>t!==this)}getImageURL(){return this.imageURL}getExpandedStyleURL(){return jS(this.getId())}}class VS{constructor(t,a){this.name=t,this.id=a,this.variants={},this.orderedVariants=[]}getName(){return this.name}getId(){return this.id}addVariant(t){this.variants[t.getType()]=t,this.orderedVariants.push(t)}hasVariant(t){return t in this.variants}getVariant(t){return t in this.variants?this.variants[t]:this.orderedVariants[0]}getVariants(){return Object.values(this.variants)}getDefaultVariant(){return this.orderedVariants[0]}}const w0=[{referenceStyleID:"STREETS",name:"Streets",description:"",variants:[{id:"streets-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"streets-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"streets-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"streets-v2-night",name:"Night",variantType:"NIGHT",description:"",imageURL:""},{id:"streets-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OUTDOOR",name:"Outdoor",description:"",variants:[{id:"outdoor-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"outdoor-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"WINTER",name:"Winter",description:"",variants:[{id:"winter-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"winter-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"SATELLITE",name:"Satellite",description:"",variants:[{id:"satellite",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"HYBRID",name:"Hybrid",description:"",variants:[{id:"hybrid",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"BASIC",name:"Basic",description:"",variants:[{id:"basic-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"basic-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"basic-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BRIGHT",name:"Bright",description:"",variants:[{id:"bright-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"bright-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"bright-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"bright-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OPENSTREETMAP",name:"OpenStreetMap",description:"",variants:[{id:"openstreetmap",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"TOPO",name:"Topo",description:"",variants:[{id:"topo-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"topo-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"topo-v2-shiny",name:"Shiny",variantType:"SHINY",description:"",imageURL:""},{id:"topo-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""},{id:"topo-v2-topographique",name:"Topographique",variantType:"TOPOGRAPHIQUE",description:"",imageURL:""}]},{referenceStyleID:"VOYAGER",name:"Voyager",description:"",variants:[{id:"voyager-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"voyager-v2-darkmatter",name:"Darkmatter",variantType:"DARK",description:"",imageURL:""},{id:"voyager-v2-positron",name:"Positron",variantType:"LIGHT",description:"",imageURL:""},{id:"voyager-v2-vintage",name:"Vintage",variantType:"VINTAGE",description:"",imageURL:""}]},{referenceStyleID:"TONER",name:"Toner",description:"",variants:[{id:"toner-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"toner-v2-background",name:"Background",variantType:"BACKGROUND",description:"",imageURL:""},{id:"toner-v2-lite",name:"Lite",variantType:"LITE",description:"",imageURL:""},{id:"toner-v2-lines",name:"Lines",variantType:"LINES",description:"",imageURL:""}]},{referenceStyleID:"DATAVIZ",name:"Dataviz",description:"",variants:[{id:"dataviz",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"dataviz-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"dataviz-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BACKDROP",name:"Backdrop",description:"",variants:[{id:"backdrop",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"backdrop-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"backdrop-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"OCEAN",name:"Ocean",description:"",variants:[{id:"ocean",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]}];function jA(e){return new Proxy(e,{get(t,a,u){return t.hasVariant(a)?t.getVariant(a):a.toString().toUpperCase()===a?e.getDefaultVariant():Reflect.get(t,a,u)}})}function UA(){const e={};for(let t=0;t<w0.length;t+=1){const a=w0[t],u=jA(new VS(a.name,a.referenceStyleID));for(let c=0;c<a.variants.length;c+=1){const x=a.variants[c],g=new US(x.name,x.variantType,x.id,u,x.description,x.imageURL);u.addVariant(g)}e[a.referenceStyleID]=u}return e}const VA=UA();let Hp;const $A=new Uint8Array(16);function HA(){if(!Hp&&(Hp=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Hp))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Hp($A)}const Wn=[];for(let e=0;e<256;++e)Wn.push((e+256).toString(16).slice(1));function WA(e,t=0){return Wn[e[t+0]]+Wn[e[t+1]]+Wn[e[t+2]]+Wn[e[t+3]]+"-"+Wn[e[t+4]]+Wn[e[t+5]]+"-"+Wn[e[t+6]]+Wn[e[t+7]]+"-"+Wn[e[t+8]]+Wn[e[t+9]]+"-"+Wn[e[t+10]]+Wn[e[t+11]]+Wn[e[t+12]]+Wn[e[t+13]]+Wn[e[t+14]]+Wn[e[t+15]]}const qA=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),mw={randomUUID:qA};function ZA(e,t,a){if(mw.randomUUID&&!t&&!e)return mw.randomUUID();e=e||{};const u=e.random||(e.rng||HA)();return u[6]=u[6]&15|64,u[8]=u[8]&63|128,WA(u)}const $S="3.7.7",GA=$S,ac=typeof Buffer=="function",gw=typeof TextDecoder=="function"?new TextDecoder:void 0,yw=typeof TextEncoder=="function"?new TextEncoder:void 0,KA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",zh=Array.prototype.slice.call(KA),Wp=(e=>{let t={};return e.forEach((a,u)=>t[a]=u),t})(zh),XA=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Zn=String.fromCharCode.bind(String),_w=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),HS=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),WS=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),qS=e=>{let t,a,u,c,x="";const g=e.length%3;for(let h=0;h<e.length;){if((a=e.charCodeAt(h++))>255||(u=e.charCodeAt(h++))>255||(c=e.charCodeAt(h++))>255)throw new TypeError("invalid character found");t=a<<16|u<<8|c,x+=zh[t>>18&63]+zh[t>>12&63]+zh[t>>6&63]+zh[t&63]}return g?x.slice(0,g-3)+"===".substring(g):x},U_=typeof btoa=="function"?e=>btoa(e):ac?e=>Buffer.from(e,"binary").toString("base64"):qS,b0=ac?e=>Buffer.from(e).toString("base64"):e=>{let a=[];for(let u=0,c=e.length;u<c;u+=4096)a.push(Zn.apply(null,e.subarray(u,u+4096)));return U_(a.join(""))},uf=(e,t=!1)=>t?HS(b0(e)):b0(e),YA=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?Zn(192|t>>>6)+Zn(128|t&63):Zn(224|t>>>12&15)+Zn(128|t>>>6&63)+Zn(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return Zn(240|t>>>18&7)+Zn(128|t>>>12&63)+Zn(128|t>>>6&63)+Zn(128|t&63)}},JA=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,ZS=e=>e.replace(JA,YA),vw=ac?e=>Buffer.from(e,"utf8").toString("base64"):yw?e=>b0(yw.encode(e)):e=>U_(ZS(e)),Nu=(e,t=!1)=>t?HS(vw(e)):vw(e),xw=e=>Nu(e,!0),QA=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,eM=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),a=t-65536;return Zn((a>>>10)+55296)+Zn((a&1023)+56320);case 3:return Zn((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return Zn((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},GS=e=>e.replace(QA,eM),KS=e=>{if(e=e.replace(/\s+/g,""),!XA.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,a="",u,c;for(let x=0;x<e.length;)t=Wp[e.charAt(x++)]<<18|Wp[e.charAt(x++)]<<12|(u=Wp[e.charAt(x++)])<<6|(c=Wp[e.charAt(x++)]),a+=u===64?Zn(t>>16&255):c===64?Zn(t>>16&255,t>>8&255):Zn(t>>16&255,t>>8&255,t&255);return a},V_=typeof atob=="function"?e=>atob(WS(e)):ac?e=>Buffer.from(e,"base64").toString("binary"):KS,XS=ac?e=>_w(Buffer.from(e,"base64")):e=>_w(V_(e).split("").map(t=>t.charCodeAt(0))),YS=e=>XS(JS(e)),tM=ac?e=>Buffer.from(e,"base64").toString("utf8"):gw?e=>gw.decode(XS(e)):e=>GS(V_(e)),JS=e=>WS(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),S0=e=>tM(JS(e)),rM=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},QS=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),eT=function(){const e=(t,a)=>Object.defineProperty(String.prototype,t,QS(a));e("fromBase64",function(){return S0(this)}),e("toBase64",function(t){return Nu(this,t)}),e("toBase64URI",function(){return Nu(this,!0)}),e("toBase64URL",function(){return Nu(this,!0)}),e("toUint8Array",function(){return YS(this)})},tT=function(){const e=(t,a)=>Object.defineProperty(Uint8Array.prototype,t,QS(a));e("toBase64",function(t){return uf(this,t)}),e("toBase64URI",function(){return uf(this,!0)}),e("toBase64URL",function(){return uf(this,!0)})},nM=()=>{eT(),tT()},iM={version:$S,VERSION:GA,atob:V_,atobPolyfill:KS,btoa:U_,btoaPolyfill:qS,fromBase64:S0,toBase64:Nu,encode:Nu,encodeURI:xw,encodeURL:xw,utob:ZS,btou:GS,decode:S0,isValid:rM,fromUint8Array:uf,toUint8Array:YS,extendString:eT,extendUint8Array:tT,extendBuiltins:nM},lr={VISITOR:"visitor",VISITOR_ENGLISH:"visitor_en",STYLE:"style",AUTO:"auto",STYLE_LOCK:"style_lock",LATIN:"name:latin",NON_LATIN:"name:nonlatin",LOCAL:"name",INTERNATIONAL:"name_int",ALBANIAN:"name:sq",AMHARIC:"name:am",ARABIC:"name:ar",ARMENIAN:"name:hy",AZERBAIJANI:"name:az",BASQUE:"name:eu",BELORUSSIAN:"name:be",BENGALI:"name:bn",BOSNIAN:"name:bs",BRETON:"name:br",BULGARIAN:"name:bg",CATALAN:"name:ca",CHINESE:"name:zh",TRADITIONAL_CHINESE:"name:zh-Hant",SIMPLIFIED_CHINESE:"name:zh-Hans",CORSICAN:"name:co",CROATIAN:"name:hr",CZECH:"name:cs",DANISH:"name:da",DUTCH:"name:nl",ENGLISH:"name:en",ESPERANTO:"name:eo",ESTONIAN:"name:et",FINNISH:"name:fi",FRENCH:"name:fr",FRISIAN:"name:fy",GEORGIAN:"name:ka",GERMAN:"name:de",GREEK:"name:el",HEBREW:"name:he",HINDI:"name:hi",HUNGARIAN:"name:hu",ICELANDIC:"name:is",INDONESIAN:"name:id",IRISH:"name:ga",ITALIAN:"name:it",JAPANESE:"name:ja",JAPANESE_HIRAGANA:"name:ja-Hira",JAPANESE_KANA:"name:ja_kana",JAPANESE_LATIN:"name:ja_rm",JAPANESE_2018:"name:ja-Latn",KANNADA:"name:kn",KAZAKH:"name:kk",KOREAN:"name:ko",KOREAN_LATIN:"name:ko-Latn",KURDISH:"name:ku",ROMAN_LATIN:"name:la",LATVIAN:"name:lv",LITHUANIAN:"name:lt",LUXEMBOURGISH:"name:lb",MACEDONIAN:"name:mk",MALAYALAM:"name:ml",MALTESE:"name:mt",NORWEGIAN:"name:no",OCCITAN:"name:oc",PERSIAN:"name:fa",POLISH:"name:pl",PORTUGUESE:"name:pt",PUNJABI:"name:pa",WESTERN_PUNJABI:"name:pnb",ROMANIAN:"name:ro",ROMANSH:"name:rm",RUSSIAN:"name:ru",SCOTTISH_GAELIC:"name:gd",SERBIAN_CYRILLIC:"name:sr",SERBIAN_LATIN:"name:sr-Latn",SLOVAK:"name:sk",SLOVENE:"name:sl",SPANISH:"name:es",SWEDISH:"name:sv",TAMIL:"name:ta",TELUGU:"name:te",THAI:"name:th",TURKISH:"name:tr",UKRAINIAN:"name:uk",URDU:"name:ur",VIETNAMIAN_LATIN:"name:vi",WELSH:"name:cy"},oM=new Set(Object.values(lr));function ww(e){return oM.has(e)}const aM=new Set(Object.values(lr));function bw(){if(typeof navigator>"u")return`name:${Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0]}`;const e=Array.from(new Set(navigator.languages.map(t=>`name:${t.split("-")[0]}`))).filter(t=>aM.has(t));return e.length?e[0]:lr.LOCAL}const Mi={maptilerLogoURL:"https://api.maptiler.com/resources/logo.svg",maptilerURL:"https://www.maptiler.com/",maptilerApiHost:"api.maptiler.com",rtlPluginURL:"https://cdn.maptiler.com/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.min.js",primaryLanguage:lr.STYLE,secondaryLanguage:lr.LOCAL,terrainSourceURL:"https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json",terrainSourceId:"maptiler-terrain"};Object.freeze(Mi);const rT=ZA();class sM extends LA{constructor(){super(...arguments),this.primaryLanguage=Mi.primaryLanguage,this.session=!0,this.caching=!0,this._unit="metric",this._apiKey=""}set unit(t){this._unit=t,this.emit("unit",t)}get unit(){return this._unit}set apiKey(t){this._apiKey=t,Bu.apiKey=t,this.emit("apiKey",t)}get apiKey(){return this._apiKey}set fetch(t){Bu.fetch=t}get fetch(){return Bu.fetch}}const Ai=new sM,T0="localcache_source",E0="localcache",lM="maptiler_sdk",uM=1e3,cM=100,k0=typeof caches<"u";function hM(e,t){if(k0&&Ai.caching&&Ai.session&&e.host===Mi.maptilerApiHost){if(t==="Source"&&e.href.includes("tiles.json"))return e.href.replace("https://",`${T0}://`);if(t==="Tile"||t==="Glyphs")return e.href.replace("https://",`${E0}://`)}return e.href}let cy;async function nT(){return cy||(cy=await caches.open(lM)),cy}let Sw=0;async function dM(){const e=await nT(),t=await e.keys(),a=t.slice(0,Math.max(t.length-uM,0));for(const u of a)e.delete(u)}function pM(){x0.addProtocol(T0,async(e,t)=>{if(!e.url)throw new Error("");e.url=e.url.replace(`${T0}://`,"https://");const a=e;a.signal=t.signal;const u=await fetch(e.url,a),c=await u.json();return c.tiles&&c.tiles.length>0&&(c.tiles[0]+=`&last-modified=${u.headers.get("Last-Modified")}`),{data:c,cacheControl:u.headers.get("Cache-Control"),expires:u.headers.get("Expires")}}),x0.addProtocol(E0,async(e,t)=>{if(!e.url)throw new Error("");e.url=e.url.replace(`${E0}://`,"https://");const a=new URL(e.url),u=new URL(a);u.searchParams.delete("mtsid"),u.searchParams.delete("key");const c=u.toString(),x=new URL(a);x.searchParams.delete("last-modified");const g=x.toString(),h=async L=>({data:await L.arrayBuffer(),cacheControl:L.headers.get("Cache-Control"),expires:L.headers.get("Expires")}),C=await nT(),D=await C.match(c);if(D)return h(D);const $=e;$.signal=t.signal;const M=await fetch(g,$);return M.status>=200&&M.status<300&&(C.put(c,M.clone()).catch(()=>{}),++Sw>cM&&(dM(),Sw=0)),h(M)})}function fM(){if(typeof window>"u")return;const e=mr.getRTLTextPluginStatus();if(e==="unavailable"||e==="requested")try{mr.setRTLTextPlugin(Mi.rtlPluginURL,!0)}catch{}}function mM(e,t){for(const a of e)typeof t[a]=="function"&&(t[a]=t[a].bind(t))}function ps(e,t,a){const u=window.document.createElement(e);return t!==void 0&&(u.className=t),a&&a.appendChild(u),u}function iT(e){e.parentNode&&e.parentNode.removeChild(e)}function Tw(e,t){let a=null;try{a=new URL(e)}catch{return{url:e}}return a.host===Mi.maptilerApiHost&&(a.searchParams.has("key")||a.searchParams.append("key",Ai.apiKey),Ai.session&&a.searchParams.append("mtsid",rT)),{url:hM(a,t)}}function Ew(e){return(t,a)=>{if(e!=null){const u=e(t,a),c=Tw((u==null?void 0:u.url)??"",a);return{...u,...c}}return Tw(t,a)}}function gM(){return document.createElement("canvas").getContext("webgl2")?null:typeof WebGL2RenderingContext<"u"?"Graphic rendering with WebGL2 has been disabled or is not supported by your graphic card. The map cannot be displayed.":"Your browser does not support graphic rendering with WebGL2. The map cannot be displayed."}function yM(e){const t=gM();if(!t)return;let a=null;if(typeof e=="string"?a=document.getElementById(e):e instanceof HTMLElement&&(a=e),!a)throw new Error("The Map container must be provided.");const u=document.createElement("div");throw u.innerHTML=t,u.classList.add("no-webgl-support-div"),a.appendChild(u),new Error(t)}let _M=class extends mr.Marker{addTo(t){return super.addTo(t)}},dz=class extends mr.Popup{addTo(t){return super.addTo(t)}},fz=class extends mr.Style{constructor(t,a={}){super(t,a)}};class gz extends mr.CanvasSource{onAdd(t){super.onAdd(t)}}class yz extends mr.GeoJSONSource{onAdd(t){super.onAdd(t)}}class _z extends mr.ImageSource{onAdd(t){super.onAdd(t)}}class vz extends mr.RasterTileSource{onAdd(t){super.onAdd(t)}}class xz extends mr.RasterDEMTileSource{onAdd(t){super.onAdd(t)}}class wz extends mr.VectorTileSource{onAdd(t){super.onAdd(t)}}class bz extends mr.VideoSource{onAdd(t){super.onAdd(t)}}class vM extends mr.NavigationControl{onAdd(t){return super.onAdd(t)}}class xM extends mr.GeolocateControl{onAdd(t){return super.onAdd(t)}}class Sz extends mr.AttributionControl{onAdd(t){return super.onAdd(t)}}class wM extends mr.LogoControl{onAdd(t){return super.onAdd(t)}}class bM extends mr.ScaleControl{onAdd(t){return super.onAdd(t)}}class SM extends mr.FullscreenControl{onAdd(t){return super.onAdd(t)}}class Tz extends mr.TerrainControl{onAdd(t){return super.onAdd(t)}}class Ez extends mr.BoxZoomHandler{constructor(t,a){super(t,a)}}class kz extends mr.ScrollZoomHandler{constructor(t,a){super(t,a)}}class Cz extends mr.CooperativeGesturesHandler{constructor(t,a){super(t,a)}}class Pz extends mr.KeyboardHandler{constructor(t){super(t)}}class Iz extends mr.TwoFingersTouchPitchHandler{constructor(t){super(t)}}class Az extends mr.MapWheelEvent{constructor(t,a,u){super(t,a,u)}}class Mz extends mr.MapTouchEvent{constructor(t,a,u){super(t,a,u)}}class zz extends mr.MapMouseEvent{constructor(t,a,u,c={}){super(t,a,u,c)}}class kw extends wM{constructor(t={}){super(t),this.logoURL="",this.linkURL="",this.logoURL=t.logoURL??Mi.maptilerLogoURL,this.linkURL=t.linkURL??Mi.maptilerURL}onAdd(t){this._map=t,this._compact=this.options.compact??!1,this._container=window.document.createElement("div"),this._container.className="maplibregl-ctrl";const a=window.document.createElement("a");return a.style.backgroundRepeat="no-repeat",a.style.cursor="pointer",a.style.display="block",a.style.height="23px",a.style.margin="0 0 -4px -4px",a.style.overflow="hidden",a.style.width="88px",a.style.backgroundImage=`url(${this.logoURL})`,a.style.backgroundSize="100px 30px",a.style.width="100px",a.style.height="30px",a.target="_blank",a.rel="noopener",a.href=this.linkURL,a.setAttribute("aria-label","MapTiler logo"),a.setAttribute("rel","noopener"),this._container.appendChild(a),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}}function Cw(e){return e?typeof e=="string"||e instanceof String?!e.startsWith("http")&&e.toLowerCase().includes(".json")?e:jS(e):e instanceof US?e.getExpandedStyleURL():e instanceof VS?e.getDefaultVariant().getExpandedStyleURL():e:VA[w0[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL()}class TM{constructor(){mM(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(t){return this._map=t,this._container=ps("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=ps("button","maplibregl-ctrl-terrain",this._container),ps("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){iT(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.hasTerrain()?this._map.disableTerrain():this._map.enableTerrain(),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.hasTerrain()?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))}}class EM extends vM{constructor(){super({showCompass:!0,showZoom:!0,visualizePitch:!0}),this._rotateCompassArrow=()=>{const t=this.options.visualizePitch?`scale(${Math.min(1.5,1/Math.cos(this._map.transform.pitch*(Math.PI/180))**.5)}) rotateX(${Math.min(70,this._map.transform.pitch)}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=t},this._compass.removeEventListener("click",this._compass.clickFunction),this._compass.addEventListener("click",t=>{this._map.getPitch()===0?this._map.easeTo({pitch:Math.min(this._map.getMaxPitch(),80)}):this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})}_createButton(t,a){const u=super._createButton(t,a);return u.clickFunction=a,u}}const Pw=mr.Marker,Iw=mr.LngLat,kM=mr.LngLatBounds;class CM extends xM{constructor(){super(...arguments),this.lastUpdatedCenter=new Iw(0,0),this._updateCamera=t=>{var D,$;const a=new Iw(t.coords.longitude,t.coords.latitude),u=t.coords.accuracy,x={bearing:this._map.getBearing(),...this.options.fitBoundsOptions,linear:!0},g=this._map.getZoom();g>((($=(D=this.options)==null?void 0:D.fitBoundsOptions)==null?void 0:$.maxZoom)??30)&&(x.zoom=g),this._map.fitBounds(kM.fromLngLat(a,u),x,{geolocateSource:!0});let h=!1;const C=()=>{h=!0};this._map.once("click",C),this._map.once("dblclick",C),this._map.once("dragstart",C),this._map.once("mousedown",C),this._map.once("touchstart",C),this._map.once("wheel",C),this._map.once("moveend",()=>{this._map.off("click",C),this._map.off("dblclick",C),this._map.off("dragstart",C),this._map.off("mousedown",C),this._map.off("touchstart",C),this._map.off("wheel",C),!h&&(this.lastUpdatedCenter=this._map.getCenter())})},this._setupUI=t=>{if(this.lastUpdatedCenter=this._map.getCenter(),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this._geolocateButton=ps("button","maplibregl-ctrl-geolocate",this._container),ps("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",t===!1){const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}else{const a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=ps("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Pw({element:this._dotElement}),this._circleElement=ps("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Pw({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("move",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("moveend",a=>{const u=a.originalEvent&&a.originalEvent.type==="resize",c=this.lastUpdatedCenter.distanceTo(this._map.getCenter());!a.geolocateSource&&this._watchState==="ACTIVE_LOCK"&&!u&&c>1&&(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new Event("trackuserlocationend")))})},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}}_updateCircleRadius(){if(this._watchState!=="BACKGROUND"&&this._watchState!=="ACTIVE_LOCK")return;const t=[this._lastKnownPosition.coords.longitude,this._lastKnownPosition.coords.latitude],a=this._map.project(t),u=this._map.unproject([a.x,a.y]),c=this._map.unproject([a.x+20,a.y]),x=u.distanceTo(c)/20,g=Math.ceil(2*this._accuracy/x);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}}var oT=e=>{throw TypeError(e)},$_=(e,t,a)=>t.has(e)||oT("Cannot "+a),ir=(e,t,a)=>($_(e,t,"read from private field"),a?a.call(e):t.get(e)),is=(e,t,a)=>t.has(e)?oT("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,a),_u=(e,t,a,u)=>($_(e,t,"write to private field"),t.set(e,a),a),Yi=(e,t,a)=>($_(e,t,"access private method"),a),Ji,ra,rl,aT,hl,_o,cf,_i,sT,vo,lT;class hy{constructor(t,a){is(this,_i),is(this,Ji),is(this,ra),is(this,rl),is(this,aT),is(this,hl),is(this,_o,!1),is(this,cf),t.style!==void 0&&_u(this,_o,!0),_u(this,Ji,{zoomAdjust:-4,position:"top-right",...a,forceNoAttributionControl:!0,attributionControl:!1,navigationControl:!1,geolocateControl:!1,maptilerLogo:!1,minimap:!1,hash:!1,pitchAdjust:!1,...t,containerStyle:{border:"1px solid #000",width:"400px",height:"300px",...t.containerStyle??{}}}),t.lockZoom!==void 0&&(ir(this,Ji).minZoom=t.lockZoom,ir(this,Ji).maxZoom=t.lockZoom)}setStyle(t,a){ir(this,_o)||this.map.setStyle(t,a),Yi(this,_i,vo).call(this)}addLayer(t,a){return ir(this,_o)||this.map.addLayer(t,a),Yi(this,_i,vo).call(this),this.map}moveLayer(t,a){return ir(this,_o)||this.map.moveLayer(t,a),Yi(this,_i,vo).call(this),this.map}removeLayer(t){return ir(this,_o)||this.map.removeLayer(t),Yi(this,_i,vo).call(this),this}setLayerZoomRange(t,a,u){return ir(this,_o)||this.map.setLayerZoomRange(t,a,u),Yi(this,_i,vo).call(this),this}setFilter(t,a,u){return ir(this,_o)||this.map.setFilter(t,a,u),Yi(this,_i,vo).call(this),this}setPaintProperty(t,a,u,c){return ir(this,_o)||this.map.setPaintProperty(t,a,u,c),Yi(this,_i,vo).call(this),this}setLayoutProperty(t,a,u,c){return ir(this,_o)||this.map.setLayoutProperty(t,a,u,c),Yi(this,_i,vo).call(this),this}setGlyphs(t,a){return ir(this,_o)||this.map.setGlyphs(t,a),Yi(this,_i,vo).call(this),this}onAdd(t){_u(this,ra,t),_u(this,rl,ps("div","maplibregl-ctrl maplibregl-ctrl-group"));for(const[a,u]of Object.entries(ir(this,Ji).containerStyle))ir(this,rl).style.setProperty(a,u);return ir(this,Ji).container=ir(this,rl),ir(this,Ji).zoom=t.getZoom()+ir(this,Ji).zoomAdjust,this.map=new uT(ir(this,Ji)),this.map.once("style.load",()=>{this.map.resize()}),this.map.once("load",()=>{Yi(this,_i,sT).call(this,ir(this,Ji).parentRect),_u(this,cf,Yi(this,_i,lT).call(this))}),ir(this,rl)}onRemove(){var t;(t=ir(this,cf))==null||t.call(this),iT(ir(this,rl))}}Ji=new WeakMap;ra=new WeakMap;rl=new WeakMap;aT=new WeakMap;hl=new WeakMap;_o=new WeakMap;cf=new WeakMap;_i=new WeakSet;sT=function(e){e===void 0||e.linePaint===void 0&&e.fillPaint===void 0||(_u(this,hl,{type:"Feature",properties:{name:"parentRect"},geometry:{type:"Polygon",coordinates:[[[],[],[],[],[]]]}}),this.map.addSource("parentRect",{type:"geojson",data:ir(this,hl)}),(e.lineLayout!==void 0||e.linePaint!==void 0)&&this.map.addLayer({id:"parentRectOutline",type:"line",source:"parentRect",layout:{...e.lineLayout},paint:{"line-color":"#FFF","line-width":1,"line-opacity":.85,...e.linePaint}}),e.fillPaint!==void 0&&this.map.addLayer({id:"parentRectFill",type:"fill",source:"parentRect",layout:{},paint:{"fill-color":"#08F","fill-opacity":.135,...e.fillPaint}}),Yi(this,_i,vo).call(this))};vo=function(){if(ir(this,hl)===void 0)return;const{devicePixelRatio:e}=window,t=ir(this,ra).getCanvas(),a=t.width/e,u=t.height/e,c=ir(this,ra).unproject.bind(ir(this,ra)),x=c([0,0]),g=c([a,0]),h=c([0,u]),C=c([a,u]);ir(this,hl).geometry.coordinates=[[h.toArray(),C.toArray(),g.toArray(),x.toArray(),h.toArray()]],this.map.getSource("parentRect").setData(ir(this,hl))};lT=function(){const{pitchAdjust:e}=ir(this,Ji),t=()=>{x("parent")},a=()=>{x("minimap")},u=()=>{ir(this,ra).on("move",t),this.map.on("move",a)},c=()=>{ir(this,ra).off("move",t),this.map.off("move",a)},x=g=>{c();const h=g==="parent"?ir(this,ra):this.map,C=g==="parent"?this.map:ir(this,ra),D=h.getCenter(),$=h.getZoom()+(ir(this,Ji).zoomAdjust??-4)*(g==="parent"?1:-1),M=h.getBearing(),L=h.getPitch();C.jumpTo({center:D,zoom:$,bearing:M,pitch:e?L:0}),Yi(this,_i,vo).call(this),u()};return u(),()=>{c()}};const PM={POINT:"POINT",COUNTRY:"COUNTRY"};let uT=class extends mr.Map{constructor(t){yM(t.container),t.apiKey&&(Ai.apiKey=t.apiKey);const a=Cw(t.style),u=location.hash;Ai.apiKey||console.warn("MapTiler Cloud API key is not set. Visit https://maptiler.com and try Cloud for free!");let c={compact:!1};t.customAttribution?c.customAttribution=t.customAttribution:t.attributionControl&&typeof t.attributionControl=="object"&&(c={...c,...t.attributionControl}),super({...t,style:a,maplibreLogo:!1,transformRequest:Ew(t.transformRequest),attributionControl:t.forceNoAttributionControl===!0?!1:c}),this.isTerrainEnabled=!1,this.terrainExaggeration=1,this.terrainGrowing=!1,this.terrainFlattening=!1,this.isReady=!1,Ai.caching&&!k0&&console.warn("The cache API is only available in secure contexts. More info at https://developer.mozilla.org/en-US/docs/Web/API/Cache"),Ai.caching&&k0&&pM(),this.primaryLanguage=t.language??Ai.primaryLanguage,this.forceLanguageUpdate=!(this.primaryLanguage===lr.STYLE||this.primaryLanguage===lr.STYLE_LOCK),this.languageAlwaysBeenStyle=this.primaryLanguage===lr.STYLE,this.terrainExaggeration=t.terrainExaggeration??this.terrainExaggeration,this.once("styledata",async()=>{if(!t.geolocate||t.center||t.hash&&u)return;try{if(t.geolocate===PM.COUNTRY){await this.fitToIpBounds();return}}catch(M){console.warn(M.message)}let D;try{await this.centerOnIpPoint(t.zoom),D=this.getCameraHash()}catch(M){console.warn(M.message)}(await navigator.permissions.query({name:"geolocation"})).state==="granted"&&navigator.geolocation.getCurrentPosition(M=>{D===this.getCameraHash()&&(this.terrain?this.easeTo({center:[M.coords.longitude,M.coords.latitude],zoom:t.zoom||12,duration:2e3}):this.once("terrain",()=>{this.easeTo({center:[M.coords.longitude,M.coords.latitude],zoom:t.zoom||12,duration:2e3})}))},null,{maximumAge:24*3600*1e3,timeout:5e3,enableHighAccuracy:!1})}),this.on("styledata",()=>{this.setPrimaryLanguage(this.primaryLanguage)}),this.on("styledata",()=>{this.getTerrain()===null&&this.isTerrainEnabled&&this.enableTerrain(this.terrainExaggeration)}),this.once("load",async()=>{let D={logo:null};try{const $=Object.keys(this.style.sourceCaches).map(ce=>this.getSource(ce)).filter(ce=>ce&&"url"in ce&&typeof ce.url=="string"&&(ce==null?void 0:ce.url.includes("tiles.json"))),M=new URL($[0].url);M.searchParams.has("key")||M.searchParams.append("key",Ai.apiKey),D=await(await fetch(M.href)).json()}catch{}if(t.forceNoAttributionControl!==!0)if("logo"in D&&D.logo){const $=D.logo;this.addControl(new kw({logoURL:$}),t.logoPosition)}else t.maptilerLogo&&this.addControl(new kw,t.logoPosition);if(t.scaleControl){const $=t.scaleControl===!0||t.scaleControl===void 0?"bottom-right":t.scaleControl,M=new bM({unit:Ai.unit});this.addControl(M,$),Ai.on("unit",L=>{M.setUnit(L)})}if(t.navigationControl!==!1){const $=t.navigationControl===!0||t.navigationControl===void 0?"top-right":t.navigationControl;this.addControl(new EM,$)}if(t.geolocateControl!==!1){const $=t.geolocateControl===!0||t.geolocateControl===void 0?"top-right":t.geolocateControl;this.addControl(new CM({positionOptions:{enableHighAccuracy:!0,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!0,showAccuracyCircle:!0,showUserLocation:!0}),$)}if(t.terrainControl){const $=t.terrainControl===!0||t.terrainControl===void 0?"top-right":t.terrainControl;this.addControl(new TM,$)}if(t.fullscreenControl){const $=t.fullscreenControl===!0||t.fullscreenControl===void 0?"top-right":t.fullscreenControl;this.addControl(new SM({}),$)}this.isReady=!0,this.fire("ready",{target:this})});let x=!1,g=!1,h;this.once("ready",()=>{x=!0,g&&this.fire("loadWithTerrain",h)}),this.once("style.load",()=>{const{minimap:D}=t;if(typeof D=="object"){const{zoom:$,center:M,style:L,language:ce,apiKey:pe,maptilerLogo:se,antialias:Ee,refreshExpiredTiles:te,maxBounds:H,scrollZoom:ne,minZoom:be,maxZoom:Ae,boxZoom:le,locale:Me,fadeDuration:$e,crossSourceCollisions:Ie,clickTolerance:ze,bounds:Be,fitBoundsOptions:ut,pixelRatio:Ke,validateStyle:Qe}=t;this.minimap=new hy(D,{zoom:$,center:M,style:L,language:ce,apiKey:pe,container:"null",maptilerLogo:se,antialias:Ee,refreshExpiredTiles:te,maxBounds:H,scrollZoom:ne,minZoom:be,maxZoom:Ae,boxZoom:le,locale:Me,fadeDuration:$e,crossSourceCollisions:Ie,clickTolerance:ze,bounds:Be,fitBoundsOptions:ut,pixelRatio:Ke,validateStyle:Qe}),this.addControl(this.minimap,D.position??"bottom-left")}else D===!0?(this.minimap=new hy({},t),this.addControl(this.minimap,"bottom-left")):D!==void 0&&D!==!1&&(this.minimap=new hy({},t),this.addControl(this.minimap,D))});const C=D=>{D.terrain&&(g=!0,h={type:"loadWithTerrain",target:this,terrain:D.terrain},this.off("terrain",C),x&&this.fire("loadWithTerrain",h))};this.on("terrain",C),t.terrain&&this.enableTerrain(t.terrainExaggeration??this.terrainExaggeration)}async onLoadAsync(){return new Promise(t=>{if(this.loaded())return t(this);this.once("load",()=>{t(this)})})}async onReadyAsync(){return new Promise(t=>{if(this.isReady)return t(this);this.once("ready",()=>{t(this)})})}async onLoadWithTerrainAsync(){return new Promise(t=>{if(this.isReady&&this.terrain)return t(this);this.once("loadWithTerrain",()=>{t(this)})})}setStyle(t,a){var u;return(u=this.minimap)==null||u.setStyle(t),this.forceLanguageUpdate=!0,this.once("idle",()=>{this.forceLanguageUpdate=!1}),super.setStyle(Cw(t),a)}addLayer(t,a){var u;return(u=this.minimap)==null||u.addLayer(t,a),super.addLayer(t,a)}moveLayer(t,a){var u;return(u=this.minimap)==null||u.moveLayer(t,a),super.moveLayer(t,a)}removeLayer(t){var a;return(a=this.minimap)==null||a.removeLayer(t),super.removeLayer(t)}setLayerZoomRange(t,a,u){var c;return(c=this.minimap)==null||c.setLayerZoomRange(t,a,u),super.setLayerZoomRange(t,a,u)}setFilter(t,a,u){var c;return(c=this.minimap)==null||c.setFilter(t,a,u),super.setFilter(t,a,u)}setPaintProperty(t,a,u,c){var x;return(x=this.minimap)==null||x.setPaintProperty(t,a,u,c),super.setPaintProperty(t,a,u,c)}setLayoutProperty(t,a,u,c){var x;return(x=this.minimap)==null||x.setLayoutProperty(t,a,u,c),super.setLayoutProperty(t,a,u,c)}setGlyphs(t,a){var u;return(u=this.minimap)==null||u.setGlyphs(t,a),super.setGlyphs(t,a)}getStyleLanguage(){return!this.style.stylesheet.metadata||typeof this.style.stylesheet.metadata!="object"?null:"maptiler:language"in this.style.stylesheet.metadata&&typeof this.style.stylesheet.metadata["maptiler:language"]=="string"?this.style.stylesheet.metadata["maptiler:language"]:null}setLanguage(t){var a,u;(u=(a=this.minimap)==null?void 0:a.map)==null||u.setLanguage(t),this.onStyleReady(()=>{this.setPrimaryLanguage(t)})}setPrimaryLanguage(t){const a=this.getStyleLanguage();if(!(t===lr.STYLE&&(a===lr.AUTO||a===lr.VISITOR))&&(t!==lr.STYLE&&(this.languageAlwaysBeenStyle=!1),this.languageAlwaysBeenStyle||this.primaryLanguage===t&&!this.forceLanguageUpdate))return;if(!ww(t)){console.warn(`The language "${t}" is not supported.`);return}if(this.primaryLanguage===lr.STYLE_LOCK){console.warn("The language cannot be changed because this map has been instantiated with the STYLE_LOCK language flag.");return}this.primaryLanguage=t;let u=t;if(t===lr.STYLE){if(!a){console.warn("The style has no default languages.");return}if(!ww(a)){console.warn("The language defined in the style is not valid.");return}u=a}let c=lr.LOCAL,x=`{${c}}`;u===lr.VISITOR?(c=bw(),x=["case",["all",["has",c],["has",lr.LOCAL]],["case",["==",["get",c],["get",lr.LOCAL]],["get",lr.LOCAL],["format",["get",c],{"font-scale":.8},`
`,["get",lr.LOCAL],{"font-scale":1.1}]],["get",lr.LOCAL]]):u===lr.VISITOR_ENGLISH?(c=lr.ENGLISH,x=["case",["all",["has",c],["has",lr.LOCAL]],["case",["==",["get",c],["get",lr.LOCAL]],["get",lr.LOCAL],["format",["get",c],{"font-scale":.8},`
`,["get",lr.LOCAL],{"font-scale":1.1}]],["get",lr.LOCAL]]):u===lr.AUTO?(c=bw(),x=["case",["has",c],["get",c],["get",lr.LOCAL]]):u===lr.LOCAL?(c=lr.LOCAL,x=`{${c}}`):(c=u,x=["case",["has",c],["get",c],["get",lr.LOCAL]]);const{layers:g}=this.getStyle();for(const h of g){if(h.type!=="symbol")continue;const C=h,D=this.getSource(C.source);if(!D||!("url"in D&&typeof D.url=="string")||new URL(D.url).host!==Mi.maptilerApiHost)continue;const{id:M,layout:L}=C;if(!L||!("text-field"in L))continue;const ce=this.getLayoutProperty(M,"text-field");typeof ce=="string"&&(ce.toLowerCase().includes("ref")||ce.toLowerCase().includes("housenumber"))||this.setLayoutProperty(M,"text-field",x)}}getPrimaryLanguage(){return this.primaryLanguage}getTerrainExaggeration(){return this.terrainExaggeration}hasTerrain(){return this.isTerrainEnabled}growTerrain(t,a=1e3){if(!this.terrain)return;const u=performance.now(),c=this.terrain.exaggeration,x=t-c,g=()=>{if(!this.terrain||this.terrainFlattening)return;const h=(performance.now()-u)/a;if(h<.99){const C=1-(1-h)**4,D=c+C*x;this.terrain.exaggeration=D,requestAnimationFrame(g)}else this.terrainGrowing=!1,this.terrainFlattening=!1,this.terrain.exaggeration=t;this.triggerRepaint()};this.terrainGrowing=!0,this.terrainFlattening=!1,requestAnimationFrame(g)}enableTerrain(t=this.terrainExaggeration){if(t<0){console.warn("Terrain exaggeration cannot be negative.");return}const a=async c=>{!this.terrain||c.type!=="data"||c.dataType!=="source"||!("source"in c)||c.sourceId!=="maptiler-terrain"||c.source.type!=="raster-dem"||c.isSourceLoaded&&(this.off("data",a),this.growTerrain(t))},u=()=>{this.isTerrainEnabled=!0,this.terrainExaggeration=t,this.on("data",a),this.addSource(Mi.terrainSourceId,{type:"raster-dem",url:Mi.terrainSourceURL}),this.setTerrain({source:Mi.terrainSourceId,exaggeration:0})};if(this.getTerrain()){this.isTerrainEnabled=!0,this.growTerrain(t);return}this.loaded()||this.isTerrainEnabled?u():this.once("load",()=>{this.getTerrain()&&this.getSource(Mi.terrainSourceId)||u()})}disableTerrain(){if(!this.terrain)return;this.isTerrainEnabled=!1;const t=1*1e3,a=performance.now(),u=this.terrain.exaggeration,c=()=>{if(!this.terrain||this.terrainGrowing)return;const x=(performance.now()-a)/t;if(x<.99){const g=(1-x)**4,h=u*g;this.terrain.exaggeration=h,requestAnimationFrame(c)}else this.terrain.exaggeration=0,this.terrainGrowing=!1,this.terrainFlattening=!1,this.setTerrain(),this.getSource(Mi.terrainSourceId)&&this.removeSource(Mi.terrainSourceId);this.triggerRepaint()};this.terrainGrowing=!1,this.terrainFlattening=!0,requestAnimationFrame(c)}setTerrainExaggeration(t,a=!0){!a&&this.terrain?(this.terrainExaggeration=t,this.terrain.exaggeration=t,this.triggerRepaint()):this.enableTerrain(t)}onStyleReady(t){this.isStyleLoaded()?t():this.once("styledata",()=>{t()})}async fitToIpBounds(){const t=await fw.info();this.fitBounds(t.country_bounds,{duration:0,padding:100})}async centerOnIpPoint(t){const a=await fw.info();this.jumpTo({center:[(a==null?void 0:a.longitude)??0,(a==null?void 0:a.latitude)??0],zoom:t||11})}getCameraHash(){const t=new Float32Array(5),a=this.getCenter();return t[0]=a.lng,t[1]=a.lat,t[2]=this.getZoom(),t[3]=this.getPitch(),t[4]=this.getBearing(),iM.fromUint8Array(new Uint8Array(t.buffer))}getSdkConfig(){return Ai}getMaptilerSessionId(){return rT}setTransformRequest(t){return super.setTransformRequest(Ew(t)),this}};function qp(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function IM(e){return`#${qp(e[0])}${qp(e[1])}${qp(e[2])}${e.length===4?qp(e[3]):""}`}class It extends Array{constructor(t={}){super(),this.min=0,this.max=1,"min"in t&&(this.min=t.min),"max"in t&&(this.max=t.max),"stops"in t&&this.setStops(t.stops,{clone:!1})}static fromArrayDefinition(t){return new It({stops:t.map(a=>({value:a[0],color:a[1]}))})}setStops(t,a={clone:!0}){const u=a.clone?this.clone():this;u.length=0;let c=Number.POSITIVE_INFINITY,x=Number.NEGATIVE_INFINITY;for(let g=0;g<t.length;g+=1)c=Math.min(c,t[g].value),x=Math.max(x,t[g].value),u.push({value:t[g].value,color:t[g].color.slice()});return u.sort((g,h)=>g.value<h.value?-1:1),this.min=c,this.max=x,u}scale(t,a,u={clone:!0}){const c=u.clone,x=this[0].value,h=this.at(-1).value-x,C=a-t,D=[];for(let $=0;$<this.length;$+=1){const ce=(this[$].value-x)/h*C+t;c?D.push({value:ce,color:this[$].color.slice()}):this[$].value=ce}return c?new It({stops:D}):this}at(t){return t<0?this[this.length+t]:this[t]}clone(){return new It({stops:this.getRawColorStops()})}getRawColorStops(){const t=[];for(let a=0;a<this.length;a+=1)t.push({value:this[a].value,color:this[a].color});return t}reverse(t={clone:!0}){const a=t.clone?this.clone():this;for(let u=0;u<~~(a.length/2);u+=1){const c=a[u].color;a[u].color=a.at(-(u+1)).color,a.at(-(u+1)).color=c}return a}getBounds(){return{min:this.min,max:this.max}}getColor(t,a={smooth:!0}){if(t<=this[0].value)return this[0].color;if(t>=this.at(-1).value)return this.at(-1).color;for(let u=0;u<this.length-1;u+=1){if(t>this[u+1].value)continue;const c=this[u].color;if(!a.smooth)return c.slice();const x=this[u].value,g=this[u+1].value,h=this[u+1].color,C=(g-t)/(g-x);return c.map((D,$)=>Math.round(D*C+h[$]*(1-C)))}return[0,0,0]}getColorHex(t,a={smooth:!0,withAlpha:!1}){return IM(this.getColor(t,a))}getColorRelative(t,a={smooth:!0}){const u=this.getBounds();return this.getColor(u.min+t*(u.max-u.min),a)}getCanvasStrip(t={horizontal:!0,size:512,smooth:!0}){const a=document.createElement("canvas");a.width=t.horizontal?t.size:1,a.height=t.horizontal?1:t.size;const u=a.getContext("2d");if(!u)throw new Error("Canvs context is missing");const c=u.getImageData(0,0,a.width,a.height),x=c.data,g=t.size,h=this[0].value,$=(this.at(-1).value-h)/g;for(let M=0;M<g;M+=1){const L=this.getColor(h+M*$,{smooth:t.smooth});x[M*4]=L[0],x[M*4+1]=L[1],x[M*4+2]=L[2],x[M*4+3]=L.length>3?L[3]:255}return u.putImageData(c,0,0),a}resample(t,a=15){const u=this.getBounds(),c=this.scale(0,1),x=1/(a-1);let g;if(t==="ease-in-square")g=Array.from({length:a},(D,$)=>{const M=$*x,L=M**2,ce=c.getColor(L);return{value:M,color:ce}});else if(t==="ease-out-square")g=Array.from({length:a},(D,$)=>{const M=$*x,L=1-(1-M)**2,ce=c.getColor(L);return{value:M,color:ce}});else if(t==="ease-out-sqrt")g=Array.from({length:a},(D,$)=>{const M=$*x,L=M**.5,ce=c.getColor(L);return{value:M,color:ce}});else if(t==="ease-in-sqrt")g=Array.from({length:a},(D,$)=>{const M=$*x,L=1-(1-M)**.5,ce=c.getColor(L);return{value:M,color:ce}});else if(t==="ease-out-exp")g=Array.from({length:a},(D,$)=>{const M=$*x,L=1-2**(-10*M),ce=c.getColor(L);return{value:M,color:ce}});else if(t==="ease-in-exp")g=Array.from({length:a},(D,$)=>{const M=$*x,L=2**(10*M-10),ce=c.getColor(L);return{value:M,color:ce}});else throw new Error("Invalid ressampling method.");return new It({stops:g}).scale(u.min,u.max)}transparentStart(){const t=this.getRawColorStops();t.unshift({value:t[0].value,color:t[0].color.slice()}),t[1].value+=.001;for(const a of t)a.color.length===3&&a.color.push(255);return t[0].color[3]=0,new It({stops:t})}hasTransparentStart(){return this[0].color.length===4&&this[0].color[3]===0}}new It({stops:[{value:0,color:[0,0,0,0]},{value:1,color:[0,0,0,0]}]}),new It({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),new It({stops:[{value:0,color:[0,0,131]},{value:.125,color:[0,60,170]},{value:.375,color:[5,255,255]},{value:.625,color:[255,255,0]},{value:.875,color:[250,0,0]},{value:1,color:[128,0,0]}]}),new It({stops:[{value:0,color:[255,0,0]},{value:.169,color:[253,255,2]},{value:.173,color:[247,255,2]},{value:.337,color:[0,252,4]},{value:.341,color:[0,252,10]},{value:.506,color:[1,249,255]},{value:.671,color:[2,0,253]},{value:.675,color:[8,0,253]},{value:.839,color:[255,0,251]},{value:.843,color:[255,0,245]},{value:1,color:[255,0,6]}]}),new It({stops:[{value:0,color:[0,0,0]},{value:.3,color:[230,0,0]},{value:.6,color:[255,210,0]},{value:1,color:[255,255,255]}]}),new It({stops:[{value:0,color:[255,0,255]},{value:1,color:[255,255,0]}]}),new It({stops:[{value:0,color:[0,128,102]},{value:1,color:[255,255,102]}]}),new It({stops:[{value:0,color:[255,0,0]},{value:1,color:[255,255,0]}]}),new It({stops:[{value:0,color:[0,0,255]},{value:1,color:[0,255,128]}]}),new It({stops:[{value:0,color:[0,0,0]},{value:.376,color:[84,84,116]},{value:.753,color:[169,200,200]},{value:1,color:[255,255,255]}]}),new It({stops:[{value:0,color:[0,0,0]},{value:.804,color:[255,160,102]},{value:1,color:[255,199,127]}]}),new It({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),new It({stops:[{value:0,color:[8,29,88]},{value:.125,color:[37,52,148]},{value:.25,color:[34,94,168]},{value:.375,color:[29,145,192]},{value:.5,color:[65,182,196]},{value:.625,color:[127,205,187]},{value:.75,color:[199,233,180]},{value:.875,color:[237,248,217]},{value:1,color:[255,255,217]}]}),new It({stops:[{value:0,color:[0,68,27]},{value:.125,color:[0,109,44]},{value:.25,color:[35,139,69]},{value:.375,color:[65,171,93]},{value:.5,color:[116,196,118]},{value:.625,color:[161,217,155]},{value:.75,color:[199,233,192]},{value:.875,color:[229,245,224]},{value:1,color:[247,252,245]}]}),new It({stops:[{value:0,color:[128,0,38]},{value:.125,color:[189,0,38]},{value:.25,color:[227,26,28]},{value:.375,color:[252,78,42]},{value:.5,color:[253,141,60]},{value:.625,color:[254,178,76]},{value:.75,color:[254,217,118]},{value:.875,color:[255,237,160]},{value:1,color:[255,255,204]}]}),new It({stops:[{value:0,color:[0,0,255]},{value:1,color:[255,0,0]}]}),new It({stops:[{value:0,color:[5,10,172]},{value:.35,color:[106,137,247]},{value:.5,color:[190,190,190]},{value:.6,color:[220,170,132]},{value:.7,color:[230,145,90]},{value:1,color:[178,10,28]}]}),new It({stops:[{value:0,color:[0,0,255]},{value:.1,color:[51,153,255]},{value:.2,color:[102,204,255]},{value:.3,color:[153,204,255]},{value:.4,color:[204,204,255]},{value:.5,color:[255,255,255]},{value:.6,color:[255,204,255]},{value:.7,color:[255,153,255]},{value:.8,color:[255,102,204]},{value:.9,color:[255,102,102]},{value:1,color:[255,0,0]}]}),new It({stops:[{value:0,color:[150,0,90]},{value:.125,color:[0,0,200]},{value:.25,color:[0,25,255]},{value:.375,color:[0,152,255]},{value:.5,color:[44,255,150]},{value:.625,color:[151,255,0]},{value:.75,color:[255,234,0]},{value:.875,color:[255,111,0]},{value:1,color:[255,0,0]}]}),new It({stops:[{value:0,color:[12,51,131]},{value:.25,color:[10,136,186]},{value:.5,color:[242,211,56]},{value:.75,color:[242,143,56]},{value:1,color:[217,30,30]}]}),new It({stops:[{value:0,color:[0,0,0]},{value:.2,color:[230,0,0]},{value:.4,color:[230,210,0]},{value:.7,color:[255,255,255]},{value:1,color:[160,200,255]}]}),new It({stops:[{value:0,color:[0,0,130]},{value:.1,color:[0,180,180]},{value:.2,color:[40,210,40]},{value:.4,color:[230,230,50]},{value:.6,color:[120,70,20]},{value:1,color:[255,255,255]}]}),new It({stops:[{value:0,color:[0,0,0]},{value:.15,color:[30,0,100]},{value:.4,color:[120,0,100]},{value:.6,color:[160,90,0]},{value:.8,color:[230,200,0]},{value:1,color:[255,250,220]}]}),new It({stops:[{value:0,color:[68,1,84]},{value:.13,color:[71,44,122]},{value:.25,color:[59,81,139]},{value:.38,color:[44,113,142]},{value:.5,color:[33,144,141]},{value:.63,color:[39,173,129]},{value:.75,color:[92,200,99]},{value:.88,color:[170,220,50]},{value:1,color:[253,231,37]}]}),new It({stops:[{value:0,color:[0,0,4]},{value:.13,color:[31,12,72]},{value:.25,color:[85,15,109]},{value:.38,color:[136,34,106]},{value:.5,color:[186,54,85]},{value:.63,color:[227,89,51]},{value:.75,color:[249,140,10]},{value:.88,color:[249,201,50]},{value:1,color:[252,255,164]}]}),new It({stops:[{value:0,color:[0,0,4]},{value:.13,color:[28,16,68]},{value:.25,color:[79,18,123]},{value:.38,color:[129,37,129]},{value:.5,color:[181,54,122]},{value:.63,color:[229,80,100]},{value:.75,color:[251,135,97]},{value:.88,color:[254,194,135]},{value:1,color:[252,253,191]}]}),new It({stops:[{value:0,color:[13,8,135]},{value:.13,color:[75,3,161]},{value:.25,color:[125,3,168]},{value:.38,color:[168,34,150]},{value:.5,color:[203,70,121]},{value:.63,color:[229,107,93]},{value:.75,color:[248,148,65]},{value:.88,color:[253,195,40]},{value:1,color:[240,249,33]}]}),new It({stops:[{value:0,color:[125,0,179]},{value:.13,color:[172,0,187]},{value:.25,color:[219,0,170]},{value:.38,color:[255,0,130]},{value:.5,color:[255,63,74]},{value:.63,color:[255,123,0]},{value:.75,color:[234,176,0]},{value:.88,color:[190,228,0]},{value:1,color:[147,255,0]}]}),new It({stops:[{value:0,color:[125,0,179]},{value:.13,color:[116,0,218]},{value:.25,color:[98,74,237]},{value:.38,color:[68,146,231]},{value:.5,color:[0,204,197]},{value:.63,color:[0,247,146]},{value:.75,color:[0,255,88]},{value:.88,color:[40,255,8]},{value:1,color:[147,255,0]}]}),new It({stops:[{value:0,color:[125,0,179]},{value:.1,color:[199,0,180]},{value:.2,color:[255,0,121]},{value:.3,color:[255,108,0]},{value:.4,color:[222,194,0]},{value:.5,color:[150,255,0]},{value:.6,color:[0,255,55]},{value:.7,color:[0,246,150]},{value:.8,color:[50,167,222]},{value:.9,color:[103,51,235]},{value:1,color:[124,0,186]}]}),new It({stops:[{value:0,color:[40,26,44]},{value:.13,color:[59,49,90]},{value:.25,color:[64,76,139]},{value:.38,color:[63,110,151]},{value:.5,color:[72,142,158]},{value:.63,color:[85,174,163]},{value:.75,color:[120,206,163]},{value:.88,color:[187,230,172]},{value:1,color:[253,254,204]}]}),new It({stops:[{value:0,color:[47,15,62]},{value:.13,color:[87,23,86]},{value:.25,color:[130,28,99]},{value:.38,color:[171,41,96]},{value:.5,color:[206,67,86]},{value:.63,color:[230,106,84]},{value:.75,color:[242,149,103]},{value:.88,color:[249,193,135]},{value:1,color:[254,237,176]}]}),new It({stops:[{value:0,color:[18,36,20]},{value:.13,color:[25,63,41]},{value:.25,color:[24,91,59]},{value:.38,color:[13,119,72]},{value:.5,color:[18,148,80]},{value:.63,color:[80,173,89]},{value:.75,color:[132,196,122]},{value:.88,color:[175,221,162]},{value:1,color:[215,249,208]}]}),new It({stops:[{value:0,color:[54,14,36]},{value:.13,color:[89,23,80]},{value:.25,color:[110,45,132]},{value:.38,color:[120,77,178]},{value:.5,color:[120,113,213]},{value:.63,color:[115,151,228]},{value:.75,color:[134,185,227]},{value:.88,color:[177,214,227]},{value:1,color:[230,241,241]}]}),new It({stops:[{value:0,color:[30,4,110]},{value:.13,color:[47,14,176]},{value:.25,color:[41,45,236]},{value:.38,color:[25,99,212]},{value:.5,color:[68,131,200]},{value:.63,color:[114,156,197]},{value:.75,color:[157,181,203]},{value:.88,color:[200,208,216]},{value:1,color:[241,237,236]}]}),new It({stops:[{value:0,color:[60,9,18]},{value:.13,color:[100,17,27]},{value:.25,color:[142,20,29]},{value:.38,color:[177,43,27]},{value:.5,color:[192,87,63]},{value:.63,color:[205,125,105]},{value:.75,color:[216,162,148]},{value:.88,color:[227,199,193]},{value:1,color:[241,237,236]}]}),new It({stops:[{value:0,color:[64,5,5]},{value:.13,color:[106,6,15]},{value:.25,color:[144,26,7]},{value:.38,color:[168,64,3]},{value:.5,color:[188,100,4]},{value:.63,color:[206,136,11]},{value:.75,color:[220,174,25]},{value:.88,color:[231,215,44]},{value:1,color:[248,254,105]}]}),new It({stops:[{value:0,color:[51,20,24]},{value:.13,color:[90,32,35]},{value:.25,color:[129,44,34]},{value:.38,color:[159,68,25]},{value:.5,color:[182,99,19]},{value:.63,color:[199,134,22]},{value:.75,color:[212,171,35]},{value:.88,color:[221,210,54]},{value:1,color:[225,253,75]}]}),new It({stops:[{value:0,color:[145,105,18]},{value:.13,color:[184,71,38]},{value:.25,color:[186,58,115]},{value:.38,color:[160,71,185]},{value:.5,color:[110,97,218]},{value:.63,color:[50,123,164]},{value:.75,color:[31,131,110]},{value:.88,color:[77,129,34]},{value:1,color:[145,105,18]}]}),new It({stops:[{value:0,color:[42,24,108]},{value:.13,color:[33,50,162]},{value:.25,color:[15,90,145]},{value:.38,color:[40,118,137]},{value:.5,color:[59,146,135]},{value:.63,color:[79,175,126]},{value:.75,color:[120,203,104]},{value:.88,color:[193,221,100]},{value:1,color:[253,239,154]}]}),new It({stops:[{value:0,color:[4,35,51]},{value:.13,color:[23,51,122]},{value:.25,color:[85,59,157]},{value:.38,color:[129,79,143]},{value:.5,color:[175,95,130]},{value:.63,color:[222,112,101]},{value:.75,color:[249,146,66]},{value:.88,color:[249,196,65]},{value:1,color:[232,250,91]}]}),new It({stops:[{value:0,color:[34,31,27]},{value:.13,color:[65,50,41]},{value:.25,color:[98,69,52]},{value:.38,color:[131,89,57]},{value:.5,color:[161,112,59]},{value:.63,color:[185,140,66]},{value:.75,color:[202,174,88]},{value:.88,color:[216,209,126]},{value:1,color:[233,246,171]}]}),new It({stops:[{value:0,color:[17,32,64]},{value:.13,color:[35,52,116]},{value:.25,color:[29,81,156]},{value:.38,color:[31,113,162]},{value:.5,color:[50,144,169]},{value:.63,color:[87,173,176]},{value:.75,color:[149,196,189]},{value:.88,color:[203,221,211]},{value:1,color:[254,251,230]}]}),new It({stops:[{value:0,color:[23,35,19]},{value:.13,color:[24,64,38]},{value:.25,color:[11,95,45]},{value:.38,color:[39,123,35]},{value:.5,color:[95,146,12]},{value:.63,color:[152,165,18]},{value:.75,color:[201,186,69]},{value:.88,color:[233,216,137]},{value:1,color:[255,253,205]}]}),new It({stops:[{value:0,color:[0,0,0]},{value:.07,color:[22,5,59]},{value:.13,color:[60,4,105]},{value:.2,color:[109,1,135]},{value:.27,color:[161,0,147]},{value:.33,color:[210,2,142]},{value:.4,color:[251,11,123]},{value:.47,color:[255,29,97]},{value:.53,color:[255,54,69]},{value:.6,color:[255,85,46]},{value:.67,color:[255,120,34]},{value:.73,color:[255,157,37]},{value:.8,color:[241,191,57]},{value:.87,color:[224,220,93]},{value:.93,color:[218,241,142]},{value:1,color:[227,253,198]}]}),new It({stops:[{value:0,color:[0,32,77,255]},{value:.125,color:[5,54,110,255]},{value:.25,color:[65,77,108,255]},{value:.375,color:[97,100,111,255]},{value:.5,color:[125,124,121,255]},{value:.625,color:[156,149,120,255]},{value:.75,color:[190,175,111,255]},{value:.875,color:[225,204,94,255]},{value:1,color:[255,235,70,255]}]}),new It({stops:[{value:0,color:[48,18,59,255]},{value:.125,color:[70,107,227,255]},{value:.25,color:[40,187,236,255]},{value:.375,color:[49,242,153,255]},{value:.5,color:[162,252,60,255]},{value:.625,color:[237,208,58,255]},{value:.75,color:[251,128,34,255]},{value:.875,color:[210,49,5,255]},{value:1,color:[122,4,3,255]}]}),new It({stops:[{value:0,color:[250,235,221,0]},{value:.133,color:[250,235,221,255]},{value:.266,color:[246,170,130,255]},{value:.4,color:[240,96,67,255]},{value:.533,color:[203,27,79,255]},{value:.666,color:[132,30,90,255]},{value:.8,color:[63,27,68,255]},{value:1,color:[3,5,26,255]}]}),new It({stops:[{value:0,color:[11,4,5,255]},{value:.125,color:[43,28,53,255]},{value:.25,color:[62,53,107,255]},{value:.375,color:[59,86,152,255]},{value:.5,color:[53,123,162,255]},{value:.625,color:[53,158,170,255]},{value:.75,color:[73,193,173,255]},{value:.875,color:[150,221,181,255]},{value:1,color:[222,245,229,255]}]});fM();const Vf=[{id:"czubereki",category:"ukrainska",title:"Czebureki, chaczapuri, bilaszy",subtitle:"Kuchania ukraińska",address:"Park praski 01, 03-402 Warszawa",phone:"797-863-182",website:"",googleMaps:"https://www.google.com/maps/place/Czebureki/@52.8210271,17.7380807,7z/data=!4m10!1m2!2m1!1sczeburek+bilaszy!3m6!1s0x471ecd6d101d96d1:0x7188e7de441fb816!8m2!3d52.2527061!4d21.0294178!15sChBjemVidXJlayBiaWxhc3p5WhIiEGN6ZWJ1cmVrIGJpbGFzenmSARRmYXN0X2Zvb2RfcmVzdGF1cmFudJoBI0NoWkRTVWhOTUc5blMwVkpRMEZuU1VSRWEwOTZVMGwzRUFF4AEA!16s%2Fg%2F11fm_snlkg?entry=ttu",youtube:"https://www.youtube.com/watch?v=E3odGfugOKc",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/czubereki.png?alt=media&token=91d3bd46-4228-4889-888c-69655d8d77fc",latitude:52.252628,longitude:21.029509},{id:"barKantyna",category:"polska",title:"Bar KANTYNA",subtitle:"Kuchania polska/wojskowa",address:"Igołomska 31, 31-983 Kraków",phone:"",website:"https://www.facebook.com/barkantyna",googleMaps:"https://www.google.com/maps/place/Bar+KANTYNA/@50.0760822,20.1467722,18.75z/data=!4m6!3m5!1s0x4716461b75180f73:0x594ecc1c195614a9!8m2!3d50.0763717!4d20.1471332!16s%2Fg%2F11f5hly38x?entry=ttu",youtube:"https://www.youtube.com/watch?v=ysajqVdMpYE",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/barKantyna.png?alt=media&token=7430ea04-9568-476f-b770-4cf3694d7f99",latitude:50.076236,longitude:20.14715},{id:"domsTrawy",category:"amerykanska",title:"DOM sTRAWY",subtitle:"Kuchania amerykańska",address:"Tarnowska 40, 25-394 Kielce",phone:"607-540-620",website:"http://domstrawy.pl/",googleMaps:"https://www.google.com/maps/place/DOM+sTRAWY/@50.8588814,20.6381072,17z/data=!3m1!4b1!4m6!3m5!1s0x4718271ac65d076d:0x1035db3a30240b1f!8m2!3d50.8588814!4d20.6381072!16s%2Fg%2F11rwqqgs6z?entry=ttu",youtube:"https://www.youtube.com/watch?v=M1w4N17lnh4",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/domStrawy.png?alt=media&token=61d61a6a-9dd9-4e11-bb1c-87040b9a5f1a",latitude:50.858846,longitude:20.638403},{id:"zapiekankiAdamus",category:"polska",title:"Zapiekanki Adamus",subtitle:"Kuchania polska",address:"Władysława Sikorskiego 11, 32-050 Skawina",phone:"12-276-20-75",website:"https://www.zapiekankiadamus.pl/",googleMaps:"https://www.google.com/maps/place/Zapiekanki+Adamus/@49.9766782,19.8197595,17z/data=!3m1!4b1!4m6!3m5!1s0x47165df3a2ab5b6f:0x1b5b3f1df6b4cc6e!8m2!3d49.9766782!4d19.8223344!16s%2Fg%2F1hf0704g4?entry=ttu",youtube:"https://www.youtube.com/watch?v=gcvveo0zZBc",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/zapiekankiAdamus.png?alt=media&token=9035c718-e970-4e2a-a40f-72373de37186",latitude:49.976788,longitude:19.82226},{id:"zapiekankiBilgoraj",category:"polska",title:"Zapiekanki w Bilgoraju",subtitle:"Kuchania polska",address:"Tadeusza Kościuszki 79, 23-400 Biłgoraj",phone:"",website:"",googleMaps:"https://www.google.com/maps/place/Zapiekanki/@50.5317838,22.7191173,17.75z/data=!4m15!1m8!3m7!1s0x4723355490a92515:0xe0d361f3a39adbac!2sZapiekanki!8m2!3d50.5321864!4d22.7198235!10e1!16s%2Fg%2F11v4lxmsxy!3m5!1s0x4723355490a92515:0xe0d361f3a39adbac!8m2!3d50.5321864!4d22.7198235!16s%2Fg%2F11v4lxmsxy?entry=ttu",youtube:"https://www.youtube.com/watch?v=CUP0IlOyhAQ",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/zapiekankiBilgoraj.png?alt=media&token=ce05b630-2a2f-4350-9934-9ff82c0963c2",latitude:50.532214,longitude:22.719633},{id:"slaskaProhibicja",category:"polska",title:"Śląska Prohibicja",subtitle:"Kuchania polska",address:"Krawczyka 1, 40-423 Katowice",phone:"32-723-28-99",website:"https://slaskaprohibicja.pl/",googleMaps:"https://www.google.com/maps/place/%C5%9Al%C4%85ska+Prohibicja/@50.2436485,19.079971,17z/data=!3m1!4b1!4m6!3m5!1s0x4716cf8c1b89cb0f:0xa7a6844a6499e6bf!8m2!3d50.2436485!4d19.079971!16s%2Fg%2F11d_8ck8mn?entry=ttu",youtube:"https://www.youtube.com/watch?v=ArkjDgSBF8M",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/slaskaProhibicja.png?alt=media&token=1add60bc-4a14-4be6-9b8d-83be480915f9",latitude:50.243522,longitude:19.079916},{id:"barKukuryku",category:"polska",title:"Bar Mleczny KukuRyku",subtitle:"Kuchania polska",address:"Wilimowskiego 6, 40-061 Katowice",phone:"881-799-105",website:"http://www.barmlecznykukuryku.pl/",googleMaps:"https://www.google.com/maps/place/Bar+Mleczny+KukuRyku/@50.2553652,19.0101222,17z/data=!3m1!4b1!4m6!3m5!1s0x4716cf1f0fae3ca7:0xe7cdff632c633a6f!8m2!3d50.2553652!4d19.0101222!16s%2Fg%2F11fk8c4j3x?entry=ttu",youtube:"https://www.youtube.com/watch?v=D-1zlC5aXT0",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/barKukuryku.png?alt=media&token=190fc75e-b811-4733-ab4f-3674f2fc7bf3",latitude:50.255285,longitude:19.010111},{id:"szamkaKebab",category:"turecka",title:"Szamka | Kebab",subtitle:"Kuchnia turecka",address:"Mickiewicza 1, 62-300 Września",phone:"609-930-842",website:"https://www.szamkawrzesnia.pl/",googleMaps:"https://www.google.com/maps/place/Szamka+%7C+Kebab/@52.3245656,17.5639971,17z/data=!4m6!3m5!1s0x4704e9981ff8febb:0x39328f92e8f2a65e!8m2!3d52.3245263!4d17.5648876!16s%2Fg%2F11j1g2l0b2?entry=ttu",youtube:"https://www.youtube.com/watch?v=fvCh5i8dA-Q",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/szamkaKebab.png?alt=media&token=9dbd7ca4-1625-4ae2-9b33-9a3b8cdce6f4",latitude:52.324511,longitude:17.564768},{id:"zapiekankiPaniAni",category:"polska",title:"Zapiekanki Pani Ani",subtitle:"Kuchania polska",address:"Mieszka I 27a, 62-200 Gniezno",phone:"",website:"",googleMaps:"https://www.google.com/maps/place/Zapiekanki/@52.5324777,17.598315,17z/data=!3m1!4b1!4m6!3m5!1s0x4704910dee71df9d:0x4912d76677fc377!8m2!3d52.5324777!4d17.598315!16s%2Fg%2F11dxm8ksqk?entry=ttu",youtube:"https://www.youtube.com/watch?v=8elt86N50Kw",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/zapiekankiPaniAni.png?alt=media&token=edea33b0-ccf8-40ea-be4a-113d41f6d1e8",latitude:52.53245,longitude:17.598152},{id:"chefNaKolach",category:"burger",title:"Chef na kołach",subtitle:"Kuchania amerykańska",address:"Podzamcze, 87-200 Wąbrzeźno",phone:"724-398-964",website:"",googleMaps:"https://www.google.com/maps/place/Chef+na+ko%C5%82ach/@53.2851267,18.9387407,17z/data=!3m1!4b1!4m6!3m5!1s0x471d2bd61f23c477:0x95d06d720c16dae1!8m2!3d53.2851267!4d18.9387407!16s%2Fg%2F11q2xkl4py?entry=ttu",youtube:"https://www.youtube.com/watch?v=YN0dvxH4bAg&t=761s",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/chefNaKolach.png?alt=media&token=07e5ece0-c281-4877-9596-f18574c73e49",latitude:53.285105,longitude:18.938681},{id:"burgerMeister",category:"amerykanska",title:"Burgermeister",subtitle:"Kuchania amerykańska",address:"Dircksenstraße 113, 10178 Berlin, Niemcy",phone:"+49 30-678-268-20",website:"http://www.burgermeister.com/",googleMaps:"https://www.google.com/maps/place/Burgermeister+Alexanderplatz/@52.5203627,13.4131421,17z/data=!3m1!4b1!4m6!3m5!1s0x47a84f3c22892d55:0xd95d5cd7eb147184!8m2!3d52.5203627!4d13.4131421!16s%2Fg%2F11t3x_j0vk?entry=ttu",youtube:"https://www.youtube.com/watch?v=DeZ5Ai4H2xA",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/burgerMeister.png?alt=media&token=7ea22ce4-d4ba-46ad-8d90-66acb44408d6",latitude:52.520352,longitude:13.413112},{id:"barMlecznyJaros",category:"polska",title:"Bar Mleczny Jaros",subtitle:"Kuchania polska",address:"Jagiellońska 38, 80-367 Gdańsk",phone:"",website:"https://m.facebook.com/permalink.php?story_fbid=133387804971372&id=110130200630466",googleMaps:"https://www.google.com/maps/place/Bar+mleczny+Jaros/@54.4131327,18.5984808,17z/data=!3m1!4b1!4m6!3m5!1s0x46fd0b293cd3c0db:0x4d91fe00f2dc3cfc!8m2!3d54.4131327!4d18.5984808!16s%2Fg%2F11c0r5rcnq?entry=ttu",youtube:"https://www.youtube.com/watch?v=lQJUlmTGpQE",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/barMlecznyJaros.png?alt=media&token=f00383f9-b3f7-40be-9324-eb9bf0d71f28",latitude:54.413238,longitude:18.598047},{id:"hellskiBurger",category:"amerykanska",title:"HELLski Burger",subtitle:"Kuchania amerykańska",address:"Wiejska 109, 84-150 Hel",phone:"539-231-243",website:"https://www.facebook.com/HELLskiBurger/",googleMaps:"https://www.google.com/maps/place/HELLski+Burger/@54.6029726,18.8042298,17z/data=!3m1!4b1!4m6!3m5!1s0x46fd05e282a05703:0x5b1b29565322b0d!8m2!3d54.6029726!4d18.8042298!16s%2Fg%2F11hfy0nt2l?entry=ttu",youtube:"https://www.youtube.com/watch?v=4Gwwdk_QF3M",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/hellskiBurger.png?alt=media&token=353ee5c1-1b3e-4e96-bcf2-95d605286995",latitude:54.602977,longitude:18.804015},{id:"fazirKebab",category:"turecka",title:"Fazir kebab falafel",subtitle:"Kuchania turecka",address:"Józefa Piłsudskiego 40, 05-410 Józefów",phone:"782-544-139",website:"https://www.facebook.com/FazirKebab/",googleMaps:"https://www.google.com/maps/place/Fazir+kebab+falafel/@52.1476184,21.2245048,17z/data=!3m1!4b1!4m6!3m5!1s0x47192b7cf7cac355:0x600e20c0e580d8bc!8m2!3d52.1476184!4d21.2245048!16s%2Fg%2F11ghzsw9tg?entry=ttu",youtube:"https://www.youtube.com/watch?v=KHDBR8QSu2E&t=383s",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/fazirKebab.png?alt=media&token=cec49526-328c-433a-b945-a0d4740c5a88",latitude:52.147704,longitude:21.224647},{id:"kurczakZRozna",category:"polska",title:"Kurczak z rożna na Dolnej",subtitle:"Kuchania polska",address:"Dolna 2A, 00-774 Warszawa",phone:"882-947-555",website:"https://akur.at/",googleMaps:"https://www.google.com/maps/place/Kurczak+z+ro%C5%BCna+na+Dolnej/@52.2018841,21.0347823,17z/data=!3m1!4b1!4m6!3m5!1s0x471ecd251089ef71:0x2661c17194883d6e!8m2!3d52.2018841!4d21.0347823!16s%2Fg%2F11c5g83bp8?entry=ttu",youtube:"https://www.youtube.com/watch?v=lffmCKTrDo0",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/kurczakZRo%C5%BCna.png?alt=media&token=c198cbef-5799-4bdf-99c6-c2786d9c910c",latitude:52.201777,longitude:21.034856},{id:"senorLucas",category:"meksykanska",title:"Señor Lucas Taquería",subtitle:"Kuchania meksykańska",address:"Poznańska 26, 00-684 Warszawa",phone:"690-590-610",website:"https://www.facebook.com/senorlucasmexican/",googleMaps:"https://www.google.com/maps/place/Se%C3%B1or+Lucas+Taquer%C3%ADa/@52.2267735,21.0111552,17z/data=!3m1!4b1!4m6!3m5!1s0x471ecd4dd98ae9d9:0x27685bb2d55387c6!8m2!3d52.2267735!4d21.0111552!16s%2Fg%2F11kmwvdsj5?entry=ttu",youtube:"https://www.youtube.com/watch?v=0zVJKtICbB4",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/senorLucas.png?alt=media&token=80f8cbaa-36c5-4fa9-a6c3-d8e7d4b5d90b",latitude:52.201777,longitude:21.034856},{id:"pyzyFlakiGorace",category:"polska",title:"Pyzy, Flaki Gorące!",subtitle:"Kuchania polska",address:"Brzeska 29/31, 03-739 Warszawa",phone:"606-294-499",website:"https://www.pyzyflakigorace.pl/",googleMaps:"https://www.google.com/maps/place/Pyzy,+Flaki+Gor%C4%85ce!/@52.2528996,21.0412598,17z/data=!3m1!4b1!4m6!3m5!1s0x471ecc47eab857bf:0x314660c3d0799146!8m2!3d52.2528996!4d21.0412598!16s%2Fg%2F11cn9lbqsj?entry=ttu",youtube:"https://www.youtube.com/watch?v=oy44sJxYIKs",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/pyzyFlakiGor%C4%85ce.png?alt=media&token=089f978c-9de2-4ba0-9762-4a12f566418a",latitude:52.252964,longitude:21.041384},{id:"sirinBodrum",category:"turecka",title:"Sirin Bodrum Döner Kebab",subtitle:"Kuchania turecka",address:"al. Jana Pawła II 18, 00-116 Warszawa",phone:"780-641-041",website:"https://www.instagram.com/sirindonerkebab/",googleMaps:"https://www.google.com/maps/place/Sirin+Bodrum+D%C3%B6ner+Kebab/@52.2339175,20.9985659,17z/data=!3m1!4b1!4m6!3m5!1s0x471ecd3f1dc04e13:0x61df34b43a6bed1a!8m2!3d52.2339175!4d20.9985659!16s%2Fg%2F11y1brkhkk?entry=ttu",youtube:"https://www.youtube.com/watch?v=m3MOkp6LSvc",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/sirinBodrum.png?alt=media&token=bbbc6dfa-b0e4-4a51-8670-f7ab04807e73",latitude:52.233901,longitude:20.998434},{id:"eleganceRestauracja",category:"turecka",title:"Sirin Bodrum Döner Kebab",subtitle:"Kuchania turecka",address:"Karolkowa 28a/lok. U3, 01-207 Warszawa",phone:"577-276-911",website:"https://linktr.ee/elegancerestauracja",googleMaps:"https://www.google.com/maps/place/Elegance+Restauracja/@52.2311692,20.9780393,17z/data=!3m1!4b1!4m6!3m5!1s0x471ecde5931c6ba7:0x225edb27f1c7201d!8m2!3d52.2311692!4d20.9780393!16s%2Fg%2F11s5fshm02?entry=ttu",youtube:"https://www.youtube.com/watch?v=HCI7GcbYCrc",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/eleganceRestauracja.png?alt=media&token=40049dfb-7d2a-4a73-825f-2524851aec81",latitude:52.231125,longitude:20.977851},{id:"rurki",category:"polska",title:"Rurki z prawdziwą bitą śmietaną",subtitle:"Kuchania polska",address:"Wolska 50a/paw.7 B, 01-187 Warszawa",phone:"603-348-316",website:"https://www.facebook.com/people/Wolskie-Rurki-z-Prawdziw%C4%85-Bit%C4%85-%C5%9Amietan%C4%85/100049241751807/",googleMaps:"https://www.google.com/maps/place/Rurki+z+prawdziw%C4%85+bit%C4%85+%C5%9Bmietan%C4%85/@52.2340758,20.9682963,17z/data=!3m1!4b1!4m6!3m5!1s0x471ecbd505f3a8e3:0xe8574efa1d76e759!8m2!3d52.2340758!4d20.9682963!16s%2Fg%2F11hf84xhp5?entry=ttu",youtube:"https://www.youtube.com/watch?v=Z7chnfu8cJY",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/rurki.png?alt=media&token=921a8d70-69d6-4206-a01a-f7a722724f49",latitude:52.234013,longitude:20.968336},{id:"tantuni",category:"turecka",title:"Tantuni Kebab",subtitle:"Kuchania turkish",address:"Wolska 44a, 01-187 Warszawa",phone:"603-348-316",website:"https://www.facebook.com/people/Wolskie-Rurki-z-Prawdziw%C4%85-Bit%C4%85-%C5%9Amietan%C4%85/100049241751807/",googleMaps:"https://www.google.com/maps/place/TANTUN%C4%B0+KEBAB/@52.2342638,20.969816,19.25z/data=!4m6!3m5!1s0x471ecb7624ac367d:0xbec29bdb08007fa!8m2!3d52.2344118!4d20.9698039!16s%2Fg%2F11kr76lqqc?entry=ttu",youtube:"https://www.youtube.com/watch?v=HCI7GcbYCrc",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/tantuni.png?alt=media&token=462c1171-15ee-4656-9000-7388ba1ab7fc",latitude:52.234296,longitude:20.969827},{id:"barWaga",category:"polska",title:"Bar Waga",subtitle:"Kuchania polska",address:"Obozowa 82A/lok 15, 01-434 Warszawa",phone:"662-934-705",website:"https://www.facebook.com/profile.php?id=100093054352680",googleMaps:"https://www.google.com/maps/place/Bar+Waga/@52.2473272,20.9469746,17z/data=!3m1!4b1!4m6!3m5!1s0x471ecc817966ef13:0x73fbc9147e5ec5f!8m2!3d52.2473272!4d20.9469746!16s%2Fg%2F11g86lrkr_?entry=ttu",youtube:"https://www.youtube.com/watch?v=0ksqvzDROUE",images:{image1:"https://picsum.photos/750/320",image2:"https://picsum.photos/750/320",image3:"https://picsum.photos/750/320"},mainImage:"https://firebasestorage.googleapis.com/v0/b/mualaapp-32feb.appspot.com/o/barWaga.png?alt=media&token=3887fac1-589d-4831-be98-acb0e504d87f",latitude:52.247096,longitude:20.947053}];function Hh(){return Hh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u])}return e},Hh.apply(this,arguments)}var AM=function(t,a){a===void 0&&(a=!0),Pe.useEffect(function(){if(a){var u=function(x){x.key==="Escape"&&t(x)};return document.addEventListener("keyup",u),function(){a&&document.removeEventListener("keyup",u)}}},[t,a])},MM=function(t,a){a===void 0&&(a=!0),Pe.useEffect(function(){if(a){var u=function(){t()};return window.addEventListener("resize",u),function(){a&&window.removeEventListener("resize",u)}}},[t,a])},zM=function(t,a,u){u===void 0&&(u=!0),Pe.useEffect(function(){if(u){var c=function(g){var h=Array.isArray(t)?t:[t],C=!1;h.forEach(function(D){if(!D.current||D.current.contains(g.target)){C=!0;return}}),g.stopPropagation(),C||a(g)};return document.addEventListener("mousedown",c),document.addEventListener("touchstart",c),function(){u&&(document.removeEventListener("mousedown",c),document.removeEventListener("touchstart",c))}}},[t,a,u])},LM=function(t,a){a===void 0&&(a=!0),Pe.useEffect(function(){if(a){var u=function(x){if(x.keyCode===9){var g,h=t==null||(g=t.current)===null||g===void 0?void 0:g.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),C=Array.prototype.slice.call(h);if(C.length===1){x.preventDefault();return}var D=C[0],$=C[C.length-1];x.shiftKey&&document.activeElement===D?(x.preventDefault(),$.focus()):document.activeElement===$&&(x.preventDefault(),D.focus())}};return document.addEventListener("keydown",u),function(){a&&document.removeEventListener("keydown",u)}}},[t,a])},RM=typeof window<"u"?Pe.useLayoutEffect:Pe.useEffect,Eh={popupContent:{tooltip:{position:"absolute",zIndex:999},modal:{position:"relative",margin:"auto"}},popupArrow:{height:"8px",width:"16px",position:"absolute",background:"transparent",color:"#FFF",zIndex:-1},overlay:{tooltip:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",zIndex:999},modal:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",display:"flex",zIndex:999}}},DM=["top left","top center","top right","right top","right center","right bottom","bottom left","bottom center","bottom right","left top","left center","left bottom"],OM=function(t,a,u,c,x){var g=x.offsetX,h=x.offsetY,C=c?8:0,D=u.split(" "),$=t.top+t.height/2,M=t.left+t.width/2,L=a.height,ce=a.width,pe=$-L/2,se=M-ce/2,Ee="",te="0%",H="0%";switch(D[0]){case"top":pe-=L/2+t.height/2+C,Ee="rotate(180deg)  translateX(50%)",te="100%",H="50%";break;case"bottom":pe+=L/2+t.height/2+C,Ee="rotate(0deg) translateY(-100%) translateX(-50%)",H="50%";break;case"left":se-=ce/2+t.width/2+C,Ee=" rotate(90deg)  translateY(50%) translateX(-25%)",H="100%",te="50%";break;case"right":se+=ce/2+t.width/2+C,Ee="rotate(-90deg)  translateY(-150%) translateX(25%)",te="50%";break}switch(D[1]){case"top":pe=t.top,te=t.height/2+"px";break;case"bottom":pe=t.top-L+t.height,te=L-t.height/2+"px";break;case"left":se=t.left,H=t.width/2+"px";break;case"right":se=t.left-ce+t.width,H=ce-t.width/2+"px";break}return pe=D[0]==="top"?pe-h:pe+h,se=D[0]==="left"?se-g:se+g,{top:pe,left:se,transform:Ee,arrowLeft:H,arrowTop:te}},FM=function(t){var a={top:0,left:0,width:window.innerWidth,height:window.innerHeight};if(typeof t=="string"){var u=document.querySelector(t);u!==null&&(a=u.getBoundingClientRect())}return a},BM=function(t,a,u,c,x,g){var h=x.offsetX,C=x.offsetY,D={arrowLeft:"0%",arrowTop:"0%",left:0,top:0,transform:"rotate(135deg)"},$=0,M=FM(g),L=Array.isArray(u)?u:[u];for((g||Array.isArray(u))&&(L=[].concat(L,DM));$<L.length;){D=OM(t,a,L[$],c,{offsetX:h,offsetY:C});var ce={top:D.top,left:D.left,width:a.width,height:a.height};if(ce.top<=M.top||ce.left<=M.left||ce.top+ce.height>=M.top+M.height||ce.left+ce.width>=M.left+M.width)$++;else break}return D},NM=0,jM=function(){var t=document.getElementById("popup-root");return t===null&&(t=document.createElement("div"),t.setAttribute("id","popup-root"),document.body.appendChild(t)),t},UM=Pe.forwardRef(function(e,t){var a=e.trigger,u=a===void 0?null:a,c=e.onOpen,x=c===void 0?function(){}:c,g=e.onClose,h=g===void 0?function(){}:g,C=e.defaultOpen,D=C===void 0?!1:C,$=e.open,M=$===void 0?void 0:$,L=e.disabled,ce=L===void 0?!1:L,pe=e.nested,se=pe===void 0?!1:pe,Ee=e.closeOnDocumentClick,te=Ee===void 0?!0:Ee,H=e.repositionOnResize,ne=H===void 0?!0:H,be=e.closeOnEscape,Ae=be===void 0?!0:be,le=e.on,Me=le===void 0?["click"]:le,$e=e.contentStyle,Ie=$e===void 0?{}:$e,ze=e.arrowStyle,Be=ze===void 0?{}:ze,ut=e.overlayStyle,Ke=ut===void 0?{}:ut,Qe=e.className,nr=Qe===void 0?"":Qe,Kt=e.position,Ft=Kt===void 0?"bottom center":Kt,et=e.modal,yt=et===void 0?!1:et,bt=e.lockScroll,Et=bt===void 0?!1:bt,jt=e.arrow,er=jt===void 0?!0:jt,cr=e.offsetX,hr=cr===void 0?0:cr,gr=e.offsetY,en=gr===void 0?0:gr,En=e.mouseEnterDelay,ao=En===void 0?100:En,Bi=e.mouseLeaveDelay,Uo=Bi===void 0?100:Bi,dr=e.keepTooltipInside,vn=dr===void 0?!1:dr,yr=e.children,Ni=Pe.useState(M||D),ke=Ni[0],ui=Ni[1],xn=Pe.useRef(null),Dt=Pe.useRef(null),Xt=Pe.useRef(null),Xn=Pe.useRef(null),ji=Pe.useRef("popup-"+ ++NM),qr=yt?!0:!u,dn=Pe.useRef(0);RM(function(){return ke?(Xn.current=document.activeElement,Rt(),Ne(),ci()):Ui(),function(){clearTimeout(dn.current)}},[ke]),Pe.useEffect(function(){typeof M=="boolean"&&(M?tn():pn())},[M,ce]);var tn=function(G){ke||ce||(ui(!0),setTimeout(function(){return x(G)},0))},pn=function(G){var F;!ke||ce||(ui(!1),qr&&((F=Xn.current)===null||F===void 0||F.focus()),setTimeout(function(){return h(G)},0))},Ti=function(G){G==null||G.stopPropagation(),ke?pn(G):tn(G)},je=function(G){clearTimeout(dn.current),dn.current=setTimeout(function(){return tn(G)},ao)},br=function(G){G==null||G.preventDefault(),Ti()},Zr=function(G){clearTimeout(dn.current),dn.current=setTimeout(function(){return pn(G)},Uo)},ci=function(){qr&&Et&&(document.getElementsByTagName("body")[0].style.overflow="hidden")},Ui=function(){qr&&Et&&(document.getElementsByTagName("body")[0].style.overflow="auto")},Ne=function(){var G,F=Dt==null||(G=Dt.current)===null||G===void 0?void 0:G.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),B=Array.prototype.slice.call(F)[0];B==null||B.focus()};Pe.useImperativeHandle(t,function(){return{open:function(){tn()},close:function(){pn()},toggle:function(){Ti()}}});var Rt=function(){if(!(qr||!ke)&&!(!(xn!=null&&xn.current)||!(xn!=null&&xn.current)||!(Dt!=null&&Dt.current))){var G=xn.current.getBoundingClientRect(),F=Dt.current.getBoundingClientRect(),B=BM(G,F,Ft,er,{offsetX:hr,offsetY:en},vn);if(Dt.current.style.top=B.top+window.scrollY+"px",Dt.current.style.left=B.left+window.scrollX+"px",er&&Xt.current){var j,Q;Xt.current.style.transform=B.transform,Xt.current.style.setProperty("-ms-transform",B.transform),Xt.current.style.setProperty("-webkit-transform",B.transform),Xt.current.style.top=((j=Be.top)===null||j===void 0?void 0:j.toString())||B.arrowTop,Xt.current.style.left=((Q=Be.left)===null||Q===void 0?void 0:Q.toString())||B.arrowLeft}}};AM(pn,Ae),LM(Dt,ke&&qr),MM(Rt,ne),zM(u?[Dt,xn]:[Dt],pn,te&&!se);var Ct=function(){for(var G={key:"T",ref:xn,"aria-describedby":ji.current},F=Array.isArray(Me)?Me:[Me],B=0,j=F.length;B<j;B++)switch(F[B]){case"click":G.onClick=Ti;break;case"right-click":G.onContextMenu=br;break;case"hover":G.onMouseEnter=je,G.onMouseLeave=Zr;break;case"focus":G.onFocus=je,G.onBlur=Zr;break}if(typeof u=="function"){var Q=u(ke);return!!u&&Fn.cloneElement(Q,G)}return!!u&&Fn.cloneElement(u,G)},rn=function(){var G=qr?Eh.popupContent.modal:Eh.popupContent.tooltip,F={className:"popup-content "+(nr!==""?nr.split(" ").map(function(B){return B+"-content"}).join(" "):""),style:Hh({},G,Ie,{pointerEvents:"auto"}),ref:Dt,onClick:function(j){j.stopPropagation()}};return!yt&&Me.indexOf("hover")>=0&&(F.onMouseEnter=je,F.onMouseLeave=Zr),F},nn=function(){return Fn.createElement("div",Object.assign({},rn(),{key:"C",role:qr?"dialog":"tooltip",id:ji.current}),er&&!qr&&Fn.createElement("div",{ref:Xt,style:Eh.popupArrow},Fn.createElement("svg",{"data-testid":"arrow",className:"popup-arrow "+(nr!==""?nr.split(" ").map(function(G){return G+"-arrow"}).join(" "):""),viewBox:"0 0 32 16",style:Hh({position:"absolute"},Be)},Fn.createElement("path",{d:"M16 0l16 16H0z",fill:"currentcolor"}))),yr&&typeof yr=="function"?yr(pn,ke):yr)},zt=!(Me.indexOf("hover")>=0),kn=qr?Eh.overlay.modal:Eh.overlay.tooltip,Yn=[zt&&Fn.createElement("div",{key:"O","data-testid":"overlay","data-popup":qr?"modal":"tooltip",className:"popup-overlay "+(nr!==""?nr.split(" ").map(function(Ht){return Ht+"-overlay"}).join(" "):""),style:Hh({},kn,Ke,{pointerEvents:te&&se||qr?"auto":"none"}),onClick:te&&se?pn:void 0,tabIndex:-1},qr&&nn()),!qr&&nn()];return Fn.createElement(Fn.Fragment,null,Ct(),ke&&uS.createPortal(Yn,jM()))}),cT={exports:{}},VM="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",$M=VM,HM=$M;function hT(){}function dT(){}dT.resetWarningCache=hT;var WM=function(){function e(u,c,x,g,h,C){if(C!==HM){var D=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw D.name="Invariant Violation",D}}e.isRequired=e;function t(){return e}var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:dT,resetWarningCache:hT};return a.PropTypes=a,a};cT.exports=WM();var qM=cT.exports;const Lh=rc(qM);function ZM(e){return Fi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M456.69 421.39 362.6 327.3a173.81 173.81 0 0 0 34.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 0 0 327.3 362.6l94.09 94.09a25 25 0 0 0 35.3-35.3zM97.92 222.72a124.8 124.8 0 1 1 124.8 124.8 124.95 124.95 0 0 1-124.8-124.8z"},child:[]}]})(e)}function pT(e){var t,a,u="";if(typeof e=="string"||typeof e=="number")u+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(a=pT(e[t]))&&(u&&(u+=" "),u+=a);else for(t in e)e[t]&&(u&&(u+=" "),u+=t);return u}function _d(){for(var e,t,a=0,u="";a<arguments.length;)(e=arguments[a++])&&(t=pT(e))&&(u&&(u+=" "),u+=t);return u}function fT(e){return function(t){e.forEach(function(a){typeof a=="function"?a(t):a!=null&&(a.current=t)})}}let GM="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",KM=(e=21)=>{let t="",a=e;for(;a--;)t+=GM[Math.random()*64|0];return t};const XM={pointerEvents:"none"},H_=({locked:e,style:t})=>e?{...XM,...t}:t,mT=e=>Pe.useMemo(()=>{if(e){let t="icon";e.type==="img"?t="image":e.type==="svg"&&(t="svg");const a=new RegExp(`\\b${t}\\b`);return{iconType:e.props["data-type"]||t,icon:e.props.className&&!a.test(e.props.className)?Pe.cloneElement(e,{...e.props,className:_d(e.props.className,t)}):e}}return{}},[e]),YM=(e,t)=>t?!1:!e||e==="smooth"||e==="pulse",W_=(e,t)=>{const{animation:a,bigger:u,locked:c,plain:x,shape:g,variant:h,iconType:C,hasFocus:D}=e;return{"p-default":!t&&YM(a,C),"p-bigger":u,"p-locked":c,"p-plain":x,"p-has-focus":D,[`p-${a}`]:a,[`p-${g}`]:g,[`p-${h}`]:h,[`p-${C}`]:C}},Aw=e=>typeof e=="boolean",dy=e=>e==null,JM=e=>e==="indeterminate",q_=e=>{let{checked:t,state:a,setState:u,value:c,defaultValue:x,...g}=e;return u&&((Aw(a)||JM(a))&&!Aw(t)&&dy(t)?t=!!a:Array.isArray(a)?t=a.includes(c):dy(t)&&(t=Object.is(a,c)),dy(c)&&(c=x||"")),{checked:t,value:c,state:a,...g}},QM="pcr_",e3=()=>Pe.useRef(QM+KM(8)).current,gT=e=>{const t=e3(),{locked:a,color:u,variant:c,animation:x,children:g,style:h,id:C=t,className:D,bigger:$,hasFocus:M,...L}=e;return{locked:a,color:u,variant:c,animation:x,children:g,id:C,className:D,bigger:$,style:h,hasFocus:M,htmlProps:L}},yT=e=>{const{shape:t,plain:a,icon:u,indeterminate:c,hasFocus:x,...g}=e;return{shape:t,plain:a,icon:u,indeterminate:c,...gT(g)}},vm=({color:e,icon:t,id:a,children:u,...c})=>Pe.createElement("div",{className:_d("state",e&&`p-${e}`),...c},t,Pe.createElement("label",{htmlFor:a},u));vm.displayName="State";const t3=({checked:e,state:t,indeterminate:a})=>{const[u,c]=Pe.useState(!1),x=Pe.useRef(null);return Pe.useEffect(()=>{t!==void 0&&x.current&&c(t==="indeterminate")},[t]),Pe.useEffect(()=>{t!=="indeterminate"&&x.current&&typeof a<"u"&&(x.current.checked=a,c(a))},[a,t]),{ref:x,"aria-checked":u?"mixed":e}},_T=Pe.forwardRef((e,t)=>{const{checked:a,value:u,state:c,...x}=q_(e),{children:g,locked:h,color:C,id:D,className:$,style:M,indeterminate:L,icon:ce,htmlProps:pe}=yT(x),{ref:se,...Ee}=t3({state:c,checked:a,indeterminate:L}),te=H_({locked:h,style:M}),{icon:H,iconType:ne}=mT(ce);return Pe.createElement("div",{style:te,className:_d("pretty",W_({...e,iconType:ne}),$)},Pe.createElement("input",{ref:fT([t,se]),value:u,type:"checkbox",id:D,checked:a,...Ee,...pe}),Pe.createElement(vm,{id:D,icon:H,color:C},g))});_T.displayName="Checkbox";const r3=Pe.forwardRef((e,t)=>{const{checked:a,value:u,state:c,...x}=q_(e),{shape:g="round",children:h,locked:C,color:D,id:$,className:M,style:L,icon:ce,htmlProps:pe}=yT(x),se=H_({locked:C,style:L}),{icon:Ee,iconType:te}=mT(ce);return Pe.createElement("div",{style:se,className:_d("pretty",W_({...e,shape:g,iconType:te}),M)},Pe.createElement("input",{ref:t,value:u,type:"radio",id:$,checked:a,...pe}),Pe.createElement(vm,{id:$,icon:Ee,color:D},h))});r3.displayName="Radio";const Mw=e=>{e.currentTarget.setAttribute("aria-checked",e.currentTarget.checked+"")},n3=({setState:e,checked:t})=>{const a=Pe.useRef(null);return Pe.useEffect(()=>{const u=a.current;let c=!1;return!e&&!t&&u&&(u.setAttribute("aria-checked",u.checked+""),u.addEventListener("change",Mw),c=!0),()=>{c&&u&&u.removeEventListener("change",Mw)}},[e,t]),a},i3=Pe.forwardRef((e,t)=>{const{checked:a,value:u,state:c,...x}=q_(e),{children:g,locked:h,color:C,id:D,className:$,style:M,htmlProps:L}=gT(x),ce=H_({locked:h,style:M}),pe=n3({setState:e.setState,checked:a});return Pe.createElement("div",{style:ce,className:_d("pretty","p-switch",W_(e,!0),$)},Pe.createElement("input",{ref:fT([t,pe]),type:"checkbox",role:"switch",value:u,id:D,"aria-checked":a,checked:a,...L}),Pe.createElement(vm,{id:D,color:C},g))});i3.displayName="Switch";function vT({typeFilter:e}){const[t,a]=Pe.useState(!1),[u,c]=kS(),[x]=Pe.useState(e);function g(){a(!1),e!=x&&window.location.reload()}function h(D,$){c(M=>{const L=new URLSearchParams(M),ce=L.getAll(D);if(ce.includes($)){const pe=ce.filter(se=>se!==$);L.delete(D),pe.forEach(se=>L.append(D,se))}else L.append(D,$);return L})}function C(){c({}),window.location.reload()}return qe.jsx(qe.Fragment,{children:qe.jsxs("div",{className:"absolute flex rounded-full top-3 left-4 bg-navColor text-white shadow-lg duration-200 hover:text-main hover:shadow-main hover:scale-110",children:[qe.jsx("button",{type:"button",className:"p-3",onClick:()=>a(D=>!D),children:qe.jsx("span",{children:qe.jsx(ZM,{size:30})})}),qe.jsx(UM,{open:t,closeOnDocumentClick:!0,onClose:g,children:qe.jsxs("div",{className:"modal relative flex flex-col items-center justify-center bg-navColor mx-auto p-4 text-white dark:bg-lightGray dark:text-appColor rounded-lg shadow-xl",children:[qe.jsx("div",{className:"absolute flex rounded-full dark:border-[2px] dark:border-[#dbdbdb] top-2 right-3 shadow-sm duration-200 hover:text-main hover:shadow-main hover:scale-110",children:qe.jsx("button",{type:"button",className:"p-3  dark:text-appColor ",onClick:C,children:qe.jsx("span",{children:qe.jsx(gA,{size:30})})})}),qe.jsx("div",{className:"absolute flex rounded-full top-2 left-3 bg-navColor dark:bg-lightGray dark:text-appColor dark:border-[2px] dark:border-[#dbdbdb] cursor-pointer text-white shadow-sm duration-200 hover:text-main hover:shadow-main hover:scale-110",children:qe.jsx("button",{className:"close p-3",onClick:g,children:qe.jsx("span",{children:qe.jsx(SA,{size:30})})})}),qe.jsxs("div",{className:"w-full flex flex-col text-lg p-4 mt-7",children:[qe.jsxs("h1",{className:"text-center text-2xl mb-4",children:["Filtr ",qe.jsx("span",{className:"text-main font-bold",children:"Muala"})," miejsc"]}),["polska","ukrainska","amerykanska","turecka","meksykanska"].map(D=>qe.jsxs("div",{className:"flex items-center justify-between border-b border-gray-500",children:[qe.jsxs("label",{className:"font-light p-3",children:["Kuchnia"," ",qe.jsx("span",{className:"text-main font-bold",children:D})]}),qe.jsx(_T,{animation:"jelly",color:"warning",className:"my-4",checked:e.includes(D),onChange:()=>h("category",D)})]},D))]}),qe.jsx("button",{className:"mx-auto w-1/2 p-3 rounded-xl border-[2px] border-main duration-300 text-white dark:text-appColor hover:text-main hover:shadow-main hover:scale-105",onClick:()=>window.location.reload(),children:"Zapisz zmiany"})]})})]})})}vT.propTypes={typeFilter:Lh.array.isRequired};function o3(){Ai.apiKey="i10L3MwNCIbub5Dvmg3m";const e=Pe.useRef(null),t=Pe.useRef(null),a={lng:19.1451,lat:51.9194},u=5.5,c=N_(),x=oa(),g=(x==null?void 0:x.search)||"/",[h]=kS(),C=h.getAll("category"),D=C.length?Vf.filter($=>C.includes($.category)):Vf;return Pe.useEffect(()=>{t.current||(t.current=new uT({container:e.current,style:"https://api.maptiler.com/maps/streets-v2/style.json?key=i10L3MwNCIbub5Dvmg3m",center:[a.lng,a.lat],zoom:u}),t.current.on("load",()=>{const $={type:"FeatureCollection",features:D.map(M=>({type:"Feature",properties:{id:M.id},geometry:{type:"Point",coordinates:[M.longitude,M.latitude]}}))};t.current.addSource("displayedLocation",{type:"geojson",data:$,cluster:!0,clusterMaxZoom:14,clusterRadius:50}),t.current.addLayer({id:"clusters",type:"circle",source:"displayedLocation",filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#F18C18",100,"#F18C18",750,"#F18C18"],"circle-radius":["step",["get","point_count"],20,100,30,750,40]}}),t.current.addLayer({id:"cluster-count",type:"symbol",source:"displayedLocation",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}}),t.current.addLayer({id:"unclustered-point",type:"circle",source:"displayedLocation",filter:["!",["has","point_count"]],paint:{"circle-color":"#F18C18","circle-radius":12,"circle-stroke-width":1,"circle-stroke-color":"#fff"}}),D.forEach(M=>{const L=document.createElement("div");L.className="marker",L.style.backgroundImage=`url(${M.mainImage})`,L.style.width="50px",L.style.height="50px",L.style.backgroundSize="cover",L.style.backgroundPosition="center",L.addEventListener("click",()=>{c(`/${M.id}`,{state:{link:g}})});const ce=new _M({element:L}).setLngLat([M.longitude,M.latitude]).addTo(t.current);t.current.on("zoom",()=>{t.current.getZoom()>9?ce.getElement().style.display="block":ce.getElement().style.display="none"})}),t.current.on("click","clusters",M=>{const L=t.current.queryRenderedFeatures(M.point,{layers:["clusters"]}),ce=L[0].properties.cluster_id;t.current.getSource("displayedLocation").getClusterExpansionZoom(ce,(pe,se)=>{pe||t.current.easeTo({center:L[0].geometry.coordinates,zoom:se})})}),t.current.on("click","unclustered-point",M=>{const{id:L}=M.features[0].properties;c(`/${L}`,{state:{link:g}})}),t.current.on("mouseenter","clusters",()=>{t.current.getCanvas().style.cursor="pointer"}),t.current.on("mouseleave","clusters",()=>{t.current.getCanvas().style.cursor=""})}))},[a.lng,a.lat,u,c,D]),qe.jsxs("div",{className:"map-wrap",children:[qe.jsx("div",{ref:e,className:"map"}),qe.jsx(vT,{typeFilter:C})]})}function xT(e){return Fi({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(e)}function a3(e){return Fi({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(e)}function s3(e){return Fi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(e)}function l3(e){return Fi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 160c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h320c26.5 0 48-21.5 48-48v-48h20c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20v-64h20c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20v-64h20zm-68 304H48V48h320v416zM208 256c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm-89.6 128h179.2c12.4 0 22.4-8.6 22.4-19.2v-19.2c0-31.8-30.1-57.6-67.2-57.6-10.8 0-18.7 8-44.8 8-26.9 0-33.4-8-44.8-8-37.1 0-67.2 25.8-67.2 57.6v19.2c0 10.6 10 19.2 22.4 19.2z"},child:[]}]})(e)}var wT={},bT={},xm={},ST={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={animating:!1,autoplaying:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,dragging:!1,edgeDragged:!1,initialized:!1,lazyLoadedList:[],listHeight:null,listWidth:null,scrolling:!1,slideCount:null,slideHeight:null,slideWidth:null,swipeLeft:null,swiped:!1,swiping:!1,touchObject:{startX:0,startY:0,curX:0,curY:0},trackStyle:{},trackWidth:0,targetSlide:0};e.default=t})(ST);var u3="Expected a function",zw=NaN,c3="[object Symbol]",h3=/^\s+|\s+$/g,d3=/^[-+]0x[0-9a-f]+$/i,p3=/^0b[01]+$/i,f3=/^0o[0-7]+$/i,m3=parseInt,g3=typeof kh=="object"&&kh&&kh.Object===Object&&kh,y3=typeof self=="object"&&self&&self.Object===Object&&self,_3=g3||y3||Function("return this")(),v3=Object.prototype,x3=v3.toString,w3=Math.max,b3=Math.min,py=function(){return _3.Date.now()};function S3(e,t,a){var u,c,x,g,h,C,D=0,$=!1,M=!1,L=!0;if(typeof e!="function")throw new TypeError(u3);t=Lw(t)||0,C0(a)&&($=!!a.leading,M="maxWait"in a,x=M?w3(Lw(a.maxWait)||0,t):x,L="trailing"in a?!!a.trailing:L);function ce(le){var Me=u,$e=c;return u=c=void 0,D=le,g=e.apply($e,Me),g}function pe(le){return D=le,h=setTimeout(te,t),$?ce(le):g}function se(le){var Me=le-C,$e=le-D,Ie=t-Me;return M?b3(Ie,x-$e):Ie}function Ee(le){var Me=le-C,$e=le-D;return C===void 0||Me>=t||Me<0||M&&$e>=x}function te(){var le=py();if(Ee(le))return H(le);h=setTimeout(te,se(le))}function H(le){return h=void 0,L&&u?ce(le):(u=c=void 0,g)}function ne(){h!==void 0&&clearTimeout(h),D=0,u=C=c=h=void 0}function be(){return h===void 0?g:H(py())}function Ae(){var le=py(),Me=Ee(le);if(u=arguments,c=this,C=le,Me){if(h===void 0)return pe(C);if(M)return h=setTimeout(te,t),ce(C)}return h===void 0&&(h=setTimeout(te,t)),g}return Ae.cancel=ne,Ae.flush=be,Ae}function C0(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function T3(e){return!!e&&typeof e=="object"}function E3(e){return typeof e=="symbol"||T3(e)&&x3.call(e)==c3}function Lw(e){if(typeof e=="number")return e;if(E3(e))return zw;if(C0(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=C0(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(h3,"");var a=p3.test(e);return a||f3.test(e)?m3(e.slice(2),a?2:8):d3.test(e)?zw:+e}var k3=S3,TT={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function a(){for(var x="",g=0;g<arguments.length;g++){var h=arguments[g];h&&(x=c(x,u(h)))}return x}function u(x){if(typeof x=="string"||typeof x=="number")return x;if(typeof x!="object")return"";if(Array.isArray(x))return a.apply(null,x);if(x.toString!==Object.prototype.toString&&!x.toString.toString().includes("[native code]"))return x.toString();var g="";for(var h in x)t.call(x,h)&&x[h]&&(g=c(g,h));return g}function c(x,g){return g?x?x+" "+g:x+g:x}e.exports?(a.default=a,e.exports=a):window.classNames=a})()})(TT);var wm=TT.exports,ht={},Z_={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(Pe);function a(c){return c&&c.__esModule?c:{default:c}}var u={accessibility:!0,adaptiveHeight:!1,afterChange:null,appendDots:function(x){return t.default.createElement("ul",{style:{display:"block"}},x)},arrows:!0,autoplay:!1,autoplaySpeed:3e3,beforeChange:null,centerMode:!1,centerPadding:"50px",className:"",cssEase:"ease",customPaging:function(x){return t.default.createElement("button",null,x+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:null,nextArrow:null,onEdge:null,onInit:null,onLazyLoadError:null,onReInit:null,pauseOnDotsHover:!1,pauseOnFocus:!1,pauseOnHover:!0,prevArrow:null,responsive:null,rows:1,rtl:!1,slide:"div",slidesPerRow:1,slidesToScroll:1,slidesToShow:1,speed:500,swipe:!0,swipeEvent:null,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0,asNavFor:null};e.default=u})(Z_);Object.defineProperty(ht,"__esModule",{value:!0});ht.checkSpecKeys=ht.checkNavigable=ht.changeSlide=ht.canUseDOM=ht.canGoNext=void 0;ht.clamp=kT;ht.extractObject=void 0;ht.filterSettings=U3;ht.validSettings=ht.swipeStart=ht.swipeMove=ht.swipeEnd=ht.slidesOnRight=ht.slidesOnLeft=ht.slideHandler=ht.siblingDirection=ht.safePreventDefault=ht.lazyStartIndex=ht.lazySlidesOnRight=ht.lazySlidesOnLeft=ht.lazyEndIndex=ht.keyHandler=ht.initializedState=ht.getWidth=ht.getTrackLeft=ht.getTrackCSS=ht.getTrackAnimateCSS=ht.getTotalSlides=ht.getSwipeDirection=ht.getSlideCount=ht.getRequiredLazySlides=ht.getPreClones=ht.getPostClones=ht.getOnDemandLazySlides=ht.getNavigableIndexes=ht.getHeight=void 0;var C3=ET(Pe),P3=ET(Z_);function ET(e){return e&&e.__esModule?e:{default:e}}function cd(e){"@babel/helpers - typeof";return cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cd(e)}function Rw(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);t&&(u=u.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),a.push.apply(a,u)}return a}function Hr(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Rw(Object(a),!0).forEach(function(u){I3(e,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Rw(Object(a)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(a,u))})}return e}function I3(e,t,a){return t=A3(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function A3(e){var t=M3(e,"string");return cd(t)=="symbol"?t:String(t)}function M3(e,t){if(cd(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var u=a.call(e,t||"default");if(cd(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kT(e,t,a){return Math.max(t,Math.min(e,a))}var ju=ht.safePreventDefault=function(t){var a=["onTouchStart","onTouchMove","onWheel"];a.includes(t._reactName)||t.preventDefault()},CT=ht.getOnDemandLazySlides=function(t){for(var a=[],u=PT(t),c=IT(t),x=u;x<c;x++)t.lazyLoadedList.indexOf(x)<0&&a.push(x);return a};ht.getRequiredLazySlides=function(t){for(var a=[],u=PT(t),c=IT(t),x=u;x<c;x++)a.push(x);return a};var PT=ht.lazyStartIndex=function(t){return t.currentSlide-z3(t)},IT=ht.lazyEndIndex=function(t){return t.currentSlide+L3(t)},z3=ht.lazySlidesOnLeft=function(t){return t.centerMode?Math.floor(t.slidesToShow/2)+(parseInt(t.centerPadding)>0?1:0):0},L3=ht.lazySlidesOnRight=function(t){return t.centerMode?Math.floor((t.slidesToShow-1)/2)+1+(parseInt(t.centerPadding)>0?1:0):t.slidesToShow},P0=ht.getWidth=function(t){return t&&t.offsetWidth||0},AT=ht.getHeight=function(t){return t&&t.offsetHeight||0},MT=ht.getSwipeDirection=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u,c,x,g;return u=t.startX-t.curX,c=t.startY-t.curY,x=Math.atan2(c,u),g=Math.round(x*180/Math.PI),g<0&&(g=360-Math.abs(g)),g<=45&&g>=0||g<=360&&g>=315?"left":g>=135&&g<=225?"right":a===!0?g>=35&&g<=135?"up":"down":"vertical"},zT=ht.canGoNext=function(t){var a=!0;return t.infinite||(t.centerMode&&t.currentSlide>=t.slideCount-1||t.slideCount<=t.slidesToShow||t.currentSlide>=t.slideCount-t.slidesToShow)&&(a=!1),a};ht.extractObject=function(t,a){var u={};return a.forEach(function(c){return u[c]=t[c]}),u};ht.initializedState=function(t){var a=C3.default.Children.count(t.children),u=t.listRef,c=Math.ceil(P0(u)),x=t.trackRef&&t.trackRef.node,g=Math.ceil(P0(x)),h;if(t.vertical)h=c;else{var C=t.centerMode&&parseInt(t.centerPadding)*2;typeof t.centerPadding=="string"&&t.centerPadding.slice(-1)==="%"&&(C*=c/100),h=Math.ceil((c-C)/t.slidesToShow)}var D=u&&AT(u.querySelector('[data-index="0"]')),$=D*t.slidesToShow,M=t.currentSlide===void 0?t.initialSlide:t.currentSlide;t.rtl&&t.currentSlide===void 0&&(M=a-1-t.initialSlide);var L=t.lazyLoadedList||[],ce=CT(Hr(Hr({},t),{},{currentSlide:M,lazyLoadedList:L}));L=L.concat(ce);var pe={slideCount:a,slideWidth:h,listWidth:c,trackWidth:g,currentSlide:M,slideHeight:D,listHeight:$,lazyLoadedList:L};return t.autoplaying===null&&t.autoplay&&(pe.autoplaying="playing"),pe};ht.slideHandler=function(t){var a=t.waitForAnimate,u=t.animating,c=t.fade,x=t.infinite,g=t.index,h=t.slideCount,C=t.lazyLoad,D=t.currentSlide,$=t.centerMode,M=t.slidesToScroll,L=t.slidesToShow,ce=t.useCSS,pe=t.lazyLoadedList;if(a&&u)return{};var se=g,Ee,te,H,ne={},be={},Ae=x?g:kT(g,0,h-1);if(c){if(!x&&(g<0||g>=h))return{};g<0?se=g+h:g>=h&&(se=g-h),C&&pe.indexOf(se)<0&&(pe=pe.concat(se)),ne={animating:!0,currentSlide:se,lazyLoadedList:pe,targetSlide:se},be={animating:!1,targetSlide:se}}else Ee=se,se<0?(Ee=se+h,x?h%M!==0&&(Ee=h-h%M):Ee=0):!zT(t)&&se>D?se=Ee=D:$&&se>=h?(se=x?h:h-1,Ee=x?0:h-1):se>=h&&(Ee=se-h,x?h%M!==0&&(Ee=0):Ee=h-L),!x&&se+L>=h&&(Ee=h-L),te=Hf(Hr(Hr({},t),{},{slideIndex:se})),H=Hf(Hr(Hr({},t),{},{slideIndex:Ee})),x||(te===H&&(se=Ee),te=H),C&&(pe=pe.concat(CT(Hr(Hr({},t),{},{currentSlide:se})))),ce?(ne={animating:!0,currentSlide:Ee,trackStyle:LT(Hr(Hr({},t),{},{left:te})),lazyLoadedList:pe,targetSlide:Ae},be={animating:!1,currentSlide:Ee,trackStyle:$f(Hr(Hr({},t),{},{left:H})),swipeLeft:null,targetSlide:Ae}):ne={currentSlide:Ee,trackStyle:$f(Hr(Hr({},t),{},{left:H})),lazyLoadedList:pe,targetSlide:Ae};return{state:ne,nextState:be}};ht.changeSlide=function(t,a){var u,c,x,g,h,C=t.slidesToScroll,D=t.slidesToShow,$=t.slideCount,M=t.currentSlide,L=t.targetSlide,ce=t.lazyLoad,pe=t.infinite;if(g=$%C!==0,u=g?0:($-M)%C,a.message==="previous")x=u===0?C:D-u,h=M-x,ce&&!pe&&(c=M-x,h=c===-1?$-1:c),pe||(h=L-C);else if(a.message==="next")x=u===0?C:u,h=M+x,ce&&!pe&&(h=(M+C)%$+u),pe||(h=L+C);else if(a.message==="dots")h=a.index*a.slidesToScroll;else if(a.message==="children"){if(h=a.index,pe){var se=F3(Hr(Hr({},t),{},{targetSlide:h}));h>a.currentSlide&&se==="left"?h=h-$:h<a.currentSlide&&se==="right"&&(h=h+$)}}else a.message==="index"&&(h=Number(a.index));return h};ht.keyHandler=function(t,a,u){return t.target.tagName.match("TEXTAREA|INPUT|SELECT")||!a?"":t.keyCode===37?u?"next":"previous":t.keyCode===39?u?"previous":"next":""};ht.swipeStart=function(t,a,u){return t.target.tagName==="IMG"&&ju(t),!a||!u&&t.type.indexOf("mouse")!==-1?"":{dragging:!0,touchObject:{startX:t.touches?t.touches[0].pageX:t.clientX,startY:t.touches?t.touches[0].pageY:t.clientY,curX:t.touches?t.touches[0].pageX:t.clientX,curY:t.touches?t.touches[0].pageY:t.clientY}}};ht.swipeMove=function(t,a){var u=a.scrolling,c=a.animating,x=a.vertical,g=a.swipeToSlide,h=a.verticalSwiping,C=a.rtl,D=a.currentSlide,$=a.edgeFriction,M=a.edgeDragged,L=a.onEdge,ce=a.swiped,pe=a.swiping,se=a.slideCount,Ee=a.slidesToScroll,te=a.infinite,H=a.touchObject,ne=a.swipeEvent,be=a.listHeight,Ae=a.listWidth;if(!u){if(c)return ju(t);x&&g&&h&&ju(t);var le,Me={},$e=Hf(a);H.curX=t.touches?t.touches[0].pageX:t.clientX,H.curY=t.touches?t.touches[0].pageY:t.clientY,H.swipeLength=Math.round(Math.sqrt(Math.pow(H.curX-H.startX,2)));var Ie=Math.round(Math.sqrt(Math.pow(H.curY-H.startY,2)));if(!h&&!pe&&Ie>10)return{scrolling:!0};h&&(H.swipeLength=Ie);var ze=(C?-1:1)*(H.curX>H.startX?1:-1);h&&(ze=H.curY>H.startY?1:-1);var Be=Math.ceil(se/Ee),ut=MT(a.touchObject,h),Ke=H.swipeLength;return te||(D===0&&(ut==="right"||ut==="down")||D+1>=Be&&(ut==="left"||ut==="up")||!zT(a)&&(ut==="left"||ut==="up"))&&(Ke=H.swipeLength*$,M===!1&&L&&(L(ut),Me.edgeDragged=!0)),!ce&&ne&&(ne(ut),Me.swiped=!0),x?le=$e+Ke*(be/Ae)*ze:C?le=$e-Ke*ze:le=$e+Ke*ze,h&&(le=$e+Ke*ze),Me=Hr(Hr({},Me),{},{touchObject:H,swipeLeft:le,trackStyle:$f(Hr(Hr({},a),{},{left:le}))}),Math.abs(H.curX-H.startX)<Math.abs(H.curY-H.startY)*.8||H.swipeLength>10&&(Me.swiping=!0,ju(t)),Me}};ht.swipeEnd=function(t,a){var u=a.dragging,c=a.swipe,x=a.touchObject,g=a.listWidth,h=a.touchThreshold,C=a.verticalSwiping,D=a.listHeight,$=a.swipeToSlide,M=a.scrolling,L=a.onSwipe,ce=a.targetSlide,pe=a.currentSlide,se=a.infinite;if(!u)return c&&ju(t),{};var Ee=C?D/h:g/h,te=MT(x,C),H={dragging:!1,edgeDragged:!1,scrolling:!1,swiping:!1,swiped:!1,swipeLeft:null,touchObject:{}};if(M||!x.swipeLength)return H;if(x.swipeLength>Ee){ju(t),L&&L(te);var ne,be,Ae=se?pe:ce;switch(te){case"left":case"up":be=Ae+Ow(a),ne=$?Dw(a,be):be,H.currentDirection=0;break;case"right":case"down":be=Ae-Ow(a),ne=$?Dw(a,be):be,H.currentDirection=1;break;default:ne=Ae}H.triggerSlideHandler=ne}else{var le=Hf(a);H.trackStyle=LT(Hr(Hr({},a),{},{left:le}))}return H};var R3=ht.getNavigableIndexes=function(t){for(var a=t.infinite?t.slideCount*2:t.slideCount,u=t.infinite?t.slidesToShow*-1:0,c=t.infinite?t.slidesToShow*-1:0,x=[];u<a;)x.push(u),u=c+t.slidesToScroll,c+=Math.min(t.slidesToScroll,t.slidesToShow);return x},Dw=ht.checkNavigable=function(t,a){var u=R3(t),c=0;if(a>u[u.length-1])a=u[u.length-1];else for(var x in u){if(a<u[x]){a=c;break}c=u[x]}return a},Ow=ht.getSlideCount=function(t){var a=t.centerMode?t.slideWidth*Math.floor(t.slidesToShow/2):0;if(t.swipeToSlide){var u,c=t.listRef,x=c.querySelectorAll&&c.querySelectorAll(".slick-slide")||[];if(Array.from(x).every(function(C){if(t.vertical){if(C.offsetTop+AT(C)/2>t.swipeLeft*-1)return u=C,!1}else if(C.offsetLeft-a+P0(C)/2>t.swipeLeft*-1)return u=C,!1;return!0}),!u)return 0;var g=t.rtl===!0?t.slideCount-t.currentSlide:t.currentSlide,h=Math.abs(u.dataset.index-g)||1;return h}else return t.slidesToScroll},G_=ht.checkSpecKeys=function(t,a){return a.reduce(function(u,c){return u&&t.hasOwnProperty(c)},!0)?null:console.error("Keys Missing:",t)},$f=ht.getTrackCSS=function(t){G_(t,["left","variableWidth","slideCount","slidesToShow","slideWidth"]);var a,u,c=t.slideCount+2*t.slidesToShow;t.vertical?u=c*t.slideHeight:a=O3(t)*t.slideWidth;var x={opacity:1,transition:"",WebkitTransition:""};if(t.useTransform){var g=t.vertical?"translate3d(0px, "+t.left+"px, 0px)":"translate3d("+t.left+"px, 0px, 0px)",h=t.vertical?"translate3d(0px, "+t.left+"px, 0px)":"translate3d("+t.left+"px, 0px, 0px)",C=t.vertical?"translateY("+t.left+"px)":"translateX("+t.left+"px)";x=Hr(Hr({},x),{},{WebkitTransform:g,transform:h,msTransform:C})}else t.vertical?x.top=t.left:x.left=t.left;return t.fade&&(x={opacity:1}),a&&(x.width=a),u&&(x.height=u),window&&!window.addEventListener&&window.attachEvent&&(t.vertical?x.marginTop=t.left+"px":x.marginLeft=t.left+"px"),x},LT=ht.getTrackAnimateCSS=function(t){G_(t,["left","variableWidth","slideCount","slidesToShow","slideWidth","speed","cssEase"]);var a=$f(t);return t.useTransform?(a.WebkitTransition="-webkit-transform "+t.speed+"ms "+t.cssEase,a.transition="transform "+t.speed+"ms "+t.cssEase):t.vertical?a.transition="top "+t.speed+"ms "+t.cssEase:a.transition="left "+t.speed+"ms "+t.cssEase,a},Hf=ht.getTrackLeft=function(t){if(t.unslick)return 0;G_(t,["slideIndex","trackRef","infinite","centerMode","slideCount","slidesToShow","slidesToScroll","slideWidth","listWidth","variableWidth","slideHeight"]);var a=t.slideIndex,u=t.trackRef,c=t.infinite,x=t.centerMode,g=t.slideCount,h=t.slidesToShow,C=t.slidesToScroll,D=t.slideWidth,$=t.listWidth,M=t.variableWidth,L=t.slideHeight,ce=t.fade,pe=t.vertical,se=0,Ee,te,H=0;if(ce||t.slideCount===1)return 0;var ne=0;if(c?(ne=-hf(t),g%C!==0&&a+C>g&&(ne=-(a>g?h-(a-g):g%C)),x&&(ne+=parseInt(h/2))):(g%C!==0&&a+C>g&&(ne=h-g%C),x&&(ne=parseInt(h/2))),se=ne*D,H=ne*L,pe?Ee=a*L*-1+H:Ee=a*D*-1+se,M===!0){var be,Ae=u&&u.node;if(be=a+hf(t),te=Ae&&Ae.childNodes[be],Ee=te?te.offsetLeft*-1:0,x===!0){be=c?a+hf(t):a,te=Ae&&Ae.children[be],Ee=0;for(var le=0;le<be;le++)Ee-=Ae&&Ae.children[le]&&Ae.children[le].offsetWidth;Ee-=parseInt(t.centerPadding),Ee+=te&&($-te.offsetWidth)/2}}return Ee},hf=ht.getPreClones=function(t){return t.unslick||!t.infinite?0:t.variableWidth?t.slideCount:t.slidesToShow+(t.centerMode?1:0)},D3=ht.getPostClones=function(t){return t.unslick||!t.infinite?0:t.slideCount},O3=ht.getTotalSlides=function(t){return t.slideCount===1?1:hf(t)+t.slideCount+D3(t)},F3=ht.siblingDirection=function(t){return t.targetSlide>t.currentSlide?t.targetSlide>t.currentSlide+B3(t)?"left":"right":t.targetSlide<t.currentSlide-N3(t)?"right":"left"},B3=ht.slidesOnRight=function(t){var a=t.slidesToShow,u=t.centerMode,c=t.rtl,x=t.centerPadding;if(u){var g=(a-1)/2+1;return parseInt(x)>0&&(g+=1),c&&a%2===0&&(g+=1),g}return c?0:a-1},N3=ht.slidesOnLeft=function(t){var a=t.slidesToShow,u=t.centerMode,c=t.rtl,x=t.centerPadding;if(u){var g=(a-1)/2+1;return parseInt(x)>0&&(g+=1),!c&&a%2===0&&(g+=1),g}return c?a-1:0};ht.canUseDOM=function(){return!!(typeof window<"u"&&window.document&&window.document.createElement)};var j3=ht.validSettings=Object.keys(P3.default);function U3(e){return j3.reduce(function(t,a){return e.hasOwnProperty(a)&&(t[a]=e[a]),t},{})}var bm={};Object.defineProperty(bm,"__esModule",{value:!0});bm.Track=void 0;var ls=RT(Pe),fy=RT(wm),my=ht;function RT(e){return e&&e.__esModule?e:{default:e}}function Yu(e){"@babel/helpers - typeof";return Yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yu(e)}function I0(){return I0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u])}return e},I0.apply(this,arguments)}function V3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $3(e,t){for(var a=0;a<t.length;a++){var u=t[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,OT(u.key),u)}}function H3(e,t,a){return t&&$3(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function W3(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A0(e,t)}function A0(e,t){return A0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},A0(e,t)}function q3(e){var t=DT();return function(){var u=Wf(e),c;if(t){var x=Wf(this).constructor;c=Reflect.construct(u,arguments,x)}else c=u.apply(this,arguments);return Z3(this,c)}}function Z3(e,t){if(t&&(Yu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M0(e)}function M0(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DT=function(){return!!e})()}function Wf(e){return Wf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Wf(e)}function Fw(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);t&&(u=u.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),a.push.apply(a,u)}return a}function Ii(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Fw(Object(a),!0).forEach(function(u){z0(e,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Fw(Object(a)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(a,u))})}return e}function z0(e,t,a){return t=OT(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function OT(e){var t=G3(e,"string");return Yu(t)=="symbol"?t:String(t)}function G3(e,t){if(Yu(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var u=a.call(e,t||"default");if(Yu(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gy=function(t){var a,u,c,x,g;t.rtl?g=t.slideCount-1-t.index:g=t.index,c=g<0||g>=t.slideCount,t.centerMode?(x=Math.floor(t.slidesToShow/2),u=(g-t.currentSlide)%t.slideCount===0,g>t.currentSlide-x-1&&g<=t.currentSlide+x&&(a=!0)):a=t.currentSlide<=g&&g<t.currentSlide+t.slidesToShow;var h;t.targetSlide<0?h=t.targetSlide+t.slideCount:t.targetSlide>=t.slideCount?h=t.targetSlide-t.slideCount:h=t.targetSlide;var C=g===h;return{"slick-slide":!0,"slick-active":a,"slick-center":u,"slick-cloned":c,"slick-current":C}},K3=function(t){var a={};return(t.variableWidth===void 0||t.variableWidth===!1)&&(a.width=t.slideWidth),t.fade&&(a.position="relative",t.vertical?a.top=-t.index*parseInt(t.slideHeight):a.left=-t.index*parseInt(t.slideWidth),a.opacity=t.currentSlide===t.index?1:0,a.zIndex=t.currentSlide===t.index?999:998,t.useCSS&&(a.transition="opacity "+t.speed+"ms "+t.cssEase+", visibility "+t.speed+"ms "+t.cssEase)),a},yy=function(t,a){return t.key||a},X3=function(t){var a,u=[],c=[],x=[],g=ls.default.Children.count(t.children),h=(0,my.lazyStartIndex)(t),C=(0,my.lazyEndIndex)(t);return ls.default.Children.forEach(t.children,function(D,$){var M,L={message:"children",index:$,slidesToScroll:t.slidesToScroll,currentSlide:t.currentSlide};!t.lazyLoad||t.lazyLoad&&t.lazyLoadedList.indexOf($)>=0?M=D:M=ls.default.createElement("div",null);var ce=K3(Ii(Ii({},t),{},{index:$})),pe=M.props.className||"",se=gy(Ii(Ii({},t),{},{index:$}));if(u.push(ls.default.cloneElement(M,{key:"original"+yy(M,$),"data-index":$,className:(0,fy.default)(se,pe),tabIndex:"-1","aria-hidden":!se["slick-active"],style:Ii(Ii({outline:"none"},M.props.style||{}),ce),onClick:function(H){M.props&&M.props.onClick&&M.props.onClick(H),t.focusOnSelect&&t.focusOnSelect(L)}})),t.infinite&&t.fade===!1){var Ee=g-$;Ee<=(0,my.getPreClones)(t)&&(a=-Ee,a>=h&&(M=D),se=gy(Ii(Ii({},t),{},{index:a})),c.push(ls.default.cloneElement(M,{key:"precloned"+yy(M,a),"data-index":a,tabIndex:"-1",className:(0,fy.default)(se,pe),"aria-hidden":!se["slick-active"],style:Ii(Ii({},M.props.style||{}),ce),onClick:function(H){M.props&&M.props.onClick&&M.props.onClick(H),t.focusOnSelect&&t.focusOnSelect(L)}}))),a=g+$,a<C&&(M=D),se=gy(Ii(Ii({},t),{},{index:a})),x.push(ls.default.cloneElement(M,{key:"postcloned"+yy(M,a),"data-index":a,tabIndex:"-1",className:(0,fy.default)(se,pe),"aria-hidden":!se["slick-active"],style:Ii(Ii({},M.props.style||{}),ce),onClick:function(H){M.props&&M.props.onClick&&M.props.onClick(H),t.focusOnSelect&&t.focusOnSelect(L)}}))}}),t.rtl?c.concat(u,x).reverse():c.concat(u,x)};bm.Track=function(e){W3(a,e);var t=q3(a);function a(){var u;V3(this,a);for(var c=arguments.length,x=new Array(c),g=0;g<c;g++)x[g]=arguments[g];return u=t.call.apply(t,[this].concat(x)),z0(M0(u),"node",null),z0(M0(u),"handleRef",function(h){u.node=h}),u}return H3(a,[{key:"render",value:function(){var c=X3(this.props),x=this.props,g=x.onMouseEnter,h=x.onMouseOver,C=x.onMouseLeave,D={onMouseEnter:g,onMouseOver:h,onMouseLeave:C};return ls.default.createElement("div",I0({ref:this.handleRef,className:"slick-track",style:this.props.trackStyle},D),c)}}]),a}(ls.default.PureComponent);var Sm={};function Ju(e){"@babel/helpers - typeof";return Ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ju(e)}Object.defineProperty(Sm,"__esModule",{value:!0});Sm.Dots=void 0;var Zp=FT(Pe),Y3=FT(wm),Bw=ht;function FT(e){return e&&e.__esModule?e:{default:e}}function Nw(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);t&&(u=u.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),a.push.apply(a,u)}return a}function J3(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Nw(Object(a),!0).forEach(function(u){Q3(e,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Nw(Object(a)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(a,u))})}return e}function Q3(e,t,a){return t=BT(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function e4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t4(e,t){for(var a=0;a<t.length;a++){var u=t[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,BT(u.key),u)}}function r4(e,t,a){return t&&t4(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function BT(e){var t=n4(e,"string");return Ju(t)=="symbol"?t:String(t)}function n4(e,t){if(Ju(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var u=a.call(e,t||"default");if(Ju(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function i4(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L0(e,t)}function L0(e,t){return L0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},L0(e,t)}function o4(e){var t=NT();return function(){var u=qf(e),c;if(t){var x=qf(this).constructor;c=Reflect.construct(u,arguments,x)}else c=u.apply(this,arguments);return a4(this,c)}}function a4(e,t){if(t&&(Ju(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s4(e)}function s4(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NT=function(){return!!e})()}function qf(e){return qf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},qf(e)}var l4=function(t){var a;return t.infinite?a=Math.ceil(t.slideCount/t.slidesToScroll):a=Math.ceil((t.slideCount-t.slidesToShow)/t.slidesToScroll)+1,a};Sm.Dots=function(e){i4(a,e);var t=o4(a);function a(){return e4(this,a),t.apply(this,arguments)}return r4(a,[{key:"clickHandler",value:function(c,x){x.preventDefault(),this.props.clickHandler(c)}},{key:"render",value:function(){for(var c=this.props,x=c.onMouseEnter,g=c.onMouseOver,h=c.onMouseLeave,C=c.infinite,D=c.slidesToScroll,$=c.slidesToShow,M=c.slideCount,L=c.currentSlide,ce=l4({slideCount:M,slidesToScroll:D,slidesToShow:$,infinite:C}),pe={onMouseEnter:x,onMouseOver:g,onMouseLeave:h},se=[],Ee=0;Ee<ce;Ee++){var te=(Ee+1)*D-1,H=C?te:(0,Bw.clamp)(te,0,M-1),ne=H-(D-1),be=C?ne:(0,Bw.clamp)(ne,0,M-1),Ae=(0,Y3.default)({"slick-active":C?L>=be&&L<=H:L===be}),le={message:"dots",index:Ee,slidesToScroll:D,currentSlide:L},Me=this.clickHandler.bind(this,le);se=se.concat(Zp.default.createElement("li",{key:Ee,className:Ae},Zp.default.cloneElement(this.props.customPaging(Ee),{onClick:Me})))}return Zp.default.cloneElement(this.props.appendDots(se),J3({className:this.props.dotsClass},pe))}}]),a}(Zp.default.PureComponent);var Qu={};function ec(e){"@babel/helpers - typeof";return ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ec(e)}Object.defineProperty(Qu,"__esModule",{value:!0});Qu.PrevArrow=Qu.NextArrow=void 0;var Uu=UT(Pe),jT=UT(wm),u4=ht;function UT(e){return e&&e.__esModule?e:{default:e}}function Zf(){return Zf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u])}return e},Zf.apply(this,arguments)}function jw(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);t&&(u=u.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),a.push.apply(a,u)}return a}function Gf(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?jw(Object(a),!0).forEach(function(u){c4(e,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):jw(Object(a)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(a,u))})}return e}function c4(e,t,a){return t=HT(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function VT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h4(e,t){for(var a=0;a<t.length;a++){var u=t[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,HT(u.key),u)}}function $T(e,t,a){return t&&h4(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function HT(e){var t=d4(e,"string");return ec(t)=="symbol"?t:String(t)}function d4(e,t){if(ec(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var u=a.call(e,t||"default");if(ec(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WT(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R0(e,t)}function R0(e,t){return R0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},R0(e,t)}function qT(e){var t=ZT();return function(){var u=Kf(e),c;if(t){var x=Kf(this).constructor;c=Reflect.construct(u,arguments,x)}else c=u.apply(this,arguments);return p4(this,c)}}function p4(e,t){if(t&&(ec(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f4(e)}function f4(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZT=function(){return!!e})()}function Kf(e){return Kf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Kf(e)}Qu.PrevArrow=function(e){WT(a,e);var t=qT(a);function a(){return VT(this,a),t.apply(this,arguments)}return $T(a,[{key:"clickHandler",value:function(c,x){x&&x.preventDefault(),this.props.clickHandler(c,x)}},{key:"render",value:function(){var c={"slick-arrow":!0,"slick-prev":!0},x=this.clickHandler.bind(this,{message:"previous"});!this.props.infinite&&(this.props.currentSlide===0||this.props.slideCount<=this.props.slidesToShow)&&(c["slick-disabled"]=!0,x=null);var g={key:"0","data-role":"none",className:(0,jT.default)(c),style:{display:"block"},onClick:x},h={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},C;return this.props.prevArrow?C=Uu.default.cloneElement(this.props.prevArrow,Gf(Gf({},g),h)):C=Uu.default.createElement("button",Zf({key:"0",type:"button"},g)," ","Previous"),C}}]),a}(Uu.default.PureComponent);Qu.NextArrow=function(e){WT(a,e);var t=qT(a);function a(){return VT(this,a),t.apply(this,arguments)}return $T(a,[{key:"clickHandler",value:function(c,x){x&&x.preventDefault(),this.props.clickHandler(c,x)}},{key:"render",value:function(){var c={"slick-arrow":!0,"slick-next":!0},x=this.clickHandler.bind(this,{message:"next"});(0,u4.canGoNext)(this.props)||(c["slick-disabled"]=!0,x=null);var g={key:"1","data-role":"none",className:(0,jT.default)(c),style:{display:"block"},onClick:x},h={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},C;return this.props.nextArrow?C=Uu.default.cloneElement(this.props.nextArrow,Gf(Gf({},g),h)):C=Uu.default.createElement("button",Zf({key:"1",type:"button"},g)," ","Next"),C}}]),a}(Uu.default.PureComponent);var GT=function(){if(typeof Map<"u")return Map;function e(t,a){var u=-1;return t.some(function(c,x){return c[0]===a?(u=x,!0):!1}),u}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(a){var u=e(this.__entries__,a),c=this.__entries__[u];return c&&c[1]},t.prototype.set=function(a,u){var c=e(this.__entries__,a);~c?this.__entries__[c][1]=u:this.__entries__.push([a,u])},t.prototype.delete=function(a){var u=this.__entries__,c=e(u,a);~c&&u.splice(c,1)},t.prototype.has=function(a){return!!~e(this.__entries__,a)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(a,u){u===void 0&&(u=null);for(var c=0,x=this.__entries__;c<x.length;c++){var g=x[c];a.call(u,g[1],g[0])}},t}()}(),D0=typeof window<"u"&&typeof document<"u"&&window.document===document,Xf=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),m4=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Xf):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),g4=2;function y4(e,t){var a=!1,u=!1,c=0;function x(){a&&(a=!1,e()),u&&h()}function g(){m4(x)}function h(){var C=Date.now();if(a){if(C-c<g4)return;u=!0}else a=!0,u=!1,setTimeout(g,t);c=C}return h}var _4=20,v4=["top","right","bottom","left","width","height","size","weight"],x4=typeof MutationObserver<"u",w4=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=y4(this.refresh.bind(this),_4)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var a=this.observers_,u=a.indexOf(t);~u&&a.splice(u,1),!a.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(a){return a.gatherActive(),a.hasActive()});return t.forEach(function(a){return a.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!D0||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),x4?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!D0||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var a=t.propertyName,u=a===void 0?"":a,c=v4.some(function(x){return!!~u.indexOf(x)});c&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),KT=function(e,t){for(var a=0,u=Object.keys(t);a<u.length;a++){var c=u[a];Object.defineProperty(e,c,{value:t[c],enumerable:!1,writable:!1,configurable:!0})}return e},tc=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||Xf},XT=Tm(0,0,0,0);function Yf(e){return parseFloat(e)||0}function Uw(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return t.reduce(function(u,c){var x=e["border-"+c+"-width"];return u+Yf(x)},0)}function b4(e){for(var t=["top","right","bottom","left"],a={},u=0,c=t;u<c.length;u++){var x=c[u],g=e["padding-"+x];a[x]=Yf(g)}return a}function S4(e){var t=e.getBBox();return Tm(0,0,t.width,t.height)}function T4(e){var t=e.clientWidth,a=e.clientHeight;if(!t&&!a)return XT;var u=tc(e).getComputedStyle(e),c=b4(u),x=c.left+c.right,g=c.top+c.bottom,h=Yf(u.width),C=Yf(u.height);if(u.boxSizing==="border-box"&&(Math.round(h+x)!==t&&(h-=Uw(u,"left","right")+x),Math.round(C+g)!==a&&(C-=Uw(u,"top","bottom")+g)),!k4(e)){var D=Math.round(h+x)-t,$=Math.round(C+g)-a;Math.abs(D)!==1&&(h-=D),Math.abs($)!==1&&(C-=$)}return Tm(c.left,c.top,h,C)}var E4=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof tc(e).SVGGraphicsElement}:function(e){return e instanceof tc(e).SVGElement&&typeof e.getBBox=="function"}}();function k4(e){return e===tc(e).document.documentElement}function C4(e){return D0?E4(e)?S4(e):T4(e):XT}function P4(e){var t=e.x,a=e.y,u=e.width,c=e.height,x=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,g=Object.create(x.prototype);return KT(g,{x:t,y:a,width:u,height:c,top:a,right:t+u,bottom:c+a,left:t}),g}function Tm(e,t,a,u){return{x:e,y:t,width:a,height:u}}var I4=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Tm(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=C4(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),A4=function(){function e(t,a){var u=P4(a);KT(this,{target:t,contentRect:u})}return e}(),M4=function(){function e(t,a,u){if(this.activeObservations_=[],this.observations_=new GT,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=a,this.callbackCtx_=u}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof tc(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var a=this.observations_;a.has(t)||(a.set(t,new I4(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof tc(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var a=this.observations_;a.has(t)&&(a.delete(t),a.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(a){a.isActive()&&t.activeObservations_.push(a)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,a=this.activeObservations_.map(function(u){return new A4(u.target,u.broadcastRect())});this.callback_.call(t,a,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),YT=typeof WeakMap<"u"?new WeakMap:new GT,JT=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var a=w4.getInstance(),u=new M4(t,a,this);YT.set(this,u)}return e}();["observe","unobserve","disconnect"].forEach(function(e){JT.prototype[e]=function(){var t;return(t=YT.get(this))[e].apply(t,arguments)}});var z4=function(){return typeof Xf.ResizeObserver<"u"?Xf.ResizeObserver:JT}();const L4=Object.freeze(Object.defineProperty({__proto__:null,default:z4},Symbol.toStringTag,{value:"Module"})),R4=Yk(L4);Object.defineProperty(xm,"__esModule",{value:!0});xm.InnerSlider=void 0;var yi=vd(Pe),D4=vd(ST),O4=vd(k3),F4=vd(wm),Kr=ht,B4=bm,N4=Sm,Vw=Qu,j4=vd(R4);function vd(e){return e&&e.__esModule?e:{default:e}}function _l(e){"@babel/helpers - typeof";return _l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_l(e)}function Jf(){return Jf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u])}return e},Jf.apply(this,arguments)}function U4(e,t){if(e==null)return{};var a=V4(e,t),u,c;if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(e);for(c=0;c<x.length;c++)u=x[c],!(t.indexOf(u)>=0)&&Object.prototype.propertyIsEnumerable.call(e,u)&&(a[u]=e[u])}return a}function V4(e,t){if(e==null)return{};var a={},u=Object.keys(e),c,x;for(x=0;x<u.length;x++)c=u[x],!(t.indexOf(c)>=0)&&(a[c]=e[c]);return a}function $w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);t&&(u=u.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),a.push.apply(a,u)}return a}function Ot(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?$w(Object(a),!0).forEach(function(u){Jt(e,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$w(Object(a)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(a,u))})}return e}function $4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H4(e,t){for(var a=0;a<t.length;a++){var u=t[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,eE(u.key),u)}}function W4(e,t,a){return t&&H4(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function q4(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O0(e,t)}function O0(e,t){return O0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},O0(e,t)}function Z4(e){var t=QT();return function(){var u=Qf(e),c;if(t){var x=Qf(this).constructor;c=Reflect.construct(u,arguments,x)}else c=u.apply(this,arguments);return G4(this,c)}}function G4(e,t){if(t&&(_l(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yt(e)}function Yt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QT=function(){return!!e})()}function Qf(e){return Qf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Qf(e)}function Jt(e,t,a){return t=eE(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function eE(e){var t=K4(e,"string");return _l(t)=="symbol"?t:String(t)}function K4(e,t){if(_l(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var u=a.call(e,t||"default");if(_l(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}xm.InnerSlider=function(e){q4(a,e);var t=Z4(a);function a(u){var c;$4(this,a),c=t.call(this,u),Jt(Yt(c),"listRefHandler",function(g){return c.list=g}),Jt(Yt(c),"trackRefHandler",function(g){return c.track=g}),Jt(Yt(c),"adaptHeight",function(){if(c.props.adaptiveHeight&&c.list){var g=c.list.querySelector('[data-index="'.concat(c.state.currentSlide,'"]'));c.list.style.height=(0,Kr.getHeight)(g)+"px"}}),Jt(Yt(c),"componentDidMount",function(){if(c.props.onInit&&c.props.onInit(),c.props.lazyLoad){var g=(0,Kr.getOnDemandLazySlides)(Ot(Ot({},c.props),c.state));g.length>0&&(c.setState(function(C){return{lazyLoadedList:C.lazyLoadedList.concat(g)}}),c.props.onLazyLoad&&c.props.onLazyLoad(g))}var h=Ot({listRef:c.list,trackRef:c.track},c.props);c.updateState(h,!0,function(){c.adaptHeight(),c.props.autoplay&&c.autoPlay("update")}),c.props.lazyLoad==="progressive"&&(c.lazyLoadTimer=setInterval(c.progressiveLazyLoad,1e3)),c.ro=new j4.default(function(){c.state.animating?(c.onWindowResized(!1),c.callbackTimers.push(setTimeout(function(){return c.onWindowResized()},c.props.speed))):c.onWindowResized()}),c.ro.observe(c.list),document.querySelectorAll&&Array.prototype.forEach.call(document.querySelectorAll(".slick-slide"),function(C){C.onfocus=c.props.pauseOnFocus?c.onSlideFocus:null,C.onblur=c.props.pauseOnFocus?c.onSlideBlur:null}),window.addEventListener?window.addEventListener("resize",c.onWindowResized):window.attachEvent("onresize",c.onWindowResized)}),Jt(Yt(c),"componentWillUnmount",function(){c.animationEndCallback&&clearTimeout(c.animationEndCallback),c.lazyLoadTimer&&clearInterval(c.lazyLoadTimer),c.callbackTimers.length&&(c.callbackTimers.forEach(function(g){return clearTimeout(g)}),c.callbackTimers=[]),window.addEventListener?window.removeEventListener("resize",c.onWindowResized):window.detachEvent("onresize",c.onWindowResized),c.autoplayTimer&&clearInterval(c.autoplayTimer),c.ro.disconnect()}),Jt(Yt(c),"componentDidUpdate",function(g){if(c.checkImagesLoad(),c.props.onReInit&&c.props.onReInit(),c.props.lazyLoad){var h=(0,Kr.getOnDemandLazySlides)(Ot(Ot({},c.props),c.state));h.length>0&&(c.setState(function($){return{lazyLoadedList:$.lazyLoadedList.concat(h)}}),c.props.onLazyLoad&&c.props.onLazyLoad(h))}c.adaptHeight();var C=Ot(Ot({listRef:c.list,trackRef:c.track},c.props),c.state),D=c.didPropsChange(g);D&&c.updateState(C,D,function(){c.state.currentSlide>=yi.default.Children.count(c.props.children)&&c.changeSlide({message:"index",index:yi.default.Children.count(c.props.children)-c.props.slidesToShow,currentSlide:c.state.currentSlide}),c.props.autoplay?c.autoPlay("update"):c.pause("paused")})}),Jt(Yt(c),"onWindowResized",function(g){c.debouncedResize&&c.debouncedResize.cancel(),c.debouncedResize=(0,O4.default)(function(){return c.resizeWindow(g)},50),c.debouncedResize()}),Jt(Yt(c),"resizeWindow",function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,h=!!(c.track&&c.track.node);if(h){var C=Ot(Ot({listRef:c.list,trackRef:c.track},c.props),c.state);c.updateState(C,g,function(){c.props.autoplay?c.autoPlay("update"):c.pause("paused")}),c.setState({animating:!1}),clearTimeout(c.animationEndCallback),delete c.animationEndCallback}}),Jt(Yt(c),"updateState",function(g,h,C){var D=(0,Kr.initializedState)(g);g=Ot(Ot(Ot({},g),D),{},{slideIndex:D.currentSlide});var $=(0,Kr.getTrackLeft)(g);g=Ot(Ot({},g),{},{left:$});var M=(0,Kr.getTrackCSS)(g);(h||yi.default.Children.count(c.props.children)!==yi.default.Children.count(g.children))&&(D.trackStyle=M),c.setState(D,C)}),Jt(Yt(c),"ssrInit",function(){if(c.props.variableWidth){var g=0,h=0,C=[],D=(0,Kr.getPreClones)(Ot(Ot(Ot({},c.props),c.state),{},{slideCount:c.props.children.length})),$=(0,Kr.getPostClones)(Ot(Ot(Ot({},c.props),c.state),{},{slideCount:c.props.children.length}));c.props.children.forEach(function(Me){C.push(Me.props.style.width),g+=Me.props.style.width});for(var M=0;M<D;M++)h+=C[C.length-1-M],g+=C[C.length-1-M];for(var L=0;L<$;L++)g+=C[L];for(var ce=0;ce<c.state.currentSlide;ce++)h+=C[ce];var pe={width:g+"px",left:-h+"px"};if(c.props.centerMode){var se="".concat(C[c.state.currentSlide],"px");pe.left="calc(".concat(pe.left," + (100% - ").concat(se,") / 2 ) ")}return{trackStyle:pe}}var Ee=yi.default.Children.count(c.props.children),te=Ot(Ot(Ot({},c.props),c.state),{},{slideCount:Ee}),H=(0,Kr.getPreClones)(te)+(0,Kr.getPostClones)(te)+Ee,ne=100/c.props.slidesToShow*H,be=100/H,Ae=-be*((0,Kr.getPreClones)(te)+c.state.currentSlide)*ne/100;c.props.centerMode&&(Ae+=(100-be*ne/100)/2);var le={width:ne+"%",left:Ae+"%"};return{slideWidth:be+"%",trackStyle:le}}),Jt(Yt(c),"checkImagesLoad",function(){var g=c.list&&c.list.querySelectorAll&&c.list.querySelectorAll(".slick-slide img")||[],h=g.length,C=0;Array.prototype.forEach.call(g,function(D){var $=function(){return++C&&C>=h&&c.onWindowResized()};if(!D.onclick)D.onclick=function(){return D.parentNode.focus()};else{var M=D.onclick;D.onclick=function(L){M(L),D.parentNode.focus()}}D.onload||(c.props.lazyLoad?D.onload=function(){c.adaptHeight(),c.callbackTimers.push(setTimeout(c.onWindowResized,c.props.speed))}:(D.onload=$,D.onerror=function(){$(),c.props.onLazyLoadError&&c.props.onLazyLoadError()}))})}),Jt(Yt(c),"progressiveLazyLoad",function(){for(var g=[],h=Ot(Ot({},c.props),c.state),C=c.state.currentSlide;C<c.state.slideCount+(0,Kr.getPostClones)(h);C++)if(c.state.lazyLoadedList.indexOf(C)<0){g.push(C);break}for(var D=c.state.currentSlide-1;D>=-(0,Kr.getPreClones)(h);D--)if(c.state.lazyLoadedList.indexOf(D)<0){g.push(D);break}g.length>0?(c.setState(function($){return{lazyLoadedList:$.lazyLoadedList.concat(g)}}),c.props.onLazyLoad&&c.props.onLazyLoad(g)):c.lazyLoadTimer&&(clearInterval(c.lazyLoadTimer),delete c.lazyLoadTimer)}),Jt(Yt(c),"slideHandler",function(g){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,C=c.props,D=C.asNavFor,$=C.beforeChange,M=C.onLazyLoad,L=C.speed,ce=C.afterChange,pe=c.state.currentSlide,se=(0,Kr.slideHandler)(Ot(Ot(Ot({index:g},c.props),c.state),{},{trackRef:c.track,useCSS:c.props.useCSS&&!h})),Ee=se.state,te=se.nextState;if(Ee){$&&$(pe,Ee.currentSlide);var H=Ee.lazyLoadedList.filter(function(ne){return c.state.lazyLoadedList.indexOf(ne)<0});M&&H.length>0&&M(H),!c.props.waitForAnimate&&c.animationEndCallback&&(clearTimeout(c.animationEndCallback),ce&&ce(pe),delete c.animationEndCallback),c.setState(Ee,function(){D&&c.asNavForIndex!==g&&(c.asNavForIndex=g,D.innerSlider.slideHandler(g)),te&&(c.animationEndCallback=setTimeout(function(){var ne=te.animating,be=U4(te,["animating"]);c.setState(be,function(){c.callbackTimers.push(setTimeout(function(){return c.setState({animating:ne})},10)),ce&&ce(Ee.currentSlide),delete c.animationEndCallback})},L))})}}),Jt(Yt(c),"changeSlide",function(g){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,C=Ot(Ot({},c.props),c.state),D=(0,Kr.changeSlide)(C,g);if(!(D!==0&&!D)&&(h===!0?c.slideHandler(D,h):c.slideHandler(D),c.props.autoplay&&c.autoPlay("update"),c.props.focusOnSelect)){var $=c.list.querySelectorAll(".slick-current");$[0]&&$[0].focus()}}),Jt(Yt(c),"clickHandler",function(g){c.clickable===!1&&(g.stopPropagation(),g.preventDefault()),c.clickable=!0}),Jt(Yt(c),"keyHandler",function(g){var h=(0,Kr.keyHandler)(g,c.props.accessibility,c.props.rtl);h!==""&&c.changeSlide({message:h})}),Jt(Yt(c),"selectHandler",function(g){c.changeSlide(g)}),Jt(Yt(c),"disableBodyScroll",function(){var g=function(C){C=C||window.event,C.preventDefault&&C.preventDefault(),C.returnValue=!1};window.ontouchmove=g}),Jt(Yt(c),"enableBodyScroll",function(){window.ontouchmove=null}),Jt(Yt(c),"swipeStart",function(g){c.props.verticalSwiping&&c.disableBodyScroll();var h=(0,Kr.swipeStart)(g,c.props.swipe,c.props.draggable);h!==""&&c.setState(h)}),Jt(Yt(c),"swipeMove",function(g){var h=(0,Kr.swipeMove)(g,Ot(Ot(Ot({},c.props),c.state),{},{trackRef:c.track,listRef:c.list,slideIndex:c.state.currentSlide}));h&&(h.swiping&&(c.clickable=!1),c.setState(h))}),Jt(Yt(c),"swipeEnd",function(g){var h=(0,Kr.swipeEnd)(g,Ot(Ot(Ot({},c.props),c.state),{},{trackRef:c.track,listRef:c.list,slideIndex:c.state.currentSlide}));if(h){var C=h.triggerSlideHandler;delete h.triggerSlideHandler,c.setState(h),C!==void 0&&(c.slideHandler(C),c.props.verticalSwiping&&c.enableBodyScroll())}}),Jt(Yt(c),"touchEnd",function(g){c.swipeEnd(g),c.clickable=!0}),Jt(Yt(c),"slickPrev",function(){c.callbackTimers.push(setTimeout(function(){return c.changeSlide({message:"previous"})},0))}),Jt(Yt(c),"slickNext",function(){c.callbackTimers.push(setTimeout(function(){return c.changeSlide({message:"next"})},0))}),Jt(Yt(c),"slickGoTo",function(g){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(g=Number(g),isNaN(g))return"";c.callbackTimers.push(setTimeout(function(){return c.changeSlide({message:"index",index:g,currentSlide:c.state.currentSlide},h)},0))}),Jt(Yt(c),"play",function(){var g;if(c.props.rtl)g=c.state.currentSlide-c.props.slidesToScroll;else if((0,Kr.canGoNext)(Ot(Ot({},c.props),c.state)))g=c.state.currentSlide+c.props.slidesToScroll;else return!1;c.slideHandler(g)}),Jt(Yt(c),"autoPlay",function(g){c.autoplayTimer&&clearInterval(c.autoplayTimer);var h=c.state.autoplaying;if(g==="update"){if(h==="hovered"||h==="focused"||h==="paused")return}else if(g==="leave"){if(h==="paused"||h==="focused")return}else if(g==="blur"&&(h==="paused"||h==="hovered"))return;c.autoplayTimer=setInterval(c.play,c.props.autoplaySpeed+50),c.setState({autoplaying:"playing"})}),Jt(Yt(c),"pause",function(g){c.autoplayTimer&&(clearInterval(c.autoplayTimer),c.autoplayTimer=null);var h=c.state.autoplaying;g==="paused"?c.setState({autoplaying:"paused"}):g==="focused"?(h==="hovered"||h==="playing")&&c.setState({autoplaying:"focused"}):h==="playing"&&c.setState({autoplaying:"hovered"})}),Jt(Yt(c),"onDotsOver",function(){return c.props.autoplay&&c.pause("hovered")}),Jt(Yt(c),"onDotsLeave",function(){return c.props.autoplay&&c.state.autoplaying==="hovered"&&c.autoPlay("leave")}),Jt(Yt(c),"onTrackOver",function(){return c.props.autoplay&&c.pause("hovered")}),Jt(Yt(c),"onTrackLeave",function(){return c.props.autoplay&&c.state.autoplaying==="hovered"&&c.autoPlay("leave")}),Jt(Yt(c),"onSlideFocus",function(){return c.props.autoplay&&c.pause("focused")}),Jt(Yt(c),"onSlideBlur",function(){return c.props.autoplay&&c.state.autoplaying==="focused"&&c.autoPlay("blur")}),Jt(Yt(c),"render",function(){var g=(0,F4.default)("slick-slider",c.props.className,{"slick-vertical":c.props.vertical,"slick-initialized":!0}),h=Ot(Ot({},c.props),c.state),C=(0,Kr.extractObject)(h,["fade","cssEase","speed","infinite","centerMode","focusOnSelect","currentSlide","lazyLoad","lazyLoadedList","rtl","slideWidth","slideHeight","listHeight","vertical","slidesToShow","slidesToScroll","slideCount","trackStyle","variableWidth","unslick","centerPadding","targetSlide","useCSS"]),D=c.props.pauseOnHover;C=Ot(Ot({},C),{},{onMouseEnter:D?c.onTrackOver:null,onMouseLeave:D?c.onTrackLeave:null,onMouseOver:D?c.onTrackOver:null,focusOnSelect:c.props.focusOnSelect&&c.clickable?c.selectHandler:null});var $;if(c.props.dots===!0&&c.state.slideCount>=c.props.slidesToShow){var M=(0,Kr.extractObject)(h,["dotsClass","slideCount","slidesToShow","currentSlide","slidesToScroll","clickHandler","children","customPaging","infinite","appendDots"]),L=c.props.pauseOnDotsHover;M=Ot(Ot({},M),{},{clickHandler:c.changeSlide,onMouseEnter:L?c.onDotsLeave:null,onMouseOver:L?c.onDotsOver:null,onMouseLeave:L?c.onDotsLeave:null}),$=yi.default.createElement(N4.Dots,M)}var ce,pe,se=(0,Kr.extractObject)(h,["infinite","centerMode","currentSlide","slideCount","slidesToShow","prevArrow","nextArrow"]);se.clickHandler=c.changeSlide,c.props.arrows&&(ce=yi.default.createElement(Vw.PrevArrow,se),pe=yi.default.createElement(Vw.NextArrow,se));var Ee=null;c.props.vertical&&(Ee={height:c.state.listHeight});var te=null;c.props.vertical===!1?c.props.centerMode===!0&&(te={padding:"0px "+c.props.centerPadding}):c.props.centerMode===!0&&(te={padding:c.props.centerPadding+" 0px"});var H=Ot(Ot({},Ee),te),ne=c.props.touchMove,be={className:"slick-list",style:H,onClick:c.clickHandler,onMouseDown:ne?c.swipeStart:null,onMouseMove:c.state.dragging&&ne?c.swipeMove:null,onMouseUp:ne?c.swipeEnd:null,onMouseLeave:c.state.dragging&&ne?c.swipeEnd:null,onTouchStart:ne?c.swipeStart:null,onTouchMove:c.state.dragging&&ne?c.swipeMove:null,onTouchEnd:ne?c.touchEnd:null,onTouchCancel:c.state.dragging&&ne?c.swipeEnd:null,onKeyDown:c.props.accessibility?c.keyHandler:null},Ae={className:g,dir:"ltr",style:c.props.style};return c.props.unslick&&(be={className:"slick-list"},Ae={className:g}),yi.default.createElement("div",Ae,c.props.unslick?"":ce,yi.default.createElement("div",Jf({ref:c.listRefHandler},be),yi.default.createElement(B4.Track,Jf({ref:c.trackRefHandler},C),c.props.children)),c.props.unslick?"":pe,c.props.unslick?"":$)}),c.list=null,c.track=null,c.state=Ot(Ot({},D4.default),{},{currentSlide:c.props.initialSlide,targetSlide:c.props.initialSlide?c.props.initialSlide:0,slideCount:yi.default.Children.count(c.props.children)}),c.callbackTimers=[],c.clickable=!0,c.debouncedResize=null;var x=c.ssrInit();return c.state=Ot(Ot({},c.state),x),c}return W4(a,[{key:"didPropsChange",value:function(c){for(var x=!1,g=0,h=Object.keys(this.props);g<h.length;g++){var C=h[g];if(!c.hasOwnProperty(C)){x=!0;break}if(!(_l(c[C])==="object"||typeof c[C]=="function"||isNaN(c[C]))&&c[C]!==this.props[C]){x=!0;break}}return x||yi.default.Children.count(this.props.children)!==yi.default.Children.count(c.children)}}]),a}(yi.default.Component);var X4=function(e){return e.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()}).toLowerCase()},Y4=X4,J4=Y4,Q4=function(e){var t=/[height|width]$/;return t.test(e)},Hw=function(e){var t="",a=Object.keys(e);return a.forEach(function(u,c){var x=e[u];u=J4(u),Q4(u)&&typeof x=="number"&&(x=x+"px"),x===!0?t+=u:x===!1?t+="not "+u:t+="("+u+": "+x+")",c<a.length-1&&(t+=" and ")}),t},ez=function(e){var t="";return typeof e=="string"?e:e instanceof Array?(e.forEach(function(a,u){t+=Hw(a),u<e.length-1&&(t+=", ")}),t):Hw(e)},tz=ez,_y,Ww;function rz(){if(Ww)return _y;Ww=1;function e(t){this.options=t,!t.deferSetup&&this.setup()}return e.prototype={constructor:e,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(t){return this.options===t||this.options.match===t}},_y=e,_y}var vy,qw;function tE(){if(qw)return vy;qw=1;function e(u,c){var x=0,g=u.length,h;for(x;x<g&&(h=c(u[x],x),h!==!1);x++);}function t(u){return Object.prototype.toString.apply(u)==="[object Array]"}function a(u){return typeof u=="function"}return vy={isFunction:a,isArray:t,each:e},vy}var xy,Zw;function nz(){if(Zw)return xy;Zw=1;var e=rz(),t=tE().each;function a(u,c){this.query=u,this.isUnconditional=c,this.handlers=[],this.mql=window.matchMedia(u);var x=this;this.listener=function(g){x.mql=g.currentTarget||g,x.assess()},this.mql.addListener(this.listener)}return a.prototype={constuctor:a,addHandler:function(u){var c=new e(u);this.handlers.push(c),this.matches()&&c.on()},removeHandler:function(u){var c=this.handlers;t(c,function(x,g){if(x.equals(u))return x.destroy(),!c.splice(g,1)})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){t(this.handlers,function(u){u.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var u=this.matches()?"on":"off";t(this.handlers,function(c){c[u]()})}},xy=a,xy}var wy,Gw;function iz(){if(Gw)return wy;Gw=1;var e=nz(),t=tE(),a=t.each,u=t.isFunction,c=t.isArray;function x(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}return x.prototype={constructor:x,register:function(g,h,C){var D=this.queries,$=C&&this.browserIsIncapable;return D[g]||(D[g]=new e(g,$)),u(h)&&(h={match:h}),c(h)||(h=[h]),a(h,function(M){u(M)&&(M={match:M}),D[g].addHandler(M)}),this},unregister:function(g,h){var C=this.queries[g];return C&&(h?C.removeHandler(h):(C.clear(),delete this.queries[g])),this}},wy=x,wy}var by,Kw;function oz(){if(Kw)return by;Kw=1;var e=iz();return by=new e,by}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=g(Pe),a=xm,u=g(tz),c=g(Z_),x=ht;function g(Ie){return Ie&&Ie.__esModule?Ie:{default:Ie}}function h(Ie){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ze){return typeof ze}:function(ze){return ze&&typeof Symbol=="function"&&ze.constructor===Symbol&&ze!==Symbol.prototype?"symbol":typeof ze},h(Ie)}function C(){return C=Object.assign?Object.assign.bind():function(Ie){for(var ze=1;ze<arguments.length;ze++){var Be=arguments[ze];for(var ut in Be)Object.prototype.hasOwnProperty.call(Be,ut)&&(Ie[ut]=Be[ut])}return Ie},C.apply(this,arguments)}function D(Ie,ze){var Be=Object.keys(Ie);if(Object.getOwnPropertySymbols){var ut=Object.getOwnPropertySymbols(Ie);ze&&(ut=ut.filter(function(Ke){return Object.getOwnPropertyDescriptor(Ie,Ke).enumerable})),Be.push.apply(Be,ut)}return Be}function $(Ie){for(var ze=1;ze<arguments.length;ze++){var Be=arguments[ze]!=null?arguments[ze]:{};ze%2?D(Object(Be),!0).forEach(function(ut){Ae(Ie,ut,Be[ut])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ie,Object.getOwnPropertyDescriptors(Be)):D(Object(Be)).forEach(function(ut){Object.defineProperty(Ie,ut,Object.getOwnPropertyDescriptor(Be,ut))})}return Ie}function M(Ie,ze){if(!(Ie instanceof ze))throw new TypeError("Cannot call a class as a function")}function L(Ie,ze){for(var Be=0;Be<ze.length;Be++){var ut=ze[Be];ut.enumerable=ut.enumerable||!1,ut.configurable=!0,"value"in ut&&(ut.writable=!0),Object.defineProperty(Ie,le(ut.key),ut)}}function ce(Ie,ze,Be){return ze&&L(Ie.prototype,ze),Object.defineProperty(Ie,"prototype",{writable:!1}),Ie}function pe(Ie,ze){if(typeof ze!="function"&&ze!==null)throw new TypeError("Super expression must either be null or a function");Ie.prototype=Object.create(ze&&ze.prototype,{constructor:{value:Ie,writable:!0,configurable:!0}}),Object.defineProperty(Ie,"prototype",{writable:!1}),ze&&se(Ie,ze)}function se(Ie,ze){return se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ut,Ke){return ut.__proto__=Ke,ut},se(Ie,ze)}function Ee(Ie){var ze=ne();return function(){var ut=be(Ie),Ke;if(ze){var Qe=be(this).constructor;Ke=Reflect.construct(ut,arguments,Qe)}else Ke=ut.apply(this,arguments);return te(this,Ke)}}function te(Ie,ze){if(ze&&(h(ze)==="object"||typeof ze=="function"))return ze;if(ze!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H(Ie)}function H(Ie){if(Ie===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ie}function ne(){try{var Ie=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ne=function(){return!!Ie})()}function be(Ie){return be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Be){return Be.__proto__||Object.getPrototypeOf(Be)},be(Ie)}function Ae(Ie,ze,Be){return ze=le(ze),ze in Ie?Object.defineProperty(Ie,ze,{value:Be,enumerable:!0,configurable:!0,writable:!0}):Ie[ze]=Be,Ie}function le(Ie){var ze=Me(Ie,"string");return h(ze)=="symbol"?ze:String(ze)}function Me(Ie,ze){if(h(Ie)!="object"||!Ie)return Ie;var Be=Ie[Symbol.toPrimitive];if(Be!==void 0){var ut=Be.call(Ie,ze||"default");if(h(ut)!="object")return ut;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ze==="string"?String:Number)(Ie)}var $e=(0,x.canUseDOM)()&&oz();e.default=function(Ie){pe(Be,Ie);var ze=Ee(Be);function Be(ut){var Ke;return M(this,Be),Ke=ze.call(this,ut),Ae(H(Ke),"innerSliderRefHandler",function(Qe){return Ke.innerSlider=Qe}),Ae(H(Ke),"slickPrev",function(){return Ke.innerSlider.slickPrev()}),Ae(H(Ke),"slickNext",function(){return Ke.innerSlider.slickNext()}),Ae(H(Ke),"slickGoTo",function(Qe){var nr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Ke.innerSlider.slickGoTo(Qe,nr)}),Ae(H(Ke),"slickPause",function(){return Ke.innerSlider.pause("paused")}),Ae(H(Ke),"slickPlay",function(){return Ke.innerSlider.autoPlay("play")}),Ke.state={breakpoint:null},Ke._responsiveMediaHandlers=[],Ke}return ce(Be,[{key:"media",value:function(Ke,Qe){$e.register(Ke,Qe),this._responsiveMediaHandlers.push({query:Ke,handler:Qe})}},{key:"componentDidMount",value:function(){var Ke=this;if(this.props.responsive){var Qe=this.props.responsive.map(function(Kt){return Kt.breakpoint});Qe.sort(function(Kt,Ft){return Kt-Ft}),Qe.forEach(function(Kt,Ft){var et;Ft===0?et=(0,u.default)({minWidth:0,maxWidth:Kt}):et=(0,u.default)({minWidth:Qe[Ft-1]+1,maxWidth:Kt}),(0,x.canUseDOM)()&&Ke.media(et,function(){Ke.setState({breakpoint:Kt})})});var nr=(0,u.default)({minWidth:Qe.slice(-1)[0]});(0,x.canUseDOM)()&&this.media(nr,function(){Ke.setState({breakpoint:null})})}}},{key:"componentWillUnmount",value:function(){this._responsiveMediaHandlers.forEach(function(Ke){$e.unregister(Ke.query,Ke.handler)})}},{key:"render",value:function(){var Ke=this,Qe,nr;this.state.breakpoint?(nr=this.props.responsive.filter(function(hr){return hr.breakpoint===Ke.state.breakpoint}),Qe=nr[0].settings==="unslick"?"unslick":$($($({},c.default),this.props),nr[0].settings)):Qe=$($({},c.default),this.props),Qe.centerMode&&(Qe.slidesToScroll>1,Qe.slidesToScroll=1),Qe.fade&&(Qe.slidesToShow>1,Qe.slidesToScroll>1,Qe.slidesToShow=1,Qe.slidesToScroll=1);var Kt=t.default.Children.toArray(this.props.children);Kt=Kt.filter(function(hr){return typeof hr=="string"?!!hr.trim():!!hr}),Qe.variableWidth&&(Qe.rows>1||Qe.slidesPerRow>1)&&(console.warn("variableWidth is not supported in case of rows > 1 or slidesPerRow > 1"),Qe.variableWidth=!1);for(var Ft=[],et=null,yt=0;yt<Kt.length;yt+=Qe.rows*Qe.slidesPerRow){for(var bt=[],Et=yt;Et<yt+Qe.rows*Qe.slidesPerRow;Et+=Qe.slidesPerRow){for(var jt=[],er=Et;er<Et+Qe.slidesPerRow&&(Qe.variableWidth&&Kt[er].props.style&&(et=Kt[er].props.style.width),!(er>=Kt.length));er+=1)jt.push(t.default.cloneElement(Kt[er],{key:100*yt+10*Et+er,tabIndex:-1,style:{width:"".concat(100/Qe.slidesPerRow,"%"),display:"inline-block"}}));bt.push(t.default.createElement("div",{key:10*yt+Et},jt))}Qe.variableWidth?Ft.push(t.default.createElement("div",{key:yt,style:{width:et}},bt)):Ft.push(t.default.createElement("div",{key:yt},bt))}if(Qe==="unslick"){var cr="regular slider "+(this.props.className||"");return t.default.createElement("div",{className:cr},Kt)}else Ft.length<=Qe.slidesToShow&&!Qe.infinite&&(Qe.unslick=!0);return t.default.createElement(a.InnerSlider,C({style:this.props.style,ref:this.innerSliderRefHandler},(0,x.filterSettings)(Qe)),Ft)}}]),Be}(t.default.Component)})(bT);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(bT);function a(u){return u&&u.__esModule?u:{default:u}}e.default=t.default})(wT);const az=rc(wT);function rE({images:e}){const t={infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:4e3,dots:!0};return qe.jsx("div",{className:"mt-6 carousel-container",children:qe.jsxs(az,{...t,children:[qe.jsx("div",{children:qe.jsx("img",{src:e.image1,className:"rounded-2xl object-cover mx-auto",alt:"Slide 1"})}),qe.jsx("div",{children:qe.jsx("img",{src:e.image2,className:"rounded-2xl object-cover mx-auto",alt:"Slide 2"})}),qe.jsx("div",{children:qe.jsx("img",{src:e.image3,className:"rounded-2xl object-cover mx-auto",alt:"Slide 3"})})]})})}rE.propTypes={images:Lh.shape({image1:Lh.string.isRequired,image2:Lh.string.isRequired,image3:Lh.string.isRequired}).isRequired};const sz="/mualaApp/assets/mualalogo-CEI02jA0.png";function nE(e){return Fi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 288 480 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-370.7 0 73.4-73.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-128 128z"},child:[]}]})(e)}function lz(){var c;const{id:e}=EI(),t=Vf.find(x=>x.id===e),u=((c=oa().state)==null?void 0:c.link)||"/";return qe.jsxs("div",{className:"markerdetail h-[90vh] 2xl:w-[1440px] mx-auto bg-appColor dark:bg-lightGray dark:text-appColor overflow-y-auto overflow-x-hidden",children:[qe.jsx("div",{className:"fixed z-10 flex rounded-full top-2 left-4 bg-navColor text-white shadow-lg duration-200 hover:text-main hover:shadow-main hover:scale-110",children:qe.jsx("button",{type:"button",className:"p-3",children:qe.jsx(Nf,{to:`../${u}`,children:qe.jsx(nE,{size:30})})})}),qe.jsx("img",{src:sz,className:"absolute top-10 left-1/2 transform -translate-x-1/2 -translate-y-1/2 size-16",alt:"logo"}),qe.jsx("img",{src:t.mainImage,alt:"Delicious Noodle Bar",className:"w-full h-2/5 object-cover bg-center"}),qe.jsx("div",{className:"absolute bottom-4 left-0 right-0 bg-appColor dark:bg-lightGray dark:text-appColor rounded-t-[2rem] 2xl:rounded-none px-8 pt-4 text-fontColor text-xl h-3/5",children:qe.jsxs("div",{className:"mx-auto lg:w-3/5 2xl:w-2/5",children:[qe.jsx("h1",{className:"text-5xl text-center tracking-wider font-bold bg-gradient-to-tr from-yellow-500 via-yellow-400 to-amber-500 bg-clip-text text-transparent pb-2",children:t.title}),qe.jsx("p",{className:"text-main text-center dark:font-normal font-extralight italic -mt-2",children:t.subtitle}),qe.jsxs("p",{className:"flex items-center justify-center dark:font-normal font-extralight mt-3",children:[qe.jsx(l3,{className:"mr-2"}),t.address]}),t.phone&&qe.jsxs("a",{href:`tel:${t.phone}`,className:"flex items-center justify-center dark:font-normal font-extralight mt-3",children:[qe.jsx(s3,{className:"mr-2"}),t.phone]}),qe.jsxs("div",{className:`mx-auto grid gap-5 dark:text-white ${t.website===""||t.youtube===""||t.googleMaps===""?"grid-cols-2":"grid-cols-3"} h-40 text-2xl`,children:[t.website&&qe.jsxs("a",{href:t.website,className:"group col-span-1 row-span-1 flex items-center justify-center mt-4 px-5 bg-gradient-to-tr from-orange-400 via-amber-400 to-orange-400 rounded-2xl shadow-lg transition-colors hover:bg-whiteHover",children:[qe.jsx(vA,{className:"mr-1 duration-300 group-hover:text-blue-600"}),"WWW"]}),qe.jsxs("a",{href:t.youtube,className:"group col-span-1 row-span-1 flex items-center justify-center mt-4 px-5 bg-gradient-to-tr from-orange-400 via-amber-400 to-orange-400 rounded-2xl shadow-lg transition-colors hover:bg-whiteHover",target:"_blank",children:[qe.jsx(xT,{className:"mr-1 duration-300 group-hover:text-red-600"}),"Youtube"]}),qe.jsxs("a",{href:t.googleMaps,className:"group col-span-1 row-span-1 flex items-center justify-center mt-4 px-5 bg-gradient-to-tr from-orange-400 via-amber-400 to-orange-400 rounded-2xl shadow-lg transition-colors hover:bg-whiteHover",children:[qe.jsx(a3,{className:"mr-1 duration-300 group-hover:text-green-600"}),"Maps"]})]}),qe.jsx(rE,{images:t.images})]})})]})}function uz(){var a;const t=((a=oa().state)==null?void 0:a.link)||"/";return qe.jsxs("div",{className:"w-4/6 mx-auto mt-4 2xl:w-[1440px]",children:[qe.jsx("div",{className:"fixed z-10 flex rounded-full top-2 left-4 bg-navColor  text-white shadow-lg duration-200 hover:text-main hover:shadow-main hover:scale-110",children:qe.jsx("button",{type:"button",className:"p-3",children:qe.jsx(Nf,{to:`../${t}`,children:qe.jsx(nE,{size:30})})})}),Vf.map((u,c)=>(c++,qe.jsx(Nf,{to:`/${u.id}`,state:{from:"/list"},children:qe.jsxs("div",{className:"flex items-center 2xl:w-[1000px] justify-center relative text-white dark:text-appColor mb-6 w-full xl:w-4/6 border-[2px] border-[#424349] dark:border-[#e6e5e5] mx-auto p-2 rounded-2xl shadow-xl hover:shadow-main hover:shadow-md transition duration-300",children:[qe.jsx("span",{className:"absolute flex items-center justify-center left-2 top-2 rounded-full bg-main size-6 text-white",children:c}),qe.jsxs("div",{className:"w-4/6 mt-7 flex justify-center flex-col font-medium text-left",children:[qe.jsx("h1",{className:"lg:text-xl xl:text-2xl mb-2",children:u.title}),qe.jsxs("a",{href:u.youtube,className:"group flex w-1/2 p-7 items-center lg:text-lg xl:text-xl justify-center lg:mt-2 bg-gradient-to-tr from-orange-400 dark:text-white via-amber-400 to-orange-400 rounded-2xl shadow-lg transition-colors hover:bg-whiteHover",children:[qe.jsx(xT,{className:"mr-1 duration-300  group-hover:text-red-600"}),"Youtube"]})]}),qe.jsx("div",{className:"w-3/6 max-h-1/2",children:qe.jsx("div",{className:"rounded-2xl overflow-hidden aspect-w-16 aspect-h-9",children:qe.jsx("img",{src:u.mainImage,className:"object-cover w-full h-full",style:{width:"100%",height:"100%",objectFit:"cover"},alt:"main image"})})})]})},u.id)))]})}const cz=ZI([{path:"/mualaApp/",element:qe.jsx(EA,{}),children:[{path:"/mualaApp/",element:qe.jsx(o3,{})},{path:"/mualaApp/:id",element:qe.jsx(lz,{})},{path:"/mualaApp/list",element:qe.jsx(uz,{})}]}]);Sy.createRoot(document.getElementById("root")).render(qe.jsx(Fn.StrictMode,{children:qe.jsx(tA,{router:cz})}));
